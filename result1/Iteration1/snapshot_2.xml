<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="2">
  <HTTPTask id="2" hostname="omniconv" path="/omni/index.jsp" url="http://omniconv/omni/index.jsp" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="Primary" startDateTime="2018-08-14T12:26:56.331-07:00" startTime="1872" endTime="1878" sendTime="1" waitTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="User-Agent" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9vbW5pL2luZGV4LmpzcCBIVFRQLzEuMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1s</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="WWW-Authenticate" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TmVnb3RpYXRl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="WWW-Authenticate" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TlRMTQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI5Mw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgNDAxIFVuYXV0aG9yaXplZA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWwNClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNCldXVy1BdXRoZW50aWNhdGU6IE5lZ290aWF0ZQ0KV1dXLUF1dGhlbnRpY2F0ZTogTlRMTQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDEyOTMNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGQiPg0KPGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPg0KPGhlYWQ+DQo8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1pc28tODg1OS0xIi8+DQo8dGl0bGU+NDAxIC0gVW5hdXRob3JpemVkOiBBY2Nlc3MgaXMgZGVuaWVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWxzLjwvdGl0bGU+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KPCEtLQ0KYm9keXttYXJnaW46MDtmb250LXNpemU6LjdlbTtmb250LWZhbWlseTpWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO2JhY2tncm91bmQ6I0VFRUVFRTt9DQpmaWVsZHNldHtwYWRkaW5nOjAgMTVweCAxMHB4IDE1cHg7fSANCmgxe2ZvbnQtc2l6ZToyLjRlbTttYXJnaW46MDtjb2xvcjojRkZGO30NCmgye2ZvbnQtc2l6ZToxLjdlbTttYXJnaW46MDtjb2xvcjojQ0MwMDAwO30gDQpoM3tmb250LXNpemU6MS4yZW07bWFyZ2luOjEwcHggMCAwIDA7Y29sb3I6IzAwMDAwMDt9IA0KI2hlYWRlcnt3aWR0aDo5NiU7bWFyZ2luOjAgMCAwIDA7cGFkZGluZzo2cHggMiUgNnB4IDIlO2ZvbnQtZmFtaWx5OiJ0cmVidWNoZXQgTVMiLCBWZXJkYW5hLCBzYW5zLXNlcmlmO2NvbG9yOiNGRkY7DQpiYWNrZ3JvdW5kLWNvbG9yOiM1NTU1NTU7fQ0KI2NvbnRlbnR7bWFyZ2luOjAgMCAwIDIlO3Bvc2l0aW9uOnJlbGF0aXZlO30NCi5jb250ZW50LWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNGRkY7d2lkdGg6OTYlO21hcmdpbi10b3A6OHB4O3BhZGRpbmc6MTBweDtwb3NpdGlvbjpyZWxhdGl2ZTt9DQotLT4NCjwvc3R5bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCjxkaXYgaWQ9ImhlYWRlciI+PGgxPlNlcnZlciBFcnJvcjwvaDE+PC9kaXY+DQo8ZGl2IGlkPSJjb250ZW50Ij4NCiA8ZGl2IGNsYXNzPSJjb250ZW50LWNvbnRhaW5lciI+PGZpZWxkc2V0Pg0KICA8aDI+NDAxIC0gVW5hdXRob3JpemVkOiBBY2Nlc3MgaXMgZGVuaWVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWxzLjwvaDI+DQogIDxoMz5Zb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IHRoaXMgZGlyZWN0b3J5IG9yIHBhZ2UgdXNpbmcgdGhlIGNyZWRlbnRpYWxzIHRoYXQgeW91IHN1cHBsaWVkLjwvaDM+DQogPC9maWVsZHNldD48L2Rpdj4NCjwvZGl2Pg0KPC9ib2R5Pg0KPC9odG1sPg0K</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
    <HTTPTask id="11" hostname="omniconv" path="/omni/index.jsp" url="http://omniconv/omni/index.jsp" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="Authentication" startDateTime="2018-08-14T12:26:56.344-07:00" startTime="1885" endTime="1890" sendTime="2" waitTime="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="User-Agent" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>b21uaWNvbnY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Authorization" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TlRMTSBUbFJNVFZOVFVBQUJBQUFBQjdJSW9nc0FDd0F2QUFBQUR3QVBBQ0FBQUFCRVQwTXhXbFJWVFRFeE5qZzNPREZFVDBNeExsZEJMa3hEVEE9PQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9vbW5pL2luZGV4LmpzcCBIVFRQLzEuMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQXV0aG9yaXphdGlvbjogTlRMTSBUbFJNVFZOVFVBQUJBQUFBQjdJSW9nc0FDd0F2QUFBQUR3QVBBQ0FBQUFCRVQwTXhXbFJWVFRFeE5qZzNPREZFVDBNeExsZEJMa3hEVEE9PQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PXVzLWFzY2lp</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUhUVFBBUEkvMi4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="WWW-Authenticate" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TlRMTSBUbFJNVFZOVFVBQUNBQUFBQ0FBSUFEZ0FBQUFGZ29taU1QUVFiRksrSFZJQUFBQUFBQUFBQUpZQWxnQkFBQUFBQmdHeEhRQUFBQTlFQUU4QVF3QXhBQUlBQ0FCRUFFOEFRd0F4QUFFQUdBQkVBRThBUXdBeEFGY0FRZ0JVQUZVQVRRQXhBRGNBTVFBRUFCWUFSQUJQQUVNQU1RQXVBSGNBWVFBdUFHd0FZd0JzQUFNQU1BQkVBRThBUXdBeEFGY0FRZ0JVQUZVQVRRQXhBRGNBTVFBdUFFUUFUd0JEQURFQUxnQjNBR0VBTGdCc0FHTUFiQUFGQUF3QWR3QmhBQzRBYkFCakFHd0FCd0FJQUJzQ1Q4TUVOTlFCQUFBQUFBPT0=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzQx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgNDAxIFVuYXV0aG9yaXplZA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9dXMtYXNjaWkNClNlcnZlcjogTWljcm9zb2Z0LUhUVFBBUEkvMi4wDQpXV1ctQXV0aGVudGljYXRlOiBOVExNIFRsUk1UVk5UVUFBQ0FBQUFDQUFJQURnQUFBQUZnb21pTVBRUWJGSytIVklBQUFBQUFBQUFBSllBbGdCQUFBQUFCZ0d4SFFBQUFBOUVBRThBUXdBeEFBSUFDQUJFQUU4QVF3QXhBQUVBR0FCRUFFOEFRd0F4QUZjQVFnQlVBRlVBVFFBeEFEY0FNUUFFQUJZQVJBQlBBRU1BTVFBdUFIY0FZUUF1QUd3QVl3QnNBQU1BTUFCRUFFOEFRd0F4QUZjQVFnQlVBRlVBVFFBeEFEY0FNUUF1QUVRQVR3QkRBREVBTGdCM0FHRUFMZ0JzQUdNQWJBQUZBQXdBZHdCaEFDNEFiQUJqQUd3QUJ3QUlBQnNDVDhNRU5OUUJBQUFBQUE9PQ0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAzNDENCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEvL0VOIiJodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNC9zdHJpY3QuZHRkIj4NCjxIVE1MPjxIRUFEPjxUSVRMRT5Ob3QgQXV0aG9yaXplZDwvVElUTEU+DQo8TUVUQSBIVFRQLUVRVUlWPSJDb250ZW50LVR5cGUiIENvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11cy1hc2NpaSI+PC9IRUFEPg0KPEJPRFk+PGgyPk5vdCBBdXRob3JpemVkPC9oMj4NCjxocj48cD5IVFRQIEVycm9yIDQwMS4gVGhlIHJlcXVlc3RlZCByZXNvdXJjZSByZXF1aXJlcyB1c2VyIGF1dGhlbnRpY2F0aW9uLjwvcD4NCjwvQk9EWT48L0hUTUw+DQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
      <HTTPTask id="12" hostname="omniconv" path="/omni/index.jsp" url="http://omniconv/omni/index.jsp" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="Authentication" startDateTime="2018-08-14T12:26:56.355-07:00" startTime="1896" endTime="2154" sendTime="211" waitTime="39" receiveTime="22">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name="User-Agent" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Connection" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Host" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>b21uaWNvbnY=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Authorization" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TlRMTSBUbFJNVFZOVFVBQURBQUFBR0FBWUFKd0FBQUFZQUJnQXRBQUFBQllBRmdCQUFBQUFLQUFvQUZZQUFBQWVBQjRBZmdBQUFBQUFBQURNQUFBQUJZS0lva1FBVHdCREFERUFMZ0JYQUVFQUxnQk1BRU1BVEFCekFIWUFZd0IzQUdFQWRRQjBBR1VBY3dCMEFIVUFjd0JsQUhJQU1BQXhBR1FBYndCakFERUFSQUJQQUVNQU1RQmFBRlFBVlFCTkFERUFNUUEyQURnQU53QTRBREVBd1h5TUJrZG9pQklBQUFBQUFBQUFBQUFBQUFBQUFBQUFWRnZhU3RleitxV2FPMGlINDFJbGVZSWQ0a1ZEd2xGbA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VUIC9vbW5pL2luZGV4LmpzcCBIVFRQLzEuMQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQXV0aG9yaXphdGlvbjogTlRMTSBUbFJNVFZOVFVBQURBQUFBR0FBWUFKd0FBQUFZQUJnQXRBQUFBQllBRmdCQUFBQUFLQUFvQUZZQUFBQWVBQjRBZmdBQUFBQUFBQURNQUFBQUJZS0lva1FBVHdCREFERUFMZ0JYQUVFQUxnQk1BRU1BVEFCekFIWUFZd0IzQUdFQWRRQjBBR1VBY3dCMEFIVUFjd0JsQUhJQU1BQXhBR1FBYndCakFERUFSQUJQQUVNQU1RQmFBRlFBVlFCTkFERUFNUUEyQURnQU53QTRBREVBd1h5TUJrZG9pQklBQUFBQUFBQUFBQUFBQUFBQUFBQUFWRnZhU3RleitxV2FPMGlINDFJbGVZSWQ0a1ZEd2xGbA0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
        </HTTPRequest>
        <HTTPResponse>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Cache-Control" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bm8tY2FjaGU9InNldC1jb29raWUsIHNldC1jb29raWUyIg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Transfer-Encoding" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Y2h1bmtlZA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Type" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Encoding" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Content-Language" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Expires" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VGh1LCAwMSBEZWMgMTk5NCAxNjowMDowMCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Vary" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Server" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Set-Cookie" index="8">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE7IFBhdGg9Lw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Server" index="9">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>V2ViU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlci83LjA=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Persistent-Auth" index="10">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dHJ1ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="X-Powered-By" index="11">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QVNQLk5FVA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Date" index="12">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBuby1jYWNoZT0ic2V0LWNvb2tpZSwgc2V0LWNvb2tpZTIiDQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCkV4cGlyZXM6IFRodSwgMDEgRGVjIDE5OTQgMTY6MDA6MDAgR01UDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClNldC1Db29raWU6IEpTRVNTSU9OSUQ9MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0xOyBQYXRoPS8NClNlcnZlcjogV2ViU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlci83LjANClBlcnNpc3RlbnQtQXV0aDogdHJ1ZQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>DQo8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBUcmFuc2l0aW9uYWwvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxL0RURC94aHRtbDEtdHJhbnNpdGlvbmFsLmR0ZCI+DQo8aHRtbCBsYW5nPSJlbi1VUyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPg0KDQoJPCEtLSBIZWFkZXIgcG9ydGlvbjogQkVHSU4gLS0+DQoJPGhlYWQ+DQoNCgkJPCEtLSBTZXQgdGhlIG1ldGEgcGFyYW1ldGVycyBmb3IgdGhpcyBwYWdlIC0tPg0KCQkNCgkJPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOCIgLz4NCgkJPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1TdHlsZS1UeXBlIiBjb250ZW50PSJ0ZXh0L2NzcyIgLz4NCg0KCQk8IS0tIEluY2x1ZGUgY29tbW9uIEpTUCBmaWxlcyBmb3IgT01OSSAtLT4NCgkJDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KCQkNCg0KDQoJCQkJPCEtLSBHbG9iYWwgYm9keSBzdHlsZSBkZWNsYXJhdGlvbnMgLS0+DQoJCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1ib2R5LXN0eWxlcy5jc3MiIC8+DQoNCgkJPCEtLSBHbG9iYWwgZXJyb3Igc3R5bGUgZGVjbGFyYXRpb25zIC0tPg0KCQk8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvT01OSVN0YXRpYy90aGVtZXMvb21uaS9nbG9iYWwtZXJyb3Itc3R5bGVzLmNzcyIgLz4NCg0KCQk8IS0tIEdsb2JhbCBoeXBlcmxpbmsgc3R5bGUgZGVjbGFyYXRpb25zIC0tPg0KCQk8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvT01OSVN0YXRpYy90aGVtZXMvb21uaS9nbG9iYWwtbGluay1zdHlsZXMuY3NzIiAvPg0KDQoJCTwhLS0gR2xvYmFsIGxheWVyIHN0eWxlIGRlY2xhcmF0aW9ucyAtLT4NCgkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL09NTklTdGF0aWMvdGhlbWVzL29tbmkvZ2xvYmFsLWxheWVyLXN0eWxlcy5jc3MiIC8+DQoNCgkJPCEtLSBHbG9iYWwgbGF5b3V0IGRlY2xhcmF0aW9ucyAtLT4NCgkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL09NTklTdGF0aWMvdGhlbWVzL29tbmkvZ2xvYmFsLWxheW91dC1zdHlsZXMuY3NzIiAvPg0KDQoJCTwhLS0gR2xvYmFsIG1lbnUgc3R5bGUgZGVjbGFyYXRpb25zIC0tPg0KCQk8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvT01OSVN0YXRpYy90aGVtZXMvb21uaS9nbG9iYWwtbWVudS1zdHlsZXMuY3NzIiAvPg0KDQoJCTwhLS0gR2xvYmFsIHByaW50IHN0eWxlIGRlY2xhcmF0aW9ucyAtLT4NCgkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL09NTklTdGF0aWMvdGhlbWVzL29tbmkvZ2xvYmFsLXByaW50LXN0eWxlcy5jc3MiIG1lZGlhPSJwcmludCIgLz4NCg0KCQ0KCQk8IS0tIENvbW1vbiBzY3JpcHRzIHVzZWQgaW4gT01OSSAtLT4NCgkJPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL09NTklTdGF0aWMvc2NyaXB0cy9jb21tb24tc2NyaXB0cy5qcyI+PC9zY3JpcHQ+DQoNCgkJPCEtLSBDb21tb24gZGVmZXJyZWQgc2NyaXB0cyB1c2VkIGluIE9NTkkgLS0+DQogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBkZWZlcj0iZGVmZXIiIHNyYz0iL09NTklTdGF0aWMvc2NyaXB0cy9jb21tb24tZGVmZXJyZWQtc2NyaXB0cy5qcyI+PC9zY3JpcHQ+DQogICAgICAgIA0KICAgICAgICA8IS0tIENvbW1vbiBqcXVlcnkgc2NyaXB0cyB1c2VkIGluIE9NTkkgLS0+DQogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS0xLjkuMS5taW4uanMiPjwvc2NyaXB0Pg0KICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvT01OSVN0YXRpYy9zY3JpcHRzL2pxdWVyeS9qcXVlcnktZXh0ZW5zaW9uLTEuOS4xLmpzIj48L3NjcmlwdD4NCiAgICAgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL09NTklTdGF0aWMvc2NyaXB0cy9qcXVlcnkvanF1ZXJ5LXVpLmpzIj48L3NjcmlwdD4NCiAgICAgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL09NTklTdGF0aWMvc2NyaXB0cy9qcXVlcnkvanF1ZXJ5LXVpLWV4dGVuc2lvbi5qcyI+PC9zY3JpcHQ+DQoJCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS11aS5jc3MiIC8+DQoNCiAgICAgICAgPCEtLSBkd3Igc2NyaXB0cyB1c2VkIGluIE9NTkkgLS0+DQogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9vbW5pL2R3ci9lbmdpbmUuanMiPjwvc2NyaXB0Pg0KCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvb21uaS9kd3IvdXRpbC5qcyI+PC9zY3JpcHQ+ICAgIA0KCQkNCiAgICAgICAgPCEtLSBDb21tb24gc2Vzc2lvbiBzdG9yYWdlIHNjcmlwdHMgdXNlZCBpbiBPTU5JIC0tPg0KICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvT01OSVN0YXRpYy9zY3JpcHRzL2NvbW1vbi1zZXNzaW9uLXN0b3JhZ2UuanMiPjwvc2NyaXB0Pg0KICAgICAgICANCg0KDQoNCg0KDQoNCgkJPCEtLSAkbGF5ZXJuYW1lIGlzIHNldCB0byAiaWQtbWFpbi1yaWdodCIgYnkgZGVmYXVsdDogb3ZlcnJpZGUgaWYgbmVjY2Vzc2FyeSAtLT4NCgkJDQoNCgkJPCEtLSBQYWdlLXNwZWNpZmljIGhlYWQgY29udGVudDogQkVHSU4gLS0+DQoJCQ0KCQk8dGl0bGU+T01OSTogSG9tZTwvdGl0bGU+DQoJCTxzY3JpcHQgbGFuZ3VhZ2U9IkphdmFTY3JpcHQiIHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoJCTwhLS0NCg0KCQkNCg0KCQlmdW5jdGlvbiBleHRlcm5hbExpbmtzKCkgeyANCgkJCWlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoJCQl2YXIgYW5jaG9ycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIik7IA0KCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBhbmNob3JzLmxlbmd0aDsgaSsrKSB7DQoJCQkJdmFyIGFuY2hvciA9IGFuY2hvcnNbaV07DQoJCQkJaWYgKGFuY2hvci5nZXRBdHRyaWJ1dGUoImhyZWYiKSAmJiBhbmNob3IuZ2V0QXR0cmlidXRlKCJyZWwiKSA9PSAiZXh0ZXJuYWwiKSB7DQoJCQkJCWFuY2hvci50YXJnZXQgPSAiX2JsYW5rIjsNCgkJCQl9DQoJCQl9DQoJCX0NCgkJDQoJCQ0KCQlmdW5jdGlvbiBtb3ZlQ3Vyc29yVG9Eb2NObygpDQoJCXsNCgkJCS8vc2V0IGRvY19ubyB0byBlbXB0eSBzaW5jZSBpdCBtaWdodCBjYXJpZWQgdGhlIGNhY2hlZCBkb2MgbnVtYmVyIG92ZXIgZnJvbSBwcmV2aW91cyBicm93c2VyDQoJCQkvL2l0IG9ubHkgaGFwcGVucyB3aGVuIHVzZXIgc2VsZWN0IEZpbGUtPk5ldyBXaW5kb3cgd2l0aGluIGN1cnJlbnQgT01OTiBTY3JlZW4uDQoJCQlpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiaXNOZXdCcm93c2VyIikgIT0gbnVsbCAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpc05ld0Jyb3dzZXIiKSA9PSAiWSIpDQoJCQl7DQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvY19ubycpLnZhbHVlID0gIiI7DQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkRG9jTm8nKS5pbm5lckhUTUwgPSAiU2VsZWN0ZWQgRE9DIE5vLjombmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwkJCQkNCgkJCQlzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJpc05ld0Jyb3dzZXIiLCBudWxsKTsNCgkJCQkNCgkJCX0NCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb2Nfbm8nKS5mb2N1cygpOw0KCQkJLy8gRGVmZWN0IDE2NTQzDQoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9jX25vJykuc2VsZWN0KCk7CQkJCQkNCgkJfQ0KDQoNCgkJDQoNCgkJd2luZG93Lm9ubG9hZCA9IGV4dGVybmFsTGlua3M7DQoNCgkJLy8gLS0+DQoJCTwvc2NyaXB0Pg0KDQoJCQ0KCQkNCgkJPCEtLSBQYWdlLXNwZWNpZmljIGhlYWQgY29udGVudDogRU5EIC0tPg0KDQoJPC9oZWFkPg0KCTwhLS0gSGVhZGVyIHBvcnRpb246IEVORCAtLT4NCg0KCTwhLS0gQm9keSBwb3J0aW9uOiBCRUdJTi0tPg0KCQ0KCTxib2R5IG9ubG9hZD0ibW92ZUN1cnNvclRvRG9jTm8oKTsiPg0KCQ0KDQoJCTwhLS0gSGVhZGVyIGNvbnRlbnQgcGFuZTogQkVHSU4gLS0+DQoJCTxkaXYgaWQ9ImlkLW1haW4taGVhZGVyIj4NCg0KCQkJPCEtLSBBcHBsaWNhdGlvbiBoZWFkZXI6IEJFR0lOIC0tPg0KCQkJDQo8IS0tIEhlYWRlciAvIEdsb2JhbDogQkVHSU4gLS0+DQoNCgk8IS0tIEdsb2JhbCBoZWFkZXIgaW1hZ2VzOiBCRUdJTiAtLT4NCgk8ZGl2IGlkPSJpZC1tYWluLWhlYWRlci1hLTEiPg0KCQk8aW1nIHNyYz0iL09NTklTdGF0aWMvaW1hZ2VzL2xvZ28tZG9jLmdpZiIgYWx0PSJEZXBhcnRtZW50IE9mIENvcnJlY3Rpb25zIGxvZ28iIHdpZHRoPSIxNjEiIGhlaWdodD0iMzgiIC8+DQoJPC9kaXY+DQoJDQoJDQoJDQoJCQ0KCQk8ZGl2IGlkPSJpZC1tYWluLWhlYWRlci1hLTIiPg0KCQkqKioqKipURVNULUNPTlYqKioqKio8YnIvPg0KCQkJPGltZyBzcmM9Ii9PTU5JU3RhdGljL2ltYWdlcy9sb2dvLW9tbmkuZ2lmIiBhbHQ9Ik9mZmVuZGVyIE1hbmFnZW1lbnQgTmV0d29yayBJbmZvcm1hdGlvbiBsb2dvIiB3aWR0aD0iMzE2IiBoZWlnaHQ9IjI1IiAvPg0KCQk8L2Rpdj4NCgkJDQoJCQ0KCQ0KCTwhLS0gR2xvYmFsIGhlYWRlciBpbWFnZXM6IEVORCAtLT4NCg0KCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCgkvLzwhW0NEQVRBWw0KCS8vICBmdW5jdGlvbiBmb3Igc3VwcHJlc3NpbmcgZm9ybSBzdWJtaXNzaW9uIGlmIGVudGVyIGlzIHByZXNzZWQNCgkvLyAgd2hlbiBjdXJzb3IgaW4gYSBpbnB1dCB0eXBlPSJ0ZXh0Ig0KICAgICAgICAgIGZ1bmN0aW9uIGtpbGxFbnRlckFmdGVyRmlyc3QoZXZ0KQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgICBpZihldnQua2V5Q29kZSA9PSAxMyB8fCBldnQud2hpY2ggPT0gMTMpew0KICAgICAgICAgIAkJLy9PTU5JMDAwMTYyNzkgR0xPQkFMIC0gRW50ZXJpbmcgYSBET0MgTnVtYmVyIGluIHRoZSBET0NOTyBib3ggYW5kIGhpdHRpbmcgRU5URVIgQnlwYXNzZXMgU2NyZWVuIFdhcm5pbmcNCiAgICAgICAgICAJCWlmKCFoYXNGb3JtQ2hhbmdlZChjdXJyZW50T21uaUZvcm0pKSB7DQoJICAgICAgICAgIAkJcmV0dXJuIHRydWU7DQogICAgICAgICAgCQl9IGVsc2Ugew0KICAgICAgICAgIAkJCWlmKGNoZWNrRm9ybUNoYW5nZWQoKSkgew0KCQkJCQkJZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoJ2RvY051bWJlclNlYXJjaEZvcm0nKTsNCgkJCQkJCWRvY3VtZW50LmZvcm1zWydkb2NOdW1iZXJTZWFyY2hGb3JtJ10uc3VibWl0KCk7DQoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9jX25vJykuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsImRpc2FibGVkIik7DQoJCSAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCgkJCQkJfSBlbHNlIHsNCgkJCSAgICAgIAkJcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIAkJCX0NCiAgICAgICAgICAJCX0NCiAgICAgICAgICAgCX0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBmdW5jdGlvbiBkaXNhYmxlU3VibWl0QnV0dG9uKGZvcm1OYW1lKSB7DQogICAgICAgIAl2YXIgZWxlbSA9IG51bGw7DQogICAgICAgIAlkb2N1bWVudC5mb3Jtc1snZG9jTnVtYmVyU2VhcmNoRm9ybSddLnN1Ym1pdCgpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb2Nfbm8nKS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwiZGlzYWJsZWQiKTsNCg0KICAgICAgICAgICAgICAgIGZvciAoIGo9MDtqPCBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHMubGVuZ3RoOyBqKysgKSB7DQogICAgICAgICAgICAgICAgICAgIAllbGVtID0gZG9jdW1lbnQuZm9ybXNbZm9ybU5hbWVdLmVsZW1lbnRzW2pdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtLnR5cGUgJiYgKGVsZW0udHlwZSA9PSAnc3VibWl0JyB8fCBlbGVtLnR5cGUgPT0gJ3Jlc2V0JyB8fCBlbGVtLnR5cGUgPT0gJ2J1dHRvbicpKSB7DQoJICAgIAkgICAgICAgICAgICAgICAgZWxlbS5vbmNsaWNrID0gdm9pZEFjdGlvbjsNCgkgICAgCSAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmNvbG9yPScjY2NjYzk5JzsNCgkgICAgICAgICAgICAgICAgfQ0KCSAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZ1bmN0aW9uIG9uU3VibWl0SGFuZGxlcigpIHsNCg0KICAgICAgICAgIAlpZighaGFzRm9ybUNoYW5nZWQoY3VycmVudE9tbmlGb3JtKSkgew0KDQogICAgICAgICAgCQlyZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAJfSBlbHNlIHsNCiAgICAgICAgICAJCWlmKGNoZWNrRm9ybUNoYW5nZWQoKSkgew0KICAgICAgICAgIAkJICAgICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoJ2RvY051bWJlclNlYXJjaEZvcm0nLGZhbHNlKTsNCgkJCSAgICAgIHJldHVybiB0cnVlOw0KCQkJfSBlbHNlIHsNCgkJCSAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAJCX0NCiAgICAgICAgICAJfQ0KDQogICAgICAgICAgfQ0KCS8vXV0+DQoJPC9zY3JpcHQ+DQoJPCEtLSBHbG9iYWwgRE9DIG51bWJlcjogQkVHSU4gLS0+DQoJDQoJDQoJPGRpdiBpZD0iaWQtbWFpbi1oZWFkZXItYS0zIj4NCgkJPGZvcm0gaWQ9ImRvY051bWJlclNlYXJjaEZvcm0iIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIvb21uaS9jb21tb24vZG9jTnVtYmVyU2VhcmNoLmh0bSIgb25zdWJtaXQ9InJldHVybiBvblN1Ym1pdEhhbmRsZXIoKTsiPg0KCQkJPHRhYmxlIGNsYXNzPSJjbHMtZG9jLXF1aWNrLWp1bXAiPg0KCQkJCTx0cj4NCgkJCQkJPHRkIGNsYXNzPSJjbHMtbm93cmFwIj4NCgkJCQkJCTxsYWJlbCBjbGFzcz0iZm9ybS1lbGVtZW50IiBmb3I9ImRvY19ubyI+IERPQyBOby46PC9sYWJlbD4NCgkJCQkJCTwhLS0gZml4IGZvciBDUTE0OTAwIC0gYWRkIHRhYiBpbmRleCB0byB0aGUgZG9jIG51bWJlciBib3ggLS0+DQoJCQkJCQk8aW5wdXQgY2xhc3M9ImZvcm0tZWxlbWVudCIgbmFtZT0iZG9jU2VhcmNoTnVtYmVyIiB0eXBlPSJ0ZXh0IiBpZD0iZG9jX25vIiB0YWJpbmRleD0iMSIgc2l6ZT0iMTIiIG1heGxlbmd0aD0iNyIgIG9ua2V5cHJlc3M9InJldHVybiBraWxsRW50ZXJBZnRlckZpcnN0KGV2ZW50KTsiIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0IiB2YWx1ZT0iIiAvPg0KCQkJCQkJPGlucHV0IGNsYXNzPSJmb3JtLWVsZW1lbnQiIG5hbWU9ImdvIiBpZD0iZ28iIHR5cGU9InN1Ym1pdCIgdmFsdWU9IkdvIiAgdGFiaW5kZXg9IjIiLz48IS0tIEZpeCBmb3IgOTc0NiAtLT4NCgkJCQkJPC90ZD4NCgkJCQk8L3RyPg0KCQkJPC90YWJsZT4NCgkJPC9mb3JtPg0KCTwvZGl2Pg0KCQ0KCTwhLS0gR2xvYmFsIERPQyBudW1iZXI6IEVORCAtLT4NCg0KDQo8IS0tIEdsb2JhbCBzZWxlY3RlZCBET0M6IEJFR0lOIC0tPg0KDQoJDQoJPGRpdiBpZD0iaWQtbWFpbi1oZWFkZXItYi0yIj4NCgkJDQoJCQkNCgkJCQkNCgkJCQkJDQoJCQkJCQ0KCQkJCQkJPGRpdiBpZD0ic2VsZWN0ZWREb2NObyI+U2VsZWN0ZWQgRE9DIE5vLjoNCgkJCQkJCQkmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCgkJCQkJCQkmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCgkJCQkJCTwvZGl2Pg0KCQkJCQkNCgkJCQkNCgkJCQ0KCQkJDQoJCQ0KCQkNCgk8L2Rpdj4NCg0KPCEtLSBHbG9iYWwgc2VsZWN0ZWQgRE9DOiBFTkQgLS0+DQoNCg0KCTwhLS0gR2xvYmFsIHRvcCB0YWJzOiBCRUdJTiAtLT4NCg0KCTwhLS0gTWVudSB0b29sdGlwczogQkVHSU4gLS0+DQoJPGRpdiBpZD0iaWQtdG9vbHRpcC1vZmZlbmRlciI+U2luZ2xlIG9mZmVuZGVyIHNwZWNpZmljIGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGVpciBvdmVyYWxsIGNhc2UgcGxhbi48L2Rpdj4NCgk8ZGl2IGlkPSJpZC10b29sdGlwLWFzc2lnbm1lbnRzIj5WaWV3IGFuZCB3b3JrIHdpdGggY2FzZWxvYWQgc3BlY2lmaWMsIE5vdGlmaWNhdGlvbnMgYW5kIENoZWNrIERhdGVzLiBDcmVhdGUgYSBHcm91cCBDaHJvbm8uPC9kaXY+DQoJPGRpdiBpZD0iaWQtdG9vbHRpcC1mYWNpbGl0eSI+RmFjaWxpdHkgbWFpbnRlbmFuY2UgZnVuY3Rpb25zLjwvZGl2Pg0KCTxkaXYgaWQ9ImlkLXRvb2x0aXAtc2VhcmNoIj5TZWFyY2ggZm9yIG9mZmVuZGVycyBieSBuYW1lIG9yIG90aGVyIHNlYXJjaCBjcml0ZXJpYS4gU2VhcmNoIENocm9ub3MsIENoZWNrIERhdGVzLCBhbmQgTm90aWZpY2F0aW9ucy4gTG9jYXRlIHN0YWZmIC8gcG9zaXRpb24gYW5kIGZhY2lsaXR5IGluZm9ybWF0aW9uLjwvZGl2Pg0KCTxkaXYgaWQ9ImlkLXRvb2x0aXAtYWRtaW5pc3RyYXRpb24iPkNyZWF0ZSBhbmQgbWFpbnRhaW4gc3RhZmYgYW5kIHBvc2l0aW9uIGluZm9ybWF0aW9uLiBDcmVhdGUgYW5kIG1haW50YWluIGZhY2lsaXR5IGluZm9ybWF0aW9uLiBNYWludGFpbiBjb2RlIHRhYmxlcyBhbmQgc2VjdXJpdHkgYXV0aG9yaXphdGlvbnMuPC9kaXY+DQoJPGRpdiBpZD0iaWQtdG9vbHRpcC1wbGFucyI+TWFuYWdlIHRoZSBvZmZlbmRlcidzIHBsYW5zLjwvZGl2Pg0KCTxkaXYgaWQ9ImlkLXRvb2x0aXAtaGVhbHRoU2VydmljZXMiPlZpZXcgYW5kIHdvcmsgd2l0aCBoZWFsdGggc2VydmljZXMgZm9yIG9mZmVuZGVycy48L2Rpdj4NCgk8ZGl2IGlkPSJpZC10b29sdGlwLXByb2dyYW1zIj5NYW5hZ2UgdGhlIG9mZmVuZGVyJ3MgcHJvZ3JhbXMuPC9kaXY+DQoJPCEtLSBNZW51IHRvb2x0aXBzOiBFTkQgLS0+DQoNCgk8IS0tIE1lbnUgdGFiczogQkVHSU4gLS0+DQoJPGRpdiBpZD0iaWQtbWFpbi1oZWFkZXItYi0xIj4NCgkJDQoJCTxhIGhyZWY9Ii9vbW5pL2luZGV4LmpzcCIgb25jbGljaz0icmV0dXJuIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXMpOyIgY2xhc3M9ImNscy1tYWluLXRhYnMtb24iIG9ubW91c2VvdmVyPSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1ob21lJywnJywnc2hvdycpIiBvbm1vdXNlb3V0PSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1ob21lJywnJywnaGlkZScpIj5Ib21lPC9hPg0KCQkNCgkJDQoJCQk8YSBocmVmPSIvb21uaS9hc3NpZ25tZW50cy9pbmRleC5odG0iIG9uY2xpY2s9InJldHVybiBwcm9jZXNzT21uaUxpbmtDbGljayh0aGlzKTsiIGNsYXNzPSJjbHMtbWFpbi10YWJzIiBvbm1vdXNlb3Zlcj0iTU1fc2hvd0hpZGVMYXllcnMoJ2lkLXRvb2x0aXAtYXNzaWdubWVudHMnLCcnLCdzaG93JykiIG9ubW91c2VvdXQ9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLWFzc2lnbm1lbnRzJywnJywnaGlkZScpIj5Bc3NpZ25tZW50czwvYT4NCgkJDQoJCQ0KCQkNCgkJCTxhIGhyZWY9Ii9vbW5pL2FkdmNvci9jc1Bsbi9vZmZlbmRlckNhc2VQbGFuLmh0bSIgb25jbGljaz0icmV0dXJuIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXMpOyIgY2xhc3M9ImNscy1tYWluLXRhYnMiIG9ubW91c2VvdmVyPSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1vZmZlbmRlcicsJycsJ3Nob3cnKSIgb25tb3VzZW91dD0iTU1fc2hvd0hpZGVMYXllcnMoJ2lkLXRvb2x0aXAtb2ZmZW5kZXInLCcnLCdoaWRlJykiPk9mZmVuZGVyPC9hPg0KCQkNCgkJDQoJCQ0KCQkJDQoJCQkNCgkJCQkNCgkJCQ0KCQkJDQoJCQkNCgkJCQkNCgkJCQ0KCQkJDQoJCQkJDQoJCQkJDQoJCQkJCTxhIGhyZWY9Ii9vbW5pL21lZC9zY2hlZC9zY2hlZHVsZXJRdWV1ZS5odG0iIG9uY2xpY2s9InJldHVybiBwcm9jZXNzT21uaUxpbmtDbGljayh0aGlzKTsiIGNsYXNzPSJjbHMtbWFpbi10YWJzIiBvbm1vdXNlb3Zlcj0iTU1fc2hvd0hpZGVMYXllcnMoJ2lkLXRvb2x0aXAtaGVhbHRoU2VydmljZXMnLCcnLCdzaG93JykiIG9ubW91c2VvdXQ9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLWhlYWx0aFNlcnZpY2VzJywnJywnaGlkZScpIj5IZWFsdGggU2VydmljZXM8L2E+DQoJCQkJDQoJCQkJDQoJCQkNCgkJDQoJCQ0KCQkNCgkJCQ0KCQkJCTxhIGhyZWY9Ii9vbW5pL21lbnUvcGxhbnMuaHRtIiBvbmNsaWNrPSJyZXR1cm4gcHJvY2Vzc09tbmlMaW5rQ2xpY2sodGhpcyk7IiBjbGFzcz0iY2xzLW1haW4tdGFicyIgb25tb3VzZW92ZXI9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLXBsYW5zJywnJywnc2hvdycpIiBvbm1vdXNlb3V0PSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1wbGFucycsJycsJ2hpZGUnKSI+UGxhbnM8L2E+DQoJCQkNCgkJDQoJCQ0KCQkNCgkJCQ0KCQkJCTxhIGhyZWY9Ii9vbW5pL21lbnUvcHJvZ3JhbXMuaHRtIiBvbmNsaWNrPSJyZXR1cm4gcHJvY2Vzc09tbmlMaW5rQ2xpY2sodGhpcyk7IiBjbGFzcz0iY2xzLW1haW4tdGFicyIgb25tb3VzZW92ZXI9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLXByb2dyYW1zJywnJywnc2hvdycpIiBvbm1vdXNlb3V0PSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1wcm9ncmFtcycsJycsJ2hpZGUnKSI+UHJvZ3JhbXM8L2E+DQoJCQkNCgkJDQoJCQ0KCQk8IS0tIEZvciBDUSMgMTUxMjAgY3JlYXRlIG5ldyBhdXRob3JpdHkgLS0+DQoJCQ0KCQkJPGEgaHJlZj0iL29tbmkvcmVjb3Jkcy9mYWNpbGl0eS9mYWNpbGl0eU1vZGlmeURlbGV0ZUZpZWxkLmh0bSIgb25jbGljaz0icmV0dXJuIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXMpOyIgY2xhc3M9ImNscy1tYWluLXRhYnMiIG9ubW91c2VvdmVyPSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1mYWNpbGl0eScsJycsJ3Nob3cnKSIgb25tb3VzZW91dD0iTU1fc2hvd0hpZGVMYXllcnMoJ2lkLXRvb2x0aXAtZmFjaWxpdHknLCcnLCdoaWRlJykiPkZhY2lsaXR5PC9hPg0KCQkNCgkJDQoJCQ0KCQkJPGEgaHJlZj0iL29tbmkvcmVjb3Jkcy9vZmZlbmRlci9vZmZlbmRlclNlYXJjaFF1aWNrLmh0bSIgb25jbGljaz0icmV0dXJuIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXMpOyIgY2xhc3M9ImNscy1tYWluLXRhYnMiIG9ubW91c2VvdmVyPSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1zZWFyY2gnLCcnLCdzaG93JykiIG9ubW91c2VvdXQ9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLXNlYXJjaCcsJycsJ2hpZGUnKSI+U2VhcmNoPC9hPg0KCQkNCgkJDQoJCQ0KCQkJPGEgaHJlZj0iL29tbmkvbWVudS9wcmVhLmh0bSIgb25jbGljaz0icmV0dXJuIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXMpOyIgY2xhc3M9ImNscy1tYWluLXRhYnMiIG9ubW91c2VvdmVyPSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1wcmVhJywnJywnc2hvdycpIiBvbm1vdXNlb3V0PSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1wcmVhJywnJywnaGlkZScpIj5QUkVBPC9hPg0KCQkNCgkJDQoJCTxhIGhyZWY9Ii9vbW5pL21lbnUvYWRtaW5pc3RyYXRpb24uaHRtIiBvbmNsaWNrPSJyZXR1cm4gcHJvY2Vzc09tbmlMaW5rQ2xpY2sodGhpcyk7IiBjbGFzcz0iY2xzLW1haW4tdGFicyIgb25tb3VzZW92ZXI9Ik1NX3Nob3dIaWRlTGF5ZXJzKCdpZC10b29sdGlwLWFkbWluaXN0cmF0aW9uJywnJywnc2hvdycpIiBvbm1vdXNlb3V0PSJNTV9zaG93SGlkZUxheWVycygnaWQtdG9vbHRpcC1hZG1pbmlzdHJhdGlvbicsJycsJ2hpZGUnKSI+QWRtaW5pc3RyYXRpb248L2E+DQoJPC9kaXY+DQoJPCEtLSBNZW51IHRhYnM6IEVORCAtLT4NCg0KCTwhLS0gR2xvYmFsIHRvcCB0YWJzOiBFTkQgLS0+DQoNCg0KPCEtLSBIZWFkZXIgLyBHbG9iYWw6IEVORCAtLT4NCg0KCQkJPCEtLSBBcHBsaWNhdGlvbiBoZWFkZXI6IEVORCAtLT4NCg0KCQkJPCEtLSBCcmVhZGNydW1iIHRyYWlsIGFyZWE6IEJFR0lOIC0tPg0KCQkJPGRpdiBpZD0iaWQtbWFpbi1oZWFkZXItYy0xIj4mbmJzcDs8L2Rpdj4NCgkJCTxkaXYgaWQ9ImlkLW1haW4taGVhZGVyLWQtMSI+DQoJCQkJDQoJCQkJDQoJCQkJDQoJCQk8L2Rpdj4NCgkJCTwhLS0gQnJlYWRjcnVtYiB0cmFpbCBhcmVhOiBFTkQgLS0+DQoNCgkJCTwhLS0gTW9zdCByZWNlbnQgc2VhcmNoICYgbG9nZ2VkLWluIHVzZXIgYXJlYTogQkVHSU4gLS0+DQoJCQkNCgkJCTxkaXYgaWQ9ImlkLW1haW4taGVhZGVyLWQtMiI+DQoJCQkJDQoNCgk8IS0tIEdsb2JhbCB1c2VyIG1lbnU6IEVORCAtLT4NCgkNCgkNCgkNCgkNCgkNCgkJPGEgaHJlZj0iaHR0cDovL2hlbHBzaXRlc2RlbW8vb21uaS8iIGNsYXNzPSJjbHMtbGluay1oZWxwIiByZWw9ImV4dGVybmFsIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLmhyZWYsICdIZWxwV2luZG93Jyk7IHJldHVybiBmYWxzZTsiICBvbmtleXByZXNzPSJ3aW5kb3cub3Blbih0aGlzLmhyZWYpOyByZXR1cm4gZmFsc2U7Ij5IZWxwPC9hPg0KCQ0KCSZuYnNwOw0KCTxzcGFuIGlkPSJpZC1sb2dnZWQtaW4iPkxvZ2dlZCBpbiBhcyA8c3Ryb25nPlBlcmZPbmUgVGVzdGVyPC9zdHJvbmc+PC9zcGFuPg0KCTwhLS0gR2xvYmFsIHVzZXIgbWVudTogRU5EIC0tPg0KDQoJCQk8L2Rpdj4NCgkJCQ0KCQkJPCEtLSBNb3N0IHJlY2VudCBzZWFyY2ggJiBsb2dnZWQtaW4gdXNlciBhcmVhOiBFTkQgLS0+DQoNCgkJPC9kaXY+DQoJCTwhLS0gSGVhZGVyIGNvbnRlbnQgcGFuZTogRU5EIC0tPg0KDQoJCTwhLS0gTGVmdCBjb250ZW50IHBhbmU6IEJFR0lOIC0tPg0KCQkNCgkJPGRpdiBpZD0ibWVudS1ibG9jay1leHBhbmRlZCIgc3R5bGU9ImRpc3BsYXk6aW5saW5lOyBtYXJnaW46NXB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDoxNTVweDsgdG9wOjEwMHB4OyB6LWluZGV4OjE7Ij4NCgkJPGEgaHJlZj0iIiBvbmNsaWNrPSJoaWRlRWxlbWVudCgnaWQtbWFpbi1sZWZ0Jyk7aGlkZUVsZW1lbnQoJ21lbnUtYmxvY2stZXhwYW5kZWQnKTtzaG93RWxlbWVudCgnbWVudS1ibG9jay1jb2xsYXBzZWQnKTtyZXNldE1hcmdpbkxlZnQoJ2lkLW1haW4tcmlnaHQnLCAnMjVweCcpO3JldHVybihmYWxzZSk7IiA+DQoJCTxpbWcgc3R5bGU9ImJvcmRlci13aWR0aDogMHB4OyIgDQoJCSAgICAgIGhlaWdodD0iMTUiIGFsdD0iSGlkZSBNZW51IiANCgkJICAgICAgc3JjPSIvT01OSVN0YXRpYy9pbWFnZXMvYnV0dG9ucy9idXR0b24tbWludXMuZ2lmIiAvPjwvYT4NCgkJPC9kaXY+DQoJCTxkaXYgaWQ9Im1lbnUtYmxvY2stY29sbGFwc2VkIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW46NXB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowcHg7IHRvcDoxMDBweDsgei1pbmRleDoxOyI+DQoJCTxhIGhyZWY9IiIgb25jbGljaz0ic2hvd0VsZW1lbnQoJ2lkLW1haW4tbGVmdCcpO3Nob3dFbGVtZW50KCdtZW51LWJsb2NrLWV4cGFuZGVkJyk7aGlkZUVsZW1lbnQoJ21lbnUtYmxvY2stY29sbGFwc2VkJyk7cmVzZXRNYXJnaW5MZWZ0KCdpZC1tYWluLXJpZ2h0JywgJzE5MHB4Jyk7cmV0dXJuKGZhbHNlKTsiID4NCgkJPGltZyBzdHlsZT0iYm9yZGVyLXdpZHRoOiAwcHg7IiANCgkJICAgICAgaGVpZ2h0PSIxNSIgYWx0PSJTaG93IE1lbnUiIA0KCQkgICAgICBzcmM9Ii9PTU5JU3RhdGljL2ltYWdlcy9idXR0b25zL2J1dHRvbi1wbHVzLmdpZiIgLz48L2E+DQoJCTwvZGl2PgkJDQoJCQ0KCQk8ZGl2IGlkPSJpZC1tYWluLWxlZnQiPg0KCQkJPHVsIGNsYXNzPSJjbHMtbWVudS1sZWZ0Ij4NCgkJCQk8bGkgY2xhc3M9ImNscy1tZW51LWxlZnQtaGVhZGVyIj5XZWxjb21lIHRvIE9NTkk8L2xpPg0KCQkJPC91bD4NCgkJCQ0KPCEtLSBMZWZ0IC8gTWVudSAvIEhvbWU6IEJFR0lOIC0tPg0KDQoJCQkNCgkJCQ0KDQo8dWwgY2xhc3M9ImNscy1tZW51LWxlZnQiPg0KCTxsaSBjbGFzcz0iY2xzLW1lbnUtbGVmdC1oZWFkZXIiPkxpbmtzPC9saT4NCgkNCgkJPGxpPjxhIHRhcmdldD0iX25ldyIgaHJlZj0iL29tbmkvZm9ycy9pbmRleC5odG0iIGNsYXNzPSJjbHMtbGluayI+Rk9SUzwvYT48L2xpPg0KCQ0KCQ0KCQk8bGk+PGEgdGFyZ2V0PSJfbmV3IiBocmVmPSJodHRwOi8vaWRvYy8iIGNsYXNzPSJjbHMtbGluayI+aURPQzwvYT48L2xpPg0KCQ0KCQ0KCTxsaT48YSB0YXJnZXQ9Il9uZXciIGhyZWY9Imh0dHA6Ly9vbW5pcmVwb3J0Y29udi9PTU5JX1JlcG9ydHMvUGFnZXMvRm9sZGVyLmFzcHgiPk9NTkkgUmVwb3J0czwvYT48L2xpPg0KDQoJPGxpPjxhIHRhcmdldD0iX25ldyIgaHJlZj0iaHR0cDovL2NlY29ubmVjdGNvbnYvY2VmaWVsZC8iPkNlRmllbGQ8L2E+PC9saT4NCg0KCTxsaT48YSB0YXJnZXQ9Il9uZXciIGhyZWY9Imh0dHA6Ly9jZXByaXNvbmNvbnYvIj5DZVByaXNvbjwvYT48L2xpPgkJDQoJDQoJPGxpPjxhIHRhcmdldD0iX25ldyIgaHJlZj0iaHR0cDovL3JlcG9ydHdpemFyZHRlc3QvUGFnZXMvTWVudS5hc3B4Ij5SZXBvcnQgV2l6YXJkPC9hPjwvbGk+DQo8L3VsPg0KPCEtLSBMZWZ0IC8gTWVudSAvIEhvbWU6IEVORCAtLT4NCg0KCQkJCTwhLS0gTGVmdDogVXNlciBJbmZvcm1hdGlvbiBTVEFSVCAtLT4NCgk8ZGl2IGlkPSJpZC1tZW51LWxlZnQtaGVhZGVyIj4NCgkJVXNlciBJbmZvcm1hdGlvbg0KCTwvZGl2Pg0KCTxkaXYgaWQ9ImlkLW1lbnUtbGVmdCIgc3R5bGU9Im92ZXJmbG93OiBoaWRkZW47Ij4NCgkJDQoNCjxzY3JpcHQgbGFuZ3VhZ2U9ImphdmFzY3JpcHQiIHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoNCg0KZnVuY3Rpb24gc3RhZmZBZGRyZXNzQm9va0N1cnJlbnRVc2VyQ2FsbEJhY2socGFyYW1TdGFmZk5hbWUsIHBhcmFtU3RhZmZJZCwgcGFyYW1Qb3NpdGlvbklkLCBwYXJhbU9wZW5pbmdJZCkgew0KDQoJaWYocGFyYW1TdGFmZklkICE9IG51bGwpIHsNCgkgICAgICAgIHJlZnJlc2hDdXJyZW50UGFnZSgpOw0KCX0NCn0NCg0KDQoNCmZ1bmN0aW9uIHNob3dBZGRyZXNzQm9va0ZvckN1cnJlbnRVc2VyKCkgew0KICAgICAgICBzaG93U3RhZmZBZGRyZXNzQm9vaygnL29tbmkvY29tbW9uL2RpYWxvZ3Mvcm9sb2RleC5odG0nLCBzdGFmZkFkZHJlc3NCb29rQ3VycmVudFVzZXJDYWxsQmFjaywgJ0NIQU5HRV9QT1NJVElPTicsICcxMDAwMjEwNDYnLCAnMTAwMDE2OTY1JywgJzEnKTsNCn0NCjwvc2NyaXB0Pg0KDQoNCgkJPHRhYmxlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjIiIGNlbGxzcGFjaW5nPSIwIiA+DQoJCQk8dHI+DQoJCQkJPHRkPjxzcGFuIGNsYXNzPSJjbHMtbGFiZWwiPg0KCQkJCQlOYW1lPC9zcGFuPg0KCQkJCTxici8+Jm5ic3A7Jm5ic3A7Jm5ic3A7PHNwYW4gY2xhc3M9ImNscy12YWx1ZSI+DQoJCQkJICA8YSBocmVmPScvb21uaS9yZWNvcmRzL3N0YWZmL3N0YWZmTW9kaWZ5Lmh0bT9zdGFmZklkPTEwMDAyMTA0NicgY2xhc3M9J2Nscy1saW5rJyBvbmNsaWNrPSJyZXR1cm4gY2hlY2tGb3JtQ2hhbmdlZCgpOyI+DQoJCQkJCVRlc3RlciwgUGVyZk9uZSBQDQoJCQkJICAgPC9hPjwvc3Bhbj4NCgkJCQk8L3RkPg0KCQkJPC90cj4NCgkJCTx0cj4NCgkJCQk8dGQ+PHNwYW4gY2xhc3M9ImNscy1sYWJlbCI+DQoJCQkJCVBvc2l0aW9uIFRpdGxlPC9zcGFuPg0KCQkJCTxici8+Jm5ic3A7Jm5ic3A7Jm5ic3A7PHNwYW4gY2xhc3M9ImNscy12YWx1ZSI+DQoJCQkJCVBlclRlc3RlcjAxDQoJCQkJCTwvc3Bhbj4NCgkJCQk8L3RkPg0KCQkJPC90cj4NCgkJCTx0cj4NCgkJCQk8dGQ+PHNwYW4gY2xhc3M9ImNscy1sYWJlbCI+DQoJCQkJCUZhY2lsaXR5PC9zcGFuPg0KCQkJCTxici8+Jm5ic3A7Jm5ic3A7Jm5ic3A7PHNwYW4gY2xhc3M9ImNscy12YWx1ZSI+DQoJCQkJCUhlYWRxdWFydGVycw0KCQkJCQk8L3NwYW4+DQoJCQkJPC90ZD4NCgkJCTwvdHI+DQoJCQk8dHI+DQoJCQkJPHRkPjxzcGFuIGNsYXNzPSJjbHMtbGFiZWwiPg0KCQkJCQlUZWxlcGhvbmU8L3NwYW4+DQoJCQkJPGJyLz48c3BhbiBjbGFzcz0iY2xzLXJlYWQtb25seSI+DQoJCQkJICAgICAgICANCgkJCQkJPC9zcGFuPg0KCQkJCTwvdGQ+DQoJCQk8L3RyPg0KCQkJPHRyPg0KCQkJCTx0ZD4NCgkJCQkJPHNwYW4gY2xhc3M9ImNscy1sYWJlbCI+RS1NYWlsPC9zcGFuPg0KCQkJCQk8IS0tIERlZmVjdCAxMTA1NCAtIGVtYWlsIHdpbGwgYmUgZGlzcGxheWVkIHdpdGhvdXQgdGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZSAtLT4NCgkJCQkJPHNwYW4gY2xhc3M9ImNscy12YWx1ZSIgc3R5bGU9InRleHQtdHJhbnNmb3JtOm5vbmUiPg0KCQkJCQkJDQoJCQkJCQkNCgkJCQkJCQ0KCQkJCQk8L3NwYW4+DQoJCQkJPC90ZD4NCgkJCTwvdHI+DQoJCQk8dHI+DQoJCQkJPHRkPjxzcGFuIGNsYXNzPSJjbHMtbGFiZWwiPg0KCQkJCQlPQlRTIFBvc2l0aW9uIE51bWJlcjwvc3Bhbj4NCgkJCQk8YnIvPiZuYnNwOyZuYnNwOyZuYnNwOzxzcGFuIGNsYXNzPSJjbHMtdmFsdWUiPg0KCQkJCQlaWDM2IA0KCQkJCQk8L3NwYW4+DQoJCQkJPC90ZD4NCgkJCTwvdHI+DQoJCQk8dHI+DQoJCQkJPHRkIGNvbHNwYW49IjIiIGNsYXNzPSJjbHMtdmFsdWUiPg0KCQkJCQk8Zm9ybSBhY3Rpb249IiMiIG5hbWU9ImNoYW5nZVBvc2l0aW9uIj4NCgkJCQkJCQ0KCQkJCQk8L2Zvcm0+DQoJCQkJPC90ZD4NCgkJCTwvdHI+DQoJCTwvdGFibGU+DQoJPC9kaXY+DQoJPCEtLSBMZWZ0OiBVc2VyIEluZm9ybWF0aW9uIEVORCAtLT4NCg0KCQk8L2Rpdj4NCgkJDQoJCTwhLS0gTGVmdCBjb250ZW50IHBhbmU6IEVORCAtLT4NCg0KCQk8IS0tIFJpZ2h0IGNvbnRlbnQgcGFuZTogQkVHSU4gLS0+DQoJCTxkaXYgaWQ9ImlkLW1haW4tcmlnaHQiPg0KDQoJCQk8IS0tIEF1dG9zYXZlIG1lc3NhZ2UgYXJlYTogQkVHSU4gLS0+DQoJCQkNCgkJCQ0KCQkJDQoJCQk8IS0tIEF1dG9zYXZlIG1lc3NhZ2UgYXJlYTogRU5EIC0tPg0KDQoJCQk8IS0tIEFsZXJ0IG1lc3NhZ2UgYXJlYTogQkVHSU4gLS0+DQoJCQkNCgkJCQ0KCQkJDQoJCQk8IS0tIEFsZXJ0IG1lc3NhZ2UgYXJlYTogRU5EIC0tPg0KDQoJCQk8IS0tIE1haW4gY29udGVudCBhcmVhOiBCRUdJTiAtLT4NCgkJCQ0KCQkJPGRpdiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyI+DQoJCQkJPGNlbnRlcj4NCgkJCQkJPGJyIC8+DQoJCQkJCTxiciAvPg0KCQkJCQk8c3Ryb25nPg0KCQkJCQkJV2VsY29tZSB0byB0aGUgU3RhdGUgb2YgV2FzaGluZ3RvbjxiciAvPg0KCQkJCQkJQXV0aG9yaXplZCBVc2UgT25seTxiciAvPg0KCQkJCQkJDQoJCQkJCQlGb3IgYXNzaXN0YW5jZSBwbGVhc2UgY2FsbCB5b3VyIGhlbHAgZGVzay48YnIgLz4NCgkJCQkJCVBob25lOiAzNjAuNzI1LjgzODMgb3IgODAwLjg1OC40NDE2IDxici8+DQoJCQkJCQlFYXN5VmlzdGEgV2Vic2l0ZTogPGEgaHJlZj0iaHR0cHM6Ly9lc3AuZG9jLndhLmdvdiIgdGFyZ2V0PSJibGFuayI+aHR0cHM6Ly9lc3AuZG9jLndhLmdvdjwvYT48YnIvPg0KCQkJCQk8L3N0cm9uZz4NCgkJCQkJPGJyIC8+DQoJCQkJCTxiciAvPg0KCQkJCTwvY2VudGVyPg0KCQkJPC9kaXY+DQoJCQk8YnIgLz4NCg0KCQkJDQoJCQkJPGRpdiBjbGFzcz0ibWFpbi1yaWdodC1oZWFkZXIiPg0KCQkJCQlQb2xpY3kNCgkJCQk8L2Rpdj4NCgkJCQk8ZGl2IGNsYXNzPSJtYWluLWNvbnRlbnRzLW92ZXJ2aWV3Ij4NCgkJCQkJDQoJCQkJCVBvbGljaWVzIGNhbiBiZSB2aWV3ZWQgPGEgaHJlZj0iaHR0cDovL2luc2lkZWRvYy9wb2xpY2llcy8iIGNsYXNzPSJjbHMtbGluayIgcmVsPSJleHRlcm5hbCI+aGVyZTwvYT4uDQoJCQkJPC9kaXY+DQoJCQkJPGRpdiBzdHlsZT0iZm9udC1zaXplOiA2cHQiPiZuYnNwOzwvZGl2Pg0KCQkJDQoNCgkJCQ0KCQkJCTxkaXYgY2xhc3M9Im1haW4tcmlnaHQtaGVhZGVyIj4NCgkJCQkJT01OSSBIZWxwDQoJCQkJPC9kaXY+DQoJCQkJPGRpdiBjbGFzcz0ibWFpbi1jb250ZW50cy1vdmVydmlldyI+DQoJCQkJCQkJCQkJDQoJCQkJCUhlbHAgY2FuIGJlIHZpZXdlZCA8YSBocmVmPSJodHRwOi8vaGVscHNpdGVzZGVtby9vbW5pLyIgY2xhc3M9ImNscy1saW5rIiByZWw9ImV4dGVybmFsIj5oZXJlPC9hPi4NCgkJCQk8L2Rpdj4NCgkJCQk8ZGl2IHN0eWxlPSJmb250LXNpemU6IDZwdCI+Jm5ic3A7PC9kaXY+DQoJCQkNCg0KCQkJDQoJCQkJPGRpdiBjbGFzcz0ibWFpbi1yaWdodC1oZWFkZXIiPg0KCQkJCQlTeXN0ZW0gQnVsbGV0aW5zDQoJCQkJPC9kaXY+DQoJCQkJPGRpdiBjbGFzcz0ibWFpbi1jb250ZW50cy1vdmVydmlldyI+DQoJCQkJCQkJCQkJDQoJCQkJCVN5c3RlbSBidWxsZXRpbnMgY2FuIGJlIHZpZXdlZCA8YSBocmVmPSJodHRwOi8vaWRvYy9hZ2VuY3kvc2VydmljZXMvaXQvYXBwLWluZm8uaHRtI29tbmkiIGNsYXNzPSJjbHMtbGluayIgcmVsPSJleHRlcm5hbCI+aGVyZTwvYT4uDQoJCQkJPC9kaXY+DQoJCQkNCg0KCQkJDQoJCQk8IS0tIE1haW4gY29udGVudCBhcmVhOiBFTkQgLS0+DQoNCgkJPC9kaXY+DQoJCTwhLS0gUmlnaHQgY29udGVudCBwYW5lOiBFTkQgLS0+DQoNCgk8L2JvZHk+DQoJPCEtLSBCb2R5IHBvcnRpb246IEVORCAtLT4NCg0KPC9odG1sPg0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
        </HTTPResponse>
        <HTTPTask id="13" hostname="omniconv" path="/OMNIStatic/themes/omni/global-body-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-body-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="HTML" ordinal="1" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2178" sendTime="6" waitTime="0" receiveTime="3">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1ib2R5LXN0eWxlcy5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>RnJpLCAyOSBKdW4gMjAxOCAxNToyMTo1MCBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjBmYmJjZTZiY2ZkNDE6MCI=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MzI2Mg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBGcmksIDI5IEp1biAyMDE4IDE1OjIxOjUwIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwZmJiY2U2YmNmZDQxOjAiDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAzMjYyDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKg0KDQoJRGF0ZSBGaWxlIENyZWF0ZWQ6IE5vdmVtYmVyICgyMCkgIDIwMDYNCglDcmVhdGVkIEJ5OiBQYXVsIENvcm1pZQ0KCURhdGUgTGFzdCBNb2RpZmllZDogQXVndXN0ICgzMSkgMjAwNw0KCUxhc3QgTW9kaWZpZWQgQnk6IFZpY3RvciBDaG9uZw0KCUZpbGUgU3VtbWFyeTogQ1NTIGNsYXNzZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBlbnRpcmUgd2ViIGFwcGxpY2F0aW9uDQoJQ1NTIENvbnRlbnRzOiBHbG9iYWwgQ2xhc3Nlcw0KCVRlc3RlZDogSUUgNS41LCBJRSA2LjAsIEZpcmVGb3ggMi4wDQoNCiovDQoNCmZvcm0gew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KfQ0KDQojYnJlYWRDcnVtYiB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6N3B0Ow0KCWNvbG9yOiM2NjY2NjY7DQp9DQoNCiNicmVhZENydW1iQ3VycmVudCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6N3B0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCn0NCg0KLmZvcm0tYnV0dG9uIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzMzMzMzMzsNCn0NCg0KLmZvcm0tYnV0dG9uLWxhcmdlew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjE2cHQ7DQoJY29sb3I6IzMzMzMzMzsNCn0NCg0KLmZvcm0tYnV0dG9uLTc1IHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzMzMzMzMzsNCgl3aWR0aDo3NXB4Ow0KfQ0KDQouZm9ybS1idXR0b24tMTUwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzMzMzMzMzsNCgl3aWR0aDoxNTBweDsNCn0NCg0KLmZvcm0tYnV0dG9uLTI1MCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiMzMzMzMzM7DQoJd2lkdGg6MjUwcHg7DQp9DQoNCi5mb3JtLWJ1dHRvbi1ib2xkIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCgljb2xvcjojMzMzMzMzOw0KfQ0KDQouZm9ybS1lbGVtZW50IHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCn0NCg0KLmZvcm0tZWxlbWVudC0xMCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0yMCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MjBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0zMCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC00NSB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6NDVweDsNCn0NCg0KDQouZm9ybS1lbGVtZW50LTYwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo2MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTcwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo3MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTc1IHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo3NXB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTkwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo5MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTEwNSB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MTA1cHg7DQp9DQoNCg0KLmZvcm0tZWxlbWVudC0xMjAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjEyMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTE4MC1sYXJnZSB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6MTZwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjE4MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTIxMC1sYXJnZSB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6MTZwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjIxMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTEzNSB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MTM1cHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMTUwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDoxNTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0xODAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjE4MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTIwMCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MjAwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMjEwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDoyMTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0yMjAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjIyMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTI0MCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MjQwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMjcwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDoyNzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0zMDAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjMwMHB4Ow0KfQ0KDQoNCi5mb3JtLWVsZW1lbnQtMzIwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDozMjBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0zMzAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjMzMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTM3MCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6MzcwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNDIwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo0MjBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC01MDAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjUwMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTU1MCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6NTUwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNTc1IHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo1NzVweDsNCn0NCg0KLmZvcm0tZWxlbWVudC02MDAgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjYwMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTcwMCB7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCWNvbG9yOiM2NjY2NjY7DQoJd2lkdGg6NzAwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNzcwIHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo3NzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0xMDBQZXJjZW50IHsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDo5OCU7DQoJYm9yZGVyLXN0eWxlOiBpbnNldDsNCglwYWRkaW5nLWxlZnQ6IDA7DQoJcGFkZGluZy1yaWdodDogMDsNCg0KfQ0KDQouaGVhZGVyLXRleHQgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXRleHQtYWxpZ246cmlnaHQ7DQoJYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzY2NjY2NjsNCgl3aGl0ZS1zcGFjZTpub3dyYXA7DQp9DQoNCg0KLmhlYWRlci10ZXh0LWxlZnQgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXRleHQtYWxpZ246bGVmdDsNCglib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNjY2NjY2Ow0KCXdoaXRlLXNwYWNlOm5vd3JhcDsNCn0NCg0KcC5jbHMtbGFiZWwgew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpub3JtYWw7DQoJdGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTsNCn0NCg0KdHIub2RkIC5ncmF5IHsNCgljb2xvcjogI0Q5RDlCMTsNCn0NCg0KdHIuZXZlbiAuZ3JheSB7DQoJY29sb3I6ICNFREVEQ0Y7IA0KfQ0KDQp0ZC5jbHMtbGFiZWwgew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpub3JtYWw7DQoJdGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTsNCn0NCg0KLmNscy1sYWJlbCB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplOw0KfQ0KDQouY2xzLWxhYmVsLW5vLXRyYW5zZm9ybSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpub25lOw0KfQ0KDQouY2xzLWxhYmVsLWVsZXZlbi1wb2ludC1ib2xkIHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjojNjY2Njk5Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjExcHQ7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCn0NCg0KLmZpbmVwcmludC1jbHMtbGFiZWwgew0KCWRpc3BsYXk6IG5vbmU7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpub25lOw0KCWZvbnQtc3R5bGU6aXRhbGljOw0KfQ0KDQouY2xzLWhyZWYtbG9vay1sYWJlbCB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzAwMDBjZDsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplOw0KCXRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUNCn0NCi5ocmVmLWRpc2FibGVkIHsgY29sb3I6IGdyYXk7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9DQoNCi5jbHMtbGFiZWwtYm9sZCB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQoJdGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTsNCn0NCg0KLmNscy1sYWJlbC1ib2xkLWJsYWNrIHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjpibGFjazsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQp9DQoNCg0KLmNscy1sYWJlbC1ib2xkLWJsYWNrLTE2IHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjpibGFjazsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZToxNnB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KfQ0KDQouY2xzLWxhYmVsLWJvbGQtYmxhY2stMjggew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KCWNvbG9yOmJsYWNrOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjI4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQp9DQoNCi5jbHMtbGFiZWwtYm9sZC1ibGFjay0xNi11bmRlcmxpbmUgew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KCWNvbG9yOmJsYWNrOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjE2cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQoJdGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTsNCn0NCg0KLmNscy1sYWJlbC1ib2xkLWJsYWNrLTM2IHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjpibGFjazsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTozNnB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KfQ0KDQouY2xzLWxhYmVsLWJvbGQtYmxhY2stODAgew0KCW1hcmdpbi1ib3R0b206MHB4Ow0KCW1hcmdpbi10b3A6MHB4Ow0KCWNvbG9yOmJsYWNrOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjgwcHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQp9DQoNCi5jbHMtbGFiZWwtYm9sZC1ibGFjay1kaWV0LW5hbWUgew0KCWNvbG9yOmJsYWNrOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjQ4cHQ7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCn0NCg0KZGl2LmNscy1mb3JtLWVycm9yIHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjojNjYwMDAwOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6Ym9sZDsNCglwYWRkaW5nLXRvcDo1cHg7DQoJcGFkZGluZy1ib3R0b206NXB4Ow0KCXBhZGRpbmctbGVmdDoxMHB4Ow0KCXBhZGRpbmctcmlnaHQ6MTBweDsNCg0KfQ0KDQpkaXYuY2xzLWZvcm0tbWVzc2FnZSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzAwMDA2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQoJcGFkZGluZy10b3A6NXB4Ow0KCXBhZGRpbmctYm90dG9tOjVweDsNCglwYWRkaW5nLWxlZnQ6MTBweDsNCglwYWRkaW5nLXJpZ2h0OjEwcHg7DQoNCn0NCg0KZGl2LmNscy1mb3JtLXN1Y2Nlc3MtbWVzc2FnZSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6Z3JlZW47DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KCXBhZGRpbmctdG9wOjVweDsNCglwYWRkaW5nLWJvdHRvbTo1cHg7DQoJcGFkZGluZy1sZWZ0OjEwcHg7DQoJcGFkZGluZy1yaWdodDoxMHB4Ow0KDQp9DQoNCnAuY2xzLXZhbHVlIHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjojMDAwMDAwOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KCXRleHQtdHJhbnNmb3JtOmNhcGl0YWxpemU7DQp9DQoNCnRkLmNscy12YWx1ZSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzAwMDAwMDsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplOw0KfQ0KDQp0ZC5jbHMtdmFsdWUtdXBwZXJjYXNlIHsNCgltYXJnaW4tYm90dG9tOjBweDsNCgltYXJnaW4tdG9wOjBweDsNCgljb2xvcjojMDAwMDAwOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KCXRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsNCn0NCg0KLmNscy12YWx1ZSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzAwMDAwMDsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgl0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplOw0KfQ0KDQoNCnAuY2xzLXJlYWQtb25seSB7DQoJbWFyZ2luLWJvdHRvbTowcHg7DQoJbWFyZ2luLXRvcDowcHg7DQoJY29sb3I6IzMzMzMzMzsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCn0NCg0KLmNscy1kb2MtcXVpY2stanVtcCB7DQoJYmFja2dyb3VuZC1jb2xvcjojZWRlZGNmOw0KCXBhZGRpbmctcmlnaHQ6OHB4Ow0KCXBhZGRpbmctbGVmdDo4cHg7DQoJcGFkZGluZy10b3A6M3B4Ow0KCXBhZGRpbmctYm90dG9tOjNweDsNCglib3JkZXI6MXB4IHNvbGlkICM2NjY2NjY7DQoJZm9udC1zaXplOjhwdDsNCn0NCg0KdGQuY2xzLWV4cGFuZC1jb2xsYXBzZS1idXR0b24gew0KCXBhZGRpbmctcmlnaHQ6NXB4Ow0KCXRleHQtYWxpZ246cmlnaHQ7DQp9DQoNCnRkLmNscy1mb3JtLWRlc2NyaXB0b3Igew0KCWNvbG9yOiMwMDAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojY2NjYzk5Ow0KCXBhZGRpbmctbGVmdDo1cHg7DQoJcGFkZGluZy1yaWdodDo1cHg7DQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJcGFkZGluZy1ib3R0b206MnB4Ow0KCXBhZGRpbmctdG9wOjJweDsNCn0NCg0KdGQuY2xzLWZvcm0tcGFkZGluZyB7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLXJpZ2h0OjVweDsNCn0NCg0KdGQuY2xzLW5vcGFkZGluZy1yaWdodCB7DQoJcGFkZGluZy1yaWdodDowcHg7DQp9DQoNCnRkLmNscy1ub3BhZGRpbmctbGVmdCB7DQoJcGFkZGluZy1sZWZ0OjBweDsNCglwYWRkaW5nLXJpZ2h0OjZweDsNCn0NCg0KLmNscy1ub3dyYXAgew0KCXdoaXRlLXNwYWNlOm5vd3JhcDsNCn0NCg0KbGVnZW5kIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiNlZGVkY2Y7DQoJcGFkZGluZy1yaWdodDoycHg7DQoJcGFkZGluZy1sZWZ0OjJweDsNCgljb2xvcjojMDAwMDAwOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJdGV4dC1hbGlnbjpsZWZ0DQp9DQoNCmZpZWxkc2V0IHsNCglib3JkZXI6MXB4IHNvbGlkICNjY2NjOTk7DQoJYmFja2dyb3VuZC1jb2xvcjojZWRlZGNmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCW1hcmdpbi10b3A6MHB4Ow0KCW1hcmdpbi1ib3R0b206NXB4Ow0KCW1hcmdpbi1sZWZ0OjVweDsNCgltYXJnaW4tcmlnaHQ6NXB4Ow0KfQ0KDQovKiBkaXNwbGF5VGFnIFNlYXJjaCBSZXN1bHRzICovDQoNCnRhYmxlLnJvd1N1cHBvcnRlZFRhZyB7DQpiYWNrZ3JvdW5kOiNFREVEQ0Y7DQpib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7DQp3aWR0aDoxMDAlOw0Kd2hpdGUtc3BhY2U6bm93cmFwOw0KfQ0KDQp0YWJsZS5yb3dTdXBwb3J0ZWRUYWcgdGJvZHkgdGQgew0KdGV4dC1hbGlnbjpsZWZ0Ow0KZm9udC1zaXplOjdwdDsNCmJvcmRlci1jb2xvcjojRDhEOEFGOw0Kd2lkdGg6MTAlOw0KfQ0KDQp0YWJsZS5yb3dTdXBwb3J0ZWRUYWcgdGhlYWQgdGggew0KCXRleHQtYWxpZ246bGVmdDsNCglmb250LXdlaWdodDpib2xkOw0KCWJhY2tncm91bmQ6I0Q4RDhBRjsNCglmb250LXNpemU6N3B0Ow0KCS8qYm9yZGVyOjFweCBzb2xpZCAjRURFRENGOyovDQp9DQoNCnRhYmxlLnJvd1N1cHBvcnRlZFRhZyB0Ym9keSB0ci5ldmVuIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiNFREVEQ0Y7DQp9DQoNCnRhYmxlLnJvd1N1cHBvcnRlZFRhZ0Jhbm5lclBhbmVsIHRib2R5IHsNCglkaXNwbGF5OiBub25lOw0KfQ0KDQp0YWJsZS5kaXNwbGF5VGFnIHsNCgliYWNrZ3JvdW5kOiNGOUY1RDc7DQoJYm9yZGVyLXNwYWNpbmc6MHB4Ow0KCWJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsNCgl3aWR0aDoxMDAlOw0KCXdoaXRlLXNwYWNlOiBub3JtYWw7DQp9DQoNCnRhYmxlLmRpc3BsYXlUYWcgPiB0aGVhZCA+IHRyID4gdGggew0KCXRleHQtYWxpZ246bGVmdDsNCglmb250LXdlaWdodDpib2xkOw0KCXZlcnRpY2FsLWFsaWduOnRvcDsNCglwYWRkaW5nLXJpZ2h0OjRweDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNEOEQ4QUY7DQoJY29sb3I6IzAwMDAwMDsNCglmb250LXNpemU6N3B0Ow0KfQ0KDQp0YWJsZS5kaXNwbGF5VGFnID4gdGZvb3QgPiB0ciA+IHRkIHsNCgl0ZXh0LWFsaWduOmxlZnQ7DQoJZm9udC1zaXplOjdwdDsNCn0NCg0KdGFibGUuZGlzcGxheVRhZyA+IHRib2R5ID4gdHIgPiB0ZCB7DQoJdGV4dC1hbGlnbjpsZWZ0Ow0KCWZvbnQtc2l6ZTo3cHQ7DQoJcGFkZGluZy1yaWdodDo0cHg7DQp9DQoNCnRhYmxlLmRpc3BsYXlUYWcgPiB0Ym9keSA+IHRyLmV2ZW4gew0KCWJhY2tncm91bmQtY29sb3I6I0Q4RDhBRjsNCn0NCg0KdGFibGUuZGlzcGxheVRhZyA+IHRib2R5ID4gdHIub2RkIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiNFREVEQ0Y7DQp9DQoNCg0KdGFibGUuZ3JpZExpc3Qgew0KCWJvcmRlci13aWR0aDogMXB4Ow0KCWJvcmRlci1zcGFjaW5nOiAwOw0KCWJvcmRlci1zdHlsZTogbm9uZTsNCglib3JkZXItY29sb3I6ICNjY2NjOTk7DQoJYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjZDhkOGFmOw0KfQ0KdGFibGUuZ3JpZExpc3QgdGggew0KCWJvcmRlci13aWR0aDogMXB4Ow0KCWJvcmRlci1zdHlsZTogc29saWQ7DQoJYm9yZGVyLWNvbG9yOiAjY2NjYzk5Ow0KCWJhY2tncm91bmQtY29sb3I6ICNEOEQ4QUY7DQp9DQoNCnRhYmxlLmdyaWRMaXN0IHRkIHsNCglib3JkZXItd2lkdGg6IDFweDsNCglib3JkZXItc3R5bGU6IHNvbGlkOw0KCWJvcmRlci1jb2xvcjogI2NjY2M5OTsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjRURFRENGOw0KfQ0KDQoNCnRhYmxlLm5vR3JpZExpc3QgIHRyew0KCWJvcmRlci13aWR0aDogMXB4Ow0KCWJvcmRlci1zdHlsZTogc29saWQ7DQoJYm9yZGVyLWNvbG9yOiAjRURFRENGOw0KCWJhY2tncm91bmQtY29sb3I6ICNFREVEQ0Y7DQp9DQoNCg0KdGFibGUubm9HcmlkTGlzdCAgdGR7DQoJYm9yZGVyLXdpZHRoOiAxcHg7DQoJYm9yZGVyLXN0eWxlOiBzb2xpZDsNCglib3JkZXItY29sb3I6ICNFREVEQ0Y7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VERURDRjsNCn0NCg0KdGFibGUucmVtb3ZlU3VwcG9ydGVkVGFnIHsNCgkJCQliYWNrZ3JvdW5kOiNFREVEQ0Y7DQoJCQkJYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOw0KCQkJCXdpZHRoOjEwMCU7DQp9DQoNCnRhYmxlLnJlbW92ZVN1cHBvcnRlZFRhZyB0ci5vZGQjZmFsc2UgdGQucmVtb3ZhYmxlLTMwLWxpbmt7DQoJYmFja2dyb3VuZC1jb2xvcjojRURFRENGOw0KCWRpc3BsYXk6IG5vbmU7DQp9DQoNCnRhYmxlLnJlbW92ZVN1cHBvcnRlZFRhZyB0ci5ldmVuI2ZhbHNlIHRkLnJlbW92YWJsZS0zMC1saW5rew0KCWJhY2tncm91bmQ6I0Q4RDhBRjsNCglkaXNwbGF5OiBub25lOw0KfQ0KDQp0YWJsZS5yZW1vdmVTdXBwb3J0ZWRUYWcgdHIub2Rkew0KCWJhY2tncm91bmQtY29sb3I6I0VERURDRjsNCn0NCg0KdGFibGUucmVtb3ZlU3VwcG9ydGVkVGFnIHRyLmV2ZW57DQoJYmFja2dyb3VuZC1jb2xvcjojRURFRENGOw0KfQ0KDQouZWxsaXBzZS10YWJsZSB7DQoJd2lkdGg6IDEwMCU7DQoJdGFibGUtbGF5b3V0OiBmaXhlZDsNCn0NCgkJDQouZWxsaXBzZS10YWJsZSB0ZCB7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KfQ0KCQkNCg0KLnJlbW92YWJsZS0zMC1saW5rIHsNCgl3aWR0aDozMHB4Ow0KfQ0KDQoudGFibGUtZWxlbWVudC0zMCB7DQoJd2lkdGg6MzBweDsNCn0NCg0KLnRhYmxlLWVsZW1lbnQtOTAgew0KCXdpZHRoOjkwcHg7DQp9DQoNCi50YWJsZS1lbGVtZW50LTE4MCB7DQoJd2lkdGg6MTgwcHg7DQp9DQoNCi50YWJsZS1lbGVtZW50LTMwMCB7DQoJd2lkdGg6MzAwcHg7DQp9DQoudGFibGUtZWxlbWVudC0zNjAgew0KCXdpZHRoOjM2MHB4Ow0KfQ0KDQoucGFnZS1saW5rIHsNCgl0ZXh0LWFsaWduOmNlbnRlcjsNCglmb250LXdlaWdodDpib2xkOw0KfQ0KDQouaW5mb3JtYXRpb25hbCB7DQoJdGV4dC1hbGlnbjpjZW50ZXI7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCgljb2xvcjojNDQ5MTIwOw0KfQ0KDQouZmFpbHVyZSB7DQoJdGV4dC1hbGlnbjpjZW50ZXI7DQoJZm9udC13ZWlnaHQ6Ym9sZDsNCgljb2xvcjojZmYzMzAwOw0KfQ0KDQouZm9ybS1lbGVtZW50LWRpc2FibGUgew0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KCXdpZHRoOjEyMHB4OzsNCgliYWNrZ3JvdW5kLWNvbG9yOiBzaWx2ZXINCn0NCg0KLmhpZGRlbiB7DQoJZGlzcGxheTogbm9uZTsNCn0NCg0KLmludmlzaWJsZSB7DQoJdmlzaWJpbGl0eTogaGlkZGVuOw0KfQ0KDQppbnB1dFt0eXBlPSJjaGVja2JveCJdIHsNCgl3aWR0aDogMTVweDsNCgloZWlnaHQ6IDE1cHg7DQp9DQoNCmlucHV0W3R5cGU9InN1Ym1pdCJdew0KCXdoaXRlLXNwYWNlOm5vcm1hbDsNCn0NCg0KaW5wdXRbdHlwZT0ic3VibWl0Il1bZGlzYWJsZWRdLCBpbnB1dFt0eXBlPSJidXR0b24iXVtkaXNhYmxlZF0gew0KCWNvbG9yOiBncmF5dGV4dDsNCn0NCg0KLnJpZ2h0LWhlYWRlciB7DQoJYmFja2dyb3VuZC1jb2xvcjogI2NjY2M5OTsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6IDEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDogYm9sZDsNCglwYWRkaW5nLWxlZnQ6IDhweDsNCglwYWRkaW5nLWJvdHRvbTogNHB4Ow0KCXBhZGRpbmctdG9wOiA0cHg7DQoJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM2NjY2NjY7DQovKiB0aGVzZSB0d28gbWFyZ2lucyBhZmZlY3QgSUUgNS41ICovDQoJbWFyZ2luLXJpZ2h0OiAwcHg7DQoJdG9wOiA5NXB4Ow0KCXZvaWNlLWZhbWlseTogIlwifVwiIjsNCgl2b2ljZS1mYW1pbHk6IGluaGVyaXQ7DQovKiB0aGVzZSB0d28gbWFyZ2lucyBhZmZlY3QgSUUgNiAqLw0KCW1hcmdpbi1yaWdodDogMHB4Ow0KfQ0KDQovKiBGb3IgY2hlY2tib3hlcyBhbmQgcmFkaW8gYnV0dG9ucyAtIGFsaWduIHRoZW0gaW5saW5lIHdpdGggdGhlaXIgbGFiZWwuICovDQoudmVydGljYWwtYWxpZ24tbWlkZGxlIHsNCgl2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KCW1hcmdpbi10b3A6IDRweDsNCglwYWRkaW5nLXRvcDogMHB4Ow0KfQ0KLyogZm9yIG5vdCBzaG93aW5nIHNjcm9sbCBiYXIgd2hlbiB1c2luZyBJZnJhbWUgd2l0aCBkaWFsb2dib3ggKi8NCi5oaWRkZW5TY3JvbGxCYXIgew0KCW1hcmdpbjowOyANCglvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQovKiBBIHRyYW5zcGFyZW50IHBuZyBzcGlubmVyIGJhY2tncm91bmQgaW1hZ2UgdXNlZCB3aXRoICQuZm4uYWRkU3Bpbm5lclBORygpIHRoYXQgYWRkcyB0aGlzIGNsYXNzIHRvIGEgRE9NIGVsZW1lbnQuICovDQouc3Bpbm5lci1wbmdpY29uIHsNCgliYWNrZ3JvdW5kOiB1cmwoJy4uLy4uL2ltYWdlcy9pY29ucy9zcGlubmVyLnBuZycpIG5vLXJlcGVhdDsNCgloZWlnaHQ6IDE1cHg7DQoJd2lkdGg6IDExcHQ7DQp9CQ0KDQovKiBBIGdpZiBzcGlubmVyIGJhY2tncm91bmQgaW1hZ2UgdXNlZCB3aXRoICQuZm4uYWRkU3Bpbm5lcigpIHRoYXQgYWRkcyB0aGlzIGNsYXNzIHRvIGEgRE9NIGVsZW1lbnQuICovDQouc3Bpbm5lci1pY29uIHsNCgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uL2ltYWdlcy9pY29ucy93YWl0LmdpZicpOw0KCWJhY2tncm91bmQtc2l6ZTogMTNweDsNCgliYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KCXBhZGRpbmc6IDBweCA3cHggMHB4IDZweDsNCgltYXJnaW4tbGVmdDogM3B4Ow0KfQ0KDQouc3Bpbm5lci1pY29uLm9kZCB7DQoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi9pbWFnZXMvaWNvbnMvd2FpdC1vZGQuZ2lmJyk7DQp9DQouc3Bpbm5lci1pY29uLmV2ZW4gew0KCWJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vaW1hZ2VzL2ljb25zL3dhaXQtZXZlbi5naWYnKTsNCn0NCi0tPg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="14" hostname="omniconv" path="/OMNIStatic/themes/omni/global-error-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-error-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="2" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2183" sendTime="11" waitTime="0" receiveTime="2">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1lcnJvci1zdHlsZXMuY3NzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTI0NA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTI0NA0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKg0KDQoJRGF0ZSBGaWxlIENyZWF0ZWQ6IE5vdmVtYmVyICgyMCkgIDIwMDYNCglDcmVhdGVkIEJ5OiBQYXVsIENvcm1pZQ0KCURhdGUgTGFzdCBNb2RpZmllZDogSmFudWFyeSAoMzEpIDIwMDgNCglMYXN0IE1vZGlmaWVkIEJ5OiBDYXJvbCBDYXJwZW50ZXINCglGaWxlIFN1bW1hcnk6IENTUyBjbGFzc2VzIHVzZWQgdGhyb3VnaG91dCB0aGUgZW50aXJlIHdlYiBhcHBsaWNhdGlvbg0KCUNTUyBDb250ZW50czogR2xvYmFsIENsYXNzZXMNCglUZXN0ZWQ6IElFIDUuNSwgSUUgNi4wLCBGaXJlRm94IDIuMA0KDQoqLw0KDQojaWQtbWFpbi1yaWdodC1oZWFkZXItZXJyb3IsIC5tYWluLXJpZ2h0LWhlYWRlci1lcnJvciB7DQoJYmFja2dyb3VuZC1jb2xvcjogI2FhMDAwMDsNCgljb2xvcjogI2ZmZmZmZjsNCglmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6MTBwdDsgIC8qY2hhbmdlIHRvIHNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQoJcGFkZGluZy1sZWZ0OjhweDsNCglwYWRkaW5nLWJvdHRvbTo0cHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwMDAwOw0KCS8qIHRoZXNlIHR3byBtYXJnaW5zIGFmZmVjdCBJRSA1LjUgKi8NCgltYXJnaW4tcmlnaHQ6MHB4Ow0KCXRvcDo5NXB4Ow0KCXZvaWNlLWZhbWlseTogIlwifVwiIjsNCgl2b2ljZS1mYW1pbHk6IGluaGVyaXQ7DQoJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDYgKi8NCgltYXJnaW4tcmlnaHQ6MHB4Ow0KfQ0KDQojaWQtbWFpbi1jb250ZW50cy1lcnJvciwgLm1haW4tY29udGVudHMtZXJyb3IsICNpZC1tYWluX2R3cl9lcnJvcl9hcmVhIHsNCgljb2xvcjogIzAwMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjZWRlZGNmOw0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCglwYWRkaW5nLWxlZnQ6NXB4Ow0KCXBhZGRpbmctcmlnaHQ6NXB4Ow0KCXBhZGRpbmctYm90dG9tOjBweDsNCglwYWRkaW5nLXRvcDo0cHg7DQoJbGluZS1oZWlnaHQ6MTUwJTsNCglwYWRkaW5nLWJvdHRvbTo1cHg7DQp9DQoNCiNpZC1tYWluLXJpZ2h0LWVyci1tc2cgew0KCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjYzk5Ow0KCWJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjYzk5Ow0KCWJvcmRlci1yaWdodDogMXB4IHNvbGlkICNjY2NjOTk7DQoJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjY2NjYzk5Ow0KCWNvbG9yOiAjOTkwMDAwOw0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTogOHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDogbm9ybWFsOw0KCWJhY2tncm91bmQtY29sb3I6ICNmZmZmZWE7DQoJcGFkZGluZzogNXB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LWVycm9yIHsNCgkvKiBDUSAyODMxMyAqLw0KCW91dGxpbmU6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTEwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjEwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMjAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MjBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0zMC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDozMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTQ1LWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjQ1cHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNjAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6NjBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC03MC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDo3MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTc1LWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjc1cHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtOTAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6OTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0xMDUtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MTA1cHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMTIwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjEyMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTEzNS1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDoxMzVweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0xNTAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MTUwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMTgwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjE4MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTIwMC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDoyMDBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0yMTAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MjEwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMjEwLWxhcmdlLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjE2cHQ7DQoJY29sb3I6IzY2NjY2NjsNCgl3aWR0aDoyMTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0yMjAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MjIwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMjQwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjI0MHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTI3MC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDoyNzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0zMDAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MzAwcHg7DQp9DQoNCg0KLmZvcm0tZWxlbWVudC0zMjAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6MzIwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtMzMwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjMzMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTM3MC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDozNzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC00MjAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6NDIwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNTAwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjUwMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTU1MC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDo1NTBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC02MDAtZXJyb3Igew0KCWJvcmRlcjoycHggc29saWQgI2FhMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmMDA7DQoJY29sb3I6IzY2NjY2NjsNCglmb250LWZhbWlseTp2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7DQoJd2lkdGg6NjAwcHg7DQp9DQoNCi5mb3JtLWVsZW1lbnQtNzAwLWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjcwMHB4Ow0KfQ0KDQouZm9ybS1lbGVtZW50LTc3MC1lcnJvciB7DQoJYm9yZGVyOjJweCBzb2xpZCAjYWEwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmYwMDsNCgljb2xvcjojNjY2NjY2Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgl3aWR0aDo3NzBweDsNCn0NCg0KLmZvcm0tZWxlbWVudC0xMDBQZXJjZW50LWVycm9yIHsNCglib3JkZXI6MnB4IHNvbGlkICNhYTAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOw0KCWNvbG9yOiM2NjY2NjY7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0Ow0KCXdpZHRoOjk4JTsNCn0NCg0KI2lkLWR3ci1lcnItbXNnIHsNCgkvKiB0aGlzIHN0eWxlIGlzIGlkZW50aWNhbCB0byBpZC1tYWluLWNvbnRlbnRzLWVycm9yICovDQogICAgICAgIC8qIFVzZWQgZm9yIGRpc3RpZ3Vpc2ggbWFpbiBlcnJvciB2ZXJzdXMgZHdyIGVycm9ycyAqLw0KCWJhY2tncm91bmQtY29sb3I6ICNhYTAwMDA7DQoJY29sb3I6ICNmZmZmZmY7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KCXBhZGRpbmctbGVmdDo4cHg7DQoJcGFkZGluZy1ib3R0b206NHB4Ow0KCXBhZGRpbmctdG9wOjRweDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDAwMDsNCgkvKiB0aGVzZSB0d28gbWFyZ2lucyBhZmZlY3QgSUUgNS41ICovDQoJbWFyZ2luLXJpZ2h0OjBweDsNCgl0b3A6OTVweDsNCgl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJdm9pY2UtZmFtaWx5OiBpbmhlcml0Ow0KCS8qIHRoZXNlIHR3byBtYXJnaW5zIGFmZmVjdCBJRSA2ICovDQoJbWFyZ2luLXJpZ2h0OjBweDsNCn0NCg0KLS0+</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="15" hostname="omniconv" path="/OMNIStatic/themes/omni/global-link-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-link-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8634" connectionId="2016" origin="HTML" ordinal="3" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2237" sendTime="66" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1saW5rLXN0eWxlcy5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>OTky</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogOTkyDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKiANCg0KCURhdGUgRmlsZSBDcmVhdGVkOiBEZWNlbWJlciAoMTMpIDIwMDYNCglDcmVhdGVkIEJ5OiBQYXVsIENvcm1pZQ0KCURhdGUgTGFzdCBNb2RpZmllZDogSmFudWFyeSAoOCkgMjAwNw0KCUxhc3QgTW9kaWZpZWQgQnk6IFBhdWwgQ29ybWllDQoJRmlsZSBTdW1tYXJ5OiBDU1MgY2xhc3NlcyB1c2VkIHRocm91Z2hvdXQgdGhlIGVudGlyZSB3ZWIgYXBwbGljYXRpb24gZm9yIExpbmtzDQoJQ1NTIENvbnRlbnRzOiBIeXBlcmxpbmtzDQoJVGVzdGVkOiBJRSA1LjUsIElFIDYuMCwgRmlyZUZveCAyLjANCglBREQgZmxvYXQ6bGVmdDsgVEFkZCANCglmbG9hdDpsZWZ0Ow0KCXRvIA0KCQlhLmNscy1tYWluLXRhYnMJDQoJYW5kIA0KCWEuY2xzLW1haW4tdGFicy1vbg0KCUZPciBtYWtpbmcgSUUgNyBjb21wYXRpYmxlIHRvIElzc3VlIHdpdGggc3BhY2UgYmV0d2VlbiB0aGUgbWVudSB0YWJzICANCg0KKi8NCg0KYS5jbHMtbGluawkJCXsNCgkJCQkJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJCQkJCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQoJCQkJCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KCQkJCQljb2xvcjogYmx1ZTsNCgkJCQl9DQoNCmEuY2xzLWxpbms6aG92ZXIJCXsNCgkJCQkJY29sb3I6ICMwMDAwOEE7DQoJCQkJCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCgkJCQl9DQoJCQkJDQphLmNscy1saW5rOmFjdGl2ZQkJew0KCQkJCQljb2xvcjogYmx1ZTsNCgkJCQl9DQoJDQphLmNscy1tYWluLXRhYnMJCQl7DQoJCQkJCXBhZGRpbmctbGVmdDogMTBweDsNCgkJCQkJcGFkZGluZy1yaWdodDogMTBweDsNCgkJCQkJcGFkZGluZy10b3A6IDNweDsNCgkJCQkJcGFkZGluZy1ib3R0b206IDNweDsNCgkJCQkJYmFja2dyb3VuZC1pbWFnZTp1cmwoJy4uLy4uL2ltYWdlcy9tZW51LXRvcC9jc3MtYmctb2ZmLmpwZycpOw0KCQkJCQliYWNrZ3JvdW5kLXBvc2l0aW9uOmJvdHRvbSByaWdodDsNCgkJCQkJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KCQkJCQlmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCgkJCQkJZm9udC1zaXplOiA4cHQ7DQoJCQkJCWNvbG9yOiAjNjY2NjY2Ow0KCQkJCQlib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsNCgkJCQkJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjNjY2NjY2Ow0KCQkJCQl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJDQoJCQkJfQ0KCQkJCQ0KYS5jbHMtbWFpbi10YWJzOmhvdmVyCQl7DQoJCQkJCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS10b3AvY3NzLWJnLW9uLmpwZycpOw0KCQkJCQliYWNrZ3JvdW5kLXBvc2l0aW9uOmJvdHRvbSByaWdodDsNCgkJCQkJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KCQkJCQlmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCgkJCQkJZm9udC1zaXplOiA4cHQ7DQoJCQkJCWNvbG9yOiAjMDAwMDAwOw0KCQkJCQlib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjY2M5ODsNCgkJCQkJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjNjY2NjY2Ow0KCQkJCQl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJCQkJfQ0KDQphLmNscy1tYWluLXRhYnMtb24JCQl7DQoJCQkJCXBhZGRpbmctbGVmdDogMTBweDsNCgkJCQkJcGFkZGluZy1yaWdodDogMTBweDsNCgkJCQkJcGFkZGluZy10b3A6IDNweDsNCgkJCQkJcGFkZGluZy1ib3R0b206IDNweDsNCgkJCQkJYmFja2dyb3VuZC1pbWFnZTp1cmwoJy4uLy4uL2ltYWdlcy9tZW51LXRvcC9jc3MtYmctb24uanBnJyk7DQoJCQkJCWJhY2tncm91bmQtcG9zaXRpb246Ym90dG9tIHJpZ2h0Ow0KCQkJCQliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQoJCQkJCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCQkJCQlmb250LXNpemU6IDhwdDsNCgkJCQkJY29sb3I6ICMwMDAwMDA7DQoJCQkJCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjYzk4Ow0KCQkJCQlib3JkZXItbGVmdDogMXB4IHNvbGlkICM2NjY2NjY7DQoJCQkJCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCgkNCgkJCQl9DQoJCQkJDQovKiAgU2xpZ2h0IHdvcmstYXJvdW5kIGZvciBoeXBlcmxpbmsgcGxhY2VtZW50IGluIGhlYWRlciAqLw0KDQphLmNscy1saW5rLWhlbHAJCQl7DQoJCQkJCXBvc2l0aW9uOiByZWxhdGl2ZTsNCgkJCQkJdG9wOjFweDsNCgkJCQkJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJCQkJCWZvbnQtc2l6ZTogN3B0Ow0KCQkJCQlmb250LXdlaWdodDogbm9ybWFsOw0KCQkJCQl0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCgkJCQkJY29sb3I6IGJsdWU7DQoJCQkJfQ0KDQphLmNscy1saW5rLWhlbHA6aG92ZXIJCXsNCgkJCQkJY29sb3I6ICMwMDAwOEE7DQoJCQkJfQ0KCQkJCQ0KYS5jbHMtbGluay1oZWxwOmFjdGl2ZQkJew0KCQkJCQljb2xvcjogYmx1ZTsNCgkJCQl9DQoJCQkJDQphIHsgDQoJY3Vyc29yOiBwb2ludGVyOyANCn0NCmEuY2xzLWxpbmsuZGlzYWJsZWQgew0KCWNvbG9yOiBncmF5Ow0KCWN1cnNvcjogZGVmYXVsdDsNCn0NCmEuY2xzLWxpbmsuZGlzYWJsZWQ6aG92ZXIgew0KCWNvbG9yOiBncmF5Ow0KCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KfQ0KLS0+</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="16" hostname="omniconv" path="/OMNIStatic/themes/omni/global-layer-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-layer-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8635" connectionId="1180" origin="HTML" ordinal="4" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2269" sendTime="97" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1sYXllci1zdHlsZXMuY3NzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTQ2MA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTQ2MA0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKg0KDQoJRGF0ZSBGaWxlIENyZWF0ZWQ6IERlY2VtYmVyICgxMykgMjAwNg0KCUNyZWF0ZWQgQnk6IFBhdWwgQ29ybWllDQoJRGF0ZSBMYXN0IE1vZGlmaWVkOiBGZWJydWFyeSAoNSkgMjAwOA0KCUxhc3QgTW9kaWZpZWQgQnk6IFZpY3RvciBDaG9uZw0KCUZpbGUgU3VtbWFyeTogQ1NTIGNsYXNzZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBlbnRpcmUgd2ViIGFwcGxpY2F0aW9uIGZvciBMYXllcnMNCglDU1MgQ29udGVudHM6IExheWVycw0KCVRlc3RlZDogSUUgNS41LElFIDYuMCxGaXJlRm94IDIuMA0KDQoqLw0KDQojaWQtbG9nZ2VkLWluIHsNCglwYWRkaW5nLWxlZnQ6MTBweDsNCglwYWRkaW5nLXJpZ2h0OjVweDsNCglwYWRkaW5nLXRvcDozcHg7DQoJcGFkZGluZy1ib3R0b206M3B4Ow0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS10b3AvbG9nZ2VkLWluLWJnLmpwZycpOw0KCWJhY2tncm91bmQtcG9zaXRpb246Ym90dG9tIGxlZnQ7DQoJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsNCgljb2xvcjojNjY2NjY2Ow0KfQ0KDQojaWQtbWFpbi1yaWdodC1tc2ctd3JhcHBlciB7DQoJYm9yZGVyLWJvdHRvbTo1cHggc29saWQgI2ZmZmZmZjsNCn0NCg0KI2lkLWF1dG8tc2F2ZSB7DQoJcG9zaXRpb246YWJzb2x1dGU7DQoJbGVmdDotMTcwcHg7DQoJdG9wOjBweDsNCgltYXJnaW4tcmlnaHQ6NXB4Ow0KCWJhY2tncm91bmQtY29sb3I6I2ZmZmZlYTsNCglwYWRkaW5nOjUwcHg7DQoJYm9yZGVyOjFweCBzb2xpZCAjY2NjYzk5Ow0KCWNvbG9yOiM5OTAwMDA7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpub3JtYWw7DQoJdmlzaWJpbGl0eTpoaWRkZW47DQp9DQoNCiNpZC13aGl0ZS1zY3JlZW4gew0KCXBvc2l0aW9uOmFic29sdXRlOw0KCWxlZnQ6LTIwMHB4Ow0KCXRvcDotMTAwcHg7DQoJd2lkdGg6MTUwMHB4Ow0KCWhlaWdodDozMDBweDsNCgl2aXNpYmlsaXR5OmhpZGRlbjsNCglmb250LXNpemU6eC1sYXJnZTsNCgliYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmY7DQoJZmlsdGVyOmFscGhhKG9wYWNpdHk9NzUpOw0KfQ0KDQojaWQtbWVudS1sZWZ0IHsNCglwb3NpdGlvbjpyZWxhdGl2ZTsNCgl0b3A6LTEwcHg7DQoJd2lkdGg6MTY5cHg7DQoJbWFyZ2luOjBweDsNCgljb2xvcjojMDAwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2VkZWRjZjsNCglmb250LWZhbWlseTp2ZXJkYW5hLGFyaWFsLGhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCglwYWRkaW5nLWxlZnQ6M3B4Ow0KCXBhZGRpbmctcmlnaHQ6M3B4Ow0KCXBhZGRpbmctdG9wOjRweDsNCglwYWRkaW5nLWJvdHRvbTo0cHg7DQp9DQoNCiNpZC1tZW51LWxlZnQtaGVhZGVyIHsNCglwb3NpdGlvbjpyZWxhdGl2ZTsNCgl0b3A6LTEwcHg7DQoJd2lkdGg6MTcwcHg7DQoJbWFyZ2luOjBweDsNCgljb2xvcjojMDAwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2NjY2M5OTsNCglmb250LWZhbWlseTp2ZXJkYW5hLGFyaWFsLGhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZToxMHB0Ow0KCWZvbnQtd2VpZ2h0OmJvbGQ7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLWJvdHRvbTo0cHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWJvcmRlci1ib3R0b206MXB4IHNvbGlkICM2NjY2NjY7DQp9DQoNCiNpZC1tYWluLWNvbnRlbnRzLCAubWFpbi1jb250ZW50cyB7DQoJY29sb3I6IzAwMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNlZGVkY2Y7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpub3JtYWw7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLXJpZ2h0OjVweDsNCglwYWRkaW5nLWJvdHRvbTowcHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWxpbmUtaGVpZ2h0OjE1MCU7DQoJcGFkZGluZy1ib3R0b206NXB4Ow0KCXdvcmQtd3JhcDogYnJlYWstd29yZDsgDQp9DQoNCiNpZC1tYWluLWNvbnRlbnRzLW92ZXJ2aWV3LCAubWFpbi1jb250ZW50cy1vdmVydmlldyB7DQoJY29sb3I6IzAwMDAwMDsNCgliYWNrZ3JvdW5kLWNvbG9yOiNlZGVkY2Y7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6OHB0OyAgLypjaGFuZ2UgdG8geC1zbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpub3JtYWw7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLXJpZ2h0OjVweDsNCglwYWRkaW5nLWJvdHRvbTowcHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWxpbmUtaGVpZ2h0OjE1MCU7DQoJcGFkZGluZy1ib3R0b206NXB4Ow0KfQ0KDQojaWQtbWFpbi1yaWdodC1oZWFkZXItb3ZlcnZpZXctY29sbGFwc2VkLCAubWFpbi1yaWdodC1oZWFkZXItb3ZlcnZpZXctY29sbGFwc2VkIHsNCglwb3NpdGlvbjpyZWxhdGl2ZTsNCgltYXJnaW46MHB4Ow0KCWNvbG9yOiMwMDAwMDA7DQoJYmFja2dyb3VuZC1jb2xvcjojY2NjYzk5Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KCXBhZGRpbmctbGVmdDo1cHg7DQoJcGFkZGluZy1ib3R0b206NHB4Ow0KCXBhZGRpbmctdG9wOjRweDsNCglib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNjY2NjY2Ow0KfQ0KDQojaWQtbWFpbi1yaWdodC1oZWFkZXItb3ZlcnZpZXctZXhwYW5kZWQsIC5tYWluLXJpZ2h0LWhlYWRlci1vdmVydmlldy1leHBhbmRlZCwgLmNvbGxhcHNpYmxlLWhlYWRlciB7DQoJcG9zaXRpb246cmVsYXRpdmU7DQoJbWFyZ2luOjBweDsNCgljb2xvcjojMDAwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6I2NjY2M5OTsNCglmb250LWZhbWlseTp2ZXJkYW5hLGFyaWFsLGhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZToxMHB0OyAgLypjaGFuZ2UgdG8gc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6Ym9sZDsNCglwYWRkaW5nLWxlZnQ6NXB4Ow0KCXBhZGRpbmctYm90dG9tOjRweDsNCglwYWRkaW5nLXRvcDo0cHg7DQoJYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzY2NjY2NjsNCn0NCg0KLyogTm90ZSB0aGUgYmFja2dyb3VuZCBpbWFnZSBpcyByZWxhdGVkIHRvIHRoZSBudW1iZXIgb2YgbGluZXMgaW4gdGhlIGxheWVyICovDQovKiBBdmFpbGFibGUgYmcgaW1hZ2VzOmJ1YmJsZS1iZy0xLWxpbmUuZ2lmIHRvIGJ1YmJsZS1iZy02LWxpbmUuZ2lmICAqLw0KDQojaWQtdG9vbHRpcC1hc3NpZ25tZW50cyB7DQoJcG9zaXRpb246YWJzb2x1dGU7DQoJd2lkdGg6MTgwcHg7DQoJaGVpZ2h0Ojg1cHg7DQoJei1pbmRleDoxMDA7DQoJbGVmdDo5NXB4Ow0KCXRvcDo4MHB4Ow0KCXZpc2liaWxpdHk6aGlkZGVuOw0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS10b3AvYnViYmxlLWJnLTMtbGluZS5naWYnKTsNCgliYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBsZWZ0Ow0KCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDsNCglwYWRkaW5nLWxlZnQ6MTBweDsNCglwYWRkaW5nLXJpZ2h0OjIwcHg7DQoJcGFkZGluZy10b3A6MjJweDsNCglwYWRkaW5nLWJvdHRvbTo2cHg7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6N3B0Ow0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCn0NCg0KI2lkLXRvb2x0aXAtb2ZmZW5kZXIgew0KCXBvc2l0aW9uOmFic29sdXRlOw0KCXdpZHRoOjE4MHB4Ow0KCWhlaWdodDo4NXB4Ow0KCXotaW5kZXg6MTAwOw0KCWxlZnQ6MTc5cHg7DQoJdG9wOjgwcHg7DQoJdmlzaWJpbGl0eTpoaWRkZW47DQoJYmFja2dyb3VuZC1pbWFnZTp1cmwoJy4uLy4uL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctMi1saW5lLmdpZicpOw0KCWJhY2tncm91bmQtcG9zaXRpb246dG9wIGxlZnQ7DQoJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KCXBhZGRpbmctbGVmdDoxMHB4Ow0KCXBhZGRpbmctcmlnaHQ6MjBweDsNCglwYWRkaW5nLXRvcDoyMnB4Ow0KCXBhZGRpbmctYm90dG9tOjZweDsNCglmb250LWZhbWlseTp2ZXJkYW5hLGFyaWFsLGhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo3cHQ7DQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KfQ0KDQojaWQtdG9vbHRpcC1mYWNpbGl0eSB7DQoJcG9zaXRpb246YWJzb2x1dGU7DQoJd2lkdGg6MTgwcHg7DQoJaGVpZ2h0Ojg1cHg7DQoJei1pbmRleDoxMDA7DQoJbGVmdDoyNDdweDsNCgl0b3A6ODBweDsNCgl2aXNpYmlsaXR5OmhpZGRlbjsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtdG9wL2J1YmJsZS1iZy0xLWxpbmUuZ2lmJyk7DQoJYmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgbGVmdDsNCgliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQoJcGFkZGluZy1sZWZ0OjEwcHg7DQoJcGFkZGluZy1yaWdodDo0MHB4Ow0KCXBhZGRpbmctdG9wOjIycHg7DQoJcGFkZGluZy1ib3R0b206NnB4Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjdwdDsNCglmb250LXdlaWdodDpub3JtYWw7DQp9DQoNCiNpZC10b29sdGlwLXNlYXJjaCB7DQoJcG9zaXRpb246YWJzb2x1dGU7DQoJd2lkdGg6MTgwcHg7DQoJaGVpZ2h0Ojg1cHg7DQoJei1pbmRleDoxMDA7DQoJbGVmdDozMDlweDsNCgl0b3A6ODBweDsNCgl2aXNpYmlsaXR5OmhpZGRlbjsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtdG9wL2J1YmJsZS1iZy01LWxpbmUuZ2lmJyk7DQoJYmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgbGVmdDsNCgliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQoJcGFkZGluZy1sZWZ0OjEwcHg7DQoJcGFkZGluZy1yaWdodDoyMHB4Ow0KCXBhZGRpbmctdG9wOjIycHg7DQoJcGFkZGluZy1ib3R0b206NnB4Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjdwdDsNCglmb250LXdlaWdodDpub3JtYWw7DQp9DQoNCiNpZC10b29sdGlwLXBsYW5zIHsNCglwb3NpdGlvbjphYnNvbHV0ZTsNCgl3aWR0aDoxODBweDsNCgloZWlnaHQ6ODVweDsNCgl6LWluZGV4OjEwMDsNCglsZWZ0OjI0N3B4Ow0KCXRvcDo4MHB4Ow0KCXZpc2liaWxpdHk6aGlkZGVuOw0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS10b3AvYnViYmxlLWJnLTEtbGluZS5naWYnKTsNCgliYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBsZWZ0Ow0KCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDsNCglwYWRkaW5nLWxlZnQ6MTBweDsNCglwYWRkaW5nLXJpZ2h0OjIwcHg7DQoJcGFkZGluZy10b3A6MjJweDsNCglwYWRkaW5nLWJvdHRvbTo2cHg7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6N3B0Ow0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCn0NCg0KI2lkLXRvb2x0aXAtcHJvZ3JhbXMgew0KCXBvc2l0aW9uOmFic29sdXRlOw0KCXdpZHRoOjE4MHB4Ow0KCWhlaWdodDo4NXB4Ow0KCXotaW5kZXg6MTAwOw0KCWxlZnQ6MjQ3cHg7DQoJdG9wOjgwcHg7DQoJdmlzaWJpbGl0eTpoaWRkZW47DQoJYmFja2dyb3VuZC1pbWFnZTp1cmwoJy4uLy4uL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctMS1saW5lLmdpZicpOw0KCWJhY2tncm91bmQtcG9zaXRpb246dG9wIGxlZnQ7DQoJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KCXBhZGRpbmctbGVmdDoxMHB4Ow0KCXBhZGRpbmctcmlnaHQ6MjBweDsNCglwYWRkaW5nLXRvcDoyMnB4Ow0KCXBhZGRpbmctYm90dG9tOjZweDsNCglmb250LWZhbWlseTp2ZXJkYW5hLGFyaWFsLGhlbHZldGljYSxzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo3cHQ7DQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KfQ0KDQojaWQtdG9vbHRpcC1hZG1pbmlzdHJhdGlvbiB7DQoJcG9zaXRpb246YWJzb2x1dGU7DQoJd2lkdGg6MTgwcHg7DQoJaGVpZ2h0Ojg1cHg7DQoJei1pbmRleDoxMDA7DQoJbGVmdDozOTJweDsNCgl0b3A6ODBweDsNCgl2aXNpYmlsaXR5OmhpZGRlbjsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtdG9wL2J1YmJsZS1iZy01LWxpbmUuZ2lmJyk7DQoJYmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgbGVmdDsNCgliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQoJcGFkZGluZy1sZWZ0OjEwcHg7DQoJcGFkZGluZy1yaWdodDo0MHB4Ow0KCXBhZGRpbmctdG9wOjIycHg7DQoJcGFkZGluZy1ib3R0b206NnB4Ow0KCWZvbnQtZmFtaWx5OnZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjdwdDsNCglmb250LXdlaWdodDpub3JtYWw7DQp9DQoNCiNpZC10b29sdGlwLWhlYWx0aFNlcnZpY2VzIHsNCglwb3NpdGlvbjphYnNvbHV0ZTsNCgl3aWR0aDoxODBweDsNCgloZWlnaHQ6ODVweDsNCgl6LWluZGV4OjEwMDsNCglsZWZ0OjM5MnB4Ow0KCXRvcDo4MHB4Ow0KCXZpc2liaWxpdHk6aGlkZGVuOw0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS10b3AvYnViYmxlLWJnLTItbGluZS5naWYnKTsNCgliYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBsZWZ0Ow0KCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDsNCglwYWRkaW5nLWxlZnQ6MTBweDsNCglwYWRkaW5nLXJpZ2h0OjIwcHg7DQoJcGFkZGluZy10b3A6MjJweDsNCglwYWRkaW5nLWJvdHRvbTo2cHg7DQoJZm9udC1mYW1pbHk6dmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXNpemU6N3B0Ow0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCn0NCg0KLmhlaWdodFByb3Agew0KICAgIGhlaWdodDoxcHg7DQogIH0NCg0KDQotLT4=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="17" hostname="omniconv" path="/OMNIStatic/themes/omni/global-layout-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-layout-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8636" connectionId="2052" origin="HTML" ordinal="5" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2270" sendTime="98" waitTime="0" receiveTime="2">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1sYXlvdXQtc3R5bGVzLmNzcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQpDb29raWU6IEpTRVNTSU9OSUQ9MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0xDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MjI3Nw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMjI3Nw0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKiANCg0KCURhdGUgRmlsZSBDcmVhdGVkOiBOb3ZlbWJlciAoMjApIDIwMDYNCglDcmVhdGVkIEJ5OiBQYXVsIENvcm1pZQ0KCURhdGUgTGFzdCBNb2RpZmllZDogRmVicnVhcnkgKDIzKSAyMDA3DQoJTGFzdCBNb2RpZmllZCBCeTogVmljdG9yIENob25nDQoJRmlsZSBTdW1tYXJ5OiBDU1MgY2xhc3NlcyB1c2VkIHRvIHNwZWNpZnkgdGhlIGZvcm1hdHRpbmcgb2YgcGFnZSBpbnRvIGhlYWRlciBhbmQgdHdvIGNvbHVtbnMgKG1lbnUgLyBjb250ZW50IGFyZWEpDQoJQ1NTIENvbnRlbnRzOiBMYXlvdXQgUmVsYXRlZCBDbGFzc2VzIC8gTGF5ZXJzDQoJVGVzdGVkOiBJRSA1LjUsIElFIDYuMCwgRmlyZUZveCAyLjANCg0KDQppZC1tYWluLWhlYWRlciBzdWIgbGF5ZXIgZGVmaW5pdGlvbg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCnwJYTEJfAlhMgkJfAlhMwl8DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KfAliMQkJCXwJYjIJfA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCnwJCWMxCQkJfA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCnwJZDEJCXwJZDIJfA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoqLw0KDQpodG1sLCBib2R5IHsNCglib3JkZXI6IDBweDsNCglmb250LWZhbWlseTogdmVyZGFuYSxhcmlhbCxoZWx2ZXRpY2Esc2Fucy1zZXJpZjsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCW1hcmdpbjogMHB4Ow0KCXBhZGRpbmc6IDBweDsNCn0NCg0KI2lkLWJvZHktcG9wdXAgew0KCWJhY2tncm91bmQtY29sb3I6ICNlZGVkY2Y7DQoJYm9yZGVyOiAwcHg7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCgltYXJnaW46IDBweDsNCglwYWRkaW5nOiAwcHg7DQp9DQoNCiNpZC1tYWluLWhlYWRlciB7DQoJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQoJbWFyZ2luLWxlZnQ6IDVweDsNCgltYXJnaW4tcmlnaHQ6IDVweDsNCgkvKiBJRSA1LjUgKi8NCgloZWlnaHQ6IDgxcHg7DQoJdm9pY2UtZmFtaWx5OiAiXCJ9XCIiOw0KCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgkvKiBJRSA2ICovDQoJaGVpZ2h0OiA5OXB4Ow0KCX0NCglodG1sPmJvZHkgI2lkLW1haW4taGVhZGVyIHsNCgkvKiB0aGVzZSBhZmZlY3QgTW96aWxsYSBhbmQgU2FmYXJpICovIA0KCWhlaWdodDogOTlweDsNCn0NCg0KI2lkLW1haW4taGVhZGVyLWEtMSB7DQoJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCWxlZnQ6IDVweDsNCgl0b3A6IDBweDsNCglwYWRkaW5nLWxlZnQ6IDBweDsNCgl3aWR0aDogMTY1cHg7DQoJaGVpZ2h0OiA0NXB4Ow0KCX0NCglodG1sPmJvZHkgI2lkLW1haW4taGVhZGVyLWEtMiB7DQoJaGVpZ2h0OiA0NXB4Ow0KfQ0KDQojaWQtbWFpbi1oZWFkZXItYS0yIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCgltYXJnaW4tbGVmdDogMTY1cHg7DQoJbWFyZ2luLXJpZ2h0OiAxOTBweDsNCgl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJdm9pY2UtZmFtaWx5OiBpbmhlcml0Ow0KCW1hcmdpbi1sZWZ0OiAxNjVweDsNCgltYXJnaW4tcmlnaHQ6IDE5MHB4Ow0KCXRleHQtYWxpZ246IGNlbnRlcjsNCgloZWlnaHQ6IDQ1cHg7DQoJfQ0KCWh0bWw+Ym9keSAjaWQtbWFpbi1oZWFkZXItYS0yIHsNCgltYXJnaW4tbGVmdDogMTY1cHg7DQoJbWFyZ2luLXJpZ2h0OiAyMDhweDsNCgloZWlnaHQ6IDQ1cHg7DQp9CQ0KDQojaWQtbWFpbi1oZWFkZXItYS0zIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJcGFkZGluZy10b3A6IDVweDsNCglyaWdodDogNXB4Ow0KCXRvcDogMHB4Ow0KCXdpZHRoOiAxOTBweDsNCgloZWlnaHQ6IDUwcHg7DQoJdGV4dC1hbGlnbjogcmlnaHQ7DQoJfQ0KCWh0bWw+Ym9keSAjaWQtbWFpbi1oZWFkZXItYS0zIHsNCgl3aWR0aDogMjA3cHg7DQoJaGVpZ2h0OiA1MHB4Ow0KCXBhZGRpbmctdG9wOiA1cHg7DQoJcmlnaHQ6IDNweDsNCn0NCg0KI2lkLW1haW4taGVhZGVyLWItMSB7DQoJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQoJdm9pY2UtZmFtaWx5OiAiXCJ9XCIiOw0KCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgltYXJnaW4tbGVmdDogMHB4Ow0KCW1hcmdpbi1yaWdodDogMzUwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCglwYWRkaW5nLXRvcDogMnB4Ow0KCWhlaWdodDogMTdweDsNCglmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsgDQoJZm9udC1zaXplOiA0cHQ7DQoJY29sb3I6ICM2NjY2NjY7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCgl9DQoJaHRtbD5ib2R5ICNpZC1tYWluLWhlYWRlci1iLTEgew0KCW1hcmdpbi1sZWZ0OiAwcHg7DQoJbWFyZ2luLXJpZ2h0OiAzNTBweDsNCgloZWlnaHQ6IDE3cHg7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCg0KI2lkLW1haW4taGVhZGVyLWItMiB7DQoJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQovKglwb3NpdGlvbjogYWJzb2x1dGU7Ki8NCi8qCXBhZGRpbmctdG9wOiA1cHg7Ki8NCglyaWdodDogNXB4Ow0KCXRvcDogMzJweDsNCgl3aWR0aDogMTAwJTsvKjM1MHB4OyovDQoJaGVpZ2h0OiAxNXB4Oy8qMjVweDsqLw0KCXRleHQtYWxpZ246IHJpZ2h0Ow0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTogN3B0Ow0KCWNvbG9yOiAjNjY2NjY2Ow0KCX0NCglodG1sPmJvZHkgI2lkLW1haW4taGVhZGVyLWItMiB7DQoJd2lkdGg6IDEwMCU7LyozNTBweDsqLw0KCS8qdG9wOiAzNXB4OyovDQp9DQoNCiNpZC1tYWluLWhlYWRlci1jLTEgew0KCWJhY2tncm91bmQtY29sb3I6ICNjY2NjOTk7DQoJbWFyZ2luLWxlZnQ6IDBweDsNCgltYXJnaW4tcmlnaHQ6IDBweDsNCgl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJdm9pY2UtZmFtaWx5OiBpbmhlcml0Ow0KCW1hcmdpbi1sZWZ0OiAwcHg7DQoJbWFyZ2luLXJpZ2h0OiAwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgloZWlnaHQ6IDRweDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsNCglmb250LWZhbWlseTogdmVyZGFuYSwgYXJpYWwsIGhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXNpemU6IDJwdDsNCgljb2xvcjogIzY2NjY2NjsNCgl9DQoJaHRtbD5ib2R5ICNpZC1tYWluLWhlYWRlci1jLTEgew0KCW1hcmdpbi1sZWZ0OiAwcHg7DQoJbWFyZ2luLXJpZ2h0OiAwcHg7DQoJaGVpZ2h0OiA0cHg7DQp9DQoNCiNpZC1tYWluLWhlYWRlci1kLTEgew0KCWJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KCW1hcmdpbi1sZWZ0OiAxNjVweDsNCgl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJdm9pY2UtZmFtaWx5OiBpbmhlcml0Ow0KCW1hcmdpbi1sZWZ0OiAwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgloZWlnaHQ6IDMwcHg7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOiA4cHQ7DQoJY29sb3I6ICM2NjY2NjY7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCglwYWRkaW5nLXRvcDogM3B4Ow0KfQ0KaHRtbD5ib2R5ICNpZC1tYWluLWhlYWRlci1kLTEgew0KCW1hcmdpbi1sZWZ0OiAwcHg7DQoJaGVpZ2h0OiAzM3B4Ow0KfQ0KDQojaWQtbWFpbi1oZWFkZXItZC0yIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJcmlnaHQ6IDVweDsNCgl0b3A6IDY5cHg7DQoJaGVpZ2h0OiAzMHB4Ow0KCXRleHQtYWxpZ246IHJpZ2h0Ow0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWNvbG9yOiAjZTFlMWUxOw0KfQ0KaHRtbD5ib2R5ICNpZC1tYWluLWhlYWRlci1kLTIgew0KCWxpbmUtaGVpZ2h0OiAxLjY7DQoJbWFyZ2luLXRvcDoxMnB4Ow0KfQ0KDQovKiBsZWZ0IHNpZGUgbWVudSAqLw0KI2lkLW1haW4tbGVmdCB7DQoJCQkJCWJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KCQkJCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJdG9wOiAxMTBweDsNCgkJCQkJd2lkdGg6IDE4MHB4Ow0KCQkJCQlwYWRkaW5nOiAwcHggNXB4Ow0KCQkJCQl9DQoJCQkJCWh0bWw+Ym9keSAjaWQtbWFpbi1sZWZ0IHsNCgkJCQkJLyogdGhlc2UgYWZmZWN0IE1vemlsbGEgYW5kIFNhZmFyaSAqLyANCgkJCQkJcG9zaXRpb246IGFic29sdXRlOw0KCQkJCQlsZWZ0OiAwcHg7DQoJCQkJCXRvcDogOTRweDsNCgkJCQkJd2lkdGg6IDE4MHB4Ow0KCQkJCQlwYWRkaW5nOiAwcHggNXB4Ow0KfQ0KDQojaWQtbWFpbi1sZWZ0LWZvcnMgew0KCQkJCQliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCgkJCQkJcG9zaXRpb246IGFic29sdXRlOw0KCQkJCQlsZWZ0OiAwcHg7DQoJCQkJCXRvcDogNzhweDsNCgkJCQkJd2lkdGg6IDE4MHB4Ow0KCQkJCQlwYWRkaW5nOiAwcHggNXB4Ow0KCQkJCQl9DQoJCQkJCWh0bWw+Ym9keSAjaWQtbWFpbi1sZWZ0IHsNCgkJCQkJLyogdGhlc2UgYWZmZWN0IE1vemlsbGEgYW5kIFNhZmFyaSAqLyANCgkJCQkJcG9zaXRpb246IGFic29sdXRlOw0KCQkJCQlsZWZ0OiAwcHg7DQoJCQkJCXRvcDogOTRweDsNCgkJCQkJd2lkdGg6IDE4MHB4Ow0KCQkJCQlwYWRkaW5nOiAwcHggNXB4Ow0KfQ0KDQojaWQtYmVsb3ctbWFpbi1sZWZ0IHsNCgkJCQkJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQoJCQkJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJCQkJbGVmdDogMHB4Ow0KCQkJCQl0b3A6IDM1MHB4Ow0KCQkJCQl3aWR0aDogMTc1cHg7DQoJCQkJCXBhZGRpbmc6IDBweCAwcHg7DQoJCQkJCW1hcmdpbi1yaWdodDogMHB4Ow0KCQkJCQlwYWRkaW5nLWxlZnQ6IDJweDsNCgkJCQkJcGFkZGluZy1ib3R0b206IDRweDsNCgkJCQkJcGFkZGluZy10b3A6IDRweDsNCgkJCQkJfQ0KCQkJCQlodG1sPmJvZHkgI2lkLWJlbG93LW1haW4tbGVmdCB7DQoJCQkJCS8qIHRoZXNlIGFmZmVjdCBNb3ppbGxhIGFuZCBTYWZhcmkgKi8gDQoJCQkJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJCQkJbGVmdDogMHB4Ow0KCQkJCQl0b3A6IDMzNHB4Ow0KCQkJCQl3aWR0aDogMTc1cHg7DQoJCQkJCXBhZGRpbmctbGVmdDogMnB4Ow0KCQkJCQlwYWRkaW5nLWJvdHRvbTogNHB4Ow0KCQkJCQlwYWRkaW5nLXRvcDogNHB4Ow0KCQkJCQkNCn0NCg0KLyogbGVmdCBzaWRlIGNvbnRlbnQgYXJlYSAqLw0KI2lkLW1haW4tcmlnaHQgew0KCQkJCQliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCgkJCQkJcG9zaXRpb246IHJlbGF0aXZlOw0KCQkJCQl0b3A6IC0ycHg7DQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDUuNSAqLyANCgkJCQkJbWFyZ2luLWxlZnQ6IDE5MHB4Ow0KCQkJCQl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJCQkJCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDYgKi8gDQoJCQkJCW1hcmdpbi1sZWZ0OiAxOTBweDsNCgkJCQkJbWFyZ2luLXJpZ2h0OiA1cHg7IA0KCQkJCQl9DQoJCQkJCWh0bWw+Ym9keSAjaWQtbWFpbi1yaWdodCB7DQoJCQkJCS8qIHRoZXNlIGFmZmVjdCBNb3ppbGxhIGFuZCBTYWZhcmkgKi8gDQoJCQkJCXBvc2l0aW9uOiByZWxhdGl2ZTsNCgkJCQkJdG9wOiAxcHg7DQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJbWFyZ2luLWxlZnQ6IDE5MHB4Ow0KCQkJCQltYXJnaW4tcmlnaHQ6IDVweDsNCn0NCg0KLyogbGVmdCBzaWRlIG1lbnUgKi8NCiNpZC1tYWluLXJpZ2h0LWhlYWRlciwgLm1haW4tcmlnaHQtaGVhZGVyIHsNCgkJCQkJYmFja2dyb3VuZC1jb2xvcjogI2NjY2M5OTsNCgkJCQkJY29sb3I6ICMwMDAwMDA7DQoJCQkJCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCQkJCQlmb250LXNpemU6IDEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCgkJCQkJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJCQkJCXBhZGRpbmctbGVmdDogOHB4Ow0KCQkJCQlwYWRkaW5nLWJvdHRvbTogNHB4Ow0KCQkJCQlwYWRkaW5nLXRvcDogNHB4Ow0KCQkJCQlib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDUuNSAqLw0KCQkJCQltYXJnaW4tcmlnaHQ6IDBweDsNCgkJCQkJdG9wOiA5NXB4Ow0KCQkJCQl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJCQkJCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDYgKi8NCgkJCQkJbWFyZ2luLXJpZ2h0OiAwcHg7DQp9DQoNCiNpZC1tYWluLWNvbnRlbnRzLWluZm9ib3ggCXsNCgkJCQkJYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZjYzsNCgkJCQkJY29sb3I6ICMwMDAwMDA7DQoJCQkJCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCQkJCQlmb250LXNpemU6IDEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCgkJCQkJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJCQkJCXBhZGRpbmctbGVmdDogOHB4Ow0KCQkJCQlwYWRkaW5nLWJvdHRvbTogNHB4Ow0KCQkJCQlwYWRkaW5nLXRvcDogNHB4Ow0KCQkJCQlib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDUuNSAqLw0KCQkJCQltYXJnaW4tcmlnaHQ6IDBweDsNCgkJCQkJdG9wOiA5NXB4Ow0KCQkJCQl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJCQkJCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDYgKi8NCgkJCQkJbWFyZ2luLXJpZ2h0OiAwcHg7IA0KCQkNCn0NCg0KI2lkLW1haW4tY29udGVudHMtc3VidGl0bGUgCXsNCgkJCQkJYmFja2dyb3VuZC1jb2xvcjogI2NhYzhiYjsNCgkJCQkJY29sb3I6ICMwMDAwMDA7DQoJCQkJCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCQkJCQlmb250LXNpemU6IDEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCgkJCQkJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJCQkJCXBhZGRpbmctbGVmdDogOHB4Ow0KCQkJCQlwYWRkaW5nLWJvdHRvbTogNHB4Ow0KCQkJCQlwYWRkaW5nLXRvcDogNHB4Ow0KCQkJCQkNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDUuNSAqLw0KCQkJCQltYXJnaW4tcmlnaHQ6IDBweDsNCgkJCQkJdG9wOiA5NXB4Ow0KCQkJCQl2b2ljZS1mYW1pbHk6ICJcIn1cIiI7DQoJCQkJCXZvaWNlLWZhbWlseTogaW5oZXJpdDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDYgKi8NCgkJCQkJbWFyZ2luLXJpZ2h0OiAwcHg7IA0KCQkNCn0NCg0KDQojaWQtbWFpbi1yaWdodC1oZWFkZXItc3ViLCAubWFpbi1yaWdodC1oZWFkZXItc3ViIHsNCgkJCQkJYmFja2dyb3VuZC1jb2xvcjogI2Q4ZDhhZjsNCgkJCQkJY29sb3I6ICMwMDAwMDA7DQoJCQkJCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCQkJCQlmb250LXNpemU6IDhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJCQkJCWZvbnQtd2VpZ2h0OiBib2xkOw0KCQkJCQlwYWRkaW5nLWxlZnQ6IDVweDsNCgkJCQkJcGFkZGluZy1yaWdodDogNXB4Ow0KCQkJCQlwYWRkaW5nLWJvdHRvbTogMHB4Ow0KCQkJCQlwYWRkaW5nLXRvcDogNHB4Ow0KCQkJCQlsaW5lLWhlaWdodDogMTUwJTsNCgkJCQkJcGFkZGluZy1ib3R0b206IDVweDsNCn0NCg0KDQovKiBtYWluIGNvbnRlbnQgYXJlYSAodXNlZCB3aGVuIG5vIG5lZWQgZm9yIGxlZnQgbWVudSBhcmVhKSovDQojaWQtbWFpbiB7DQoJCQkJCWJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KCQkJCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJdG9wOiAxMDBweDsNCgkJCQkJcGFkZGluZzogMHB4IDVweDsNCgkJCQkJfQ0KCQkJCQlodG1sPmJvZHkgI2lkLW1haW4gew0KCQkJCQkvKiB0aGVzZSBhZmZlY3QgTW96aWxsYSBhbmQgU2FmYXJpICovIA0KCQkJCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJdG9wOiA5NHB4Ow0KCQkJCQltYXJnaW4tcmlnaHQ6IDVweDsgDQoJCQkJCXBhZGRpbmc6IDBweCA1cHg7DQp9DQoNCiNpZC1tYWluLXByaW50IHsNCg0KCQkJCQliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCgkJCQkJcG9zaXRpb246IHJlbGF0aXZlOw0KCQkJCQkvKiB0b3A6IC0ycHg7ICovDQoJCQkJCWxlZnQ6IDBweDsNCgkJCQkJLyogdGhlc2UgdHdvIG1hcmdpbnMgYWZmZWN0IElFIDUuNSAqLyANCgkJCQkJbWFyZ2luLWxlZnQ6IDVweDsNCgkJCQkJdm9pY2UtZmFtaWx5OiAiXCJ9XCIiOw0KCQkJCQl2b2ljZS1mYW1pbHk6IGluaGVyaXQ7DQoJCQkJCS8qIHRoZXNlIHR3byBtYXJnaW5zIGFmZmVjdCBJRSA2ICovIA0KCQkJCQltYXJnaW4tbGVmdDogMHB4Ow0KCQkJCQltYXJnaW4tcmlnaHQ6IDVweDsgDQoJCQkJCX0NCgkJCQkJaHRtbD5ib2R5ICNpZC1tYWluLXByaW50ICAgICAgICAgICAgew0KCQkJCQkvKiB0aGVzZSBhZmZlY3QgTW96aWxsYSBhbmQgU2FmYXJpICovIA0KCQkJCQlwb3NpdGlvbjogcmVsYXRpdmU7DQoJCQkJCXRvcDogMXB4Ow0KCQkJCQlsZWZ0OiAwcHg7DQoJCQkJCW1hcmdpbi1sZWZ0OiAwcHg7DQoJCQkJCW1hcmdpbi1yaWdodDogNXB4Ow0KfQ0KDQoNCg0KLmRlYWQtU21hbGwNCnsNCglmb250LWZhbWlseTpUaW1lcyBOZXcgUm9tYW47DQoJZm9udC13ZWlnaHQ6Ym9sZDsgDQoJZm9udC1zaXplOjhweDsgDQoJY29sb3I6UmVkOw0KICAgIG1hcmdpbi1sZWZ0OiA1cHg7DQoJbWFyZ2luLXRvcDotMTVweDsNCn0NCg0KLmRlYWQtTm9ybWFsDQp7DQoJZm9udC1mYW1pbHk6VGltZXMgTmV3IFJvbWFuOw0KCWZvbnQtd2VpZ2h0OmJvbGQ7IA0KCWZvbnQtc2l6ZTozNHB4OyANCgl0ZXh0LWFsaWduOmNlbnRlcjsgDQoJY29sb3I6UmVkOyANCgltYXJnaW4tdG9wOi02NXB4Ow0KfQ0KDQojc2luZ2xlLVBob3RvLURlYWQNCnsNCglmb250LWZhbWlseTpUaW1lcyBOZXcgUm9tYW47DQoJZm9udC13ZWlnaHQ6Ym9sZDsgDQoJZm9udC1zaXplOjMwcHg7IA0KCWNvbG9yOlJlZDsgDQogICAgbWFyZ2luLWxlZnQ6MTVweDsgDQoJbWFyZ2luLXRvcDotNDBweDsJDQp9DQoNCiNtZWRpdW0tUGhvdG8tRGVhZCwgLmRlYWQtTWVkaXVtIHsNCiAgICBjb2xvcjogUmVkOw0KICAgIGZvbnQtZmFtaWx5OiBUaW1lcyBOZXcgUm9tYW47DQogICAgZm9udC1zaXplOiAyMnB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgIG1hcmdpbi1sZWZ0OiAycHg7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogMTgwcHg7DQp9DQotLT4=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="18" hostname="omniconv" path="/OMNIStatic/themes/omni/global-menu-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-menu-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="6" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2174" sendTime="3" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1tZW51LXN0eWxlcy5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTAxMw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTAxMw0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKiANCg0KCURhdGUgRmlsZSBDcmVhdGVkOiBOb3ZlbWJlciAoMjApIDIwMDYNCglDcmVhdGVkIEJ5OiBQYXVsIENvcm1pZQ0KCURhdGUgTGFzdCBNb2RpZmllZDogQXVndXN0ICg4KSAyMDA3DQoJTGFzdCBNb2RpZmllZCBCeTogVmljdG9yIENob25nDQoJRmlsZSBTdW1tYXJ5OiBDU1MgY2xhc3NlcyB1c2VkIHRocm91Z2hvdXQgdGhlIGVudGlyZSB3ZWIgYXBwbGljYXRpb24gZm9yIE1lbnVzIG9uIGxlZnQgaGFuZCBzaWRlDQoJQ1NTIENvbnRlbnRzOiBNZW51cw0KCVRlc3RlZDogSUUgNS41LCBJRSA2LjAsIEZpcmVGb3ggMi4wDQoNCiovDQoNCmxpIHsNCgkvKiBsaXN0cyBhbGlnbmVkIHRvIHRoZSBsZWZ0ICovDQoJZmxvYXQ6IGJvdHRvbTsNCn0NCg0KdWwuY2xzLW1lbnUtbGVmdCB7DQoJcG9zaXRpb246cmVsYXRpdmU7DQoJdG9wOi0xMHB4Ow0KCWxlZnQ6LTQwcHg7DQoJbGlzdC1zdHlsZS10eXBlOiBub25lOyAvKiBzdXBwcmVzc2lvbiBvZiB1c2VsZXNzIGVsZW1lbnRzICovDQoJcGFkZGluZy1ib3R0b206MHB4Ow0KCXdpZHRoOiAxMDAlOyAvKiBwcmVjaXNpb24gZm9yIE9wZXJhICovDQp9DQoNCmxpLmNscy1tZW51LWxlZnQgew0KCXdpZHRoOiAxNzBweDsgDQoJbWFyZ2luOiAwcHg7DQoJZGlzcGxheTogYmxvY2s7DQoJdGV4dC1hbGlnbjogbGVmdDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmZmZmZjsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJY29sb3I6ICMwMDAwMDA7DQoJYmFja2dyb3VuZDogI2VkZWRjZjsNCglwYWRkaW5nLWxlZnQ6M3B4Ow0KCXBhZGRpbmctcmlnaHQ6M3B4Ow0KCXBhZGRpbmctYm90dG9tOjRweDsNCglwYWRkaW5nLXRvcDo0cHg7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS1sZWZ0L2ltZy1ub2Fycm93LmdpZicpOw0KCWJhY2tncm91bmQtcG9zaXRpb246dG9wIHJpZ2h0Ow0KCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDsNCn0NCg0KLmNscy1tZW51LWxlZnQtaGVhZGVyIHsNCgl3aWR0aDogMTY5cHg7IA0KCW1hcmdpbjogMHB4Ow0KCWNvbG9yOiAjMDAwMDAwOw0KCWJhY2tncm91bmQtY29sb3I6ICNjY2NjOTk7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjEwcHQ7ICAvKmNoYW5nZSB0byBzbWFsbCB0byBhbGxvdyBzY2FsaW5nKi8NCglmb250LXdlaWdodDpib2xkOw0KCXBhZGRpbmctbGVmdDo1cHg7DQoJcGFkZGluZy1ib3R0b206NHB4Ow0KCXBhZGRpbmctdG9wOjRweDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsNCn0NCg0KLmNscy1tZW51LWxlZnQtaGVhZGVyLWluYWN0aXZlIHsNCgl3aWR0aDogMTcwcHg7IA0KCW1hcmdpbjogMHB4Ow0KCWRpc3BsYXk6IGJsb2NrOw0KCXRleHQtYWxpZ246IGxlZnQ7DQoJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZmZmZmY7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KCWNvbG9yOiAjMDAwMDAwOw0KCWJhY2tncm91bmQ6ICNlZGVkY2Y7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLXJpZ2h0OjNweDsNCglwYWRkaW5nLWJvdHRvbTo0cHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtbGVmdC9pbWctbm9hcnJvdy5naWYnKTsNCgliYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCByaWdodDsNCgliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQp9DQoNCi5jbHMtbWVudS1sZWZ0LXNlbGVjdGVkIHsNCgl3aWR0aDogMTcwcHg7IA0KCW1hcmdpbjogMHB4Ow0KCWRpc3BsYXk6IGJsb2NrOw0KCXRleHQtYWxpZ246IGxlZnQ7DQoJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZmZmZmY7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KCWNvbG9yOiAjMDAwMDAwOw0KCWJhY2tncm91bmQ6ICNjY2NjOTk7DQoJcGFkZGluZy1sZWZ0OjVweDsNCglwYWRkaW5nLXJpZ2h0OjNweDsNCglwYWRkaW5nLWJvdHRvbTo0cHg7DQoJcGFkZGluZy10b3A6NHB4Ow0KCWZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOw0KCWZvbnQtc2l6ZTo4cHQ7ICAvKmNoYW5nZSB0byB4LXNtYWxsIHRvIGFsbG93IHNjYWxpbmcqLw0KCWZvbnQtd2VpZ2h0Om5vcm1hbDsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtbGVmdC9pbWctYXJyb3cuZ2lmJyk7DQoJYmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgcmlnaHQ7DQoJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KfQ0KDQouY2xzLW1lbnUtbGVmdC1pbmFjdGl2ZSB7DQoJd2lkdGg6IDE3MHB4OyANCgltYXJnaW46IDBweDsNCglkaXNwbGF5OiBibG9jazsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmZmZmZmOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCgljb2xvcjogIzAwMDAwMDsNCglwYWRkaW5nLWxlZnQ6MnB4Ow0KCXBhZGRpbmctcmlnaHQ6M3B4Ow0KCXBhZGRpbmctYm90dG9tOjJweDsNCglwYWRkaW5nLXRvcDowcHg7DQp9DQoNCi5jbHMtbWVudS1sZWZ0IGEgew0KCXdpZHRoOiAxNzBweDsgDQoJbWFyZ2luOiAwcHg7DQoJZGlzcGxheTogYmxvY2s7DQoJdGV4dC1hbGlnbjogbGVmdDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmZmZmZjsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJY29sb3I6ICMwMDAwMDA7DQoJYmFja2dyb3VuZDogI2VkZWRjZjsNCglwYWRkaW5nLWxlZnQ6NXB4Ow0KCXBhZGRpbmctcmlnaHQ6M3B4Ow0KCXBhZGRpbmctYm90dG9tOjRweDsNCglwYWRkaW5nLXRvcDo0cHg7DQoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7DQoJZm9udC1zaXplOjhwdDsgIC8qY2hhbmdlIHRvIHgtc21hbGwgdG8gYWxsb3cgc2NhbGluZyovDQoJZm9udC13ZWlnaHQ6bm9ybWFsOw0KCWJhY2tncm91bmQtaW1hZ2U6dXJsKCcuLi8uLi9pbWFnZXMvbWVudS1sZWZ0L2ltZy1ub2Fycm93LmdpZicpOw0KCWJhY2tncm91bmQtcG9zaXRpb246dG9wIHJpZ2h0Ow0KCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDsNCn0NCg0KLmNscy1tZW51LWxlZnQgYTpob3ZlciB7DQoJYmFja2dyb3VuZDogI2NjY2M5OTsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtbGVmdC9pbWctYXJyb3cuZ2lmJyk7DQoJYmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgcmlnaHQ7DQoJYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0Ow0KfQ0KDQouY2xzLW1lbnUtbGVmdCBhOmFjdGl2ZSB7DQoJYmFja2dyb3VuZDogIzlkOWQ0ZjsNCgljb2xvcjogI2ZmZmZmZjsNCgliYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vaW1hZ2VzL21lbnUtbGVmdC9pbWctYXJyb3ctb25jbGljay5naWYnKTsNCgliYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCByaWdodDsNCgliYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7DQp9DQoNCi0tPg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="19" hostname="omniconv" path="/OMNIStatic/themes/omni/global-print-styles.css" url="http://omniconv/OMNIStatic/themes/omni/global-print-styles.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="7" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2155" endTime="2182" sendTime="4" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3RoZW1lcy9vbW5pL2dsb2JhbC1wcmludC1zdHlsZXMuY3NzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MzU5</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMzU5DQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCEtLQ0KDQovKg0KDQoJRGF0ZSBGaWxlIENyZWF0ZWQ6IE1hcmNoICg3KSAyMDA3DQoJQ3JlYXRlZCBCeTogVmljdG9yIENob25nDQoJRGF0ZSBMYXN0IE1vZGlmaWVkOiBNYXJjaCAoNykgMjAwNw0KCUxhc3QgTW9kaWZpZWQgQnk6IFZpY3RvciBDaG9uZw0KCUZpbGUgU3VtbWFyeTogQ1NTIGNsYXNzZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBlbnRpcmUgd2ViIGFwcGxpY2F0aW9uIHNwZWNpZmljIHRvIHByaW50ZWQgb3V0cHV0DQoJQ1NTIENvbnRlbnRzOiAiTm8gcHJpbnQiIHRhZw0KCVRlc3RlZDogSUUgNi4wDQoNCiovDQoNCi5ub3ByaW50IHsNCglkaXNwbGF5OiBub25lOw0KfQ0KDQoubGlua3Nhc2JsYWNrIGEgew0KCWNvbG9yOiBibGFjazsNCn0NCg0KLS0+</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="20" hostname="omniconv" path="/OMNIStatic/scripts/common-scripts.js" url="http://omniconv/OMNIStatic/scripts/common-scripts.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="HTML" ordinal="8" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2156" endTime="2188" sendTime="6" waitTime="0" receiveTime="13">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvY29tbW9uLXNjcmlwdHMuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Mjg5OTk=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDVhY2M2ZGRhOGVkMzE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDI4OTk5DQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyoqIFJvdW5kcyBhIGRlY2ltYWwgdG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2Ygc2lnbmlmaWNhbnQgZGlnaXRzDQoqLw0KDQpmdW5jdGlvbiBhZGRVcmxQYXJhbSh1cmwsIHBhcmFtLCB2YWx1ZSkgew0KICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgYS5ocmVmID0gdXJsOw0KICAgICBhLnNlYXJjaCArPSBhLnNlYXJjaC5zdWJzdHJpbmcoMCwxKSA9PSAiPyIgPyAiJiIgOiAiPyI7DQogICAgIGEuc2VhcmNoICs9IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbSk7DQogICAgIGlmICh2YWx1ZSkNCiAgICAgICAgIGEuc2VhcmNoICs9ICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7DQogICAgcmV0dXJuIGEuaHJlZjsNCn0NCg0KDQoNCmZ1bmN0aW9uIHJvdW5kRGVjaW1hbChudW0sZGVjaW1hbFBsYWNlcykgew0KCXZhciB0b1JldHVybiA9IE1hdGgucm91bmQobnVtKk1hdGgucG93KDEwLGRlY2ltYWxQbGFjZXMpKS9NYXRoLnBvdygxMCxkZWNpbWFsUGxhY2VzKTsNCglyZXR1cm4gdG9SZXR1cm47DQp9DQoNCmZ1bmN0aW9uIE1NX2dvVG9VUkwoKSB7IC8vdjMuMA0KCXZhciBpLCBhcmdzPU1NX2dvVG9VUkwuYXJndW1lbnRzOyBkb2N1bWVudC5NTV9yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KCWZvciAoaT0wOyBpPChhcmdzLmxlbmd0aC0xKTsgaSs9MikgZXZhbChhcmdzW2ldKyIubG9jYXRpb249JyIrYXJnc1tpKzFdKyInIik7DQp9DQoNCmZ1bmN0aW9uIE1NX3ByZWxvYWRJbWFnZXMoKSB7IC8vdjMuMA0KCXZhciBkPWRvY3VtZW50OyBpZihkLmltYWdlcyl7IGlmKCFkLk1NX3ApIGQuTU1fcD1uZXcgQXJyYXkoKTsNCgl2YXIgaSxqPWQuTU1fcC5sZW5ndGgsYT1NTV9wcmVsb2FkSW1hZ2VzLmFyZ3VtZW50czsgZm9yKGk9MDsgaTxhLmxlbmd0aDsgaSsrKQ0KCWlmIChhW2ldLmluZGV4T2YoIiMiKSE9MCl7IGQuTU1fcFtqXT1uZXcgSW1hZ2U7IGQuTU1fcFtqKytdLnNyYz1hW2ldO319DQp9DQoNCmZ1bmN0aW9uIE1NX3N3YXBJbWdSZXN0b3JlKCkgeyAvL3YzLjANCiAgdmFyIGkseCxhPWRvY3VtZW50Lk1NX3NyOyBmb3IoaT0wO2EmJmk8YS5sZW5ndGgmJih4PWFbaV0pJiZ4Lm9TcmM7aSsrKSB4LnNyYz14Lm9TcmM7DQp9DQoNCmZ1bmN0aW9uIE1NX2ZpbmRPYmoobiwgZCkgeyAvL3Y0LjAxDQoJdmFyIHAsaSx4OyAgaWYoIWQpIGQ9ZG9jdW1lbnQ7IGlmKChwPW4uaW5kZXhPZigiPyIpKT4wJiZwYXJlbnQuZnJhbWVzLmxlbmd0aCkgew0KCWQ9cGFyZW50LmZyYW1lc1tuLnN1YnN0cmluZyhwKzEpXS5kb2N1bWVudDsgbj1uLnN1YnN0cmluZygwLHApO30NCglpZighKHg9ZFtuXSkmJmQuYWxsKSB4PWQuYWxsW25dOyBmb3IgKGk9MDsheCYmaTxkLmZvcm1zLmxlbmd0aDtpKyspIHg9ZC5mb3Jtc1tpXVtuXTsNCglmb3IoaT0wOyF4JiZkLmxheWVycyYmaTxkLmxheWVycy5sZW5ndGg7aSsrKSB4PU1NX2ZpbmRPYmoobixkLmxheWVyc1tpXS5kb2N1bWVudCk7DQoJaWYoIXggJiYgZC5nZXRFbGVtZW50QnlJZCkgeD1kLmdldEVsZW1lbnRCeUlkKG4pOyByZXR1cm4geDsNCn0NCg0KZnVuY3Rpb24gTU1fc3dhcEltYWdlKCkgeyAvL3YzLjANCgl2YXIgaSxqPTAseCxhPU1NX3N3YXBJbWFnZS5hcmd1bWVudHM7IGRvY3VtZW50Lk1NX3NyPW5ldyBBcnJheTsgZm9yKGk9MDtpPChhLmxlbmd0aC0yKTtpKz0zKQ0KCWlmICgoeD1NTV9maW5kT2JqKGFbaV0pKSE9bnVsbCl7ZG9jdW1lbnQuTU1fc3JbaisrXT14OyBpZigheC5vU3JjKSB4Lm9TcmM9eC5zcmM7IHguc3JjPWFbaSsyXTt9DQp9DQoNCmZ1bmN0aW9uIE1NX3JlbG9hZFBhZ2UoaW5pdCkgeyAgLy9yZWxvYWRzIHRoZSB3aW5kb3cgaWYgTmF2NCByZXNpemVkDQoJaWYgKGluaXQ9PXRydWUpIHdpdGggKG5hdmlnYXRvcikge2lmICgoYXBwTmFtZT09Ik5ldHNjYXBlIikmJihwYXJzZUludChhcHBWZXJzaW9uKT09NCkpIHsNCgkJZG9jdW1lbnQuTU1fcGdXPWlubmVyV2lkdGg7IGRvY3VtZW50Lk1NX3BnSD1pbm5lckhlaWdodDsgb25yZXNpemU9TU1fcmVsb2FkUGFnZTsgfX0NCgllbHNlIGlmIChpbm5lcldpZHRoIT1kb2N1bWVudC5NTV9wZ1cgfHwgaW5uZXJIZWlnaHQhPWRvY3VtZW50Lk1NX3BnSCkgbG9jYXRpb24ucmVsb2FkKCk7DQp9DQpNTV9yZWxvYWRQYWdlKHRydWUpOw0KDQoNCg0KDQoNCmZ1bmN0aW9uIE1NX3Nob3dIaWRlTGF5ZXJzKCkgeyAvL3Y2LjANCgl2YXIgaSxwLHYsb2JqLGFyZ3M9TU1fc2hvd0hpZGVMYXllcnMuYXJndW1lbnRzOw0KCWZvciAoaT0wOyBpPChhcmdzLmxlbmd0aC0yKTsgaSs9MykgaWYgKChvYmo9TU1fZmluZE9iaihhcmdzW2ldKSkhPW51bGwpIHsNCgkJdj1hcmdzW2krMl07DQoJCWlmIChvYmouc3R5bGUpIHsNCgkJCWlmICh0eXBlb2Yod2luZG93LmV2ZW50KSAhPSAidW5kZWZpbmVkIikgey8vIElFIG9ubHkNCgkJCQlvYmouc3R5bGUubGVmdCA9IHdpbmRvdy5ldmVudC5jbGllbnRYKydweCc7DQoJCQl9DQoJCQllbHNlIHsgLy8gRkYgLSBuZWVkIHRvIHBhc3MgaW4gRXZlbnQgYXMgYSBwYXJhbWV0ZXINCg0KCQkJfQ0KCQkJb2JqPW9iai5zdHlsZTsgdj0odj09J3Nob3cnKT8ndmlzaWJsZSc6KHY9PSdoaWRlJyk/J2hpZGRlbic6djsNCg0KCQl9DQoJCW9iai52aXNpYmlsaXR5PXY7DQoJfQ0KfQ0KDQovKg0KCVBsZWFzZSBrZWVwIHRoZSBmb2xsb3dpbmcgbGluZXMgdmlzaWJsZSwgaW4gcmVjb2duaXRpb24gb2YgbXkgd29yay4uLg0KCSoqKioqKioqKioqKioqKioqKioqKioqKg0KCUF1dGhvcjogTWF4IEhvbG1hbiA8bWF4QGJsdWVyb28ubmV0Pg0KCURhdGUgIDogU3VuLCAyMSBKYW4gMjAwMQ0KCSoqKioqKioqKioqKioqKioqKioqKioqKg0KCVRoaXMgZnVuY3Rpb25zIGxldHMgdXNlcnMgdHlwZSBpbiBsZXR0ZXJzIHRvIHNlbGVjdCBhbiBvcHRpb24gaW4geW91ciBTRUxFQ1QgZm9ybSBmaWVsZHMuDQoJVXN1YWxseSB0aGUgYnJvd3NlciBvbmx5IHRha2VzIG5vdGljZSBvZiBzaW5nbGUga2V5c3Ryb2tlcyBhbmQgc3dpdGNoZXMgdG8gdGhlIGZpcnN0IE9wdGlvbiB0aGF0DQoJYmVnaW5zIHdpdGggdGhhdCBsZXR0ZXIuDQoJVGhpcyBzY3JpcHRzIGJ1ZmZlcnMgdGhlIHVzZXJzIGlucHV0IGFuZCBjb21wYXJlcyBpdCBhZ2FpbnN0IHRoZSBPUFRJT05zIGluIHRoZSBTRUxFQ1QgZmllbGQsDQoJY2hvb3NpbmcgdGhlIGNsb3Nlc3QgbWF0Y2ggYXMgeW91IHR5cGUNCglVc2FnZToJPHNlbGVjdCBvbmtleXByZXNzPSJyZXR1cm4gc2hpZnRIaWdobGlnaHQoZXZlbnQua2V5Q29kZSwgdGhpcyk7Ij4NCiovDQp2YXIgdGltZXJpZCAgICAgPSBudWxsOw0KdmFyIG1hdGNoU3RyaW5nID0gIiI7DQp2YXIgbXNlY29uZHMgICAgPSAyMDAwOwkvLyBMZW5ndGggb2YgdGltZSBiZWZvcmUgc2VhcmNoIHN0cmluZyBpcyByZXNldA0KdmFyIGN1cnJlbnRUYXJnZXQgPSBudWxsOw0KDQpmdW5jdGlvbiBzaGlmdEhpZ2hsaWdodChrZXlDb2RlLHRhcmcsIGRpc2FibGVPbkNoYW5nZUZpcmluZykgew0KCXZhciBmb3VuZE9wdGlvbiA9IGZhbHNlOw0KCWlmKGN1cnJlbnRUYXJnZXQgIT0gdGFyZykgew0KCQlpZih0aW1lcmlkICE9IG51bGwpIHsNCgkJCWNsZWFyVGltZW91dCh0aW1lcmlkKTsgLy8gQ2xlYXIgdGhlIHRpbWVvdXQNCgkJCW1hdGNoU3RyaW5nID0gIiI7DQoJCX0NCgl9DQoJY3VycmVudFRhcmdldCA9IHRhcmc7DQoNCgl2YXIga2V5VmFsICAgICAgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleUNvZGUpOyAvLyBDb252ZXJ0IEFTQ0lJIENvZGUgdG8gYSBzdHJpbmcNCgltYXRjaFN0cmluZyA9IG1hdGNoU3RyaW5nICsga2V5VmFsOyAvLyBBZGQgdG8gcHJldmlvdXNseSB0eXBlZCBjaGFyYWN0ZXJzDQoNCgl2YXIgZWxlbWVudENudCAgPSB0YXJnLmxlbmd0aCAtIDE7CS8vIENhbGN1bGF0ZSBsZW5ndGggb2YgYXJyYXkgLTENCg0KCWZvciAoaSA9IGVsZW1lbnRDbnQ7IGkgPiAwOyBpLS0pIHsNCgkJc2VsZWN0VGV4dCA9IHRhcmcub3B0aW9uc1tpXS50ZXh0LnRvTG93ZXJDYXNlKCk7IC8vIGNvbnZlcnQgdGV4dCBpbiBTRUxFQ1QgdG8gbG93ZXIgY2FzZQ0KDQoJCWlmIChzZWxlY3RUZXh0LnN1YnN0cigwLG1hdGNoU3RyaW5nLmxlbmd0aCkgPT0gCW1hdGNoU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHsNCgkJCXRhcmcub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7IC8vIE1ha2UgdGhlIHJlbGV2YW50IE9QVElPTiBzZWxlY3RlZA0KCQkJZm91bmRPcHRpb24gPSB0cnVlOw0KCQl9DQoJfQ0KDQoJY2xlYXJUaW1lb3V0KHRpbWVyaWQpOyAvLyBDbGVhciB0aGUgdGltZW91dA0KCXRpbWVyaWQgPSBzZXRUaW1lb3V0KCdtYXRjaFN0cmluZyA9ICIiJyxtc2Vjb25kcyk7IC8vIFNldCBhIG5ldyB0aW1lb3V0IHRvIHJlc2V0IHRoZSBrZXkgcHJlc3Mgc3RyaW5nDQoNCg0KCWlmKCFkaXNhYmxlT25DaGFuZ2VGaXJpbmcpIHsNCgkJaWYoZm91bmRPcHRpb24gJiYgdGFyZy5vbmNoYW5nZSkgew0KCQkJdGFyZy5vbmNoYW5nZSgpOw0KCQl9DQoJfQ0KDQoJcmV0dXJuIGZhbHNlOyAvLyB0byBwcmV2ZW50IElFIGZyb20gZG9pbmcgaXRzIG93biBoaWdobGlnaHQgc3dpdGNoaW5nDQp9DQoNCmZ1bmN0aW9uIG11bHR5VHlwZUFoZWFkKGtleUNvZGUsdGFyZykgew0KDQoJdmFyIGtleVZhbCAgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleUNvZGUpOyAvLyBDb252ZXJ0IEFTQ0lJIENvZGUgdG8gYSBzdHJpbmcNCgltYXRjaFN0cmluZyA9IG1hdGNoU3RyaW5nICsga2V5VmFsOyAvLyBBZGQgdG8gcHJldmlvdXNseSB0eXBlZCBjaGFyYWN0ZXJzDQogICAgICAgIC8vYWxlcnQoIiMjI21hdGNoU3RyaW5nPVsiK21hdGNoU3RyaW5nKyJdIik7DQoJdmFyIGVsZW1lbnRDbnQgID0gdGFyZy5sZW5ndGggLSAxOwkvLyBDYWxjdWxhdGUgbGVuZ3RoIG9mIGFycmF5IC0xDQoJLy9DUTE1OTUwIC0gdHJhY2sgaWYgd2UgZm91bmQgYSByZXN1bHQgYWxyZWFkeQ0KCXZhciBmb3VuZE1hdGNoID0gZmFsc2U7DQoNCglmb3IgKGkgPSAwOyBpIDw9IGVsZW1lbnRDbnQ7IGkrKykgew0KCQlzZWxlY3RUZXh0ID0gdGFyZy5vcHRpb25zW2ldLnRleHQudG9Mb3dlckNhc2UoKTsgLy8gY29udmVydCB0ZXh0IGluIFNFTEVDVCB0byBsb3dlciBjYXNlDQoJCXRhcmcub3B0aW9uc1tpXS5zZWxlY3RlZCA9IGZhbHNlOyAvLyBNYWtlIGFub3RoZXIgT1BUSU9OIGRlc2VsZWN0ZWQNCgkJaWYgKCFmb3VuZE1hdGNoICYmIChzZWxlY3RUZXh0LnN1YnN0cigwLG1hdGNoU3RyaW5nLmxlbmd0aCkgPT0gCW1hdGNoU3RyaW5nLnRvTG93ZXJDYXNlKCkpKSB7DQoJCSAgICAgICAvLyBhbGVydCgiIyMjc2VsZWN0VGV4dFsiK2krIl09IitzZWxlY3RUZXh0KTsNCgkJCXRhcmcub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7IC8vIE1ha2UgdGhlIHJlbGV2YW50IE9QVElPTiBzZWxlY3RlZA0KCQkJdGFyZy5vcHRpb25zW2ldLmZvY3VzKCk7DQoJCQkvL0NRMTU5NTAgLSBuZWVkIHRvIGtlZXAgc2VhcmNoaW5nIHRoZSBib3gsIHNvIHdlIGtlZXAgZGVzZWxlY3RpbmcgdGhlIG90aGVyIG9wdGlvbnMNCgkJCS8vYnJlYWs7DQoJCQkvL0NRMTU5NTAgLSBhZGQgdGhhdCB3ZSBmb3VuZCBhIG1hdGNoLCBzbyB3ZSBkb24ndCBrZWVwIG1hdGNoaW5nIHRoZSBzYW1lIHBocmFzZSBvbiBtb3JlIHRoYW4gb25lIG9wdGlvbg0KCQkJZm91bmRNYXRjaCA9IHRydWU7DQoJCX0NCgl9DQoNCgljbGVhclRpbWVvdXQodGltZXJpZCk7IC8vIENsZWFyIHRoZSB0aW1lb3V0DQoJdGltZXJpZCA9IHNldFRpbWVvdXQoJ21hdGNoU3RyaW5nID0gIiInLG1zZWNvbmRzKTsgLy8gU2V0IGEgbmV3IHRpbWVvdXQgdG8gcmVzZXQgdGhlIGtleSBwcmVzcyBzdHJpbmcNCg0KCXJldHVybiBmYWxzZTsgLy8gdG8gcHJldmVudCBJRSBmcm9tIGRvaW5nIGl0cyBvd24gaGlnaGxpZ2h0IHN3aXRjaGluZw0KfQ0KDQpmdW5jdGlvbiBmb2N1c0VsZW1lbnQoZWxlbWVudElEKSB7DQoJdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SUQpOw0KDQoJaWYoZWxlbWVudCAhPSBudWxsKSB7DQoJCXRyeXsNCgkJCWVsZW1lbnQuZm9jdXMoKTsNCgkJfSBjYXRjaChlKXsNCgkJfQ0KCX0NCn0NCg0KZnVuY3Rpb24gc2hvd0VsZW1lbnQoZWxlbWVudElELCBkaXNwbGF5KSB7DQoJdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SUQpOw0KCWlmIChkaXNwbGF5ID09IG51bGwpDQoJCWRpc3BsYXk9J2lubGluZSc7DQoNCglpZihlbGVtZW50ICE9IG51bGwpIHsNCg0KCQllbGVtZW50LnN0eWxlLmRpc3BsYXk9ZGlzcGxheTsNCg0KDQoNCg0KCQkJZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5PSdpbmhlcml0JzsNCg0KCX0NCn0NCg0KDQpmdW5jdGlvbiBoaWRlRWxlbWVudChlbGVtZW50SUQpIHsNCgl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJRCk7DQoNCglpZihlbGVtZW50ICE9IG51bGwpIHsNCgkJaWYgKGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSAhPSAnaGlkZGVuJykNCgkJew0KCQkJZWxlbWVudC5zdHlsZS5kaXNwbGF5PSdub25lJzsNCg0KCQkJZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5PSdoaWRkZW4nOw0KCQl9DQoNCg0KCX0NCn0NCi8vIEJVRyBGSVggRk9SIE9NTkkwMDAwMTEyMg0KDQpmdW5jdGlvbiBjdXN0b21Db21wYXJlKGZpcnN0RWxlbWVudCwgc2Vjb25kRWxlbWVudCkNCnsNCiAgdmFyIHJldFZhbHVlID0gMDsNCiAgaWYgKGZpcnN0RWxlbWVudCA9PSBudWxsKQ0KICB7DQogICAgICByZXRWYWx1ZSA9IDA7DQogICB9DQogICBlbHNlIGlmIChzZWNvbmRFbGVtZW50ID09IG51bGwpDQogICB7DQogICAgICByZXRWYWx1ZSA9IC0xOw0KICAgfQ0KICAgZWxzZSBpZiAoZmlyc3RFbGVtZW50ID09IG51bGwgJiYgc2Vjb25kRWxlbWVudCA9PSBudWxsKQ0KICAgew0KICAgICAgcmV0VmFsdWUgPSAwOw0KICAgfQ0KDQogICBpZiAoIHR5cGVvZihmaXJzdEVsZW1lbnQpID09ICdzdHJpbmcnICYmIHR5cGVvZihzZWNvbmRFbGVtZW50KSA9PSAnc3RyaW5nJykNCiAgIHsNCiAgICAgICBpZiAoIGZpcnN0RWxlbWVudC50b0xvd2VyQ2FzZSgpIDwgc2Vjb25kRWxlbWVudC50b0xvd2VyQ2FzZSgpKQ0KICAgICAgIHsNCiAgICAgICAgIHJldFZhbHVlID0gLTE7DQogICAgICAgfQ0KICAgICAgIGVsc2UgaWYgKCBmaXJzdEVsZW1lbnQudG9Mb3dlckNhc2UoKSA+IHNlY29uZEVsZW1lbnQudG9Mb3dlckNhc2UoKSkNCiAgICAgICB7DQogICAgICAgICByZXRWYWx1ZSA9IDE7DQogICAgICAgfQ0KICAgICAgIGVsc2UgaWYgKGZpcnN0RWxlbWVudC50b0xvd2VyQ2FzZSgpID09IHNlY29uZEVsZW1lbnQudG9Mb3dlckNhc2UoKSkNCiAgICAgICB7DQogICAgICAgCSAgcmV0VmFsdWUgPSAwOw0KICAgICAgIH0NCiAgIH0NCg0KICAgcmV0dXJuIHJldFZhbHVlOw0KfQ0KZnVuY3Rpb24gdHJpbUFsbChzU3RyaW5nKQ0Kew0Kd2hpbGUgKHNTdHJpbmcuc3Vic3RyaW5nKDAsMSkgPT0gJyAnKQ0Kew0Kc1N0cmluZyA9IHNTdHJpbmcuc3Vic3RyaW5nKDEsIHNTdHJpbmcubGVuZ3RoKTsNCn0NCndoaWxlIChzU3RyaW5nLnN1YnN0cmluZyhzU3RyaW5nLmxlbmd0aC0xLCBzU3RyaW5nLmxlbmd0aCkgPT0gJyAnKQ0Kew0Kc1N0cmluZyA9IHNTdHJpbmcuc3Vic3RyaW5nKDAsc1N0cmluZy5sZW5ndGgtMSk7DQp9DQpyZXR1cm4gc1N0cmluZzsNCn0NCi8vIEVORCBGSVgNCjwhLS0gT3JpZ2luYWw6ICBQaGlsIFdlYmIgKHBoaWxAcGhpbHdlYmIuY29tKSAtLT4NCjwhLS0gV2ViIFNpdGU6ICBodHRwOi8vd3d3LnBoaWx3ZWJiLmNvbSAtLT4NCg0KPCEtLSBUaGlzIHNjcmlwdCBhbmQgbWFueSBtb3JlIGFyZSBhdmFpbGFibGUgZnJlZSBvbmxpbmUgYXQgLS0+DQo8IS0tIFRoZSBKYXZhU2NyaXB0IFNvdXJjZSEhIGh0dHA6Ly9qYXZhc2NyaXB0LmludGVybmV0LmNvbSAtLT4NCg0KZnVuY3Rpb24gbW92ZUxpc3QoZnJib3gsIHRvYm94KSB7DQoJdmFyIGZib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcmJveCk7DQoJdmFyIHRib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0b2JveCk7DQoJdmFyIGFyckZib3ggPSBuZXcgQXJyYXkoKTsNCgl2YXIgYXJyVGJveCA9IG5ldyBBcnJheSgpOw0KCXZhciBpOw0KDQoJZm9yIChpID0gMDsgaSA8IHRib3gub3B0aW9ucy5sZW5ndGg7IGkrKykgew0KCQlhcnJUYm94W2ldID0gdGJveC5vcHRpb25zW2ldOw0KCX0NCg0KCXZhciBmTGVuZ3RoID0gMDsNCgl2YXIgdExlbmd0aCA9IGFyclRib3gubGVuZ3RoOw0KCWZvcihpID0gMDsgaSA8IGZib3gub3B0aW9ucy5sZW5ndGg7IGkrKykgew0KCQlpZiAoZmJveC5vcHRpb25zW2ldLnNlbGVjdGVkICYmIGZib3gub3B0aW9uc1tpXS52YWx1ZSAhPSAiIikgew0KCQkJYXJyVGJveFt0TGVuZ3RoXSA9IGZib3gub3B0aW9uc1tpXTsNCgkJCXRMZW5ndGgrKzsNCgkJfSBlbHNlIHsNCgkJCWFyckZib3hbZkxlbmd0aF0gPSBmYm94Lm9wdGlvbnNbaV07DQoJCQlmTGVuZ3RoKys7DQoJCX0NCgl9DQoJYXJyRmJveC5zb3J0KG9wdGlvbkNvbXBhcmUpOw0KCWFyclRib3guc29ydChvcHRpb25Db21wYXJlKTsNCg0KCWZib3gubGVuZ3RoID0gMDsNCgl0Ym94Lmxlbmd0aCA9IDA7DQoJdmFyIGM7DQoJZm9yKGMgPSAwOyBjIDwgYXJyRmJveC5sZW5ndGg7IGMrKykgew0KCQl2YXIgbm8gPSBuZXcgT3B0aW9uKCk7DQoJCW5vLnRleHQgPSBhcnJGYm94W2NdLnRleHQ7DQoJCW5vLnZhbHVlID0gYXJyRmJveFtjXS52YWx1ZTsNCgkJbm8uZGVmYXVsdFNlbGVjdGVkID0gdHJ1ZTsNCgkJbm8uc2VsZWN0ZWQgPSBmYWxzZTsNCgkJaWYobm8udmFsdWUgIT0gbnVsbCkgew0KCQkJZmJveFtjXSA9IG5vOw0KCQl9DQoJfQ0KDQoJZm9yKGMgPSAwOyBjIDwgYXJyVGJveC5sZW5ndGg7IGMrKykgew0KCQl2YXIgbm8gPSBuZXcgT3B0aW9uKCk7DQoJCW5vLnRleHQgPSBhcnJUYm94W2NdLnRleHQ7DQoJCW5vLnZhbHVlID0gYXJyVGJveFtjXS52YWx1ZTsNCgkJbm8uZGVmYXVsdFNlbGVjdGVkID0gdHJ1ZTsNCgkJbm8uc2VsZWN0ZWQgPSBmYWxzZTsNCgkJaWYobm8udmFsdWUgIT0gbnVsbCkgew0KCQkJdGJveFtjXSA9IG5vOw0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBvcHRpb25Db21wYXJlKG9wdGlvbjEsIG9wdGlvbjIpDQp7DQogIHZhciByZXRWYWx1ZSA9IDA7DQogIGlmIChvcHRpb24xID09IG51bGwgfHwgb3B0aW9uMS50ZXh0KQ0KICB7DQogICAgICByZXRWYWx1ZSA9IDA7DQogICB9DQogICBlbHNlIGlmIChvcHRpb24yID09IG51bGwgfHwgb3B0aW9uMi50ZXh0KQ0KICAgew0KICAgICAgcmV0VmFsdWUgPSAtMTsNCiAgIH0NCiAgIGVsc2UgaWYgKG9wdGlvbjEgPT0gbnVsbCAmJiBvcHRpb24yID09IG51bGwpDQogICB7DQogICAgICByZXRWYWx1ZSA9IDA7DQogICB9DQoNCiAgIGlmICggdHlwZW9mKG9wdGlvbjEudGV4dCkgPT0gJ3N0cmluZycgJiYgdHlwZW9mKG9wdGlvbjIudGV4dCkgPT0gJ3N0cmluZycpDQogICB7DQogICAgICAgaWYgKCBvcHRpb24xLnRleHQudG9Mb3dlckNhc2UoKSA8IG9wdGlvbjIudGV4dC50b0xvd2VyQ2FzZSgpKQ0KICAgICAgIHsNCiAgICAgICAgIHJldFZhbHVlID0gLTE7DQogICAgICAgfQ0KICAgICAgIGVsc2UgaWYgKCBvcHRpb24xLnRleHQudG9Mb3dlckNhc2UoKSA+IG9wdGlvbjIudGV4dC50b0xvd2VyQ2FzZSgpKQ0KICAgICAgIHsNCiAgICAgICAgIHJldFZhbHVlID0gMTsNCiAgICAgICB9DQogICAgICAgZWxzZSBpZiAob3B0aW9uMS50ZXh0LnRvTG93ZXJDYXNlKCkgPT0gb3B0aW9uMi50ZXh0LnRvTG93ZXJDYXNlKCkpDQogICAgICAgew0KICAgICAgIAkgIHJldFZhbHVlID0gMDsNCiAgICAgICB9DQogICB9DQoNCiAgIHJldHVybiByZXRWYWx1ZTsNCn0NCg0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWRPcHRpb25JZEZyb21MaXN0KG9ialNlbGVjdExpc3QpIHsNCgl2YXIgbnVtID0gb2JqU2VsZWN0TGlzdC5vcHRpb25zLmxlbmd0aDsNCglmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7DQoJCWlmKG9ialNlbGVjdExpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCkgew0KCQkJcmV0dXJuIG9ialNlbGVjdExpc3Qub3B0aW9uc1tpXS52YWx1ZTsNCgkJfQ0KCX0NCglyZXR1cm4gIiI7DQp9DQoNCmZ1bmN0aW9uIGdldFNlbGVjdGVkT3B0aW9uVGV4dEZyb21MaXN0KG9ialNlbGVjdExpc3QpIHsNCgl2YXIgbnVtID0gb2JqU2VsZWN0TGlzdC5vcHRpb25zLmxlbmd0aDsNCglmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7DQoJCWlmKG9ialNlbGVjdExpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCkgew0KCQkJcmV0dXJuIG9ialNlbGVjdExpc3Qub3B0aW9uc1tpXS50ZXh0Ow0KCQl9DQoJfQ0KCXJldHVybiAiIjsNCn0NCg0KZnVuY3Rpb24gc2VsZWN0T3B0aW9uSW5MaXN0KG9iakxpc3QsIG5ld1NlbGVjdGVkSWQpIHsNCgl2YXIgbGVuID0gb2JqTGlzdC5vcHRpb25zLmxlbmd0aDsNCglpZiAobGVuID4gMCkgew0KCQlmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQoJCQlpZihvYmpMaXN0Lm9wdGlvbnNbaV0udmFsdWUgPT0gbmV3U2VsZWN0ZWRJZCkgew0KCQkJCW9iakxpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIHNlbGVjdEFsbE9wdGlvbnMob2JqTGlzdCkgew0KCXZhciBsZW4gPSBvYmpMaXN0Lm9wdGlvbnMubGVuZ3RoOw0KCWlmIChsZW4gPiAwKSB7DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCgkJCW9iakxpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIG1vdmVBbGxMaXN0KGZyb21MaXN0LHRvTGlzdCl7DQogICAgc2VsZWN0QWxsT3B0aW9ucyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcm9tTGlzdCkpOw0KICAgIG1vdmVMaXN0KGZyb21MaXN0LCB0b0xpc3QpOw0KfQ0KDQoNCg0KdmFyIGN1cnJlbnRPbW5pRm9ybSA9IG51bGw7DQp2YXIgaGFzQ3VycmVudE9tbmlGb3JtU3VibWl0dGVkID0gZmFsc2U7DQp2YXIgaGFzV2FybmluZ01lc3NhZ2VGb3JGb3JtQ2hhbmdlZE9jY3VycmVkID0gZmFsc2U7DQoNCi8vQ1IgNDM5NQ0KZnVuY3Rpb24gc2V0Q3VycmVudEZvcm0ob2JqRm9ybSkgew0KCWN1cnJlbnRPbW5pRm9ybSA9IG9iakZvcm07DQp9DQoNCmZ1bmN0aW9uIG9uRm9ybUNoYW5nZUluaXQob2JqRm9ybSkgew0KCWlmKG9iakZvcm0gIT0gbnVsbCkgew0KCQljdXJyZW50T21uaUZvcm0gPSBvYmpGb3JtOw0KCQlhZGRFdmVudCh3aW5kb3csICdsb2FkJywgYWRkT25Gb3JtQ2hhbmdlTGlzdGVuZXJzLCBmYWxzZSk7DQoNCgkJLy9ESVNBQkxFRDogV29ya3Mgd2l0aCBvbmJlZm9yZXVubG9hZCBldmVudA0KCQkvL2FkZEV2ZW50KGN1cnJlbnRPbW5pRm9ybSwgJ3N1Ym1pdCcsIG9uU3VibWl0RXZlbnRIYW5kbGVyLCBmYWxzZSk7DQoJCS8vd2luZG93Lm9uYmVmb3JldW5sb2FkID0gb25CZWZvcmVVbmxvYWRFdmVudEhhbmRsZXI7DQoJfSBlbHNlIHsNCgkJY3VycmVudE9tbmlGb3JtID0gbnVsbDsNCgl9DQp9DQoNCi8qKg0KKiBOZXcgbWV0aG9kIHRvIHJlcGxhY2UgdGhlIHByZXZpb3VzIG9uZSAob25Gb3JtQ2hhbmdlSW5pdCkgd2hpY2ggZG9lcyBhIGJldHRlciBqb2Igb2YgaGFuZGxpbmcgdGhlIGNoYW5nZSBldmVudHMNCioNCiogVGhpcyBpbXBsZW1lbnRhdGlvbiB3aWxsIGFkZCBhbiBvbkNoYW5nZSBldmVudCB0byBldmVyeQ0KKiBlbGVtZW50IG9uIHRoZSBmb3JtIGluc3RlYWQgb2Ygc2ltcGx5IGFkZGluZyBhbiBvbkNsaWNrIGV2ZW50IHRvIHRoZSBmb3JtIGVsZW1lbnQgaXRzZWxmLiAgVGhlDQoqIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uIGRvZXMgbm90IHByb3Blcmx5IGhhbmRsZSBjaGFuZ2UgZXZlbnRzIChpZS4gYSB1c2VyIGNoYW5nZXMgYSB0ZXh0IGZpZWxkIGFuZCBjbGlja3Mgb3V0c2lkZQ0KKiBvZiB0aGUgZm9ybSBhbmQgc3VibWl0cyB0aGUgZm9ybSkNCiovDQovLyBUaGlzIHZhcmlhYmxlIGlzIHRvIHRyYWNrIGhvdyB3ZSBpbml0aWFsaXplZCB0aGUgZm9ybS4gIEJ5IGluaXRpYWxpemluZyB1c2luZyB0aGlzIG1ldGhvZCwNCi8vIHdlIG5vIGxvbmdlciBkbyBjb21wbGV0ZSBET00gc2NhbnMgbG9va2luZyBmb3IgY2hhbmdlcywgYnV0IHJlbHkgb24gZWFjaCBlbGVtZW50cyBvbmNoYW5nZQ0KLy8gZXZlbnQgbGlzdGVuZXIgdG8gc2V0IGlzRGlydHkgYXBwcm9wcmlhdGVseS4NCnZhciB1c2VkRm9ybUVsZW1lbnRDaGFuZ2VJbml0ID0gZmFsc2U7DQpmdW5jdGlvbiBvbkZvcm1FbGVtZW50Q2hhbmdlSW5pdChmb3JtKSB7DQoJdXNlZEZvcm1FbGVtZW50Q2hhbmdlSW5pdCA9IHRydWU7DQoJY3VycmVudE9tbmlGb3JtID0gZm9ybTsNCg0KCS8vIFRoaXMgZG9lcyBub3Qgd29yayBmb3IgSUV4cGxvcmVyLiBNU0ROIC0gIlRoZSBzdWJtaXQgbWV0aG9kIGRvZXMgbm90IGludm9rZSB0aGUgb25zdWJtaXQgZXZlbnQgaGFuZGxlci4iDQoJLy9hZGRFdmVudChmb3JtLCAnc3VibWl0Jywgc3VibWl0RXZlbnQsIGZhbHNlKTsNCglpZiAodHlwZW9mIGZvcm0gIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZvcm0uZWxlbWVudHMgIT0gJ3VuZGVmaW5lZCcpIHsNCgkJDQoJCXZhciBlbGVtcyA9IGdldElucHV0RWxlbWVudHMoZm9ybSk7DQoJCQ0KCQlmb3IgKCBqPTA7ajwgZWxlbXMubGVuZ3RoOyBqKysgKSB7DQoJCQl2YXIgZWxlbSA9IGVsZW1zW2pdOw0KCQkJYWRkRXZlbnQoZWxlbSwgJ2NoYW5nZScsIG9uRWxlbUNoYW5nZUV2ZW50LCBmYWxzZSk7DQoJCX0NCgl9DQp9DQoNCi8vIGZpbmRzIGFsbCBlbmFibGVkIGNoaWxkIGZvcm0gZWxlbWVudHMgaW5zaWRlIHRoaXMgcGFyZW50IG9iamVjdA0KZnVuY3Rpb24gZ2V0SW5wdXRFbGVtZW50cyhwYXJlbnQpIHsNCgkvL0NRMjg0NjEgLSBtYWtlIHRoZSBmb3ItbG9vcCBtb3JlIGVmZmljaWVudCBieSBub3Qgc2VsZWN0aW5nIHR5cGVzIHdlIGRvbid0IHdhbnQgKGllLiBoaWRkZW4sIHN1Ym1pdCwgaW1hZ2UsIGV0Yy4uLikNCgl2YXIgcCA9ICQocGFyZW50KTsNCgl2YXIgZWxlbXMgPSBwLmZpbmQoJ2lucHV0OmVuYWJsZWRbdHlwZT10ZXh0XScpOw0KCWVsZW1zID0gJC5tZXJnZShlbGVtcywgcC5maW5kKCdpbnB1dDplbmFibGVkW3R5cGU9Y2hlY2tib3hdJykpOw0KCWVsZW1zID0gJC5tZXJnZShlbGVtcywgcC5maW5kKCdpbnB1dDplbmFibGVkW3R5cGU9cmFkaW9dJykpOw0KCWVsZW1zID0gJC5tZXJnZShlbGVtcywgcC5maW5kKCdpbnB1dDplbmFibGVkW3R5cGU9ZmlsZV0nKSk7DQoJZWxlbXMgPSAkLm1lcmdlKGVsZW1zLCBwLmZpbmQoJ2lucHV0OmVuYWJsZWRbdHlwZT1wYXNzd29yZF0nKSk7DQoJZWxlbXMgPSAkLm1lcmdlKGVsZW1zLCBwLmZpbmQoJ3NlbGVjdDplbmFibGVkJykpOw0KCWVsZW1zID0gJC5tZXJnZShlbGVtcywgcC5maW5kKCd0ZXh0YXJlYTplbmFibGVkJykpOw0KCXJldHVybiAkKGVsZW1zKTsNCn0NCg0KZnVuY3Rpb24gcmVtb3ZlT25Gb3JtRWxlbWVudENoYW5nZUxpc3RlbmVyKGVsZW1lbnROYW1lKXsNCgl2YXIgZWxtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudE5hbWUpOw0KCWlmIChlbG0gIT0gbnVsbCkgeyAvLyBGaXhlZCBOUEUNCgkJaWYgKGVsbS5hZGRFdmVudExpc3RlbmVyKSB7DQoJCQllbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25FbGVtQ2hhbmdlRXZlbnQsIGZhbHNlKTsNCgkJfQ0KCQllbHNlIGlmIChlbG0uYXR0YWNoRXZlbnQpIHsNCgkJCWVsbS5kZXRhY2hFdmVudCgnb24nICsgJ2NoYW5nZScsIG9uRWxlbUNoYW5nZUV2ZW50KTsNCgkJfQ0KCX0NCn0NCg0KLy8gQWRkIExpc3RlbmVyIGZvciBjYXB0dXJpbmcgb24gZm9ybSBjaGFuZ2VzDQpmdW5jdGlvbiBhZGRPbkZvcm1DaGFuZ2VMaXN0ZW5lcnMoZSkgew0KCWFkZEV2ZW50KGN1cnJlbnRPbW5pRm9ybSwgJ2NsaWNrJywgb25Gb3JtQ2hhbmdlQ2xpY2tFdmVudCwgZmFsc2UpOw0KfQ0KDQpmdW5jdGlvbiBvblN1Ym1pdEV2ZW50SGFuZGxlciAoZXZ0KSB7DQoJaGFzQ3VycmVudE9tbmlGb3JtU3VibWl0dGVkID0gdHJ1ZTsNCn0NCg0KZnVuY3Rpb24gb25CZWZvcmVVbmxvYWRFdmVudEhhbmRsZXIgKGV2dCkgew0KICAgaWYoaGFzQ3VycmVudE9tbmlGb3JtU3VibWl0dGVkICE9IHRydWUpIHsNCgkgIGlmKGhhc1dhcm5pbmdNZXNzYWdlRm9yRm9ybUNoYW5nZWRPY2N1cnJlZCAhPSB0cnVlKSB7DQoJCSAgaWYoaGFzRm9ybUJlZW5DaGFuZ2VkKCkpIHsNCgkJCSAgdmFyIG1lc3NhZ2UgPSAiKiogWW91ciBjaGFuZ2VzIGhhdmUgbm90IHlldCBiZWVuIHNhdmVkICoqIjsNCgkJCSAgaWYgKHR5cGVvZiBldnQgPT0gJ3VuZGVmaW5lZCcpIHsNCgkJCSAgICBldnQgPSB3aW5kb3cuZXZlbnQ7DQoJCQkgIH0NCgkJCSAgaWYgKGV2dCkgew0KCQkJICAgIGV2dC5yZXR1cm5WYWx1ZSA9IG1lc3NhZ2U7DQoJCQkgIH0NCgkJCSAgcmV0dXJuIG1lc3NhZ2U7DQoJCSAgfQ0KCSAgfQ0KICAgfQ0KfQ0KDQoJZnVuY3Rpb24gb25XaW5kb3dDbG9zZSgpDQoJew0KCQlpZih3aW5kb3cuc2NyZWVuTGVmdCA+c2NyZWVuLndpZHRoKXsNCgkJCS8vYnJvd3NlciBpcyBjbG9zZWQNCgkJCS8vYWxlcnQoImdvb2RieWUgZ29vYmVyIik7DQoJCX0NCgkJZWxzZXsNCgkJCS8vCXJlZnJlc2gNCgkJCXdpbmRvdy5yZWZyZXNoKCk7DQoJCQl9DQoJfQ0KDQpmdW5jdGlvbiBvbkZvcm1DaGFuZ2VDbGlja0V2ZW50KCkgew0KDQoJdmFyIG9iakZvcm0gPSBjdXJyZW50T21uaUZvcm07DQoNCglpZihvYmpGb3JtICE9IG51bGwgJiYgb2JqRm9ybS5pc0RpcnR5ICE9IG51bGwpIHsNCgkJaWYob2JqRm9ybS5pc0RpcnR5LnZhbHVlICE9ICJ0cnVlIikgew0KCQkJaWYoaGFzRm9ybUNoYW5nZWQob2JqRm9ybSkpIHsNCgkJCQlvYmpGb3JtLmlzRGlydHkudmFsdWUgPSAndHJ1ZSc7DQoJCQl9DQoJCX0NCgkJLy9hbGVydCgib25Gb3JtQ2hhbmdlQ2xpY2tFdmVudC5pc0RpcnR5PSIrb2JqRm9ybS5pc0RpcnR5LnZhbHVlKTsNCgl9DQp9DQoNCi8qKiBEaXJ0eSB0aGUgZm9ybSBpZiBhIGNoYW5nZSBoYXMgb2NjdXJlZCBvbiB0aGUgZWxlbWVudCovDQpmdW5jdGlvbiBvbkVsZW1DaGFuZ2VFdmVudChldmVudCkgew0KCXZhciBlbGVtID0gZXZlbnQuc3JjRWxlbWVudDsgLy8gSUV4cGxvcmVyDQoJaWYgKGVsZW0gPT0gbnVsbCkNCgkJZWxlbSA9IGV2ZW50LnRhcmdldDsgLy8gRmlyZWZveA0KCXVwZGF0ZUlzRGlydHkoZWxlbSk7DQp9DQoNCi8qKiBVcGRhdGVzIGlzRGlydHkgb24gdGhlIGN1cnJlbnRPbW5pRm9ybSBpZiB0aGUgc3BlY2lmaWVkIGVsZW0gaGFzIGNoYW5nZWQuICovDQpmdW5jdGlvbiB1cGRhdGVJc0RpcnR5KGVsZW0pIHsNCglpZihjdXJyZW50T21uaUZvcm0gIT0gbnVsbCAmJiBjdXJyZW50T21uaUZvcm0uaXNEaXJ0eSAhPSBudWxsKSB7DQoJCWlmKGN1cnJlbnRPbW5pRm9ybS5pc0RpcnR5LnZhbHVlICE9ICJ0cnVlIikgew0KCQkJaWYoaGFzRWxlbUNoYW5nZWQoZWxlbSkpIHsNCgkJCQljdXJyZW50T21uaUZvcm0uaXNEaXJ0eS52YWx1ZSA9ICd0cnVlJzsNCgkJCQkkKGN1cnJlbnRPbW5pRm9ybS5pc0RpcnR5KS50cmlnZ2VyKCdjaGFuZ2UnKTsNCgkJCX0NCgkJfQ0KCX0NCn0NCg0KLy9BZGQgRXZlbnQgZnVuY3Rpb24NCmZ1bmN0aW9uIGFkZEV2ZW50KGVsbSwgZXZUeXBlLCBmbiwgdXNlQ2FwdHVyZSkNCnsNCgkvLyBjcm9zcyBicm93c2VyIGV2ZW50IGhhbmRsaW5nIGZvciBJRSA1KywgTlM2KyBhbmQgR2Vja28NCglpZiAoZWxtLmFkZEV2ZW50TGlzdGVuZXIpDQoJew0KCQllbG0uYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCB1c2VDYXB0dXJlKTsNCgkJcmV0dXJuIHRydWU7DQoJfQ0KCWVsc2UgaWYgKGVsbS5hdHRhY2hFdmVudCkNCgl7DQoJCXZhciByID0gZWxtLmF0dGFjaEV2ZW50KCdvbicgKyBldlR5cGUsIGZuKTsNCgkJcmV0dXJuIHI7DQoJfQ0KCWVsc2UNCgl7DQoJCWVsbVsnb24nICsgZXZUeXBlXSA9IGZuOw0KCX0NCn0NCg0KZnVuY3Rpb24gaGFzRm9ybUJlZW5DaGFuZ2VkKCkgew0KCXZhciBsb2NhbEZvcm0gPSBudWxsOw0KDQoJaWYoY3VycmVudE9tbmlGb3JtICE9IG51bGwpIHsNCgkJbG9jYWxGb3JtID0gY3VycmVudE9tbmlGb3JtOw0KCX0NCglpZihsb2NhbEZvcm0gIT0gbnVsbCkgew0KDQoJCWlmKChsb2NhbEZvcm0uaXNEaXJ0eSAmJiBsb2NhbEZvcm0uaXNEaXJ0eS52YWx1ZSA9PSAndHJ1ZScpIHx8IGhhc0Zvcm1DaGFuZ2VkKGxvY2FsRm9ybSkgfHwgaGFzRWxlbUNoYW5nZWQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHsNCgkJCXJldHVybiB0cnVlOw0KCQl9DQoJfQ0KCXJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiBDaGVja3MgaWYgdGhlIGZvcm0gaGFzIGJlZW4gY2hhbmdlZCBpZiBzbywgZGlzcGxheXMgY29uZmlybSBkaWFsb2cNCiAqLw0KZnVuY3Rpb24gY2hlY2tGb3JtQ2hhbmdlZChvYmpGb3JtKSB7DQoNCgl2YXIgbG9jYWxGb3JtOw0KCXZhciBzaG93TWVzc2FnZSA9IGZhbHNlOw0KCXZhciByZWNhbGNWYXJpYWJsZURlZmluZWQgPSBmYWxzZTsNCglpZiAob2JqRm9ybSAhPSBudWxsKSB7DQoJCWxvY2FsRm9ybSA9IG9iakZvcm07DQoJfSBlbHNlIHsNCgkJbG9jYWxGb3JtID0gY3VycmVudE9tbmlGb3JtOw0KCX0NCglpZiAobG9jYWxGb3JtICE9IG51bGwpIHsNCgkJPCEtLSBCdWcgZml4OiBPTU5JMDAwMDM0NDQgLS0+DQoJCWlmIChsb2NhbEZvcm0ubmVlZHNSZWNhbGMpIHsNCgkJCWlmIChsb2NhbEZvcm0ubmVlZHNSZWNhbGMudmFsdWUgPT0gJ3RydWUnKSB7DQoJCQkJdmFyIGNvbmZpcm1NZXNzYWdlICA9ICJJZiB5b3UgaGF2ZSBlbnRlcmVkLCB1cGRhdGVkIG9yIG1vZGlmaWVkIGFueSBkYXRhIHRoYXQgd2lsbCBjYWxjdWxhdGUgb3IgY2hhbmdlIHRoZSBFUkQsIHlvdSBtdXN0IGludm9rZSB0aGUgY2FsY3VsYXRlIHByb2Nlc3MgYmVmb3JlIGxlYXZpbmcgdGhpcyBwYWdlLlxuIjsNCgkJCQljb25maXJtTWVzc2FnZSAgICAgKz0gIiAqKiBTZW50ZW5jZSBjYWxjdWxhdGlvbnMgYXJlIG5vdCB1cC10by1kYXRlICoqXG5cbiI7DQoJCQkJY29uZmlybU1lc3NhZ2UgICAgICs9ICJDbGljayBDYW5jZWwgdG8gcmV0dXJuIHRvIHRoZSBzY3JlZW4gdG8gcmVjYWxjdWxhdGUgYmVmb3JlIG5hdmlnYXRpbmcgZnJvbSB0aGlzIHBhZ2UuXG5cbiI7DQoJCQkJY29uZmlybU1lc3NhZ2UgICAgICs9ICJDbGljayBPSyB0byBwcm9jZWVkIHdpdGhvdXQgcmVjYWxjdWxhdGluZy4iOw0KCQkJCXNob3dNZXNzYWdlID0gdHJ1ZTsNCgkJCX0NCgkJCXJlY2FsY1ZhcmlhYmxlRGVmaW5lZCA9IHRydWU7DQoJCX0NCgkJaWYgKChsb2NhbEZvcm0uaXNEaXJ0eSAmJiBsb2NhbEZvcm0uaXNEaXJ0eS52YWx1ZSA9PSAndHJ1ZScpIHx8ICghcmVjYWxjVmFyaWFibGVEZWZpbmVkICYmIGhhc0Zvcm1DaGFuZ2VkKGxvY2FsRm9ybSkpKSB7DQoJCQkvL2RlYnVnIHN0dWZmDQoJCQkvL2FsZXJ0KCJsb2NhbEZvcm0uaXNEaXJ0eTogIitsb2NhbEZvcm0uaXNEaXJ0eSk7DQoJCQkvL2FsZXJ0KCJsb2NhbEZvcm0uaXNEaXJ0eS52YWx1ZTogIitsb2NhbEZvcm0uaXNEaXJ0eS52YWx1ZSk7DQoJCQkvL2FsZXJ0KCJyZWNhbGNWYXJpYWJsZURlZmluZWQ6ICIrcmVjYWxjVmFyaWFibGVEZWZpbmVkKTsNCgkJCS8vYWxlcnQoImhhc0Zvcm1DaGFuZ2VkKGxvY2FsRm9ybSk6ICIraGFzRm9ybUNoYW5nZWQobG9jYWxGb3JtKSk7DQoNCgkJCXZhciBjb25maXJtTWVzc2FnZSAgPSBnZXRJc0RpcnR5Q29uZmlybU1lc3NhZ2UoKTsNCgkJCXNob3dNZXNzYWdlID0gdHJ1ZTsNCgkJfQ0KCQlpZiAoc2hvd01lc3NhZ2UgPT0gdHJ1ZSkgew0KCQkJaGFzV2FybmluZ01lc3NhZ2VGb3JGb3JtQ2hhbmdlZE9jY3VycmVkID0gdHJ1ZTsNCgkJCWlmICh3aW5kb3cuY29uZmlybShjb25maXJtTWVzc2FnZSkpIHsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0gZWxzZSB7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQl9IGVsc2Ugew0KCQkJcmV0dXJuIHRydWU7DQoJCX0NCgl9DQoJcmV0dXJuIHRydWU7DQp9DQoNCmZ1bmN0aW9uIGdldElzRGlydHlDb25maXJtTWVzc2FnZSgpIHsNCgl2YXIgY29uZmlybU1lc3NhZ2UgID0gIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBuYXZpZ2F0ZSBhd2F5IGZyb20gdGhpcyBwYWdlP1xuIjsNCgljb25maXJtTWVzc2FnZSAgICAgKz0gIiAqKiBZb3VyIGNoYW5nZXMgaGF2ZSBub3QgeWV0IGJlZW4gc2F2ZWQgKipcblxuIjsNCgljb25maXJtTWVzc2FnZSAgICAgKz0gIkNsaWNrIENhbmNlbCB0byByZXR1cm4gdG8gdGhlIHNjcmVlbiB0byBzYXZlIGNoYW5nZXMgYmVmb3JlIG5hdmlnYXRpbmcgZnJvbSB0aGlzIHBhZ2UuXG5cbiI7DQoJY29uZmlybU1lc3NhZ2UgICAgICs9ICJDbGljayBPSyB0byBwcm9jZWVkIHdpdGhvdXQgc2F2aW5nIGNoYW5nZXMuIjsNCglyZXR1cm4gY29uZmlybU1lc3NhZ2U7DQp9DQoNCi8qKg0KKiBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZWQgJ2Rpc2FibGVkJw0KKi8NCmZ1bmN0aW9uIGhhc0Rpc2FibGVkQ2xhc3MoZWxlbSkgew0KICAgICAgcmV0dXJuICQoZWxlbSkuaGFzQ2xhc3MoJ2Rpc2FibGVkJyk7ICAgICAgDQp9DQoNCiAgLyoqDQogICAqIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSBpZiBhbnkgZWRpdCBjb250cm9sIGhhcyBiZWVuIG1vZGlmaWVkIGZyb20gaXRzIG9yaWdpbmFsIChvciBsYXN0IHNhdmVkKSBzZXR0aW5ncw0KICAgKi8NCiAgZnVuY3Rpb24gaGFzRm9ybUNoYW5nZWQob2JqRm9ybSkNCiAgew0KICAJaWYob2JqRm9ybSA9PSBudWxsIHx8IHVzZWRGb3JtRWxlbWVudENoYW5nZUluaXQpIHsgLy8gRG9uJ3QgZG8gRE9NIHNjYW4gaWYgd2UgaW5pdGlhbGl6ZWQgdGhlIG5ldyB3YXkuDQogIAkJcmV0dXJuIGZhbHNlOw0KICAJfQ0KDQoJdmFyIG91dHB1dCA9ICcnOw0KCWZvciAodmFyIGk9MCwgaj1vYmpGb3JtLmxlbmd0aDsgaTxqOyBpKyspIHsNCgkgIAlpZiAoaGFzRWxlbUNoYW5nZWQob2JqRm9ybVtpXSkpIHsNCgkgIAkJcmV0dXJuKHRydWUpOw0KCSAgCX0NCgl9DQoJcmV0dXJuIChmYWxzZSk7DQp9DQoNCi8qIFNldCBERUJVR19JU0RJUlRZIHRvIHRydWUgdG8gZW5hYmxlIGlzRGlydHkgYWxlcnRzICovDQpmdW5jdGlvbiBoYXNFbGVtQ2hhbmdlZChlbGVtKSB7DQoJaWYgKGVsZW0gPT0gbnVsbCkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJdmFyIG15VHlwZSA9IGVsZW0udHlwZTsNCiAgCWlmIChteVR5cGUgPT0gJ2NoZWNrYm94JyB8fCBteVR5cGUgPT0gJ3JhZGlvJykgew0KCQlpZiAoZWxlbS5jaGVja2VkICE9IGVsZW0uZGVmYXVsdENoZWNrZWQpIHsNCgkJCWlmICh0eXBlb2YoREVCVUdfSVNESVJUWSkgIT0gJ3VuZGVmaW5lZCcgJiYgREVCVUdfSVNESVJUWSkgew0KCQkJCWFsZXJ0KCJlbGVtLmNoZWNrZWQ9IiArIGVsZW0uY2hlY2tlZCArICIsIGVsZW0uaWQ9IiArIGVsZW0uaWQpOw0KCQkJfQ0KCSAgCQlyZXR1cm4odHJ1ZSk7DQoJCX0NCiAgCX0NCiAgCWlmIChteVR5cGUgPT0gJ2hpZGRlbicgfHwgbXlUeXBlID09ICdwYXNzd29yZCcgfHwgbXlUeXBlID09ICd0ZXh0JyB8fCBteVR5cGUgPT0gJ3RleHRhcmVhJykgew0KICAJCS8vIERlZmVjdCAxODg2MA0KICAJCWlmIChlbGVtLnZhbHVlICE9IGVsZW0uZGVmYXVsdFZhbHVlICYmIGVsZW0udmFsdWUgIT0gJ3ByaW50V2luZG93Jykgew0KCQkJaWYgKHR5cGVvZihERUJVR19JU0RJUlRZKSAhPSAndW5kZWZpbmVkJyAmJiBERUJVR19JU0RJUlRZKSB7DQoJCQkJYWxlcnQoImVsZW0udmFsdWU9IiArIGVsZW0udmFsdWUgKyAiLCBlbGVtLmRlZmF1bHRWYWx1ZT0iICsgZWxlbS5kZWZhdWx0VmFsdWUgKyAiLCBlbGVtLmlkPSIgKyBlbGVtLmlkICsgIiwgZWxlbS5uYW1lPSIgKyBlbGVtLm5hbWUgKyAiLCBteXR5cGU9IiArIG15VHlwZSk7DQoJCQl9DQoJICAJCXJldHVybih0cnVlKTsNCgkJfQ0KICAJfQ0KICAJaWYgKG15VHlwZSA9PSAnc2VsZWN0LW9uZScgfHwgbXlUeXBlID09ICdzZWxlY3QtbXVsdGlwbGUnKSB7DQoJCWZvciAodmFyIGs9MCwgbD1lbGVtLm9wdGlvbnMubGVuZ3RoOyBrPGw7IGsrKykgew0KCSAgCQlpZiAoZWxlbS5vcHRpb25zW2tdLnNlbGVjdGVkICE9IGVsZW0ub3B0aW9uc1trXS5kZWZhdWx0U2VsZWN0ZWQpIHsNCgkJCQlpZiAodHlwZW9mKERFQlVHX0lTRElSVFkpICE9ICd1bmRlZmluZWQnICYmIERFQlVHX0lTRElSVFkpIHsNCgkJCQkJYWxlcnQoImVsZW0uaWQub3B0aW9uICE9IGRlZmF1bHRTZWxlY3RlZCAtPiAiICsgZWxlbS5pZCArICIsIG9wdGlvblRleHQ9IiArIGVsZW0ub3B0aW9uc1trXS50ZXh0ICsgIiwgZGVmYXVsdFZhbHVlPSIgKyBlbGVtLm9wdGlvbnNba10uZGVmYXVsdFNlbGVjdGVkICsgIiwgYWN0dWFsVmFsdWU9IiArIGVsZW0ub3B0aW9uc1trXS5zZWxlY3RlZCArICIsIFNlbGVjdC5EZWZhdWx0VmFsdWU9IiArIGVsZW0udmFsdWUpOw0KCQkJCX0NCgkJCQlyZXR1cm4odHJ1ZSk7DQoJICAJCX0NCgkJfQ0KICAJfQ0KICAJcmV0dXJuKGZhbHNlKTsNCn0NCg0KLy8gQ2hhbmdlIHRoZSBlbGVtZW50IHNvIGlzIGRvZXMgbm90IGFwcGVhciB0byBoYXZlIGJlZW4gY2hhbmdlZC4NCi8vIExlYXZlIHRoZSBjdXJyZW50IHZhbHVlIGludGFjdC4NCmZ1bmN0aW9uIG1hc2tFbGVtQ2hhbmdlKGVsZW0pIHsNCglpZiAoZWxlbSAhPSBudWxsKSB7DQoNCgkJdmFyIG15VHlwZSA9IGVsZW0udHlwZTsNCgkgIAlpZiAobXlUeXBlID09ICdjaGVja2JveCcgfHwgbXlUeXBlID09ICdyYWRpbycpIHsNCgkJCQllbGVtLmRlZmF1bHRDaGVja2VkID0gZWxlbS5jaGVja2VkOw0KCSAgCX0gZWxzZQ0KCSAgCWlmIChteVR5cGUgPT0gJ2hpZGRlbicgfHwgbXlUeXBlID09ICdwYXNzd29yZCcgfHwgbXlUeXBlID09ICd0ZXh0JyB8fCBteVR5cGUgPT0gJ3RleHRhcmVhJykgew0KCSAgCQkvLyBEZWZlY3QgMTg4NjANCgkgIAkJaWYgKCBlbGVtLnZhbHVlICE9ICdwcmludFdpbmRvdycpIHsNCgkgIAkJCWVsZW0uZGVmYXVsdFZhbHVlID0gZWxlbS52YWx1ZTsNCgkJCX0NCgkgIAl9IGVsc2UNCgkgIAlpZiAobXlUeXBlID09ICdzZWxlY3Qtb25lJyB8fCBteVR5cGUgPT0gJ3NlbGVjdC1tdWx0aXBsZScpIHsNCgkJCWZvciAodmFyIGs9MCwgbD1lbGVtLm9wdGlvbnMubGVuZ3RoOyBrPGw7IGsrKykgew0KCQkJCWVsZW0ub3B0aW9uc1trXS5kZWZhdWx0U2VsZWN0ZWQgPSBlbGVtLm9wdGlvbnNba10uc2VsZWN0ZWQ7DQoJCQl9DQoJICAJfQ0KCX0NCn0NCg0KZnVuY3Rpb24gaGFzRm9ybUNoYW5nZWRJZ25vcmVMaXN0KG9iakZvcm0sIGlnbm9yZUlkcykNCnsNCglpZihvYmpGb3JtID09IG51bGwpIHsNCiAgCQlyZXR1cm4gZmFsc2U7DQogIAl9DQoNCgl2YXIgb3V0cHV0ID0gJyc7DQoJZm9yICh2YXIgaT0wLCBqPW9iakZvcm0ubGVuZ3RoOyBpPGo7IGkrKykgew0KCSAgCW15VHlwZSA9IG9iakZvcm1baV0udHlwZTsNCgkgIAlpZiAobXlUeXBlID09ICdjaGVja2JveCcgfHwgbXlUeXBlID09ICdyYWRpbycpIHsNCgkJCWlmIChvYmpGb3JtW2ldLmNoZWNrZWQgIT0gb2JqRm9ybVtpXS5kZWZhdWx0Q2hlY2tlZCkgew0KCQkJCS8vYWxlcnQoIm9iakZvcm1baV0uY2hlY2tlZD0iICsgb2JqRm9ybVtpXS5jaGVja2VkICsgIiwgb2JqRm9ybVtpXS5pZD0iICsgb2JqRm9ybVtpXS5pZCk7DQoJCQkJaWYgKGlzSWRJbkxpc3Qob2JqRm9ybVtpXS5pZCxpZ25vcmVJZHMpID09IGZhbHNlKQ0KCQkJCXsNCgkJCSAgCQlyZXR1cm4odHJ1ZSk7DQoJCQkgIAl9DQoJCQkgIAllbHNlDQoJCQkgIAl7DQoJCQkgIAkJcmV0dXJuKGZhbHNlKTsNCgkJCSAgCX0NCgkJCX0NCgkgIAl9DQoJICAJaWYgKG15VHlwZSA9PSAnaGlkZGVuJyB8fCBteVR5cGUgPT0gJ3Bhc3N3b3JkJyB8fCBteVR5cGUgPT0gJ3RleHQnIHx8IG15VHlwZSA9PSAndGV4dGFyZWEnKSB7DQoJCQlpZiAob2JqRm9ybVtpXS52YWx1ZSAhPSBvYmpGb3JtW2ldLmRlZmF1bHRWYWx1ZSkgew0KCQkJCS8vYWxlcnQoIm9iakZvcm1baV0udmFsdWU9IiArIG9iakZvcm1baV0udmFsdWUgKyAiLCBvYmpGb3JtW2ldLmRlZmF1bHRWYWx1ZT0iICsgb2JqRm9ybVtpXS5kZWZhdWx0VmFsdWUgKyAiLCBvYmpGb3JtW2ldLmlkPSIgKyBvYmpGb3JtW2ldLmlkICsgIiwgb2JqRm9ybVtpXS5uYW1lPSIgKyBvYmpGb3JtW2ldLm5hbWUgKyAiLCBteXR5cGU9IiArIG15VHlwZSk7DQoJCSAgCQlpZiAoaXNJZEluTGlzdChvYmpGb3JtW2ldLmlkLGlnbm9yZUlkcykgPT0gZmFsc2UpDQoJCQkJew0KCQkJICAJCXJldHVybih0cnVlKTsNCgkJCSAgCX0NCgkJCSAgCWVsc2UNCgkJCSAgCXsNCgkJCSAgCQlyZXR1cm4oZmFsc2UpOw0KCQkJICAJfQ0KCQkJfQ0KCSAgCX0NCgkgIAlpZiAobXlUeXBlID09ICdzZWxlY3Qtb25lJyB8fCBteVR5cGUgPT0gJ3NlbGVjdC1tdWx0aXBsZScpIHsNCgkJCWZvciAodmFyIGs9MCwgbD1vYmpGb3JtW2ldLm9wdGlvbnMubGVuZ3RoOyBrPGw7IGsrKykgew0KCQkgIAkJaWYgKG9iakZvcm1baV0ub3B0aW9uc1trXS5zZWxlY3RlZCAhPSBvYmpGb3JtW2ldLm9wdGlvbnNba10uZGVmYXVsdFNlbGVjdGVkKSB7DQoJCSAgCQkJLy9hbGVydCgib2JqRm9ybVtpXS5pZC5vcHRpb24gIT0gZGVmYXVsdFNlbGVjdGVkIC0+ICIgKyBvYmpGb3JtW2ldLmlkICsgIiwgb3B0aW9uVGV4dD0iICsgb2JqRm9ybVtpXS5vcHRpb25zW2tdLnRleHQgKyAiLCBkZWZhdWx0VmFsdWU9IiArIG9iakZvcm1baV0ub3B0aW9uc1trXS5kZWZhdWx0U2VsZWN0ZWQgKyAiLCBhY3R1YWxWYWx1ZT0iICsgb2JqRm9ybVtpXS5vcHRpb25zW2tdLnNlbGVjdGVkICsgIiwgU2VsZWN0LkRlZmF1bHRWYWx1ZT0iICsgb2JqRm9ybVtpXS52YWx1ZSk7DQoJCQkJCWlmIChpc0lkSW5MaXN0KG9iakZvcm1baV0uaWQsaWdub3JlSWRzKSA9PSBmYWxzZSkNCgkJCQkJew0KCQkJICAJCXJldHVybih0cnVlKTsNCgkJCSAgCQl9DQoJCQkgIAkJZWxzZQ0KCQkJICAJCXsNCgkJCSAgCQlyZXR1cm4oZmFsc2UpOw0KCQkJICAJCX0NCgkJICAJCX0NCgkJCX0NCgkgIAl9DQoJfQ0KCXJldHVybiAoZmFsc2UpOw0KDQp9DQoNCi8qKiBmdW5jdGlvbiB0byBiZSB1c2VkIHRvIHNlZSBpZiB0aGUgaWRUb0NoZWNrIHZhbHVlIGlzIGZvdW5kIGluIHRoZSBsaXN0IG9mIGlkcyAqKi8NCmZ1bmN0aW9uIGlzSWRJbkxpc3QoaWRUb0NoZWNrLGxpc3RPZklkcykNCnsNCg0KCXZhciBpZENvdW50ZXIgPSAwOw0KDQoJaWYgKGxpc3RPZklkcyA9PSBudWxsKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCglmb3IoaWRDb3VudGVyPTA7IGlkQ291bnRlciA8IGxpc3RPZklkcy5sZW5ndGg7aWRDb3VudGVyKyspDQoJew0KCQlpZiAobGlzdE9mSWRzW2lkQ291bnRlcl0gPT0gaWRUb0NoZWNrKQ0KCQl7DQoJCQlyZXR1cm4gKHRydWUpOw0KCQl9DQoJfQ0KCXJldHVybiBmYWxzZTsNCn0NCg0KDQoNCi8qIFJlZGlyZWN0IHRoZSBjdXJyZW50IHdpbmRvdyB0byBzcGVjaWZpZWQgdXJsICovDQpmdW5jdGlvbiByZWRpcmVjdChzdHJVcmwpew0KCXdpbmRvdy5sb2NhdGlvbj1zdHJVcmw7DQoJcmV0dXJuIHdpbmRvdzsNCn0NCg0KdmFyIGdsb2JhbFdpbmRvd05hbWUgPSBuZXcgQXJyYXkoKTsNCg0KZnVuY3Rpb24gb3Blbk5ld1ByaW50V2luZG93KHN0clVybCwgc3RyTmV3V2luZG93TmFtZSkgew0KDQoJcmV0dXJuIG9wZW5OZXdXaW5kb3coc3RyVXJsLCBzdHJOZXdXaW5kb3dOYW1lLCAxMDI0LCA3NjgsICd5ZXMnLCAneWVzJyk7DQp9DQoNCi8qIENyZWF0ZSBhIG5ldyB3aW5kb3cgKi8NCmZ1bmN0aW9uIG9wZW5OZXdXaW5kb3coc3RyVXJsLCBzdHJOZXdXaW5kb3dOYW1lLCBpbnRXaW5kb3dXaWR0aCwgaW50V2luZG93SGVpZ2h0LCBzY3JvbGwsIHJlc2l6YWJsZSkgew0KDQoJLyogY3JlYXRlIG5ldyB3aW5kb3cgYW5kIGdpdmUgaXQgZm9jdXMgKi8NCgl2YXIgbmV3V2luZG93Ow0KICAgIExlZnRQb3NpdGlvbiA9IChzY3JlZW4ud2lkdGgpID8gKHNjcmVlbi53aWR0aCAtIGludFdpbmRvd1dpZHRoKSAvIDIgOiA0MDsNCiAgICBUb3BQb3NpdGlvbiA9IChzY3JlZW4uaGVpZ2h0KSA/IChzY3JlZW4uaGVpZ2h0IC0gaW50V2luZG93SGVpZ2h0KSAvIDIgOiA0MDsNCiAgICAvL3NlbmQgc2Vzc2lvbkJyb3dzZXJJZCB0byBzZXJ2bGV0IGJlZm9yZSBvcGVuIG5ldyB3aW5kb3cNCiAgICBwcm9jZXNzQWpheFNlcnZsZXQoKTsNCiAgICAvL2RlZmVjdCAyNTgyOSBJRSBUYWJzIC0gUHJpbnQgQ0ZQIFN1bW1hcnkgLSBQb3B1cCB3aW5kb3cgZG9lcyBub3QgdXBkYXRlIHdoZW4gY2xpY2tpbmcgZnJvbSBvdGhlciB0YWJzDQogICAgLy9hZGRlZCBzZXNzaW9uIGJyb3dzZXIgaWQgdG8gdGhlIHdpbmRvdyBuYW1lIHRvIG1ha2UgaXQgdW5pcXVlDQogICAgLy9kZWZlY3QgMjU4NjcgT01OSSAtIENhbm5vdCBPcGVuIE9mZmVuZGVyIFJlcG9ydHMgZm9yIE11bHRpcGxlIERPQyBudW1iZXJzIGluc2lkZSBPTU5JIEluIE0zNCBDT05WDQoJLy9pZiBubyBuYW1lIGZvciBuZXcgd2luZG93IGRvbid0IGFkZCBzZXNzaW9uIHN0b3JhZ2UgaWQgdG8gc3RybmV3d2luZG93bmFtZQ0KICAgIC8vZGVmZWN0IDI1ODkzIGFkZGVkIG51bGwgY2hlY2sNCiAgICBpZiAoc3RyTmV3V2luZG93TmFtZSAhPSBudWxsICYmIHN0ck5ld1dpbmRvd05hbWUubGVuZ3RoID4gMCkNCiAgICB7DQogICAgCW5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKHN0clVybCwgc3RyTmV3V2luZG93TmFtZSArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInNlc3Npb25Ccm93c2VySWQiKSwgJ2hlaWdodD0nKyBpbnRXaW5kb3dIZWlnaHQgKycsd2lkdGg9JysgaW50V2luZG93V2lkdGggKycsdG9wPScrVG9wUG9zaXRpb24rJyxsZWZ0PScrTGVmdFBvc2l0aW9uKycsc2Nyb2xsYmFycz0nK3Njcm9sbCsnLHJlc2l6YWJsZT0nK3Jlc2l6YWJsZSsnLHRvb2xiYXI9bm8sdGl0bGViYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPXllcyxtZW51YmFyPW5vLGNvcHloaXN0b3J5PW5vLG1vZGFsPXllcycpOw0KICAgIH0gZWxzZQ0KCXsNCiAgICAJbmV3V2luZG93ID0gd2luZG93Lm9wZW4oc3RyVXJsLCBzdHJOZXdXaW5kb3dOYW1lLCAnaGVpZ2h0PScrIGludFdpbmRvd0hlaWdodCArJyx3aWR0aD0nKyBpbnRXaW5kb3dXaWR0aCArJyx0b3A9JytUb3BQb3NpdGlvbisnLGxlZnQ9JytMZWZ0UG9zaXRpb24rJyxzY3JvbGxiYXJzPScrc2Nyb2xsKycscmVzaXphYmxlPScrcmVzaXphYmxlKycsdG9vbGJhcj1ubyx0aXRsZWJhcj1ubyxsb2NhdGlvbj1ubyxzdGF0dXM9eWVzLG1lbnViYXI9bm8sY29weWhpc3Rvcnk9bm8sbW9kYWw9eWVzJyk7DQoJfQ0KDQoNCglnbG9iYWxXaW5kb3dOYW1lW2dsb2JhbFdpbmRvd05hbWUubGVuZ3RoXSA9IG5ld1dpbmRvdzsNCgkvL2FsZXJ0KCJzZXR0aW5nIGdsb2JhbCB3aW5kb3cgbmFtZSA6ICIgKyBuZXdXaW5kb3cubmFtZSk7DQoNCgluZXdXaW5kb3cuZm9jdXMoKTsNCg0KDQoNCiAgICByZXR1cm4gbmV3V2luZG93Ow0KfQ0KDQovKiBDcmVhdGUgYSBuZXcgd2luZG93IHdpdGggY3VzdG9tIGZlYXR1cmVzICovDQpmdW5jdGlvbiBvcGVuUG9wVXBXaW5kb3dXaXRoRmVhdHVyZXMoc3RyVXJsLCBzdHJOZXdXaW5kb3dOYW1lLCBzdHJGZWF0dXJlcykgew0KICAgIC8vc2VuZCBzZXNzaW9uQnJvd3NlcklkIHRvIHNlcnZsZXQgYmVmb3JlIG9wZW4gbmV3IHdpbmRvdw0KICAgIHByb2Nlc3NBamF4U2VydmxldCgpOw0KICAgIC8vZGVmZWN0IDI1ODI5IElFIFRhYnMgLSBQcmludCBDRlAgU3VtbWFyeSAtIFBvcHVwIHdpbmRvdyBkb2VzIG5vdCB1cGRhdGUgd2hlbiBjbGlja2luZyBmcm9tIG90aGVyIHRhYnMNCiAgICAvL2FkZGVkIHNlc3Npb24gYnJvd3NlciBpZCB0byB0aGUgd2luZG93IG5hbWUgdG8gbWFrZSBpdCB1bmlxdWUNCgkvL2RlZmVjdCAyNTg2NyBPTU5JIC0gQ2Fubm90IE9wZW4gT2ZmZW5kZXIgUmVwb3J0cyBmb3IgTXVsdGlwbGUgRE9DIG51bWJlcnMgaW5zaWRlIE9NTkkgSW4gTTM0IENPTlYNCgkvL2lmIG5vIG5hbWUgZm9yIG5ldyB3aW5kb3cgZG9uJ3QgYWRkIHNlc3Npb24gc3RvcmFnZSBpZCB0byBzdHJuZXd3aW5kb3duYW1lDQogICAgLy9kZWZlY3QgMjU4OTMgYWRkZWQgbnVsbCBjaGVjaw0KICAgIGlmIChzdHJOZXdXaW5kb3dOYW1lICE9IG51bGwgJiYgc3RyTmV3V2luZG93TmFtZS5sZW5ndGggPiAwKQ0KICAgIHsNCiAgICAJd2luZG93Lm9wZW4oc3RyVXJsLCBzdHJOZXdXaW5kb3dOYW1lICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbkJyb3dzZXJJZCIpLCBzdHJGZWF0dXJlcykuZm9jdXMoKTsNCiAgICB9IGVsc2UNCgl7DQogICAgCXdpbmRvdy5vcGVuKHN0clVybCwgc3RyTmV3V2luZG93TmFtZSwgc3RyRmVhdHVyZXMpLmZvY3VzKCk7DQoJfQ0KDQp9DQoNCi8qIENyZWF0ZSBhIG5ldyB3aW5kb3cgd2l0aCBjdXN0b20gZmVhdHVyZXMgKi8NCmZ1bmN0aW9uIG9wZW5Qb3BVcFJldHVybldpbmRvdyhzdHJVcmwsIHN0ck5ld1dpbmRvd05hbWUsIHN0ckZlYXR1cmVzKSB7DQogICAgLy9zZW5kIHNlc3Npb25Ccm93c2VySWQgdG8gc2VydmxldCBiZWZvcmUgb3BlbiBuZXcgd2luZG93DQogICAgcHJvY2Vzc0FqYXhTZXJ2bGV0KCk7DQogICAgLy9kZWZlY3QgMjU4MjkgSUUgVGFicyAtIFByaW50IENGUCBTdW1tYXJ5IC0gUG9wdXAgd2luZG93IGRvZXMgbm90IHVwZGF0ZSB3aGVuIGNsaWNraW5nIGZyb20gb3RoZXIgdGFicw0KICAgIC8vYWRkZWQgc2Vzc2lvbiBicm93c2VyIGlkIHRvIHRoZSB3aW5kb3cgbmFtZSB0byBtYWtlIGl0IHVuaXF1ZQ0KICAJLy9kZWZlY3QgMjU4NjcgT01OSSAtIENhbm5vdCBPcGVuIE9mZmVuZGVyIFJlcG9ydHMgZm9yIE11bHRpcGxlIERPQyBudW1iZXJzIGluc2lkZSBPTU5JIEluIE0zNCBDT05WDQoJLy9pZiBubyBuYW1lIGZvciBuZXcgd2luZG93IGRvbid0IGFkZCBzZXNzaW9uIHN0b3JhZ2UgaWQgdG8gc3RybmV3d2luZG93bmFtZQ0KICAgIC8vZGVmZWN0IDI1ODkzIGFkZGVkIG51bGwgY2hlY2sNCiAgICBpZiAoc3RyTmV3V2luZG93TmFtZSAhPSBudWxsICYmIHN0ck5ld1dpbmRvd05hbWUubGVuZ3RoID4gMCkNCiAgICB7DQogICAgCXZhciByZXR1cm5XaW5kb3cgPSB3aW5kb3cub3BlbihzdHJVcmwsIHN0ck5ld1dpbmRvd05hbWUgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uQnJvd3NlcklkIiksIHN0ckZlYXR1cmVzKTsNCiAgICB9IGVsc2UNCgl7DQogICAgCXZhciByZXR1cm5XaW5kb3cgPSB3aW5kb3cub3BlbihzdHJVcmwsIHN0ck5ld1dpbmRvd05hbWUsIHN0ckZlYXR1cmVzKTsNCgl9DQoNCg0KCXJldHVybiByZXR1cm5XaW5kb3c7DQp9DQpmdW5jdGlvbiBnbG9iYWxIYW5kbGVDbG9zZVdpbmRvdygpDQp7DQoJLy9pZih3aW5kb3cuc2NyZWVuTGVmdCA+c2NyZWVuLndpZHRoKXsNCgkJZm9yKHZhciBpID0gMCA7IGkgPD0gZ2xvYmFsV2luZG93TmFtZS5sZW5ndGg7aSsrKQ0KCQl7DQoJCQkvL2FsZXJ0KCJjbG9zaW5nIHdpbmRvdyAjOiAiICsgaSk7DQoJCQlnbG9iYWxXaW5kb3dOYW1lW2ldLmNsb3NlOw0KCQl9DQoNCgkvL30NCn0NCg0KZnVuY3Rpb24gb3Blbk1vZGFsRGlhbG9nKHdpbmRvd1VSTCx3aW5XaWR0aCx3aW5IZWlnaHQpIHsNCiAgcmV0dXJuIG9wZW5Nb2RhbERpYWxvZzIod2luZG93VVJMLHNlbGYsd2luV2lkdGgsd2luSGVpZ2h0LCcnKTsNCn0NCg0KZnVuY3Rpb24gb3Blbk1vZGFsTWVzc2FnZURpYWxvZyh3aW5kb3dVUkwsc3RyTWVzc2FnZSx3aW5XaWR0aCx3aW5IZWlnaHQpIHsNCiAgcmV0dXJuIG9wZW5Nb2RhbERpYWxvZzIod2luZG93VVJMLHN0ck1lc3NhZ2Usd2luV2lkdGgsd2luSGVpZ2h0LCc7c2Nyb2xsOjA7dW5hZG9ybmVkOjAnKTsNCn0NCg0KZnVuY3Rpb24gb3Blbk1vZGFsRGlhbG9nMih3aW5kb3dVUkwsc3RyTWVzc2FnZSx3aW5XaWR0aCx3aW5IZWlnaHQsYWRkRmxhZ3MpIHsNCiAgYWRkRmxhZ3MgPSAncmVzaXphYmxlPXllcyc7DQogIHZhciBicm93c2VyYm90ID0gMDsNCiAgdHJ5IHsgYnJvd3NlcmJvdCA9IHBhcmVudC5zZWxlbml1bS5icm93c2VyYm90OyB9IGNhdGNoKGUpIHt9DQogIGlmKHdpbmRvdy5zaG93TW9kYWxEaWFsb2cgJiYgIWJyb3dzZXJib3QpIHsNCgkgICAgLy9zZW5kIHNlc3Npb25Ccm93c2VySWQgdG8gc2VydmxldCBiZWZvcmUgb3BlbiBuZXcgd2luZG93DQoJICAgIHByb2Nlc3NBamF4U2VydmxldCgpOw0KCSAgICByZXR1cm4gd2luZG93LnNob3dNb2RhbERpYWxvZyh3aW5kb3dVUkwsIHN0ck1lc3NhZ2UsICJkaWFsb2dXaWR0aDoiICsgd2luV2lkdGggKyAiIHB4O2RpYWxvZ0hlaWdodDoiICsgd2luSGVpZ2h0ICsgInB4O2NlbnRlcjoxO2hlbHA6MDtzdGF0dXM6MDsiICsgYWRkRmxhZ3MpOw0KICB9IGVsc2UgeyAvLyBtb3ppbGxhIG1vZGFsIHdpbmRvdywgZG9lc24ndCB3b3JrIGZvciBmaXJlZm94IDIuMCBvciBTZWxlbml1bQ0KDQogIAlyZXR1cm4gb3Blbk5ld1dpbmRvdyh3aW5kb3dVUkwsJ0RpYWxvZycsd2luV2lkdGgsd2luSGVpZ2h0LCdubycsJ3llcycpOw0KICB9DQp9DQoNCi8vIENSIDUxNTggLSByZXBsYWNlbWVudCBmb3Igd2luZG93LnNob3dNb2RhbERpYWxvZyBmb3JtYWxseSB1c2VkIGZvciB3aW5JRC4NCi8vIFNpbmNlIHRoaXMgY29kZSBpcyByb2xsZWQgYmFjaywgdGhlIGNvZGUgaXMgbm90aGluZyBtb3JlIHRoYW4gYW4gaW50ZXJtZWRpYXRlIGNhbGwgdG8gdGhlIHJlYWwgd2luZG93LnNob3dNb2RhbERpYWxvZygpDQpmdW5jdGlvbiB3U2hvd01vZGFsRGlhbG9nKHdpbmRvd1VSTCwgYXJndW1lbnRzLCBmZWF0dXJlcykgew0KCS8vIENSNTE1OA0KICAgIC8vc2VuZCBzZXNzaW9uQnJvd3NlcklkIHRvIHNlcnZsZXQgYmVmb3JlIG9wZW4gbmV3IHdpbmRvdw0KICAgIHByb2Nlc3NBamF4U2VydmxldCgpOw0KCXJldHVybiB3aW5kb3cuc2hvd01vZGFsRGlhbG9nKHdpbmRvd1VSTCwgYXJndW1lbnRzLCBmZWF0dXJlcyk7DQp9DQoNCmZ1bmN0aW9uIGNsb3NlV2luZG93KCkgew0KICAJICB3aW5kb3cuY2xvc2UoKTsNCn0NCg0KLyoqDQogKiBPcGVucyBhIG1vZGFsIGRpYWxvZyB3aXRoIGEgZGlzY2xhaW1lciBmb3JtIHdoZXJlIHRoZSB1c2VyIG11c3QgZWl0aGVyIGFjY2VwdCBoYXZpbmcgcmVhZCB0aGUgZGlzY2xhaW1lciBvciBjYW5jZWwuDQogKiBUaGUgZGlzcGxheWVkIHRleHQgaXMgdW5pcXVlIHBlciBOZWVkcyBEb21haW4uIEFsc28sIGNlcnRhaW4gZG9tYWlucyAobGlrZSBTdWJzdGFuY2UgQWJ1c2UpIHJlcXVpcmUgdGhlIGFwcGxpY2F0aW9uDQogKiBsb2cgdGhlIGFjdGl2aXR5IGluIGRhdGFiYXNlIChoYW5kbGVkIGJ5IHRoZSBzZXJ2bGV0KS4NCiAqIA0KICogVGhlIGZvcm0gaXMgZHluYW1pYywgcXVlcnlpbmcgYSBEaXNjbGFpbWVyQ29udHJvbGxlciB0aGF0IHJldHVybnMgYSBqc29uIG9iamVjdCBvZiBkYXRhIHRvIGRpc3BsYXkuDQogKiANCiAqIEBwYXJhbSBzdGFmZklkIHRoZSBpZCBvZiB0aGUgY3VycmVudCB1c2VyDQogKiBAcGFyYW0gZG9jTmIgdGhlIGlkIG9mIHRoZSBvZmZlbmRlciBpbiBjb250ZXh0DQogKiBAcGFyYW0gb2ZubnR5Q2QgaWYgc3BlY2lmaWVkLCB0aGUgbmVlZCBkb21haW4gKHdoaWNoIGRldGVybWluZXMgdGhlIHRleHQgb2YgdGhlIGRpc2NsYWltZXIpDQogKiBAcGFyYW0gc2NyZWVuIGlmIHNwZWNpZmllZCwgdGhlIG9yaWdpbiBvZiB0aGlzIGNhbGwuDQogKiBAcGFyYW0gb25TdWNjZXNzQ2FsbGJhY2sgYSBqYXZhc2NyaXB0IGZ1bmN0aW9uIHRvIHJ1biBpZiB0aGUgdXNlciBwcmVzc2VzICJPSyINCiAqIEBwYXJhbSBvbkNhbmNlbENhbGxiYWNrIGEgamF2YXNjcmlwdCBmdW5jdGlvbiB0byBydW4gaWYgdGhlIHVzZXIgcHJlc3NlcyAiQ2FuY2VsIg0KICovDQpmdW5jdGlvbiBvcGVuRGlzY2xhaW1lckRpYWxvZyhkb2NOYiwgb2ZubnR5Q2QsIHNjcmVlbiwgb25TdWNjZXNzQ2FsbGJhY2ssIG9uQ2FuY2VsQ2FsbGJhY2spIHsNCgkNCgkvLyByZXRyaWV2ZSBqc29uIGRhdGEgZnJvbSBEaXNjbGFpbWVyQ29udHJvbGxlciAoR0VUIHJlcXVlc3QpIGFuZCBwb3B1bGF0ZSBhIGRpYWxvZyBib3gNCgkkLmFqYXgoeyANCgkJICAgIG1ldGhvZDogIkdFVCIsDQoJCQlkYXRhVHlwZTogImpzb24iLCANCgkJCXVybDogIi9vbW5pL2FkdmNvci9uZWVkcy9kaXNjbGFpbWVyLmpzb24iLCANCgkJCWRhdGE6IHsgImRvY05iIjogZG9jTmIsICJvZm5udHlDZCI6IG9mbm50eUNkLCAic2NyZWVuIjogc2NyZWVufSwNCgkJCWNhY2hlOiBmYWxzZQ0KCQl9KQ0KCQkuZG9uZSggZnVuY3Rpb24oIGpzb24sIHRleHRTdGF0dXMsIGpxWEhSICkgeyANCgkJCWlmIChqc29uLmVycm9yKSB7DQoJCQkJLy8gdGhlcmUgd2FzIGFuIGVycm9yIHJldHJpZXZpbmcgdGhpcyBKU09OIHJlcXVlc3QgZnJvbSB0aGUgc2VydmVyLg0KCQkJCXZhciBkaWFsb2cgPSBvcGVuRGlhbG9nKCJFcnJvciIsICJUaGVyZSB3YXMgYW4gZXJyb3IgcmV0cmlldmluZyB0aGUgZGlzY2xhaW1lciB0ZXh0Ojxici8+IiArIGpzb24uZXJyb3IsIGZ1bmN0aW9uKCkge30pOw0KCQkJfQ0KCQkJZWxzZSB7CQkJCQ0KCQkJCS8vIHNob3cgZGlzY2xhaW1lciBwb3B1cC4gIHJ1biBjYWxsYmFjayBvbmx5IGlmIE9LIHdhcyBwcmVzc2VkLg0KCQkJCWlmIChqc29uLmRpc2NsYWltZXIpIHsNCgkJCQkJJC5kaXNjbGFpbWVyRGlhbG9nKA0KCQkJCQkJanNvbi5kaXNjbGFpbWVyLA0KCQkJCQkJb25TdWNjZXNzQ2FsbGJhY2ssIA0KCQkJCQkJb25DYW5jZWxDYWxsYmFjaw0KCQkJCQkpOw0KCQkJCX0NCgkJCQkgDQoJCQkJLy8gaWYgdGhlcmUgaXMgbm8gZGlzY2xhaW1lciwgb3IgdGhlcmUgaXMgYSBkaXNjbGFpbWVyIGJ1dCB0aGUgdXNlciBoYXMgYWxyZWFkeSBhY2tub3dsZWRnZWQgaXQsIGp1c3QgcnVuIHRoZSBjYWxsYmFjay4NCgkJCQllbHNlICB7DQoJCQkJCWlmIChvblN1Y2Nlc3NDYWxsYmFjaykgb25TdWNjZXNzQ2FsbGJhY2suY2FsbCgpOw0KCQkJCX0NCgkJCX0NCgkJfSkNCgkJLmZhaWwoIGZ1bmN0aW9uKCBqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7IA0KCQkJY29uc29sZS5lcnJvcigiRGlzY2xhaW1lckNvbnRyb2xsZXIgaW52YWxpZCBqc29uIHJlc3BvbnNlOiIgKyBqcVhIUik7DQoJCQljb25zb2xlLmVycm9yKGVycm9yVGhyb3duKTsNCgkJfSkNCgkJLmFsd2F5cyggZnVuY3Rpb24oIGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHsJCQkNCgkJfSk7DQp9DQoNCi8qKg0KICogQ3JlYXRlIGEgQ1NTIG1vZGFsIGRpYWxvZyAobm90IGEgYnJvd3NlciBwb3B1cCB3aW5kb3cpIHdpdGggT2sgYW5kIENhbmNlbCBidXR0b25zLg0KICogDQogKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIG9mIHRoZSBkaWFsb2cuDQogKiBAcGFyYW0gY29udGVudCBUaGUgY29udGVudCB0byBkaXNwbGF5IGluIHRoZSBtYWluIHBhcnQgb2YgdGhlIGRpYWxvZy4gTWF5IGJlIGh0bWwuIENvbnRlbnQgaXMgbm90IGV4Y2FwZWQsIG5vciBzaG91bGQNCiAqICAgICAgICAgICAgaXQgYmUgZXNjYXBlZCBzaW5jZSBpdCBpcyBub3QgdXNlci1nZW5lcmF0ZWQgZGF0YS4NCiAqIEBwYXJhbSBvbk9LUHJlc3NlZCBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1biB3aGVuICJPSyIgaXMgcHJlc3NlZC4NCiAqIEBwYXJhbSBvbkNhbmNlbFByZXNzZWQgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBydW4gd2hlbiAiQ2FuY2VsIiBpcyBwcmVzc2VkLg0KICovDQpmdW5jdGlvbiBvcGVuRGlhbG9nKF90aXRsZSwgX2NvbnRlbnQsIF9vbk9LUHJlc3NlZCwgX29uQ2FuY2VsUHJlc3NlZCkgew0KCQ0KCS8vIGNyZWF0ZSBhIHRlbXBvcmFyeSA8ZGl2PiB0byBob2xkIHRoZSBwb3B1cCAoYXR0YWNoZWQgdG8gZW5kIG9mIDxib2R5PikNCgl2YXIgZGl2ID0gJCgnPGRpdiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvZGl2PicpOw0KCWRpdi5odG1sKF9jb250ZW50KTsgDQoJCQ0KCS8vIHNob3cgdGhlIHBvcHVwDQoJdmFyIGRpYWxvZyA9IGRpdi5kaWFsb2coew0KCQl0aXRsZTogX3RpdGxlLA0KCQltb2RhbDogdHJ1ZSwNCgkJbWluV2lkdGg6IDQwMCwNCgkJYnV0dG9uczogWw0KCQkJew0KCQkJCXRleHQ6ICJPayIsDQoJCQkJY2xpY2s6IGZ1bmN0aW9uKCkgew0KCQkJCQkkKHRoaXMpLmRpYWxvZyggImNsb3NlIiApOw0KCQkJCQlpZiAoX29uT0tQcmVzc2VkKSBfb25PS1ByZXNzZWQuY2FsbCgpOw0KCQkJCX0NCgkJCX0sDQoJCQkNCgkJCXsNCgkJCQl0ZXh0OiAiQ2FuY2VsIiwNCgkJCQljbGljazogZnVuY3Rpb24oKSB7DQoJCQkJCSQodGhpcykuZGlhbG9nKCAiY2xvc2UiICk7DQoJCQkJCWlmIChfb25DYW5jZWxQcmVzc2VkKSBfb25DYW5jZWxQcmVzc2VkLmNhbGwoKTsNCgkJCQl9DQoJCQl9DQoJCV0sDQoJCWNsb3NlOiBmdW5jdGlvbigpIHsNCgkJCS8vIGNsZWFudXAgLSByZW1vdmVzIHRoZSBkaXNjbGFpbWVyIDxkaXY+IGZyb20gdGhlIERPTS4NCgkJCSQodGhpcykucmVtb3ZlKCk7DQoJCX0NCgl9KTsNCgkNCglyZXR1cm4gZGlhbG9nLnBhcmVudCgnZGl2LnVpLWRpYWxvZycpOw0KfQ0KDQpmdW5jdGlvbiBzZWxlY3RBbGxMaXN0Q2hlY2tib3hlcyhteUZvcm0sIG15TmFtZSkgew0KCS8vIE5QRSBmaXggLSBub3QgYWxsIGJyb3dzZXJzIGhhdmUgYSBnbG9iYWwgZXZlbnQgb2JqZWN0IC0gbW9zdCBwYXNzIHRoZSBldmVudCB0byB0aGUgaGFuZGxlci4NCglpZiAodHlwZW9mIGV2ZW50ICE9ICd1bmRlZmluZWQnICYmIGV2ZW50LnNoaWZ0S2V5KXtyZXR1cm4gZmFsc2U7fSAvL2J1ZyM3MzgNCgl2YXIgY2hlY2tCb3hTZWFyY2hSZWdFeHAgPSBuZXcgUmVnRXhwKG15TmFtZSArICJcXGQqIik7DQoJdmFyIGVsZW1lbnRzTGVuZ3RoID0gZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50cy5sZW5ndGg7DQoJaWYoZWxlbWVudHNMZW5ndGggPiAwKSB7DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNMZW5ndGg7IGkrKykgew0KCQkJdmFyIGVsZW1lbnROYW1lID0gZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50c1tpXS5uYW1lOw0KCQkJaWYgKGVsZW1lbnROYW1lICE9IG51bGwgJiYgZWxlbWVudE5hbWUubWF0Y2goY2hlY2tCb3hTZWFyY2hSZWdFeHApKSB7DQoJCQkJZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50c1tpXS5jaGVja2VkID0gdHJ1ZTsNCgkJCX0NCgkJfQ0KCX0NCn0NCg0KZnVuY3Rpb24gY2xlYXJBbGxMaXN0Q2hlY2tib3hlcyhteUZvcm0sIG15TmFtZSkgew0KDQoJaWYoZXZlbnQuc2hpZnRLZXkpe3JldHVybiBmYWxzZTt9Ly9idWcjNzM4DQoNCgl2YXIgY2hlY2tCb3hTZWFyY2hSZWdFeHAgPSBuZXcgUmVnRXhwKG15TmFtZSArICJcXGQqIik7DQoJdmFyIGVsZW1lbnRzTGVuZ3RoID0gZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50cy5sZW5ndGg7DQoJaWYoZWxlbWVudHNMZW5ndGggPiAwKSB7DQoJCWZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNMZW5ndGg7IGkrKykgew0KCQkJdmFyIGVsZW1lbnROYW1lID0gZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50c1tpXS5uYW1lOw0KCQkJaWYgKGVsZW1lbnROYW1lICE9IG51bGwgJiYgZWxlbWVudE5hbWUubWF0Y2goY2hlY2tCb3hTZWFyY2hSZWdFeHApKSB7DQoJCQkJZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50c1tpXS5jaGVja2VkID0gZmFsc2U7DQoJCQl9DQoJCX0NCgl9DQp9DQoNCi8qIHVzZWQgYnkgY2hyb25vc1NlYXJjaDsgYW5vdGhlciB2ZXJzaW9uIGlzIGluIG5vdGlmaWNhdGlvbi5qcyAqLw0KZnVuY3Rpb24gY291bnRTZWxlY3RlZENoZWNrYm94ZXMobXlGb3JtLCBteU5hbWUpIHsNCiAgICAgICAJdmFyIGVsZW1lbnRzTGVuZ3RoID0gZG9jdW1lbnQuZm9ybXNbbXlGb3JtXS5lbGVtZW50cy5sZW5ndGg7DQoJCXZhciBjb3VudCA9IDA7DQoJCXZhciBmb3VuZENoZWNrQm94ZXMgPSBmYWxzZTsNCg0KCQlpZihlbGVtZW50c0xlbmd0aCA+IDApIHsNCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHNMZW5ndGg7IGkrKykgew0KCQkJCXZhciBlbGVtZW50TmFtZSA9IGRvY3VtZW50LmZvcm1zW215Rm9ybV0uZWxlbWVudHNbaV0ubmFtZTsNCg0KCQkJCWlmKGVsZW1lbnROYW1lICE9IG51bGwgJiYgZWxlbWVudE5hbWUubWF0Y2gobXlOYW1lKSkgew0KCQkJCQlpZihkb2N1bWVudC5mb3Jtc1tteUZvcm1dLmVsZW1lbnRzW2ldLmNoZWNrZWQgPT0gdHJ1ZSkgew0KCQkJCQkJY291bnQrKzsNCgkJCQkJfQ0KCQkJCQlmb3VuZENoZWNrQm94ZXMgPSB0cnVlOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCWlmKGNvdW50ID09IDAgJiYgZm91bmRDaGVja0JveGVzID09IGZhbHNlKSB7DQoJCQljb3VudCA9IC0xOyAvLyBzcGVjaWFsIGNhc2UgZm9yIHdoZW4gbm8gcmVzdWx0cyBleGlzdA0KCQl9DQoNCgkJcmV0dXJuIGNvdW50Ow0KCX0NCg0KCS8qDQoJICogRnVuY3Rpb246IG9wZW5PZmZlbmRlclNlYXJjaFBvcHVwKCkNCgkgKiBQdXJwb3NlOiBTaG93cyB0aGUgc3RhZmYgYWRkcmVzcyBib29rIGZvciBzZWxlY3RpbmcgcG9zaXRpb24gaW4gTXVsdGlzZWxlY3QgTW9kZS4NCgkgKiAgICAgICAgICBSZXF1aXJlZCBzZXQgdGhlIENhbGxiYWNrIGZ1bmN0aW9uOiAgZm9yIEV4YW1wbGU6IG15Q2FsbEJhY2tGdW5jdGlvbihkYXRhQXJyYXkpDQoJICogICAgICAgICAgVGhlIGRhdGFBcnJheSBpcyBhIDIgZGltZW5zaW9uIEFycmF5LiAgRWFjaCByb3cgaXMgaW5kaXZpZHVhbCBzdGFmZiByZWNvcmQsIHRoZSBjb2x1bW5zIGFyZQ0KCSAqICAgICAgICAgIHRoZSBmaWVsZHMgZm9yIHRoYXQgcmVjb3JkIGluIHRoZSBvcmRlcjogU3RhZmZOYW1lLCBTdGFmZklkLCBQb3NpdGlvbklkLCBPcGVuaW5nSWQNCgkgKg0KCSAqIEFyZ3VtZW50czogY2FsbGJhY2tGdW5jdGlvbiA9IENhbGwgYmFjayBmdW5jdGlvbi4gIFdoZW4gdGhlIGNoaWxkIHdpbmRvdyByZXR1cm5zIGl0IHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uLg0KCSAqIFJldHVybnM6IE5vdGhpbmcNCgkgKiovDQoJZnVuY3Rpb24gb3Blbk9mZmVuZGVyU2VhcmNoUG9wdXAoY2FsbGJhY2tGdW5jdGlvbikgew0KCSAgICB2YXIgdXJsID0gIi9vbW5pL3JlY29yZHMvb2ZmZW5kZXIvb2ZmZW5kZXJTZWFyY2hOb05hdlBvcHVwLmh0bSI7DQoJICAgIHZhciByZXN1bHQgPSBvcGVuTW9kYWxEaWFsb2codXJsLCAxMDAwLCA2MDApOw0KDQoJCWlmIChyZXN1bHQgIT0gbnVsbCkgew0KCQkJCQljYWxsYmFja0Z1bmN0aW9uKHJlc3VsdCk7DQoJCX0NCg0KCX0NCg0KDQovKg0KICogRnVuY3Rpb246IHNob3dTdGFmZkFkZHJlc3NCb29rTXVsdGlTZWxlY3QoKQ0KICogUHVycG9zZTogU2hvd3MgdGhlIHN0YWZmIGFkZHJlc3MgYm9vayBmb3Igc2VsZWN0aW5nIHBvc2l0aW9uIGluIE11bHRpc2VsZWN0IE1vZGUuDQogKiAgICAgICAgICBSZXF1aXJlZCBzZXQgdGhlIENhbGxiYWNrIGZ1bmN0aW9uOiAgZm9yIEV4YW1wbGU6IG15Q2FsbEJhY2tGdW5jdGlvbihkYXRhQXJyYXkpDQogKiAgICAgICAgICBUaGUgZGF0YUFycmF5IGlzIGEgMiBkaW1lbnNpb24gQXJyYXkuICBFYWNoIHJvdyBpcyBpbmRpdmlkdWFsIHN0YWZmIHJlY29yZCwgdGhlIGNvbHVtbnMgYXJlDQogKiAgICAgICAgICB0aGUgZmllbGRzIGZvciB0aGF0IHJlY29yZCBpbiB0aGUgb3JkZXI6IFN0YWZmTmFtZSwgU3RhZmZJZCwgUG9zaXRpb25JZCwgT3BlbmluZ0lkDQogKg0KICogQXJndW1lbnRzOiBkaWFsb2dVUkwgPSBEaWFsb2cgVVJMIHRvIHRoZSBhZGRyZXNzIGJvb2ssIGllOiAvb21uaS9jb21tb24vZGlhbG9ncy9yb2xvZGV4UG9wdXAuaHRtDQogKiAgICAgICAgICAgIGNhbGxiYWNrRnVuY3Rpb24gPSBDYWxsIGJhY2sgZnVuY3Rpb24uICBXaGVuIHRoZSBjaGlsZCB3aW5kb3cgcmV0dXJucyBpdCB3aWxsIGNhbGwgdGhpcyBmdW5jdGlvbi4NCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCmZ1bmN0aW9uIHNob3dTdGFmZkFkZHJlc3NCb29rTXVsdGlTZWxlY3QoZGlhbG9nVVJMLCBjYWxsYmFja0Z1bmN0aW9uKSB7DQogIHZhciB3aW5XaWR0aCA9IDkwMDsNCiAgdmFyIHdpbkhlaWdodCA9IDUyMDsNCg0KICBkaWFsb2dVUkwgPSBkaWFsb2dVUkwgKyAiP3R5cGU9TVVMVElTRUxFQ1QiOw0KDQogIHZhciByZXQgPSBvcGVuTW9kYWxEaWFsb2coZGlhbG9nVVJMLHdpbldpZHRoLHdpbkhlaWdodCk7DQogIGlmKHJldCAhPSBudWxsKSB7DQogIAlwYXJzZU11bHRpU2VsZWN0U3RhZmZSZXR1cm5WYWx1ZXMocmV0LCBjYWxsYmFja0Z1bmN0aW9uKTsNCiAgfQ0KDQp9DQoNCi8qDQogKiBGdW5jdGlvbjogcGFyc2VNdWx0aVNlbGVjdFN0YWZmUmV0dXJuVmFsdWVzKCkNCiAqIFB1cnBvc2U6IFBhcnNlcyBkYXRhIHJldHVybmVkIGZyb20gc2hvd1N0YWZmQWRkcmVzc0Jvb2tNdWx0aVNlbGVjdCBmdW5jdGlvbigpLiBNVUxUSVNFTEVDVCBWZXJzaW9uLg0KICoNCiAqIEFyZ3VtZW50czogcmVzdWx0cyA9IFVSSSBlbmNvZGVkIGRhdGEgaW4ga2V5L3ZhbHVlIHBhaXJzLg0KICogICAgICAgICAgICBjYWxsYmFja0Z1bmN0aW9uID0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIHBhc3NpbmcgYmFjayB0aGUgZGF0YS4NCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCiBmdW5jdGlvbiBwYXJzZU11bHRpU2VsZWN0U3RhZmZSZXR1cm5WYWx1ZXMocmVzdWx0cywgY2FsbGJhY2tGdW5jdGlvbikgew0KDQoJLy8gcmVzdWx0cyBjb21lIGFzIGEgc3RyaW5nIGFuZCB0aGVyZWZvcmUgbmVlZHMgdG8gYmUgcGFyc2VkDQoJdmFyIHN0YWZmQXJyYXkgPSBudWxsOw0KDQoJaWYocmVzdWx0cyAhPSBudWxsICYmIHJlc3VsdHMubGVuZ3RoID4gMCkgew0KCQl2YXIga2V5VmFsdWVBcnJheSA9IHJlc3VsdHMuc3BsaXQoIiYiKTsNCg0KCQlpZihrZXlWYWx1ZUFycmF5ICE9IG51bGwpIHsNCgkJCXZhciByZWNvcmRDb3VudCA9IGtleVZhbHVlQXJyYXkubGVuZ3RoIC8gNDsgIC8vIDQgZmllbGRzIHBlciByZWNvcmQNCg0KCQkJc3RhZmZBcnJheSA9IG5ldyBBcnJheShyZWNvcmRDb3VudCkNCgkJCWZvciAoaT0wOyBpIDwgc3RhZmZBcnJheS5sZW5ndGg7IGkrKykgew0KCQkJCXN0YWZmQXJyYXlbaV0gPSBuZXcgQXJyYXkoNCk7DQoJCQl9DQoNCg0KCQkJdmFyIHBhcmFtTmFtZSA9IG51bGw7DQoJCQl2YXIgcGFyYW1JZCA9IG51bGw7DQoJCQl2YXIgcGFyYW1Qb3NpdGlvbklkID0gbnVsbDsNCgkJCXZhciBwYXJhbU9wZW5pbmdJZCA9IG51bGw7DQoNCgkJCWZvcih2YXIgaSA9IDAsIGMgPSAxOyBpIDwga2V5VmFsdWVBcnJheS5sZW5ndGg7IGkrKykgew0KCQkJCXZhciBkYXRhQXJyYXkgPSBrZXlWYWx1ZUFycmF5W2ldLnNwbGl0KCI9Iik7DQoNCgkJCQlpZihkYXRhQXJyYXkubGVuZ3RoID09IDIpIHsNCgkJCQkJaWYoZGF0YUFycmF5WzBdID09ICgibiIgKyAoYyAtIDEpKSkgew0KCQkJCQkJcGFyYW1OYW1lID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gKCJpIiArIChjIC0gMSkpKSB7DQoJCQkJCQlwYXJhbUlkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gKCJwIiArIChjIC0gMSkpKSB7DQoJCQkJCQlwYXJhbVBvc2l0aW9uSWQgPSBkZWNvZGVVUkkoZGF0YUFycmF5WzFdKTsNCgkJCQkJfSBlbHNlIGlmKGRhdGFBcnJheVswXSA9PSAoIm8iICsgKGMgLSAxKSkpIHsNCgkJCQkJCXBhcmFtT3BlbmluZ0lkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0NCgkJCQl9DQoNCgkJCQlpZigoKGkgKyAxKSAlIDQpID09IDApIHsNCgkJCQkJc3RhZmZBcnJheVtjIC0gMV1bMF0gPSBwYXJhbU5hbWU7DQoJCQkJCXN0YWZmQXJyYXlbYyAtIDFdWzFdID0gcGFyYW1JZDsNCgkJCQkJc3RhZmZBcnJheVtjIC0gMV1bMl0gPSBwYXJhbVBvc2l0aW9uSWQ7DQoJCQkJCXN0YWZmQXJyYXlbYyAtIDFdWzNdID0gcGFyYW1PcGVuaW5nSWQ7DQoNCgkJCQkJcGFyYW1OYW1lID0gbnVsbDsNCgkJCQkJcGFyYW1JZCA9IG51bGw7DQoJCQkJCXBhcmFtUG9zaXRpb25JZCA9IG51bGw7DQoJCQkJCXBhcmFtT3BlbmluZ0lkID0gbnVsbDsNCgkJCQkJYysrOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCX0NCg0KCWlmKGNhbGxiYWNrRnVuY3Rpb24pIHsNCgkJY2FsbGJhY2tGdW5jdGlvbihzdGFmZkFycmF5KTsNCgl9DQoNCgkvLyB1cGRhdGUgaXNEaXJ0eSBpZiB0aGUgZm9ybSBjaGFuZ2VkLg0KCS8vb25Gb3JtQ2hhbmdlQ2xpY2tFdmVudCgpOw0KfQ0KDQoNCi8qDQogKiBGdW5jdGlvbjogc2hvd1N0YWZmQWRkcmVzc0Jvb2soKQ0KICogUHVycG9zZTogU2hvd3MgdGhlIHN0YWZmIGFkZHJlc3MgYm9vayBmb3Igc2VsZWN0aW5nIHBvc2l0aW9uLg0KICogICAgICAgICAgUmVxdWlyZXMgY2FsbGJhY2sgZnVuY3Rpb24gbmFtZWQ6ICBzdGFmZkFkZHJlc3NCb29rQ2FsbEJhY2socGFyYW1TdGFmZk5hbWUsIHBhcmFtUG9zaXRpb25JZCwgcGFyYW1PcGVuaW5nSWQsIGlkZW50aWZpZXIpDQogKg0KICogQXJndW1lbnRzOiBkaWFsb2dVUkwgPSBEaWFsb2cgVVJMIHRvIHRoZSBhZGRyZXNzIGJvb2ssIGllOiAvb21uaS9jb21tb24vZGlhbG9ncy9yb2xvZGV4UG9wdXAuaHRtDQogKiAgICAgICAgICAgIGlkZW50aWZpZXIgPSBBIHVuaXF1ZSBpZGVudGlmaWVyIG5hbWUgdXNlZCBpbiB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gaWRlbnRpZnkgd2hpY2ggaW5zdGFuY2Ugb2YgdGhlIGRpYWxvZyBpcyBiZWluZyB1c2VkLg0KICogICAgICAgICAgICBzdGFmZkFkZHJlc3NCb29rVHlwZSA9IHR5cGUgb2YgYWRkcmVzcyBib29rLiAgT3B0aW9ucyBhcmUgIkRFRkFVTFQiLCAiU0VMRUNUX1NUQUZGIi4NCiAqICAgICAgICAgICAgc3RhZmZJZCA9IFN0YWZmIElkDQogKiAgICAgICAgICAgIHBvc2l0aW9uSWQgPSBwb3NpdGlvbiBJZA0KICogICAgICAgICAgICBvcGVuaW5nSWQgPSBPcGVuaW5nIElkDQogKiAgICAgICAgICAgIGZpZWxkcyA9IGFuIGFycmF5IG9mIGVsZW1lbnQgaWRzIHRvIHBvcHVsYXRlIG9uIGNhbGxiYWNrDQogKiAgICAgICAgICAgIGVuYWJsZUhpc3RvcmljYWxTdGFmZk9ubHkgPSBhIGJvb2xlYW4uICBJZiB0cnVlLCB3aWxsIHNob3cgYSBjaGVja2JveCBvbiB0aGUgcm9sb2RleCBwb3B1cC4NCiAqICAgICAgICAgICAgaXNTaW1wbGVDYWxsYmFjayAtIGlmIHRydWUsIHRoZSBjYWxsYmFja0Z1bmN0aW9uIHdpbGwgYWNjZXB0IGEgc2luZ2xlIGRhdGEgbWFwIHBhcmFtZXRlciAoanVzdCBsaWtlIGEgdHlwaWNhbCBEV1Igc3VjY2VzcyBjYWxsYmFjayBmdW5jdGlvbikuDQogKiBSZXR1cm5zOiBOb3RoaW5nDQogKiovDQpmdW5jdGlvbiBzaG93U3RhZmZBZGRyZXNzQm9vayhkaWFsb2dVUkwsIGNhbGxiYWNrRnVuY3Rpb24sIHN0YWZmQWRkcmVzc0Jvb2tUeXBlLCBzdGFmZklkLCBwb3NpdGlvbklkLCBvcGVuaW5nSWQsIGZpZWxkcywgZW5hYmxlSGlzdG9yaWNhbFN0YWZmT25seSwgaXNTaW1wbGVDYWxsYmFjaykgew0KICB2YXIgd2luV2lkdGggPSA5MDA7DQogIHZhciB3aW5IZWlnaHQgPSA0MDA7DQoNCg0KICBpZihzdGFmZkFkZHJlc3NCb29rVHlwZSAhPSBudWxsKSB7DQogIAlkaWFsb2dVUkwgPSBkaWFsb2dVUkwgKyAiP3R5cGU9IiArIHN0YWZmQWRkcmVzc0Jvb2tUeXBlOw0KICB9IGVsc2Ugew0KICAJZGlhbG9nVVJMID0gZGlhbG9nVVJMICsgIj90eXBlPURFRkFVTFQiOw0KICB9DQoNCiAgaWYoc3RhZmZJZCAhPSBudWxsKSB7DQogIAlkaWFsb2dVUkwgPSBkaWFsb2dVUkwgKyAiJmlkPSIgKyBzdGFmZklkOw0KICAJaWYocG9zaXRpb25JZCAhPSBudWxsKSB7DQogIAkJZGlhbG9nVVJMID0gZGlhbG9nVVJMICsgIiZwaWQ9IiArIHBvc2l0aW9uSWQ7DQogIAl9DQoNCiAgCWlmKG9wZW5pbmdJZCAhPSBudWxsKSB7DQogIAkJZGlhbG9nVVJMID0gZGlhbG9nVVJMICsgIiZvaWQ9IiArIG9wZW5pbmdJZDsNCiAgCX0NCiAgfQ0KDQogIGlmIChlbmFibGVIaXN0b3JpY2FsU3RhZmZPbmx5ICE9IG51bGwgJiYgZW5hYmxlSGlzdG9yaWNhbFN0YWZmT25seSA9PSAndHJ1ZScpIHsNCgkgIGRpYWxvZ1VSTCA9IGRpYWxvZ1VSTCArICImZW5hYmxlSGlzdD10cnVlIjsNCiAgfQ0KDQogIHZhciByZXQgPSBvcGVuTW9kYWxEaWFsb2coZGlhbG9nVVJMLHdpbldpZHRoLHdpbkhlaWdodCk7DQogIGlmKHJldCAhPSBudWxsKSB7DQogIAlwYXJzZVN0YWZmUmV0dXJuVmFsdWVzVXNpbmdDYWxsYmFjayhyZXQsIGNhbGxiYWNrRnVuY3Rpb24sIGlzU2ltcGxlQ2FsbGJhY2ssIGZpZWxkcyk7DQogIH0NCg0KfQ0KDQovKg0KICogRnVuY3Rpb246IHBhcnNlU3RhZmZSZXR1cm5WYWx1ZXMoKQ0KICogUHVycG9zZTogUGFyc2VzIGRhdGEgcmV0dXJuZWQgZnJvbSBzaG93U3RhZmZBZGRyZXNzQm9vayBmdW5jdGlvbigpLg0KICoNCiAqIEFyZ3VtZW50czogcmVzdWx0cyA9IFVSSSBlbmNvZGVkIGRhdGEgaW4ga2V5L3ZhbHVlIHBhaXJzLg0KICogICAgICAgICAgICBpZGVudGlmaWVyID0gQSB1bmlxdWUgaWRlbnRpZmllciBuYW1lIHVzZWQgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGlkZW50aWZ5IHdoaWNoIGluc3RhbmNlIG9mIHRoZSBkaWFsb2cgaXMgYmVpbmcgdXNlZC4NCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCiBmdW5jdGlvbiBwYXJzZVN0YWZmUmV0dXJuVmFsdWVzVXNpbmdDYWxsYmFjayhyZXN1bHRzLCBjYWxsYmFja0Z1bmN0aW9uLCBpc1NpbXBsZUNhbGxiYWNrLCBmaWVsZHMpIHsNCg0KCXZhciBkYXRhID0ge307DQoNCglpZihyZXN1bHRzICE9IG51bGwgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7DQoJCXZhciBrZXlWYWx1ZUFycmF5ID0gcmVzdWx0cy5zcGxpdCgiJiIpOw0KDQoJCWlmKGtleVZhbHVlQXJyYXkgIT0gbnVsbCkgew0KCQkJZm9yKHZhciBpID0gMDsgaSA8IGtleVZhbHVlQXJyYXkubGVuZ3RoOyBpKyspIHsNCgkJCQl2YXIgZGF0YUFycmF5ID0ga2V5VmFsdWVBcnJheVtpXS5zcGxpdCgiPSIpOw0KDQoJCQkJaWYoZGF0YUFycmF5Lmxlbmd0aCA9PSAyKSB7DQoJCQkJCWlmKGRhdGFBcnJheVswXSA9PSAic3RhZmZOYW1lIikgew0KCQkJCQkJZGF0YS5zdGFmZk5hbWUgPSBkZWNvZGVVUkkoZGF0YUFycmF5WzFdKTsNCgkJCQkJfSBlbHNlIGlmKGRhdGFBcnJheVswXSA9PSAic3RhZmZJZCIpIHsNCgkJCQkJCWRhdGEuc3RhZmZJZCA9IGRlY29kZVVSSShkYXRhQXJyYXlbMV0pOw0KCQkJCQl9IGVsc2UgaWYoZGF0YUFycmF5WzBdID09ICJwb3NpdGlvbklkIikgew0KCQkJCQkJZGF0YS5wb3NpdGlvbklkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gIm9wZW5pbmdJZCIpIHsNCgkJCQkJCWRhdGEub3BlbmluZ0lkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInN0ZlNxbmNOYiIpIHsNCgkJCQkJCWRhdGEuc3RmU3FuY05iID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInBvc2l0aW9uVGl0bGUiKSB7DQoJCQkJCQlkYXRhLnBvc2l0aW9uVGl0bGUgPSBkZWNvZGVVUkkoZGF0YUFycmF5WzFdKTsNCgkJCQkJfSBlbHNlIGlmKGRhdGFBcnJheVswXSA9PSAicG9zaXRpb25GYWNpbGl0eU5hbWUiKSB7DQoJCQkJCQlkYXRhLmZhY2lsaXR5TmFtZSA9IGRlY29kZVVSSShkYXRhQXJyYXlbMV0pOw0KCQkJCQl9IGVsc2UgaWYoZGF0YUFycmF5WzBdID09ICJwb3NpdGlvbkZhY2lsaXR5SWQiKSB7DQoJCQkJCQlkYXRhLmZhY2lsaXR5SWQgPSBkZWNvZGVVUkkoZGF0YUFycmF5WzFdKTsNCgkJCQkJfSBlbHNlIGlmKGRhdGFBcnJheVswXSA9PSAiZmFjaWxpdHlSb2xlSWQiKSB7DQoJCQkJCQlkYXRhLmZhY2lsaXR5Um9sZUlkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInBvc2l0aW9uT2J0c051bWJlciIpIHsNCgkJCQkJCWRhdGEucG9zaXRpb25PYnRzTnVtYmVyID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInBvc2l0aW9uTnVtYmVyIikgew0KCQkJCQkJZGF0YS5wb3NpdGlvbk51bWJlciA9IGRlY29kZVVSSShkYXRhQXJyYXlbMV0pOw0KCQkJCQl9IGVsc2UgaWYoZGF0YUFycmF5WzBdID09ICJpc0hpc3RvcmljYWwiKSB7DQoJCQkJCQlkYXRhLmlzSGlzdG9yaWNhbCA9IGRlY29kZVVSSShkYXRhQXJyYXlbMV0pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoNCgkJaWYoY2FsbGJhY2tGdW5jdGlvbiAhPSB1bmRlZmluZWQpIHsNCgkJCWlmIChpc1NpbXBsZUNhbGxiYWNrICE9IHVuZGVmaW5lZCAmJiBpc1NpbXBsZUNhbGxiYWNrID09ICd0cnVlJykgew0KCQkJCWNhbGxiYWNrRnVuY3Rpb24oZGF0YSk7DQoJCQl9DQoJCQllbHNlIHsNCgkJCQljYWxsYmFja0Z1bmN0aW9uKGRhdGEuc3RhZmZOYW1lLCBkYXRhLnN0YWZmSWQsIGRhdGEucG9zaXRpb25JZCwgZGF0YS5vcGVuaW5nSWQsIGRhdGEucG9zaXRpb25UaXRsZSwgZGF0YS5wb3NpdGlvbk9idHNOdW1iZXIsIGRhdGEuZmFjaWxpdHlJZCwgZGF0YS5mYWNpbGl0eVJvbGVJZCwgZGF0YS5mYWNpbGl0eU5hbWUsIGRhdGEucG9zaXRpb25OdW1iZXIpOw0KCQkJfQ0KCQl9DQoNCgkJLy8gVXBkYXRlIHRoZSBmaWVsZHMgZGlyZWN0bHkgaW5zdGVhZCBvZiBoYXZpbmcgYSBjYWxsYmFja0Z1bmN0aW9uIChpZiB0aGUgZmllbGQgZWxlbSBJRHMgd2VyZSBwYXNzZWQgaW4pDQoJCWlmIChmaWVsZHMgIT0gdW5kZWZpbmVkKSB7DQoJCQlpZiAoZmllbGRzLnN0YWZmTmFtZUVsZW1JRCAhPSB1bmRlZmluZWQpIHsNCgkJCQl2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkcy5zdGFmZk5hbWVFbGVtSUQpOw0KCQkJCWlmIChlbGVtICAhPSB1bmRlZmluZWQpIHsNCgkJCQkJZWxlbS52YWx1ZT1kYXRhLnN0YWZmTmFtZTsNCgkJCQl9DQoJCQkJdXBkYXRlSXNEaXJ0eShlbGVtKTsNCgkJCX0NCgkJCWlmIChmaWVsZHMuc3RhZmZJZEVsZW1JRCAhPSB1bmRlZmluZWQpIHsNCgkJCQl2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkcy5zdGFmZklkRWxlbUlEKTsNCgkJCQlpZiAoZWxlbSAhPSB1bmRlZmluZWQpIHsNCgkJCQkJZWxlbS52YWx1ZT1kYXRhLnN0YWZmSWQ7DQoJCQkJfQ0KCQkJCXVwZGF0ZUlzRGlydHkoZWxlbSk7DQoJCQl9DQoJCQlpZiAoZmllbGRzLnBvc2l0aW9uSWRFbGVtSUQgIT0gdW5kZWZpbmVkKSB7DQoJCQkJdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZHMucG9zaXRpb25JZEVsZW1JRCk7DQoJCQkJaWYgKGVsZW0gIT0gdW5kZWZpbmVkKSB7DQoJCQkJCWVsZW0udmFsdWU9ZGF0YS5wb3NpdGlvbklkOw0KCQkJCX0NCgkJCQl1cGRhdGVJc0RpcnR5KGVsZW0pOw0KCQkJfQ0KCQkJaWYgKGZpZWxkcy5vcGVuaW5nSWRFbGVtSUQgIT0gdW5kZWZpbmVkKSB7DQoJCQkJdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZHMub3BlbmluZ0lkRWxlbUlEKTsNCgkJCQlpZiAoZWxlbSAhPSB1bmRlZmluZWQpIHsNCgkJCQkJZWxlbS52YWx1ZT1kYXRhLm9wZW5pbmdJZDsNCgkJCQl9DQoJCQkJdXBkYXRlSXNEaXJ0eShlbGVtKTsNCgkJCX0NCgkJCWlmIChmaWVsZHMuc3RmU3FuY05iRWxlbUlEICE9IHVuZGVmaW5lZCkgew0KCQkJCXZhciBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRzLnN0ZlNxbmNOYkVsZW1JRCk7DQoJCQkJaWYgKGVsZW0gIT0gdW5kZWZpbmVkKSB7DQoJCQkJCWVsZW0udmFsdWU9ZGF0YS5zdGZTcW5jTmI7DQoJCQkJfQ0KCQkJCXVwZGF0ZUlzRGlydHkoZWxlbSk7DQoJCQl9DQoJCQlpZiAoZmllbGRzLmhpc3RvcmljYWxFbGVtSUQgIT0gdW5kZWZpbmVkKSB7DQoJCQkJdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZHMuaGlzdG9yaWNhbEVsZW1JRCk7DQoJCQkJaWYgKGVsZW0gIT0gdW5kZWZpbmVkKSB7DQoJCQkJCWVsZW0udmFsdWU9ZGF0YS5pc0hpc3RvcmljYWw7DQoJCQkJfQ0KCQkJCXVwZGF0ZUlzRGlydHkoZWxlbSk7DQoJCQl9DQoJCX0NCg0KCQkvLyB1cGRhdGUgaXNEaXJ0eSBpZiB0aGUgZm9ybSBjaGFuZ2VkLg0KCQkvL29uRm9ybUNoYW5nZUNsaWNrRXZlbnQoKTsNCgl9DQoNCn0NCg0KDQovKg0KICogRnVuY3Rpb246IHNob3dTZWxlY3RDYXVzZURpYWxvZygpDQogKiBQdXJwb3NlOiBTaG93cyB0aGUgc2VsZWN0IENhdXNlIERpYWxvZyBmb3Igc2VsZWN0aW5nIHRoZSBPZmZlbmRlciBDYXVzZS4NCiAqICAgICAgICAgIFJlcXVpcmVzIGNhbGxiYWNrRnVuY3Rpb24uICBFeGFtcGxlOiBteUNhbGxCYWNrRnVuY3Rpb24ocGFyYW1VaWQsIHBhcmFtUHJlZml4LCBwYXJhbUNhdXNlTnVtYmVyKTsNCiAqDQogKiBBcmd1bWVudHM6IGRpYWxvZ1VSTCA9IERpYWxvZyBVUkwgdG8gdGhlIGFkZHJlc3MgYm9vaywgaWU6IC9vbW5pL2NvbW1vbi9kaWFsb2dzL3JvbG9kZXhQb3B1cC5odG0NCiAqICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbiA9IHRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHRoaXMgZnVuY3Rpb24gd2UgY2FsbCB3aGVuIGNvbXBsZXRlZC4NCiAqICAgICAgICAgICAgZG9jTnVtYmVyID0gdGhlIERPQyBudW1iZXIgb2YgdGhlIG9mZmVuZGVyDQogKiBSZXR1cm5zOiBOb3RoaW5nDQogKiovDQpmdW5jdGlvbiBzaG93U2VsZWN0Q2F1c2VEaWFsb2coZGlhbG9nVVJMLCBjYWxsYmFja0Z1bmN0aW9uLCBkb2NOdW1iZXIpIHsNCiAgdmFyIHdpbldpZHRoID0gNTAwOw0KICB2YXIgd2luSGVpZ2h0ID0gMjgwOw0KDQogIGlmKGRvY051bWJlciAhPSBudWxsKSB7DQoJZGlhbG9nVVJMID0gZGlhbG9nVVJMICsgIj9pZD0iICsgZG9jTnVtYmVyOw0KICB9DQoNCiAgdmFyIHJldCA9IG9wZW5Nb2RhbERpYWxvZyhkaWFsb2dVUkwsd2luV2lkdGgsd2luSGVpZ2h0KTsNCiAgcGFyc2VTZWxlY3RDYXVzZVJldHVyblZhbHVlcyhyZXQsIGNhbGxiYWNrRnVuY3Rpb24pOw0KfQ0KDQovKg0KICogRnVuY3Rpb246IHBhcnNlU2VsZWN0Q2F1c2VSZXR1cm5WYWx1ZXMoKQ0KICogUHVycG9zZTogUGFyc2VzIGRhdGEgcmV0dXJuZWQgZnJvbSBzaG93U2VsZWN0Q2F1c2VEaWFsb2cgZnVuY3Rpb24oKS4NCiAqDQogKiBBcmd1bWVudHM6IHJlc3VsdHMgPSBVUkkgZW5jb2RlZCBkYXRhIGluIGtleS92YWx1ZSBwYWlycy4NCiAqICAgICAgICAgICAgY2FsbEJhY2tGdW5jdGlvbiA9IHRoZSBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIHBhc3MgdGhlIHBhcmFtZXRlcnMgYmFjay4NCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCmZ1bmN0aW9uIHBhcnNlU2VsZWN0Q2F1c2VSZXR1cm5WYWx1ZXMocmVzdWx0cywgY2FsbEJhY2tGdW5jdGlvbikgew0KDQoJdmFyIHBhcmFtVWlkID0gbnVsbDsNCgl2YXIgcGFyYW1QcmVmaXggPSBudWxsOw0KCXZhciBwYXJhbUNhdXNlTnVtYmVyID0gbnVsbDsNCg0KCWlmKHJlc3VsdHMgIT0gbnVsbCAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHsNCgkJdmFyIGtleVZhbHVlQXJyYXkgPSByZXN1bHRzLnNwbGl0KCImIik7DQoNCgkJaWYoa2V5VmFsdWVBcnJheSAhPSBudWxsKSB7DQoJCQlmb3IodmFyIGkgPSAwOyBpIDwga2V5VmFsdWVBcnJheS5sZW5ndGg7IGkrKykgew0KCQkJCXZhciBkYXRhQXJyYXkgPSBrZXlWYWx1ZUFycmF5W2ldLnNwbGl0KCI9Iik7DQoNCgkJCQlpZihkYXRhQXJyYXkubGVuZ3RoID09IDIpIHsNCgkJCQkJaWYoZGF0YUFycmF5WzBdID09ICJudW0iKSB7DQoJCQkJCQlwYXJhbUNhdXNlTnVtYmVyID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInVpZCIpIHsNCgkJCQkJCXBhcmFtVWlkID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0gZWxzZSBpZihkYXRhQXJyYXlbMF0gPT0gInBmeCIpIHsNCgkJCQkJCXBhcmFtUHJlZml4ID0gZGVjb2RlVVJJKGRhdGFBcnJheVsxXSk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQoJaWYoY2FsbEJhY2tGdW5jdGlvbikgew0KCQljYWxsQmFja0Z1bmN0aW9uKHBhcmFtVWlkLCBwYXJhbVByZWZpeCwgcGFyYW1DYXVzZU51bWJlcik7DQoJfQ0KfQ0KDQovKg0KICogUmVmcmVzaGVzIHRoZSBDdXJyZW50IFBhZ2UuDQogKi8NCmZ1bmN0aW9uIHJlZnJlc2hDdXJyZW50UGFnZSgpIHsNCg0KCWlmKHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQpIHsNCgkJd2luZG93LmxvY2F0aW9uLnJlbG9hZCggZmFsc2UgKTsNCgl9IGVsc2UgaWYod2luZG93LmxvY2F0aW9uLnJlcGxhY2UpIHsNCgkJd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoIHdpbmRvdy5sb2NhdGlvbi5ocmVmICk7DQoJfSBlbHNlIHsNCgkJd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsNCgl9DQp9DQovKg0KCXJvd0NudCwgd2hlbiBtaXNzaW5nIHdpbGwgZGVmYXVsdCB0byAxDQoNCiovDQpmdW5jdGlvbiBhZGRSb3codGJsSWQsIHJvd0NudCwga2VlcFZhbHVlKSB7ICAgIC8vIGNsb25lIGxhc3QgJ3Jvd0NudCcgcm93cyAoZGVmYXVsdD0xKSBhbmQgbW9kaWZ5IHRoZWlyIElEcw0KCXZhciB0YmxCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGJsSWQpLnRCb2RpZXNbMF07DQoJaWYgKCFyb3dDbnQpIHJvd0NudCA9IDE7CS8vIGRlZmF1bHQgdG8gJzEnDQoJaWYgKHJvd0NudCA+IHRibEJvZHkucm93cy5sZW5ndGgpIHJvd0NudCA9IHRibEJvZHkucm93cy5sZW5ndGg7CS8vIHNhbml0eSBjaGVjaw0KCXZhciBmaXJzdE5ld1JvdyA9IHRibEJvZHkucm93cy5sZW5ndGg7DQoJdmFyIGNvcHlSb3cgPSBmaXJzdE5ld1JvdyAtIHJvd0NudDsNCgl2YXIgbmV3Um93TmR4ID0gZmlyc3ROZXdSb3cgLyByb3dDbnQ7DQoJZm9yICggO2NvcHlSb3cgPCBmaXJzdE5ld1JvdzsgY29weVJvdysrICkgewkvLyBmb3IgZWFjaCByb3csIGNsb25lLCBtYXNzYWdlICYgYWRkIHRvIERPTSENCgkJdmFyIG5ld05vZGUgPSB0YmxCb2R5LnJvd3NbY29weVJvd10uY2xvbmVOb2RlKHRydWUpOyAgLy8gY2xvbmUgcm93DQoJCXZhciBjaGlsZHMgPSBuZXdOb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7DQoJCXZhciByb3dTZWxlY3RCb3hJZDsNCgkJdmFyIHJvd1NlbGVjdEJveEV4aXN0cyA9IGZhbHNlOw0KCQlmb3IgKHggPSAwOyB4IDwgY2hpbGRzLmxlbmd0aDsgeCsrKSB7CS8vIGZvciBjaGlsZHMgaW4gcm93LCBtYXNzYWdlIElEIGV0Yw0KCQkJaWYgKGNoaWxkc1t4XS50YWdOYW1lID09ICdJTlBVVCcgfHwgY2hpbGRzW3hdLnRhZ05hbWUgPT0gJ1NFTEVDVCcgfHwgY2hpbGRzW3hdLnRhZ05hbWUgPT0gJ1RFWFRBUkVBJyB8fCBjaGlsZHNbeF0udGFnTmFtZSA9PSAnSU1HJyB8fCBjaGlsZHNbeF0udGFnTmFtZSA9PSAnSU1BR0UnKSB7DQoJCQkJdmFyIGNoaWxkVHlwZSA9ICIiICsgY2hpbGRzW3hdLnR5cGU7DQoJCQkJY2hpbGRUeXBlID0gY2hpbGRUeXBlLnRvVXBwZXJDYXNlKCk7DQoJCQkJaWYgKChjaGlsZFR5cGUgPT0gJ1JBRElPJykgJiYgKGNoaWxkc1t4XS5uYW1lLmluZGV4T2YoIlsiKSA9PSAtMSkpIHsNCgkJCQkJY2hpbGRzW3hdLnZhbHVlID0gIiIgKyBuZXdSb3dOZHg7DQoJCQkJCXZhciBuZXdJZCA9IGNoaWxkc1t4XS5pZC5yZXBsYWNlKC9cZCsvLCIiICsgbmV3Um93TmR4KTsNCgkJCQkJY2hpbGRzW3hdLmlkID0gbmV3SWQ7DQoJCQkJCXJvd1NlbGVjdEJveElkID0gbmV3SWQ7DQoJCQkJCXJvd1NlbGVjdEJveEV4aXN0cyA9IHRydWU7DQoJCQkJfSBlbHNlIGlmIChjaGlsZFR5cGUgPT0gJ0NIRUNLQk9YJykgew0KCQkJCQl2YXIgbmV3SWQgPSBjaGlsZHNbeF0uaWQucmVwbGFjZSgvXGQrLywiIiArIG5ld1Jvd05keCk7DQoJCQkJCXZhciBuZXdOYW1lID0gY2hpbGRzW3hdLm5hbWUucmVwbGFjZSgvXFtcZCtcXS8sIlsiICsgbmV3Um93TmR4ICsgIl0iKTsNCgkJCQkJY2hpbGRzW3hdLmlkID0gbmV3SWQ7DQoJCQkJCWNoaWxkc1t4XS5uYW1lID0gbmV3TmFtZTsNCgkJCQkJY2hpbGRzW3hdLmNoZWNrZWQgPSBmYWxzZTsNCgkJCQl9IGVsc2UgaWYoY2hpbGRzW3hdLnRhZ05hbWUgPT0gJ0lNRycgfHwgY2hpbGRzW3hdLnRhZ05hbWUgPT0gJ0lNQUdFJyB8fCBjaGlsZHNbeF0udGFnTmFtZSA9PSAnU0VMRUNUJykgew0KCQkJCQl2YXIgbmV3SWQgPSBjaGlsZHNbeF0uaWQucmVwbGFjZSgvXGQrLywiIiArIG5ld1Jvd05keCk7DQoJCQkJCXZhciBuZXdOYW1lID0gY2hpbGRzW3hdLm5hbWUucmVwbGFjZSgvXFtcZCtcXS8sIlsiICsgbmV3Um93TmR4ICsgIl0iKTsNCgkJCQkJY2hpbGRzW3hdLmlkID0gbmV3SWQ7DQoJCQkJCWNoaWxkc1t4XS5uYW1lID0gbmV3TmFtZTsNCgkJCQl9IGVsc2Ugew0KCQkJCQl2YXIgbmV3SWQgPSBjaGlsZHNbeF0uaWQucmVwbGFjZSgvXGQrLywiIiArIG5ld1Jvd05keCk7DQoJCQkJCXZhciBuZXdOYW1lID0gY2hpbGRzW3hdLm5hbWUucmVwbGFjZSgvXFtcZCtcXS8sIlsiICsgbmV3Um93TmR4ICsgIl0iKTsNCgkJCQkJY2hpbGRzW3hdLmlkID0gbmV3SWQ7DQoJCQkJCWNoaWxkc1t4XS5uYW1lID0gbmV3TmFtZTsNCgkJCQkJaWYoIWtlZXBWYWx1ZSl7DQoJCQkJCQljaGlsZHNbeF0udmFsdWUgPSAiIjsNCgkJCQkJCWNoaWxkc1t4XS50ZXh0ID0gIiI7DQoJCQkJCX0NCgkJCQl9DQoJCQl9CWVsc2UgaWYgKGNoaWxkc1t4XS5pZCkgewkvLyBtYXNzYWdlIGV4aXN0aW5nIElEcyBvbiBhbGwgb3RoZXIgdGFncw0KCQkJCQljaGlsZHNbeF0uaWQgPSBjaGlsZHNbeF0uaWQucmVwbGFjZSgvXFtcZCtcXS8sIlsiICsgbmV3Um93TmR4ICsgIl0iKTsNCgkJCX0NCgkJfQ0KCQl0YmxCb2R5LmFwcGVuZENoaWxkKG5ld05vZGUpOw0KCQlpZiAocm93U2VsZWN0Qm94RXhpc3RzKSB7DQoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyb3dTZWxlY3RCb3hJZCkuY2hlY2tlZCA9IGZhbHNlOw0KCQl9DQoJCS8vcmV0dXJuIG5ld05vZGU7ICAvL3dlIGNhbid0IHJldHVybiBoZXJlLCBhcyB0aGUgbG9vcCBtYXkgbm90IGJlIGZpbmlzaGVkLg0KCX0gIC8vIGVuZCBmb3IoKQ0KfQ0KDQovLyBOT1QgVVNFRCBBTllNT1JFDQovL3ZhciBfYXNfc2h1dGRvd25UaW1lcklEID0gbnVsbDsNCi8vdmFyIF9hc190aW1lclJ1bm5pbmcgPSBmYWxzZTsNCi8vdmFyIF9hc19hdXRvU2F2ZUZvcm0gPSBudWxsOw0KLy8NCi8vdmFyIF9BU19USU1FT1VUX0RVUkFUSU9OID0gMTAwMCAqIDIwOw0KLy8NCi8vZnVuY3Rpb24gYXV0b1NhdmVJbml0KG9iakZvcm0sIHRpbWVvdXRJbk1pbnV0ZXMpIHsNCi8vCS8vYWxlcnQoIm9iakZvcm09IiArIG9iakZvcm0pOw0KLy8JaWYob2JqRm9ybSA9PSBudWxsKSB7DQovLwkJcmV0dXJuIGZhbHNlOw0KLy8JfSBlbHNlIHsNCi8vCQlfYXNfYXV0b1NhdmVGb3JtID0gb2JqRm9ybTsNCi8vCX0NCi8vDQovLwlpZih0aW1lb3V0SW5NaW51dGVzICE9IG51bGwpIHsNCi8vCQlfQVNfVElNRU9VVF9EVVJBVElPTiA9IHRpbWVvdXRJbk1pbnV0ZXMgKiA2MCAqIDEwMDA7DQovLwkJLy8gX0FTX1RJTUVPVVRfRFVSQVRJT04gPSAyMCAqIDEwMDA7DQovLwl9DQovLwkvL2FsZXJ0KCJfQVNfVElNRU9VVF9EVVJBVElPTj0iICsgX0FTX1RJTUVPVVRfRFVSQVRJT04pOw0KLy8NCi8vCS8vIFNldCB1cCByZXNldHRpbmcgb2YgdGhlICJ0aW1lb3V0IiB3aGVuIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggdGhlIGRvY3VtZW50Lg0KLy8JLy9hZGRFdmVudCh3aW5kb3csICdtb3VzZWRvd24nLCByZXNldEF1dG9TdWJtaXRUaW1lciwgZmFsc2UpOw0KLy8JLy9hZGRFdmVudCh3aW5kb3csICdrZXlkb3duJywgcmVzZXRBdXRvU3VibWl0VGltZXIsIGZhbHNlKTsNCi8vDQovLwlkb2N1bWVudC5vbm1vdXNlZG93biA9IHJlc2V0QXV0b1N1Ym1pdFRpbWVyOw0KLy8JZG9jdW1lbnQub25rZXlkb3duID0gcmVzZXRBdXRvU3VibWl0VGltZXI7DQovLw0KLy8JLy9hbGVydCgiZXZlbnRzIGFkZGVkLiIpOw0KLy8NCi8vCXN0YXJ0QXV0b1N1Ym1pdFRpbWVyKCk7DQovLw0KLy8NCi8vfQ0KLy8NCi8vLyoqDQovLyAqIFN0YXJ0cyB0aGUgdGltZXIgcnVubmluZyB3aGljaCBsb2dzIG91dCB0aGUgdXNlciBhZnRlciBhIHBlcmlvZCBvZiBpbmFjdGl2aXR5Lg0KLy8gKi8NCi8vZnVuY3Rpb24gc3RhcnRBdXRvU3VibWl0VGltZXIoKQ0KLy97DQovLwlpZiAoIV9hc190aW1lclJ1bm5pbmcpDQovLwl7DQovLwkJX2FzX3RpbWVyUnVubmluZyA9IHRydWU7DQovLwkJX2FzX3NodXRkb3duVGltZXJJRCA9IHNldFRpbWVvdXQoInRpbWVkT3V0KCkiLCBfQVNfVElNRU9VVF9EVVJBVElPTik7DQovLwl9DQovL30NCi8vDQovL2Z1bmN0aW9uIHRpbWVkT3V0KCkgew0KLy8JdmFyIG9iakZvcm0gPSBfYXNfYXV0b1NhdmVGb3JtOw0KLy8NCi8vCWlmKG9iakZvcm0gIT0gbnVsbCkgew0KLy8JCS8vYWxlcnQoIm9iakZvcm0uaXNEaXJ0eS52YWx1ZT0iICsgb2JqRm9ybS5pc0RpcnR5LnZhbHVlICsgIiwgaGFzRm9ybUNoYW5nZWQob2JqRm9ybSk9IiArIGhhc0Zvcm1DaGFuZ2VkKG9iakZvcm0pKTsNCi8vCQlpZigob2JqRm9ybS5pc0RpcnR5ICYmIG9iakZvcm0uaXNEaXJ0eS52YWx1ZSA9PSAndHJ1ZScpIHx8IGhhc0Zvcm1DaGFuZ2VkKG9iakZvcm0pKSB7DQovLwkJCS8vYWxlcnQoJ0Zvcm0gYWJvdXQgdG8gc3VibWl0Li4uJyk7DQovLwkJCWlmKHdpbmRvdy5mb3JtQXV0b1N1Ym1pdCkgew0KLy8JCQkJZm9ybUF1dG9TdWJtaXQoKTsNCi8vCQkJfQ0KLy8JCX0NCi8vCX0NCi8vfQ0KLy8NCi8vLyoqDQovLyAqIFJlc2V0cyB0aGUgdGltZXIuVGhpcyBpcyBjYWxsZWQgaWYgdGhlIHVzZXIgZG9lcyBzb21lIGFjdGlvbi4NCi8vICoNCi8vICogQHBhcmFtIGUgdGhlIGV2ZW50IHdoaWNoIHRyaWdnZXJzIHRoZSBtZXRob2QgY2FsbCAoa2V5cHJlc3MsIG1vdXNlZG93biwgZXRjLikNCi8vICovDQovL2Z1bmN0aW9uIHJlc2V0QXV0b1N1Ym1pdFRpbWVyKGUpIHsNCi8vCS8vYWxlcnQoInJlc2V0QXV0b1N1Ym1pdFRpbWVyKCkgY2FsbGVkLiIpOw0KLy8JaWYgKF9hc190aW1lclJ1bm5pbmcpIHsNCi8vCQljbGVhclRpbWVvdXQoX2FzX3NodXRkb3duVGltZXJJRCk7DQovLwkJX2FzX3RpbWVyUnVubmluZyA9IGZhbHNlOw0KLy8JfQ0KLy8Jc3RhcnRBdXRvU3VibWl0VGltZXIoKTsNCi8vfQ0KDQovKg0KICogRnVuY3Rpb246IHB1cmdlU2VsZWN0TGlzdChvYmpTZWxlY3RMaXN0KQ0KICogUHVycG9zZTogUmVtb3ZlIGVhY2ggb3B0aW9uIGZvciB0aGUgPFNFTEVDVD4gTGlzdA0KICogQXJndW1lbnRzOiBPYmplY3QNCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCmZ1bmN0aW9uIHB1cmdlU2VsZWN0TGlzdChvYmpTZWxlY3RMaXN0KSB7DQoJdmFyIG51bSA9IG9ialNlbGVjdExpc3Qub3B0aW9ucy5sZW5ndGg7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykgew0KCQlvYmpTZWxlY3RMaXN0Lm9wdGlvbnMucmVtb3ZlKDApOw0KCX0NCn0NCg0KLyoNCiAqIEZ1bmN0aW9uOiBhZGRPcHRpb25Ub1NlbGVjdExpc3Qob2JqU2VsZWN0TGlzdCwgc3RyVGV4dCwgc3RyVmFsdWUsIGJsbkFkZFRvdGhlQmVnaW5uaW5nKQ0KICogUHVycG9zZTogYWRkcyBhbiA8T1BUSU9OPiB0byBhIHNlbGVjdCBsaXN0DQogKiBBcmd1bWVudHM6IE9iamVjdCwgU3RyaW5nLCBTdHJpbmcsIEJvb2xlYW4NCiAqIFJldHVybnM6IE5vdGhpbmcNCiAqKi8NCmZ1bmN0aW9uIGFkZE9wdGlvblRvU2VsZWN0TGlzdChvYmpTZWxlY3RMaXN0LCBzdHJUZXh0LCBzdHJWYWx1ZSwgYmxuQWRkVG90aGVCZWdpbm5pbmcpIHsNCg0KCS8qIENyZWF0ZSBOZXcgRWxlbWVudCAqLw0KCXZhciBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiT1BUSU9OIik7DQoJbmV3RWxlbWVudC50ZXh0ID0gc3RyVGV4dDsNCgluZXdFbGVtZW50LnZhbHVlID0gc3RyVmFsdWU7DQoNCgkvKiBhZGQgaXQgdG8gdGhlIG9wdGlvbnMgbGlzdCAqLw0KCWlmIChibG5BZGRUb3RoZUJlZ2lubmluZykgew0KCQlvYmpTZWxlY3RMaXN0Lm9wdGlvbnMuYWRkKG5ld0VsZW1lbnQsIDApOw0KCX0gZWxzZSB7DQoJCW9ialNlbGVjdExpc3Qub3B0aW9ucy5hZGQobmV3RWxlbWVudCk7DQoJfQ0KfQ0KDQoNCjwhLS0gU29ydCBhbHBoYWJldGljYWxseSBvciBudW1lcmljYWxseSBTVEFSVCAtLT4NCi8vIFF1aXRlIEZhc3Qgd2F5IG9mIHNvcnRpbmcgYmlnIG9wdGlvbiBsaXN0cw0KLy8gSW50U29ydDogYm9vbGVhbiAtIHRydWUgPSBudW1lcmljYWwgc29ydDsgZmFsc2UgPSB0ZXh0IHNvcnQNCi8vIFVzZVZhbHM6IGJvb2xlYW4gLSB0cnVlID0gc29ydCB0aGUgb3B0aW9uIGxpc3QgYmFzZWQgb24gaXRzIHVuZGVybHlpbmcgdmFsdWUsIGFzIG9wcG9zZWQgdG8gdGhlIGRpc3BsYXllZCB2YWx1ZQ0KZnVuY3Rpb24gU29ydExpc3QoQ29tYm8sIEludFNvcnQsIFVzZVZhbHMpew0KDQogICAgdmFyIGNtYlRleHQgPSBuZXcgQXJyYXkoQ29tYm8ub3B0aW9ucy5sZW5ndGgpOw0KICAgIHZhciBjbWJJdGVtczsNCg0KICAgIC8vIGdldCBjb3B5IG9mDQogICAgZm9yICh4PTA7IHg8Y21iVGV4dC5sZW5ndGg7IHgrKyl7DQogICAgICAgIGNtYlRleHRbeF09KFVzZVZhbHMpP0NvbWJvLm9wdGlvbnNbeF0udmFsdWUgKyAieyIgKyBDb21iby5vcHRpb25zW3hdLnRleHQ6Q29tYm8ub3B0aW9uc1t4XS50ZXh0ICsgInsiICsgQ29tYm8ub3B0aW9uc1t4XS52YWx1ZTsNCiAgICAgICAgfQ0KCS8vYWxlcnQoY21iVGV4dCk7DQoJLy9jbWJUZXh0LnNvcnQoY3VzdG9tQ29tcGFyZSk7DQogICAgaWYgKEludFNvcnQpDQogICAgICAgIGNtYlRleHQuc29ydChMaXN0Q29tcGFyZU51bXMpOw0KICAgIGVsc2UNCiAgICAgICAgY21iVGV4dC5zb3J0KExpc3RDb21wYXJlVGV4dCk7DQoNCiAgICAvL3JlYnVpbGQgbWFpbiBsaXN0LCBidXQgZG9uJ3QgcmVkaW1lbnNpb24gaXQNCiAgICBmb3IgKHg9MDsgeDxjbWJUZXh0Lmxlbmd0aDsgeCsrKXsNCiAgICAgICAgY21iSXRlbXMgPSBjbWJUZXh0W3hdLnNwbGl0KCJ7Iik7DQogICAgICAgIENvbWJvLm9wdGlvbnNbeF0udGV4dD0oVXNlVmFscyk/Y21iSXRlbXNbMV06Y21iSXRlbXNbMF07DQogICAgICAgIENvbWJvLm9wdGlvbnNbeF0udmFsdWU9KFVzZVZhbHMpP2NtYkl0ZW1zWzBdOmNtYkl0ZW1zWzFdOw0KICAgIH0NCn0NCg0KLy8gQ29tcGFyZSBmdW5jdGlvbnMgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBTb3J0TGlzdCByb3V0aW5lDQpmdW5jdGlvbiBMaXN0Q29tcGFyZU51bXMoYSxiKQ0Kew0KCWlmIChhID09IG51bGwpDQogIAl7DQogICAgICByZXR1cm4gMDsNCiAgIAl9DQogICAJZWxzZSBpZiAoYiA9PSBudWxsKQ0KICAgCXsNCiAgICAgIHJldHVybiAtMTsNCiAgIAl9DQogICAJZWxzZSBpZiAoYSA9PSBudWxsICYmIGIgPT0gbnVsbCkNCiAgIAl7DQogICAgICAJcmV0dXJuIDA7DQogICAJfQ0KDQogICAgdmFyIGxhID0gcGFyc2VJbnQoYS5zcGxpdCgieyIpWzBdKTsNCiAgICB2YXIgbGIgPSBwYXJzZUludChiLnNwbGl0KCJ7IilbMF0pOw0KICAgIGlmIChsYSA8IGxiKSByZXR1cm4gLTE7DQogICAgaWYgKGxhID4gbGIpIHJldHVybiAxDQogICAgcmV0dXJuIDA7DQp9DQpmdW5jdGlvbiBMaXN0Q29tcGFyZVRleHQoYSxiKQ0Kew0KCWlmIChhID09IG51bGwpDQogIAl7DQogICAgICByZXR1cm4gMDsNCiAgIAl9DQogICAJZWxzZSBpZiAoYiA9PSBudWxsKQ0KICAgCXsNCiAgICAgIHJldHVybiAtMTsNCiAgIAl9DQogICAJZWxzZSBpZiAoYSA9PSBudWxsICYmIGIgPT0gbnVsbCkNCiAgIAl7DQogICAgICAJcmV0dXJuIDA7DQogICAJfQ0KDQoJdmFyIGxhID0gYS5zcGxpdCgieyIpWzFdOw0KCXZhciBsYiA9IGIuc3BsaXQoInsiKVsxXTsNCiAgICBsYSA9IHN0cmlwVG9BbHBoYU51bWVyaWMobGEudG9Mb3dlckNhc2UoKSk7DQogICAgbGIgPSBzdHJpcFRvQWxwaGFOdW1lcmljKGxiLnRvTG93ZXJDYXNlKCkpOw0KICAgIGlmIChsYSA8IGxiKSByZXR1cm4gLTE7DQogICAgaWYgKGxhID4gbGIpIHJldHVybiAxDQoNCiAgICByZXR1cm4gMDsNCn0NCg0KZnVuY3Rpb24gc3RyaXBUb0FscGhhTnVtZXJpYyh0b1N0cmlwKXsNCiAgCXZhciByZSA9IG5ldyBSZWdFeHAoIlteMC05QS1aYS16XSIsICJnIik7DQogIAl0b1N0cmlwID0gdG9TdHJpcC5yZXBsYWNlKHJlLCAiIik7DQogIAlyZXR1cm4gdG9TdHJpcDsNCn0NCg0KPCEtLSBTb3J0IGFscGhhYmV0aWNhbGx5IG9yIG51bWVyaWNhbGx5IEVORCAtLT4NCg0KZnVuY3Rpb24gYWRkU2luZ2xlQ2hyb25vRXZlbnQoZG9jTmIpew0KCWlmIChkb2NOYiAhPSB1bmRlZmluZWQpIHsNCgkJdXJsID0gIi9vbW5pL2Nocm9ub3MvY2hyb25vc0FkZFNpbmdsZS5odG0/ZG9jTmI9IiArIGRvY05iOw0KCX0gZWxzZSB7DQoJCXVybCA9ICIvb21uaS9jaHJvbm9zL2Nocm9ub3NBZGRTaW5nbGUuaHRtIjsNCgl9DQoJLy9maXggZm9yIGRlZmVjdCA5NDQ4IC0gcmVzaXplIHRoZSBhZGQgY2hyb25vIHdpbmRvdyAoYWRkIDI1IHBpeGVscyB0byBoZWlnaHQpIHNvIGJ1dHRvbnMgZGlzcGxheS4uIGNoYW5nZSB0b3AgcG9zaXRpb24gdG8gMA0KCS8vdmFyIHBvcFVwV2luZG93ID0gb3BlblBvcFVwV2luZG93V2l0aFNpemVUb3AoJ0FkZFNpbmdsZUNocm9ubycsICc5MDAnLCAnNzI1JywgJzAnKTsNCg0KCXZhciB3aWR0aCA9ICc5MDAnOw0KCXZhciBoZWlnaHQgPSAnNzI1JzsNCgl2YXIgdG9wID0gJzAnOwkNCgkNCgkvL3BvcFVwV2luZG93LmRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB1cmw7DQoJLy9vcGVuTW9kYWxEaWFsb2codXJsLCA5MDAsIDcyNSk7CQ0KCXZhciBwb3B1cFdpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGgvMikgLSAoNDAwICsgMTApOw0KCXZhciBwb3B1cEhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodC8yKSAtICgzMDAgKyA1MCk7DQogICAgLy9zZW5kIHNlc3Npb25Ccm93c2VySWQgdG8gc2VydmxldCBiZWZvcmUgb3BlbiBuZXcgd2luZG93DQogICAgcHJvY2Vzc0FqYXhTZXJ2bGV0KCk7DQogICAgLy9DUSAzMDQ3MyBJRTExIC0gQ2hyb25vcyAtIE9uY2UgU3BlbGwgY2hlY2sgY29tcGxldGVzLCBPTU5JIHNjcmVlbiBpcyBkaXNwbGF5ZWQgaW5zdGVhZCBvZiAnQWRkIE5ldyBDaHJvbm8nIHBvcC11cCB3aW5kb3cNCiAgICB2YXIgcG9wVXBXaW5kb3cgPSAgd2luZG93Lm9wZW4odXJsLCJBZGRTaW5nbGVDaHJvbm8iICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbkJyb3dzZXJJZCIpLCJkaXJlY3Rvcmllcz1ubyxoZWlnaHQ9IiArIGhlaWdodCArICIsbGVmdD0iICsgcG9wdXBXaWR0aCArICIsbG9jYXRpb249bm8sbWVudWJhcj0wLHJlc2l6YWJsZT0wLHNjcmVlblg9IiArIHBvcHVwV2lkdGggKyAiLHNjcmVlblk9IiArIHBvcHVwSGVpZ2h0ICsgIixzY3JvbGxiYXJzPXllcyxzdGF0dXM9MCx0b29sYmFyPTAsdG9wPSIrIHRvcCArICIsd2lkdGg9IiArIHdpZHRoKTsNCiAgICBwb3BVcFdpbmRvdy5mb2N1cygpOw0KCXJldHVybiBmYWxzZTsNCn0NCg0KIGZ1bmN0aW9uIGFkZE11bHRpQ2hyb25vRXZlbnQoKXsJIA0KCS8vb3Blbk1vZGFsRGlhbG9nKCcvb21uaS9jaHJvbm9zL2Nocm9ub3NBZGRNdWx0aXBsZS5odG0nLCA5MDAsIDcwMCk7CQ0KCXZhciBwb3BVcFdpbmRvdyA9IG9wZW5Qb3BVcFdpbmRvdygnQWRkTXVsdHlDaHJvbm8nKTsNCgkvL3BvcFVwV2luZG93LmRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSIvb21uaS9jaHJvbm9zL2Nocm9ub3NBZGRNdWx0aXBsZS5odG0iOw0KCQ0KCXZhciBwb3B1cFdpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGgvMikgLSAoNDAwICsgMTApOw0KCXZhciBwb3B1cEhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodC8yKSAtICgzMDAgKyA1MCk7DQoJdmFyIHdpZHRoID0gJzkwMCc7DQoJdmFyIGhlaWdodCA9ICc3MDAnOw0KCQ0KICAgIC8vc2VuZCBzZXNzaW9uQnJvd3NlcklkIHRvIHNlcnZsZXQgYmVmb3JlIG9wZW4gbmV3IHdpbmRvdw0KICAgIHByb2Nlc3NBamF4U2VydmxldCgpOw0KICAgIC8vQ1EgMzA0NzMgSUUxMSAtIENocm9ub3MgLSBPbmNlIFNwZWxsIGNoZWNrIGNvbXBsZXRlcywgT01OSSBzY3JlZW4gaXMgZGlzcGxheWVkIGluc3RlYWQgb2YgJ0FkZCBOZXcgQ2hyb25vJyBwb3AtdXAgd2luZG93DQogICAgdmFyIHBvcFVwV2luZG93ID0gd2luZG93Lm9wZW4oIi9vbW5pL2Nocm9ub3MvY2hyb25vc0FkZE11bHRpcGxlLmh0bSIsIkFkZE11bHR5Q2hyb25vIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInNlc3Npb25Ccm93c2VySWQiKSwiZGlyZWN0b3JpZXM9bm8saGVpZ2h0PSIgKyBoZWlnaHQgKyAiLGxlZnQ9IiArIHBvcHVwV2lkdGggKyAiLGxvY2F0aW9uPW5vLG1lbnViYXI9MCxyZXNpemFibGU9MCxzY3JlZW5YPSIgKyBwb3B1cFdpZHRoICsgIixzY3JlZW5ZPSIgKyBwb3B1cEhlaWdodCArICIsc2Nyb2xsYmFycz15ZXMsc3RhdHVzPTAsdG9vbGJhcj0wLHRvcD0iICsgcG9wdXBIZWlnaHQgKyAiLHdpZHRoPSIgKyB3aWR0aCk7DQogICAgcG9wVXBXaW5kb3cuZm9jdXMoKTsNCglyZXR1cm4gZmFsc2U7DQogfQ0KDQogZnVuY3Rpb24gc2hvd0R5bmFtaWNEaWFsb2codXJsLCB3aW5XaWR0aCwgd2luSGVpZ2h0LCBzdHJNZXNzYWdlLCBidXR0b25PcHRpb25zKSB7DQogCSB2YXIgYXJncyA9IG5ldyBBcnJheSgpOw0KIAkgYXJnc1swXSA9IHN0ck1lc3NhZ2U7DQogCSBmb3IodmFyIGkgPSAxLCBqID0gNDsgaiA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKywgaisrKSB7DQogCSAJYXJnc1tpXSA9IGFyZ3VtZW50c1tqXTsNCiAJIH0NCiAgICAgdmFyIHJldCA9IG9wZW5Nb2RhbERpYWxvZzIoZGlhbG9nVVJMLGFyZ3Msd2luV2lkdGgsd2luSGVpZ2h0LCc7cmVzaXphYmxlOjA7Jyk7DQogCSByZXR1cm4gcmV0Ow0KIH0NCg0KICBmdW5jdGlvbiBvcGVuUG9wVXBXaW5kb3dXaXRoU2l6ZVRvcChtZXNzYWdlLCB3aWR0aCwgaGVpZ2h0LCB0b3ApIHsNCgl2YXIgcG9wdXBXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoLzIpIC0gKDQwMCArIDEwKTsNCgl2YXIgcG9wdXBIZWlnaHQgPSAod2luZG93LnNjcmVlbi5oZWlnaHQvMikgLSAoMzAwICsgNTApOw0KICAgIC8vc2VuZCBzZXNzaW9uQnJvd3NlcklkIHRvIHNlcnZsZXQgYmVmb3JlIG9wZW4gbmV3IHdpbmRvdw0KICAgIHByb2Nlc3NBamF4U2VydmxldCgpOw0KICAgIC8vZGVmZWN0IDI1ODI5IElFIFRhYnMgLSBQcmludCBDRlAgU3VtbWFyeSAtIFBvcHVwIHdpbmRvdyBkb2VzIG5vdCB1cGRhdGUgd2hlbiBjbGlja2luZyBmcm9tIG90aGVyIHRhYnMNCiAgICAvL2FkZGVkIHNlc3Npb24gYnJvd3NlciBpZCB0byB0aGUgd2luZG93IG5hbWUgdG8gbWFrZSBpdCB1bmlxdWUNCiAgICAvL2RlZmVjdCAyNTg2NyBPTU5JIC0gQ2Fubm90IE9wZW4gT2ZmZW5kZXIgUmVwb3J0cyBmb3IgTXVsdGlwbGUgRE9DIG51bWJlcnMgaW5zaWRlIE9NTkkgSW4gTTM0IENPTlYNCgkvL2lmIG5vIG5hbWUgZm9yIG5ldyB3aW5kb3cgZG9uJ3QgYWRkIHNlc3Npb24gc3RvcmFnZSBpZCB0byBzdHJuZXd3aW5kb3duYW1lDQogICAgLy9kZWZlY3QgMjU4OTMgYWRkZWQgbnVsbCBjaGVjaw0KICAgIGlmIChtZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5sZW5ndGggPiAwKQ0KICAgIHsNCiAgICAJcmV0dXJuIHdpbmRvdy5vcGVuKCIiLG1lc3NhZ2UgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uQnJvd3NlcklkIiksImRpcmVjdG9yaWVzPW5vLGhlaWdodD0iICsgaGVpZ2h0ICsgIixsZWZ0PSIgKyBwb3B1cFdpZHRoICsgIixsb2NhdGlvbj1ubyxtZW51YmFyPTAscmVzaXphYmxlPTAsc2NyZWVuWD0iICsgcG9wdXBXaWR0aCArICIsc2NyZWVuWT0iICsgcG9wdXBIZWlnaHQgKyAiLHNjcm9sbGJhcnM9eWVzLHN0YXR1cz0wLHRvb2xiYXI9MCx0b3A9IisgdG9wICsgIix3aWR0aD0iICsgd2lkdGgpOw0KICAgIH0gZWxzZQ0KCXsNCiAgICAJcmV0dXJuIHdpbmRvdy5vcGVuKCIiLG1lc3NhZ2UsImRpcmVjdG9yaWVzPW5vLGhlaWdodD0iICsgaGVpZ2h0ICsgIixsZWZ0PSIgKyBwb3B1cFdpZHRoICsgIixsb2NhdGlvbj1ubyxtZW51YmFyPTAscmVzaXphYmxlPTAsc2NyZWVuWD0iICsgcG9wdXBXaWR0aCArICIsc2NyZWVuWT0iICsgcG9wdXBIZWlnaHQgKyAiLHNjcm9sbGJhcnM9eWVzLHN0YXR1cz0wLHRvb2xiYXI9MCx0b3A9IisgdG9wICsgIix3aWR0aD0iICsgd2lkdGgpOw0KCX0NCg0KDQogfQ0KDQoNCiBmdW5jdGlvbiBvcGVuUG9wVXBXaW5kb3dXaXRoU2l6ZShtZXNzYWdlLCB3aWR0aCwgaGVpZ2h0KSB7DQoJdmFyIHBvcHVwV2lkdGggPSAod2luZG93LnNjcmVlbi53aWR0aC8yKSAtICg0MDAgKyAxMCk7DQoJdmFyIHBvcHVwSGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0LzIpIC0gKDMwMCArIDUwKTsNCiAgICAvL3NlbmQgc2Vzc2lvbkJyb3dzZXJJZCB0byBzZXJ2bGV0IGJlZm9yZSBvcGVuIG5ldyB3aW5kb3cNCiAgICBwcm9jZXNzQWpheFNlcnZsZXQoKTsNCiAgICAvL2RlZmVjdCAyNTgyOSBJRSBUYWJzIC0gUHJpbnQgQ0ZQIFN1bW1hcnkgLSBQb3B1cCB3aW5kb3cgZG9lcyBub3QgdXBkYXRlIHdoZW4gY2xpY2tpbmcgZnJvbSBvdGhlciB0YWJzDQogICAgLy9hZGRlZCBzZXNzaW9uIGJyb3dzZXIgaWQgdG8gdGhlIHdpbmRvdyBuYW1lIHRvIG1ha2UgaXQgdW5pcXVlDQogICAgLy9kZWZlY3QgMjU4NjcgT01OSSAtIENhbm5vdCBPcGVuIE9mZmVuZGVyIFJlcG9ydHMgZm9yIE11bHRpcGxlIERPQyBudW1iZXJzIGluc2lkZSBPTU5JIEluIE0zNCBDT05WDQoJLy9pZiBubyBuYW1lIGZvciBuZXcgd2luZG93IGRvbid0IGFkZCBzZXNzaW9uIHN0b3JhZ2UgaWQgdG8gc3RybmV3d2luZG93bmFtZQ0KICAgIC8vZGVmZWN0IDI1ODkzIGFkZGVkIG51bGwgY2hlY2sNCiAgICBpZiAobWVzc2FnZSAhPSBudWxsICYmIG1lc3NhZ2UubGVuZ3RoID4gMCkNCiAgICB7DQogICAgCXJldHVybiB3aW5kb3cub3BlbigiIixtZXNzYWdlICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbkJyb3dzZXJJZCIpLCJkaXJlY3Rvcmllcz1ubyxoZWlnaHQ9IiArIGhlaWdodCArICIsbGVmdD0iICsgcG9wdXBXaWR0aCArICIsbG9jYXRpb249bm8sbWVudWJhcj0wLHJlc2l6YWJsZT0wLHNjcmVlblg9IiArIHBvcHVwV2lkdGggKyAiLHNjcmVlblk9IiArIHBvcHVwSGVpZ2h0ICsgIixzY3JvbGxiYXJzPXllcyxzdGF0dXM9MCx0b29sYmFyPTAsdG9wPSIgKyBwb3B1cEhlaWdodCArICIsd2lkdGg9IiArIHdpZHRoKTsNCiAgICB9IGVsc2UNCgl7DQogICAgCXJldHVybiB3aW5kb3cub3BlbigiIixtZXNzYWdlLCJkaXJlY3Rvcmllcz1ubyxoZWlnaHQ9IiArIGhlaWdodCArICIsbGVmdD0iICsgcG9wdXBXaWR0aCArICIsbG9jYXRpb249bm8sbWVudWJhcj0wLHJlc2l6YWJsZT0wLHNjcmVlblg9IiArIHBvcHVwV2lkdGggKyAiLHNjcmVlblk9IiArIHBvcHVwSGVpZ2h0ICsgIixzY3JvbGxiYXJzPXllcyxzdGF0dXM9MCx0b29sYmFyPTAsdG9wPSIgKyBwb3B1cEhlaWdodCArICIsd2lkdGg9IiArIHdpZHRoKTsNCgl9DQoNCiB9DQoNCiBmdW5jdGlvbiBvcGVuUG9wVXBXaW5kb3cobWVzc2FnZSkgew0KIAkvL3VzZSBkZWZhdWx0IHBvcHVwIHdpbmRvd3Mgc2l6ZSB2YWx1ZXMNCglyZXR1cm4gb3BlblBvcFVwV2luZG93V2l0aFNpemUobWVzc2FnZSwgIjkwMCIsICI3MDAiKTsNCiB9DQoNCiBmdW5jdGlvbiBkaXNhYmxlUG9wVXBDbGljaygpIHsNCiAgIGFsZXJ0KCJUaGUgbGluayBpcyBkaXNhYmxlIGluIHBvcCB1cCB3aW5kb3cuIik7DQogcmV0dXJuIGZhbHNlOw0KIH0NCg0KIGZ1bmN0aW9uIGRpc2FibGVMaW5rKHRoaXNMaW5rKSB7DQogCWlmKHRoaXNMaW5rICE9IG51bGwpIHsNCiAJCXRoaXNMaW5rLm9uY2xpY2sgPSB2b2lkQWN0aW9uOw0KIAkJdGhpc0xpbmsuc3R5bGUuY29sb3I9JyNjY2NjOTknOw0KIAl9DQogfQ0KDQoNCmZ1bmN0aW9uIGdldEVsZW1lbnRzT2ZUaGVDbGFzc05hbWUobmFtZSkgew0KCS8vYWxlcnQobmFtZSk7DQoNCgkvLyBEZWZlY3QgMTIyNzkNCgkvL2ZpeCBmb3IgMTI2NDcgLSBhbHNvIGNoZWNrIHRvIG1ha2Ugc3VyZSBpZCBpcyBub3QgZW1wdHkgc3RyaW5nDQoJZm9yKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZG9jdW1lbnQuZm9ybXMubGVuZ3RoOyAgIGluZGV4KyspIHsNCgkJaWYoZG9jdW1lbnQuZm9ybXNbaW5kZXhdICE9IG51bGwgJiYgZG9jdW1lbnQuZm9ybXNbaW5kZXhdLmlkICE9IG51bGwgJiYgZG9jdW1lbnQuZm9ybXNbaW5kZXhdLmlkICE9ICcnKSB7DQoJCQkvL2FsZXJ0KCJkaXNhYmxlU3VibWl0QnV0dG9ucy0+Iitkb2N1bWVudC5mb3Jtc1tpbmRleF0uaWQpDQoJCQlkaXNhYmxlU3VibWl0QnV0dG9ucyhkb2N1bWVudC5mb3Jtc1tpbmRleF0uaWQpOw0KCQl9DQoJfQ0KDQoJdmFyIGZpbmRTdGFjayA9IFtdLCBhbGxlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIik7DQoJICB2YXIgbGVuID0gYWxsZWwubGVuZ3RoOw0KCSAgLy9hbGVydChsZW4pOw0KCQlmb3IodmFyIGEgPSAwOyBhPGFsbGVsLmxlbmd0aDsgYSsrKSB7DQoJCQlpZihhbGxlbFthXS5jbGFzc05hbWUgPT0gbmFtZSl7DQoJCQkJLy9hbGVydCgibWF0Y2hlZCIpOw0KCQkJCWdldEFsbChhbGxlbFthXSk7DQoJCQl9DQoJCX0NCglyZXR1cm4gZmluZFN0YWNrOw0KfQ0KDQovL2ZpeCBmb3IgZGVmZWN0IDEyNzA3IC0gd2UgYXJlIHdyYXBwaW5nIHRoZSBsb2NhdGlvbiByZXNldCBpbnRvIGEgZnVuY3Rpb24gc28gd2UgY2FuIG92ZXJyaWRlIHRoZSB1cmwuDQpmdW5jdGlvbiByZXNldFVybCh1cmwpIHsNCgkvL3NldCB0aGUgdXJsDQoJLy9zZWxmLmxvY2F0aW9uPXVybDsNCg0KCS8vIENRMjE2MTggc2V0dGluZyB0aGUgbG9jYXRpb24gZG9lcyBub3Qgd29yayBmb3IgbW9kZWwgd2luZG93cyBpbiBJRSAodGhvdSBpdCBkb2VzIGluIEZGKQ0KCS8vIFRoZSBoYWNreSBmaXggZm9yIElFIGlzIHRvIGNyZWF0ZSBhbiBocmVmIGFuY2hvciB0YWcgYW5kIHByb2dyYW1hdGljYWxseSBjbGljayB0aGUgbGluaw0KCXZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ19kaXNwbGF5VGFibGVTdWJtaXQnKTsNCglpZiAoYSA9PSBudWxsKSB7DQoJCWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQoJCWEuaWQgPSAnX2Rpc3BsYXlUYWJsZVN1Ym1pdCc7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uYXBwZW5kQ2hpbGQoYSk7DQoJfQ0KCWlmIChhLmNsaWNrKSB7IC8vIGNsaWNrIGlzIGFuIElFIG9ubHkgbWV0aG9kDQoJCWEuaHJlZiA9IHVybDsNCgkJYS5jbGljaygpOw0KCX0NCgllbHNlIHsgLy8gb3RoZXIgYnJvd3NlcnMgKHdoaWNoIHByb3Blcmx5IHN1cHBvcnQgbW9kYWwgd2luZG93cykgY2FuIHNpbXBseSBzZXQgdGhlIGxvY2F0aW9uLg0KCQlzZWxmLmxvY2F0aW9uLmhyZWYgPSB1cmw7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBnZXRBbGwobmFtZSl7DQoJdmFyIGU9bmFtZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpOw0KCSBmb3IgKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspew0KCQkgZGlzYWJsZUxpbmsoZVtpXSk7DQogfQ0KfQ0KDQoNCmZ1bmN0aW9uIHByb2Nlc3NPbW5pTGlua0NsaWNrKHRoaXNMaW5rLCBmb3JtRWxlbWVudElkKSB7DQoJLy9hbGVydCh0aGlzTGluayk7DQoJLy9hbGVydChmb3JtRWxlbWVudElkLnZhbHVlKTsNCglpZihjaGVja0Zvcm1DaGFuZ2VkKGZvcm1FbGVtZW50SWQpKSB7DQoJCWRpc2FibGVMaW5rKHRoaXNMaW5rKTsNCgkJcmV0dXJuIHRydWU7DQoJfSBlbHNlIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn0NCg0KIC8qIERpc2FibGVzIHRoZSBidXR0b24sIHVzZWQgaW4gb25zdWJtaXQoKSBldmVudCBpbiB0aGUgZm9ybS4NCiAgICBPdmVycmlkZXMgdGhlIG9uY2xpY2sgZXZlbnQuICBUaGlzIGRpc2FibGVzIHRoZSBzdWJtaXQgYnV0dG9uIGZyb20NCiAgICBzdWJtaXR0aW5nIG11bHRpcGxlIHRpbWVzIHdoZW4gdGhlIHVzZXIgaXMgaW1wYXRpZW50IGFuZCBjbGlja3MNCiAgICB0aGUgYnV0dG9uIHNldmVyYWwgdGltZXMuIEluIHRoaXMgbWV0aG9kLCB0aGUgcGFyYW1ldGVyIG9mIHRoZSBidXR0b24gZ2V0cyBzdWJtaXR0ZWQNCiAgICBpbiB0aGUgSFRUUCBQT1NULiAgQSBzaW1wbGUgIi5kaXNhYmxlZCA9IHRydWUiIGZvciBidXR0b24gZG9lc24ndCBzZW5kDQogICAgdGhlIGtleS92YWx1ZSBwYWlyIG9mIHRoZSBidXR0b24gaW4gdGhlIEhUVFAgUE9TVCBSZXF1ZXN0Lg0KDQogICAgKm5vdGUgdGhhdCB1c2VBY3Rpb25IYW5kbGVyIGlzIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB3aGljaCBkZWZhdWx0cyB0byB0cnVlDQogICovDQpmdW5jdGlvbiBkaXNhYmxlU3VibWl0QnV0dG9ucyhmb3JtTmFtZSx1c2VBY3Rpb25IYW5kbGVyKSB7DQoNCiAJdmFyIGVsZW0gPSBudWxsOw0KIAl2YXIgc2V0QWN0aW9uSGFuZGxlciA9IHRydWU7DQoNCgkvLyB0byBhdm9pZCBjaGFuZ2luZyBldmVyeSBwYWdlIGluIE9NTkkgdXNlQWN0aW9uSGFuZGxlciBpcyBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgd2hpY2ggZGVmYXVsdHMgdG8gdHJ1ZQ0KCWlmKHR5cGVvZiB1c2VBY3Rpb25IYW5kbGVyID09ICdib29sZWFuJyAmJiAhdXNlQWN0aW9uSGFuZGxlcikgew0KCQlzZXRBY3Rpb25IYW5kbGVyID0gZmFsc2U7DQoJfQ0KDQoJZm9yICggaj0wO2o8IGRvY3VtZW50LmZvcm1zW2Zvcm1OYW1lXS5lbGVtZW50cy5sZW5ndGg7IGorKyApIHsNCgllbGVtID0gZG9jdW1lbnQuZm9ybXNbZm9ybU5hbWVdLmVsZW1lbnRzW2pdOw0KDQoJICAgIGlmKGVsZW0udHlwZSAmJiAoZWxlbS50eXBlID09ICdzdWJtaXQnIHx8IGVsZW0udHlwZSA9PSAncmVzZXQnIHx8IGVsZW0udHlwZSA9PSAnYnV0dG9uJykpIHsNCg0KCQlpZihzZXRBY3Rpb25IYW5kbGVyKSB7DQoJCQllbGVtLm9uY2xpY2sgPSB2b2lkQWN0aW9uOw0KCQl9IGVsc2Ugew0KCQkJZWxlbS5kaXNhYmxlZCA9IHRydWU7DQoJCX0NCgkJZWxlbS5zdHlsZS5jb2xvcj0nI2NjY2M5OSc7DQoJICAgIH0NCgl9DQp9DQoNCmZ1bmN0aW9uIHZvaWRBY3Rpb24oKSB7DQoJcmV0dXJuIGZhbHNlOw0KfQ0KDQoNCg0KIC8qIEZpeCBmb3IgNTY2MC8xMDQ5My5EaXNhYmxlcyB0aGUgYnV0dG9uLCB1c2VkIGluIG9uc3VibWl0KCkgZXZlbnQgaW4gdGhlIGZvcm0uDQogICovDQpmdW5jdGlvbiBkaXNhYmxlQ291bnRTdWJtaXRCdXR0b25zKGZvcm1OYW1lKSB7DQogCXZhciBlbGVtID0gbnVsbDsNCg0KDQogICAgZm9yICggaj0wO2o8IGRvY3VtZW50LmZvcm1zW2Zvcm1OYW1lXS5lbGVtZW50cy5sZW5ndGg7IGorKyApIHsNCiAgICAJZWxlbSA9IGRvY3VtZW50LmZvcm1zW2Zvcm1OYW1lXS5lbGVtZW50c1tqXTsNCg0KCSAgICBpZihlbGVtLnR5cGUgJiYgKGVsZW0udHlwZSA9PSAnc3VibWl0JyB8fCBlbGVtLnR5cGUgPT0gJ3Jlc2V0JyB8fCBlbGVtLnR5cGUgPT0gJ2J1dHRvbicpKSB7DQoJICAgIAllbGVtLmRpc2FibGVkID0gdHJ1ZTsNCgkgICAgCWVsZW0uc3R5bGUuY29sb3I9JyNjY2NjOTknOw0KCSAgICB9DQoJfQ0KfQ0KIC8qIEZpeCBmb3IgNTY2MC8xMDQ5My5FbmFibGVzIHRoZSBidXR0b24sIHVzZWQgaW4gb25zdWJtaXQoKSBldmVudCBpbiB0aGUgZm9ybS4NCiAgKi8NCmZ1bmN0aW9uIGVuYWJsZUNvdW50U3VibWl0QnV0dG9ucyhmb3JtTmFtZSkgew0KIAl2YXIgZWxlbSA9IG51bGw7DQoNCg0KICAgIGZvciAoIGo9MDtqPCBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHMubGVuZ3RoOyBqKysgKSB7DQogICAgCWVsZW0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHNbal07DQoNCgkgICAgaWYoZWxlbS50eXBlICYmIChlbGVtLnR5cGUgPT0gJ3N1Ym1pdCcgfHwgZWxlbS50eXBlID09ICdyZXNldCcgfHwgZWxlbS50eXBlID09ICdidXR0b24nKSkgew0KCSAgICAJZWxlbS5kaXNhYmxlZCA9IGZhbHNlOw0KCSAgICAJZWxlbS5zdHlsZS5jb2xvcj0nJzsNCgkgICAgfQ0KCX0NCn0NCg0KIGZ1bmN0aW9uIGRpc2FibGVFbGVtZW50c0J5UHJlZml4TmFtZShwcmVmaXgpew0KICBmb3IgKCBqPTA7IGogPCBkb2N1bWVudC5hbGwubGVuZ3RoO2orKykgew0KICAgICBpZiAoIGRvY3VtZW50LmFsbFtqXS50aXRsZSAhPSBudWxsICYmIGRvY3VtZW50LmFsbFtqXS50aXRsZS5pbmRleE9mKHByZWZpeCkhPS0xICYmIGRvY3VtZW50LmFsbFtqXS5vbmNsaWNrICE9IG51bGwpew0KICAgICAJLy9hbGVydCgiZGlzYWJsaW5nLi4uLiIrZG9jdW1lbnQuYWxsW2pdLm9uY2xpY2spOw0KICAgICAgICBkb2N1bWVudC5hbGxbal0ub25jbGljaz1kaXNhYmxlUG9wVXBDbGljazsNCiAgICAgICAgZG9jdW1lbnQuYWxsW2pdLmhyZWY9IiMiOw0KIAlkb2N1bWVudC5hbGxbal0uZGlzYWJsZWQ9dHJ1ZTsNCiAgICAgfQ0KICB9DQogfQ0KDQoJZnVuY3Rpb24gZGlzYWJsZUdyb3VwKGZvcm1OYW1lLCBncm91cE5hbWUsIGJvb2xlYW5EaXNhYmxlZCkgew0KCQlmb3IgKHZhciBpPTA7IGkgPCBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHsNCgkJCWlmIChkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHNbaV0ubmFtZSA9PSBncm91cE5hbWUpIHsNCgkJCQlkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV0uZWxlbWVudHNbaV0uZGlzYWJsZWQgPSBib29sZWFuRGlzYWJsZWQ7DQoJCQl9DQoJCX0NCgl9DQoNCgkvKg0KCSAgUHJlIGNvbmRpdGlvbjoNCgkgIE1ha2Ugc3VyZSB0aGUgdmVyeSBmaXJzdCByb3cgb2YgeW91ciB0YWJsZSBjb250YWlucw0KCSAgYW4gZW1wdHkgY29sdW1uIGFzIGl0cyBsYXN0IGNvbHVtbi4NCg0KCSAgUG9zdCBjb25kaXRpb246DQoJICBFYWNoIG5ld2x5IGFkZGVkIHJvdyB3aWxsIGhhdmUgYSBkZWxldGUgbGluayBpbiBpdHMgbGFzdA0KCSAgY29sdW1uLCB3aGVuIHRoaXMgbGluayBnZXRzIGNsaWNrZWQsIHRoaXMgcm93IHdpbGwgYmUgZGVsZXRlZA0KCSAgZnJvbSB0aGUgdGFibGUuDQoJKi8NCglmdW5jdGlvbiBhcHBlbmRSb3codGFibGVJZCwga2VlcFZhbHVlKXsNCgkJdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFibGVJZCk7DQoJCS8vIGlmIHRoZSB0YWJsZSBpcyBub3QgdmlzaWJsZSwgdHVybiBpdCB0byB2aXNpYmxlDQoJCS8vIGFuZCBub3QgYWN0dWFsbHkgYWRkIGFueSByb3cuIFRoZSByZWFzb24gaXMgdGhhdA0KCQkvLyBkdXJpbmcgdGhlIGRlbGV0ZSByb3cgZnVuY3Rpb24sIGlmIHRoZXJlIGlzIG9uZSByb3cNCgkJLy8gbGVmdCBpbiB0aGUgdGFibGUsIHRoYXQgcm93IGlzIG5vdCBhY3R1YWxseSBkZWxldGVkLA0KCQkvLyBpbnN0ZWFkIHRoZSB0YWJsZSBpcyB0dXJuZWQgdG8gaW52aXNpYmxlLCB0aHVzIGhlcmUNCgkJLy8gd2UganVzdCB0dXJuIGl0IGJhY2sgdG8gdmlzaWJsZSB3aGVuIHVzZXIgc3RhcnRzIHRvDQoJCS8vIGFkZCB0aGUgZmlyc3Qgcm93IGFnYWluLg0KCQlpZiAodGFibGUuc3R5bGUuZGlzcGxheSA9PSBudWxsIHx8IHRhYmxlLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKXsNCgkJCXNob3dIaWRlRWxlbWVudCh0YWJsZUlkKTsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KCQkvLyB0YWJsZSBpcyB2aXNpYmxlDQoJCWlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ICE9IG51bGwgfHwgdGFibGUuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpew0KCQkJLy9hbGVydCgibGFzdCByb3cgZGlzcGxheSB2YWx1ZSAiICsgdGFibGUucm93c1t0YWJsZS5yb3dzLmxlbmd0aC0xXS5zdHlsZS5kaXNwbGF5KTsNCg0KCQkJLy8gbGFzdCByb3cgaXMgbm90IHZpc2libGUsIG1ha2UgaXQgdmlzaWJsZSwgbm90IGFkZGluZyBhZGRpdGlvbmFsIHJvdw0KCQkJaWYodGFibGUucm93c1t0YWJsZS5yb3dzLmxlbmd0aC0xXS5zdHlsZS5kaXNwbGF5ID09ICdub25lJyB8fCB0YWJsZS5yb3dzW3RhYmxlLnJvd3MubGVuZ3RoLTFdLnN0eWxlLmRpc3BsYXkgPT1udWxsKXsNCgkJCQl0YWJsZS5yb3dzW3RhYmxlLnJvd3MubGVuZ3RoLTFdLnN0eWxlLmRpc3BsYXkgPSAnJzsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCX0NCgkJLy8gYWRkIHJvdyBhcyB1c3VhbCBpZiBsYXN0IHJvdyBpcyBhbHJlYWR5IHZpc2libGUuDQoJCXZhciB0b3RhbFJvd3MgPSB0YWJsZS5yb3dzLmxlbmd0aDsNCgkJaWYoa2VlcFZhbHVlKXsNCgkJCXJldHVybiBhZGRSb3codGFibGVJZCwgMSwgJ2tlZXBWYWx1ZScpOw0KCQl9ZWxzZXsNCgkJCXJldHVybiBhZGRSb3codGFibGVJZCwgMSwgbnVsbCk7DQoJCX0NCg0KCX0NCg0KCWZ1bmN0aW9uIGFkZENvbnRlbnRUb0xhc3RDb2wocm93KXsNCgkJdmFyIGNvbCA9IHJvdy5jZWxsc1tyb3cuY2VsbHMubGVuZ3RoLTFdOw0KCQl2YXIgdXJsID0gIiA8YSBocmVmPVwiI1wiIG9uY2xpY2s9XCdkZWxldGVPbmVSb3coXCIiICsgcm93LmlkICsgIlwiIiArICIpO1wnPkRlbGV0ZTwvYT4gIjsNCgkJY29sLmlubmVySFRNTD11cmw7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCglmdW5jdGlvbiBkZWxldGVPbmVSb3cocm93SWQsIGlzSWQsIHRocmVzaG9sZCwgaGlkZVRhYmxlKXsNCgkJdmFyIHJvdyA9IHJvd0lkOw0KCQlpZihpc0lkPT0ndHJ1ZScpew0KCQkJdmFyIHJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJvd0lkKTsNCgkJfQ0KCQkvLyBwYXJlbnQgdGFibGUNCgkJdmFyIHBhcmVudCA9IHJvdy5wYXJlbnROb2RlOw0KDQoJCS8vIHRvdGFsIHJvd3MgbGVmdCBpbiB0aGUgdGFibGUgYmVmb3JlIHN0YXJ0cw0KCQkvLyBkb2luZyBzaG93IGFuZCBoaWQgb3BlcmF0aW9uLCBkZWZhdWx0IGlzIDIgcm93cw0KCQl2YXIgbGltaXQ9MjsNCgkJaWYodGhyZXNob2xkICE9IG51bGwpew0KCQkJbGltaXQgPSB0aHJlc2hvbGQ7DQoJCX0NCgkJLy8gd2hlbiB0aGVyZSBpcyBvbmx5IHRhYmxlIGhlYWRlciByb3cgYW5kIGxpbWl0LTEgdGFibGUgcm93IGxlZnQNCgkJLy8gY2xlYXIgYWxsIHRoZSBjZWxscyBpbiB0aGlzIHNvbGUgdGFibGUgcm93DQoJCWlmKHBhcmVudC5yb3dzLmxlbmd0aD09bGltaXQpew0KCQkJaWYoaGlkZVRhYmxlKXsNCgkJCQkvLyByZWN1cnNpdmVseSBmaW5kIHRoZSB0YWJsZSBwYXJlbnQNCgkJCQl3aGlsZSghKHBhcmVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCk9PSdUQUJMRScpKXsNCgkJCQkJcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7DQoJCQkJfQ0KDQoJCQkJcmVzZXRUYWJsZVJvd0NoaWxkcmVuKHJvdyk7DQoJCQkJc2hvd0hpZGVFbGVtZW50KHBhcmVudC5pZCk7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfWVsc2V7DQoJCQkJLy8ganVzdCBzaG93L2hpZGUgdGhlIGxhc3Qgcm93DQoJCQkJaWYocm93LnN0eWxlLmRpc3BsYXkgPT0gJ2lubGluZScgfHxyb3cuc3R5bGUuZGlzcGxheSA9PSAnJyl7DQoJCQkJCXJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnDQoJCQkJfWVsc2V7DQoJCQkJCXJvdy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7DQoJCQkJfQ0KCQkJCXJlc2V0VGFibGVSb3dDaGlsZHJlbihyb3cpOw0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCg0KCQl9DQoJCXBhcmVudC5yZW1vdmVDaGlsZChyb3cpOw0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJZnVuY3Rpb24gcmVzZXRUYWJsZVJvd0NoaWxkcmVuKHJvdyl7DQoJCWZvcih2YXIgaT0wOyBpPHJvdy5jZWxscy5sZW5ndGg7IGkrKyl7DQoJCQkvLyBlYWNoIGNoaWxkIG5vZGUgaXMgYSB0ZCBlbGVtZW50Lg0KCQkJZm9yKCB2YXIgaj0wOyBqPHJvdy5jZWxsc1tpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKXsNCgkJCQlpZihyb3cuY2VsbHNbaV0uY2hpbGROb2Rlc1tqXS50YWdOYW1lID09ICdJTlBVVCcpew0KCQkJCQlyb3cuY2VsbHNbaV0uY2hpbGROb2Rlc1tqXS52YWx1ZT0nJzsNCgkJCQl9DQoNCgkJCQkvLyBlYWNoIGNoaWxkIG5vZGUgaXMgYW4gb3B0aW9uIGVsZW1lbnQNCgkJCQlpZihyb3cuY2VsbHNbaV0uY2hpbGROb2Rlc1tqXS50YWdOYW1lID09ICdTRUxFQ1QnKXsNCgkJCQkJZm9yKCB2YXIgaz0wOyBrPHJvdy5jZWxsc1tpXS5jaGlsZE5vZGVzW2pdLmNoaWxkTm9kZXMubGVuZ3RoOyBrKyspew0KCQkJCQkJLy8gbmVlZCB0byBpbXBsZW1lbnQgcmVzZXR0aW5nIGRyb3AgZG93biBsaXN0IGluIElFDQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQoJLyoNCgkgRmxpcCB0aGUgZGlzcGxheSBvZiB0aGUgYWxsIGVsZW1lbnRzIChzdHlsZS5kaXNwbGF5PVsnbm9uZScsICdpbmxpbmUnXSkNCgkgd2l0aCBzcGVjaWZpZWQgaWQgaW4gdGhlIGFycmF5DQoJKi8NCglmdW5jdGlvbiBzaG93SGlkZUVsZW1lbnRzKGVsZW1lbnRJZHMpew0KCQlmb3IoaT0wOyBpPCBlbGVtZW50SWRzLmxlbmd0aDsgaSsrKXsNCgkJCXNob3dIaWRlRWxlbWVudChlbGVtZW50SWRzW2ldKTsNCgkJfQ0KCX0NCg0KCS8qDQoJIEZsaXAgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGVsZW1lbnQgd2l0aCBzcGVjaWZpZWQgaWQNCgkqLw0KCWZ1bmN0aW9uIHNob3dIaWRlRWxlbWVudChlbGVtZW50SWQpew0KCQl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7DQoJCWlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgIT0gbnVsbCAmJiBlbGVtZW50LnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKXsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCgkJfQ0KCQllbHNlew0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7DQoJCX0NCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCS8vIHNpbXVsYXRlIG1vdXNlIG92ZXIgaHlwZXJsaW5rIGVmZmVjdA0KCWZ1bmN0aW9uIG1vdXNlT3ZyVHh0RWZmZWN0KGVsZW1lbnQpew0KCQllbGVtZW50LnN0eWxlLmN1cnNvciA9ICdoYW5kJzsNCgkJZWxlbWVudC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJzsNCgkJLy8gY2hhbmdlIHRoZSBjb2xvciB0byAiaHlwZXJsaW5rIG1vdXNlb3ZlciBjb2xvciINCgkJZWxlbWVudC5zdHlsZS5jb2xvcj0nIzAwMDA3Nyc7DQoJfQ0KDQoJLy8gc2ltdWxhdGUgbW91c2Ugb3V0IGh5cGVybGluayBlZmZlY3QNCglmdW5jdGlvbiBtb3VzZU91dFR4dEVmZmVjdChlbGVtZW50KXsNCgkJZWxlbWVudC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7DQoJCWVsZW1lbnQuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJzsNCgkJLy8gY2hhbmdlIHRoZSBjb2xvciB0byB1c3VhbCBoeXBlcmxpbmsgY29sb3INCgkJZWxlbWVudC5zdHlsZS5jb2xvcj0nIzAwMDBjZCc7DQoJfQ0KDQoJLy8gb2JqIGlzIG9uZSBvZiB0aGUgY2hpbGRyZW4gb2YgdGhlIHJvdw0KCS8vIHRvIGJlIGRlbGV0ZWQNCgkvLyBpc0lkLCB3aGV0aGVyIHRoZSBvYmogaXMgdGhlIHJvdyBpZCBvciByb3cgb2JqIGl0c2VsZg0KCS8vIHRocmVzaG9sZCwgbnVtYmVyIG9mIHJvd3MgbGVmdCBpbiB0aGUgdGFibGUgYmVmb3JlIHN0b3ANCgkvLyBkZWxldGluZyByb3cgYW5kIHN0YXJ0IGhpZGluZyByb3cuDQoJZnVuY3Rpb24gZGVsZXRlQ3VycmVudFJvdyhvYmosIGlzSWQsIHRocmVzaG9sZCl7DQoJCXZhciBwYXJlbnQgPSBvYmoucGFyZW50Tm9kZTsNCgkJd2hpbGUocGFyZW50LnRhZ05hbWUgIT0gJ1RSJyl7DQoJCQlwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZQ0KCQl9DQoJCWRlbGV0ZU9uZVJvdyhwYXJlbnQsaXNJZCwgdGhyZXNob2xkKTsNCgl9DQoNCgkvLyByZXR1cm4gY3VycmVudCBkYXRlIHN0cmluZyBpbiBERC9NTS9ZWVlZIGZvcm1hdA0KCWZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCl7DQoJCXZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCk7DQoJCXJldHVybiBsZWFkaW5nWmVybyhjdXJyVGltZS5nZXRNb250aCgpICsgMSkgKyAiLyIgKyBsZWFkaW5nWmVybyhjdXJyVGltZS5nZXREYXRlKCkpICsgIi8iICsgY3VyclRpbWUuZ2V0RnVsbFllYXIoKTsNCgl9DQoNCgkvLyBBZGRlZCBlbmNvZGluZyBmb3IgIisiIGNoYXJhY3RlciwgZXNjYXBlKCkgZnVuY3Rpb24gaWdub3JlcyBpdA0KCWZ1bmN0aW9uIHVybEVuY29kZVN0cmluZyhzdHIpIHsNCgkJc3RyID0gZXNjYXBlKHN0cik7DQoJCXN0ciA9IHN0ci5yZXBsYWNlKC9cKy9nLCIlMmIiKTsNCgkJcmV0dXJuIHN0cjsNCgl9DQoJLy8gIGZ1bmN0aW9uIGZvciBzdXBwcmVzc2luZyBmb3JtIHN1Ym1pc3Npb24gaWYgZW50ZXIgaXMgcHJlc3NlZA0KCS8vICB3aGVuIGN1cnNvciBpbiBhIGlucHV0IHR5cGU9InRleHQiDQogICAgZnVuY3Rpb24ga2lsbEVudGVyKGV2dCkNCiAgICB7DQoNCiAgICAgICAgaWYoZXZ0LmtleUNvZGUgPT0gMTMgfHwgZXZ0LndoaWNoID09IDEzKQ0KICAgICAgICB7DQogICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgfQ0KCWZ1bmN0aW9uIGlzTnVtZXJpYyh4KSB7DQoJCXZhciBSZWdFeHAgPSAvXigtKT8oXGQqKShcLj8pKFxkKikkLzsgLy8gTm90ZTogdGhpcyBXSUxMIGFsbG93IGEgbnVtYmVyIHRoYXQgZW5kcyBpbiBhIGRlY2ltYWw6IC00NTIuDQoJCS8vIGNvbXBhcmUgdGhlIGFyZ3VtZW50IHRvIHRoZSBSZWdFeA0KCQkvLyB0aGUgJ21hdGNoJyBmdW5jdGlvbiByZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGRpZG4ndCBtYXRjaA0KCQl2YXIgc3RyID0geC50b1N0cmluZygpOw0KCQl2YXIgcmVzdWx0ID0gc3RyLm1hdGNoKFJlZ0V4cCk7DQoJCXJldHVybiByZXN1bHQ7DQoJfQ0KDQoNCgkvLyBEZWZlY3QgNjEzOA0KCWZ1bmN0aW9uIGxpbWl0VGV4dChsaW1pdEZpZWxkLCBsaW1pdE51bSkgew0KICAgIAlpZiAobGltaXRGaWVsZC52YWx1ZS5sZW5ndGggPiBsaW1pdE51bSkgew0KICAgICAgICAJbGltaXRGaWVsZC52YWx1ZSA9IGxpbWl0RmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIGxpbWl0TnVtKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KCS8vIERlZmVjdCA5ODIyDQoJLy8gaGFuZGxlTW91c2VvdmVyKCksIGhhbmRsZU1vdXNlb3V0KCksIGhhbmRsZUNsaWNrKCksIGhhbmRsZUJsdXIoKSBhcmUgdXNlZA0KCS8vIHRvIGR5bmFtaWNhbGx5IGV4cGFuZCBhbmQgY29udHJhY3QgZHJvcCBkb3duIGxpc3RzLiAgQSA8c3Bhbj4gdGFnIG11c3QNCgkvLyBiZSB1c2VkIHRvIGNvbnRhaW4gdGhlICJvcGVuU2V0IiBhdHRyaWJ1dGUgd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZQ0KCS8vIGRyb3AgZG93biBsaXN0IGlzIG9wZW5lZCBvciBub3QgYW5kIHRoZSAiaG92ZXIiIGF0dHJpYnV0ZSB3aGljaCBkZXRlcm1pbmVzDQoJLy8gd2hldGhlciB0aGUgZHJvcCBkb3duIGxpc3QgaXMgaG92ZXJlZC4NCgkvLw0KCS8vIFVzYWdlOiAgb25tb3VzZW92ZXIsIG9ubW91c2VvdXQsIG9uYmx1ciBmb3IgdGhlIHNlbGVjdCBlbGVtZW50IGNvbnRhaW5lZA0KCS8vIGluIHRoZSBzcGFuIHRhZy4gIG9uY2xpY2sgYXR0cmlidXRlIHNob3VsZCBiZSBzZXQgb24gdGhlIHNwYW4gdGFnLg0KCS8vIFNlZSBncm91cE1vdmVTZWxlY3RBZG1pdERldGFpbHMuanNwIGZvciBzYW1wbGUgdXNhZ2UuDQoJZnVuY3Rpb24gaGFuZGxlTW91c2VvdmVyKGVsZSwgd2lkdGgpDQoJew0KCQllbGUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hvdmVyJywgJ3RydWUnKTsNCgkJZWxlLnN0eWxlLndpZHRoID0gd2lkdGg7DQoJfQ0KCWZ1bmN0aW9uIGhhbmRsZU1vdXNlb3V0KGVsZSkNCgl7DQoJCWVsZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnaG92ZXInLCAnZmFsc2UnKTsNCgkJaWYoZWxlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdvcGVuU2V0JykgPT0gJ2ZhbHNlJykNCgkJew0KCQkJZWxlLnN0eWxlLndpZHRoID0gJyc7DQoJCX0NCgl9DQoJZnVuY3Rpb24gaGFuZGxlQmx1cihlbGUpDQoJew0KCQllbGUuc3R5bGUud2lkdGggPSAnJzsNCgkJZWxlLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdvcGVuU2V0JywgJ2ZhbHNlJyk7DQoJCWVsZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnaG92ZXInLCAnZmFsc2UnKTsNCgl9DQoJZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlKQ0KCXsNCgkJaWYoZWxlLmdldEF0dHJpYnV0ZSgnb3BlblNldCcpID09ICd0cnVlJykgew0KCQkJaWYoZWxlLmdldEF0dHJpYnV0ZSgnaG92ZXInKSA9PSAnZmFsc2UnKQ0KCQkJew0KCQkJCWVsZS5maXJzdENoaWxkLnN0eWxlLndpZHRoID0gJyc7DQoJCQl9DQoJCQllbGUuc2V0QXR0cmlidXRlKCdvcGVuU2V0JywgJ2ZhbHNlJyk7DQoJCX0gZWxzZSB7DQoJCQllbGUuc2V0QXR0cmlidXRlKCdvcGVuU2V0JywgJ3RydWUnKTsNCgkJfQ0KCX0NCgkvL25ldyBmdW5jdGlvbiBmb3IgQ1ExMTE0NiAtIHRvIGhlbHAgd2l0aCBjb2xsYXBzaW5nIHRoZSBsZWZ0IG1lbnUNCglmdW5jdGlvbiByZXNldE1hcmdpbkxlZnQoZWxlbWVudElELCBtYXJnaW5TaXplKSB7DQoJCXZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElEKTsNCg0KCQlpZihlbGVtZW50ICE9IG51bGwpIHsNCgkJCWVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdD1tYXJnaW5TaXplOw0KDQoJCX0NCgl9DQoNCglmdW5jdGlvbiB0b2dnbGVTZWN0aW9uKHNlY3Rpb25Db250cm9sTmFtZSkgew0KICAgIAl2YXIgc2VjdGlvbkV4cGFuZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbkNvbnRyb2xOYW1lKTsNCiAgICAJaWYgKHNlY3Rpb25FeHBhbmRlci52YWx1ZT09J3RydWUnKSB7DQogICAgCQkvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb25Db250cm9sTmFtZSkuc3R5bGU9Inpvb206IDE7IGZpbHRlcjogYWxwaGEob3BhY2l0eSA9IDApOyINCiAgICAgICAgCXNlY3Rpb25FeHBhbmRlci52YWx1ZT0nZmFsc2UnOw0KICAgIAl9IGVsc2Ugew0KICAgICAgICAJc2VjdGlvbkV4cGFuZGVyLnZhbHVlPSd0cnVlJzsNCiAgICAgICAgCS8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbkNvbnRyb2xOYW1lKS5zdHlsZT0iem9vbTogMTsgZmlsdGVyOiBhbHBoYShvcGFjaXR5ID0gMCk7Ig0KICAgIAl9DQoJfQ0KCS8vQ1EyMDMzNQ0KCS8vVGhpcyBmdW5jdGlvbiBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIG9uIHNlbGVjdCBsaXN0IG9ua2V5RE9XTiBhY3Rpb25zDQoJLy9UaGUgcHVycG9zZSBpcyB0byBvdmVycmlkZSB0aGUgYnJvd3NlciBjb250cm9scyB3aGljaCBzZW5kcyBhICdCYWNrJyBjb21tYW5kLg0KCS8vVGhpcyB3aWxsIG5vdyBtaW1taWNrIHByZXNzaW5nIEVTQyh3aGljaCBjbG9zZXMgdGhlIHNlbGVjdCBsaXN0IG9wdGlvbnMpLCBhbmQgdGhlIHNlbGVjdCB0aGUgZGVmYXVsdCBmaXJzdCBvcHRpb24uDQoJLy9vbmtleWRvd249InJldHVybiBudWtlQmFja3NwYWNlKHRoaXMsIGV2ZW50KTsiDQoJZnVuY3Rpb24gbnVrZUJhY2tzcGFjZShlbCwgZXZlbnQpIHsNCgkJdmFyIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7DQoJCWlmKGUua2V5Q29kZT09OCl7DQoJCQllLmtleUNvZGU9Mjc7IC8vIGhhY2sgZm9yIElFIC0gcmVwbGFjZSB0aGUgZXZlbnQgY29kZQ0KCQkJaWYoZWwpew0KCQkJCWlmKGVsLnRhZ05hbWUgPT0gIlNFTEVDVCIpew0KCQkJCQlpZihlbC5vcHRpb25zWzBdKXsNCgkJCQkJCWVsLm9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlOw0KCQkJCQkJcmV0dXJuIGZhbHNlOyAgLy8gb3RoZXIgYnJvd3NlcnMsIHN0b3AgdGhlIGV2ZW50DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgkJcmV0dXJuIHRydWU7DQoJfQ0KDQoNCgkvLyBTb21lIGhhbmR5IGFycmF5IGFuZCBzdHJpbmcgZnVuY3Rpb25zLg0KCUFycmF5LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChlbGVtZW50KXsNCgkJLy9hbGVydCgnaW4gY29udGFpbnMgJyArIGVsZW1lbnQpOw0KCQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsNCgkJCWlmICh0aGlzW2ldID09IGVsZW1lbnQpew0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQl9DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCglTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzK3xccyskL2csIiIpOw0KCX0NCg0KCVN0cmluZy5wcm90b3R5cGUubHRyaW0gPSBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzKy8sIiIpOw0KCX0NCg0KCVN0cmluZy5wcm90b3R5cGUucnRyaW0gPSBmdW5jdGlvbigpIHsNCgkJcmV0dXJuIHRoaXMucmVwbGFjZSgvXHMrJC8sIiIpOw0KCX0NCg0KLyoqIFdpbGwgYXBwbHkgT1BUSU9OIGRhdGEgdG8gdGhlIFNFTEVDVCBIVE1MIGVsZW1lbnQgaWRlbnRpZmllZCBieSB0aGUgZm9ybUVsZW1lbnRJRC4NCiAqIElmIGVtcHR5T3B0aW9uIGlzIHNwZWNpZmllZCwgaXQgd2lsbCBiZSBwcmVwZW5kZWQgdG8gdGhlIGxpc3QuICovDQpmdW5jdGlvbiBhcHBseUR3clRvRHJvcERvd24oZm9ybUVsZW1lbnRJRCwgZGF0YSwgZW1wdHlPcHRpb24sIGNvZGVGaWVsZE5hbWUsIGRlc2NGaWVsZE5hbWUpIHsNCglpZiAoZm9ybUVsZW1lbnRJRCAhPSBudWxsKSB7DQoJCXZhciBjb2RlTmFtZSA9IChjb2RlRmllbGROYW1lICE9IG51bGwpID8gY29kZUZpZWxkTmFtZSA6ICdjb2RlJzsNCgkJdmFyIGRlc2NOYW1lID0gKGRlc2NGaWVsZE5hbWUgIT0gbnVsbCkgPyBkZXNjRmllbGROYW1lIDogJ2Rlc2MnOw0KCSAgICBEV1JVdGlsLnJlbW92ZUFsbE9wdGlvbnMoZm9ybUVsZW1lbnRJRCk7DQoJICAgIGlmIChlbXB0eU9wdGlvbiAhPSBudWxsICYmIGVtcHR5T3B0aW9uICE9ICcnKSB7DQoJICAgIAlEV1JVdGlsLmFkZE9wdGlvbnMoZm9ybUVsZW1lbnRJRCwgW3sgY29kZTonJywgZGVzYzplbXB0eU9wdGlvbiB9XSwgJ2NvZGUnLCAnZGVzYycpOw0KCSAgICB9DQoJICAgIGlmIChkYXRhICE9IG51bGwpDQoJICAgIAlEV1JVdGlsLmFkZE9wdGlvbnMoZm9ybUVsZW1lbnRJRCwgZGF0YSwgY29kZU5hbWUsIGRlc2NOYW1lKTsNCgl9DQp9DQoNCi8qKg0KICogV2lsbCBjbGVhciB0aGUgdmFsdWUgYXR0cmlidXRlIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBzcGVjaWZpZWQgYXJyYXkNCiAqDQogKiBAcGFyYW0gZWxlbWVudEFycmF5DQogKiAgICAgICAgICAgIGEgbGlzdCBvZiBlbGVtZW50IElEcw0KICovDQpmdW5jdGlvbiBjbGVhckVsZW1lbnRzKGVsZW1lbnRBcnJheSkgew0KCWZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudEFycmF5Lmxlbmd0aDsgaSsrKSB7DQoJCXZhciBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudEFycmF5W2ldKTsNCgkJaWYgKGVsZW0gIT0gbnVsbCAmJiBlbGVtICE9ICd1bmRlZmluZWQnKXsNCgkJCXZhciBteVR5cGUgPSBlbGVtLnR5cGU7DQoJCSAgCWlmIChteVR5cGUgPT0gJ2NoZWNrYm94JyB8fCBteVR5cGUgPT0gJ3JhZGlvJykgew0KCQkgIAkJZWxlbS5jaGVja2VkID0gZmFsc2U7DQoJCSAgCX0NCgkJICAJZWxzZSBpZiAobXlUeXBlID09ICdzZWxlY3Qtb25lJyB8fCBteVR5cGUgPT0gJ3NlbGVjdC1tdWx0aXBsZScpIHsNCgkJICAJCWVsZW0uc2VsZWN0ZWRJbmRleCA9IDA7DQoJCSAgCX0NCgkJICAJZWxzZSB7DQoJCSAgCQllbGVtLnZhbHVlID0gJyc7DQoJCSAgCX0NCgkJfQ0KCX0NCn0NCg0KLyoqDQogKiBXaWxsIGNsZWFyIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgZm9yIGV2ZXJ5IGNoaWxkIGVsZW1lbnQgc3BlY2lmaWVkIGJ5IHRoZSBpZGVudGlmaWVkIGVsZW1lbnQNCiAqLw0KZnVuY3Rpb24gY2xlYXJBbGxFbGVtZW50cyhlbGVtKSB7DQoJZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsNCgkJY2xlYXJBbGxFbGVtZW50cyhlbGVtLmNoaWxkTm9kZXNbaV0pOw0KCX0NCglpZiAoZWxlbSAhPSBudWxsKSB7DQoJCXZhciBteVR5cGUgPSBlbGVtLnR5cGU7DQoJICAJaWYgKG15VHlwZSA9PSAnY2hlY2tib3gnIHx8IG15VHlwZSA9PSAncmFkaW8nKSB7DQoJICAJCWVsZW0uY2hlY2tlZCA9IGZhbHNlOw0KCSAgCX0NCgkgIAllbHNlIGlmIChteVR5cGUgPT0gJ2hpZGRlbicgfHwgbXlUeXBlID09ICdwYXNzd29yZCcgfHwgbXlUeXBlID09ICd0ZXh0JyB8fCBteVR5cGUgPT0gJ3RleHRhcmVhJykgew0KCSAgCQllbGVtLnZhbHVlID0gJyc7DQoJICAJfQ0KCSAgCWVsc2UgaWYgKG15VHlwZSA9PSAnc2VsZWN0LW9uZScgfHwgbXlUeXBlID09ICdzZWxlY3QtbXVsdGlwbGUnKSB7DQoJICAJCWVsZW0uc2VsZWN0ZWRJbmRleCA9IDA7DQoJICAJfQ0KCX0NCn0NCg0KLyoqDQogKiBTZXRzIHRoZSAnZGlzYWJsZWQnIGF0dHJpYnV0ZSBvZiBhIGZvcm0gZWxlbWVudC4gIEF0IHRoZSBzYW1lIHRpbWUsIGlmIGEgZm9ybSBlbGVtZW50IHdpdGggdGhlIHNhbWUgSUQgZXhpc3RzDQogKiAoc3VmZml4ZWQgd2l0aCAiX2hkZG4iKSwgdGhlIGRpc2FibGVkIGF0dHJpYnV0ZSBvbiB0aGUgaGlkZGVuIGZvcm0gZWxlbWVudCB3aWxsIGJlIHNldCB0byB0aGUgb3Bwb3NpdGUgYXMgdGhhdCBvZiBlbGVtZW50SUQuDQogKg0KICogQHBhcmFtIGVsZW1lbnRJZCBhbiBpZGVudGlmaWVyIG9mIGFuIEhUTUwgZm9ybSBlbGVtZW50IHRvIGRpc2FibGUvZW5hYmxlDQogKiBAcGFyYW0gZGlzYWJsZWQgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZm9ybSBlbGVtZW50IGlzIHRvIGJlIGRpc2FibGVkIG9yIG5vdA0KICogQHBhcmFtIGNsZWFyIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGZvcm0gZWxlbWVudCBzaG91bGQgY2xlYXIgd2hlbiBkaXNhYmxlZA0KICovDQpmdW5jdGlvbiBkaXNhYmxlRWxlbWVudChlbGVtZW50SWQsIGRpc2FibGVkLCBjbGVhcikgew0KCWlmIChlbGVtZW50SWQgIT0gbnVsbCAmJiBkaXNhYmxlZCAhPSBudWxsKSB7DQoJCXZhciBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTsNCgkJZS5kaXNhYmxlZCA9IGRpc2FibGVkOw0KCQlpZiAoY2xlYXIgPT0gbnVsbCB8fCBjbGVhciA9PSB0cnVlKSB7DQoJCQllLnZhbHVlID0gJyc7DQoJCX0NCg0KCQkvLyB0b2dnbGUgdGhlIGhpZGRlbiBlbGVtZW50IGZvciB0aGUgc2FtZSBmaWVsZCAoZGlzYWJsZWQgZmllbGRzIGRvbid0IGJpbmQgaW4gU3ByaW5nKQ0KCQl2YXIgaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCArICdfaGRkbicpOw0KCQlpZiAoaCAhPSBudWxsKSB7DQoJCQloLmRpc2FibGVkID0gIWRpc2FibGVkOw0KCQkJaC52YWx1ZSA9IGUudmFsdWU7DQoJCX0NCgl9DQp9DQoNCi8qKg0KICogRmlyZXMgYW4gZXZlbnQgb24gYW4gZWxlbWVudC4gIE9uZSBjYW4ndCBqdXN0IGNhbGwgZWxlbS5vbkNoYW5nZSgpIGJlY2F1c2UgdGhlcmUgbWF5IGJlIG90aGVyIGxpc3RlbmVycyAvIG1ldGhvZHMgYXR0YWNoZWQgdG8gb25DaGFuZ2UNCiAqIHRoYXQgdGhlIG9uQ2hhbmdlKCkgY2FsbCB3b3VsZCBpZ25vcmUuDQogKg0KICogQHBhcmFtIGVsZW1lbnQgRE9NIGVsZW1lbnQgdG8gY2FsbCBldmVudCBvbg0KICogQHBhcmFtIGV2ZW50IHRoZSBldmVudCB0eXBlIHRvIGZpcmUgKGllLiAnY2hhbmdlJykNCg0KICogQHNlZSBodHRwOi8vamVoaWFoLmN6L2EvZmlyaW5nLWphdmFzY3JpcHQtZXZlbnRzLXByb3Blcmx5DQogKi8NCmZ1bmN0aW9uIGZpcmVFdmVudChlbGVtZW50LGV2ZW50KXsNCglpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3Qpew0KCQkvLyBkaXNwYXRjaCBmb3IgSUUNCgkJdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7DQoJCXJldHVybiBlbGVtZW50LmZpcmVFdmVudCgnb24nK2V2ZW50LGV2dCkNCgl9DQogICAgZWxzZXsNCgkgICAgLy8gZGlzcGF0Y2ggZm9yIGZpcmVmb3ggKyBvdGhlcnMNCgkgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7DQoJICAgIGV2dC5pbml0RXZlbnQoZXZlbnQsIHRydWUsIHRydWUgKTsgLy8gZXZlbnQgdHlwZSxidWJibGluZyxjYW5jZWxhYmxlDQoJICAgIHJldHVybiAhZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2dCk7DQogICAgfQ0KfQ0KDQoNCi8vIENRMjIzNTYgLSBtYWtlIHRoZSBhZGRpdGlvbiBvZiBuZXcgTCZJIGNsYWltIHJvd3Mgc21vb3RoZXIuDQovLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYXBwZW5kIGEgbmV3IFRSIGVsZW1lbnQgdG8gdGhlIGVuZCBvZiB0aGUgTCZJIENsYWltcyBibG9jaw0KLyoqDQogKiBXaWxsIGNsb25lIHRoZSBmaXJzdCBUUiBub2RlIGluIGEgdGFibGUgYW5kIGFwcGVuZCBpdCB0byB0aGUgZW5kIG9mIHRoZSB0YWJsZS4gIElmIHJlZ0V4UGF0aCBpcyBzcGVjaWZpZWQsIHdpbGwNCiAqIHVwZGF0ZSB0aGUgaWRzIGFuZCBuYW1lcyBvZiBhbnkgY2hpbGQgbm9kZXMuDQogKiAgIGkuZS4sIGlmIHJlZ0V4UGF0aCA9ICJ0Yk1lZExuaUNsYWltUm93cyIsDQogKiAgICAgInRiTWVkTG5pQ2xhaW1Sb3dzWzBdLnRiTWVkTG5pQ2xhaW0ubWVkbGNsRGVzY1R4IiB3aWxsIHVwZGF0ZSB0bw0KICogICAgICJ0Yk1lZExuaUNsYWltUm93c1sxXS50Yk1lZExuaUNsYWltLm1lZGxjbERlc2NUeCINCiAqIFRoZSBpbmRleCB3aWxsIGluY3JlbWVudCBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgdGFibGUuDQogKg0KICogQHJldHVybiB0aGUgaW5kZXggb2YgdGhlIG5ldyByb3cNCiAqLw0KZnVuY3Rpb24gY2xvbmVSb3codGFibGVJZCwgcmVnRXhQYXRoKSB7DQoJLy8gQ2xvbmUgZmlyc3Qgcm93IGFuZCBhcHBlbmQgdG8gZW5kIG9mIHRhYmxlDQoJdmFyIHRyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFibGVJZCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF0uZmlyc3RDaGlsZDsNCgl2YXIgbmV3VHIgPSB0ci5jbG9uZU5vZGUodHJ1ZSk7IC8vIGNsb25lIG5vZGUsIGR1cGxpY2F0ZSBjaGlsZCBub2Rlcw0KCXZhciBpbmRleCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYmxlSWQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ciIpLmxlbmd0aDsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJsZUlkKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXS5hcHBlbmRDaGlsZChuZXdUcik7DQoNCgkvLyBCdWcgaW4gSUU4OiBjYW4ndCBqdXN0IHJlcGxhY2UgdGhlIGlubmVySFRNTCBvbiBhIFRSLCBpdCdsbCBkcm9wIGhhbGYgdGhlIFREIG9mIHRoZSBmaXJzdCBjaGlsZCBub2RlIC4uLiBjcmF6eS4NCgkvLyAgIFNvLCB3ZSBpdGVyYXRlIGFuZCB1cGRhdGUgdGhlIGNoaWxkIHJlY29yZHMgaW5zdGVhZCBvZiB0aGUgcGFyZW50Lg0KCXZhciBub2RlcyA9IG5ld1RyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOw0KCXZhciBuZXdQYXRoID0gcmVnRXhQYXRoICsgIlsiICsgaW5kZXggKyAiXSI7DQoJdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdFeFBhdGggKyAiXFxbMFxcXSIsICJnIik7DQoJZm9yICh2YXIgaT0wOyBpPG5vZGVzLmxlbmd0aDsgaSsrKSB7DQoJCW5vZGVzW2ldLmlubmVySFRNTCA9IG5vZGVzW2ldLmlubmVySFRNTC5yZXBsYWNlKHJlZ2V4LCBuZXdQYXRoKTsNCgl9DQoNCgkvLyByZXNldCBuZXcgcm93IHZhbHVlcy4NCgljbGVhckFsbEVsZW1lbnRzKG5ld1RyKTsNCg0KCXJldHVybiBpbmRleDsNCn0NCmZ1bmN0aW9uIGRpc2FibGVBbGxJbnB1dChmb3JtSWQpIHsNCgl2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1JZCk7DQoJZm9yICh2YXIgaT0wO2k8Zm9ybS5sZW5ndGg7aSsrKQ0KCSAgew0KCQlpZigoZm9ybS5lbGVtZW50c1tpXSAhPSBudWxsKSAmJg0KCQkJCShmb3JtLmVsZW1lbnRzW2ldICE9ICd1bmRlZmluZWQnKSAmJg0KCQkJCShmb3JtLmVsZW1lbnRzW2ldLnRhZ05hbWUgPT0gJ0lOUFVUJykgJiYNCgkJCQkoZm9ybS5lbGVtZW50c1tpXS50eXBlID09ICdyYWRpbycpICYmDQoJCQkJKGZvcm0uZWxlbWVudHNbaV0udHlwZSAhPSAnYnV0dG9uJykgJiYNCgkJCQkoZm9ybS5lbGVtZW50c1tpXS50eXBlICE9ICdzdWJtaXQnKQ0KCQkJCSkgew0KCQkJZm9ybS5lbGVtZW50c1tpXS5kaXNhYmxlZCA9IHRydWU7DQoJCX0NCg0KCSAgfQ0KfQ0KCQ0KCS8vc2V0IHRoZSByZW1haW5pbmcgY2hhcmFjdGVycw0KCWZ1bmN0aW9uIHNldFJlbWFpbmluZ1RleHQoZmxkTmFtZUlkLGxpbWl0LHJlbU5hbWVJZCl7DQoJICAgICB2YXIgcmVtbGJsPSAiUmVtYWluaW5nIENoYXJhY3RlcnM6IjsNCgkgICAgIHZhciByZW1PYmo9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVtTmFtZUlkKTsNCgkgICAgIGlmIChyZW1PYmogIT0gbnVsbCl7DQoJICAgICAgdmFyIGZsZE9iaj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbGROYW1lSWQpOw0KCSAgICAgIGlmIChmbGRPYmogIT0gbnVsbCAmJiBmbGRPYmoudmFsdWUubGVuZ3RoID4gMCl7DQoJICAgICAgICAgIHJlbU9iai5pbm5lckhUTUw9IHJlbWxibCArICgwICsgbGltaXQgIC0gKGZsZE9iai52YWx1ZS5sZW5ndGggKSk7DQoJICAgICAgfWVsc2V7DQoJICAgICAgICAgIHJlbU9iai5pbm5lckhUTUw9cmVtbGJsICsgbGltaXQ7IA0KCSAgICAgIH0NCgkgICAgIH0NCgl9DQoNCgkvL3VwZGF0ZSB0aGUgbnVtYmVyIG9mIHRoZSByZW1haW5pbmcgY2hhcmFjdGVycyBnaXZlbiBpbiB0aGUgM3JkIHBhcmFtdGVyIA0KCWZ1bmN0aW9uIGNoZWNrTGVuZ3RoUmVtYWluaW5nT25LZXlQcmVzcyhvYmosIGxpbWl0LCByZW1OYW1lSWQpIHsNCgkgICAgZG9jdW1lbnQuZm9ybXNbY3VycmVudEZvcm1dLmlzRGlydHkudmFsdWU9ICd0cnVlJzsNCgkJdmFyIHJlbWxibCA9ICJSZW1haW5pbmcgQ2hhcmFjdGVyczoiOyAgDQoJCXZhciByZW1vT2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVtTmFtZUlkKTsNCgkJaWYgKHJlbW9PYmogIT0gbnVsbCkgew0KCQkJaWYgKG9iai52YWx1ZS5sZW5ndGggPiBsaW1pdCkgew0KCQkJCXJlbW9PYmouaW5uZXJIVE1MID0gcmVtbGJsICsgMDsNCgkJCX0gZWxzZSB7DQoJCQkJcmVtb09iai5pbm5lckhUTUwgPSByZW1sYmwgKyAobGltaXQgLSBvYmoudmFsdWUubGVuZ3RoKTsNCgkJCX0NCgkJfQ0KCQ0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoJICAgIAkNCgkNCiAgLy9mb3JjZSB1c2VyIHRvIHJlZHVjZSBudW1iZXIgb2YgY2hhcmFjdGVyIGlmIGV4Y2VlZGVzIGEgbGltaXQgb24gaW5wdXQgdGV4dCBhcmVhDQoJZnVuY3Rpb24gY2hlY2tMZW5ndGhPbkJsdXIob2JqLGxpbWl0KXsNCgkJaWYgKG9iai52YWx1ZS5sZW5ndGggPiAgbGltaXQgKXsNCgkJCSAgb2JqLmNsYXNzTmFtZT0iZm9ybS1lbGVtZW50LWVycm9yIjsNCgkJCSAgb2JqLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ieWVsbG93IjsNCgkJCSAgYWxlcnQoIllvdSBoYXZlIGV4Y2VlZGVkIHRoZSAiICsgbGltaXQgKyAiIGNoYXJhY3RlciBsaW1pdCwgcGxlYXNlIGVkaXQiKTsNCgkJCSAgb2JqLmZvY3VzKCk7DQoJCQkgIHJldHVybiBmYWxzZTsNCgkJfQ0KCQlvYmouc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ3aGl0ZSI7DQoJCW9iai5jbGFzc05hbWU9ImZvcm0tZWxlbWVudCI7DQoJCXJldHVybiB0cnVlOw0KCX0NCg0KCS8vcmVzdHJpY3RzIG51bWJlciBvZiBjaGFyYWN0ZXJzIGVudGVyZWQgYW5kIGFsZXJ0IHVzZXIgd2hpbGUgdHlwaW5nIG9uIHRleHQgYXJlYQ0KCWZ1bmN0aW9uIGNoZWNrTGVuZ3RoT25LZXlQcmVzcyhvYmosbGltaXQpew0KCSAgICB2YXIga2V5UHJlc3NlZCA9IGV2ZW50LmtleUNvZGU7DQoJICAgIHN3aXRjaCAoa2V5UHJlc3NlZCl7DQoJICAgICAgIGNhc2UgODogLy9ia3Nwcw0KCSAgICAgICBjYXNlIDQ2OiAvL2RlbGV0ZQ0KCSAgICAJICAgaWYgKG9iai52YWx1ZS5sZW5ndGggPCBsaW1pdCArIDIpIHsNCgkgICAgCQkgICBvYmouY2xhc3NOYW1lPSJmb3JtLWVsZW1lbnQiOw0KCSAgICAJCSAgIG9iai5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IndoaXRlIjsNCgkgICAgCQkgICByZXR1cm4gdHJ1ZTsNCgkgICAgCSAgIH0NCgkgICAgCSAgIGJyZWFrOw0KCSAgICAgICAgZGVmYXVsdDoNCgkgICAgCSAgIGlmIChvYmoudmFsdWUubGVuZ3RoID4gbGltaXQgKyAxICl7DQoJCQkJCW9iai52YWx1ZSA9IG9iai52YWx1ZS5zdWJzdHIoMCxsaW1pdCk7DQoJCQkJCW9iai5jbGFzc05hbWU9ImZvcm0tZWxlbWVudC1lcnJvciI7DQoJCQkJCW9iai5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9InllbGxvdyI7DQoJCQkJCWFsZXJ0KCJZb3UgaGF2ZSByZWFjaGVkIHRoZSAiICsgbGltaXQgKyAiIGNoYXJhY3RlciBsaW1pdC4iKTsNCgkJCQkJb2JqLmZvY3VzKCk7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9DQoJCQkgICBicmVhazsNCgkgICAgIH0NCgkJcmV0dXJuIHRydWU7DQoJfQ0KCS8vIENRIDMyNTYyDQoJLy9mb3JjZSB1c2VyIHRvIHJlZHVjZSBudW1iZXIgb2YgY2hhcmFjdGVyIGlmIGV4Y2VlZGVzIGEgbGltaXQgb24gaW5wdXQgdGV4dCBhcmVhDQoJZnVuY3Rpb24gY2hlY2tMaW1pdE9uQmx1cihvYmosIGxpbWl0LCByZXBvcnRpbmdJZCl7DQoJCWlmKHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJlcG9ydGluZ0lkKS5pbm5lclRleHQsIDEwKSA8IDAgKXsNCgkJCSAgb2JqLmNsYXNzTmFtZT0iZm9ybS1lbGVtZW50LWVycm9yIjsNCgkJCSAgb2JqLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ieWVsbG93IjsNCgkJCSAgYWxlcnQoIllvdSBoYXZlIGV4Y2VlZGVkIHRoZSAiICsgbGltaXQgKyAiIGNoYXJhY3RlciBsaW1pdCwgcGxlYXNlIGVkaXQiKTsNCgkJCSAgb2JqLmZvY3VzKCk7DQoJCQkgIHJldHVybiBmYWxzZTsNCgkJfQ0KCQlvYmouc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ3aGl0ZSI7DQoJCW9iai5jbGFzc05hbWU9ImZvcm0tZWxlbWVudCI7DQoJCXJldHVybiB0cnVlOw0KCX0NCgkvLyBDUSAzMjU2Mg0KCS8vcmVzdHJpY3RzIG51bWJlciBvZiBjaGFyYWN0ZXJzIGVudGVyZWQgYW5kIGFsZXJ0IHVzZXIgd2hpbGUgdHlwaW5nIG9uIHRleHQgYXJlYQ0KCWZ1bmN0aW9uIGNoZWNrTGltaXRPbktleURvd24ob2JqLCBsaW1pdCwgcmVwb3J0aW5nSWQpew0KCQl2YXIga2V5UHJlc3NlZCA9IGV2ZW50LmtleUNvZGU7DQoJCXZhciByZW1haW5pbmdDb3VudCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJlcG9ydGluZ0lkKS5pbm5lclRleHQsIDEwKTsNCgkJDQoJCXN3aXRjaCAoa2V5UHJlc3NlZCl7DQoJCS8vIFNraXAga2V5IHByZXNzIHRoYXQgd291bGQgbm90IGNoYW5nZSB0aGUgY2hhcmFjdGVyIHJlbWFpbmluZyBjb3VudCBmb3IgdGhlIHRleHQgYXJlYS4NCgkJCWNhc2UgOTogLy8gVGFiDQoJCQljYXNlIDE2OiAvLyBTaGlmdA0KCQkJY2FzZSAxNzogLy8gQ3RybA0KCQkJY2FzZSAxODogLy8gQWx0DQoJCQljYXNlIDE5OiAvLyBQYXVzZS9CcmVhaw0KCQkJY2FzZSAyMDogLy8gQ2FwcyBMb2NrDQoJCQljYXNlIDI3OiAvLyBFc2MNCgkJCWNhc2UgMzM6IC8vIFBhZ2UgVXANCgkJCWNhc2UgMzQ6IC8vIFBhZ2UgRG93bg0KCQkJY2FzZSAzNTogLy8gRW5kDQoJCQljYXNlIDM2OiAvLyBIb21lDQoJCQljYXNlIDM3OiAvLyBMZWZ0IEFycm93DQoJCQljYXNlIDM4OiAvLyBVcCBBcnJvdw0KCQkJY2FzZSAzOTogLy8gUmlnaHQgQXJyb3cNCgkJCWNhc2UgNDA6IC8vIERvd24gQXJyb3cNCgkJCWNhc2UgNDQ6IC8vIFBydFNjcm4NCgkJCWNhc2UgNDU6IC8vIEluc2VydA0KCQkJY2FzZSA5MTogLy8gTGVmdCBXaW5kb3cgS2V5IFN0YXJ0DQoJCQljYXNlIDkyOiAvLyBSaWdodCBXaW5kb3cgS2V5IFN0YXJ0DQoJCQljYXNlIDkzOiAvLyBXaW5kb3cgS2V5IE1lbnUNCgkJCWNhc2UgMTEyOiAvLyBGMQ0KCQkJY2FzZSAxMTM6IC8vIEYyDQoJCQljYXNlIDExNDogLy8gRjMNCgkJCWNhc2UgMTE1OiAvLyBGNA0KCQkJY2FzZSAxMTY6IC8vIEY1DQoJCQljYXNlIDExNzogLy8gRjYNCgkJCWNhc2UgMTE4OiAvLyBGNw0KCQkJY2FzZSAxMTk6IC8vIEY4DQoJCQljYXNlIDEyMDogLy8gRjkNCgkJCWNhc2UgMTIxOiAvLyBGMTANCgkJCWNhc2UgMTIyOiAvLyBGMTENCgkJCWNhc2UgMTIzOiAvLyBGMTINCgkJCWNhc2UgMTQ0OiAvLyBOdW0gTG9jaw0KCQkJY2FzZSAxNDU6IC8vIFNjcm9sbCBMb2NrDQoJCQljYXNlIDE3MzogLy8gTXV0ZSB0b2dnbGUNCgkJCWNhc2UgMTc0OiAvLyBWb2x1bWUgRG93bg0KCQkJY2FzZSAxNzU6IC8vIFZvbHVtZSBVcA0KCQkJY2FzZSAxMjogIC8vIE51bWtleSBwYWQgJzUnIHdpdGhvdXQgbnVtbG9jaw0KCQkJY2FzZSAxNzI6IC8vIEJyb3dzZXINCgkJCWNhc2UgMTgwOiAvLyBNYWlsDQoJCQljYXNlIDE4MjogLy8gQ29tcHV0ZXINCgkJCWNhc2UgMTgzOiAvLyBDYWxjdWxhdG9yDQoJCQljYXNlIDE3NzogLy8gU2tpcCBCYWNrDQoJCQljYXNlIDE3OTogLy8gUGxheS9QYXVzZQ0KCQkJY2FzZSAxNzY6IC8vIFNraXAgRm9yd2FyZA0KCQkJY2FzZSAxODE6IC8vIE11c2ljDQoJCQkJcmV0dXJuIHRydWU7DQoJCQkJYnJlYWs7DQogICAgICAgCQljYXNlIDg6IC8vYmtzcHMNCiAgICAgICAJCWNhc2UgNDY6IC8vZGVsZXRlDQogICAgCQkgICAJcmV0dXJuIHRydWU7DQogICAgCQkgICAJYnJlYWs7DQogICAgCSAgIAlkZWZhdWx0Og0KICAgIAkgICAJCWlmKHJlbWFpbmluZ0NvdW50IDwgMCkgew0KICAgIAkJCQlyZXR1cm4gZmFsc2U7DQogICAgCQkJfQ0KICAgIAkgICAJCWJyZWFrOw0KICAgIAl9DQoJCXJldHVybiB0cnVlOw0KfQ0KCS8vIENRIDMyNTYyDQoJLy8gVmFsaWRhdGlvbiBmb3IgbnVtYmVyIG9mIGNoYXJhY3RlcnMgZW50ZXJlZCBpbiBvbTp0ZXh0YXJlYQ0KCS8vIFVzZSBpbiBvbmtleXVwIGV2ZW50IGZvciBhIG9tOnRleHRhcmVhDQoJZnVuY3Rpb24gY2hlY2tMaW1pdE9uS2V5VXAob2JqLCBsaW1pdCwgcmVwb3J0aW5nSWQpew0KCQl2YXIgcmVtYWluaW5nQ291bnQgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZXBvcnRpbmdJZCkuaW5uZXJUZXh0LCAxMCk7DQoJCXZhciB0ZXh0Ow0KCQkNCgkJdGV4dCA9IG9iai50ZXh0Q29udGVudDsNCgkJdmFyIHNvbWVBcnJheSA9IHRleHQuc3BsaXQoL1xuLyk7DQoJCS8vd2luZG93LmFsZXJ0KHNvbWVBcnJheS5sZW5ndGgpOw0KCQkvL3dpbmRvdy5hbGVydCh0ZXh0Lmxlbmd0aCk7DQoJCWlmKCh0ZXh0Lmxlbmd0aCArIHNvbWVBcnJheS5sZW5ndGggLSAxKSA+IGxpbWl0KSB7DQoNCgkJCS8vIFNob3cgZXJyb3Igb25seSBvbmNlIGFmdGVyIGl0IHdhcyBoaWdobGlnaHRlZCB5ZWxsb3cuDQoJCQlpZihvYmouc3R5bGUuYmFja2dyb3VuZENvbG9yICE9ICJ5ZWxsb3ciKSB7DQoJICAgCQkJLy8gQ2xlYXIgdGhlIHJlbWFpbmluZyBjaGFyYWN0ZXIgY291bnQgdG8gcHJldmVudCBjaGVja0xpbWl0T25CbHVyKCkgZnJvbSBzaG93aW5nDQoJICAgCQkJLy8gYW5vdGhlciBhbGVydCBib3ggcmlnaHQgYWZ0ZXIgdGhlIHVzZXIgY2xpY2tzIG9rIG9uIHRoZSBhbGVydCBib3ggaW4gdGhpcyBmdW5jdGlvbi4NCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZXBvcnRpbmdJZCkuaW5uZXJUZXh0ID0gJzAnOw0KDQoJCQkJYWxlcnQoIllvdSBoYXZlIGV4Y2VlZGVkIHRoZSAiICsgbGltaXQgKyAiIGNoYXJhY3RlciBsaW1pdCwgcGxlYXNlIGVkaXQiKTsNCg0KCQkJCW9iai5jbGFzc05hbWU9ImZvcm0tZWxlbWVudC1lcnJvciI7DQoJCQkJb2JqLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ieWVsbG93IjsNCgkJCQlvYmouZm9jdXMoKTsNCgkgICAJCQkvLyBSZXN0b3JlIHRoZSByZW1haW5pbmcgY2hhcmFjdGVyIGNvdW50IG5vdyB0aGF0IHRoZSBjaGVja0xpbWl0T25CbHVyKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQNCgkgICAJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZXBvcnRpbmdJZCkuaW5uZXJUZXh0ID0gcmVtYWluaW5nQ291bnQ7DQoJCQl9DQoJCQkNCgkJfSBlbHNlIHsNCgkJCW9iai5jbGFzc05hbWU9ImZvcm0tZWxlbWVudCI7DQoJCSAgIAlvYmouc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ3aGl0ZSI7DQoJCX0NCgkJDQoJCQ0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoJDQoJLy8gQ1IgNjM2Nw0KCWZ1bmN0aW9uIGNvbmZpcm1EZWxldGUobWVzc2FnZSkgew0KCQlpZihtZXNzYWdlID09IG51bGwgfHwgbWVzc2FnZSA9PSAnJykgew0KCQkgCW1lc3NhZ2UgPSAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHJlY29yZD8nOw0KCQl9DQoNCgkJaWYgKGNvbmZpcm0obWVzc2FnZSkpDQoJCXsNCgkJCXJldHVybiB0cnVlOw0KCQl9ZWxzZXsNCgkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJfQ0KCQ0KCWZ1bmN0aW9uIG9wZW5WaXBNZXNzYWdlKG1lc3NhZ2UpDQoJew0KCQl2YXIgd2luV2lkdGggPSA0MjA7DQoJCXZhciB3aW5IZWlnaHQgPSAyNDA7DQoJCXZhciB1cmwgPSAiL09NTklTdGF0aWMvZGlhbG9ncy92aXBNZXNzYWdlRGlhbG9nLmh0bWwiOw0KCQl2YXIgcGFyYW1ldGVycyA9IG5ldyBBcnJheSgpOwkNCgkJcGFyYW1ldGVyc1swXSA9IG1lc3NhZ2U7DQoJCXdpbmRvdy5zaG93TW9kYWxEaWFsb2codXJsLHBhcmFtZXRlcnMsImRpYWxvZ1dpZHRoOiIgKyB3aW5XaWR0aCArICIgcHg7ZGlhbG9nSGVpZ2h0OiIgKyB3aW5IZWlnaHQgKyAicHg7Y2VudGVyOjE7aGVscDowO3N0YXR1czowO2xvY2F0aW9uPW5vLG1lbnViYXI9MCxyZXNpemFibGU9MCIpOw0KCX0NCg0KCS8vIENRIDM0MTk1IA0KCWZ1bmN0aW9uIEdldFVSTFBhcmFtZXRlcihzUGFyYW0pDQoJew0KCSAgICB2YXIgc1BhZ2VVUkwgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTsNCgkgICAgdmFyIHNVUkxWYXJpYWJsZXMgPSBzUGFnZVVSTC5zcGxpdCgnJicpOw0KCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNVUkxWYXJpYWJsZXMubGVuZ3RoOyBpKyspIA0KCSAgICB7DQoJICAgICAgICB2YXIgc1BhcmFtZXRlck5hbWUgPSBzVVJMVmFyaWFibGVzW2ldLnNwbGl0KCc9Jyk7DQoJICAgICAgICBpZiAoc1BhcmFtZXRlck5hbWVbMF0gPT0gc1BhcmFtKSANCgkgICAgICAgIHsNCgkgICAgICAgICAgICByZXR1cm4gc1BhcmFtZXRlck5hbWVbMV07DQoJICAgICAgICB9DQoJICAgIH0NCgl9DQoJZnVuY3Rpb24gU2V0RmllbGRFbXB0eUJ5SWQoSWQpDQoJew0KICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSWQpICE9IG51bGwpIA0KICAgICAgICB7CQ0KICAgICAgICAJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSWQpLnZhbHVlID0gIiI7DQogICAgICAgIH0NCgl9DQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="21" hostname="omniconv" path="/OMNIStatic/scripts/common-deferred-scripts.js" url="http://omniconv/OMNIStatic/scripts/common-deferred-scripts.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="9" startDateTime="2018-08-14T12:26:56.615-07:00" startTime="2156" endTime="2186" sendTime="4" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvY29tbW9uLWRlZmVycmVkLXNjcmlwdHMuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTU3Ng==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDVhY2M2ZGRhOGVkMzE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDE1NzYNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ly8gY29tbW9uLWRlZmVycmVkLXNjcmlwdHMuanMNCi8vIERlZmVjdCA5NzU5DQovLyBEZWZlY3QgMTAzOTMNCi8vIGNoYW5nZWQgZm9yIGRlZmVjdCAxMTA5NSAtIG9ubHkgY2hhbmdlIHRoZSBsaW5rcyBpbiB0aGUgJ3BhZ2UtbGluaycgc3BhbiAocmVwbGFjZXMgY2hhbmdlcyBmb3IgMTAzOTMgYW5kIDk3NTkpDQoNCi8vIENRMjIyNjcgLSBkaXNwbGF5dGFibGUucHJvcGVydGllcyBub3cgaW5jbHVkZXMgYSBwcm9wZXJ0eSwgImJhc2ljLmhlYWRlciIsIHRoYXQgcGVybWl0cyBjdXN0b20gdGFibGUgaGVhZGVycw0KLy8gd2hpY2ggbWFrZXMgdGhpcyBmaXJzdCBibG9jayBvZiBzdGF0aWMgY29kZSBtb290Lg0KDQovLyBDUTIxNjE4IC0gRGlzcGxheVRhYmxlJ3Mgc29ydGFibGUgY29sdW1uIGxpbmtzIGFyZSBiZWluZyBtaXNzZWQgaW4gdGhlIGJlbG93IHBhZ2UtbGluayBsb2dpYw0KLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gZGlzcGxheXRhYmxlLnByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoZSBjb2x1bW4gc29ydGFibGUgbGlua3MNCi8vIFNvLCB3ZSBkbyBhIGxpdHRsZSBET00gbWFuaXB1bGF0aW9uIGFuZCBtb3ZlIHRoZSBhbmNob3IgdGFnIGludG8gYSBzcGFuIHRhZyB0byBtYXRjaCB0aGUgcGFnaW5hdGlvbiBsaW5rcy4NCi8vIFRoaXMgd2F5LCB0aGV5IHdpbGwgYWxzbyBnZXQgZGlzYWJsZWQgd2hlbiB0aGUgcGFnZS1saW5rIGxvZ2ljIHJ1bnMuDQovL3ZhciB0aHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGgiKTsNCi8vQ1EyMjI5NCAtIGNoYW5nZSB0aGUgdmFyaWFibGUgbmFtZSBmcm9tICdpJywgYXMgaXQgaXMgcHV0IGluIGdsb2JhbCBzY29wZSwgYW5kIG1lc3NlcyB3aXRoIHRoZSBncm91cE1vdmUgc2NyZWVuLiAod2hpY2ggYWxzbyBoYXMgYSB2YXJpYWJsZSBuYW1lZCAnaScgaW4gZ2xvYmFsIHNjb3BlKQ0KLy9mb3IgKHZhciB0aHNJbmRleD0wOyB0aHNJbmRleCA8IHRocy5sZW5ndGg7IHRoc0luZGV4KyspIHsNCi8vCXZhciBjbGFzc05hbWUgPSAiIiArIHRoc1t0aHNJbmRleF0uY2xhc3NOYW1lOw0KLy8JaWYgKGNsYXNzTmFtZS5tYXRjaCgvc29ydGFibGUvKSkgew0KLy8JCXZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KLy8JCXNwYW4uY2xhc3NOYW1lID0gJ3BhZ2UtbGluayc7DQovLwkJdGhzW3Roc0luZGV4XS5hcHBlbmRDaGlsZChzcGFuKTsNCi8vDQovLwkJdmFyIGFzID0gdGhzW3Roc0luZGV4XS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpOw0KLy8JCWZvciAodmFyIGo9MDsgajxhcy5sZW5ndGg7IGorKykgew0KLy8JCQlzcGFuLmFwcGVuZENoaWxkKGFzW2pdKTsNCi8vCQl9DQovLwl9DQovL30NCg0KLy9maW5kIGFsbCBvZiB0aGUgc3BhbiBlbGVtZW50cyBpbiB0aGUgZG9jdW1lbnQNCnZhciBmaW5kU3RhY2sgPSBbXSwgYWxsZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3BhbiIpOw0KdmFyIGxlbiA9IGFsbGVsLmxlbmd0aDsNCi8vYWxlcnQobGVuKTsNCmZvcih2YXIgYSA9IDA7IGE8YWxsZWwubGVuZ3RoOyBhKyspIHsNCgkvL21hdGNoIGFsbCBvZiB0aGUgc3BhbnMgdGhhdCBhcmUgdHlwZSAncGFnZS1saW5rJyAocGFnaW5hdGlvbiBzcGFuIGZvciBkaXNwbGF5IHRhYmxlcykNCglpZihhbGxlbFthXS5jbGFzc05hbWUgPT0gJ3BhZ2UtbGluaycpew0KCQkvL2FsZXJ0KCJtYXRjaGVkIik7DQoJCXZhciBjZWxscyA9IGFsbGVsW2FdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7DQoJCXZhciBvbGQ7DQoJCWZvciAodmFyIGVDb3VudCA9IDA7IGVDb3VudCA8IGNlbGxzLmxlbmd0aDsgZUNvdW50KyspIHsNCgkJCS8vbWF0Y2ggYWxsIG9mIHRoZSBocmVmIHRhZ3Mgd2l0aGluIHRoZSAncGFnZS1saW5rJyBzcGFuIGFuZCByZXBsYWNlIHRoZSBsaW5rIHdpdGggc3BlY2lhbCBqYXZhc2NyaXB0IGxpbmsgZGlzYWJsaW5nDQoJCQlvbGQgPSBjZWxsc1tlQ291bnRdLmdldEF0dHJpYnV0ZSgiaHJlZiIpOw0KCQkJLy8gQ1EyMzQxNiAtIFVSTCBoYWQgc3BlY2lhbCBjaGFyYWN0ZXJzIChpLmUuIHNpbmdsZSBxdW90ZSAnKSB0aGF0IHdhcyBicmVha2luZyB0aGUgbGluaw0KCQkJLy9KYW4gNyAyMDEyIC0gY2hhbmdlZCBmcm9tIGVuY29kZVVSSSB0byBlc2NhcGUgKGFjY29yZGluZyB0byB3MyBzY2hvb2xzIHNhbWUgZnVuY3Rpb24ganVzdCBjb3ZlcnMgbW9yZSBzcGVjaWFsIGNoYXJzKQ0KCQkJb2xkID0gZXNjYXBlKG9sZCk7DQoJCQkvL2ZpeCBmb3IgZGVmZWN0IDEyNzA3IC0gd2UgYXJlIHdyYXBwaW5nIHRoZSBsb2NhdGlvbiByZXNldCBpbnRvIGEgZnVuY3Rpb24gc28gd2UgY2FuIG92ZXJyaWRlIHRoZSB1cmwuDQoJCQkvLyBGb3IgQ1EyNjM2OCAoQ1EyMzQxNik6IERlbGltZXRlZCBVUkwgd2l0aCBkb3VibGUgcXVvdGVzIGJlY2F1c2UgZW5jb2RlZCBzaW5nbGUgcXVvdGUgaXMgZGVjb2RlZCBiZWZvcmUgYmVpbmcgcGFzc2VkDQoJCQkvLyB0byByZXNldFVybCgpIGZ1bmN0aW9uIGNhdXNpbmcgc3RyaW5nIHRvIGJlIGVuZGVkIHByZW1hdHVyZWx5IGFuZCBnZW5lcmF0aW5nIGphdmFzY2lwdCBlcnJvcjogRXhwZWN0ZWQgJyknDQoJCQljZWxsc1tlQ291bnRdLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OmdldEVsZW1lbnRzT2ZUaGVDbGFzc05hbWUoJ3BhZ2UtbGluaycpO3Jlc2V0VXJsKFwiIiArIG9sZCArICJcIik7Iik7DQoJCQkNCgkJCW9sZCA9IGNlbGxzW2VDb3VudF0uZ2V0QXR0cmlidXRlKCJvbmNsaWNrIik7DQoJCQljZWxsc1tlQ291bnRdLnNldEF0dHJpYnV0ZSgib25jbGljayIsICJpZiAoaGFzRGlzYWJsZWRDbGFzcyh0aGlzKSkgcmV0dXJuIGZhbHNlOyAiICsgb2xkKTsNCgkJfQ0KCX0NCn0NCg0KDQoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="22" hostname="omniconv" path="/OMNIStatic/scripts/jquery/jquery-1.9.1.min.js" url="http://omniconv/OMNIStatic/scripts/jquery/jquery-1.9.1.min.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="10" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2212" sendTime="25" waitTime="0" receiveTime="23">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS0xLjkuMS5taW4uanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>NDE0NDQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDVhY2M2ZGRhOGVkMzE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDQxNDQ0DQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyohIGpRdWVyeSB2MS45LjEgfCAoYykgMjAwNSwgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZQ0KLy9AIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXANCiovKGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXR5cGVvZiB0LG89ZS5kb2N1bWVudCxhPWUubG9jYXRpb24scz1lLmpRdWVyeSx1PWUuJCxsPXt9LGM9W10scD0iMS45LjEiLGY9Yy5jb25jYXQsZD1jLnB1c2gsaD1jLnNsaWNlLGc9Yy5pbmRleE9mLG09bC50b1N0cmluZyx5PWwuaGFzT3duUHJvcGVydHksdj1wLnRyaW0sYj1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgYi5mbi5pbml0KGUsdCxyKX0seD0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSx3PS9cUysvZyxUPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZyxOPS9eKD86KDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLGs9L15bXF0sOnt9XHNdKiQvLEU9Lyg/Ol58OnwsKSg/OlxzKlxbKSsvZyxTPS9cXCg/OlsiXFxcL2JmbnJ0XXx1W1xkYS1mQS1GXXs0fSkvZyxBPS8iW14iXFxcclxuXSoifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxkK1wufClcZCsoPzpbZUVdWystXT9cZCt8KS9nLGo9L14tbXMtLyxEPS8tKFtcZGEtel0pL2dpLEw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSxIPWZ1bmN0aW9uKGUpeyhvLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWUudHlwZXx8ImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZSkmJihxKCksYi5yZWFkeSgpKX0scT1mdW5jdGlvbigpe28uYWRkRXZlbnRMaXN0ZW5lcj8oby5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixILCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEgsITEpKTooby5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixIKSxlLmRldGFjaEV2ZW50KCJvbmxvYWQiLEgpKX07Yi5mbj1iLnByb3RvdHlwZT17anF1ZXJ5OnAsY29uc3RydWN0b3I6Yixpbml0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxhO2lmKCFlKXJldHVybiB0aGlzO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7aWYoaT0iPCI9PT1lLmNoYXJBdCgwKSYmIj4iPT09ZS5jaGFyQXQoZS5sZW5ndGgtMSkmJmUubGVuZ3RoPj0zP1tudWxsLGUsbnVsbF06Ti5leGVjKGUpLCFpfHwhaVsxXSYmbilyZXR1cm4hbnx8bi5qcXVlcnk/KG58fHIpLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3RvcihuKS5maW5kKGUpO2lmKGlbMV0pe2lmKG49biBpbnN0YW5jZW9mIGI/blswXTpuLGIubWVyZ2UodGhpcyxiLnBhcnNlSFRNTChpWzFdLG4mJm4ubm9kZVR5cGU/bi5vd25lckRvY3VtZW50fHxuOm8sITApKSxDLnRlc3QoaVsxXSkmJmIuaXNQbGFpbk9iamVjdChuKSlmb3IoaSBpbiBuKWIuaXNGdW5jdGlvbih0aGlzW2ldKT90aGlzW2ldKG5baV0pOnRoaXMuYXR0cihpLG5baV0pO3JldHVybiB0aGlzfWlmKGE9by5nZXRFbGVtZW50QnlJZChpWzJdKSxhJiZhLnBhcmVudE5vZGUpe2lmKGEuaWQhPT1pWzJdKXJldHVybiByLmZpbmQoZSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWF9cmV0dXJuIHRoaXMuY29udGV4dD1vLHRoaXMuc2VsZWN0b3I9ZSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1lLHRoaXMubGVuZ3RoPTEsdGhpcyk6Yi5pc0Z1bmN0aW9uKGUpP3IucmVhZHkoZSk6KGUuc2VsZWN0b3IhPT10JiYodGhpcy5zZWxlY3Rvcj1lLnNlbGVjdG9yLHRoaXMuY29udGV4dD1lLmNvbnRleHQpLGIubWFrZUFycmF5KGUsdGhpcykpfSxzZWxlY3RvcjoiIixsZW5ndGg6MCxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3RoaXMudG9BcnJheSgpOjA+ZT90aGlzW3RoaXMubGVuZ3RoK2VdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1iLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdC5jb250ZXh0PXRoaXMuY29udGV4dCx0fSxlYWNoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuZWFjaCh0aGlzLGUsdCl9LHJlYWR5OmZ1bmN0aW9uKGUpe3JldHVybiBiLnJlYWR5LnByb21pc2UoKS5kb25lKGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGguYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpkLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxiLmZuLmluaXQucHJvdG90eXBlPWIuZm4sYi5leHRlbmQ9Yi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxvLGEscz1hcmd1bWVudHNbMF18fHt9LHU9MSxsPWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1sxXXx8e30sdT0yKSwib2JqZWN0Ij09dHlwZW9mIHN8fGIuaXNGdW5jdGlvbihzKXx8KHM9e30pLGw9PT11JiYocz10aGlzLC0tdSk7bD51O3UrKylpZihudWxsIT0obz1hcmd1bWVudHNbdV0pKWZvcihpIGluIG8pZT1zW2ldLHI9b1tpXSxzIT09ciYmKGMmJnImJihiLmlzUGxhaW5PYmplY3Qocil8fChuPWIuaXNBcnJheShyKSkpPyhuPyhuPSExLGE9ZSYmYi5pc0FycmF5KGUpP2U6W10pOmE9ZSYmYi5pc1BsYWluT2JqZWN0KGUpP2U6e30sc1tpXT1iLmV4dGVuZChjLGEscikpOnIhPT10JiYoc1tpXT1yKSk7cmV0dXJuIHN9LGIuZXh0ZW5kKHtub0NvbmZsaWN0OmZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT1iJiYoZS4kPXUpLHQmJmUualF1ZXJ5PT09YiYmKGUualF1ZXJ5PXMpLGJ9LGlzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGUpe2U/Yi5yZWFkeVdhaXQrKzpiLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oZSl7aWYoZT09PSEwPyEtLWIucmVhZHlXYWl0OiFiLmlzUmVhZHkpe2lmKCFvLmJvZHkpcmV0dXJuIHNldFRpbWVvdXQoYi5yZWFkeSk7Yi5pc1JlYWR5PSEwLGUhPT0hMCYmLS1iLnJlYWR5V2FpdD4wfHwobi5yZXNvbHZlV2l0aChvLFtiXSksYi5mbi50cmlnZ2VyJiZiKG8pLnRyaWdnZXIoInJlYWR5Iikub2ZmKCJyZWFkeSIpKX19LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuImZ1bmN0aW9uIj09PWIudHlwZShlKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iYXJyYXkiPT09Yi50eXBlKGUpfSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09ZS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihlKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChlKSkmJmlzRmluaXRlKGUpfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9sW20uY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe2lmKCFlfHwib2JqZWN0IiE9PWIudHlwZShlKXx8ZS5ub2RlVHlwZXx8Yi5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLCJjb25zdHJ1Y3RvciIpJiYheS5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuITF9Y2F0Y2gobil7cmV0dXJuITF9dmFyIHI7Zm9yKHIgaW4gZSk7cmV0dXJuIHI9PT10fHx5LmNhbGwoZSxyKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSksdD10fHxvO3ZhciByPUMuZXhlYyhlKSxpPSFuJiZbXTtyZXR1cm4gcj9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj1iLmJ1aWxkRnJhZ21lbnQoW2VdLHQsaSksaSYmYihpKS5yZW1vdmUoKSxiLm1lcmdlKFtdLHIuY2hpbGROb2RlcykpfSxwYXJzZUpTT046ZnVuY3Rpb24obil7cmV0dXJuIGUuSlNPTiYmZS5KU09OLnBhcnNlP2UuSlNPTi5wYXJzZShuKTpudWxsPT09bj9uOiJzdHJpbmciPT10eXBlb2YgbiYmKG49Yi50cmltKG4pLG4mJmsudGVzdChuLnJlcGxhY2UoUywiQCIpLnJlcGxhY2UoQSwiXSIpLnJlcGxhY2UoRSwiIikpKT9GdW5jdGlvbigicmV0dXJuICIrbikoKTooYi5lcnJvcigiSW52YWxpZCBKU09OOiAiK24pLHQpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHwic3RyaW5nIiE9dHlwZW9mIG4pcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLCJ0ZXh0L3htbCIpKToocj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLHIuYXN5bmM9ImZhbHNlIixyLmxvYWRYTUwobikpfWNhdGNoKG8pe3I9dH1yZXR1cm4gciYmci5kb2N1bWVudEVsZW1lbnQmJiFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8Yi5lcnJvcigiSW52YWxpZCBYTUw6ICIrbikscn0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbih0KXt0JiZiLnRyaW0odCkmJihlLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKHQpe2UuZXZhbC5jYWxsKGUsdCl9KSh0KX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaiwibXMtIikucmVwbGFjZShELEwpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKTtpZihuKXtpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTp2JiYhdi5jYWxsKCJcdWZlZmZcdTAwYTAiKT9mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKFQsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKE0oT2JqZWN0KGUpKT9iLm1lcmdlKG4sInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKTpkLmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYodCl7aWYoZylyZXR1cm4gZy5jYWxsKHQsZSxuKTtmb3Iocj10Lmxlbmd0aCxuPW4/MD5uP01hdGgubWF4KDAscituKTpuOjA7cj5uO24rKylpZihuIGluIHQmJnRbbl09PT1lKXJldHVybiBufXJldHVybi0xfSxtZXJnZTpmdW5jdGlvbihlLG4pe3ZhciByPW4ubGVuZ3RoLGk9ZS5sZW5ndGgsbz0wO2lmKCJudW1iZXIiPT10eXBlb2Ygcilmb3IoO3I+bztvKyspZVtpKytdPW5bb107ZWxzZSB3aGlsZShuW29dIT09dCllW2krK109bltvKytdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGg7Zm9yKG49ISFuO2E+bztvKyspcj0hIXQoZVtvXSxvKSxuIT09ciYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKSxzPVtdO2lmKGEpZm9yKDtvPmk7aSsrKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKHNbcy5sZW5ndGhdPXIpO2Vsc2UgZm9yKGkgaW4gZSlyPXQoZVtpXSxpLG4pLG51bGwhPXImJihzW3MubGVuZ3RoXT1yKTtyZXR1cm4gZi5hcHBseShbXSxzKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvO3JldHVybiJzdHJpbmciPT10eXBlb2YgbiYmKG89ZVtuXSxuPWUsZT1vKSxiLmlzRnVuY3Rpb24oZSk/KHI9aC5jYWxsKGFyZ3VtZW50cywyKSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobnx8dGhpcyxyLmNvbmNhdChoLmNhbGwoYXJndW1lbnRzKSkpfSxpLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Yi5ndWlkKyssaSk6dH0sYWNjZXNzOmZ1bmN0aW9uKGUsbixyLGksbyxhLHMpe3ZhciB1PTAsbD1lLmxlbmd0aCxjPW51bGw9PXI7aWYoIm9iamVjdCI9PT1iLnR5cGUocikpe289ITA7Zm9yKHUgaW4gciliLmFjY2VzcyhlLG4sdSxyW3VdLCEwLGEscyl9ZWxzZSBpZihpIT09dCYmKG89ITAsYi5pc0Z1bmN0aW9uKGkpfHwocz0hMCksYyYmKHM/KG4uY2FsbChlLGkpLG49bnVsbCk6KGM9bixuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYy5jYWxsKGIoZSksbil9KSksbikpZm9yKDtsPnU7dSsrKW4oZVt1XSxyLHM/aTppLmNhbGwoZVt1XSx1LG4oZVt1XSxyKSkpO3JldHVybiBvP2U6Yz9uLmNhbGwoZSk6bD9uKGVbMF0scik6YX0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSksYi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe2lmKCFuKWlmKG49Yi5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1vLnJlYWR5U3RhdGUpc2V0VGltZW91dChiLnJlYWR5KTtlbHNlIGlmKG8uYWRkRXZlbnRMaXN0ZW5lcilvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEgsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsSCwhMSk7ZWxzZXtvLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEgpLGUuYXR0YWNoRXZlbnQoIm9ubG9hZCIsSCk7dmFyIHI9ITE7dHJ5e3I9bnVsbD09ZS5mcmFtZUVsZW1lbnQmJm8uZG9jdW1lbnRFbGVtZW50fWNhdGNoKGkpe31yJiZyLmRvU2Nyb2xsJiZmdW5jdGlvbiBhKCl7aWYoIWIuaXNSZWFkeSl7dHJ5e3IuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChlKXtyZXR1cm4gc2V0VGltZW91dChhLDUwKX1xKCksYi5yZWFkeSgpfX0oKX1yZXR1cm4gbi5wcm9taXNlKHQpfSxiLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXtsWyJbb2JqZWN0ICIrdCsiXSJdPXQudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIE0oZSl7dmFyIHQ9ZS5sZW5ndGgsbj1iLnR5cGUoZSk7cmV0dXJuIGIuaXNXaW5kb3coZSk/ITE6MT09PWUubm9kZVR5cGUmJnQ/ITA6ImFycmF5Ij09PW58fCJmdW5jdGlvbiIhPT1uJiYoMD09PXR8fCJudW1iZXIiPT10eXBlb2YgdCYmdD4wJiZ0LTEgaW4gZSl9cj1iKG8pO3ZhciBfPXt9O2Z1bmN0aW9uIEYoZSl7dmFyIHQ9X1tlXT17fTtyZXR1cm4gYi5lYWNoKGUubWF0Y2godyl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9Yi5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/X1tlXXx8RihlKTpiLmV4dGVuZCh7fSxlKTt2YXIgbixyLGksbyxhLHMsdT1bXSxsPSFlLm9uY2UmJltdLGM9ZnVuY3Rpb24odCl7Zm9yKHI9ZS5tZW1vcnkmJnQsaT0hMCxhPXN8fDAscz0wLG89dS5sZW5ndGgsbj0hMDt1JiZvPmE7YSsrKWlmKHVbYV0uYXBwbHkodFswXSx0WzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXtyPSExO2JyZWFrfW49ITEsdSYmKGw/bC5sZW5ndGgmJmMobC5zaGlmdCgpKTpyP3U9W106cC5kaXNhYmxlKCkpfSxwPXthZGQ6ZnVuY3Rpb24oKXtpZih1KXt2YXIgdD11Lmxlbmd0aDsoZnVuY3Rpb24gaSh0KXtiLmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPWIudHlwZShuKTsiZnVuY3Rpb24iPT09cj9lLnVuaXF1ZSYmcC5oYXMobil8fHUucHVzaChuKTpuJiZuLmxlbmd0aCYmInN0cmluZyIhPT1yJiZpKG4pfSl9KShhcmd1bWVudHMpLG4/bz11Lmxlbmd0aDpyJiYocz10LGMocikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdSYmYi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciByO3doaWxlKChyPWIuaW5BcnJheSh0LHUscikpPi0xKXUuc3BsaWNlKHIsMSksbiYmKG8+PXImJm8tLSxhPj1yJiZhLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2IuaW5BcnJheShlLHUpPi0xOiEoIXV8fCF1Lmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHU9W10sdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB1PWw9cj10LHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXV9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gbD10LHJ8fHAuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFsfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fFtdLHQ9W2UsdC5zbGljZT90LnNsaWNlKCk6dF0sIXV8fGkmJiFsfHwobj9sLnB1c2godCk6Yyh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBwLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhaX19O3JldHVybiBwfSxiLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLGIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsYi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsYi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sbj0icGVuZGluZyIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBiLkRlZmVycmVkKGZ1bmN0aW9uKG4pe2IuZWFjaCh0LGZ1bmN0aW9uKHQsbyl7dmFyIGE9b1swXSxzPWIuaXNGdW5jdGlvbihlW3RdKSYmZVt0XTtpW29bMV1dKGZ1bmN0aW9uKCl7dmFyIGU9cyYmcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmYi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/ZS5wcm9taXNlKCkuZG9uZShuLnJlc29sdmUpLmZhaWwobi5yZWplY3QpLnByb2dyZXNzKG4ubm90aWZ5KTpuW2ErIldpdGgiXSh0aGlzPT09cj9uLnByb21pc2UoKTp0aGlzLHM/W2VdOmFyZ3VtZW50cyl9KX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9iLmV4dGVuZChlLHIpOnJ9fSxpPXt9O3JldHVybiByLnBpcGU9ci50aGVuLGIuZWFjaCh0LGZ1bmN0aW9uKGUsbyl7dmFyIGE9b1syXSxzPW9bM107cltvWzFdXT1hLmFkZCxzJiZhLmFkZChmdW5jdGlvbigpe249c30sdFsxXmVdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKSxpW29bMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGlbb1swXSsiV2l0aCJdKHRoaXM9PT1pP3I6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGlbb1swXSsiV2l0aCJdPWEuZmlyZVdpdGh9KSxyLnByb21pc2UoaSksZSYmZS5jYWxsKGksaSksaX0sd2hlbjpmdW5jdGlvbihlKXt2YXIgdD0wLG49aC5jYWxsKGFyZ3VtZW50cykscj1uLmxlbmd0aCxpPTEhPT1yfHxlJiZiLmlzRnVuY3Rpb24oZS5wcm9taXNlKT9yOjAsbz0xPT09aT9lOmIuRGVmZXJyZWQoKSxhPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dFtlXT10aGlzLG5bZV09YXJndW1lbnRzLmxlbmd0aD4xP2guY2FsbChhcmd1bWVudHMpOnIsbj09PXM/by5ub3RpZnlXaXRoKHQsbik6LS1pfHxvLnJlc29sdmVXaXRoKHQsbil9fSxzLHUsbDtpZihyPjEpZm9yKHM9QXJyYXkociksdT1BcnJheShyKSxsPUFycmF5KHIpO3I+dDt0Kyspblt0XSYmYi5pc0Z1bmN0aW9uKG5bdF0ucHJvbWlzZSk/blt0XS5wcm9taXNlKCkuZG9uZShhKHQsbCxuKSkuZmFpbChvLnJlamVjdCkucHJvZ3Jlc3MoYSh0LHUscykpOi0taTtyZXR1cm4gaXx8by5yZXNvbHZlV2l0aChsLG4pLG8ucHJvbWlzZSgpfX0pLGIuc3VwcG9ydD1mdW5jdGlvbigpe3ZhciB0LG4scixhLHMsdSxsLGMscCxmLGQ9by5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZihkLnNldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIiwidCIpLGQuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iLG49ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLHI9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdLCFufHwhcnx8IW4ubGVuZ3RoKXJldHVybnt9O3M9by5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSxsPXMuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksYT1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdLHIuc3R5bGUuY3NzVGV4dD0idG9wOjFweDtmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLHQ9e2dldFNldEF0dHJpYnV0ZToidCIhPT1kLmNsYXNzTmFtZSxsZWFkaW5nV2hpdGVzcGFjZTozPT09ZC5maXJzdENoaWxkLm5vZGVUeXBlLHRib2R5OiFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxzdHlsZTovdG9wLy50ZXN0KHIuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSxocmVmTm9ybWFsaXplZDoiL2EiPT09ci5nZXRBdHRyaWJ1dGUoImhyZWYiKSxvcGFjaXR5Oi9eMC41Ly50ZXN0KHIuc3R5bGUub3BhY2l0eSksY3NzRmxvYXQ6ISFyLnN0eWxlLmNzc0Zsb2F0LGNoZWNrT246ISFhLnZhbHVlLG9wdFNlbGVjdGVkOmwuc2VsZWN0ZWQsZW5jdHlwZTohIW8uY3JlYXRlRWxlbWVudCgiZm9ybSIpLmVuY3R5cGUsaHRtbDVDbG9uZToiPDpuYXY+PC86bmF2PiIhPT1vLmNyZWF0ZUVsZW1lbnQoIm5hdiIpLmNsb25lTm9kZSghMCkub3V0ZXJIVE1MLGJveE1vZGVsOiJDU1MxQ29tcGF0Ij09PW8uY29tcGF0TW9kZSxkZWxldGVFeHBhbmRvOiEwLG5vQ2xvbmVFdmVudDohMCxpbmxpbmVCbG9ja05lZWRzTGF5b3V0OiExLHNocmlua1dyYXBCbG9ja3M6ITEscmVsaWFibGVNYXJnaW5SaWdodDohMCxib3hTaXppbmdSZWxpYWJsZTohMCxwaXhlbFBvc2l0aW9uOiExfSxhLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1hLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWwuZGlzYWJsZWQ7dHJ5e2RlbGV0ZSBkLnRlc3R9Y2F0Y2goaCl7dC5kZWxldGVFeHBhbmRvPSExfWE9by5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGEuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLHQuaW5wdXQ9IiI9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKSxhLnZhbHVlPSJ0IixhLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksdC5yYWRpb1ZhbHVlPSJ0Ij09PWEudmFsdWUsYS5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0IiksYS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksdT1vLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx1LmFwcGVuZENoaWxkKGEpLHQuYXBwZW5kQ2hlY2tlZD1hLmNoZWNrZWQsdC5jaGVja0Nsb25lPXUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGQuYXR0YWNoRXZlbnQmJihkLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixmdW5jdGlvbigpe3Qubm9DbG9uZUV2ZW50PSExfSksZC5jbG9uZU5vZGUoITApLmNsaWNrKCkpO2ZvcihmIGlue3N1Ym1pdDohMCxjaGFuZ2U6ITAsZm9jdXNpbjohMH0pZC5zZXRBdHRyaWJ1dGUoYz0ib24iK2YsInQiKSx0W2YrIkJ1YmJsZXMiXT1jIGluIGV8fGQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITE7cmV0dXJuIGQuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixkLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsdC5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWQuc3R5bGUuYmFja2dyb3VuZENsaXAsYihmdW5jdGlvbigpe3ZhciBuLHIsYSxzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7Iix1PW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTt1JiYobj1vLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG4uc3R5bGUuY3NzVGV4dD0iYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHgiLHUuYXBwZW5kQ2hpbGQobikuYXBwZW5kQ2hpbGQoZCksZC5pbm5lckhUTUw9Ijx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSxhWzBdLnN0eWxlLmNzc1RleHQ9InBhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MDtkaXNwbGF5Om5vbmUiLHA9MD09PWFbMF0ub2Zmc2V0SGVpZ2h0LGFbMF0uc3R5bGUuZGlzcGxheT0iIixhWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHQucmVsaWFibGVIaWRkZW5PZmZzZXRzPXAmJjA9PT1hWzBdLm9mZnNldEhlaWdodCxkLmlubmVySFRNTD0iIixkLnN0eWxlLmNzc1RleHQ9ImJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElOyIsdC5ib3hTaXppbmc9ND09PWQub2Zmc2V0V2lkdGgsdC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldD0xIT09dS5vZmZzZXRUb3AsZS5nZXRDb21wdXRlZFN0eWxlJiYodC5waXhlbFBvc2l0aW9uPSIxJSIhPT0oZS5nZXRDb21wdXRlZFN0eWxlKGQsbnVsbCl8fHt9KS50b3AsdC5ib3hTaXppbmdSZWxpYWJsZT0iNHB4Ij09PShlLmdldENvbXB1dGVkU3R5bGUoZCxudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGgscj1kLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgiZGl2IikpLHIuc3R5bGUuY3NzVGV4dD1kLnN0eWxlLmNzc1RleHQ9cyxyLnN0eWxlLm1hcmdpblJpZ2h0PXIuc3R5bGUud2lkdGg9IjAiLGQuc3R5bGUud2lkdGg9IjFweCIsdC5yZWxpYWJsZU1hcmdpblJpZ2h0PSFwYXJzZUZsb2F0KChlLmdldENvbXB1dGVkU3R5bGUocixudWxsKXx8e30pLm1hcmdpblJpZ2h0KSksdHlwZW9mIGQuc3R5bGUuem9vbSE9PWkmJihkLmlubmVySFRNTD0iIixkLnN0eWxlLmNzc1RleHQ9cysid2lkdGg6MXB4O3BhZGRpbmc6MXB4O2Rpc3BsYXk6aW5saW5lO3pvb206MSIsdC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PTM9PT1kLm9mZnNldFdpZHRoLGQuc3R5bGUuZGlzcGxheT0iYmxvY2siLGQuaW5uZXJIVE1MPSI8ZGl2PjwvZGl2PiIsZC5maXJzdENoaWxkLnN0eWxlLndpZHRoPSI1cHgiLHQuc2hyaW5rV3JhcEJsb2Nrcz0zIT09ZC5vZmZzZXRXaWR0aCx0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJih1LnN0eWxlLnpvb209MSkpLHUucmVtb3ZlQ2hpbGQobiksbj1kPWE9cj1udWxsKX0pLG49cz11PWw9cj1hPW51bGwsdH0oKTt2YXIgTz0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sQj0vKFtBLVpdKS9nO2Z1bmN0aW9uIFAoZSxuLHIsaSl7aWYoYi5hY2NlcHREYXRhKGUpKXt2YXIgbyxhLHM9Yi5leHBhbmRvLHU9InN0cmluZyI9PXR5cGVvZiBuLGw9ZS5ub2RlVHlwZSxwPWw/Yi5jYWNoZTplLGY9bD9lW3NdOmVbc10mJnM7aWYoZiYmcFtmXSYmKGl8fHBbZl0uZGF0YSl8fCF1fHxyIT09dClyZXR1cm4gZnx8KGw/ZVtzXT1mPWMucG9wKCl8fGIuZ3VpZCsrOmY9cykscFtmXXx8KHBbZl09e30sbHx8KHBbZl0udG9KU09OPWIubm9vcCkpLCgib2JqZWN0Ij09dHlwZW9mIG58fCJmdW5jdGlvbiI9PXR5cGVvZiBuKSYmKGk/cFtmXT1iLmV4dGVuZChwW2ZdLG4pOnBbZl0uZGF0YT1iLmV4dGVuZChwW2ZdLmRhdGEsbikpLG89cFtmXSxpfHwoby5kYXRhfHwoby5kYXRhPXt9KSxvPW8uZGF0YSksciE9PXQmJihvW2IuY2FtZWxDYXNlKG4pXT1yKSx1PyhhPW9bbl0sbnVsbD09YSYmKGE9b1tiLmNhbWVsQ2FzZShuKV0pKTphPW8sYX19ZnVuY3Rpb24gUihlLHQsbil7aWYoYi5hY2NlcHREYXRhKGUpKXt2YXIgcixpLG8sYT1lLm5vZGVUeXBlLHM9YT9iLmNhY2hlOmUsdT1hP2VbYi5leHBhbmRvXTpiLmV4cGFuZG87aWYoc1t1XSl7aWYodCYmKG89bj9zW3VdOnNbdV0uZGF0YSkpe2IuaXNBcnJheSh0KT90PXQuY29uY2F0KGIubWFwKHQsYi5jYW1lbENhc2UpKTp0IGluIG8/dD1bdF06KHQ9Yi5jYW1lbENhc2UodCksdD10IGluIG8/W3RdOnQuc3BsaXQoIiAiKSk7Zm9yKHI9MCxpPXQubGVuZ3RoO2k+cjtyKyspZGVsZXRlIG9bdFtyXV07aWYoIShuPyQ6Yi5pc0VtcHR5T2JqZWN0KShvKSlyZXR1cm59KG58fChkZWxldGUgc1t1XS5kYXRhLCQoc1t1XSkpKSYmKGE/Yi5jbGVhbkRhdGEoW2VdLCEwKTpiLnN1cHBvcnQuZGVsZXRlRXhwYW5kb3x8cyE9cy53aW5kb3c/ZGVsZXRlIHNbdV06c1t1XT1udWxsKX19fWIuZXh0ZW5kKHtjYWNoZTp7fSxleHBhbmRvOiJqUXVlcnkiKyhwK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vRGF0YTp7ZW1iZWQ6ITAsb2JqZWN0OiJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiLGFwcGxldDohMH0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLm5vZGVUeXBlP2IuY2FjaGVbZVtiLmV4cGFuZG9dXTplW2IuZXhwYW5kb10sISFlJiYhJChlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFAoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBQKGUsdCxuLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUihlLHQsITApfSxhY2NlcHREYXRhOmZ1bmN0aW9uKGUpe2lmKGUubm9kZVR5cGUmJjEhPT1lLm5vZGVUeXBlJiY5IT09ZS5ub2RlVHlwZSlyZXR1cm4hMTt2YXIgdD1lLm5vZGVOYW1lJiZiLm5vRGF0YVtlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiF0fHx0IT09ITAmJmUuZ2V0QXR0cmlidXRlKCJjbGFzc2lkIik9PT10fX0pLGIuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvPXRoaXNbMF0sYT0wLHM9bnVsbDtpZihlPT09dCl7aWYodGhpcy5sZW5ndGgmJihzPWIuZGF0YShvKSwxPT09by5ub2RlVHlwZSYmIWIuX2RhdGEobywicGFyc2VkQXR0cnMiKSkpe2ZvcihyPW8uYXR0cmlidXRlcztyLmxlbmd0aD5hO2ErKylpPXJbYV0ubmFtZSxpLmluZGV4T2YoImRhdGEtIil8fChpPWIuY2FtZWxDYXNlKGkuc2xpY2UoNSkpLFcobyxpLHNbaV0pKTtiLl9kYXRhKG8sInBhcnNlZEF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe2IuZGF0YSh0aGlzLGUpfSk6Yi5hY2Nlc3ModGhpcyxmdW5jdGlvbihuKXtyZXR1cm4gbj09PXQ/bz9XKG8sZSxiLmRhdGEobyxlKSk6bnVsbDoodGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5kYXRhKHRoaXMsZSxuKX0pLHQpfSxudWxsLG4sYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtiLnJlbW92ZURhdGEodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFcoZSxuLHIpe2lmKHI9PT10JiYxPT09ZS5ub2RlVHlwZSl7dmFyIGk9ImRhdGEtIituLnJlcGxhY2UoQiwiLSQxIikudG9Mb3dlckNhc2UoKTtpZihyPWUuZ2V0QXR0cmlidXRlKGkpLCJzdHJpbmciPT10eXBlb2Ygcil7dHJ5e3I9InRydWUiPT09cj8hMDoiZmFsc2UiPT09cj8hMToibnVsbCI9PT1yP251bGw6K3IrIiI9PT1yPytyOk8udGVzdChyKT9iLnBhcnNlSlNPTihyKTpyfWNhdGNoKG8pe31iLmRhdGEoZSxuLHIpfWVsc2Ugcj10fXJldHVybiByfWZ1bmN0aW9uICQoZSl7dmFyIHQ7Zm9yKHQgaW4gZSlpZigoImRhdGEiIT09dHx8IWIuaXNFbXB0eU9iamVjdChlW3RdKSkmJiJ0b0pTT04iIT09dClyZXR1cm4hMTtyZXR1cm4hMH1iLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpO3JldHVybiBlPyhuPShufHwiZngiKSsicXVldWUiLGk9Yi5fZGF0YShlLG4pLHImJighaXx8Yi5pc0FycmF5KHIpP2k9Yi5fZGF0YShlLG4sYi5tYWtlQXJyYXkocikpOmkucHVzaChyKSksaXx8W10pOnR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49Yi5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz1iLl9xdWV1ZUhvb2tzKGUsdCksYT1mdW5jdGlvbigpe2IuZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxvLmN1cj1pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxhLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIGIuX2RhdGEoZSxuKXx8Yi5fZGF0YShlLG4se2VtcHR5OmIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe2IuX3JlbW92ZURhdGEoZSx0KyJxdWV1ZSIpLGIuX3JlbW92ZURhdGEoZSxuKX0pfSl9fSksYi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsbil7dmFyIHI9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJihuPWUsZT0iZngiLHItLSkscj5hcmd1bWVudHMubGVuZ3RoP2IucXVldWUodGhpc1swXSxlKTpuPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWIucXVldWUodGhpcyxlLG4pO2IuX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09dFswXSYmYi5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1iLmZ4P2IuZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTEsbz1iLkRlZmVycmVkKCksYT10aGlzLHM9dGhpcy5sZW5ndGgsdT1mdW5jdGlvbigpey0taXx8by5yZXNvbHZlV2l0aChhLFthXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKG49ZSxlPXQpLGU9ZXx8ImZ4Ijt3aGlsZShzLS0pcj1iLl9kYXRhKGFbc10sZSsicXVldWVIb29rcyIpLHImJnIuZW1wdHkmJihpKyssci5lbXB0eS5hZGQodSkpO3JldHVybiB1KCksby5wcm9taXNlKG4pfX0pO3ZhciBJLHosWD0vW1x0XHJcbl0vZyxVPS9cci9nLFY9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksWT0vXig/OmF8YXJlYSkkL2ksSj0vXig/OmNoZWNrZWR8c2VsZWN0ZWR8YXV0b2ZvY3VzfGF1dG9wbGF5fGFzeW5jfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkKSQvaSxHPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksUT1iLnN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLEs9Yi5zdXBwb3J0LmlucHV0O2IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtiLnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiBlPWIucHJvcEZpeFtlXXx8ZSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tlXT10LGRlbGV0ZSB0aGlzW2VdfWNhdGNoKG4pe319KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCx1PSJzdHJpbmciPT10eXBlb2YgZSYmZTtpZihiLmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXtiKHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107cz5hO2ErKylpZihuPXRoaXNbYV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFgsIiAiKToiICIpKXtvPTA7d2hpbGUoaT10W28rK10pMD5yLmluZGV4T2YoIiAiK2krIiAiKSYmKHIrPWkrIiAiKTtuLmNsYXNzTmFtZT1iLnRyaW0ocil9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYT0wLHM9dGhpcy5sZW5ndGgsdT0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8IiIpLm1hdGNoKHcpfHxbXTtzPmE7YSsrKWlmKG49dGhpc1thXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoWCwiICIpOiIiKSl7bz0wO3doaWxlKGk9dFtvKytdKXdoaWxlKHIuaW5kZXhPZigiICIraSsiICIpPj0wKXI9ci5yZXBsYWNlKCIgIitpKyIgIiwiICIpO24uY2xhc3NOYW1lPWU/Yi50cmltKHIpOiIifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlLHI9ImJvb2xlYW4iPT10eXBlb2YgdDtyZXR1cm4gYi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXtiKHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pe3ZhciBvLGE9MCxzPWIodGhpcyksdT10LGw9ZS5tYXRjaCh3KXx8W107d2hpbGUobz1sW2ErK10pdT1yP3U6IXMuaGFzQ2xhc3Mobyksc1t1PyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0obyl9ZWxzZShuPT09aXx8ImJvb2xlYW4iPT09bikmJih0aGlzLmNsYXNzTmFtZSYmYi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjpiLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PSIgIitlKyIgIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO3I+bjtuKyspaWYoMT09PXRoaXNbbl0ubm9kZVR5cGUmJigiICIrdGhpc1tuXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFgsIiAiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLG89dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaT1iLmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciBvLGE9Yih0aGlzKTsxPT09dGhpcy5ub2RlVHlwZSYmKG89aT9lLmNhbGwodGhpcyxuLGEudmFsKCkpOmUsbnVsbD09bz9vPSIiOiJudW1iZXIiPT10eXBlb2Ygbz9vKz0iIjpiLmlzQXJyYXkobykmJihvPWIubWFwKG8sZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSxyPWIudmFsSG9va3NbdGhpcy50eXBlXXx8Yi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHImJiJzZXQiaW4gciYmci5zZXQodGhpcyxvLCJ2YWx1ZSIpIT09dHx8KHRoaXMudmFsdWU9bykpfSk7aWYobylyZXR1cm4gcj1iLnZhbEhvb2tzW28udHlwZV18fGIudmFsSG9va3Nbby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiYiZ2V0ImluIHImJihuPXIuZ2V0KG8sInZhbHVlIikpIT09dD9uOihuPW8udmFsdWUsInN0cmluZyI9PXR5cGVvZiBuP24ucmVwbGFjZShVLCIiKTpudWxsPT1uPyIiOm4pfX19KSxiLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cmlidXRlcy52YWx1ZTtyZXR1cm4hdHx8dC5zcGVjaWZpZWQ/ZS52YWx1ZTplLnRleHR9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9ZS5vcHRpb25zLGk9ZS5zZWxlY3RlZEluZGV4LG89InNlbGVjdC1vbmUiPT09ZS50eXBlfHwwPmksYT1vP251bGw6W10scz1vP2krMTpyLmxlbmd0aCx1PTA+aT9zOm8/aTowO2Zvcig7cz51O3UrKylpZihuPXJbdV0sISghbi5zZWxlY3RlZCYmdSE9PWl8fChiLnN1cHBvcnQub3B0RGlzYWJsZWQ/bi5kaXNhYmxlZDpudWxsIT09bi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpfHxuLnBhcmVudE5vZGUuZGlzYWJsZWQmJmIubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYodD1iKG4pLnZhbCgpLG8pcmV0dXJuIHQ7YS5wdXNoKHQpfXJldHVybiBhfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1iLm1ha2VBcnJheSh0KTtyZXR1cm4gYihlKS5maW5kKCJvcHRpb24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD1iLmluQXJyYXkoYih0aGlzKS52YWwoKSxuKT49MH0pLG4ubGVuZ3RofHwoZS5zZWxlY3RlZEluZGV4PS0xKSxufX19LGF0dHI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvLGEscyx1PWUubm9kZVR5cGU7aWYoZSYmMyE9PXUmJjghPT11JiYyIT09dSlyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09aT9iLnByb3AoZSxuLHIpOihhPTEhPT11fHwhYi5pc1hNTERvYyhlKSxhJiYobj1uLnRvTG93ZXJDYXNlKCksbz1iLmF0dHJIb29rc1tuXXx8KEoudGVzdChuKT96OkkpKSxyPT09dD9vJiZhJiYiZ2V0ImluIG8mJm51bGwhPT0ocz1vLmdldChlLG4pKT9zOih0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1pJiYocz1lLmdldEF0dHJpYnV0ZShuKSksbnVsbD09cz90OnMpOm51bGwhPT1yP28mJmEmJiJzZXQiaW4gbyYmKHM9by5zZXQoZSxyLG4pKSE9PXQ/czooZS5zZXRBdHRyaWJ1dGUobixyKyIiKSxyKTooYi5yZW1vdmVBdHRyKGUsbiksdCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9Yi5wcm9wRml4W25dfHxuLEoudGVzdChuKT8hUSYmRy50ZXN0KG4pP2VbYi5jYW1lbENhc2UoImRlZmF1bHQtIituKV09ZVtyXT0hMTplW3JdPSExOmIuYXR0cihlLG4sIiIpLGUucmVtb3ZlQXR0cmlidXRlKFE/bjpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZighYi5zdXBwb3J0LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZiLm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4Ont0YWJpbmRleDoidGFiSW5kZXgiLHJlYWRvbmx5OiJyZWFkT25seSIsImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSIsbWF4bGVuZ3RoOiJtYXhMZW5ndGgiLGNlbGxzcGFjaW5nOiJjZWxsU3BhY2luZyIsY2VsbHBhZGRpbmc6ImNlbGxQYWRkaW5nIixyb3dzcGFuOiJyb3dTcGFuIixjb2xzcGFuOiJjb2xTcGFuIix1c2VtYXA6InVzZU1hcCIsZnJhbWVib3JkZXI6ImZyYW1lQm9yZGVyIixjb250ZW50ZWRpdGFibGU6ImNvbnRlbnRFZGl0YWJsZSJ9LHByb3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gYT0xIT09c3x8IWIuaXNYTUxEb2MoZSksYSYmKG49Yi5wcm9wRml4W25dfHxuLG89Yi5wcm9wSG9va3Nbbl0pLHIhPT10P28mJiJzZXQiaW4gbyYmKGk9by5zZXQoZSxyLG4pKSE9PXQ/aTplW25dPXI6byYmImdldCJpbiBvJiZudWxsIT09KGk9by5nZXQoZSxuKSk/aTplW25dfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIG49ZS5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJpbmRleCIpO3JldHVybiBuJiZuLnNwZWNpZmllZD9wYXJzZUludChuLnZhbHVlLDEwKTpWLnRlc3QoZS5ub2RlTmFtZSl8fFkudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6dH19fX0pLHo9e2dldDpmdW5jdGlvbihlLG4pe3ZhciByPWIucHJvcChlLG4pLGk9ImJvb2xlYW4iPT10eXBlb2YgciYmZS5nZXRBdHRyaWJ1dGUobiksbz0iYm9vbGVhbiI9PXR5cGVvZiByP0smJlE/bnVsbCE9aTpHLnRlc3Qobik/ZVtiLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXTohIWk6ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pO3JldHVybiBvJiZvLnZhbHVlIT09ITE/bi50b0xvd2VyQ2FzZSgpOnR9LHNldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT0hMT9iLnJlbW92ZUF0dHIoZSxuKTpLJiZRfHwhRy50ZXN0KG4pP2Uuc2V0QXR0cmlidXRlKCFRJiZiLnByb3BGaXhbbl18fG4sbik6ZVtiLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK24pXT1lW25dPSEwLG59fSxLJiZRfHwoYi5hdHRySG9va3MudmFsdWU9e2dldDpmdW5jdGlvbihlLG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gYi5ub2RlTmFtZShlLCJpbnB1dCIpP2UuZGVmYXVsdFZhbHVlOnImJnIuc3BlY2lmaWVkP3IudmFsdWU6dH0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gYi5ub2RlTmFtZShlLCJpbnB1dCIpPyhlLmRlZmF1bHRWYWx1ZT1uLHQpOkkmJkkuc2V0KGUsbixyKX19KSxRfHwoST1iLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pO3JldHVybiByJiYoImlkIj09PW58fCJuYW1lIj09PW58fCJjb29yZHMiPT09bj8iIiE9PXIudmFsdWU6ci5zcGVjaWZpZWQpP3IudmFsdWU6dH0sc2V0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1lLmdldEF0dHJpYnV0ZU5vZGUocik7cmV0dXJuIGl8fGUuc2V0QXR0cmlidXRlTm9kZShpPWUub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUocikpLGkudmFsdWU9bis9IiIsInZhbHVlIj09PXJ8fG49PT1lLmdldEF0dHJpYnV0ZShyKT9uOnR9fSxiLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e2dldDpJLmdldCxzZXQ6ZnVuY3Rpb24oZSx0LG4pe0kuc2V0KGUsIiI9PT10PyExOnQsbil9fSxiLmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGUsbil7Yi5hdHRySG9va3Nbbl09Yi5leHRlbmQoYi5hdHRySG9va3Nbbl0se3NldDpmdW5jdGlvbihlLHIpe3JldHVybiIiPT09cj8oZS5zZXRBdHRyaWJ1dGUobiwiYXV0byIpLHIpOnR9fSl9KSksYi5zdXBwb3J0LmhyZWZOb3JtYWxpemVkfHwoYi5lYWNoKFsiaHJlZiIsInNyYyIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oZSxuKXtiLmF0dHJIb29rc1tuXT1iLmV4dGVuZChiLmF0dHJIb29rc1tuXSx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0QXR0cmlidXRlKG4sMik7cmV0dXJuIG51bGw9PXI/dDpyfX0pfSksYi5lYWNoKFsiaHJlZiIsInNyYyJdLGZ1bmN0aW9uKGUsdCl7Yi5wcm9wSG9va3NbdF09e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCw0KX19fSkpLGIuc3VwcG9ydC5zdHlsZXx8KGIuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dHx8dH0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD10KyIifX0pLGIuc3VwcG9ydC5vcHRTZWxlY3RlZHx8KGIucHJvcEhvb2tzLnNlbGVjdGVkPWIuZXh0ZW5kKGIucHJvcEhvb2tzLnNlbGVjdGVkLHtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpLG51bGx9fSkpLGIuc3VwcG9ydC5lbmN0eXBlfHwoYi5wcm9wRml4LmVuY3R5cGU9ImVuY29kaW5nIiksYi5zdXBwb3J0LmNoZWNrT258fGIuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe2IudmFsSG9va3NbdGhpc109e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6ZS52YWx1ZX19fSksYi5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Yi52YWxIb29rc1t0aGlzXT1iLmV4dGVuZChiLnZhbEhvb2tzW3RoaXNdLHtzZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYi5pc0FycmF5KG4pP2UuY2hlY2tlZD1iLmluQXJyYXkoYihlKS52YWwoKSxuKT49MDp0fX0pfSk7dmFyIFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLGV0PS9ea2V5Lyx0dD0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sbnQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLHJ0PS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gaXQoKXtyZXR1cm4hMH1mdW5jdGlvbiBvdCgpe3JldHVybiExfWIuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oZSxuLHIsbyxhKXt2YXIgcyx1LGwsYyxwLGYsZCxoLGcsbSx5LHY9Yi5fZGF0YShlKTtpZih2KXtyLmhhbmRsZXImJihjPXIscj1jLmhhbmRsZXIsYT1jLnNlbGVjdG9yKSxyLmd1aWR8fChyLmd1aWQ9Yi5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9e30pLChmPXYuaGFuZGxlKXx8KGY9di5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBiPT09aXx8ZSYmYi5ldmVudC50cmlnZ2VyZWQ9PT1lLnR5cGU/dDpiLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGYuZWxlbSxhcmd1bWVudHMpfSxmLmVsZW09ZSksbj0obnx8IiIpLm1hdGNoKHcpfHxbIiJdLGw9bi5sZW5ndGg7d2hpbGUobC0tKXM9cnQuZXhlYyhuW2xdKXx8W10sZz15PXNbMV0sbT0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLHA9Yi5ldmVudC5zcGVjaWFsW2ddfHx7fSxnPShhP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxnLHA9Yi5ldmVudC5zcGVjaWFsW2ddfHx7fSxkPWIuZXh0ZW5kKHt0eXBlOmcsb3JpZ1R5cGU6eSxkYXRhOm8saGFuZGxlcjpyLGd1aWQ6ci5ndWlkLHNlbGVjdG9yOmEsbmVlZHNDb250ZXh0OmEmJmIuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChhKSxuYW1lc3BhY2U6bS5qb2luKCIuIil9LGMpLChoPXVbZ10pfHwoaD11W2ddPVtdLGguZGVsZWdhdGVDb3VudD0wLHAuc2V0dXAmJnAuc2V0dXAuY2FsbChlLG8sbSxmKSE9PSExfHwoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihnLGYsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9uIitnLGYpKSkscC5hZGQmJihwLmFkZC5jYWxsKGUsZCksZC5oYW5kbGVyLmd1aWR8fChkLmhhbmRsZXIuZ3VpZD1yLmd1aWQpKSxhP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAsZCk6aC5wdXNoKGQpLGIuZXZlbnQuZ2xvYmFsW2ddPSEwO2U9bnVsbH19LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1LGwsYyxwLGYsZCxoLGcsbT1iLmhhc0RhdGEoZSkmJmIuX2RhdGEoZSk7aWYobSYmKGM9bS5ldmVudHMpKXt0PSh0fHwiIikubWF0Y2godyl8fFsiIl0sbD10Lmxlbmd0aDt3aGlsZShsLS0paWYocz1ydC5leGVjKHRbbF0pfHxbXSxkPWc9c1sxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCl7cD1iLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KHI/cC5kZWxlZ2F0ZVR5cGU6cC5iaW5kVHlwZSl8fGQsZj1jW2RdfHxbXSxzPXNbMl0mJlJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSx1PW89Zi5sZW5ndGg7d2hpbGUoby0tKWE9ZltvXSwhaSYmZyE9PWEub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWEuZ3VpZHx8cyYmIXMudGVzdChhLm5hbWVzcGFjZSl8fHImJnIhPT1hLnNlbGVjdG9yJiYoIioqIiE9PXJ8fCFhLnNlbGVjdG9yKXx8KGYuc3BsaWNlKG8sMSksYS5zZWxlY3RvciYmZi5kZWxlZ2F0ZUNvdW50LS0scC5yZW1vdmUmJnAucmVtb3ZlLmNhbGwoZSxhKSk7dSYmIWYubGVuZ3RoJiYocC50ZWFyZG93biYmcC50ZWFyZG93bi5jYWxsKGUsaCxtLmhhbmRsZSkhPT0hMXx8Yi5yZW1vdmVFdmVudChlLGQsbS5oYW5kbGUpLGRlbGV0ZSBjW2RdKX1lbHNlIGZvcihkIGluIGMpYi5ldmVudC5yZW1vdmUoZSxkK3RbbF0sbixyLCEwKTtiLmlzRW1wdHlPYmplY3QoYykmJihkZWxldGUgbS5oYW5kbGUsYi5fcmVtb3ZlRGF0YShlLCJldmVudHMiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixpLGEpe3ZhciBzLHUsbCxjLHAsZixkLGg9W2l8fG9dLGc9eS5jYWxsKG4sInR5cGUiKT9uLnR5cGU6bixtPXkuY2FsbChuLCJuYW1lc3BhY2UiKT9uLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKGw9Zj1pPWl8fG8sMyE9PWkubm9kZVR5cGUmJjghPT1pLm5vZGVUeXBlJiYhbnQudGVzdChnK2IuZXZlbnQudHJpZ2dlcmVkKSYmKGcuaW5kZXhPZigiLiIpPj0wJiYobT1nLnNwbGl0KCIuIiksZz1tLnNoaWZ0KCksbS5zb3J0KCkpLHU9MD5nLmluZGV4T2YoIjoiKSYmIm9uIitnLG49bltiLmV4cGFuZG9dP246bmV3IGIuRXZlbnQoZywib2JqZWN0Ij09dHlwZW9mIG4mJm4pLG4uaXNUcmlnZ2VyPSEwLG4ubmFtZXNwYWNlPW0uam9pbigiLiIpLG4ubmFtZXNwYWNlX3JlPW4ubmFtZXNwYWNlP1JlZ0V4cCgiKF58XFwuKSIrbS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLG4ucmVzdWx0PXQsbi50YXJnZXR8fChuLnRhcmdldD1pKSxyPW51bGw9PXI/W25dOmIubWFrZUFycmF5KHIsW25dKSxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sYXx8IXAudHJpZ2dlcnx8cC50cmlnZ2VyLmFwcGx5KGkscikhPT0hMSkpe2lmKCFhJiYhcC5ub0J1YmJsZSYmIWIuaXNXaW5kb3coaSkpe2ZvcihjPXAuZGVsZWdhdGVUeXBlfHxnLG50LnRlc3QoYytnKXx8KGw9bC5wYXJlbnROb2RlKTtsO2w9bC5wYXJlbnROb2RlKWgucHVzaChsKSxmPWw7Zj09PShpLm93bmVyRG9jdW1lbnR8fG8pJiZoLnB1c2goZi5kZWZhdWx0Vmlld3x8Zi5wYXJlbnRXaW5kb3d8fGUpfWQ9MDt3aGlsZSgobD1oW2QrK10pJiYhbi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKW4udHlwZT1kPjE/YzpwLmJpbmRUeXBlfHxnLHM9KGIuX2RhdGEobCwiZXZlbnRzIil8fHt9KVtuLnR5cGVdJiZiLl9kYXRhKGwsImhhbmRsZSIpLHMmJnMuYXBwbHkobCxyKSxzPXUmJmxbdV0scyYmYi5hY2NlcHREYXRhKGwpJiZzLmFwcGx5JiZzLmFwcGx5KGwscik9PT0hMSYmbi5wcmV2ZW50RGVmYXVsdCgpO2lmKG4udHlwZT1nLCEoYXx8bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8cC5fZGVmYXVsdCYmcC5fZGVmYXVsdC5hcHBseShpLm93bmVyRG9jdW1lbnQscikhPT0hMXx8ImNsaWNrIj09PWcmJmIubm9kZU5hbWUoaSwiYSIpfHwhYi5hY2NlcHREYXRhKGkpfHwhdXx8IWlbZ118fGIuaXNXaW5kb3coaSkpKXtmPWlbdV0sZiYmKGlbdV09bnVsbCksYi5ldmVudC50cmlnZ2VyZWQ9Zzt0cnl7aVtnXSgpfWNhdGNoKHYpe31iLmV2ZW50LnRyaWdnZXJlZD10LGYmJihpW3VdPWYpfXJldHVybiBuLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9Yi5ldmVudC5maXgoZSk7dmFyIG4scixpLG8sYSxzPVtdLHU9aC5jYWxsKGFyZ3VtZW50cyksbD0oYi5fZGF0YSh0aGlzLCJldmVudHMiKXx8e30pW2UudHlwZV18fFtdLGM9Yi5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKHVbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe3M9Yi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsZSxsKSxuPTA7d2hpbGUoKG89c1tuKytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5jdXJyZW50VGFyZ2V0PW8uZWxlbSxhPTA7d2hpbGUoKGk9by5oYW5kbGVyc1thKytdKSYmIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWUubmFtZXNwYWNlX3JlfHxlLm5hbWVzcGFjZV9yZS50ZXN0KGkubmFtZXNwYWNlKSkmJihlLmhhbmRsZU9iaj1pLGUuZGF0YT1pLmRhdGEscj0oKGIuZXZlbnQuc3BlY2lhbFtpLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8aS5oYW5kbGVyKS5hcHBseShvLmVsZW0sdSksciE9PXQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvLGEscz1bXSx1PW4uZGVsZWdhdGVDb3VudCxsPWUudGFyZ2V0O2lmKHUmJmwubm9kZVR5cGUmJighZS5idXR0b258fCJjbGljayIhPT1lLnR5cGUpKWZvcig7bCE9dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKGwuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWUudHlwZSkpe2ZvcihvPVtdLGE9MDt1PmE7YSsrKWk9blthXSxyPWkuc2VsZWN0b3IrIiAiLG9bcl09PT10JiYob1tyXT1pLm5lZWRzQ29udGV4dD9iKHIsdGhpcykuaW5kZXgobCk+PTA6Yi5maW5kKHIsdGhpcyxudWxsLFtsXSkubGVuZ3RoKSxvW3JdJiZvLnB1c2goaSk7by5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOm99KX1yZXR1cm4gbi5sZW5ndGg+dSYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6bi5zbGljZSh1KX0pLHN9LGZpeDpmdW5jdGlvbihlKXtpZihlW2IuZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixyLGk9ZS50eXBlLGE9ZSxzPXRoaXMuZml4SG9va3NbaV07c3x8KHRoaXMuZml4SG9va3NbaV09cz10dC50ZXN0KGkpP3RoaXMubW91c2VIb29rczpldC50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9cy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChzLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IGIuRXZlbnQoYSksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09YVtuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1hLnNyY0VsZW1lbnR8fG8pLDM9PT1lLnRhcmdldC5ub2RlVHlwZSYmKGUudGFyZ2V0PWUudGFyZ2V0LnBhcmVudE5vZGUpLGUubWV0YUtleT0hIWUubWV0YUtleSxzLmZpbHRlcj9zLmZpbHRlcihlLGEpOmV9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLGEscz1uLmJ1dHRvbix1PW4uZnJvbUVsZW1lbnQ7cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPW4uY2xpZW50WCYmKGk9ZS50YXJnZXQub3duZXJEb2N1bWVudHx8byxhPWkuZG9jdW1lbnRFbGVtZW50LHI9aS5ib2R5LGUucGFnZVg9bi5jbGllbnRYKyhhJiZhLnNjcm9sbExlZnR8fHImJnIuc2Nyb2xsTGVmdHx8MCktKGEmJmEuY2xpZW50TGVmdHx8ciYmci5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPW4uY2xpZW50WSsoYSYmYS5zY3JvbGxUb3B8fHImJnIuc2Nyb2xsVG9wfHwwKS0oYSYmYS5jbGllbnRUb3B8fHImJnIuY2xpZW50VG9wfHwwKSksIWUucmVsYXRlZFRhcmdldCYmdSYmKGUucmVsYXRlZFRhcmdldD11PT09ZS50YXJnZXQ/bi50b0VsZW1lbnQ6dSksZS53aGljaHx8cz09PXR8fChlLndoaWNoPTEmcz8xOjImcz8zOjQmcz8yOjApLGV9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpJiYiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrPyh0aGlzLmNsaWNrKCksITEpOnR9fSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1vLmFjdGl2ZUVsZW1lbnQmJnRoaXMuZm9jdXMpdHJ5e3JldHVybiB0aGlzLmZvY3VzKCksITF9Y2F0Y2goZSl7fX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09by5hY3RpdmVFbGVtZW50JiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp0fSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5yZXN1bHQhPT10JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1iLmV4dGVuZChuZXcgYi5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO3I/Yi5ldmVudC50cmlnZ2VyKGksbnVsbCx0KTpiLmV2ZW50LmRpc3BhdGNoLmNhbGwodCxpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSxiLnJlbW92ZUV2ZW50PW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByPSJvbiIrdDtlLmRldGFjaEV2ZW50JiYodHlwZW9mIGVbcl09PT1pJiYoZVtyXT1udWxsKSxlLmRldGFjaEV2ZW50KHIsbikpfSxiLkV2ZW50PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBiLkV2ZW50PyhlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHxlLnJldHVyblZhbHVlPT09ITF8fGUuZ2V0UHJldmVudERlZmF1bHQmJmUuZ2V0UHJldmVudERlZmF1bHQoKT9pdDpvdCk6dGhpcy50eXBlPWUsbiYmYi5leHRlbmQodGhpcyxuKSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8Yi5ub3coKSx0aGlzW2IuZXhwYW5kb109ITAsdCk6bmV3IGIuRXZlbnQoZSxuKX0sYi5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDpvdCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpvdCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpvdCxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1pdCxlJiYoZS5wcmV2ZW50RGVmYXVsdD9lLnByZXZlbnREZWZhdWx0KCk6ZS5yZXR1cm5WYWx1ZT0hMSl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWl0LGUmJihlLnN0b3BQcm9wYWdhdGlvbiYmZS5zdG9wUHJvcGFnYXRpb24oKSxlLmNhbmNlbEJ1YmJsZT0hMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9aXQsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LGIuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGUsdCl7Yi5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajsNCnJldHVybighaXx8aSE9PXImJiFiLmNvbnRhaW5zKHIsaSkpJiYoZS50eXBlPW8ub3JpZ1R5cGUsbj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSxiLnN1cHBvcnQuc3VibWl0QnViYmxlc3x8KGIuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOihiLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9Yi5ub2RlTmFtZShuLCJpbnB1dCIpfHxiLm5vZGVOYW1lKG4sImJ1dHRvbiIpP24uZm9ybTp0O3ImJiFiLl9kYXRhKHIsInN1Ym1pdEJ1YmJsZXMiKSYmKGIuZXZlbnQuYWRkKHIsInN1Ym1pdC5fc3VibWl0IixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksYi5fZGF0YShyLCJzdWJtaXRCdWJibGVzIiwhMCkpfSksdCl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhZS5pc1RyaWdnZXImJmIuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6KGIuZXZlbnQucmVtb3ZlKHRoaXMsIi5fc3VibWl0IiksdCl9fSksYi5zdXBwb3J0LmNoYW5nZUJ1YmJsZXN8fChiLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBaLnRlc3QodGhpcy5ub2RlTmFtZSk/KCgiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlKSYmKGIuZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpeyJjaGVja2VkIj09PWUub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksYi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oZSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhZS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLGIuZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxlLCEwKX0pKSwhMSk6KGIuZXZlbnQuYWRkKHRoaXMsImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O1oudGVzdCh0Lm5vZGVOYW1lKSYmIWIuX2RhdGEodCwiY2hhbmdlQnViYmxlcyIpJiYoYi5ldmVudC5hZGQodCwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpeyF0aGlzLnBhcmVudE5vZGV8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHxiLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLGIuX2RhdGEodCwiY2hhbmdlQnViYmxlcyIsITApKX0pLHQpfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQ7cmV0dXJuIHRoaXMhPT1ufHxlLmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8InJhZGlvIiE9PW4udHlwZSYmImNoZWNrYm94IiE9PW4udHlwZT9lLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0fSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBiLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFaLnRlc3QodGhpcy5ub2RlTmFtZSl9fSksYi5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHxiLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe2IuZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxiLmV2ZW50LmZpeChlKSwhMCl9O2IuZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSksYi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsbixyLGksbyl7dmFyIGEscztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgbiYmKHI9cnx8bixuPXQpO2ZvcihhIGluIGUpdGhpcy5vbihhLG4scixlW2FdLG8pO3JldHVybiB0aGlzfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBlb2Ygbj8oaT1yLHI9dCk6KGk9cixyPW4sbj10KSksaT09PSExKWk9b3Q7ZWxzZSBpZighaSlyZXR1cm4gdGhpcztyZXR1cm4gMT09PW8mJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4gYigpLm9mZihlKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD1iLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQuYWRkKHRoaXMsZSxpLHIsbil9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLG4scil7dmFyIGksbztpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gaT1lLmhhbmRsZU9iaixiKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9yaWdUeXBlKyIuIitpLm5hbWVzcGFjZTppLm9yaWdUeXBlLGkuc2VsZWN0b3IsaS5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKG8gaW4gZSl0aGlzLm9mZihvLG4sZVtvXSk7cmV0dXJuIHRoaXN9cmV0dXJuKG49PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIG4pJiYocj1uLG49dCkscj09PSExJiYocj1vdCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLG4pe3ZhciByPXRoaXNbMF07cmV0dXJuIHI/Yi5ldmVudC50cmlnZ2VyKGUsbixyLCEwKTp0fX0pLGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzLHUsbCxjLHAsZixkLGgsZyxtLHksdix4PSJzaXp6bGUiKy1uZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD17fSxOPTAsQz0wLGs9aXQoKSxFPWl0KCksUz1pdCgpLEE9dHlwZW9mIHQsaj0xPDwzMSxEPVtdLEw9RC5wb3AsSD1ELnB1c2gscT1ELnNsaWNlLE09RC5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDtuPnQ7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxfPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixGPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTz1GLnJlcGxhY2UoInciLCJ3IyIpLEI9IihbKl4kfCF+XT89KSIsUD0iXFxbIitfKyIqKCIrRisiKSIrXysiKig/OiIrQitfKyIqKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woIitPKyIpfCl8KSIrXysiKlxcXSIsUj0iOigiK0YrIikoPzpcXCgoKFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3woKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1AucmVwbGFjZSgzLDgpKyIpKil8LiopXFwpfCkiLFc9UmVnRXhwKCJeIitfKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK18rIiskIiwiZyIpLCQ9UmVnRXhwKCJeIitfKyIqLCIrXysiKiIpLEk9UmVnRXhwKCJeIitfKyIqKFtcXHgyMFxcdFxcclxcblxcZj4rfl0pIitfKyIqIiksej1SZWdFeHAoUiksWD1SZWdFeHAoIl4iK08rIiQiKSxVPXtJRDpSZWdFeHAoIl4jKCIrRisiKSIpLENMQVNTOlJlZ0V4cCgiXlxcLigiK0YrIikiKSxOQU1FOlJlZ0V4cCgiXlxcW25hbWU9WydcIl0/KCIrRisiKVsnXCJdP1xcXSIpLFRBRzpSZWdFeHAoIl4oIitGLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpSZWdFeHAoIl4iK1ApLFBTRVVETzpSZWdFeHAoIl4iK1IpLENISUxEOlJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitfKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitfKyIqKD86KFsrLV18KSIrXysiKihcXGQrKXwpKSIrXysiKlxcKXwpIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK18rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrXysiKigoPzotXFxkKT9cXGQqKSIrXysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sVj0vW1x4MjBcdFxyXG5cZl0qWyt+XS8sWT0vXltee10rXHtccypcW25hdGl2ZSBjb2RlLyxKPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sRz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFE9L15oXGQkL2ksSz0vJ3xcXC9nLFo9L1w9W1x4MjBcdFxyXG5cZl0qKFteJyJcXV0qKVtceDIwXHRcclxuXGZdKlxdL2csZXQ9L1xcKFtcZGEtZkEtRl17MSw2fVtceDIwXHRcclxuXGZdP3wuKS9nLHR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49IjB4Iit0LTY1NTM2O3JldHVybiBuIT09bj90OjA+bj9TdHJpbmcuZnJvbUNoYXJDb2RlKG4rNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bj4+MTAsNTYzMjB8MTAyMyZuKX07dHJ5e3EuY2FsbCh3LmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApWzBdLm5vZGVUeXBlfWNhdGNoKG50KXtxPWZ1bmN0aW9uKGUpe3ZhciB0LG49W107d2hpbGUodD10aGlzW2UrK10pbi5wdXNoKHQpO3JldHVybiBufX1mdW5jdGlvbiBydChlKXtyZXR1cm4gWS50ZXN0KGUrIiIpfWZ1bmN0aW9uIGl0KCl7dmFyIGUsdD1bXTtyZXR1cm4gZT1mdW5jdGlvbihuLHIpe3JldHVybiB0LnB1c2gobis9IiAiKT5pLmNhY2hlTGVuZ3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbl09cn19ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIGVbeF09ITAsZX1mdW5jdGlvbiBhdChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4gZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3Q9bnVsbH19ZnVuY3Rpb24gc3QoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGYsZyxtLHY7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OncpIT09cCYmYyh0KSx0PXR8fHAsbj1ufHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBuO2lmKDEhPT0ocz10Lm5vZGVUeXBlKSYmOSE9PXMpcmV0dXJuW107aWYoIWQmJiFyKXtpZihpPUouZXhlYyhlKSlpZihhPWlbMV0pe2lmKDk9PT1zKXtpZihvPXQuZ2V0RWxlbWVudEJ5SWQoYSksIW98fCFvLnBhcmVudE5vZGUpcmV0dXJuIG47aWYoby5pZD09PWEpcmV0dXJuIG4ucHVzaChvKSxufWVsc2UgaWYodC5vd25lckRvY3VtZW50JiYobz10Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkpJiZ5KHQsbykmJm8uaWQ9PT1hKXJldHVybiBuLnB1c2gobyksbn1lbHNle2lmKGlbMl0pcmV0dXJuIEguYXBwbHkobixxLmNhbGwodC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSwwKSksbjtpZigoYT1pWzNdKSYmVC5nZXRCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKSwwKSksbn1pZihULnFzYSYmIWgudGVzdChlKSl7aWYoZj0hMCxnPXgsbT10LHY9OT09PXMmJmUsMT09PXMmJiJvYmplY3QiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtsPWZ0KGUpLChmPXQuZ2V0QXR0cmlidXRlKCJpZCIpKT9nPWYucmVwbGFjZShLLCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixnKSxnPSJbaWQ9JyIrZysiJ10gIix1PWwubGVuZ3RoO3doaWxlKHUtLSlsW3VdPWcrZHQobFt1XSk7bT1WLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx2PWwuam9pbigiLCIpfWlmKHYpdHJ5e3JldHVybiBILmFwcGx5KG4scS5jYWxsKG0ucXVlcnlTZWxlY3RvckFsbCh2KSwwKSksbn1jYXRjaChiKXt9ZmluYWxseXtmfHx0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiB3dChlLnJlcGxhY2UoVywiJDEiKSx0LG4scil9YT1zdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sYz1zdC5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgbj1lP2Uub3duZXJEb2N1bWVudHx8ZTp3O3JldHVybiBuIT09cCYmOT09PW4ubm9kZVR5cGUmJm4uZG9jdW1lbnRFbGVtZW50PyhwPW4sZj1uLmRvY3VtZW50RWxlbWVudCxkPWEobiksVC50YWdOYW1lTm9Db21tZW50cz1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLFQuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHNlbGVjdD48L3NlbGVjdD4iO3ZhciB0PXR5cGVvZiBlLmxhc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIm11bHRpcGxlIik7cmV0dXJuImJvb2xlYW4iIT09dCYmInN0cmluZyIhPT10fSksVC5nZXRCeUNsYXNzTmFtZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PiIsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGg/KGUubGFzdENoaWxkLmNsYXNzTmFtZT0iZSIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aCk6ITF9KSxULmdldEJ5TmFtZT1hdChmdW5jdGlvbihlKXtlLmlkPXgrMCxlLmlubmVySFRNTD0iPGEgbmFtZT0nIit4KyInPjwvYT48ZGl2IG5hbWU9JyIreCsiJz48L2Rpdj4iLGYuaW5zZXJ0QmVmb3JlKGUsZi5maXJzdENoaWxkKTt2YXIgdD1uLmdldEVsZW1lbnRzQnlOYW1lJiZuLmdldEVsZW1lbnRzQnlOYW1lKHgpLmxlbmd0aD09PTIrbi5nZXRFbGVtZW50c0J5TmFtZSh4KzApLmxlbmd0aDtyZXR1cm4gVC5nZXRJZE5vdE5hbWU9IW4uZ2V0RWxlbWVudEJ5SWQoeCksZi5yZW1vdmVDaGlsZChlKSx0fSksaS5hdHRySGFuZGxlPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PUEmJiIjIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pP3t9OntocmVmOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJ0eXBlIil9fSxULmdldElkTm90TmFtZT8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1BJiYhZCl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbiYmbi5wYXJlbnROb2RlP1tuXTpbXX19LGkuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShldCx0dCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSk6KGkuZmluZC5JRD1mdW5jdGlvbihlLG4pe2lmKHR5cGVvZiBuLmdldEVsZW1lbnRCeUlkIT09QSYmIWQpe3ZhciByPW4uZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIHI/ci5pZD09PWV8fHR5cGVvZiByLmdldEF0dHJpYnV0ZU5vZGUhPT1BJiZyLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9PT1lP1tyXTp0OltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSE9PUEmJmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSksaS5maW5kLlRBRz1ULnRhZ05hbWVOb0NvbW1lbnRzP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09QT9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOnR9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LGkuZmluZC5OQU1FPVQuZ2V0QnlOYW1lJiZmdW5jdGlvbihlLG4pe3JldHVybiB0eXBlb2Ygbi5nZXRFbGVtZW50c0J5TmFtZSE9PUE/bi5nZXRFbGVtZW50c0J5TmFtZShuYW1lKTp0fSxpLmZpbmQuQ0xBU1M9VC5nZXRCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlwZW9mIG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT09PUF8fGQ/dDpuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSl9LGc9W10saD1bIjpmb2N1cyJdLChULnFzYT1ydChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGgucHVzaCgiXFxbIitfKyIqKD86Y2hlY2tlZHxkaXNhYmxlZHxpc21hcHxtdWx0aXBsZXxyZWFkb25seXxzZWxlY3RlZHx2YWx1ZSkiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxoLnB1c2goIjpjaGVja2VkIil9KSxhdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J2hpZGRlbicgaT0nJy8+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpXj0nJ10iKS5sZW5ndGgmJmgucHVzaCgiWypeJF09IitfKyIqKD86XCJcInwnJykiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxoLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksaC5wdXNoKCIsLio6Iil9KSksKFQubWF0Y2hlc1NlbGVjdG9yPXJ0KG09Zi5tYXRjaGVzU2VsZWN0b3J8fGYubW96TWF0Y2hlc1NlbGVjdG9yfHxmLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmF0KGZ1bmN0aW9uKGUpe1QuZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRpdiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixSKX0pLGg9UmVnRXhwKGguam9pbigifCIpKSxnPVJlZ0V4cChnLmpvaW4oInwiKSkseT1ydChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LHY9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiBlPT09dD8odT0hMCwwKToocj10LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpKT8xJnJ8fGUucGFyZW50Tm9kZSYmMTE9PT1lLnBhcmVudE5vZGUubm9kZVR5cGU/ZT09PW58fHkodyxlKT8tMTp0PT09bnx8eSh3LHQpPzE6MDo0JnI/LTE6MTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPy0xOjF9OmZ1bmN0aW9uKGUsdCl7dmFyIHIsaT0wLG89ZS5wYXJlbnROb2RlLGE9dC5wYXJlbnROb2RlLHM9W2VdLGw9W3RdO2lmKGU9PT10KXJldHVybiB1PSEwLDA7aWYoIW98fCFhKXJldHVybiBlPT09bj8tMTp0PT09bj8xOm8/LTE6YT8xOjA7aWYobz09PWEpcmV0dXJuIHV0KGUsdCk7cj1lO3doaWxlKHI9ci5wYXJlbnROb2RlKXMudW5zaGlmdChyKTtyPXQ7d2hpbGUocj1yLnBhcmVudE5vZGUpbC51bnNoaWZ0KHIpO3doaWxlKHNbaV09PT1sW2ldKWkrKztyZXR1cm4gaT91dChzW2ldLGxbaV0pOnNbaV09PT13Py0xOmxbaV09PT13PzE6MH0sdT0hMSxbMCwwXS5zb3J0KHYpLFQuZGV0ZWN0RHVwbGljYXRlcz11LHApOnB9LHN0Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gc3QoZSxudWxsLG51bGwsdCl9LHN0Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx0PXQucmVwbGFjZShaLCI9JyQxJ10iKSwhKCFULm1hdGNoZXNTZWxlY3Rvcnx8ZHx8ZyYmZy50ZXN0KHQpfHxoLnRlc3QodCkpKXRyeXt2YXIgbj1tLmNhbGwoZSx0KTtpZihufHxULmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2gocil7fXJldHVybiBzdCh0LHAsbnVsbCxbZV0pLmxlbmd0aD4wfSxzdC5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx5KGUsdCl9LHN0LmF0dHI9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSksZHx8KHQ9dC50b0xvd2VyQ2FzZSgpKSwobj1pLmF0dHJIYW5kbGVbdF0pP24oZSk6ZHx8VC5hdHRyaWJ1dGVzP2UuZ2V0QXR0cmlidXRlKHQpOigobj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpfHxlLmdldEF0dHJpYnV0ZSh0KSkmJmVbdF09PT0hMD90Om4mJm4uc3BlY2lmaWVkP24udmFsdWU6bnVsbH0sc3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LHN0LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2lmKHU9IVQuZGV0ZWN0RHVwbGljYXRlcyxlLnNvcnQodiksdSl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9O2Z1bmN0aW9uIHV0KGUsdCl7dmFyIG49dCYmZSxyPW4mJih+dC5zb3VyY2VJbmRleHx8aiktKH5lLnNvdXJjZUluZGV4fHxqKTtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gbHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09biYmdC50eXBlPT09ZX19ZnVuY3Rpb24gY3QoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PW58fCJidXR0b24iPT09bikmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHB0KGUpe3JldHVybiBvdChmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxvdChmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfW89c3QuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPSIiLHI9MCxpPWUubm9kZVR5cGU7aWYoaSl7aWYoMT09PWl8fDk9PT1pfHwxMT09PWkpe2lmKCJzdHJpbmciPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9byhlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSBmb3IoO3Q9ZVtyXTtyKyspbis9byh0KTtyZXR1cm4gbn0saT1zdC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpvdCxtYXRjaDpVLGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKGV0LHR0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShldCx0dCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHN0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnN0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBVLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVs0XT9lWzJdPWVbNF06biYmei50ZXN0KG4pJiYodD1mdChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OihlPWUucmVwbGFjZShldCx0dCkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1rW2UrIiAiXTtyZXR1cm4gdHx8KHQ9UmVnRXhwKCIoXnwiK18rIikiK2UrIigiK18rInwkKSIpKSYmayhlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoZS5jbGFzc05hbWV8fHR5cGVvZiBlLmdldEF0dHJpYnV0ZSE9PUEmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPXN0LmF0dHIocixlKTtyZXR1cm4gbnVsbD09aT8iIT0iPT09dDp0PyhpKz0iIiwiPSI9PT10P2k9PT1uOiIhPSI9PT10P2khPT1uOiJePSI9PT10P24mJjA9PT1pLmluZGV4T2Yobik6Iio9Ij09PXQ/biYmaS5pbmRleE9mKG4pPi0xOiIkPSI9PT10P24mJmkuc2xpY2UoLW4ubGVuZ3RoKT09PW46In49Ij09PXQ/KCIgIitpKyIgIikuaW5kZXhPZihuKT4tMToifD0iPT09dD9pPT09bnx8aS5zbGljZSgwLG4ubGVuZ3RoKzEpPT09bisiLSI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz0ibnRoIiE9PWUuc2xpY2UoMCwzKSxhPSJsYXN0IiE9PWUuc2xpY2UoLTQpLHM9Im9mLXR5cGUiPT09dDtyZXR1cm4gMT09PXImJjA9PT1pP2Z1bmN0aW9uKGUpe3JldHVybiEhZS5wYXJlbnROb2RlfTpmdW5jdGlvbih0LG4sdSl7dmFyIGwsYyxwLGYsZCxoLGc9byE9PWE/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixtPXQucGFyZW50Tm9kZSx5PXMmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx2PSF1JiYhcztpZihtKXtpZihvKXt3aGlsZShnKXtwPXQ7d2hpbGUocD1wW2ddKWlmKHM/cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSlyZXR1cm4hMTtoPWc9Im9ubHkiPT09ZSYmIWgmJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYoaD1bYT9tLmZpcnN0Q2hpbGQ6bS5sYXN0Q2hpbGRdLGEmJnYpe2M9bVt4XXx8KG1beF09e30pLGw9Y1tlXXx8W10sZD1sWzBdPT09TiYmbFsxXSxmPWxbMF09PT1OJiZsWzJdLHA9ZCYmbS5jaGlsZE5vZGVzW2RdO3doaWxlKHA9KytkJiZwJiZwW2ddfHwoZj1kPTApfHxoLnBvcCgpKWlmKDE9PT1wLm5vZGVUeXBlJiYrK2YmJnA9PT10KXtjW2VdPVtOLGQsZl07YnJlYWt9fWVsc2UgaWYodiYmKGw9KHRbeF18fCh0W3hdPXt9KSlbZV0pJiZsWzBdPT09TilmPWxbMV07ZWxzZSB3aGlsZShwPSsrZCYmcCYmcFtnXXx8KGY9ZD0wKXx8aC5wb3AoKSlpZigocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKSYmKytmJiYodiYmKChwW3hdfHwocFt4XT17fSkpW2VdPVtOLGZdKSxwPT09dCkpYnJlYWs7cmV0dXJuIGYtPWksZj09PXJ8fDA9PT1mJXImJmYvcj49MH19fSxQU0VVRE86ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkucHNldWRvc1tlXXx8aS5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHN0LmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIHJbeF0/cih0KTpyLmxlbmd0aD4xPyhuPVtlLGUsIiIsdF0saS5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/b3QoZnVuY3Rpb24oZSxuKXt2YXIgaSxvPXIoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSlpPU0uY2FsbChlLG9bYV0pLGVbaV09IShuW2ldPW9bYV0pfSk6ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSwwLG4pfSk6cn19LHBzZXVkb3M6e25vdDpvdChmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9cyhlLnJlcGxhY2UoVywiJDEiKSk7cmV0dXJuIHJbeF0/b3QoZnVuY3Rpb24oZSx0LG4saSl7dmFyIG8sYT1yKGUsbnVsbCxpLFtdKSxzPWUubGVuZ3RoO3doaWxlKHMtLSkobz1hW3NdKSYmKGVbc109ISh0W3NdPW8pKX0pOmZ1bmN0aW9uKGUsaSxvKXtyZXR1cm4gdFswXT1lLHIodCxudWxsLG8sbiksIW4ucG9wKCl9fSksaGFzOm90KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gc3QoZSx0KS5sZW5ndGg+MH19KSxjb250YWluczpvdChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuKHQudGV4dENvbnRlbnR8fHQuaW5uZXJUZXh0fHxvKHQpKS5pbmRleE9mKGUpPi0xfX0pLGxhbmc6b3QoZnVuY3Rpb24oZSl7cmV0dXJuIFgudGVzdChlfHwiIil8fHN0LmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKGV0LHR0KS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3ZhciBuO2RvIGlmKG49ZD90LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKTp0LmxhbmcpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49PT1lfHwwPT09bi5pbmRleE9mKGUrIi0iKTt3aGlsZSgodD10LnBhcmVudE5vZGUpJiYxPT09dC5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWUubG9jYXRpb24mJmUubG9jYXRpb24uaGFzaDtyZXR1cm4gbiYmbi5zbGljZSgxKT09PXQuaWR9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1mfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXAuYWN0aXZlRWxlbWVudCYmKCFwLmhhc0ZvY3VzfHxwLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8fmUudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZU5hbWU+IkAifHwzPT09ZS5ub2RlVHlwZXx8ND09PWUubm9kZVR5cGUpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4haS5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEcudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6cHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnB0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpwdChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOnB0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpwdChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpwdChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpwdChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX07Zm9yKG4gaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW25dPWx0KG4pO2ZvcihuIGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW25dPWN0KG4pO2Z1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scixvLGEscyx1LGwsYz1FW2UrIiAiXTtpZihjKXJldHVybiB0PzA6Yy5zbGljZSgwKTtzPWUsdT1bXSxsPWkucHJlRmlsdGVyO3doaWxlKHMpeyghbnx8KHI9JC5leGVjKHMpKSkmJihyJiYocz1zLnNsaWNlKHJbMF0ubGVuZ3RoKXx8cyksdS5wdXNoKG89W10pKSxuPSExLChyPUkuZXhlYyhzKSkmJihuPXIuc2hpZnQoKSxvLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoVywiICIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4gaS5maWx0ZXIpIShyPVVbYV0uZXhlYyhzKSl8fGxbYV0mJiEocj1sW2FdKHIpKXx8KG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczpyfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9zdC5lcnJvcihlKTpFKGUsdSkuc2xpY2UoMCl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9MCxuPWUubGVuZ3RoLHI9IiI7Zm9yKDtuPnQ7dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gaHQoZSx0LG4pe3ZhciBpPXQuZGlyLG89biYmInBhcmVudE5vZGUiPT09aSxhPUMrKztyZXR1cm4gdC5maXJzdD9mdW5jdGlvbih0LG4scil7d2hpbGUodD10W2ldKWlmKDE9PT10Lm5vZGVUeXBlfHxvKXJldHVybiBlKHQsbixyKX06ZnVuY3Rpb24odCxuLHMpe3ZhciB1LGwsYyxwPU4rIiAiK2E7aWYocyl7d2hpbGUodD10W2ldKWlmKCgxPT09dC5ub2RlVHlwZXx8bykmJmUodCxuLHMpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W2ldKWlmKDE9PT10Lm5vZGVUeXBlfHxvKWlmKGM9dFt4XXx8KHRbeF09e30pLChsPWNbaV0pJiZsWzBdPT09cCl7aWYoKHU9bFsxXSk9PT0hMHx8dT09PXIpcmV0dXJuIHU9PT0hMH1lbHNlIGlmKGw9Y1tpXT1bcF0sbFsxXT1lKHQsbixzKXx8cixsWzFdPT09ITApcmV0dXJuITB9fWZ1bmN0aW9uIGd0KGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXt2YXIgaT1lLmxlbmd0aDt3aGlsZShpLS0paWYoIWVbaV0odCxuLHIpKXJldHVybiExO3JldHVybiEwfTplWzBdfWZ1bmN0aW9uIG10KGUsdCxuLHIsaSl7dmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7Zm9yKDt1PnM7cysrKShvPWVbc10pJiYoIW58fG4obyxyLGkpKSYmKGEucHVzaChvKSxsJiZ0LnB1c2gocykpO3JldHVybiBhfWZ1bmN0aW9uIHl0KGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbeF0mJihyPXl0KHIpKSxpJiYhaVt4XSYmKGk9eXQoaSxvKSksb3QoZnVuY3Rpb24obyxhLHMsdSl7dmFyIGwsYyxwLGY9W10sZD1bXSxoPWEubGVuZ3RoLGc9b3x8eHQodHx8IioiLHMubm9kZVR5cGU/W3NdOnMsW10pLG09IWV8fCFvJiZ0P2c6bXQoZyxmLGUscyx1KSx5PW4/aXx8KG8/ZTpofHxyKT9bXTphOm07aWYobiYmbihtLHkscyx1KSxyKXtsPW10KHksZCkscihsLFtdLHMsdSksYz1sLmxlbmd0aDt3aGlsZShjLS0pKHA9bFtjXSkmJih5W2RbY11dPSEobVtkW2NdXT1wKSl9aWYobyl7aWYoaXx8ZSl7aWYoaSl7bD1bXSxjPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmbC5wdXNoKG1bY109cCk7aShudWxsLHk9W10sbCx1KX1jPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmKGw9aT9NLmNhbGwobyxwKTpmW2NdKT4tMSYmKG9bbF09IShhW2xdPXApKX19ZWxzZSB5PW10KHk9PT1hP3kuc3BsaWNlKGgseS5sZW5ndGgpOnkpLGk/aShudWxsLGEseSx1KTpILmFwcGx5KGEseSl9KX1mdW5jdGlvbiB2dChlKXt2YXIgdCxuLHIsbz1lLmxlbmd0aCxhPWkucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fGkucmVsYXRpdmVbIiAiXSx1PWE/MTowLGM9aHQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxwPWh0KGZ1bmN0aW9uKGUpe3JldHVybiBNLmNhbGwodCxlKT4tMX0scywhMCksZj1bZnVuY3Rpb24oZSxuLHIpe3JldHVybiFhJiYocnx8biE9PWwpfHwoKHQ9bikubm9kZVR5cGU/YyhlLG4scik6cChlLG4scikpfV07Zm9yKDtvPnU7dSsrKWlmKG49aS5yZWxhdGl2ZVtlW3VdLnR5cGVdKWY9W2h0KGd0KGYpLG4pXTtlbHNle2lmKG49aS5maWx0ZXJbZVt1XS50eXBlXS5hcHBseShudWxsLGVbdV0ubWF0Y2hlcyksblt4XSl7Zm9yKHI9Kyt1O28+cjtyKyspaWYoaS5yZWxhdGl2ZVtlW3JdLnR5cGVdKWJyZWFrO3JldHVybiB5dCh1PjEmJmd0KGYpLHU+MSYmZHQoZS5zbGljZSgwLHUtMSkpLnJlcGxhY2UoVywiJDEiKSxuLHI+dSYmdnQoZS5zbGljZSh1LHIpKSxvPnImJnZ0KGU9ZS5zbGljZShyKSksbz5yJiZkdChlKSl9Zi5wdXNoKG4pfXJldHVybiBndChmKX1mdW5jdGlvbiBidChlLHQpe3ZhciBuPTAsbz10Lmxlbmd0aD4wLGE9ZS5sZW5ndGg+MCxzPWZ1bmN0aW9uKHMsdSxjLGYsZCl7dmFyIGgsZyxtLHk9W10sdj0wLGI9IjAiLHg9cyYmW10sdz1udWxsIT1kLFQ9bCxDPXN8fGEmJmkuZmluZC5UQUcoIioiLGQmJnUucGFyZW50Tm9kZXx8dSksaz1OKz1udWxsPT1UPzE6TWF0aC5yYW5kb20oKXx8LjE7Zm9yKHcmJihsPXUhPT1wJiZ1LHI9bik7bnVsbCE9KGg9Q1tiXSk7YisrKXtpZihhJiZoKXtnPTA7d2hpbGUobT1lW2crK10paWYobShoLHUsYykpe2YucHVzaChoKTticmVha313JiYoTj1rLHI9KytuKX1vJiYoKGg9IW0mJmgpJiZ2LS0scyYmeC5wdXNoKGgpKX1pZih2Kz1iLG8mJmIhPT12KXtnPTA7d2hpbGUobT10W2crK10pbSh4LHksdSxjKTtpZihzKXtpZih2PjApd2hpbGUoYi0tKXhbYl18fHlbYl18fCh5W2JdPUwuY2FsbChmKSk7eT1tdCh5KX1ILmFwcGx5KGYseSksdyYmIXMmJnkubGVuZ3RoPjAmJnYrdC5sZW5ndGg+MSYmc3QudW5pcXVlU29ydChmKX1yZXR1cm4gdyYmKE49ayxsPVQpLHh9O3JldHVybiBvP290KHMpOnN9cz1zdC5jb21waWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPVtdLG89U1tlKyIgIl07aWYoIW8pe3R8fCh0PWZ0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlvPXZ0KHRbbl0pLG9beF0/ci5wdXNoKG8pOmkucHVzaChvKTtvPVMoZSxidChpLHIpKX1yZXR1cm4gb307ZnVuY3Rpb24geHQoZSx0LG4pe3ZhciByPTAsaT10Lmxlbmd0aDtmb3IoO2k+cjtyKyspc3QoZSx0W3JdLG4pO3JldHVybiBufWZ1bmN0aW9uIHd0KGUsdCxuLHIpe3ZhciBvLGEsdSxsLGMscD1mdChlKTtpZighciYmMT09PXAubGVuZ3RoKXtpZihhPXBbMF09cFswXS5zbGljZSgwKSxhLmxlbmd0aD4yJiYiSUQiPT09KHU9YVswXSkudHlwZSYmOT09PXQubm9kZVR5cGUmJiFkJiZpLnJlbGF0aXZlW2FbMV0udHlwZV0pe2lmKHQ9aS5maW5kLklEKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LHR0KSx0KVswXSwhdClyZXR1cm4gbjtlPWUuc2xpY2UoYS5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9bz1VLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6YS5sZW5ndGg7d2hpbGUoby0tKXtpZih1PWFbb10saS5yZWxhdGl2ZVtsPXUudHlwZV0pYnJlYWs7aWYoKGM9aS5maW5kW2xdKSYmKHI9Yyh1Lm1hdGNoZXNbMF0ucmVwbGFjZShldCx0dCksVi50ZXN0KGFbMF0udHlwZSkmJnQucGFyZW50Tm9kZXx8dCkpKXtpZihhLnNwbGljZShvLDEpLGU9ci5sZW5ndGgmJmR0KGEpLCFlKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHIsMCkpLG47YnJlYWt9fX1yZXR1cm4gcyhlLHApKHIsdCxkLG4sVi50ZXN0KGUpKSxufWkucHNldWRvcy5udGg9aS5wc2V1ZG9zLmVxO2Z1bmN0aW9uIFR0KCl7fWkuZmlsdGVycz1UdC5wcm90b3R5cGU9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgVHQsYygpLHN0LmF0dHI9Yi5hdHRyLGIuZmluZD1zdCxiLmV4cHI9c3Quc2VsZWN0b3JzLGIuZXhwclsiOiJdPWIuZXhwci5wc2V1ZG9zLGIudW5pcXVlPXN0LnVuaXF1ZVNvcnQsYi50ZXh0PXN0LmdldFRleHQsYi5pc1hNTERvYz1zdC5pc1hNTCxiLmNvbnRhaW5zPXN0LmNvbnRhaW5zfShlKTt2YXIgYXQ9L1VudGlsJC8sc3Q9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sdXQ9L14uW146I1xbXC4sXSokLyxsdD1iLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LGN0PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2IuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXMubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gcj10aGlzLHRoaXMucHVzaFN0YWNrKGIoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MDtpPnQ7dCsrKWlmKGIuY29udGFpbnMoclt0XSx0aGlzKSlyZXR1cm4hMH0pKTtmb3Iobj1bXSx0PTA7aT50O3QrKyliLmZpbmQoZSx0aGlzW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT9iLnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPSh0aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrIiAiOiIiKStlLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPWIoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7cj50O3QrKylpZihiLmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoInN0cmluZyI9PXR5cGVvZiBlP2x0LnRlc3QoZSk/YihlLHRoaXMuY29udGV4dCkuaW5kZXgodGhpc1swXSk+PTA6Yi5maWx0ZXIoZSx0aGlzKS5sZW5ndGg+MDp0aGlzLmZpbHRlcihlKS5sZW5ndGg+MCl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9bHQudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP2IoZSx0fHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPnI7cisrKXtuPXRoaXNbcl07d2hpbGUobiYmbi5vd25lckRvY3VtZW50JiZuIT09dCYmMTEhPT1uLm5vZGVUeXBlKXtpZihhP2EuaW5kZXgobik+LTE6Yi5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKXtvLnB1c2gobik7YnJlYWt9bj1uLnBhcmVudE5vZGV9fXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aD4xP2IudW5pcXVlKG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/Yi5pbkFycmF5KHRoaXNbMF0sYihlKSk6Yi5pbkFycmF5KGUuanF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPSJzdHJpbmciPT10eXBlb2YgZT9iKGUsdCk6Yi5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj1iLm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksYi5mbi5hbmRTZWxmPWIuZm4uYWRkQmFjaztmdW5jdGlvbiBwdChlLHQpe2RvIGU9ZVt0XTt3aGlsZShlJiYxIT09ZS5ub2RlVHlwZSk7cmV0dXJuIGV9Yi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBiLmRpcihlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsInBhcmVudE5vZGUiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gYi5ub2RlTmFtZShlLCJpZnJhbWUiKT9lLmNvbnRlbnREb2N1bWVudHx8ZS5jb250ZW50V2luZG93LmRvY3VtZW50OmIubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7Yi5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPWIubWFwKHRoaXMsdCxuKTtyZXR1cm4gYXQudGVzdChlKXx8KHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT1iLmZpbHRlcihyLGkpKSxpPXRoaXMubGVuZ3RoPjEmJiFjdFtlXT9iLnVuaXF1ZShpKTppLHRoaXMubGVuZ3RoPjEmJnN0LnRlc3QoZSkmJihpPWkucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhpKX19KSxiLmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoP2IuZmluZC5tYXRjaGVzU2VsZWN0b3IodFswXSxlKT9bdFswXV06W106Yi5maW5kLm1hdGNoZXMoZSx0KX0sZGlyOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1bXSxvPWVbbl07d2hpbGUobyYmOSE9PW8ubm9kZVR5cGUmJihyPT09dHx8MSE9PW8ubm9kZVR5cGV8fCFiKG8pLmlzKHIpKSkxPT09by5ub2RlVHlwZSYmaS5wdXNoKG8pLG89b1tuXTtyZXR1cm4gaX0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZnQoZSx0LG4pe2lmKHQ9dHx8MCxiLmlzRnVuY3Rpb24odCkpcmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUscil7dmFyIGk9ISF0LmNhbGwoZSxyLGUpO3JldHVybiBpPT09bn0pO2lmKHQubm9kZVR5cGUpcmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD09PW59KTtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciByPWIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pO2lmKHV0LnRlc3QodCkpcmV0dXJuIGIuZmlsdGVyKHQsciwhbik7dD1iLmZpbHRlcih0LHIpfXJldHVybiBiLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gYi5pbkFycmF5KGUsdCk+PTA9PT1ufSl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9aHQuc3BsaXQoInwiKSxuPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKG4uY3JlYXRlRWxlbWVudCl3aGlsZSh0Lmxlbmd0aCluLmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7cmV0dXJuIG59dmFyIGh0PSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIixndD0vIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9nLG10PVJlZ0V4cCgiPCg/OiIraHQrIilbXFxzLz5dIiwiaSIpLHl0PS9eXHMrLyx2dD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLGJ0PS88KFtcdzpdKykvLHh0PS88dGJvZHkvaSx3dD0vPHwmIz9cdys7LyxUdD0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLE50PS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLEN0PS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGt0PS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxFdD0vXnRydWVcLyguKikvLFN0PS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZyxBdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6Yi5zdXBwb3J0Lmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sanQ9ZHQobyksRHQ9anQuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KCJkaXYiKSk7QXQub3B0Z3JvdXA9QXQub3B0aW9uLEF0LnRib2R5PUF0LnRmb290PUF0LmNvbGdyb3VwPUF0LmNhcHRpb249QXQudGhlYWQsQXQudGg9QXQudGQsYi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P2IudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fG8pLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSx3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD1iKGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiYxPT09ZS5maXJzdENoaWxkLm5vZGVUeXBlKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9Yih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1iLmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXtiKHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Yi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGIodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmdGhpcy5hcHBlbmRDaGlsZChlKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCEwLGZ1bmN0aW9uKGUpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJnRoaXMuaW5zZXJ0QmVmb3JlKGUsdGhpcy5maXJzdENoaWxkKX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wO2Zvcig7bnVsbCE9KG49dGhpc1tyXSk7cisrKSghZXx8Yi5maWx0ZXIoZSxbbl0pLmxlbmd0aD4wKSYmKHR8fDEhPT1uLm5vZGVUeXBlfHxiLmNsZWFuRGF0YShPdChuKSksbi5wYXJlbnROb2RlJiYodCYmYi5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsbikmJk10KE90KG4sInNjcmlwdCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspezE9PT1lLm5vZGVUeXBlJiZiLmNsZWFuRGF0YShPdChlLCExKSk7d2hpbGUoZS5maXJzdENoaWxkKWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtlLm9wdGlvbnMmJmIubm9kZU5hbWUoZSwic2VsZWN0IikmJihlLm9wdGlvbnMubGVuZ3RoPTApfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGIuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIDE9PT1uLm5vZGVUeXBlP24uaW5uZXJIVE1MLnJlcGxhY2UoZ3QsIiIpOnQ7aWYoISgic3RyaW5nIiE9dHlwZW9mIGV8fFR0LnRlc3QoZSl8fCFiLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSYmbXQudGVzdChlKXx8IWIuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChlKXx8QXRbKGJ0LmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKSl7ZT1lLnJlcGxhY2UodnQsIjwkMT48LyQyPiIpO3RyeXtmb3IoO2k+cjtyKyspbj10aGlzW3JdfHx7fSwxPT09bi5ub2RlVHlwZSYmKGIuY2xlYW5EYXRhKE90KG4sITEpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gobyl7fX1uJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdHx8InN0cmluZyI9PXR5cGVvZiBlfHwoZT1iKGUpLm5vdCh0aGlzKS5kZXRhY2goKSksdGhpcy5kb21NYW5pcChbZV0sITAsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTtuJiYoYih0aGlzKS5yZW1vdmUoKSxuLmluc2VydEJlZm9yZShlLHQpKX0pfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLG4scil7ZT1mLmFwcGx5KFtdLGUpO3ZhciBpLG8sYSxzLHUsbCxjPTAscD10aGlzLmxlbmd0aCxkPXRoaXMsaD1wLTEsZz1lWzBdLG09Yi5pc0Z1bmN0aW9uKGcpO2lmKG18fCEoMT49cHx8InN0cmluZyIhPXR5cGVvZiBnfHxiLnN1cHBvcnQuY2hlY2tDbG9uZSkmJkN0LnRlc3QoZykpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXt2YXIgbz1kLmVxKGkpO20mJihlWzBdPWcuY2FsbCh0aGlzLGksbj9vLmh0bWwoKTp0KSksby5kb21NYW5pcChlLG4scil9KTtpZihwJiYobD1iLmJ1aWxkRnJhZ21lbnQoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksaT1sLmZpcnN0Q2hpbGQsMT09PWwuY2hpbGROb2Rlcy5sZW5ndGgmJihsPWkpLGkpKXtmb3Iobj1uJiZiLm5vZGVOYW1lKGksInRyIikscz1iLm1hcChPdChsLCJzY3JpcHQiKSxIdCksYT1zLmxlbmd0aDtwPmM7YysrKW89bCxjIT09aCYmKG89Yi5jbG9uZShvLCEwLCEwKSxhJiZiLm1lcmdlKHMsT3Qobywic2NyaXB0IikpKSxyLmNhbGwobiYmYi5ub2RlTmFtZSh0aGlzW2NdLCJ0YWJsZSIpP0x0KHRoaXNbY10sInRib2R5Iik6dGhpc1tjXSxvLGMpO2lmKGEpZm9yKHU9c1tzLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LGIubWFwKHMscXQpLGM9MDthPmM7YysrKW89c1tjXSxrdC50ZXN0KG8udHlwZXx8IiIpJiYhYi5fZGF0YShvLCJnbG9iYWxFdmFsIikmJmIuY29udGFpbnModSxvKSYmKG8uc3JjP2IuYWpheCh7dXJsOm8uc3JjLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSk6Yi5nbG9iYWxFdmFsKChvLnRleHR8fG8udGV4dENvbnRlbnR8fG8uaW5uZXJIVE1MfHwiIikucmVwbGFjZShTdCwiIikpKTtsPWk9bnVsbH1yZXR1cm4gdGhpc319KTtmdW5jdGlvbiBMdChlLHQpe3JldHVybiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpKX1mdW5jdGlvbiBIdChlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZU5vZGUoInR5cGUiKTtyZXR1cm4gZS50eXBlPSh0JiZ0LnNwZWNpZmllZCkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIHF0KGUpe3ZhciB0PUV0LmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gTXQoZSx0KXt2YXIgbixyPTA7Zm9yKDtudWxsIT0obj1lW3JdKTtyKyspYi5fZGF0YShuLCJnbG9iYWxFdmFsIiwhdHx8Yi5fZGF0YSh0W3JdLCJnbG9iYWxFdmFsIikpfWZ1bmN0aW9uIF90KGUsdCl7aWYoMT09PXQubm9kZVR5cGUmJmIuaGFzRGF0YShlKSl7dmFyIG4scixpLG89Yi5fZGF0YShlKSxhPWIuX2RhdGEodCxvKSxzPW8uZXZlbnRzO2lmKHMpe2RlbGV0ZSBhLmhhbmRsZSxhLmV2ZW50cz17fTtmb3IobiBpbiBzKWZvcihyPTAsaT1zW25dLmxlbmd0aDtpPnI7cisrKWIuZXZlbnQuYWRkKHQsbixzW25dW3JdKX1hLmRhdGEmJihhLmRhdGE9Yi5leHRlbmQoe30sYS5kYXRhKSl9fWZ1bmN0aW9uIEZ0KGUsdCl7dmFyIG4scixpO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwhYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmdFtiLmV4cGFuZG9dKXtpPWIuX2RhdGEodCk7Zm9yKHIgaW4gaS5ldmVudHMpYi5yZW1vdmVFdmVudCh0LHIsaS5oYW5kbGUpO3QucmVtb3ZlQXR0cmlidXRlKGIuZXhwYW5kbyl9InNjcmlwdCI9PT1uJiZ0LnRleHQhPT1lLnRleHQ/KEh0KHQpLnRleHQ9ZS50ZXh0LHF0KHQpKToib2JqZWN0Ij09PW4/KHQucGFyZW50Tm9kZSYmKHQub3V0ZXJIVE1MPWUub3V0ZXJIVE1MKSxiLnN1cHBvcnQuaHRtbDVDbG9uZSYmZS5pbm5lckhUTUwmJiFiLnRyaW0odC5pbm5lckhUTUwpJiYodC5pbm5lckhUTUw9ZS5pbm5lckhUTUwpKToiaW5wdXQiPT09biYmTnQudGVzdChlLnR5cGUpPyh0LmRlZmF1bHRDaGVja2VkPXQuY2hlY2tlZD1lLmNoZWNrZWQsdC52YWx1ZSE9PWUudmFsdWUmJih0LnZhbHVlPWUudmFsdWUpKToib3B0aW9uIj09PW4/dC5kZWZhdWx0U2VsZWN0ZWQ9dC5zZWxlY3RlZD1lLmRlZmF1bHRTZWxlY3RlZDooImlucHV0Ij09PW58fCJ0ZXh0YXJlYSI9PT1uKSYmKHQuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlKX19Yi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9MCxpPVtdLG89YihlKSxhPW8ubGVuZ3RoLTE7Zm9yKDthPj1yO3IrKyluPXI9PT1hP3RoaXM6dGhpcy5jbG9uZSghMCksYihvW3JdKVt0XShuKSxkLmFwcGx5KGksbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGkpfX0pO2Z1bmN0aW9uIE90KGUsbil7dmFyIHIsbyxhPTAscz10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PWk/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShufHwiKiIpOnR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGwhPT1pP2UucXVlcnlTZWxlY3RvckFsbChufHwiKiIpOnQ7aWYoIXMpZm9yKHM9W10scj1lLmNoaWxkTm9kZXN8fGU7bnVsbCE9KG89clthXSk7YSsrKSFufHxiLm5vZGVOYW1lKG8sbik/cy5wdXNoKG8pOmIubWVyZ2UocyxPdChvLG4pKTtyZXR1cm4gbj09PXR8fG4mJmIubm9kZU5hbWUoZSxuKT9iLm1lcmdlKFtlXSxzKTpzfWZ1bmN0aW9uIEJ0KGUpe050LnRlc3QoZS50eXBlKSYmKGUuZGVmYXVsdENoZWNrZWQ9ZS5jaGVja2VkKX1iLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdT1iLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZihiLnN1cHBvcnQuaHRtbDVDbG9uZXx8Yi5pc1hNTERvYyhlKXx8IW10LnRlc3QoIjwiK2Uubm9kZU5hbWUrIj4iKT9vPWUuY2xvbmVOb2RlKCEwKTooRHQuaW5uZXJIVE1MPWUub3V0ZXJIVE1MLER0LnJlbW92ZUNoaWxkKG89RHQuZmlyc3RDaGlsZCkpLCEoYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmYi5zdXBwb3J0Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxiLmlzWE1MRG9jKGUpKSlmb3Iocj1PdChvKSxzPU90KGUpLGE9MDtudWxsIT0oaT1zW2FdKTsrK2EpclthXSYmRnQoaSxyW2FdKTtpZih0KWlmKG4pZm9yKHM9c3x8T3QoZSkscj1yfHxPdChvKSxhPTA7bnVsbCE9KGk9c1thXSk7YSsrKV90KGksclthXSk7ZWxzZSBfdChlLG8pO3JldHVybiByPU90KG8sInNjcmlwdCIpLHIubGVuZ3RoPjAmJk10KHIsIXUmJk90KGUsInNjcmlwdCIpKSxyPXM9aT1udWxsLG99LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGMscD1lLmxlbmd0aCxmPWR0KHQpLGQ9W10saD0wO2Zvcig7cD5oO2grKylpZihvPWVbaF0sb3x8MD09PW8paWYoIm9iamVjdCI9PT1iLnR5cGUobykpYi5tZXJnZShkLG8ubm9kZVR5cGU/W29dOm8pO2Vsc2UgaWYod3QudGVzdChvKSl7cz1zfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLHU9KGJ0LmV4ZWMobyl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYz1BdFt1XXx8QXQuX2RlZmF1bHQscy5pbm5lckhUTUw9Y1sxXStvLnJlcGxhY2UodnQsIjwkMT48LyQyPiIpK2NbMl0saT1jWzBdO3doaWxlKGktLSlzPXMubGFzdENoaWxkO2lmKCFiLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJnl0LnRlc3QobykmJmQucHVzaCh0LmNyZWF0ZVRleHROb2RlKHl0LmV4ZWMobylbMF0pKSwhYi5zdXBwb3J0LnRib2R5KXtvPSJ0YWJsZSIhPT11fHx4dC50ZXN0KG8pPyI8dGFibGU+IiE9PWNbMV18fHh0LnRlc3Qobyk/MDpzOnMuZmlyc3RDaGlsZCxpPW8mJm8uY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUoaS0tKWIubm9kZU5hbWUobD1vLmNoaWxkTm9kZXNbaV0sInRib2R5IikmJiFsLmNoaWxkTm9kZXMubGVuZ3RoJiZvLnJlbW92ZUNoaWxkKGwpDQp9Yi5tZXJnZShkLHMuY2hpbGROb2Rlcykscy50ZXh0Q29udGVudD0iIjt3aGlsZShzLmZpcnN0Q2hpbGQpcy5yZW1vdmVDaGlsZChzLmZpcnN0Q2hpbGQpO3M9Zi5sYXN0Q2hpbGR9ZWxzZSBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7cyYmZi5yZW1vdmVDaGlsZChzKSxiLnN1cHBvcnQuYXBwZW5kQ2hlY2tlZHx8Yi5ncmVwKE90KGQsImlucHV0IiksQnQpLGg9MDt3aGlsZShvPWRbaCsrXSlpZigoIXJ8fC0xPT09Yi5pbkFycmF5KG8scikpJiYoYT1iLmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCxvKSxzPU90KGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGEmJk10KHMpLG4pKXtpPTA7d2hpbGUobz1zW2krK10pa3QudGVzdChvLnR5cGV8fCIiKSYmbi5wdXNoKG8pfXJldHVybiBzPW51bGwsZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixvLGEscz0wLHU9Yi5leHBhbmRvLGw9Yi5jYWNoZSxwPWIuc3VwcG9ydC5kZWxldGVFeHBhbmRvLGY9Yi5ldmVudC5zcGVjaWFsO2Zvcig7bnVsbCE9KG49ZVtzXSk7cysrKWlmKCh0fHxiLmFjY2VwdERhdGEobikpJiYobz1uW3VdLGE9byYmbFtvXSkpe2lmKGEuZXZlbnRzKWZvcihyIGluIGEuZXZlbnRzKWZbcl0/Yi5ldmVudC5yZW1vdmUobixyKTpiLnJlbW92ZUV2ZW50KG4scixhLmhhbmRsZSk7bFtvXSYmKGRlbGV0ZSBsW29dLHA/ZGVsZXRlIG5bdV06dHlwZW9mIG4ucmVtb3ZlQXR0cmlidXRlIT09aT9uLnJlbW92ZUF0dHJpYnV0ZSh1KTpuW3VdPW51bGwsYy5wdXNoKG8pKX19fSk7dmFyIFB0LFJ0LFd0LCR0PS9hbHBoYVwoW14pXSpcKS9pLEl0PS9vcGFjaXR5XHMqPVxzKihbXildKikvLHp0PS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxYdD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sVXQ9L15tYXJnaW4vLFZ0PVJlZ0V4cCgiXigiK3grIikoLiopJCIsImkiKSxZdD1SZWdFeHAoIl4oIit4KyIpKD8hcHgpW2EteiVdKyQiLCJpIiksSnQ9UmVnRXhwKCJeKFsrLV0pPSgiK3grIikiLCJpIiksR3Q9e0JPRFk6ImJsb2NrIn0sUXQ9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LEt0PXtsZXR0ZXJTcGFjaW5nOjAsZm9udFdlaWdodDo0MDB9LFp0PVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sZW49WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXTtmdW5jdGlvbiB0bihlLHQpe2lmKHQgaW4gZSlyZXR1cm4gdDt2YXIgbj10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSkscj10LGk9ZW4ubGVuZ3RoO3doaWxlKGktLSlpZih0PWVuW2ldK24sdCBpbiBlKXJldHVybiB0O3JldHVybiByfWZ1bmN0aW9uIG5uKGUsdCl7cmV0dXJuIGU9dHx8ZSwibm9uZSI9PT1iLmNzcyhlLCJkaXNwbGF5Iil8fCFiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKX1mdW5jdGlvbiBybihlLHQpe3ZhciBuLHIsaSxvPVtdLGE9MCxzPWUubGVuZ3RoO2Zvcig7cz5hO2ErKylyPWVbYV0sci5zdHlsZSYmKG9bYV09Yi5fZGF0YShyLCJvbGRkaXNwbGF5Iiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1thXXx8Im5vbmUiIT09bnx8KHIuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJm5uKHIpJiYob1thXT1iLl9kYXRhKHIsIm9sZGRpc3BsYXkiLHVuKHIubm9kZU5hbWUpKSkpOm9bYV18fChpPW5uKHIpLChuJiYibm9uZSIhPT1ufHwhaSkmJmIuX2RhdGEociwib2xkZGlzcGxheSIsaT9uOmIuY3NzKHIsImRpc3BsYXkiKSkpKTtmb3IoYT0wO3M+YTthKyspcj1lW2FdLHIuc3R5bGUmJih0JiYibm9uZSIhPT1yLnN0eWxlLmRpc3BsYXkmJiIiIT09ci5zdHlsZS5kaXNwbGF5fHwoci5zdHlsZS5kaXNwbGF5PXQ/b1thXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9Yi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLG4pe3JldHVybiBiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGE9e30scz0wO2lmKGIuaXNBcnJheShuKSl7Zm9yKG89UnQoZSksaT1uLmxlbmd0aDtpPnM7cysrKWFbbltzXV09Yi5jc3MoZSxuW3NdLCExLG8pO3JldHVybiBhfXJldHVybiByIT09dD9iLnN0eWxlKGUsbixyKTpiLmNzcyhlLG4pfSxlLG4sYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBybih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBybih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PSJib29sZWFuIj09dHlwZW9mIGU7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyh0P2U6bm4odGhpcykpP2IodGhpcykuc2hvdygpOmIodGhpcykuaGlkZSgpfSl9fSksYi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1XdChlLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1uPyIxIjpufX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjpiLnN1cHBvcnQuY3NzRmxvYXQ/ImNzc0Zsb2F0Ijoic3R5bGVGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsbixyLGkpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIG8sYSxzLHU9Yi5jYW1lbENhc2UobiksbD1lLnN0eWxlO2lmKG49Yi5jc3NQcm9wc1t1XXx8KGIuY3NzUHJvcHNbdV09dG4obCx1KSkscz1iLmNzc0hvb2tzW25dfHxiLmNzc0hvb2tzW3VdLHI9PT10KXJldHVybiBzJiYiZ2V0ImluIHMmJihvPXMuZ2V0KGUsITEsaSkpIT09dD9vOmxbbl07aWYoYT10eXBlb2Ygciwic3RyaW5nIj09PWEmJihvPUp0LmV4ZWMocikpJiYocj0ob1sxXSsxKSpvWzJdK3BhcnNlRmxvYXQoYi5jc3MoZSxuKSksYT0ibnVtYmVyIiksIShudWxsPT1yfHwibnVtYmVyIj09PWEmJmlzTmFOKHIpfHwoIm51bWJlciIhPT1hfHxiLmNzc051bWJlclt1XXx8KHIrPSJweCIpLGIuc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fCIiIT09cnx8MCE9PW4uaW5kZXhPZigiYmFja2dyb3VuZCIpfHwobFtuXT0iaW5oZXJpdCIpLHMmJiJzZXQiaW4gcyYmKHI9cy5zZXQoZSxyLGkpKT09PXQpKSl0cnl7bFtuXT1yfWNhdGNoKGMpe319fSxjc3M6ZnVuY3Rpb24oZSxuLHIsaSl7dmFyIG8sYSxzLHU9Yi5jYW1lbENhc2Uobik7cmV0dXJuIG49Yi5jc3NQcm9wc1t1XXx8KGIuY3NzUHJvcHNbdV09dG4oZS5zdHlsZSx1KSkscz1iLmNzc0hvb2tzW25dfHxiLmNzc0hvb2tzW3VdLHMmJiJnZXQiaW4gcyYmKGE9cy5nZXQoZSwhMCxyKSksYT09PXQmJihhPVd0KGUsbixpKSksIm5vcm1hbCI9PT1hJiZuIGluIEt0JiYoYT1LdFtuXSksIiI9PT1yfHxyPyhvPXBhcnNlRmxvYXQoYSkscj09PSEwfHxiLmlzTnVtZXJpYyhvKT9vfHwwOmEpOmF9LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhPXt9O2ZvcihvIGluIHQpYVtvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPWFbb107cmV0dXJuIGl9fSksZS5nZXRDb21wdXRlZFN0eWxlPyhSdD1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRDb21wdXRlZFN0eWxlKHQsbnVsbCl9LFd0PWZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEscz1yfHxSdChlKSx1PXM/cy5nZXRQcm9wZXJ0eVZhbHVlKG4pfHxzW25dOnQsbD1lLnN0eWxlO3JldHVybiBzJiYoIiIhPT11fHxiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KHU9Yi5zdHlsZShlLG4pKSxZdC50ZXN0KHUpJiZVdC50ZXN0KG4pJiYoaT1sLndpZHRoLG89bC5taW5XaWR0aCxhPWwubWF4V2lkdGgsbC5taW5XaWR0aD1sLm1heFdpZHRoPWwud2lkdGg9dSx1PXMud2lkdGgsbC53aWR0aD1pLGwubWluV2lkdGg9byxsLm1heFdpZHRoPWEpKSx1fSk6by5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlJiYoUnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY3VycmVudFN0eWxlfSxXdD1mdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9cnx8UnQoZSksdT1zP3Nbbl06dCxsPWUuc3R5bGU7cmV0dXJuIG51bGw9PXUmJmwmJmxbbl0mJih1PWxbbl0pLFl0LnRlc3QodSkmJiF6dC50ZXN0KG4pJiYoaT1sLmxlZnQsbz1lLnJ1bnRpbWVTdHlsZSxhPW8mJm8ubGVmdCxhJiYoby5sZWZ0PWUuY3VycmVudFN0eWxlLmxlZnQpLGwubGVmdD0iZm9udFNpemUiPT09bj8iMWVtIjp1LHU9bC5waXhlbExlZnQrInB4IixsLmxlZnQ9aSxhJiYoby5sZWZ0PWEpKSwiIj09PXU/ImF1dG8iOnV9KTtmdW5jdGlvbiBvbihlLHQsbil7dmFyIHI9VnQuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8InB4Iik6dH1mdW5jdGlvbiBhbihlLHQsbixyLGkpe3ZhciBvPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLGE9MDtmb3IoOzQ+bztvKz0yKSJtYXJnaW4iPT09biYmKGErPWIuY3NzKGUsbitadFtvXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKGEtPWIuY3NzKGUsInBhZGRpbmciK1p0W29dLCEwLGkpKSwibWFyZ2luIiE9PW4mJihhLT1iLmNzcyhlLCJib3JkZXIiK1p0W29dKyJXaWR0aCIsITAsaSkpKTooYSs9Yi5jc3MoZSwicGFkZGluZyIrWnRbb10sITAsaSksInBhZGRpbmciIT09biYmKGErPWIuY3NzKGUsImJvcmRlciIrWnRbb10rIldpZHRoIiwhMCxpKSkpO3JldHVybiBhfWZ1bmN0aW9uIHNuKGUsdCxuKXt2YXIgcj0hMCxpPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1SdChlKSxhPWIuc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PWIuY3NzKGUsImJveFNpemluZyIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT1XdChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLFl0LnRlc3QoaSkpcmV0dXJuIGk7cj1hJiYoYi5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK2FuKGUsdCxufHwoYT8iYm9yZGVyIjoiY29udGVudCIpLHIsbykrInB4In1mdW5jdGlvbiB1bihlKXt2YXIgdD1vLG49R3RbZV07cmV0dXJuIG58fChuPWxuKGUsdCksIm5vbmUiIT09biYmbnx8KFB0PShQdHx8YigiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpLmNzcygiY3NzVGV4dCIsImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0oUHRbMF0uY29udGVudFdpbmRvd3x8UHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT4iKSx0LmNsb3NlKCksbj1sbihlLHQpLFB0LmRldGFjaCgpKSxHdFtlXT1uKSxufWZ1bmN0aW9uIGxuKGUsdCl7dmFyIG49Yih0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj1iLmNzcyhuWzBdLCJkaXNwbGF5Iik7cmV0dXJuIG4ucmVtb3ZlKCkscn1iLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsbil7Yi5jc3NIb29rc1tuXT17Z2V0OmZ1bmN0aW9uKGUscixpKXtyZXR1cm4gcj8wPT09ZS5vZmZzZXRXaWR0aCYmWHQudGVzdChiLmNzcyhlLCJkaXNwbGF5IikpP2Iuc3dhcChlLFF0LGZ1bmN0aW9uKCl7cmV0dXJuIHNuKGUsbixpKX0pOnNuKGUsbixpKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXImJlJ0KGUpO3JldHVybiBvbihlLHQscj9hbihlLG4scixiLnN1cHBvcnQuYm94U2l6aW5nJiYiYm9yZGVyLWJveCI9PT1iLmNzcyhlLCJib3hTaXppbmciLCExLGkpLGkpOjApfX19KSxiLnN1cHBvcnQub3BhY2l0eXx8KGIuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEl0LnRlc3QoKHQmJmUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLmZpbHRlcjplLnN0eWxlLmZpbHRlcil8fCIiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpKyIiOnQ/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0eWxlLHI9ZS5jdXJyZW50U3R5bGUsaT1iLmlzTnVtZXJpYyh0KT8iYWxwaGEob3BhY2l0eT0iKzEwMCp0KyIpIjoiIixvPXImJnIuZmlsdGVyfHxuLmZpbHRlcnx8IiI7bi56b29tPTEsKHQ+PTF8fCIiPT09dCkmJiIiPT09Yi50cmltKG8ucmVwbGFjZSgkdCwiIikpJiZuLnJlbW92ZUF0dHJpYnV0ZSYmKG4ucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKSwiIj09PXR8fHImJiFyLmZpbHRlcil8fChuLmZpbHRlcj0kdC50ZXN0KG8pP28ucmVwbGFjZSgkdCxpKTpvKyIgIitpKX19KSxiKGZ1bmN0aW9uKCl7Yi5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHR8fChiLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXtnZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj9iLnN3YXAoZSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sV3QsW2UsIm1hcmdpblJpZ2h0Il0pOnR9fSksIWIuc3VwcG9ydC5waXhlbFBvc2l0aW9uJiZiLmZuLnBvc2l0aW9uJiZiLmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSxuKXtiLmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gcj8ocj1XdChlLG4pLFl0LnRlc3Qocik/YihlKS5wb3NpdGlvbigpW25dKyJweCI6cik6dH19fSl9KSxiLmV4cHImJmIuZXhwci5maWx0ZXJzJiYoYi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodHx8IWIuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJiJub25lIj09PShlLnN0eWxlJiZlLnN0eWxlLmRpc3BsYXl8fGIuY3NzKGUsImRpc3BsYXkiKSl9LGIuZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIWIuZXhwci5maWx0ZXJzLmhpZGRlbihlKX0pLGIuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGUsdCl7Yi5jc3NIb29rc1tlK3RdPXtleHBhbmQ6ZnVuY3Rpb24obil7dmFyIHI9MCxpPXt9LG89InN0cmluZyI9PXR5cGVvZiBuP24uc3BsaXQoIiAiKTpbbl07Zm9yKDs0PnI7cisrKWlbZStadFtyXSt0XT1vW3JdfHxvW3ItMl18fG9bMF07cmV0dXJuIGl9fSxVdC50ZXN0KGUpfHwoYi5jc3NIb29rc1tlK3RdLnNldD1vbil9KTt2YXIgY249LyUyMC9nLHBuPS9cW1xdJC8sZm49L1xyP1xuL2csZG49L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGhuPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtiLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGIucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1iLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT9iLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFiKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmaG4udGVzdCh0aGlzLm5vZGVOYW1lKSYmIWRuLnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFOdC50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPWIodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpiLmlzQXJyYXkobik/Yi5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKGZuLCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShmbiwiXHJcbiIpfX0pLmdldCgpfX0pLGIucGFyYW09ZnVuY3Rpb24oZSxuKXt2YXIgcixpPVtdLG89ZnVuY3Rpb24oZSx0KXt0PWIuaXNGdW5jdGlvbih0KT90KCk6bnVsbD09dD8iIjp0LGlbaS5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfTtpZihuPT09dCYmKG49Yi5hamF4U2V0dGluZ3MmJmIuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxiLmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhYi5pc1BsYWluT2JqZWN0KGUpKWIuZWFjaChlLGZ1bmN0aW9uKCl7byh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihyIGluIGUpZ24ocixlW3JdLG4sbyk7cmV0dXJuIGkuam9pbigiJiIpLnJlcGxhY2UoY24sIisiKX07ZnVuY3Rpb24gZ24oZSx0LG4scil7dmFyIGk7aWYoYi5pc0FycmF5KHQpKWIuZWFjaCh0LGZ1bmN0aW9uKHQsaSl7bnx8cG4udGVzdChlKT9yKGUsaSk6Z24oZSsiWyIrKCJvYmplY3QiPT10eXBlb2YgaT90OiIiKSsiXSIsaSxuLHIpfSk7ZWxzZSBpZihufHwib2JqZWN0IiE9PWIudHlwZSh0KSlyKGUsdCk7ZWxzZSBmb3IoaSBpbiB0KWduKGUrIlsiK2krIl0iLHRbaV0sbixyKX1iLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXtiLmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKHQsbnVsbCxlLG4pOnRoaXMudHJpZ2dlcih0KX19KSxiLmZuLmhvdmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfTt2YXIgbW4seW4sdm49Yi5ub3coKSxibj0vXD8vLHhuPS8jLiokLyx3bj0vKFs/Jl0pXz1bXiZdKi8sVG49L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxObj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxDbj0vXig/OkdFVHxIRUFEKSQvLGtuPS9eXC9cLy8sRW49L14oW1x3ListXSs6KSg/OlwvXC8oW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLFNuPWIuZm4ubG9hZCxBbj17fSxqbj17fSxEbj0iKi8iLmNvbmNhdCgiKiIpO3RyeXt5bj1hLmhyZWZ9Y2F0Y2goTG4pe3luPW8uY3JlYXRlRWxlbWVudCgiYSIpLHluLmhyZWY9IiIseW49eW4uaHJlZn1tbj1Fbi5leGVjKHluLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBIbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iKiIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107aWYoYi5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKSIrIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8IioiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gcW4oZSxuLHIsaSl7dmFyIG89e30sYT1lPT09am47ZnVuY3Rpb24gcyh1KXt2YXIgbDtyZXR1cm4gb1t1XT0hMCxiLmVhY2goZVt1XXx8W10sZnVuY3Rpb24oZSx1KXt2YXIgYz11KG4scixpKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGN8fGF8fG9bY10/YT8hKGw9Yyk6dDoobi5kYXRhVHlwZXMudW5zaGlmdChjKSxzKGMpLCExKX0pLGx9cmV0dXJuIHMobi5kYXRhVHlwZXNbMF0pfHwhb1siKiJdJiZzKCIqIil9ZnVuY3Rpb24gTW4oZSxuKXt2YXIgcixpLG89Yi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihpIGluIG4pbltpXSE9PXQmJigob1tpXT9lOnJ8fChyPXt9KSlbaV09bltpXSk7cmV0dXJuIHImJmIuZXh0ZW5kKCEwLGUsciksZX1iLmZuLmxvYWQ9ZnVuY3Rpb24oZSxuLHIpe2lmKCJzdHJpbmciIT10eXBlb2YgZSYmU24pcmV0dXJuIFNuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaSxvLGEscz10aGlzLHU9ZS5pbmRleE9mKCIgIik7cmV0dXJuIHU+PTAmJihpPWUuc2xpY2UodSxlLmxlbmd0aCksZT1lLnNsaWNlKDAsdSkpLGIuaXNGdW5jdGlvbihuKT8ocj1uLG49dCk6biYmIm9iamVjdCI9PXR5cGVvZiBuJiYoYT0iUE9TVCIpLHMubGVuZ3RoPjAmJmIuYWpheCh7dXJsOmUsdHlwZTphLGRhdGFUeXBlOiJodG1sIixkYXRhOm59KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChpP2IoIjxkaXY+IikuYXBwZW5kKGIucGFyc2VIVE1MKGUpKS5maW5kKGkpOmUpfSkuY29tcGxldGUociYmZnVuY3Rpb24oZSx0KXtzLmVhY2gocixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSxiLmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihlLHQpe2IuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSxiLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSxuKXtiW25dPWZ1bmN0aW9uKGUscixpLG8pe3JldHVybiBiLmlzRnVuY3Rpb24ocikmJihvPW98fGksaT1yLHI9dCksYi5hamF4KHt1cmw6ZSx0eXBlOm4sZGF0YVR5cGU6byxkYXRhOnIsc3VjY2VzczppfSl9fSksYi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnluLHR5cGU6IkdFVCIsaXNMb2NhbDpObi50ZXN0KG1uWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkRuLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0In0sY29udmVydGVyczp7IiogdGV4dCI6ZS5TdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6Yi5wYXJzZUpTT04sInRleHQgeG1sIjpiLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9NbihNbihlLGIuYWpheFNldHRpbmdzKSx0KTpNbihiLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpIbihBbiksYWpheFRyYW5zcG9ydDpIbihqbiksYWpheDpmdW5jdGlvbihlLG4peyJvYmplY3QiPT10eXBlb2YgZSYmKG49ZSxlPXQpLG49bnx8e307dmFyIHIsaSxvLGEscyx1LGwsYyxwPWIuYWpheFNldHVwKHt9LG4pLGY9cC5jb250ZXh0fHxwLGQ9cC5jb250ZXh0JiYoZi5ub2RlVHlwZXx8Zi5qcXVlcnkpP2IoZik6Yi5ldmVudCxoPWIuRGVmZXJyZWQoKSxnPWIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLG09cC5zdGF0dXNDb2RlfHx7fSx5PXt9LHY9e30seD0wLFQ9ImNhbmNlbGVkIixOPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PXgpe2lmKCFjKXtjPXt9O3doaWxlKHQ9VG4uZXhlYyhhKSljW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PWNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09eD9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHh8fChlPXZbbl09dltuXXx8ZSx5W2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHh8fChwLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPngpZm9yKHQgaW4gZSltW3RdPVttW3RdLGVbdF1dO2Vsc2UgTi5hbHdheXMoZVtOLnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxUO3JldHVybiBsJiZsLmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKE4pLmNvbXBsZXRlPWcuYWRkLE4uc3VjY2Vzcz1OLmRvbmUsTi5lcnJvcj1OLmZhaWwscC51cmw9KChlfHxwLnVybHx8eW4pKyIiKS5yZXBsYWNlKHhuLCIiKS5yZXBsYWNlKGtuLG1uWzFdKyIvLyIpLHAudHlwZT1uLm1ldGhvZHx8bi50eXBlfHxwLm1ldGhvZHx8cC50eXBlLHAuZGF0YVR5cGVzPWIudHJpbShwLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2godyl8fFsiIl0sbnVsbD09cC5jcm9zc0RvbWFpbiYmKHI9RW4uZXhlYyhwLnVybC50b0xvd2VyQ2FzZSgpKSxwLmNyb3NzRG9tYWluPSEoIXJ8fHJbMV09PT1tblsxXSYmclsyXT09PW1uWzJdJiYoclszXXx8KCJodHRwOiI9PT1yWzFdPzgwOjQ0MykpPT0obW5bM118fCgiaHR0cDoiPT09bW5bMV0/ODA6NDQzKSkpKSxwLmRhdGEmJnAucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgcC5kYXRhJiYocC5kYXRhPWIucGFyYW0ocC5kYXRhLHAudHJhZGl0aW9uYWwpKSxxbihBbixwLG4sTiksMj09PXgpcmV0dXJuIE47dT1wLmdsb2JhbCx1JiYwPT09Yi5hY3RpdmUrKyYmYi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxwLnR5cGU9cC50eXBlLnRvVXBwZXJDYXNlKCkscC5oYXNDb250ZW50PSFDbi50ZXN0KHAudHlwZSksbz1wLnVybCxwLmhhc0NvbnRlbnR8fChwLmRhdGEmJihvPXAudXJsKz0oYm4udGVzdChvKT8iJiI6Ij8iKStwLmRhdGEsZGVsZXRlIHAuZGF0YSkscC5jYWNoZT09PSExJiYocC51cmw9d24udGVzdChvKT9vLnJlcGxhY2Uod24sIiQxXz0iK3ZuKyspOm8rKGJuLnRlc3Qobyk/IiYiOiI/IikrIl89Iit2bisrKSkscC5pZk1vZGlmaWVkJiYoYi5sYXN0TW9kaWZpZWRbb10mJk4uc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGIubGFzdE1vZGlmaWVkW29dKSxiLmV0YWdbb10mJk4uc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsYi5ldGFnW29dKSksKHAuZGF0YSYmcC5oYXNDb250ZW50JiZwLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZOLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscC5jb250ZW50VHlwZSksTi5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHAuZGF0YVR5cGVzWzBdJiZwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dP3AuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0rKCIqIiE9PXAuZGF0YVR5cGVzWzBdPyIsICIrRG4rIjsgcT0wLjAxIjoiIik6cC5hY2NlcHRzWyIqIl0pO2ZvcihpIGluIHAuaGVhZGVycylOLnNldFJlcXVlc3RIZWFkZXIoaSxwLmhlYWRlcnNbaV0pO2lmKHAuYmVmb3JlU2VuZCYmKHAuYmVmb3JlU2VuZC5jYWxsKGYsTixwKT09PSExfHwyPT09eCkpcmV0dXJuIE4uYWJvcnQoKTtUPSJhYm9ydCI7Zm9yKGkgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pTltpXShwW2ldKTtpZihsPXFuKGpuLHAsbixOKSl7Ti5yZWFkeVN0YXRlPTEsdSYmZC50cmlnZ2VyKCJhamF4U2VuZCIsW04scF0pLHAuYXN5bmMmJnAudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ti5hYm9ydCgidGltZW91dCIpfSxwLnRpbWVvdXQpKTt0cnl7eD0xLGwuc2VuZCh5LGspfWNhdGNoKEMpe2lmKCEoMj54KSl0aHJvdyBDO2soLTEsQyl9fWVsc2UgaygtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24gayhlLG4scixpKXt2YXIgYyx5LHYsdyxULEM9bjsyIT09eCYmKHg9MixzJiZjbGVhclRpbWVvdXQocyksbD10LGE9aXx8IiIsTi5yZWFkeVN0YXRlPWU+MD80OjAsciYmKHc9X24ocCxOLHIpKSxlPj0yMDAmJjMwMD5lfHwzMDQ9PT1lPyhwLmlmTW9kaWZpZWQmJihUPU4uZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSxUJiYoYi5sYXN0TW9kaWZpZWRbb109VCksVD1OLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksVCYmKGIuZXRhZ1tvXT1UKSksMjA0PT09ZT8oYz0hMCxDPSJub2NvbnRlbnQiKTozMDQ9PT1lPyhjPSEwLEM9Im5vdG1vZGlmaWVkIik6KGM9Rm4ocCx3KSxDPWMuc3RhdGUseT1jLmRhdGEsdj1jLmVycm9yLGM9IXYpKToodj1DLChlfHwhQykmJihDPSJlcnJvciIsMD5lJiYoZT0wKSkpLE4uc3RhdHVzPWUsTi5zdGF0dXNUZXh0PShufHxDKSsiIixjP2gucmVzb2x2ZVdpdGgoZixbeSxDLE5dKTpoLnJlamVjdFdpdGgoZixbTixDLHZdKSxOLnN0YXR1c0NvZGUobSksbT10LHUmJmQudHJpZ2dlcihjPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW04scCxjP3k6dl0pLGcuZmlyZVdpdGgoZixbTixDXSksdSYmKGQudHJpZ2dlcigiYWpheENvbXBsZXRlIixbTixwXSksLS1iLmFjdGl2ZXx8Yi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIE59LGdldFNjcmlwdDpmdW5jdGlvbihlLG4pe3JldHVybiBiLmdldChlLHQsbiwic2NyaXB0Iil9LGdldEpTT046ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBiLmdldChlLHQsbiwianNvbiIpfX0pO2Z1bmN0aW9uIF9uKGUsbixyKXt2YXIgaSxvLGEscyx1PWUuY29udGVudHMsbD1lLmRhdGFUeXBlcyxjPWUucmVzcG9uc2VGaWVsZHM7Zm9yKHMgaW4gYylzIGluIHImJihuW2Nbc11dPXJbc10pO3doaWxlKCIqIj09PWxbMF0pbC5zaGlmdCgpLG89PT10JiYobz1lLm1pbWVUeXBlfHxuLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYobylmb3IocyBpbiB1KWlmKHVbc10mJnVbc10udGVzdChvKSl7bC51bnNoaWZ0KHMpO2JyZWFrfWlmKGxbMF1pbiByKWE9bFswXTtlbHNle2ZvcihzIGluIHIpe2lmKCFsWzBdfHxlLmNvbnZlcnRlcnNbcysiICIrbFswXV0pe2E9czticmVha31pfHwoaT1zKX1hPWF8fGl9cmV0dXJuIGE/KGEhPT1sWzBdJiZsLnVuc2hpZnQoYSksclthXSk6dH1mdW5jdGlvbiBGbihlLHQpe3ZhciBuLHIsaSxvLGE9e30scz0wLHU9ZS5kYXRhVHlwZXMuc2xpY2UoKSxsPXVbMF07aWYoZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdVsxXSlmb3IoaSBpbiBlLmNvbnZlcnRlcnMpYVtpLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tpXTtmb3IoO3I9dVsrK3NdOylpZigiKiIhPT1yKXtpZigiKiIhPT1sJiZsIT09cil7aWYoaT1hW2wrIiAiK3JdfHxhWyIqICIrcl0sIWkpZm9yKG4gaW4gYSlpZihvPW4uc3BsaXQoIiAiKSxvWzFdPT09ciYmKGk9YVtsKyIgIitvWzBdXXx8YVsiKiAiK29bMF1dKSl7aT09PSEwP2k9YVtuXTphW25dIT09ITAmJihyPW9bMF0sdS5zcGxpY2Uocy0tLDAscikpO2JyZWFrfWlmKGkhPT0hMClpZihpJiZlWyJ0aHJvd3MiXSl0PWkodCk7ZWxzZSB0cnl7dD1pKHQpfWNhdGNoKGMpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmk/YzoiTm8gY29udmVyc2lvbiBmcm9tICIrbCsiIHRvICIrcn19fWw9cn1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19Yi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4gYi5nbG9iYWxFdmFsKGUpLGV9fX0pLGIuYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXtlLmNhY2hlPT09dCYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9IkdFVCIsZS5nbG9iYWw9ITEpfSksYi5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2lmKGUuY3Jvc3NEb21haW4pe3ZhciBuLHI9by5oZWFkfHxiKCJoZWFkIilbMF18fG8uZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKHQsaSl7bj1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLG4uYXN5bmM9ITAsZS5zY3JpcHRDaGFyc2V0JiYobi5jaGFyc2V0PWUuc2NyaXB0Q2hhcnNldCksbi5zcmM9ZS51cmwsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSx0KXsodHx8IW4ucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChuLnJlYWR5U3RhdGUpKSYmKG4ub25sb2FkPW4ub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbj1udWxsLHR8fGkoMjAwLCJzdWNjZXNzIikpfSxyLmluc2VydEJlZm9yZShuLHIuZmlyc3RDaGlsZCl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbi5vbmxvYWQodCwhMCl9fX19KTt2YXIgT249W10sQm49Lyg9KVw/KD89JnwkKXxcP1w/LztiLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9T24ucG9wKCl8fGIuZXhwYW5kbysiXyIrdm4rKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLGIuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24obixyLGkpe3ZhciBvLGEscyx1PW4uanNvbnAhPT0hMSYmKEJuLnRlc3Qobi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2Ygbi5kYXRhJiYhKG4uY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmQm4udGVzdChuLmRhdGEpJiYiZGF0YSIpO3JldHVybiB1fHwianNvbnAiPT09bi5kYXRhVHlwZXNbMF0/KG89bi5qc29ucENhbGxiYWNrPWIuaXNGdW5jdGlvbihuLmpzb25wQ2FsbGJhY2spP24uanNvbnBDYWxsYmFjaygpOm4uanNvbnBDYWxsYmFjayx1P25bdV09blt1XS5yZXBsYWNlKEJuLCIkMSIrbyk6bi5qc29ucCE9PSExJiYobi51cmwrPShibi50ZXN0KG4udXJsKT8iJiI6Ij8iKStuLmpzb25wKyI9IitvKSxuLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gc3x8Yi5lcnJvcihvKyIgd2FzIG5vdCBjYWxsZWQiKSxzWzBdfSxuLmRhdGFUeXBlc1swXT0ianNvbiIsYT1lW29dLGVbb109ZnVuY3Rpb24oKXtzPWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW29dPWEsbltvXSYmKG4uanNvbnBDYWxsYmFjaz1yLmpzb25wQ2FsbGJhY2ssT24ucHVzaChvKSkscyYmYi5pc0Z1bmN0aW9uKGEpJiZhKHNbMF0pLHM9YT10fSksInNjcmlwdCIpOnR9KTt2YXIgUG4sUm4sV249MCwkbj1lLkFjdGl2ZVhPYmplY3QmJmZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGUgaW4gUG4pUG5bZV0odCwhMCl9O2Z1bmN0aW9uIEluKCl7dHJ5e3JldHVybiBuZXcgZS5YTUxIdHRwUmVxdWVzdH1jYXRjaCh0KXt9fWZ1bmN0aW9uIHpuKCl7dHJ5e3JldHVybiBuZXcgZS5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfWNhdGNoKHQpe319Yi5hamF4U2V0dGluZ3MueGhyPWUuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTG9jYWwmJkluKCl8fHpuKCl9OkluLFJuPWIuYWpheFNldHRpbmdzLnhocigpLGIuc3VwcG9ydC5jb3JzPSEhUm4mJiJ3aXRoQ3JlZGVudGlhbHMiaW4gUm4sUm49Yi5zdXBwb3J0LmFqYXg9ISFSbixSbiYmYi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG4pe2lmKCFuLmNyb3NzRG9tYWlufHxiLnN1cHBvcnQuY29ycyl7dmFyIHI7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaSxvKXt2YXIgYSxzLHU9bi54aHIoKTtpZihuLnVzZXJuYW1lP3Uub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyxuLnVzZXJuYW1lLG4ucGFzc3dvcmQpOnUub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyksbi54aHJGaWVsZHMpZm9yKHMgaW4gbi54aHJGaWVsZHMpdVtzXT1uLnhockZpZWxkc1tzXTtuLm1pbWVUeXBlJiZ1Lm92ZXJyaWRlTWltZVR5cGUmJnUub3ZlcnJpZGVNaW1lVHlwZShuLm1pbWVUeXBlKSxuLmNyb3NzRG9tYWlufHxpWyJYLVJlcXVlc3RlZC1XaXRoIl18fChpWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7dHJ5e2ZvcihzIGluIGkpdS5zZXRSZXF1ZXN0SGVhZGVyKHMsaVtzXSl9Y2F0Y2gobCl7fXUuc2VuZChuLmhhc0NvbnRlbnQmJm4uZGF0YXx8bnVsbCkscj1mdW5jdGlvbihlLGkpe3ZhciBzLGwsYyxwO3RyeXtpZihyJiYoaXx8ND09PXUucmVhZHlTdGF0ZSkpaWYocj10LGEmJih1Lm9ucmVhZHlzdGF0ZWNoYW5nZT1iLm5vb3AsJG4mJmRlbGV0ZSBQblthXSksaSk0IT09dS5yZWFkeVN0YXRlJiZ1LmFib3J0KCk7ZWxzZXtwPXt9LHM9dS5zdGF0dXMsbD11LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLCJzdHJpbmciPT10eXBlb2YgdS5yZXNwb25zZVRleHQmJihwLnRleHQ9dS5yZXNwb25zZVRleHQpO3RyeXtjPXUuc3RhdHVzVGV4dH1jYXRjaChmKXtjPSIifXN8fCFuLmlzTG9jYWx8fG4uY3Jvc3NEb21haW4/MTIyMz09PXMmJihzPTIwNCk6cz1wLnRleHQ/MjAwOjQwNH19Y2F0Y2goZCl7aXx8bygtMSxkKX1wJiZvKHMsYyxwLGwpfSxuLmFzeW5jPzQ9PT11LnJlYWR5U3RhdGU/c2V0VGltZW91dChyKTooYT0rK1duLCRuJiYoUG58fChQbj17fSxiKGUpLnVubG9hZCgkbikpLFBuW2FdPXIpLHUub25yZWFkeXN0YXRlY2hhbmdlPXIpOnIoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtyJiZyKHQsITApfX19fSk7dmFyIFhuLFVuLFZuPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxZbj1SZWdFeHAoIl4oPzooWystXSk9fCkoIit4KyIpKFthLXolXSopJCIsImkiKSxKbj0vcXVldWVIb29rcyQvLEduPVtucl0sUW49eyIqIjpbZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpcy5jcmVhdGVUd2VlbihlLHQpLG89WW4uZXhlYyh0KSxhPWkuY3VyKCkscz0rYXx8MCx1PTEsbD0yMDtpZihvKXtpZihuPStvWzJdLHI9b1szXXx8KGIuY3NzTnVtYmVyW2VdPyIiOiJweCIpLCJweCIhPT1yJiZzKXtzPWIuY3NzKGkuZWxlbSxlLCEwKXx8bnx8MTtkbyB1PXV8fCIuNSIscy89dSxiLnN0eWxlKGkuZWxlbSxlLHMrcik7d2hpbGUodSE9PSh1PWkuY3VyKCkvYSkmJjEhPT11JiYtLWwpfWkudW5pdD1yLGkuc3RhcnQ9cyxpLmVuZD1vWzFdP3MrKG9bMV0rMSkqbjpufXJldHVybiBpfV19O2Z1bmN0aW9uIEtuKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtYbj10fSksWG49Yi5ub3coKX1mdW5jdGlvbiBabihlLHQpe2IuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9KFFuW3RdfHxbXSkuY29uY2F0KFFuWyIqIl0pLGk9MCxvPXIubGVuZ3RoO2Zvcig7bz5pO2krKylpZihyW2ldLmNhbGwoZSx0LG4pKXJldHVybn0pfWZ1bmN0aW9uIGVyKGUsdCxuKXt2YXIgcixpLG89MCxhPUduLmxlbmd0aCxzPWIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdS5lbGVtfSksdT1mdW5jdGlvbigpe2lmKGkpcmV0dXJuITE7dmFyIHQ9WG58fEtuKCksbj1NYXRoLm1heCgwLGwuc3RhcnRUaW1lK2wuZHVyYXRpb24tdCkscj1uL2wuZHVyYXRpb258fDAsbz0xLXIsYT0wLHU9bC50d2VlbnMubGVuZ3RoO2Zvcig7dT5hO2ErKylsLnR3ZWVuc1thXS5ydW4obyk7cmV0dXJuIHMubm90aWZ5V2l0aChlLFtsLG8sbl0pLDE+byYmdT9uOihzLnJlc29sdmVXaXRoKGUsW2xdKSwhMSl9LGw9cy5wcm9taXNlKHtlbGVtOmUscHJvcHM6Yi5leHRlbmQoe30sdCksb3B0czpiLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sbiksb3JpZ2luYWxQcm9wZXJ0aWVzOnQsb3JpZ2luYWxPcHRpb25zOm4sc3RhcnRUaW1lOlhufHxLbigpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbil7dmFyIHI9Yi5Ud2VlbihlLGwub3B0cyx0LG4sbC5vcHRzLnNwZWNpYWxFYXNpbmdbdF18fGwub3B0cy5lYXNpbmcpO3JldHVybiBsLnR3ZWVucy5wdXNoKHIpLHJ9LHN0b3A6ZnVuY3Rpb24odCl7dmFyIG49MCxyPXQ/bC50d2VlbnMubGVuZ3RoOjA7aWYoaSlyZXR1cm4gdGhpcztmb3IoaT0hMDtyPm47bisrKWwudHdlZW5zW25dLnJ1bigxKTtyZXR1cm4gdD9zLnJlc29sdmVXaXRoKGUsW2wsdF0pOnMucmVqZWN0V2l0aChlLFtsLHRdKSx0aGlzfX0pLGM9bC5wcm9wcztmb3IodHIoYyxsLm9wdHMuc3BlY2lhbEVhc2luZyk7YT5vO28rKylpZihyPUduW29dLmNhbGwobCxlLGMsbC5vcHRzKSlyZXR1cm4gcjtyZXR1cm4gWm4obCxjKSxiLmlzRnVuY3Rpb24obC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwoZSxsKSxiLmZ4LnRpbWVyKGIuZXh0ZW5kKHUse2VsZW06ZSxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGwucHJvZ3Jlc3MobC5vcHRzLnByb2dyZXNzKS5kb25lKGwub3B0cy5kb25lLGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpfWZ1bmN0aW9uIHRyKGUsdCl7dmFyIG4scixpLG8sYTtmb3IoaSBpbiBlKWlmKHI9Yi5jYW1lbENhc2UoaSksbz10W3JdLG49ZVtpXSxiLmlzQXJyYXkobikmJihvPW5bMV0sbj1lW2ldPW5bMF0pLGkhPT1yJiYoZVtyXT1uLGRlbGV0ZSBlW2ldKSxhPWIuY3NzSG9va3Nbcl0sYSYmImV4cGFuZCJpbiBhKXtuPWEuZXhwYW5kKG4pLGRlbGV0ZSBlW3JdO2ZvcihpIGluIG4paSBpbiBlfHwoZVtpXT1uW2ldLHRbaV09byl9ZWxzZSB0W3JdPW99Yi5BbmltYXRpb249Yi5leHRlbmQoZXIse3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXtiLmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVsiKiJdKTplPWUuc3BsaXQoIiAiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO2k+cjtyKyspbj1lW3JdLFFuW25dPVFuW25dfHxbXSxRbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P0duLnVuc2hpZnQoZSk6R24ucHVzaChlKX19KTtmdW5jdGlvbiBucihlLHQsbil7dmFyIHIsaSxvLGEscyx1LGwsYyxwLGY9dGhpcyxkPWUuc3R5bGUsaD17fSxnPVtdLG09ZS5ub2RlVHlwZSYmbm4oZSk7bi5xdWV1ZXx8KGM9Yi5fcXVldWVIb29rcyhlLCJmeCIpLG51bGw9PWMudW5xdWV1ZWQmJihjLnVucXVldWVkPTAscD1jLmVtcHR5LmZpcmUsYy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Yy51bnF1ZXVlZHx8cCgpfSksYy51bnF1ZXVlZCsrLGYuYWx3YXlzKGZ1bmN0aW9uKCl7Zi5hbHdheXMoZnVuY3Rpb24oKXtjLnVucXVldWVkLS0sYi5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8Yy5lbXB0eS5maXJlKCl9KX0pKSwxPT09ZS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gdHx8IndpZHRoImluIHQpJiYobi5vdmVyZmxvdz1bZC5vdmVyZmxvdyxkLm92ZXJmbG93WCxkLm92ZXJmbG93WV0sImlubGluZSI9PT1iLmNzcyhlLCJkaXNwbGF5IikmJiJub25lIj09PWIuY3NzKGUsImZsb2F0IikmJihiLnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT11bihlLm5vZGVOYW1lKT9kLnpvb209MTpkLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoZC5vdmVyZmxvdz0iaGlkZGVuIixiLnN1cHBvcnQuc2hyaW5rV3JhcEJsb2Nrc3x8Zi5hbHdheXMoZnVuY3Rpb24oKXtkLm92ZXJmbG93PW4ub3ZlcmZsb3dbMF0sZC5vdmVyZmxvd1g9bi5vdmVyZmxvd1sxXSxkLm92ZXJmbG93WT1uLm92ZXJmbG93WzJdfSkpO2ZvcihpIGluIHQpaWYoYT10W2ldLFZuLmV4ZWMoYSkpe2lmKGRlbGV0ZSB0W2ldLHU9dXx8InRvZ2dsZSI9PT1hLGE9PT0obT8iaGlkZSI6InNob3ciKSljb250aW51ZTtnLnB1c2goaSl9aWYobz1nLmxlbmd0aCl7cz1iLl9kYXRhKGUsImZ4c2hvdyIpfHxiLl9kYXRhKGUsImZ4c2hvdyIse30pLCJoaWRkZW4iaW4gcyYmKG09cy5oaWRkZW4pLHUmJihzLmhpZGRlbj0hbSksbT9iKGUpLnNob3coKTpmLmRvbmUoZnVuY3Rpb24oKXtiKGUpLmhpZGUoKX0pLGYuZG9uZShmdW5jdGlvbigpe3ZhciB0O2IuX3JlbW92ZURhdGEoZSwiZnhzaG93Iik7Zm9yKHQgaW4gaCliLnN0eWxlKGUsdCxoW3RdKX0pO2ZvcihpPTA7bz5pO2krKylyPWdbaV0sbD1mLmNyZWF0ZVR3ZWVuKHIsbT9zW3JdOjApLGhbcl09c1tyXXx8Yi5zdHlsZShlLHIpLHIgaW4gc3x8KHNbcl09bC5zdGFydCxtJiYobC5lbmQ9bC5zdGFydCxsLnN0YXJ0PSJ3aWR0aCI9PT1yfHwiaGVpZ2h0Ij09PXI/MTowKSl9fWZ1bmN0aW9uIHJyKGUsdCxuLHIsaSl7cmV0dXJuIG5ldyByci5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfWIuVHdlZW49cnIscnIucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpycixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHwic3dpbmciLHRoaXMub3B0aW9ucz10LHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1yLHRoaXMudW5pdD1vfHwoYi5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1yci5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9dD10aGlzLm9wdGlvbnMuZHVyYXRpb24/Yi5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpyci5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxyci5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9cnIucHJvdG90eXBlLHJyLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09ZS5lbGVtW2UucHJvcF18fGUuZWxlbS5zdHlsZSYmbnVsbCE9ZS5lbGVtLnN0eWxlW2UucHJvcF0/KHQ9Yi5jc3MoZS5lbGVtLGUucHJvcCwiIiksdCYmImF1dG8iIT09dD90OjApOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7Yi5meC5zdGVwW2UucHJvcF0/Yi5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYobnVsbCE9ZS5lbGVtLnN0eWxlW2IuY3NzUHJvcHNbZS5wcm9wXV18fGIuY3NzSG9va3NbZS5wcm9wXSk/Yi5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0scnIucHJvcEhvb2tzLnNjcm9sbFRvcD1yci5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSxiLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49Yi5mblt0XTtiLmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoaXIodCwhMCksZSxyLGkpfX0pLGIuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKG5uKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1iLmlzRW1wdHlPYmplY3QoZSksbz1iLnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9ZXIodGhpcyxiLmV4dGVuZCh7fSxlKSxvKTthLmZpbmlzaD1mdW5jdGlvbigpe3Quc3RvcCghMCl9LChpfHxiLl9kYXRhKHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIGEuZmluaXNoPWEsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChhKTp0aGlzLnF1ZXVlKG8ucXVldWUsYSl9LHN0b3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQocil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKHI9bixuPWUsZT10KSxuJiZlIT09ITEmJnRoaXMucXVldWUoZXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ITAsbj1udWxsIT1lJiZlKyJxdWV1ZUhvb2tzIixvPWIudGltZXJzLGE9Yi5fZGF0YSh0aGlzKTtpZihuKWFbbl0mJmFbbl0uc3RvcCYmaShhW25dKTtlbHNlIGZvcihuIGluIGEpYVtuXSYmYVtuXS5zdG9wJiZKbi50ZXN0KG4pJiZpKGFbbl0pO2ZvcihuPW8ubGVuZ3RoO24tLTspb1tuXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tuXS5xdWV1ZSE9PWV8fChvW25dLmFuaW0uc3RvcChyKSx0PSExLG8uc3BsaWNlKG4sMSkpOyh0fHwhcikmJmIuZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPWIuX2RhdGEodGhpcykscj1uW2UrInF1ZXVlIl0saT1uW2UrInF1ZXVlSG9va3MiXSxvPWIudGltZXJzLGE9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCxiLnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5jdXImJmkuY3VyLmZpbmlzaCYmaS5jdXIuZmluaXNoLmNhbGwodGhpcyksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7YT50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBpcihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9Yi5lYWNoKHtzbGlkZURvd246aXIoInNob3ciKSxzbGlkZVVwOmlyKCJoaWRlIiksc2xpZGVUb2dnbGU6aXIoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLGIuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT9iLmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fGIuaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhYi5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj1iLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4gYi5meC5zcGVlZHM/Yi5meC5zcGVlZHNbci5kdXJhdGlvbl06Yi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe2IuaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmYi5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LGIuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LGIudGltZXJzPVtdLGIuZng9cnIucHJvdG90eXBlLmluaXQsYi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj1iLnRpbWVycyxyPTA7Zm9yKFhuPWIubm93KCk7bi5sZW5ndGg+cjtyKyspZT1uW3JdLGUoKXx8bltyXSE9PWV8fG4uc3BsaWNlKHItLSwxKTtuLmxlbmd0aHx8Yi5meC5zdG9wKCksWG49dH0sYi5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJmIudGltZXJzLnB1c2goZSkmJmIuZnguc3RhcnQoKX0sYi5meC5pbnRlcnZhbD0xMyxiLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7VW58fChVbj1zZXRJbnRlcnZhbChiLmZ4LnRpY2ssYi5meC5pbnRlcnZhbCkpfSxiLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFVuKSxVbj1udWxsfSxiLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxiLmZ4LnN0ZXA9e30sYi5leHByJiZiLmV4cHIuZmlsdGVycyYmKGIuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiBiLmdyZXAoYi50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KSxiLmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXtiLm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIG4scixvPXt0b3A6MCxsZWZ0OjB9LGE9dGhpc1swXSxzPWEmJmEub3duZXJEb2N1bWVudDtpZihzKXJldHVybiBuPXMuZG9jdW1lbnRFbGVtZW50LGIuY29udGFpbnMobixhKT8odHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09aSYmKG89YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1vcihzKSx7dG9wOm8udG9wKyhyLnBhZ2VZT2Zmc2V0fHxuLnNjcm9sbFRvcCktKG4uY2xpZW50VG9wfHwwKSxsZWZ0Om8ubGVmdCsoci5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0KS0obi5jbGllbnRMZWZ0fHwwKX0pOm99LGIub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWIuY3NzKGUsInBvc2l0aW9uIik7InN0YXRpYyI9PT1yJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKTt2YXIgaT1iKGUpLG89aS5vZmZzZXQoKSxhPWIuY3NzKGUsInRvcCIpLHM9Yi5jc3MoZSwibGVmdCIpLHU9KCJhYnNvbHV0ZSI9PT1yfHwiZml4ZWQiPT09cikmJmIuaW5BcnJheSgiYXV0byIsW2Esc10pPi0xLGw9e30sYz17fSxwLGY7dT8oYz1pLnBvc2l0aW9uKCkscD1jLnRvcCxmPWMubGVmdCk6KHA9cGFyc2VGbG9hdChhKXx8MCxmPXBhcnNlRmxvYXQocyl8fDApLGIuaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixvKSksbnVsbCE9dC50b3AmJihsLnRvcD10LnRvcC1vLnRvcCtwKSxudWxsIT10LmxlZnQmJihsLmxlZnQ9dC5sZWZ0LW8ubGVmdCtmKSwidXNpbmciaW4gdD90LnVzaW5nLmNhbGwoZSxsKTppLmNzcyhsKX19LGIuZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbj17dG9wOjAsbGVmdDowfSxyPXRoaXNbMF07cmV0dXJuImZpeGVkIj09PWIuY3NzKHIsInBvc2l0aW9uIik/dD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihlPXRoaXMub2Zmc2V0UGFyZW50KCksdD10aGlzLm9mZnNldCgpLGIubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwobj1lLm9mZnNldCgpKSxuLnRvcCs9Yi5jc3MoZVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxuLmxlZnQrPWIuY3NzKGVbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOnQudG9wLW4udG9wLWIuY3NzKHIsIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LW4ubGVmdC1iLmNzcyhyLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fG8uZG9jdW1lbnRFbGVtZW50O3doaWxlKGUmJiFiLm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT1iLmNzcyhlLCJwb3NpdGlvbiIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fG8uZG9jdW1lbnRFbGVtZW50fSl9fSksYi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGUsbil7dmFyIHI9L1kvLnRlc3Qobik7Yi5mbltlXT1mdW5jdGlvbihpKXtyZXR1cm4gYi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlLGksbyl7dmFyIGE9b3IoZSk7cmV0dXJuIG89PT10P2E/biBpbiBhP2Fbbl06YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbaV06ZVtpXTooYT9hLnNjcm9sbFRvKHI/YihhKS5zY3JvbGxMZWZ0KCk6byxyP286YihhKS5zY3JvbGxUb3AoKSk6ZVtpXT1vLHQpfSxlLGksYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KTtmdW5jdGlvbiBvcihlKXtyZXR1cm4gYi5pc1dpbmRvdyhlKT9lOjk9PT1lLm5vZGVUeXBlP2UuZGVmYXVsdFZpZXd8fGUucGFyZW50V2luZG93OiExfWIuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKGUsbil7Yi5lYWNoKHtwYWRkaW5nOiJpbm5lciIrZSxjb250ZW50Om4sIiI6Im91dGVyIitlfSxmdW5jdGlvbihyLGkpe2IuZm5baV09ZnVuY3Rpb24oaSxvKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoJiYocnx8ImJvb2xlYW4iIT10eXBlb2YgaSkscz1yfHwoaT09PSEwfHxvPT09ITA/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiBiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKG4scixpKXt2YXIgbztyZXR1cm4gYi5pc1dpbmRvdyhuKT9uLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitlXTo5PT09bi5ub2RlVHlwZT8obz1uLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChuLmJvZHlbInNjcm9sbCIrZV0sb1sic2Nyb2xsIitlXSxuLmJvZHlbIm9mZnNldCIrZV0sb1sib2Zmc2V0IitlXSxvWyJjbGllbnQiK2VdKSk6aT09PXQ/Yi5jc3MobixyLHMpOmIuc3R5bGUobixyLGkscyl9LG4sYT9pOnQsYSxudWxsKX19KX0pLGUualF1ZXJ5PWUuJD1iLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZS5hbWQualF1ZXJ5JiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYn0pfSkod2luZG93KTs=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="23" hostname="omniconv" path="/OMNIStatic/scripts/jquery/jquery-extension-1.9.1.js" url="http://omniconv/OMNIStatic/scripts/jquery/jquery-extension-1.9.1.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="11" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2202" sendTime="14" waitTime="0" receiveTime="9">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS1leHRlbnNpb24tMS45LjEuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>NDY4OA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDVhY2M2ZGRhOGVkMzE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDQ2ODgNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ly8NCi8vIFRoaXMgZmlsZSBjb250YWlucyBjdXN0b20galF1ZXJ5IGZ1bmN0aW9ucyBub3QgaW4gdGhlIGJhc2ljIGpRdWVyeSBsaWJyYXJ5Lg0KLy8NCg0KLy8gZm9yIGxlZ2FjeSBicm93c2VyIGRldGVjdGlvbi4gICQuYnJvd3NlciB3YXMgcmVtb3ZlZCBpbiBqUXVlcnkgMS45DQpqUXVlcnkuYnJvd3Nlcj17fTsNCihmdW5jdGlvbigpew0KICAgalF1ZXJ5LmJyb3dzZXIubXNpZT1mYWxzZTsNCiAgIGpRdWVyeS5icm93c2VyLnZlcnNpb249MDsNCiAgIGlmKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL01TSUUgKFswLTldKylcLi8pKXsNCiAgICAgIGpRdWVyeS5icm93c2VyLm1zaWU9dHJ1ZTsNCiAgICAgIGpRdWVyeS5icm93c2VyLnZlcnNpb249UmVnRXhwLiQxOw0KICAgfQ0KfSkoKTsNCg0KLyoqDQogKiBFc2NhcGUgYW4gZWxlbWVudCBpZCBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGluIGEgalF1ZXJ5IHNlbGVjdG9yDQogKg0KICogdXNhZ2U6ICQoIiMiICsgZXNjYXBlKCdteWlkLndpdGguc3BlYy5jaGFycycpKQ0KICovDQpmdW5jdGlvbiBlc2NhcGUoIGVsZW1JRCApIHsNCglyZXR1cm4gZWxlbUlELnJlcGxhY2UoIC8oOnxcLnxcW3xcXSkvZywgIlxcJDEiICk7DQp9DQplc2MgPSBlc2NhcGU7DQoNCi8qKg0KICogalF1ZXJ5IGN1c3RvbSBmdW5jdGlvbiB0byBzZXQgdGhlIGNzcyAndmlzaWJpbGl0eScgc3R5bGUgdG8gJ3Zpc2libGUnLg0KICogTm90ZTogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBoaWRlKCkvc2hvdygpIHdoaWNoIHRvZ2dsZXMgdGhlIGNzcyAnZGlzcGxheScgYXR0cmlidXRlLg0KICoNCiAqIHVzYWdlOiAkKCcjbXlpZCcpLnZpc2libGUoKTsNCiAqLw0KalF1ZXJ5LmZuLnZpc2libGUgPSBmdW5jdGlvbigpIHsNCglyZXR1cm4gdGhpcy5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpOw0KfQ0KDQovKioNCiAqIGpRdWVyeSBjdXN0b20gZnVuY3Rpb24gdG8gc2V0IHRoZSBjc3MgJ3Zpc2liaWxpdHknIHN0eWxlIHRvICdoaWRkZW4nLg0KICogTm90ZTogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBoaWRlKCkvc2hvdygpIHdoaWNoIHRvZ2dsZXMgdGhlIGNzcyAnZGlzcGxheScgYXR0cmlidXRlLg0KICoNCiAqIHVzYWdlOiAkKCcjbXlpZCcpLmludmlzaWJsZSgpOw0KICovDQpqUXVlcnkuZm4uaW52aXNpYmxlID0gZnVuY3Rpb24oKSB7DQoJcmV0dXJuIHRoaXMuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpOw0KfQ0KDQovKioNCiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBvYmplY3QgaXMgdmlzaWJsZS4NCiAqLw0KalF1ZXJ5LmZuLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzLmNzcygndmlzaWJpbGl0eScpID09ICd2aXNpYmxlJzsNCn0NCg0KLyoqDQogKiBTZXRzIHRoZSBjc3MgJ3Zpc2liaWxpdHknIHN0eWxlIHRvICd2aXNpYmxlJyBvciAnaGlkZGVuJyBiYXNlZCBvbiB0aGUgaXNWaXNpYmxlIHBhcmFtZXRlcg0KICoNCiAqIHVzYWdlOiAkKCcjbXlpZCcpLnNldFZpc2libGUodHJ1ZSk7DQogKg0KICogQHBhcmFtIGlzVmlzaWJsZQ0KICogICAgICAgICAgICBib29sZWFuLCAndHJ1ZScgb3IgJ2ZhbHNlJw0KICovDQpqUXVlcnkuZm4uc2V0VmlzaWJsZSA9IGZ1bmN0aW9uKCBpc1Zpc2libGUgKSB7DQoJcmV0dXJuIGlzVmlzaWJsZSA/IHRoaXMudmlzaWJsZSgpIDogdGhpcy5pbnZpc2libGUoKTsNCn0NCg0KLyoqDQogKiBTaG93cyBvciBoaWRlcyAoc2V0cyB0aGUgY3NzICdkaXNwbGF5JyBzdHlsZSB0byAnaW5saW5lJyBvciAnbm9uZScpIHRoaXMgZWxlbWVudCBiYXNlZCBvbg0KICogdGhlIGlzRGlzcGxheWVkIHBhcmFtZXRlci4NCiAqDQogKiB1c2FnZTogJCgnI215aWQnKS5zZXREaXNwbGF5ZWQodHJ1ZSk7DQogKg0KICogQHBhcmFtIGlzRGlzcGxheWVkDQogKiAgICAgICAgICAgIGJvb2xlYW4sICd0cnVlJyBvciAnZmFsc2UnDQogKi8NCmpRdWVyeS5mbi5zZXREaXNwbGF5ZWQgPSBmdW5jdGlvbiggaXNEaXNwbGF5ZWQgKSB7DQoJcmV0dXJuIGlzRGlzcGxheWVkID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTsNCn0NCg0KLyoqDQogKiBGb3JjZXMgYSByZWRyYXcuICBUaGVyZSBpcyBhIGJ1ZyB3aXRoIElFOSB3aGVyZSBzb21ldGltZXMgYSBtYW5pcHVsYXRlZCB0YWJsZSBvciBESVYgd2lsbCBub3QgcmUtcmVuZGVyIHByb3Blcmx5DQogKi8NCmpRdWVyeS5mbi5yZWRyYXcgPSBmdW5jdGlvbigpIHsNCgl0aGlzLmhpZGUoKTsNCglqUXVlcnkodGhpcykuZWFjaChmdW5jdGlvbigpew0KCQkvLyBzaW1wbHkgYWNjZXNzIHRoaXMgdmFyaWFibGUgdG8gZm9yY2UgYSBmbHVzaCBvZiB0aGUgcmVuZGVyaW5nIHF1ZXVlDQoJICAgIHZhciByZWRyYXcgPSB0aGlzLm9mZnNldEhlaWdodDsNCgkgfSk7DQoJLy8gbm93IHJlZHJhdy9yZS1sYXlvdXQNCgl0aGlzLnNob3coKTsNCn0NCg0KLyoqDQogKiBMaW1pdHMgYSB0ZXh0YXJlYSB0byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBjaGFyYWN0ZXJzLiAgT3B0aW9uYWxseSwgaWYgY2hhckNvdW50RWxlbSBpcyBzcGVjaWZpZWQsDQogKiB3aWxsIGRpc3BsYXkgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXIgcmVtYWluaW5nLg0KICogDQogKiAoVGhpcyBmdW5jdGlvbiBkb2Vzbid0IHJlYWxseSB3b3JrIGFsbCB0aGF0IHdlbGwgLi4uIGl0IGZsYXNoZXMgYW5kIGp1bXBzIHRoZSBzY3JvbGwgb2YgdGhlIA0KICogdGV4dGFyZWEgcmFuZG9tbHkgaW4gSUU4LCB0aG91Z2ggaW4gb3RoZXIgYnJvd3NlcnMgaXMgd29ya3Mgd2VsbCkNCiAqLw0KalF1ZXJ5LmZuLm1heExlbmd0aCA9IGZ1bmN0aW9uKGxpbWl0LCBjaGFyQ291bnRFbGVtKSB7DQoJLy8gbm9ybWFsbHkgdGhpcyB3b3VsZCBiZSBhbiBvbmlucHV0IGV2ZW50LCBidXQgdGhhdCdzIG9ubHkgc3VwcG9ydGVkIGluIElFOSsNCglpZiAoalF1ZXJ5LmJyb3dzZXIubXNpZSAmJiBqUXVlcnkuYnJvd3Nlci52ZXJzaW9uIDw9IDgpIHsNCgkJalF1ZXJ5KHRoaXMpLm9uKCJrZXl1cCBwYXN0ZSIsIGZ1bmN0aW9uKCkgeyAvL2ZvY3VzIGJsdXINCgkJCXZhciBfdGhpcyA9IHRoaXM7DQoJCQkvLyBJRTggaGFjayAtIHNob3J0IHBhdXNlIHRvIHdhaXQgZm9yIHBhc3RlIHRvIGNvbXBsZXRlDQoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyANCgkJICAgICAgICBzZXRDb3VudChfdGhpcywgY2hhckNvdW50RWxlbSk7DQoJCQl9LCAxMDApOw0KCSAgICB9KTsNCgl9DQoJZWxzZSB7DQoJCWpRdWVyeSh0aGlzKS5vbigiaW5wdXQiLCBmdW5jdGlvbigpIHsNCgkgICAgICAgIHNldENvdW50KHRoaXMsIGNoYXJDb3VudEVsZW0pOw0KCSAgICB9KTsNCgl9DQogICAgZnVuY3Rpb24gc2V0Q291bnQoc3JjLCBjaGFyQ291bnRFbGVtKSB7DQogICAgCWlmIChzcmMgIT0gdW5kZWZpbmVkKSB7DQoJICAgICAgICB2YXIgY2hhcnMgPSBzcmMudmFsdWUubGVuZ3RoOw0KCSAgICAgICAgaWYgKGNoYXJzID4gbGltaXQpIHsNCgkgICAgICAgICAgICBzcmMudmFsdWUgPSBzcmMudmFsdWUuc3Vic3RyKDAsIGxpbWl0KTsNCgkgICAgICAgICAgICBjaGFycyA9IGxpbWl0Ow0KCSAgICAgICAgfSAgICAgCQ0KCSAgICAgICAgaWYgKGNoYXJDb3VudEVsZW0gIT0gbnVsbCkgeyAgIA0KCSAgICAgICAgCWNoYXJDb3VudEVsZW0uaHRtbCggbGltaXQgLSBjaGFycyApOw0KCSAgICAgICAgfQ0KICAgIAl9DQogICAgfQ0KICAgIHNldENvdW50KGpRdWVyeSh0aGlzKVswXSwgY2hhckNvdW50RWxlbSk7DQp9Ow0KDQooZnVuY3Rpb24oJCl7IA0KDQogICAgJC5mbi5leHRlbmQoeyAgDQogICAgCS8qKg0KICAgIAkgKiBTYW1lIGFzIHRoZSBtYXhMZW5ndGggZnVuY3Rpb24gZm9yIHRleHRhcmVhcywgYnV0IHRoaXMganVzdCBkaXNwbGF5cyB0aGUgY291bnQgb2YgY2hhcmFjdGVycyByZW1haW5pbmcuDQogICAgCSAqICAgIHVzYWdlOiAkKCIjbXlUZXh0QXJlYSIpLnJlcG9ydCg1MDAsICIjbXlUeHRDb3VudGVyRGl2Iik7DQogICAgCSAqLw0KICAgICAgICByZXBvcnQ6IGZ1bmN0aW9uKGxpbWl0LGVsZW1lbnQpIHsNCiAgICAgICAgCSQodGhpcykub24oJ2lucHV0JywgcmVwb3J0KTsNCiAgICAgICAgCXZhciBzZWxmID0gJCh0aGlzKTsNCgkJCWZ1bmN0aW9uIHJlcG9ydCgpIHsgDQoJCQkJdmFyIHZhbCA9ICQoc2VsZikudmFsKCk7DQoJCQkgICAgdmFyIGxlbmd0aCA9ICh2YWwgPT0gdW5kZWZpbmVkKSA/IDAgOiB2YWwubGVuZ3RoOw0KCQkJICAgIGlmKCQoZWxlbWVudCkuaHRtbCgpID09ICcnIHx8ICQoZWxlbWVudCkuaHRtbCgpICE9IGxpbWl0LWxlbmd0aCkgew0KCQkJICAgICAgICAkKGVsZW1lbnQpLmh0bWwobGltaXQtbGVuZ3RoKTsNCgkJCSAgICB9DQoJCQl9DQoJCQlyZXBvcnQoKTsNCiAgICAgICAgfQ0KCX0pOyANCiAgICANCiAgICANCiAgICAkLmV4dGVuZCh7ICANCiAgICAJLyoqDQogICAgCSAqIFRoaXMgZnVuY3Rpb24gd2lsbCBwYXJzZSBhIFVSTCBzdHJpbmcgYW5kIHJldHVybiB0aGUgcGFyYW1ldGVycyBhcyBhIGhhc2htYXAuDQogICAgCSAqIA0KICAgIAkgKiBVc2FnZTogDQogICAgCSAqIHZhciBwYXJhbXMgPSAkLnBhcnNlUGFyYW1zKCI/ZG9jTmI9ODAwNTUwJmQtMzY3MDE0OS1vPTEmZC0zNjcwMTQ5LXA9MiIpOw0KICAgIAkgKiB2YXIgZG9jTmIgPSBwYXJhbXNbJ2RvY05iJ107DQogICAgCSAqLw0KICAgICAgICBwYXJzZVBhcmFtczogZnVuY3Rpb24odXJsKSB7DQoJCQl2YXIgcGFyYW1zID0ge30sIG0sIHJlID0gLyhbXiY9XSspPShbXiZdKikvZzsNCgkJCXdoaWxlIChtID0gcmUuZXhlYyh1cmwuc2xpY2UodXJsLmluZGV4T2YoIj8iKSsxKSkpIHsNCgkJCSAgICBwYXJhbXNbbVsxXV0gPSBtWzJdOw0KCQkJfQ0KCQkJcmV0dXJuIHBhcmFtczsNCiAgICAgICAgfSwNCg0KICAgICAgICAvKioNCiAgICAgICAgICogT3BlbnMgYSBDU1MgbW9kYWwgZGlhbG9nIGRpc3BsYXlpbmcgdGhlIGNvbnRlbnRzIG9mIHRoZSBkaXNjbGFpbWVyICh0aXRsZSwgYm9keSkuDQogICAgICAgICAqIFdoZW4gT0sgaXMgcHJlc3NlZCwgYW4gYWNrbm93bGVkZ21lbnQgUE9TVCByZXF1ZXN0IGlzIHNlbnQgdG8gIi9vbW5pL2FkdmNvci9uZWVkcy9kaXNjbGFpbWVyLmpzb24iIHdpdGggdGhlIGdpdmVuIG9mZmVuZGVyLCBkb21haW4sIGFuZCBzY3JlZW4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBvcHRpb25zIGFuIG9iamVjdCB3aXRoIGZvbGxvd2luZyBzdHJ1Y3R1cmUNCiAgICAgICAgICogCXsNCiAgICAgICAgICogCSAgdGl0bGU6ICIiLCAgICAtIHRpdGxlIG9mIHRoZSBkaWFsb2cNCiAgICAgICAgICogCSAgYm9keTogIiIsICAgICAtIGJvZHkgdGV4dCBvZiB0aGUgZGlhbG9nDQogICAgICAgICAqICAgIGRvY05iOiAiIiwgICAgLSBvZmZlbmRlciB0aGlzIGFja25vd2xlZGdtZW50IGlzIGZvcg0KICAgICAgICAgKiAgICBvZm5udHlDZDogIiIsIC0gYSByZWZlcmVuY2UgdG8gYSBUYk9mbk5kc1R5cENkIGNvZGUNCiAgICAgICAgICogICAgc2NyZWVuOiAiIiwgICAtIGEgcmVmZXJlbmNlIHRvIGEgRGlzY2xhaW1lclNjcmVlbg0KICAgICAgICAgKiAJfQ0KICAgICAgICAgKi8NCiAgICAJZGlzY2xhaW1lckRpYWxvZzogZnVuY3Rpb24gZGlzY2xhaW1lckRpYWxvZyhvcHRpb25zLCBvblN1Y2Nlc3NDYWxsYmFjaywgb25DYW5jZWxDYWxsYmFjaykgew0KCQkJLy8gYWRkIGFuIGVtcHR5IGlucHV0IGVsZW1lbnQgdG8gdHJpY2sgSUUgdG8gZ2l2aW5nIHRoaXMgcG9wdXAgZm9jdXMgKGFuZCBub3QgdGhlIERPQyBObyBmaWVsZCBhdCB0aGUgdG9wIG9mIHRoZSBtb3N0IHNjcmVlbnMpDQoJCQl2YXIgYm9keSA9ICI8aW5wdXQgYXV0b2ZvY3VzPVwiYXV0b2ZvY3VzXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIgLz4iICsgb3B0aW9ucy5ib2R5Ow0KCQkJdmFyIGRpYWxvZyA9IG9wZW5EaWFsb2cob3B0aW9ucy50aXRsZSwgYm9keSwgZnVuY3Rpb24oKSB7DQoJCQkJCS8vIFRlbGwgdGhlIERpc2NsYWltZXJDb250cm9sbGVyIG9mIHRoZSBkZWNpc2lvbiB0byBzdG9yZSBpbiB0aGUgdXNlcidzIHNlc3Npb24uDQoJCQkJCSQucG9zdCgNCgkJCQkJCSIvb21uaS9hZHZjb3IvbmVlZHMvZGlzY2xhaW1lci5qc29uIiwgDQoJCQkJCQl7ICJkb2NOYiI6IG9wdGlvbnMuZG9jTmIsICJvZm5udHlDZCI6IG9wdGlvbnMub2ZubnR5Q2QsICJzY3JlZW4iOiBvcHRpb25zLnNjcmVlbiB9LA0KCQkJCQkJZnVuY3Rpb24oIGpzb24sIHRleHRTdGF0dXMsIGpxWEhSICkgew0KCQkJCQkJCWlmIChqc29uLmVycm9yKSB7DQoJCQkJCQkJCXdpbmRvdy5hbGVydCgiVGhlcmUgd2FzIGFuIGVycm9yIHNhdmluZyB0aGUgZGlzY2xhaW1lcjogIiArIGpzb24uZXJyb3IpOw0KCQkJCQkJCQljb25zb2xlLmVycm9yKCJUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIHRoZSBkaXNjbGFpbWVyOiAiICsganNvbi5lcnJvcik7DQoJCQkJCQkJfQ0KCQkJCQkJCWVsc2Ugew0KCQkJCQkJCQlpZiAob25TdWNjZXNzQ2FsbGJhY2spIG9uU3VjY2Vzc0NhbGxiYWNrLmNhbGwoKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCSk7DQoJCQkJfSwgb25DYW5jZWxDYWxsYmFjaw0KCQkJKTsNCgkJfQ0KICAgIH0pOyANCg0KICAgIA0KCS8qKg0KCSAqIE92ZXJyaWRlIHRoZSBnZXQoKSBtZXRob2Qgb24gdGV4dGFyZWFzIHNvIHRoZXkgcmV0dXJuIFxyXG4gZm9yIGNhcnJpYWdlIHJldHVybnMsIG5vdCBqdXN0IFxuLg0KCSAqIC52YWwoKSBjYWxscyB0aGlzIG1ldGhvZC4NCgkgKi8NCgkkLnZhbEhvb2tzLnRleHRhcmVhID0gew0KCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgew0KCQkJcmV0dXJuIGVsZW0udmFsdWUucmVwbGFjZSggL1xyP1xuL2csICJcclxuIiApOw0KCQl9DQoJfTsNCg0KCS8qKg0KCSAqIEFnZ3JlZ2F0ZSBmdW5jdGlvbiB1c2Ugc3VtIGFsbCBkaWdpdHMgZm91bmQgaW4gaW5wdXQgZmllbGRzDQoJICogdXNhZ2U6ICQoImlucHV0Iikuc3VtKCkNCgkgKi8NCgkkLmZuLnN1bSA9IGZ1bmN0aW9uKCkgew0KCQl2YXIgc3VtID0gMDsNCgkJdGhpcy5lYWNoKGZ1bmN0aW9uKCkgew0KCQkJaWYgKCQodGhpcykuaXMoJzppbnB1dCcpKSB7DQoJCQkJdmFyIHZhbCA9ICQodGhpcykudmFsKCk7DQoJCQl9DQoJCQllbHNlIHsNCgkJCQl2YXIgdmFsID0gJCh0aGlzKS50ZXh0KCk7DQoJCQl9DQoJCQl2YWwgPSAnMCcgKyB2YWw7DQoJCQlpZiAodmFsLmluZGV4T2YoJy0nKSA+IC0xKSB2YWwgPSAnLScgKyB2YWwucmVwbGFjZSgvXC0vZywgJycpOw0KCQkJc3VtICs9IHBhcnNlRmxvYXQoIHZhbC5yZXBsYWNlKC9bXjAtOVwtXC5dL2csICcnKSwgMTAgKTsNCgkJfSk7DQoJCXJldHVybiBzdW07DQoJfQ0KCQ0KCS8qKiANCgkgKiBGdW5jdGlvbiB1c2VkIHRvIGFkZCBjaGFuZ2UgbGlzdGVuZXJzIG9uIGV2ZXJ5IGZvcm0gZWxlbWVudCBiZWxvdyB0aGlzIERPTSBlbGVtZW50LiAgDQoJICogQW4gaXNEaXJ0eSBoaWRkZW4gaW5wdXQgZmllbGQgaXMgdXBkYXRlZCB3aGVuIGlucHV0IGVsZW1lbnRzIGFyZSBjaGFuZ2VkLg0KCSAqICAgdXNhZ2U6ICQoIiNteUZvcm0iKS5lbmFibGVJc0RpcnR5TGlzdGVuZXJzKCk7DQoJICovICAgDQoJJC5mbi5lbmFibGVJc0RpcnR5TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7DQoJCS8vIElkZW50aWZ5IHRoZSBpc0RpcnR5IGhpZGRlbiBmb3JtIGVsZW1lbnQgd2l0aGluIHRoaXMgZm9ybSANCgkJdmFyIGlzRGlydHkgPSB0aGlzLmZpbmQoImlucHV0W25hbWU9J2lzRGlydHknXSIpOw0KCQkNCgkJLy8gQWRkIGFuIG9uQ2hhbmdlIGxpc3RlbmVyIGZvciBldmVyeSBpbnB1dCBmaWVsZCBpbiB0aGlzIGZvcm0gdGhhdCBzZXRzIHRoZSBpc0RpcnR5IHZhbHVlIHRvIHRydWUNCgkJZ2V0SW5wdXRFbGVtZW50cyh0aGlzKS5jaGFuZ2UoZnVuY3Rpb24oKSB7DQoJCQlpc0RpcnR5LnZhbCgidHJ1ZSIpLnRyaWdnZXIoJ2NoYW5nZScpOw0KCQl9KTsNCgkJDQoJCS8vIEZvciBjaGFpbmluZyBqUXVlcnkgY29tbWFuZHMuDQoJCXJldHVybiB0aGlzOw0KCX07DQoJDQoJLyoqDQoJICogQWRkcyBhIFBORyBzcGlubmVyIChhbmltYXRlZCB3YWl0IGljb24pIHRvIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHRyYW5zcGFyZW50IHBuZyBiYWNrZ3JvdW5kIGljb24uDQoJICovDQoJJC5mbi5hZGRTcGlubmVyUE5HID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7DQoJCS8vIGRlZmF1bHQgb3B0aW9ucw0KCQl2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCh7DQoJCQlzcGVlZDogMTAwLA0KCQkJZnJhbWVzOiAxMiwNCgkJCWZyYW1lV2lkdGg6IDE1DQoJCX0sIG9wdGlvbnMpOw0KCQkNCgkJcmV0dXJuIHRoaXMucmVtb3ZlU3Bpbm5lclBORygpLmFkZENsYXNzKCJzcGlubmVyLXBuZ2ljb24iKS5lYWNoKGZ1bmN0aW9uKCkgewkJCQkJDQoJCQkNCgkJCXZhciBlID0gJCh0aGlzKTsNCgkJCXZhciBpbmRleCA9IDA7DQoJCQkNCgkJCXZhciBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7DQoJCQkJaWYgKGluZGV4ID09IHNldHRpbmdzLmZyYW1lcykgeyBpbmRleCA9IDA7IH0NCgkJCQllLmNzcygnYmFja2dyb3VuZFBvc2l0aW9uJywgLShpbmRleCsrICogc2V0dGluZ3MuZnJhbWVXaWR0aCkgKyAncHggMHB4Jyk7DQoJCQl9LCBzZXR0aW5ncy5zcGVlZCk7DQoJCQkkLmRhdGEodGhpcywgJ2FpbWcuaW50ZXJ2YWxJZCcsIGludGVydmFsSWQpOw0KCQkJCQ0KCQl9KTsNCgl9Ow0KCQ0KCS8qKg0KCSAqIFJlbW92ZXMgYSBQTkcgc3Bpbm5lciAoYW5pbWF0ZWQgd2FpdCBpY29uKSBmcm9tIGEgRE9NIGVsZW1lbnQuDQoJICovDQoJJC5mbi5yZW1vdmVTcGlubmVyUE5HID0gZnVuY3Rpb24oKSB7DQoJCXJldHVybiB0aGlzLnJlbW92ZUNsYXNzKCJzcGlubmVyLXBuZ2ljb24iKS5lYWNoKGZ1bmN0aW9uKCkgew0KCQkJY2xlYXJJbnRlcnZhbCgkLmRhdGEodGhpcywgJ2FpbWcuaW50ZXJ2YWxJZCcpKTsNCgkJfSk7DQoJfTsNCgkNCgkvKioNCgkgKiBBZGRzIGEgLnNwaW5uZXItaWNvbiBjbGFzcyAoYW4gYW5pbWF0ZWQgZ2lmIGltYWdlKSB0byB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgYWZ0ZXIgYSBkZWxheS4gIA0KCSAqIElmIHJlbW92ZVNwaW5uZXIoKSBpcyBjYWxsZWQgYmVmb3JlIHRoZSBkZWxheSBlbGFwc2VzLCB0aGlzIG1ldGhvZCBpcyBlZmZlY3RpdmVseSBjYW5jZWxsZWQuDQoJICogdXNhZ2U6ICQoIiNteXNwYW4iKS5hZGRTcGlubmVyKCk7DQoJICogICAgICAgICQoIiNteXNwYW4iKS5hZGRTcGlubmVyKCB7IGRlbGF5OiAzMDAwIH0gKTsNCgkgKiANCgkgKiBAcGFyYW0gb3B0aW9ucy5kZWxheSB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhcHBseWluZyB0aGUgY2xhc3MuICBEZWZhdWx0cyB0byAxIHNlY29uZC4NCgkgKiANCgkgKiBAc2VlIHJlbW92ZVNwaW5uZXIoKQ0KCSAqLw0KCSQuZm4uYWRkU3Bpbm5lciA9IGZ1bmN0aW9uKCBvcHRpb25zICkgew0KCQkvLyBkZWZhdWx0IG9wdGlvbnMNCgkJdmFyIHNldHRpbmdzID0gJC5leHRlbmQoew0KCQkJZGVsYXk6IDEwMDAJLy8gYSBzaG9ydCBkZWxheSBpbiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYWRkaW5nIHRoZSBzdHlsZQ0KCQl9LCBvcHRpb25zKTsNCgkJDQoJCXZhciBfdGhpcyA9ICQodGhpcyk7DQoJCXZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBfdGhpcy5hZGRDbGFzcygic3Bpbm5lci1pY29uIik7IH0sIHNldHRpbmdzLmRlbGF5KTsNCgkJX3RoaXMuZGF0YSgiYWltZy50aW1lb3V0SWQiLCB0aW1lb3V0KTsNCgl9DQoJDQoJLyoqDQoJICogUmVtb3ZlcyBhIHNwaW5uZXIgKGFuaW1hdGVkIHdhaXQgaWNvbikgZnJvbSBhIERPTSBlbGVtZW50Lg0KCSAqIHVzYWdlOiAkKCIjbXlzcGFuIikucmVtb3ZlU3Bpbm5lcigpOw0KCSAqLw0KCSQuZm4ucmVtb3ZlU3Bpbm5lciA9IGZ1bmN0aW9uKCkgew0KCQlyZXR1cm4gdGhpcy5yZW1vdmVDbGFzcygic3Bpbm5lci1pY29uIikuZWFjaChmdW5jdGlvbigpIHsNCgkJCWNsZWFyVGltZW91dCgkLmRhdGEodGhpcywgJ2FpbWcudGltZW91dElkJykpOw0KCQl9KTsNCgl9Ow0KCQ0KCS8qKg0KCSAqIEVuYWJsZXMgYSBzdGFuZGFyZCByYWRpbyBidXR0b24gdG8gYmUgImRlc2VsZWN0ZWQiLCBsaWtlIGEgY2hlY2tib3guDQoJICogdXNhZ2U6ICQoImlucHV0W3R5cGU9J3JhZGlvJ10iKS51bmNoZWNrYWJsZVJhZGlvKCk7DQoJICovDQogICAgJC5mbi51bmNoZWNrYWJsZVJhZGlvID0gZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciByYWRpbyA9IHRoaXM7DQogICAgICAgICAgICBpZiAoISAkKHJhZGlvKS5wcm9wKCdkaXNhYmxlZCcpKSB7ICAgICAgICAgICAgCQ0KCSAgICAgICAgICAgIHZhciBsYWJlbCA9ICQoJ2xhYmVsW2Zvcj0iJyArIHJhZGlvLmlkICsgJyJdJyk7DQoJICAgICAgICAgICAgaWYgKGxhYmVsLmxlbmd0aCA9PT0gMCkgew0KCSAgICAgICAgICAgICAgICBsYWJlbCA9ICQocmFkaW8pLmNsb3Nlc3QoImxhYmVsIik7DQoJICAgICAgICAgICAgfQ0KCSAgICAgICAgICAgIHZhciBsYWJlbF9yYWRpbyA9IGxhYmVsLmFkZChyYWRpbyk7DQoJICAgICAgICAgICAgbGFiZWxfcmFkaW8ubW91c2Vkb3duKGZ1bmN0aW9uICgpIHsNCgkgICAgICAgICAgICAgICAgJChyYWRpbykuZGF0YSgnd2FzQ2hlY2tlZCcsIHJhZGlvLmNoZWNrZWQpOw0KCSAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgCSQocmFkaW8pLmNsaWNrKGZ1bmN0aW9uICgpIHsNCgkgICAgICAgICAgICAgICAgaWYgKCQocmFkaW8pLmRhdGEoJ3dhc0NoZWNrZWQnKSkgew0KCSAgICAgICAgICAgICAgICAgICAgcmFkaW8uY2hlY2tlZCA9IGZhbHNlOw0KCSAgICAgICAgICAgICAgICAgICAgJChyYWRpbykudHJpZ2dlcignY2hhbmdlJyk7DQoJICAgICAgICAgICAgICAgIH0NCgkgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsNCgkNCn0oIGpRdWVyeSApKTsNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="24" hostname="omniconv" path="/OMNIStatic/scripts/jquery/jquery-ui.js" url="http://omniconv/OMNIStatic/scripts/jquery/jquery-ui.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="HTML" ordinal="12" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2333" sendTime="72" waitTime="0" receiveTime="84">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS11aS5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQpDb29raWU6IEpTRVNTSU9OSUQ9MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0xDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Transfer-Encoding" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Y2h1bmtlZA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Type" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMTYgSmFuIDIwMTggMTQ6NTg6MTIgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjA1YWNjNmRkYThlZDMxOjAiDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyohIGpRdWVyeSBVSSAtIHYxLjExLjEgLSAyMDE0LTA4LTEzCiogaHR0cDovL2pxdWVyeXVpLmNvbQoqIEluY2x1ZGVzOiBjb3JlLmpzLCB3aWRnZXQuanMsIG1vdXNlLmpzLCBwb3NpdGlvbi5qcywgYWNjb3JkaW9uLmpzLCBhdXRvY29tcGxldGUuanMsIGJ1dHRvbi5qcywgZGF0ZXBpY2tlci5qcywgZGlhbG9nLmpzLCBkcmFnZ2FibGUuanMsIGRyb3BwYWJsZS5qcywgZWZmZWN0LmpzLCBlZmZlY3QtYmxpbmQuanMsIGVmZmVjdC1ib3VuY2UuanMsIGVmZmVjdC1jbGlwLmpzLCBlZmZlY3QtZHJvcC5qcywgZWZmZWN0LWV4cGxvZGUuanMsIGVmZmVjdC1mYWRlLmpzLCBlZmZlY3QtZm9sZC5qcywgZWZmZWN0LWhpZ2hsaWdodC5qcywgZWZmZWN0LXB1ZmYuanMsIGVmZmVjdC1wdWxzYXRlLmpzLCBlZmZlY3Qtc2NhbGUuanMsIGVmZmVjdC1zaGFrZS5qcywgZWZmZWN0LXNpemUuanMsIGVmZmVjdC1zbGlkZS5qcywgZWZmZWN0LXRyYW5zZmVyLmpzLCBtZW51LmpzLCBwcm9ncmVzc2Jhci5qcywgcmVzaXphYmxlLmpzLCBzZWxlY3RhYmxlLmpzLCBzZWxlY3RtZW51LmpzLCBzbGlkZXIuanMsIHNvcnRhYmxlLmpzLCBzcGlubmVyLmpzLCB0YWJzLmpzLCB0b29sdGlwLmpzCiogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczsgTGljZW5zZWQgTUlUICovCgooZnVuY3Rpb24oIGZhY3RvcnkgKSB7CglpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCApIHsKCgkJLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgoJCWRlZmluZShbICJqcXVlcnkiIF0sIGZhY3RvcnkgKTsKCX0gZWxzZSB7CgoJCS8vIEJyb3dzZXIgZ2xvYmFscwoJCWZhY3RvcnkoIGpRdWVyeSApOwoJfQp9KGZ1bmN0aW9uKCAkICkgewovKiEKICogalF1ZXJ5IFVJIENvcmUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS8KICovCgoKLy8gJC51aSBtaWdodCBleGlzdCBmcm9tIGNvbXBvbmVudHMgd2l0aCBubyBkZXBlbmRlbmNpZXMsIGUuZy4sICQudWkucG9zaXRpb24KJC51aSA9ICQudWkgfHwge307CgokLmV4dGVuZCggJC51aSwgewoJdmVyc2lvbjogIjEuMTEuMSIsCgoJa2V5Q29kZTogewoJCUJBQ0tTUEFDRTogOCwKCQlDT01NQTogMTg4LAoJCURFTEVURTogNDYsCgkJRE9XTjogNDAsCgkJRU5EOiAzNSwKCQlFTlRFUjogMTMsCgkJRVNDQVBFOiAyNywKCQlIT01FOiAzNiwKCQlMRUZUOiAzNywKCQlQQUdFX0RPV046IDM0LAoJCVBBR0VfVVA6IDMzLAoJCVBFUklPRDogMTkwLAoJCVJJR0hUOiAzOSwKCQlTUEFDRTogMzIsCgkJVEFCOiA5LAoJCVVQOiAzOAoJfQp9KTsKCi8vIHBsdWdpbnMKJC5mbi5leHRlbmQoewoJc2Nyb2xsUGFyZW50OiBmdW5jdGlvbiggaW5jbHVkZUhpZGRlbiApIHsKCQl2YXIgcG9zaXRpb24gPSB0aGlzLmNzcyggInBvc2l0aW9uIiApLAoJCQlleGNsdWRlU3RhdGljUGFyZW50ID0gcG9zaXRpb24gPT09ICJhYnNvbHV0ZSIsCgkJCW92ZXJmbG93UmVnZXggPSBpbmNsdWRlSGlkZGVuID8gLyhhdXRvfHNjcm9sbHxoaWRkZW4pLyA6IC8oYXV0b3xzY3JvbGwpLywKCQkJc2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKCBmdW5jdGlvbigpIHsKCQkJCXZhciBwYXJlbnQgPSAkKCB0aGlzICk7CgkJCQlpZiAoIGV4Y2x1ZGVTdGF0aWNQYXJlbnQgJiYgcGFyZW50LmNzcyggInBvc2l0aW9uIiApID09PSAic3RhdGljIiApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQlyZXR1cm4gb3ZlcmZsb3dSZWdleC50ZXN0KCBwYXJlbnQuY3NzKCAib3ZlcmZsb3ciICkgKyBwYXJlbnQuY3NzKCAib3ZlcmZsb3cteSIgKSArIHBhcmVudC5jc3MoICJvdmVyZmxvdy14IiApICk7CgkJCX0pLmVxKCAwICk7CgoJCXJldHVybiBwb3NpdGlvbiA9PT0gImZpeGVkIiB8fCAhc2Nyb2xsUGFyZW50Lmxlbmd0aCA/ICQoIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgOiBzY3JvbGxQYXJlbnQ7Cgl9LAoKCXVuaXF1ZUlkOiAoZnVuY3Rpb24oKSB7CgkJdmFyIHV1aWQgPSAwOwoKCQlyZXR1cm4gZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQlpZiAoICF0aGlzLmlkICkgewoJCQkJCXRoaXMuaWQgPSAidWktaWQtIiArICggKyt1dWlkICk7CgkJCQl9CgkJCX0pOwoJCX07Cgl9KSgpLAoKCXJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQlpZiAoIC9edWktaWQtXGQrJC8udGVzdCggdGhpcy5pZCApICkgewoJCQkJJCggdGhpcyApLnJlbW92ZUF0dHIoICJpZCIgKTsKCQkJfQoJCX0pOwoJfQp9KTsKCi8vIHNlbGVjdG9ycwpmdW5jdGlvbiBmb2N1c2FibGUoIGVsZW1lbnQsIGlzVGFiSW5kZXhOb3ROYU4gKSB7Cgl2YXIgbWFwLCBtYXBOYW1lLCBpbWcsCgkJbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CglpZiAoICJhcmVhIiA9PT0gbm9kZU5hbWUgKSB7CgkJbWFwID0gZWxlbWVudC5wYXJlbnROb2RlOwoJCW1hcE5hbWUgPSBtYXAubmFtZTsKCQlpZiAoICFlbGVtZW50LmhyZWYgfHwgIW1hcE5hbWUgfHwgbWFwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJtYXAiICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWltZyA9ICQoICJpbWdbdXNlbWFwPScjIiArIG1hcE5hbWUgKyAiJ10iIClbIDAgXTsKCQlyZXR1cm4gISFpbWcgJiYgdmlzaWJsZSggaW1nICk7Cgl9CglyZXR1cm4gKCAvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3QoIG5vZGVOYW1lICkgPwoJCSFlbGVtZW50LmRpc2FibGVkIDoKCQkiYSIgPT09IG5vZGVOYW1lID8KCQkJZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOgoJCQlpc1RhYkluZGV4Tm90TmFOKSAmJgoJCS8vIHRoZSBlbGVtZW50IGFuZCBhbGwgb2YgaXRzIGFuY2VzdG9ycyBtdXN0IGJlIHZpc2libGUKCQl2aXNpYmxlKCBlbGVtZW50ICk7Cn0KCmZ1bmN0aW9uIHZpc2libGUoIGVsZW1lbnQgKSB7CglyZXR1cm4gJC5leHByLmZpbHRlcnMudmlzaWJsZSggZWxlbWVudCApICYmCgkJISQoIGVsZW1lbnQgKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQuY3NzKCB0aGlzLCAidmlzaWJpbGl0eSIgKSA9PT0gImhpZGRlbiI7CgkJfSkubGVuZ3RoOwp9CgokLmV4dGVuZCggJC5leHByWyAiOiIgXSwgewoJZGF0YTogJC5leHByLmNyZWF0ZVBzZXVkbyA/CgkJJC5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbiggZGF0YU5hbWUgKSB7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAhISQuZGF0YSggZWxlbSwgZGF0YU5hbWUgKTsKCQkJfTsKCQl9KSA6CgkJLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjgKCQlmdW5jdGlvbiggZWxlbSwgaSwgbWF0Y2ggKSB7CgkJCXJldHVybiAhISQuZGF0YSggZWxlbSwgbWF0Y2hbIDMgXSApOwoJCX0sCgoJZm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQlyZXR1cm4gZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNOYU4oICQuYXR0ciggZWxlbWVudCwgInRhYmluZGV4IiApICkgKTsKCX0sCgoJdGFiYmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCXZhciB0YWJJbmRleCA9ICQuYXR0ciggZWxlbWVudCwgInRhYmluZGV4IiApLAoJCQlpc1RhYkluZGV4TmFOID0gaXNOYU4oIHRhYkluZGV4ICk7CgkJcmV0dXJuICggaXNUYWJJbmRleE5hTiB8fCB0YWJJbmRleCA+PSAwICkgJiYgZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNUYWJJbmRleE5hTiApOwoJfQp9KTsKCi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44CmlmICggISQoICI8YT4iICkub3V0ZXJXaWR0aCggMSApLmpxdWVyeSApIHsKCSQuZWFjaCggWyAiV2lkdGgiLCAiSGVpZ2h0IiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQl2YXIgc2lkZSA9IG5hbWUgPT09ICJXaWR0aCIgPyBbICJMZWZ0IiwgIlJpZ2h0IiBdIDogWyAiVG9wIiwgIkJvdHRvbSIgXSwKCQkJdHlwZSA9IG5hbWUudG9Mb3dlckNhc2UoKSwKCQkJb3JpZyA9IHsKCQkJCWlubmVyV2lkdGg6ICQuZm4uaW5uZXJXaWR0aCwKCQkJCWlubmVySGVpZ2h0OiAkLmZuLmlubmVySGVpZ2h0LAoJCQkJb3V0ZXJXaWR0aDogJC5mbi5vdXRlcldpZHRoLAoJCQkJb3V0ZXJIZWlnaHQ6ICQuZm4ub3V0ZXJIZWlnaHQKCQkJfTsKCgkJZnVuY3Rpb24gcmVkdWNlKCBlbGVtLCBzaXplLCBib3JkZXIsIG1hcmdpbiApIHsKCQkJJC5lYWNoKCBzaWRlLCBmdW5jdGlvbigpIHsKCQkJCXNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sICJwYWRkaW5nIiArIHRoaXMgKSApIHx8IDA7CgkJCQlpZiAoIGJvcmRlciApIHsKCQkJCQlzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCAiYm9yZGVyIiArIHRoaXMgKyAiV2lkdGgiICkgKSB8fCAwOwoJCQkJfQoJCQkJaWYgKCBtYXJnaW4gKSB7CgkJCQkJc2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgIm1hcmdpbiIgKyB0aGlzICkgKSB8fCAwOwoJCQkJfQoJCQl9KTsKCQkJcmV0dXJuIHNpemU7CgkJfQoKCQkkLmZuWyAiaW5uZXIiICsgbmFtZSBdID0gZnVuY3Rpb24oIHNpemUgKSB7CgkJCWlmICggc2l6ZSA9PT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIG9yaWdbICJpbm5lciIgKyBuYW1lIF0uY2FsbCggdGhpcyApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJJCggdGhpcyApLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplICkgKyAicHgiICk7CgkJCX0pOwoJCX07CgoJCSQuZm5bICJvdXRlciIgKyBuYW1lXSA9IGZ1bmN0aW9uKCBzaXplLCBtYXJnaW4gKSB7CgkJCWlmICggdHlwZW9mIHNpemUgIT09ICJudW1iZXIiICkgewoJCQkJcmV0dXJuIG9yaWdbICJvdXRlciIgKyBuYW1lIF0uY2FsbCggdGhpcywgc2l6ZSApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJJCggdGhpcykuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgInB4IiApOwoJCQl9KTsKCQl9OwoJfSk7Cn0KCi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44CmlmICggISQuZm4uYWRkQmFjayApIHsKCSQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQlyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgPwoJCQl0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApCgkJKTsKCX07Cn0KCi8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYuMSwgMS42LjIgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMpCmlmICggJCggIjxhPiIgKS5kYXRhKCAiYS1iIiwgImEiICkucmVtb3ZlRGF0YSggImEtYiIgKS5kYXRhKCAiYS1iIiApICkgewoJJC5mbi5yZW1vdmVEYXRhID0gKGZ1bmN0aW9uKCByZW1vdmVEYXRhICkgewoJCXJldHVybiBmdW5jdGlvbigga2V5ICkgewoJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCQlyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzLCAkLmNhbWVsQ2FzZSgga2V5ICkgKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMgKTsKCQkJfQoJCX07Cgl9KSggJC5mbi5yZW1vdmVEYXRhICk7Cn0KCi8vIGRlcHJlY2F0ZWQKJC51aS5pZSA9ICEhL21zaWUgW1x3Ll0rLy5leGVjKCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgKTsKCiQuZm4uZXh0ZW5kKHsKCWZvY3VzOiAoZnVuY3Rpb24oIG9yaWcgKSB7CgkJcmV0dXJuIGZ1bmN0aW9uKCBkZWxheSwgZm4gKSB7CgkJCXJldHVybiB0eXBlb2YgZGVsYXkgPT09ICJudW1iZXIiID8KCQkJCXRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQl2YXIgZWxlbSA9IHRoaXM7CgkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJJCggZWxlbSApLmZvY3VzKCk7CgkJCQkJCWlmICggZm4gKSB7CgkJCQkJCQlmbi5jYWxsKCBlbGVtICk7CgkJCQkJCX0KCQkJCQl9LCBkZWxheSApOwoJCQkJfSkgOgoJCQkJb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfTsKCX0pKCAkLmZuLmZvY3VzICksCgoJZGlzYWJsZVNlbGVjdGlvbjogKGZ1bmN0aW9uKCkgewoJCXZhciBldmVudFR5cGUgPSAib25zZWxlY3RzdGFydCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSA/CgkJCSJzZWxlY3RzdGFydCIgOgoJCQkibW91c2Vkb3duIjsKCgkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5iaW5kKCBldmVudFR5cGUgKyAiLnVpLWRpc2FibGVTZWxlY3Rpb24iLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQl9KTsKCQl9OwoJfSkoKSwKCgllbmFibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnVuYmluZCggIi51aS1kaXNhYmxlU2VsZWN0aW9uIiApOwoJfSwKCgl6SW5kZXg6IGZ1bmN0aW9uKCB6SW5kZXggKSB7CgkJaWYgKCB6SW5kZXggIT09IHVuZGVmaW5lZCApIHsKCQkJcmV0dXJuIHRoaXMuY3NzKCAiekluZGV4IiwgekluZGV4ICk7CgkJfQoKCQlpZiAoIHRoaXMubGVuZ3RoICkgewoJCQl2YXIgZWxlbSA9ICQoIHRoaXNbIDAgXSApLCBwb3NpdGlvbiwgdmFsdWU7CgkJCXdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHsKCQkJCS8vIElnbm9yZSB6LWluZGV4IGlmIHBvc2l0aW9uIGlzIHNldCB0byBhIHZhbHVlIHdoZXJlIHotaW5kZXggaXMgaWdub3JlZCBieSB0aGUgYnJvd3NlcgoJCQkJLy8gVGhpcyBtYWtlcyBiZWhhdmlvciBvZiB0aGlzIGZ1bmN0aW9uIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzCgkJCQkvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkCgkJCQlwb3NpdGlvbiA9IGVsZW0uY3NzKCAicG9zaXRpb24iICk7CgkJCQlpZiAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAicmVsYXRpdmUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgewoJCQkJCS8vIElFIHJldHVybnMgMCB3aGVuIHpJbmRleCBpcyBub3Qgc3BlY2lmaWVkCgkJCQkJLy8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nCgkJCQkJLy8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDAKCQkJCQkvLyA8ZGl2IHN0eWxlPSJ6LWluZGV4OiAtMTA7Ij48ZGl2IHN0eWxlPSJ6LWluZGV4OiAwOyI+PC9kaXY+PC9kaXY+CgkJCQkJdmFsdWUgPSBwYXJzZUludCggZWxlbS5jc3MoICJ6SW5kZXgiICksIDEwICk7CgkJCQkJaWYgKCAhaXNOYU4oIHZhbHVlICkgJiYgdmFsdWUgIT09IDAgKSB7CgkJCQkJCXJldHVybiB2YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCQllbGVtID0gZWxlbS5wYXJlbnQoKTsKCQkJfQoJCX0KCgkJcmV0dXJuIDA7Cgl9Cn0pOwoKLy8gJC51aS5wbHVnaW4gaXMgZGVwcmVjYXRlZC4gVXNlICQud2lkZ2V0KCkgZXh0ZW5zaW9ucyBpbnN0ZWFkLgokLnVpLnBsdWdpbiA9IHsKCWFkZDogZnVuY3Rpb24oIG1vZHVsZSwgb3B0aW9uLCBzZXQgKSB7CgkJdmFyIGksCgkJCXByb3RvID0gJC51aVsgbW9kdWxlIF0ucHJvdG90eXBlOwoJCWZvciAoIGkgaW4gc2V0ICkgewoJCQlwcm90by5wbHVnaW5zWyBpIF0gPSBwcm90by5wbHVnaW5zWyBpIF0gfHwgW107CgkJCXByb3RvLnBsdWdpbnNbIGkgXS5wdXNoKCBbIG9wdGlvbiwgc2V0WyBpIF0gXSApOwoJCX0KCX0sCgljYWxsOiBmdW5jdGlvbiggaW5zdGFuY2UsIG5hbWUsIGFyZ3MsIGFsbG93RGlzY29ubmVjdGVkICkgewoJCXZhciBpLAoJCQlzZXQgPSBpbnN0YW5jZS5wbHVnaW5zWyBuYW1lIF07CgoJCWlmICggIXNldCApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCAhYWxsb3dEaXNjb25uZWN0ZWQgJiYgKCAhaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUgfHwgaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUubm9kZVR5cGUgPT09IDExICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCWZvciAoIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkgewoJCQlpZiAoIGluc3RhbmNlLm9wdGlvbnNbIHNldFsgaSBdWyAwIF0gXSApIHsKCQkJCXNldFsgaSBdWyAxIF0uYXBwbHkoIGluc3RhbmNlLmVsZW1lbnQsIGFyZ3MgKTsKCQkJfQoJCX0KCX0KfTsKCgovKiEKICogalF1ZXJ5IFVJIFdpZGdldCAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9qUXVlcnkud2lkZ2V0LwogKi8KCgp2YXIgd2lkZ2V0X3V1aWQgPSAwLAoJd2lkZ2V0X3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKJC5jbGVhbkRhdGEgPSAoZnVuY3Rpb24oIG9yaWcgKSB7CglyZXR1cm4gZnVuY3Rpb24oIGVsZW1zICkgewoJCXZhciBldmVudHMsIGVsZW0sIGk7CgkJZm9yICggaSA9IDA7IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHsKCQkJdHJ5IHsKCgkJCQkvLyBPbmx5IHRyaWdnZXIgcmVtb3ZlIHdoZW4gbmVjZXNzYXJ5IHRvIHNhdmUgdGltZQoJCQkJZXZlbnRzID0gJC5fZGF0YSggZWxlbSwgImV2ZW50cyIgKTsKCQkJCWlmICggZXZlbnRzICYmIGV2ZW50cy5yZW1vdmUgKSB7CgkJCQkJJCggZWxlbSApLnRyaWdnZXJIYW5kbGVyKCAicmVtb3ZlIiApOwoJCQkJfQoKCQkJLy8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvODIzNQoJCQl9IGNhdGNoKCBlICkge30KCQl9CgkJb3JpZyggZWxlbXMgKTsKCX07Cn0pKCAkLmNsZWFuRGF0YSApOwoKJC53aWRnZXQgPSBmdW5jdGlvbiggbmFtZSwgYmFzZSwgcHJvdG90eXBlICkgewoJdmFyIGZ1bGxOYW1lLCBleGlzdGluZ0NvbnN0cnVjdG9yLCBjb25zdHJ1Y3RvciwgYmFzZVByb3RvdHlwZSwKCQkvLyBwcm94aWVkUHJvdG90eXBlIGFsbG93cyB0aGUgcHJvdmlkZWQgcHJvdG90eXBlIHRvIHJlbWFpbiB1bm1vZGlmaWVkCgkJLy8gc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBhcyBhIG1peGluIGZvciBtdWx0aXBsZSB3aWRnZXRzICgjODg3NikKCQlwcm94aWVkUHJvdG90eXBlID0ge30sCgkJbmFtZXNwYWNlID0gbmFtZS5zcGxpdCggIi4iIClbIDAgXTsKCgluYW1lID0gbmFtZS5zcGxpdCggIi4iIClbIDEgXTsKCWZ1bGxOYW1lID0gbmFtZXNwYWNlICsgIi0iICsgbmFtZTsKCglpZiAoICFwcm90b3R5cGUgKSB7CgkJcHJvdG90eXBlID0gYmFzZTsKCQliYXNlID0gJC5XaWRnZXQ7Cgl9CgoJLy8gY3JlYXRlIHNlbGVjdG9yIGZvciBwbHVnaW4KCSQuZXhwclsgIjoiIF1bIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkgXSA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiAhISQuZGF0YSggZWxlbSwgZnVsbE5hbWUgKTsKCX07CgoJJFsgbmFtZXNwYWNlIF0gPSAkWyBuYW1lc3BhY2UgXSB8fCB7fTsKCWV4aXN0aW5nQ29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdOwoJY29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7CgkJLy8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0ICJuZXciIGtleXdvcmQKCQlpZiAoICF0aGlzLl9jcmVhdGVXaWRnZXQgKSB7CgkJCXJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTsKCQl9CgoJCS8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBpbml0aWFsaXppbmcgZm9yIHNpbXBsZSBpbmhlcml0YW5jZQoJCS8vIG11c3QgdXNlICJuZXciIGtleXdvcmQgKHRoZSBjb2RlIGFib3ZlIGFsd2F5cyBwYXNzZXMgYXJncykKCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCXRoaXMuX2NyZWF0ZVdpZGdldCggb3B0aW9ucywgZWxlbWVudCApOwoJCX0KCX07CgkvLyBleHRlbmQgd2l0aCB0aGUgZXhpc3RpbmcgY29uc3RydWN0b3IgdG8gY2Fycnkgb3ZlciBhbnkgc3RhdGljIHByb3BlcnRpZXMKCSQuZXh0ZW5kKCBjb25zdHJ1Y3RvciwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgewoJCXZlcnNpb246IHByb3RvdHlwZS52ZXJzaW9uLAoJCS8vIGNvcHkgdGhlIG9iamVjdCB1c2VkIHRvIGNyZWF0ZSB0aGUgcHJvdG90eXBlIGluIGNhc2Ugd2UgbmVlZCB0bwoJCS8vIHJlZGVmaW5lIHRoZSB3aWRnZXQgbGF0ZXIKCQlfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksCgkJLy8gdHJhY2sgd2lkZ2V0cyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIHdpZGdldCBpbiBjYXNlIHRoaXMgd2lkZ2V0IGlzCgkJLy8gcmVkZWZpbmVkIGFmdGVyIGEgd2lkZ2V0IGluaGVyaXRzIGZyb20gaXQKCQlfY2hpbGRDb25zdHJ1Y3RvcnM6IFtdCgl9KTsKCgliYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTsKCS8vIHdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZQoJLy8gb3RoZXJ3aXNlIHdlJ2xsIG1vZGlmeSB0aGUgb3B0aW9ucyBoYXNoIG9uIHRoZSBwcm90b3R5cGUgdGhhdCB3ZSdyZQoJLy8gaW5oZXJpdGluZyBmcm9tCgliYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTsKCSQuZWFjaCggcHJvdG90eXBlLCBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJaWYgKCAhJC5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQlwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSB2YWx1ZTsKCQkJcmV0dXJuOwoJCX0KCQlwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSAoZnVuY3Rpb24oKSB7CgkJCXZhciBfc3VwZXIgPSBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQl9LAoJCQkJX3N1cGVyQXBwbHkgPSBmdW5jdGlvbiggYXJncyApIHsKCQkJCQlyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJncyApOwoJCQkJfTsKCQkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCQkJdmFyIF9fc3VwZXIgPSB0aGlzLl9zdXBlciwKCQkJCQlfX3N1cGVyQXBwbHkgPSB0aGlzLl9zdXBlckFwcGx5LAoJCQkJCXJldHVyblZhbHVlOwoKCQkJCXRoaXMuX3N1cGVyID0gX3N1cGVyOwoJCQkJdGhpcy5fc3VwZXJBcHBseSA9IF9zdXBlckFwcGx5OwoKCQkJCXJldHVyblZhbHVlID0gdmFsdWUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoKCQkJCXRoaXMuX3N1cGVyID0gX19zdXBlcjsKCQkJCXRoaXMuX3N1cGVyQXBwbHkgPSBfX3N1cGVyQXBwbHk7CgoJCQkJcmV0dXJuIHJldHVyblZhbHVlOwoJCQl9OwoJCX0pKCk7Cgl9KTsKCWNvbnN0cnVjdG9yLnByb3RvdHlwZSA9ICQud2lkZ2V0LmV4dGVuZCggYmFzZVByb3RvdHlwZSwgewoJCS8vIFRPRE86IHJlbW92ZSBzdXBwb3J0IGZvciB3aWRnZXRFdmVudFByZWZpeAoJCS8vIGFsd2F5cyB1c2UgdGhlIG5hbWUgKyBhIGNvbG9uIGFzIHRoZSBwcmVmaXgsIGUuZy4sIGRyYWdnYWJsZTpzdGFydAoJCS8vIGRvbid0IHByZWZpeCBmb3Igd2lkZ2V0cyB0aGF0IGFyZW4ndCBET00tYmFzZWQKCQl3aWRnZXRFdmVudFByZWZpeDogZXhpc3RpbmdDb25zdHJ1Y3RvciA/IChiYXNlUHJvdG90eXBlLndpZGdldEV2ZW50UHJlZml4IHx8IG5hbWUpIDogbmFtZQoJfSwgcHJveGllZFByb3RvdHlwZSwgewoJCWNvbnN0cnVjdG9yOiBjb25zdHJ1Y3RvciwKCQluYW1lc3BhY2U6IG5hbWVzcGFjZSwKCQl3aWRnZXROYW1lOiBuYW1lLAoJCXdpZGdldEZ1bGxOYW1lOiBmdWxsTmFtZQoJfSk7CgoJLy8gSWYgdGhpcyB3aWRnZXQgaXMgYmVpbmcgcmVkZWZpbmVkIHRoZW4gd2UgbmVlZCB0byBmaW5kIGFsbCB3aWRnZXRzIHRoYXQKCS8vIGFyZSBpbmhlcml0aW5nIGZyb20gaXQgYW5kIHJlZGVmaW5lIGFsbCBvZiB0aGVtIHNvIHRoYXQgdGhleSBpbmhlcml0IGZyb20KCS8vIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIHdpZGdldC4gV2UncmUgZXNzZW50aWFsbHkgdHJ5aW5nIHRvIHJlcGxhY2Ugb25lCgkvLyBsZXZlbCBpbiB0aGUgcHJvdG90eXBlIGNoYWluLgoJaWYgKCBleGlzdGluZ0NvbnN0cnVjdG9yICkgewoJCSQuZWFjaCggZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uKCBpLCBjaGlsZCApIHsKCQkJdmFyIGNoaWxkUHJvdG90eXBlID0gY2hpbGQucHJvdG90eXBlOwoKCQkJLy8gcmVkZWZpbmUgdGhlIGNoaWxkIHdpZGdldCB1c2luZyB0aGUgc2FtZSBwcm90b3R5cGUgdGhhdCB3YXMKCQkJLy8gb3JpZ2luYWxseSB1c2VkLCBidXQgaW5oZXJpdCBmcm9tIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGUgYmFzZQoJCQkkLndpZGdldCggY2hpbGRQcm90b3R5cGUubmFtZXNwYWNlICsgIi4iICsgY2hpbGRQcm90b3R5cGUud2lkZ2V0TmFtZSwgY29uc3RydWN0b3IsIGNoaWxkLl9wcm90byApOwoJCX0pOwoJCS8vIHJlbW92ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjaGlsZCBjb25zdHJ1Y3RvcnMgZnJvbSB0aGUgb2xkIGNvbnN0cnVjdG9yCgkJLy8gc28gdGhlIG9sZCBjaGlsZCBjb25zdHJ1Y3RvcnMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkCgkJZGVsZXRlIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzOwoJfSBlbHNlIHsKCQliYXNlLl9jaGlsZENvbnN0cnVjdG9ycy5wdXNoKCBjb25zdHJ1Y3RvciApOwoJfQoKCSQud2lkZ2V0LmJyaWRnZSggbmFtZSwgY29uc3RydWN0b3IgKTsKCglyZXR1cm4gY29uc3RydWN0b3I7Cn07CgokLndpZGdldC5leHRlbmQgPSBmdW5jdGlvbiggdGFyZ2V0ICkgewoJdmFyIGlucHV0ID0gd2lkZ2V0X3NsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLAoJCWlucHV0SW5kZXggPSAwLAoJCWlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLAoJCWtleSwKCQl2YWx1ZTsKCWZvciAoIDsgaW5wdXRJbmRleCA8IGlucHV0TGVuZ3RoOyBpbnB1dEluZGV4KysgKSB7CgkJZm9yICgga2V5IGluIGlucHV0WyBpbnB1dEluZGV4IF0gKSB7CgkJCXZhbHVlID0gaW5wdXRbIGlucHV0SW5kZXggXVsga2V5IF07CgkJCWlmICggaW5wdXRbIGlucHV0SW5kZXggXS5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJCS8vIENsb25lIG9iamVjdHMKCQkJCWlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICkgewoJCQkJCXRhcmdldFsga2V5IF0gPSAkLmlzUGxhaW5PYmplY3QoIHRhcmdldFsga2V5IF0gKSA/CgkJCQkJCSQud2lkZ2V0LmV4dGVuZCgge30sIHRhcmdldFsga2V5IF0sIHZhbHVlICkgOgoJCQkJCQkvLyBEb24ndCBleHRlbmQgc3RyaW5ncywgYXJyYXlzLCBldGMuIHdpdGggb2JqZWN0cwoJCQkJCQkkLndpZGdldC5leHRlbmQoIHt9LCB2YWx1ZSApOwoJCQkJLy8gQ29weSBldmVyeXRoaW5nIGVsc2UgYnkgcmVmZXJlbmNlCgkJCQl9IGVsc2UgewoJCQkJCXRhcmdldFsga2V5IF0gPSB2YWx1ZTsKCQkJCX0KCQkJfQoJCX0KCX0KCXJldHVybiB0YXJnZXQ7Cn07CgokLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiggbmFtZSwgb2JqZWN0ICkgewoJdmFyIGZ1bGxOYW1lID0gb2JqZWN0LnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZSB8fCBuYW1lOwoJJC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdmFyIGlzTWV0aG9kQ2FsbCA9IHR5cGVvZiBvcHRpb25zID09PSAic3RyaW5nIiwKCQkJYXJncyA9IHdpZGdldF9zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSwKCQkJcmV0dXJuVmFsdWUgPSB0aGlzOwoKCQkvLyBhbGxvdyBtdWx0aXBsZSBoYXNoZXMgdG8gYmUgcGFzc2VkIG9uIGluaXQKCQlvcHRpb25zID0gIWlzTWV0aG9kQ2FsbCAmJiBhcmdzLmxlbmd0aCA/CgkJCSQud2lkZ2V0LmV4dGVuZC5hcHBseSggbnVsbCwgWyBvcHRpb25zIF0uY29uY2F0KGFyZ3MpICkgOgoJCQlvcHRpb25zOwoKCQlpZiAoIGlzTWV0aG9kQ2FsbCApIHsKCQkJdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1ldGhvZFZhbHVlLAoJCQkJCWluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApOwoJCQkJaWYgKCBvcHRpb25zID09PSAiaW5zdGFuY2UiICkgewoJCQkJCXJldHVyblZhbHVlID0gaW5zdGFuY2U7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJaWYgKCAhaW5zdGFuY2UgKSB7CgkJCQkJcmV0dXJuICQuZXJyb3IoICJjYW5ub3QgY2FsbCBtZXRob2RzIG9uICIgKyBuYW1lICsgIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgIiArCgkJCQkJCSJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJyIgKyBvcHRpb25zICsgIiciICk7CgkJCQl9CgkJCQlpZiAoICEkLmlzRnVuY3Rpb24oIGluc3RhbmNlW29wdGlvbnNdICkgfHwgb3B0aW9ucy5jaGFyQXQoIDAgKSA9PT0gIl8iICkgewoJCQkJCXJldHVybiAkLmVycm9yKCAibm8gc3VjaCBtZXRob2QgJyIgKyBvcHRpb25zICsgIicgZm9yICIgKyBuYW1lICsgIiB3aWRnZXQgaW5zdGFuY2UiICk7CgkJCQl9CgkJCQltZXRob2RWYWx1ZSA9IGluc3RhbmNlWyBvcHRpb25zIF0uYXBwbHkoIGluc3RhbmNlLCBhcmdzICk7CgkJCQlpZiAoIG1ldGhvZFZhbHVlICE9PSBpbnN0YW5jZSAmJiBtZXRob2RWYWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQkJCXJldHVyblZhbHVlID0gbWV0aG9kVmFsdWUgJiYgbWV0aG9kVmFsdWUuanF1ZXJ5ID8KCQkJCQkJcmV0dXJuVmFsdWUucHVzaFN0YWNrKCBtZXRob2RWYWx1ZS5nZXQoKSApIDoKCQkJCQkJbWV0aG9kVmFsdWU7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9KTsKCQl9IGVsc2UgewoJCQl0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7CgkJCQlpZiAoIGluc3RhbmNlICkgewoJCQkJCWluc3RhbmNlLm9wdGlvbiggb3B0aW9ucyB8fCB7fSApOwoJCQkJCWlmICggaW5zdGFuY2UuX2luaXQgKSB7CgkJCQkJCWluc3RhbmNlLl9pbml0KCk7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQkkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lLCBuZXcgb2JqZWN0KCBvcHRpb25zLCB0aGlzICkgKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZXR1cm4gcmV0dXJuVmFsdWU7Cgl9Owp9OwoKJC5XaWRnZXQgPSBmdW5jdGlvbiggLyogb3B0aW9ucywgZWxlbWVudCAqLyApIHt9OwokLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnMgPSBbXTsKCiQuV2lkZ2V0LnByb3RvdHlwZSA9IHsKCXdpZGdldE5hbWU6ICJ3aWRnZXQiLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICIiLAoJZGVmYXVsdEVsZW1lbnQ6ICI8ZGl2PiIsCglvcHRpb25zOiB7CgkJZGlzYWJsZWQ6IGZhbHNlLAoKCQkvLyBjYWxsYmFja3MKCQljcmVhdGU6IG51bGwKCX0sCglfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHsKCQllbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdOwoJCXRoaXMuZWxlbWVudCA9ICQoIGVsZW1lbnQgKTsKCQl0aGlzLnV1aWQgPSB3aWRnZXRfdXVpZCsrOwoJCXRoaXMuZXZlbnROYW1lc3BhY2UgPSAiLiIgKyB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQ7CgkJdGhpcy5vcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwKCQkJdGhpcy5vcHRpb25zLAoJCQl0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksCgkJCW9wdGlvbnMgKTsKCgkJdGhpcy5iaW5kaW5ncyA9ICQoKTsKCQl0aGlzLmhvdmVyYWJsZSA9ICQoKTsKCQl0aGlzLmZvY3VzYWJsZSA9ICQoKTsKCgkJaWYgKCBlbGVtZW50ICE9PSB0aGlzICkgewoJCQkkLmRhdGEoIGVsZW1lbnQsIHRoaXMud2lkZ2V0RnVsbE5hbWUsIHRoaXMgKTsKCQkJdGhpcy5fb24oIHRydWUsIHRoaXMuZWxlbWVudCwgewoJCQkJcmVtb3ZlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJaWYgKCBldmVudC50YXJnZXQgPT09IGVsZW1lbnQgKSB7CgkJCQkJCXRoaXMuZGVzdHJveSgpOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJCXRoaXMuZG9jdW1lbnQgPSAkKCBlbGVtZW50LnN0eWxlID8KCQkJCS8vIGVsZW1lbnQgd2l0aGluIHRoZSBkb2N1bWVudAoJCQkJZWxlbWVudC5vd25lckRvY3VtZW50IDoKCQkJCS8vIGVsZW1lbnQgaXMgd2luZG93IG9yIGRvY3VtZW50CgkJCQllbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQgKTsKCQkJdGhpcy53aW5kb3cgPSAkKCB0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3IHx8IHRoaXMuZG9jdW1lbnRbMF0ucGFyZW50V2luZG93ICk7CgkJfQoKCQl0aGlzLl9jcmVhdGUoKTsKCQl0aGlzLl90cmlnZ2VyKCAiY3JlYXRlIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTsKCQl0aGlzLl9pbml0KCk7Cgl9LAoJX2dldENyZWF0ZU9wdGlvbnM6ICQubm9vcCwKCV9nZXRDcmVhdGVFdmVudERhdGE6ICQubm9vcCwKCV9jcmVhdGU6ICQubm9vcCwKCV9pbml0OiAkLm5vb3AsCgoJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5fZGVzdHJveSgpOwoJCS8vIHdlIGNhbiBwcm9iYWJseSByZW1vdmUgdGhlIHVuYmluZCBjYWxscyBpbiAyLjAKCQkvLyBhbGwgZXZlbnQgYmluZGluZ3Mgc2hvdWxkIGdvIHRocm91Z2ggdGhpcy5fb24oKQoJCXRoaXMuZWxlbWVudAoJCQkudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlICkKCQkJLnJlbW92ZURhdGEoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKQoJCQkvLyBzdXBwb3J0OiBqcXVlcnkgPDEuNi4zCgkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMKCQkJLnJlbW92ZURhdGEoICQuY2FtZWxDYXNlKCB0aGlzLndpZGdldEZ1bGxOYW1lICkgKTsKCQl0aGlzLndpZGdldCgpCgkJCS51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtZGlzYWJsZWQiICkKCQkJLnJlbW92ZUNsYXNzKAoJCQkJdGhpcy53aWRnZXRGdWxsTmFtZSArICItZGlzYWJsZWQgIiArCgkJCQkidWktc3RhdGUtZGlzYWJsZWQiICk7CgoJCS8vIGNsZWFuIHVwIGV2ZW50cyBhbmQgc3RhdGVzCgkJdGhpcy5iaW5kaW5ncy51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTsKCQl0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWhvdmVyIiApOwoJCXRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7Cgl9LAoJX2Rlc3Ryb3k6ICQubm9vcCwKCgl3aWRnZXQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmVsZW1lbnQ7Cgl9LAoKCW9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdmFyIG9wdGlvbnMgPSBrZXksCgkJCXBhcnRzLAoJCQljdXJPcHRpb24sCgkJCWk7CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMCApIHsKCQkJLy8gZG9uJ3QgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBoYXNoCgkJCXJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTsKCQl9CgoJCWlmICggdHlwZW9mIGtleSA9PT0gInN0cmluZyIgKSB7CgkJCS8vIGhhbmRsZSBuZXN0ZWQga2V5cywgZS5nLiwgImZvby5iYXIiID0+IHsgZm9vOiB7IGJhcjogX19fIH0gfQoJCQlvcHRpb25zID0ge307CgkJCXBhcnRzID0ga2V5LnNwbGl0KCAiLiIgKTsKCQkJa2V5ID0gcGFydHMuc2hpZnQoKTsKCQkJaWYgKCBwYXJ0cy5sZW5ndGggKSB7CgkJCQljdXJPcHRpb24gPSBvcHRpb25zWyBrZXkgXSA9ICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9uc1sga2V5IF0gKTsKCQkJCWZvciAoIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrICkgewoJCQkJCWN1ck9wdGlvblsgcGFydHNbIGkgXSBdID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gfHwge307CgkJCQkJY3VyT3B0aW9uID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF07CgkJCQl9CgkJCQlrZXkgPSBwYXJ0cy5wb3AoKTsKCQkJCWlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMSApIHsKCQkJCQlyZXR1cm4gY3VyT3B0aW9uWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGN1ck9wdGlvblsga2V5IF07CgkJCQl9CgkJCQljdXJPcHRpb25bIGtleSBdID0gdmFsdWU7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7CgkJCQkJcmV0dXJuIHRoaXMub3B0aW9uc1sga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0aGlzLm9wdGlvbnNbIGtleSBdOwoJCQkJfQoJCQkJb3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsKCQkJfQoJCX0KCgkJdGhpcy5fc2V0T3B0aW9ucyggb3B0aW9ucyApOwoKCQlyZXR1cm4gdGhpczsKCX0sCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdmFyIGtleTsKCgkJZm9yICgga2V5IGluIG9wdGlvbnMgKSB7CgkJCXRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApOwoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlOwoKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy53aWRnZXQoKQoJCQkJLnRvZ2dsZUNsYXNzKCB0aGlzLndpZGdldEZ1bGxOYW1lICsgIi1kaXNhYmxlZCIsICEhdmFsdWUgKTsKCgkJCS8vIElmIHRoZSB3aWRnZXQgaXMgYmVjb21pbmcgZGlzYWJsZWQsIHRoZW4gbm90aGluZyBpcyBpbnRlcmFjdGl2ZQoJCQlpZiAoIHZhbHVlICkgewoJCQkJdGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsKCQkJCXRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7CgkJCX0KCQl9CgoJCXJldHVybiB0aGlzOwoJfSwKCgllbmFibGU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IGZhbHNlIH0pOwoJfSwKCWRpc2FibGU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IHRydWUgfSk7Cgl9LAoKCV9vbjogZnVuY3Rpb24oIHN1cHByZXNzRGlzYWJsZWRDaGVjaywgZWxlbWVudCwgaGFuZGxlcnMgKSB7CgkJdmFyIGRlbGVnYXRlRWxlbWVudCwKCQkJaW5zdGFuY2UgPSB0aGlzOwoKCQkvLyBubyBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgZmxhZywgc2h1ZmZsZSBhcmd1bWVudHMKCQlpZiAoIHR5cGVvZiBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgIT09ICJib29sZWFuIiApIHsKCQkJaGFuZGxlcnMgPSBlbGVtZW50OwoJCQllbGVtZW50ID0gc3VwcHJlc3NEaXNhYmxlZENoZWNrOwoJCQlzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgPSBmYWxzZTsKCQl9CgoJCS8vIG5vIGVsZW1lbnQgYXJndW1lbnQsIHNodWZmbGUgYW5kIHVzZSB0aGlzLmVsZW1lbnQKCQlpZiAoICFoYW5kbGVycyApIHsKCQkJaGFuZGxlcnMgPSBlbGVtZW50OwoJCQllbGVtZW50ID0gdGhpcy5lbGVtZW50OwoJCQlkZWxlZ2F0ZUVsZW1lbnQgPSB0aGlzLndpZGdldCgpOwoJCX0gZWxzZSB7CgkJCWVsZW1lbnQgPSBkZWxlZ2F0ZUVsZW1lbnQgPSAkKCBlbGVtZW50ICk7CgkJCXRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmFkZCggZWxlbWVudCApOwoJCX0KCgkJJC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkgewoJCQlmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7CgkJCQkvLyBhbGxvdyB3aWRnZXRzIHRvIGN1c3RvbWl6ZSB0aGUgZGlzYWJsZWQgaGFuZGxpbmcKCQkJCS8vIC0gZGlzYWJsZWQgYXMgYW4gYXJyYXkgaW5zdGVhZCBvZiBib29sZWFuCgkJCQkvLyAtIGRpc2FibGVkIGNsYXNzIGFzIG1ldGhvZCBmb3IgZGlzYWJsaW5nIGluZGl2aWR1YWwgcGFydHMKCQkJCWlmICggIXN1cHByZXNzRGlzYWJsZWRDaGVjayAmJgoJCQkJCQkoIGluc3RhbmNlLm9wdGlvbnMuZGlzYWJsZWQgPT09IHRydWUgfHwKCQkJCQkJCSQoIHRoaXMgKS5oYXNDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApICkgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJcmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09ICJzdHJpbmciID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKQoJCQkJCS5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApOwoJCQl9CgoJCQkvLyBjb3B5IHRoZSBndWlkIHNvIGRpcmVjdCB1bmJpbmRpbmcgd29ya3MKCQkJaWYgKCB0eXBlb2YgaGFuZGxlciAhPT0gInN0cmluZyIgKSB7CgkJCQloYW5kbGVyUHJveHkuZ3VpZCA9IGhhbmRsZXIuZ3VpZCA9CgkJCQkJaGFuZGxlci5ndWlkIHx8IGhhbmRsZXJQcm94eS5ndWlkIHx8ICQuZ3VpZCsrOwoJCQl9CgoJCQl2YXIgbWF0Y2ggPSBldmVudC5tYXRjaCggL14oW1x3Oi1dKilccyooLiopJC8gKSwKCQkJCWV2ZW50TmFtZSA9IG1hdGNoWzFdICsgaW5zdGFuY2UuZXZlbnROYW1lc3BhY2UsCgkJCQlzZWxlY3RvciA9IG1hdGNoWzJdOwoJCQlpZiAoIHNlbGVjdG9yICkgewoJCQkJZGVsZWdhdGVFbGVtZW50LmRlbGVnYXRlKCBzZWxlY3RvciwgZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTsKCQkJfSBlbHNlIHsKCQkJCWVsZW1lbnQuYmluZCggZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTsKCQkJfQoJCX0pOwoJfSwKCglfb2ZmOiBmdW5jdGlvbiggZWxlbWVudCwgZXZlbnROYW1lICkgewoJCWV2ZW50TmFtZSA9IChldmVudE5hbWUgfHwgIiIpLnNwbGl0KCAiICIgKS5qb2luKCB0aGlzLmV2ZW50TmFtZXNwYWNlICsgIiAiICkgKyB0aGlzLmV2ZW50TmFtZXNwYWNlOwoJCWVsZW1lbnQudW5iaW5kKCBldmVudE5hbWUgKS51bmRlbGVnYXRlKCBldmVudE5hbWUgKTsKCX0sCgoJX2RlbGF5OiBmdW5jdGlvbiggaGFuZGxlciwgZGVsYXkgKSB7CgkJZnVuY3Rpb24gaGFuZGxlclByb3h5KCkgewoJCQlyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gInN0cmluZyIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApCgkJCQkuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTsKCQl9CgkJdmFyIGluc3RhbmNlID0gdGhpczsKCQlyZXR1cm4gc2V0VGltZW91dCggaGFuZGxlclByb3h5LCBkZWxheSB8fCAwICk7Cgl9LAoKCV9ob3ZlcmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCXRoaXMuaG92ZXJhYmxlID0gdGhpcy5ob3ZlcmFibGUuYWRkKCBlbGVtZW50ICk7CgkJdGhpcy5fb24oIGVsZW1lbnQsIHsKCQkJbW91c2VlbnRlcjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJJCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCAidWktc3RhdGUtaG92ZXIiICk7CgkJCX0sCgkJCW1vdXNlbGVhdmU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCSQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWhvdmVyIiApOwoJCQl9CgkJfSk7Cgl9LAoKCV9mb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCXRoaXMuZm9jdXNhYmxlID0gdGhpcy5mb2N1c2FibGUuYWRkKCBlbGVtZW50ICk7CgkJdGhpcy5fb24oIGVsZW1lbnQsIHsKCQkJZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJJCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7CgkJCX0sCgkJCWZvY3Vzb3V0OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJfQoJCX0pOwoJfSwKCglfdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBkYXRhICkgewoJCXZhciBwcm9wLCBvcmlnLAoJCQljYWxsYmFjayA9IHRoaXMub3B0aW9uc1sgdHlwZSBdOwoKCQlkYXRhID0gZGF0YSB8fCB7fTsKCQlldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7CgkJZXZlbnQudHlwZSA9ICggdHlwZSA9PT0gdGhpcy53aWRnZXRFdmVudFByZWZpeCA/CgkJCXR5cGUgOgoJCQl0aGlzLndpZGdldEV2ZW50UHJlZml4ICsgdHlwZSApLnRvTG93ZXJDYXNlKCk7CgkJLy8gdGhlIG9yaWdpbmFsIGV2ZW50IG1heSBjb21lIGZyb20gYW55IGVsZW1lbnQKCQkvLyBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSB0YXJnZXQgb24gdGhlIG5ldyBldmVudAoJCWV2ZW50LnRhcmdldCA9IHRoaXMuZWxlbWVudFsgMCBdOwoKCQkvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50CgkJb3JpZyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7CgkJaWYgKCBvcmlnICkgewoJCQlmb3IgKCBwcm9wIGluIG9yaWcgKSB7CgkJCQlpZiAoICEoIHByb3AgaW4gZXZlbnQgKSApIHsKCQkJCQlldmVudFsgcHJvcCBdID0gb3JpZ1sgcHJvcCBdOwoJCQkJfQoJCQl9CgkJfQoKCQl0aGlzLmVsZW1lbnQudHJpZ2dlciggZXZlbnQsIGRhdGEgKTsKCQlyZXR1cm4gISggJC5pc0Z1bmN0aW9uKCBjYWxsYmFjayApICYmCgkJCWNhbGxiYWNrLmFwcGx5KCB0aGlzLmVsZW1lbnRbMF0sIFsgZXZlbnQgXS5jb25jYXQoIGRhdGEgKSApID09PSBmYWxzZSB8fAoJCQlldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApOwoJfQp9OwoKJC5lYWNoKCB7IHNob3c6ICJmYWRlSW4iLCBoaWRlOiAiZmFkZU91dCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgZGVmYXVsdEVmZmVjdCApIHsKCSQuV2lkZ2V0LnByb3RvdHlwZVsgIl8iICsgbWV0aG9kIF0gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucywgY2FsbGJhY2sgKSB7CgkJaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgKSB7CgkJCW9wdGlvbnMgPSB7IGVmZmVjdDogb3B0aW9ucyB9OwoJCX0KCQl2YXIgaGFzT3B0aW9ucywKCQkJZWZmZWN0TmFtZSA9ICFvcHRpb25zID8KCQkJCW1ldGhvZCA6CgkJCQlvcHRpb25zID09PSB0cnVlIHx8IHR5cGVvZiBvcHRpb25zID09PSAibnVtYmVyIiA/CgkJCQkJZGVmYXVsdEVmZmVjdCA6CgkJCQkJb3B0aW9ucy5lZmZlY3QgfHwgZGVmYXVsdEVmZmVjdDsKCQlvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCQlpZiAoIHR5cGVvZiBvcHRpb25zID09PSAibnVtYmVyIiApIHsKCQkJb3B0aW9ucyA9IHsgZHVyYXRpb246IG9wdGlvbnMgfTsKCQl9CgkJaGFzT3B0aW9ucyA9ICEkLmlzRW1wdHlPYmplY3QoIG9wdGlvbnMgKTsKCQlvcHRpb25zLmNvbXBsZXRlID0gY2FsbGJhY2s7CgkJaWYgKCBvcHRpb25zLmRlbGF5ICkgewoJCQllbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7CgkJfQoJCWlmICggaGFzT3B0aW9ucyAmJiAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdICkgewoJCQllbGVtZW50WyBtZXRob2QgXSggb3B0aW9ucyApOwoJCX0gZWxzZSBpZiAoIGVmZmVjdE5hbWUgIT09IG1ldGhvZCAmJiBlbGVtZW50WyBlZmZlY3ROYW1lIF0gKSB7CgkJCWVsZW1lbnRbIGVmZmVjdE5hbWUgXSggb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrICk7CgkJfSBlbHNlIHsKCQkJZWxlbWVudC5xdWV1ZShmdW5jdGlvbiggbmV4dCApIHsKCQkJCSQoIHRoaXMgKVsgbWV0aG9kIF0oKTsKCQkJCWlmICggY2FsbGJhY2sgKSB7CgkJCQkJY2FsbGJhY2suY2FsbCggZWxlbWVudFsgMCBdICk7CgkJCQl9CgkJCQluZXh0KCk7CgkJCX0pOwoJCX0KCX07Cn0pOwoKdmFyIHdpZGdldCA9ICQud2lkZ2V0OwoKCi8qIQogKiBqUXVlcnkgVUkgTW91c2UgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vbW91c2UvCiAqLwoKCnZhciBtb3VzZUhhbmRsZWQgPSBmYWxzZTsKJCggZG9jdW1lbnQgKS5tb3VzZXVwKCBmdW5jdGlvbigpIHsKCW1vdXNlSGFuZGxlZCA9IGZhbHNlOwp9KTsKCnZhciBtb3VzZSA9ICQud2lkZ2V0KCJ1aS5tb3VzZSIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJb3B0aW9uczogewoJCWNhbmNlbDogImlucHV0LHRleHRhcmVhLGJ1dHRvbixzZWxlY3Qsb3B0aW9uIiwKCQlkaXN0YW5jZTogMSwKCQlkZWxheTogMAoJfSwKCV9tb3VzZUluaXQ6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gdGhpczsKCgkJdGhpcy5lbGVtZW50CgkJCS5iaW5kKCJtb3VzZWRvd24uIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXJldHVybiB0aGF0Ll9tb3VzZURvd24oZXZlbnQpOwoJCQl9KQoJCQkuYmluZCgiY2xpY2suIiArIHRoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmICh0cnVlID09PSAkLmRhdGEoZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAiLnByZXZlbnRDbGlja0V2ZW50IikpIHsKCQkJCQkkLnJlbW92ZURhdGEoZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAiLnByZXZlbnRDbGlja0V2ZW50Iik7CgkJCQkJZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9KTsKCgkJdGhpcy5zdGFydGVkID0gZmFsc2U7Cgl9LAoKCS8vIFRPRE86IG1ha2Ugc3VyZSBkZXN0cm95aW5nIG9uZSBpbnN0YW5jZSBvZiBtb3VzZSBkb2Vzbid0IG1lc3Mgd2l0aAoJLy8gb3RoZXIgaW5zdGFuY2VzIG9mIG1vdXNlCglfbW91c2VEZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQudW5iaW5kKCIuIiArIHRoaXMud2lkZ2V0TmFtZSk7CgkJaWYgKCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSApIHsKCQkJdGhpcy5kb2N1bWVudAoJCQkJLnVuYmluZCgibW91c2Vtb3ZlLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKQoJCQkJLnVuYmluZCgibW91c2V1cC4iICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZVVwRGVsZWdhdGUpOwoJCX0KCX0sCgoJX21vdXNlRG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkvLyBkb24ndCBsZXQgbW9yZSB0aGFuIG9uZSB3aWRnZXQgaGFuZGxlIG1vdXNlU3RhcnQKCQlpZiAoIG1vdXNlSGFuZGxlZCApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gd2UgbWF5IGhhdmUgbWlzc2VkIG1vdXNldXAgKG91dCBvZiB3aW5kb3cpCgkJKHRoaXMuX21vdXNlU3RhcnRlZCAmJiB0aGlzLl9tb3VzZVVwKGV2ZW50KSk7CgoJCXRoaXMuX21vdXNlRG93bkV2ZW50ID0gZXZlbnQ7CgoJCXZhciB0aGF0ID0gdGhpcywKCQkJYnRuSXNMZWZ0ID0gKGV2ZW50LndoaWNoID09PSAxKSwKCQkJLy8gZXZlbnQudGFyZ2V0Lm5vZGVOYW1lIHdvcmtzIGFyb3VuZCBhIGJ1ZyBpbiBJRSA4IHdpdGgKCQkJLy8gZGlzYWJsZWQgaW5wdXRzICgjNzYyMCkKCQkJZWxJc0NhbmNlbCA9ICh0eXBlb2YgdGhpcy5vcHRpb25zLmNhbmNlbCA9PT0gInN0cmluZyIgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID8gJChldmVudC50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoIDogZmFsc2UpOwoJCWlmICghYnRuSXNMZWZ0IHx8IGVsSXNDYW5jZWwgfHwgIXRoaXMuX21vdXNlQ2FwdHVyZShldmVudCkpIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQl0aGlzLm1vdXNlRGVsYXlNZXQgPSAhdGhpcy5vcHRpb25zLmRlbGF5OwoJCWlmICghdGhpcy5tb3VzZURlbGF5TWV0KSB7CgkJCXRoaXMuX21vdXNlRGVsYXlUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQl0aGF0Lm1vdXNlRGVsYXlNZXQgPSB0cnVlOwoJCQl9LCB0aGlzLm9wdGlvbnMuZGVsYXkpOwoJCX0KCgkJaWYgKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoZXZlbnQpICYmIHRoaXMuX21vdXNlRGVsYXlNZXQoZXZlbnQpKSB7CgkJCXRoaXMuX21vdXNlU3RhcnRlZCA9ICh0aGlzLl9tb3VzZVN0YXJ0KGV2ZW50KSAhPT0gZmFsc2UpOwoJCQlpZiAoIXRoaXMuX21vdXNlU3RhcnRlZCkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoKCQkvLyBDbGljayBldmVudCBtYXkgbmV2ZXIgaGF2ZSBmaXJlZCAoR2Vja28gJiBPcGVyYSkKCQlpZiAodHJ1ZSA9PT0gJC5kYXRhKGV2ZW50LnRhcmdldCwgdGhpcy53aWRnZXROYW1lICsgIi5wcmV2ZW50Q2xpY2tFdmVudCIpKSB7CgkJCSQucmVtb3ZlRGF0YShldmVudC50YXJnZXQsIHRoaXMud2lkZ2V0TmFtZSArICIucHJldmVudENsaWNrRXZlbnQiKTsKCQl9CgoJCS8vIHRoZXNlIGRlbGVnYXRlcyBhcmUgcmVxdWlyZWQgdG8ga2VlcCBjb250ZXh0CgkJdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgPSBmdW5jdGlvbihldmVudCkgewoJCQlyZXR1cm4gdGhhdC5fbW91c2VNb3ZlKGV2ZW50KTsKCQl9OwoJCXRoaXMuX21vdXNlVXBEZWxlZ2F0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXJldHVybiB0aGF0Ll9tb3VzZVVwKGV2ZW50KTsKCQl9OwoKCQl0aGlzLmRvY3VtZW50CgkJCS5iaW5kKCAibW91c2Vtb3ZlLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlICkKCQkJLmJpbmQoICJtb3VzZXVwLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApOwoKCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQltb3VzZUhhbmRsZWQgPSB0cnVlOwoJCXJldHVybiB0cnVlOwoJfSwKCglfbW91c2VNb3ZlOiBmdW5jdGlvbihldmVudCkgewoJCS8vIElFIG1vdXNldXAgY2hlY2sgLSBtb3VzZXVwIGhhcHBlbmVkIHdoZW4gbW91c2Ugd2FzIG91dCBvZiB3aW5kb3cKCQlpZiAoJC51aS5pZSAmJiAoICFkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDwgOSApICYmICFldmVudC5idXR0b24pIHsKCQkJcmV0dXJuIHRoaXMuX21vdXNlVXAoZXZlbnQpOwoKCQkvLyBJZnJhbWUgbW91c2V1cCBjaGVjayAtIG1vdXNldXAgb2NjdXJyZWQgaW4gYW5vdGhlciBkb2N1bWVudAoJCX0gZWxzZSBpZiAoICFldmVudC53aGljaCApIHsKCQkJcmV0dXJuIHRoaXMuX21vdXNlVXAoIGV2ZW50ICk7CgkJfQoKCQlpZiAodGhpcy5fbW91c2VTdGFydGVkKSB7CgkJCXRoaXMuX21vdXNlRHJhZyhldmVudCk7CgkJCXJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCgkJaWYgKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoZXZlbnQpICYmIHRoaXMuX21vdXNlRGVsYXlNZXQoZXZlbnQpKSB7CgkJCXRoaXMuX21vdXNlU3RhcnRlZCA9CgkJCQkodGhpcy5fbW91c2VTdGFydCh0aGlzLl9tb3VzZURvd25FdmVudCwgZXZlbnQpICE9PSBmYWxzZSk7CgkJCSh0aGlzLl9tb3VzZVN0YXJ0ZWQgPyB0aGlzLl9tb3VzZURyYWcoZXZlbnQpIDogdGhpcy5fbW91c2VVcChldmVudCkpOwoJCX0KCgkJcmV0dXJuICF0aGlzLl9tb3VzZVN0YXJ0ZWQ7Cgl9LAoKCV9tb3VzZVVwOiBmdW5jdGlvbihldmVudCkgewoJCXRoaXMuZG9jdW1lbnQKCQkJLnVuYmluZCggIm1vdXNlbW92ZS4iICsgdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSApCgkJCS51bmJpbmQoICJtb3VzZXVwLiIgKyB0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSApOwoKCQlpZiAodGhpcy5fbW91c2VTdGFydGVkKSB7CgkJCXRoaXMuX21vdXNlU3RhcnRlZCA9IGZhbHNlOwoKCQkJaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fbW91c2VEb3duRXZlbnQudGFyZ2V0KSB7CgkJCQkkLmRhdGEoZXZlbnQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyAiLnByZXZlbnRDbGlja0V2ZW50IiwgdHJ1ZSk7CgkJCX0KCgkJCXRoaXMuX21vdXNlU3RvcChldmVudCk7CgkJfQoKCQltb3VzZUhhbmRsZWQgPSBmYWxzZTsKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZURpc3RhbmNlTWV0OiBmdW5jdGlvbihldmVudCkgewoJCXJldHVybiAoTWF0aC5tYXgoCgkJCQlNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWCAtIGV2ZW50LnBhZ2VYKSwKCQkJCU1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VZIC0gZXZlbnQucGFnZVkpCgkJCSkgPj0gdGhpcy5vcHRpb25zLmRpc3RhbmNlCgkJKTsKCX0sCgoJX21vdXNlRGVsYXlNZXQ6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7CgkJcmV0dXJuIHRoaXMubW91c2VEZWxheU1ldDsKCX0sCgoJLy8gVGhlc2UgYXJlIHBsYWNlaG9sZGVyIG1ldGhvZHMsIHRvIGJlIG92ZXJyaWRlbiBieSBleHRlbmRpbmcgcGx1Z2luCglfbW91c2VTdGFydDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHt9LAoJX21vdXNlRHJhZzogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHt9LAoJX21vdXNlU3RvcDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHt9LAoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHsgcmV0dXJuIHRydWU7IH0KfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBQb3NpdGlvbiAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wb3NpdGlvbi8KICovCgooZnVuY3Rpb24oKSB7CgokLnVpID0gJC51aSB8fCB7fTsKCnZhciBjYWNoZWRTY3JvbGxiYXJXaWR0aCwgc3VwcG9ydHNPZmZzZXRGcmFjdGlvbnMsCgltYXggPSBNYXRoLm1heCwKCWFicyA9IE1hdGguYWJzLAoJcm91bmQgPSBNYXRoLnJvdW5kLAoJcmhvcml6b250YWwgPSAvbGVmdHxjZW50ZXJ8cmlnaHQvLAoJcnZlcnRpY2FsID0gL3RvcHxjZW50ZXJ8Ym90dG9tLywKCXJvZmZzZXQgPSAvW1wrXC1dXGQrKFwuW1xkXSspPyU/LywKCXJwb3NpdGlvbiA9IC9eXHcrLywKCXJwZXJjZW50ID0gLyUkLywKCV9wb3NpdGlvbiA9ICQuZm4ucG9zaXRpb247CgpmdW5jdGlvbiBnZXRPZmZzZXRzKCBvZmZzZXRzLCB3aWR0aCwgaGVpZ2h0ICkgewoJcmV0dXJuIFsKCQlwYXJzZUZsb2F0KCBvZmZzZXRzWyAwIF0gKSAqICggcnBlcmNlbnQudGVzdCggb2Zmc2V0c1sgMCBdICkgPyB3aWR0aCAvIDEwMCA6IDEgKSwKCQlwYXJzZUZsb2F0KCBvZmZzZXRzWyAxIF0gKSAqICggcnBlcmNlbnQudGVzdCggb2Zmc2V0c1sgMSBdICkgPyBoZWlnaHQgLyAxMDAgOiAxICkKCV07Cn0KCmZ1bmN0aW9uIHBhcnNlQ3NzKCBlbGVtZW50LCBwcm9wZXJ0eSApIHsKCXJldHVybiBwYXJzZUludCggJC5jc3MoIGVsZW1lbnQsIHByb3BlcnR5ICksIDEwICkgfHwgMDsKfQoKZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyggZWxlbSApIHsKCXZhciByYXcgPSBlbGVtWzBdOwoJaWYgKCByYXcubm9kZVR5cGUgPT09IDkgKSB7CgkJcmV0dXJuIHsKCQkJd2lkdGg6IGVsZW0ud2lkdGgoKSwKCQkJaGVpZ2h0OiBlbGVtLmhlaWdodCgpLAoJCQlvZmZzZXQ6IHsgdG9wOiAwLCBsZWZ0OiAwIH0KCQl9OwoJfQoJaWYgKCAkLmlzV2luZG93KCByYXcgKSApIHsKCQlyZXR1cm4gewoJCQl3aWR0aDogZWxlbS53aWR0aCgpLAoJCQloZWlnaHQ6IGVsZW0uaGVpZ2h0KCksCgkJCW9mZnNldDogeyB0b3A6IGVsZW0uc2Nyb2xsVG9wKCksIGxlZnQ6IGVsZW0uc2Nyb2xsTGVmdCgpIH0KCQl9OwoJfQoJaWYgKCByYXcucHJldmVudERlZmF1bHQgKSB7CgkJcmV0dXJuIHsKCQkJd2lkdGg6IDAsCgkJCWhlaWdodDogMCwKCQkJb2Zmc2V0OiB7IHRvcDogcmF3LnBhZ2VZLCBsZWZ0OiByYXcucGFnZVggfQoJCX07Cgl9CglyZXR1cm4gewoJCXdpZHRoOiBlbGVtLm91dGVyV2lkdGgoKSwKCQloZWlnaHQ6IGVsZW0ub3V0ZXJIZWlnaHQoKSwKCQlvZmZzZXQ6IGVsZW0ub2Zmc2V0KCkKCX07Cn0KCiQucG9zaXRpb24gPSB7CglzY3JvbGxiYXJXaWR0aDogZnVuY3Rpb24oKSB7CgkJaWYgKCBjYWNoZWRTY3JvbGxiYXJXaWR0aCAhPT0gdW5kZWZpbmVkICkgewoJCQlyZXR1cm4gY2FjaGVkU2Nyb2xsYmFyV2lkdGg7CgkJfQoJCXZhciB3MSwgdzIsCgkJCWRpdiA9ICQoICI8ZGl2IHN0eWxlPSdkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6aGlkZGVuOyc+PGRpdiBzdHlsZT0naGVpZ2h0OjEwMHB4O3dpZHRoOmF1dG87Jz48L2Rpdj48L2Rpdj4iICksCgkJCWlubmVyRGl2ID0gZGl2LmNoaWxkcmVuKClbMF07CgoJCSQoICJib2R5IiApLmFwcGVuZCggZGl2ICk7CgkJdzEgPSBpbm5lckRpdi5vZmZzZXRXaWR0aDsKCQlkaXYuY3NzKCAib3ZlcmZsb3ciLCAic2Nyb2xsIiApOwoKCQl3MiA9IGlubmVyRGl2Lm9mZnNldFdpZHRoOwoKCQlpZiAoIHcxID09PSB3MiApIHsKCQkJdzIgPSBkaXZbMF0uY2xpZW50V2lkdGg7CgkJfQoKCQlkaXYucmVtb3ZlKCk7CgoJCXJldHVybiAoY2FjaGVkU2Nyb2xsYmFyV2lkdGggPSB3MSAtIHcyKTsKCX0sCglnZXRTY3JvbGxJbmZvOiBmdW5jdGlvbiggd2l0aGluICkgewoJCXZhciBvdmVyZmxvd1ggPSB3aXRoaW4uaXNXaW5kb3cgfHwgd2l0aGluLmlzRG9jdW1lbnQgPyAiIiA6CgkJCQl3aXRoaW4uZWxlbWVudC5jc3MoICJvdmVyZmxvdy14IiApLAoJCQlvdmVyZmxvd1kgPSB3aXRoaW4uaXNXaW5kb3cgfHwgd2l0aGluLmlzRG9jdW1lbnQgPyAiIiA6CgkJCQl3aXRoaW4uZWxlbWVudC5jc3MoICJvdmVyZmxvdy15IiApLAoJCQloYXNPdmVyZmxvd1ggPSBvdmVyZmxvd1ggPT09ICJzY3JvbGwiIHx8CgkJCQkoIG92ZXJmbG93WCA9PT0gImF1dG8iICYmIHdpdGhpbi53aWR0aCA8IHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbFdpZHRoICksCgkJCWhhc092ZXJmbG93WSA9IG92ZXJmbG93WSA9PT0gInNjcm9sbCIgfHwKCQkJCSggb3ZlcmZsb3dZID09PSAiYXV0byIgJiYgd2l0aGluLmhlaWdodCA8IHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbEhlaWdodCApOwoJCXJldHVybiB7CgkJCXdpZHRoOiBoYXNPdmVyZmxvd1kgPyAkLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCkgOiAwLAoJCQloZWlnaHQ6IGhhc092ZXJmbG93WCA/ICQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDAKCQl9OwoJfSwKCWdldFdpdGhpbkluZm86IGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCXZhciB3aXRoaW5FbGVtZW50ID0gJCggZWxlbWVudCB8fCB3aW5kb3cgKSwKCQkJaXNXaW5kb3cgPSAkLmlzV2luZG93KCB3aXRoaW5FbGVtZW50WzBdICksCgkJCWlzRG9jdW1lbnQgPSAhIXdpdGhpbkVsZW1lbnRbIDAgXSAmJiB3aXRoaW5FbGVtZW50WyAwIF0ubm9kZVR5cGUgPT09IDk7CgkJcmV0dXJuIHsKCQkJZWxlbWVudDogd2l0aGluRWxlbWVudCwKCQkJaXNXaW5kb3c6IGlzV2luZG93LAoJCQlpc0RvY3VtZW50OiBpc0RvY3VtZW50LAoJCQlvZmZzZXQ6IHdpdGhpbkVsZW1lbnQub2Zmc2V0KCkgfHwgeyBsZWZ0OiAwLCB0b3A6IDAgfSwKCQkJc2Nyb2xsTGVmdDogd2l0aGluRWxlbWVudC5zY3JvbGxMZWZ0KCksCgkJCXNjcm9sbFRvcDogd2l0aGluRWxlbWVudC5zY3JvbGxUb3AoKSwKCgkJCS8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYueAoJCQkvLyBqUXVlcnkgMS42IGRvZXNuJ3Qgc3VwcG9ydCAub3V0ZXJXaWR0aC9IZWlnaHQoKSBvbiBkb2N1bWVudHMgb3Igd2luZG93cwoJCQl3aWR0aDogaXNXaW5kb3cgfHwgaXNEb2N1bWVudCA/IHdpdGhpbkVsZW1lbnQud2lkdGgoKSA6IHdpdGhpbkVsZW1lbnQub3V0ZXJXaWR0aCgpLAoJCQloZWlnaHQ6IGlzV2luZG93IHx8IGlzRG9jdW1lbnQgPyB3aXRoaW5FbGVtZW50LmhlaWdodCgpIDogd2l0aGluRWxlbWVudC5vdXRlckhlaWdodCgpCgkJfTsKCX0KfTsKCiQuZm4ucG9zaXRpb24gPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCWlmICggIW9wdGlvbnMgfHwgIW9wdGlvbnMub2YgKSB7CgkJcmV0dXJuIF9wb3NpdGlvbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7Cgl9CgoJLy8gbWFrZSBhIGNvcHksIHdlIGRvbid0IHdhbnQgdG8gbW9kaWZ5IGFyZ3VtZW50cwoJb3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApOwoKCXZhciBhdE9mZnNldCwgdGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCwgdGFyZ2V0T2Zmc2V0LCBiYXNlUG9zaXRpb24sIGRpbWVuc2lvbnMsCgkJdGFyZ2V0ID0gJCggb3B0aW9ucy5vZiApLAoJCXdpdGhpbiA9ICQucG9zaXRpb24uZ2V0V2l0aGluSW5mbyggb3B0aW9ucy53aXRoaW4gKSwKCQlzY3JvbGxJbmZvID0gJC5wb3NpdGlvbi5nZXRTY3JvbGxJbmZvKCB3aXRoaW4gKSwKCQljb2xsaXNpb24gPSAoIG9wdGlvbnMuY29sbGlzaW9uIHx8ICJmbGlwIiApLnNwbGl0KCAiICIgKSwKCQlvZmZzZXRzID0ge307CgoJZGltZW5zaW9ucyA9IGdldERpbWVuc2lvbnMoIHRhcmdldCApOwoJaWYgKCB0YXJnZXRbMF0ucHJldmVudERlZmF1bHQgKSB7CgkJLy8gZm9yY2UgbGVmdCB0b3AgdG8gYWxsb3cgZmxpcHBpbmcKCQlvcHRpb25zLmF0ID0gImxlZnQgdG9wIjsKCX0KCXRhcmdldFdpZHRoID0gZGltZW5zaW9ucy53aWR0aDsKCXRhcmdldEhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0OwoJdGFyZ2V0T2Zmc2V0ID0gZGltZW5zaW9ucy5vZmZzZXQ7CgkvLyBjbG9uZSB0byByZXVzZSBvcmlnaW5hbCB0YXJnZXRPZmZzZXQgbGF0ZXIKCWJhc2VQb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgdGFyZ2V0T2Zmc2V0ICk7CgoJLy8gZm9yY2UgbXkgYW5kIGF0IHRvIGhhdmUgdmFsaWQgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgcG9zaXRpb25zCgkvLyBpZiBhIHZhbHVlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2VudGVyCgkkLmVhY2goIFsgIm15IiwgImF0IiBdLCBmdW5jdGlvbigpIHsKCQl2YXIgcG9zID0gKCBvcHRpb25zWyB0aGlzIF0gfHwgIiIgKS5zcGxpdCggIiAiICksCgkJCWhvcml6b250YWxPZmZzZXQsCgkJCXZlcnRpY2FsT2Zmc2V0OwoKCQlpZiAoIHBvcy5sZW5ndGggPT09IDEpIHsKCQkJcG9zID0gcmhvcml6b250YWwudGVzdCggcG9zWyAwIF0gKSA/CgkJCQlwb3MuY29uY2F0KCBbICJjZW50ZXIiIF0gKSA6CgkJCQlydmVydGljYWwudGVzdCggcG9zWyAwIF0gKSA/CgkJCQkJWyAiY2VudGVyIiBdLmNvbmNhdCggcG9zICkgOgoJCQkJCVsgImNlbnRlciIsICJjZW50ZXIiIF07CgkJfQoJCXBvc1sgMCBdID0gcmhvcml6b250YWwudGVzdCggcG9zWyAwIF0gKSA/IHBvc1sgMCBdIDogImNlbnRlciI7CgkJcG9zWyAxIF0gPSBydmVydGljYWwudGVzdCggcG9zWyAxIF0gKSA/IHBvc1sgMSBdIDogImNlbnRlciI7CgoJCS8vIGNhbGN1bGF0ZSBvZmZzZXRzCgkJaG9yaXpvbnRhbE9mZnNldCA9IHJvZmZzZXQuZXhlYyggcG9zWyAwIF0gKTsKCQl2ZXJ0aWNhbE9mZnNldCA9IHJvZmZzZXQuZXhlYyggcG9zWyAxIF0gKTsKCQlvZmZzZXRzWyB0aGlzIF0gPSBbCgkJCWhvcml6b250YWxPZmZzZXQgPyBob3Jpem9udGFsT2Zmc2V0WyAwIF0gOiAwLAoJCQl2ZXJ0aWNhbE9mZnNldCA/IHZlcnRpY2FsT2Zmc2V0WyAwIF0gOiAwCgkJXTsKCgkJLy8gcmVkdWNlIHRvIGp1c3QgdGhlIHBvc2l0aW9ucyB3aXRob3V0IHRoZSBvZmZzZXRzCgkJb3B0aW9uc1sgdGhpcyBdID0gWwoJCQlycG9zaXRpb24uZXhlYyggcG9zWyAwIF0gKVsgMCBdLAoJCQlycG9zaXRpb24uZXhlYyggcG9zWyAxIF0gKVsgMCBdCgkJXTsKCX0pOwoKCS8vIG5vcm1hbGl6ZSBjb2xsaXNpb24gb3B0aW9uCglpZiAoIGNvbGxpc2lvbi5sZW5ndGggPT09IDEgKSB7CgkJY29sbGlzaW9uWyAxIF0gPSBjb2xsaXNpb25bIDAgXTsKCX0KCglpZiAoIG9wdGlvbnMuYXRbIDAgXSA9PT0gInJpZ2h0IiApIHsKCQliYXNlUG9zaXRpb24ubGVmdCArPSB0YXJnZXRXaWR0aDsKCX0gZWxzZSBpZiAoIG9wdGlvbnMuYXRbIDAgXSA9PT0gImNlbnRlciIgKSB7CgkJYmFzZVBvc2l0aW9uLmxlZnQgKz0gdGFyZ2V0V2lkdGggLyAyOwoJfQoKCWlmICggb3B0aW9ucy5hdFsgMSBdID09PSAiYm90dG9tIiApIHsKCQliYXNlUG9zaXRpb24udG9wICs9IHRhcmdldEhlaWdodDsKCX0gZWxzZSBpZiAoIG9wdGlvbnMuYXRbIDEgXSA9PT0gImNlbnRlciIgKSB7CgkJYmFzZVBvc2l0aW9uLnRvcCArPSB0YXJnZXRIZWlnaHQgLyAyOwoJfQoKCWF0T2Zmc2V0ID0gZ2V0T2Zmc2V0cyggb2Zmc2V0cy5hdCwgdGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCApOwoJYmFzZVBvc2l0aW9uLmxlZnQgKz0gYXRPZmZzZXRbIDAgXTsKCWJhc2VQb3NpdGlvbi50b3AgKz0gYXRPZmZzZXRbIDEgXTsKCglyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCXZhciBjb2xsaXNpb25Qb3NpdGlvbiwgdXNpbmcsCgkJCWVsZW0gPSAkKCB0aGlzICksCgkJCWVsZW1XaWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpLAoJCQllbGVtSGVpZ2h0ID0gZWxlbS5vdXRlckhlaWdodCgpLAoJCQltYXJnaW5MZWZ0ID0gcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5MZWZ0IiApLAoJCQltYXJnaW5Ub3AgPSBwYXJzZUNzcyggdGhpcywgIm1hcmdpblRvcCIgKSwKCQkJY29sbGlzaW9uV2lkdGggPSBlbGVtV2lkdGggKyBtYXJnaW5MZWZ0ICsgcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5SaWdodCIgKSArIHNjcm9sbEluZm8ud2lkdGgsCgkJCWNvbGxpc2lvbkhlaWdodCA9IGVsZW1IZWlnaHQgKyBtYXJnaW5Ub3AgKyBwYXJzZUNzcyggdGhpcywgIm1hcmdpbkJvdHRvbSIgKSArIHNjcm9sbEluZm8uaGVpZ2h0LAoJCQlwb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgYmFzZVBvc2l0aW9uICksCgkJCW15T2Zmc2V0ID0gZ2V0T2Zmc2V0cyggb2Zmc2V0cy5teSwgZWxlbS5vdXRlcldpZHRoKCksIGVsZW0ub3V0ZXJIZWlnaHQoKSApOwoKCQlpZiAoIG9wdGlvbnMubXlbIDAgXSA9PT0gInJpZ2h0IiApIHsKCQkJcG9zaXRpb24ubGVmdCAtPSBlbGVtV2lkdGg7CgkJfSBlbHNlIGlmICggb3B0aW9ucy5teVsgMCBdID09PSAiY2VudGVyIiApIHsKCQkJcG9zaXRpb24ubGVmdCAtPSBlbGVtV2lkdGggLyAyOwoJCX0KCgkJaWYgKCBvcHRpb25zLm15WyAxIF0gPT09ICJib3R0b20iICkgewoJCQlwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodDsKCQl9IGVsc2UgaWYgKCBvcHRpb25zLm15WyAxIF0gPT09ICJjZW50ZXIiICkgewoJCQlwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodCAvIDI7CgkJfQoKCQlwb3NpdGlvbi5sZWZ0ICs9IG15T2Zmc2V0WyAwIF07CgkJcG9zaXRpb24udG9wICs9IG15T2Zmc2V0WyAxIF07CgoJCS8vIGlmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBmcmFjdGlvbnMsIHRoZW4gcm91bmQgZm9yIGNvbnNpc3RlbnQgcmVzdWx0cwoJCWlmICggIXN1cHBvcnRzT2Zmc2V0RnJhY3Rpb25zICkgewoJCQlwb3NpdGlvbi5sZWZ0ID0gcm91bmQoIHBvc2l0aW9uLmxlZnQgKTsKCQkJcG9zaXRpb24udG9wID0gcm91bmQoIHBvc2l0aW9uLnRvcCApOwoJCX0KCgkJY29sbGlzaW9uUG9zaXRpb24gPSB7CgkJCW1hcmdpbkxlZnQ6IG1hcmdpbkxlZnQsCgkJCW1hcmdpblRvcDogbWFyZ2luVG9wCgkJfTsKCgkJJC5lYWNoKCBbICJsZWZ0IiwgInRvcCIgXSwgZnVuY3Rpb24oIGksIGRpciApIHsKCQkJaWYgKCAkLnVpLnBvc2l0aW9uWyBjb2xsaXNpb25bIGkgXSBdICkgewoJCQkJJC51aS5wb3NpdGlvblsgY29sbGlzaW9uWyBpIF0gXVsgZGlyIF0oIHBvc2l0aW9uLCB7CgkJCQkJdGFyZ2V0V2lkdGg6IHRhcmdldFdpZHRoLAoJCQkJCXRhcmdldEhlaWdodDogdGFyZ2V0SGVpZ2h0LAoJCQkJCWVsZW1XaWR0aDogZWxlbVdpZHRoLAoJCQkJCWVsZW1IZWlnaHQ6IGVsZW1IZWlnaHQsCgkJCQkJY29sbGlzaW9uUG9zaXRpb246IGNvbGxpc2lvblBvc2l0aW9uLAoJCQkJCWNvbGxpc2lvbldpZHRoOiBjb2xsaXNpb25XaWR0aCwKCQkJCQljb2xsaXNpb25IZWlnaHQ6IGNvbGxpc2lvbkhlaWdodCwKCQkJCQlvZmZzZXQ6IFsgYXRPZmZzZXRbIDAgXSArIG15T2Zmc2V0WyAwIF0sIGF0T2Zmc2V0IFsgMSBdICsgbXlPZmZzZXRbIDEgXSBdLAoJCQkJCW15OiBvcHRpb25zLm15LAoJCQkJCWF0OiBvcHRpb25zLmF0LAoJCQkJCXdpdGhpbjogd2l0aGluLAoJCQkJCWVsZW06IGVsZW0KCQkJCX0pOwoJCQl9CgkJfSk7CgoJCWlmICggb3B0aW9ucy51c2luZyApIHsKCQkJLy8gYWRkcyBmZWVkYmFjayBhcyBzZWNvbmQgYXJndW1lbnQgdG8gdXNpbmcgY2FsbGJhY2ssIGlmIHByZXNlbnQKCQkJdXNpbmcgPSBmdW5jdGlvbiggcHJvcHMgKSB7CgkJCQl2YXIgbGVmdCA9IHRhcmdldE9mZnNldC5sZWZ0IC0gcG9zaXRpb24ubGVmdCwKCQkJCQlyaWdodCA9IGxlZnQgKyB0YXJnZXRXaWR0aCAtIGVsZW1XaWR0aCwKCQkJCQl0b3AgPSB0YXJnZXRPZmZzZXQudG9wIC0gcG9zaXRpb24udG9wLAoJCQkJCWJvdHRvbSA9IHRvcCArIHRhcmdldEhlaWdodCAtIGVsZW1IZWlnaHQsCgkJCQkJZmVlZGJhY2sgPSB7CgkJCQkJCXRhcmdldDogewoJCQkJCQkJZWxlbWVudDogdGFyZ2V0LAoJCQkJCQkJbGVmdDogdGFyZ2V0T2Zmc2V0LmxlZnQsCgkJCQkJCQl0b3A6IHRhcmdldE9mZnNldC50b3AsCgkJCQkJCQl3aWR0aDogdGFyZ2V0V2lkdGgsCgkJCQkJCQloZWlnaHQ6IHRhcmdldEhlaWdodAoJCQkJCQl9LAoJCQkJCQllbGVtZW50OiB7CgkJCQkJCQllbGVtZW50OiBlbGVtLAoJCQkJCQkJbGVmdDogcG9zaXRpb24ubGVmdCwKCQkJCQkJCXRvcDogcG9zaXRpb24udG9wLAoJCQkJCQkJd2lkdGg6IGVsZW1XaWR0aCwKCQkJCQkJCWhlaWdodDogZWxlbUhlaWdodAoJCQkJCQl9LAoJCQkJCQlob3Jpem9udGFsOiByaWdodCA8IDAgPyAibGVmdCIgOiBsZWZ0ID4gMCA/ICJyaWdodCIgOiAiY2VudGVyIiwKCQkJCQkJdmVydGljYWw6IGJvdHRvbSA8IDAgPyAidG9wIiA6IHRvcCA+IDAgPyAiYm90dG9tIiA6ICJtaWRkbGUiCgkJCQkJfTsKCQkJCWlmICggdGFyZ2V0V2lkdGggPCBlbGVtV2lkdGggJiYgYWJzKCBsZWZ0ICsgcmlnaHQgKSA8IHRhcmdldFdpZHRoICkgewoJCQkJCWZlZWRiYWNrLmhvcml6b250YWwgPSAiY2VudGVyIjsKCQkJCX0KCQkJCWlmICggdGFyZ2V0SGVpZ2h0IDwgZWxlbUhlaWdodCAmJiBhYnMoIHRvcCArIGJvdHRvbSApIDwgdGFyZ2V0SGVpZ2h0ICkgewoJCQkJCWZlZWRiYWNrLnZlcnRpY2FsID0gIm1pZGRsZSI7CgkJCQl9CgkJCQlpZiAoIG1heCggYWJzKCBsZWZ0ICksIGFicyggcmlnaHQgKSApID4gbWF4KCBhYnMoIHRvcCApLCBhYnMoIGJvdHRvbSApICkgKSB7CgkJCQkJZmVlZGJhY2suaW1wb3J0YW50ID0gImhvcml6b250YWwiOwoJCQkJfSBlbHNlIHsKCQkJCQlmZWVkYmFjay5pbXBvcnRhbnQgPSAidmVydGljYWwiOwoJCQkJfQoJCQkJb3B0aW9ucy51c2luZy5jYWxsKCB0aGlzLCBwcm9wcywgZmVlZGJhY2sgKTsKCQkJfTsKCQl9CgoJCWVsZW0ub2Zmc2V0KCAkLmV4dGVuZCggcG9zaXRpb24sIHsgdXNpbmc6IHVzaW5nIH0gKSApOwoJfSk7Cn07CgokLnVpLnBvc2l0aW9uID0gewoJZml0OiB7CgkJbGVmdDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkgewoJCQl2YXIgd2l0aGluID0gZGF0YS53aXRoaW4sCgkJCQl3aXRoaW5PZmZzZXQgPSB3aXRoaW4uaXNXaW5kb3cgPyB3aXRoaW4uc2Nyb2xsTGVmdCA6IHdpdGhpbi5vZmZzZXQubGVmdCwKCQkJCW91dGVyV2lkdGggPSB3aXRoaW4ud2lkdGgsCgkJCQljb2xsaXNpb25Qb3NMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCwKCQkJCW92ZXJMZWZ0ID0gd2l0aGluT2Zmc2V0IC0gY29sbGlzaW9uUG9zTGVmdCwKCQkJCW92ZXJSaWdodCA9IGNvbGxpc2lvblBvc0xlZnQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldCwKCQkJCW5ld092ZXJSaWdodDsKCgkJCS8vIGVsZW1lbnQgaXMgd2lkZXIgdGhhbiB3aXRoaW4KCQkJaWYgKCBkYXRhLmNvbGxpc2lvbldpZHRoID4gb3V0ZXJXaWR0aCApIHsKCQkJCS8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgdGhlIGxlZnQgc2lkZSBvZiB3aXRoaW4KCQkJCWlmICggb3ZlckxlZnQgPiAwICYmIG92ZXJSaWdodCA8PSAwICkgewoJCQkJCW5ld092ZXJSaWdodCA9IHBvc2l0aW9uLmxlZnQgKyBvdmVyTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0gd2l0aGluT2Zmc2V0OwoJCQkJCXBvc2l0aW9uLmxlZnQgKz0gb3ZlckxlZnQgLSBuZXdPdmVyUmlnaHQ7CgkJCQkvLyBlbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIHJpZ2h0IHNpZGUgb2Ygd2l0aGluCgkJCQl9IGVsc2UgaWYgKCBvdmVyUmlnaHQgPiAwICYmIG92ZXJMZWZ0IDw9IDAgKSB7CgkJCQkJcG9zaXRpb24ubGVmdCA9IHdpdGhpbk9mZnNldDsKCQkJCS8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90aCBsZWZ0IGFuZCByaWdodCBzaWRlcyBvZiB3aXRoaW4KCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCBvdmVyTGVmdCA+IG92ZXJSaWdodCApIHsKCQkJCQkJcG9zaXRpb24ubGVmdCA9IHdpdGhpbk9mZnNldCArIG91dGVyV2lkdGggLSBkYXRhLmNvbGxpc2lvbldpZHRoOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXBvc2l0aW9uLmxlZnQgPSB3aXRoaW5PZmZzZXQ7CgkJCQkJfQoJCQkJfQoJCQkvLyB0b28gZmFyIGxlZnQgLT4gYWxpZ24gd2l0aCBsZWZ0IGVkZ2UKCQkJfSBlbHNlIGlmICggb3ZlckxlZnQgPiAwICkgewoJCQkJcG9zaXRpb24ubGVmdCArPSBvdmVyTGVmdDsKCQkJLy8gdG9vIGZhciByaWdodCAtPiBhbGlnbiB3aXRoIHJpZ2h0IGVkZ2UKCQkJfSBlbHNlIGlmICggb3ZlclJpZ2h0ID4gMCApIHsKCQkJCXBvc2l0aW9uLmxlZnQgLT0gb3ZlclJpZ2h0OwoJCQkvLyBhZGp1c3QgYmFzZWQgb24gcG9zaXRpb24gYW5kIG1hcmdpbgoJCQl9IGVsc2UgewoJCQkJcG9zaXRpb24ubGVmdCA9IG1heCggcG9zaXRpb24ubGVmdCAtIGNvbGxpc2lvblBvc0xlZnQsIHBvc2l0aW9uLmxlZnQgKTsKCQkJfQoJCX0sCgkJdG9wOiBmdW5jdGlvbiggcG9zaXRpb24sIGRhdGEgKSB7CgkJCXZhciB3aXRoaW4gPSBkYXRhLndpdGhpbiwKCQkJCXdpdGhpbk9mZnNldCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxUb3AgOiB3aXRoaW4ub2Zmc2V0LnRvcCwKCQkJCW91dGVySGVpZ2h0ID0gZGF0YS53aXRoaW4uaGVpZ2h0LAoJCQkJY29sbGlzaW9uUG9zVG9wID0gcG9zaXRpb24udG9wIC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsCgkJCQlvdmVyVG9wID0gd2l0aGluT2Zmc2V0IC0gY29sbGlzaW9uUG9zVG9wLAoJCQkJb3ZlckJvdHRvbSA9IGNvbGxpc2lvblBvc1RvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQsCgkJCQluZXdPdmVyQm90dG9tOwoKCQkJLy8gZWxlbWVudCBpcyB0YWxsZXIgdGhhbiB3aXRoaW4KCQkJaWYgKCBkYXRhLmNvbGxpc2lvbkhlaWdodCA+IG91dGVySGVpZ2h0ICkgewoJCQkJLy8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciB0aGUgdG9wIG9mIHdpdGhpbgoJCQkJaWYgKCBvdmVyVG9wID4gMCAmJiBvdmVyQm90dG9tIDw9IDAgKSB7CgkJCQkJbmV3T3ZlckJvdHRvbSA9IHBvc2l0aW9uLnRvcCArIG92ZXJUb3AgKyBkYXRhLmNvbGxpc2lvbkhlaWdodCAtIG91dGVySGVpZ2h0IC0gd2l0aGluT2Zmc2V0OwoJCQkJCXBvc2l0aW9uLnRvcCArPSBvdmVyVG9wIC0gbmV3T3ZlckJvdHRvbTsKCQkJCS8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90dG9tIG9mIHdpdGhpbgoJCQkJfSBlbHNlIGlmICggb3ZlckJvdHRvbSA+IDAgJiYgb3ZlclRvcCA8PSAwICkgewoJCQkJCXBvc2l0aW9uLnRvcCA9IHdpdGhpbk9mZnNldDsKCQkJCS8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgYm90aCB0b3AgYW5kIGJvdHRvbSBvZiB3aXRoaW4KCQkJCX0gZWxzZSB7CgkJCQkJaWYgKCBvdmVyVG9wID4gb3ZlckJvdHRvbSApIHsKCQkJCQkJcG9zaXRpb24udG9wID0gd2l0aGluT2Zmc2V0ICsgb3V0ZXJIZWlnaHQgLSBkYXRhLmNvbGxpc2lvbkhlaWdodDsKCQkJCQl9IGVsc2UgewoJCQkJCQlwb3NpdGlvbi50b3AgPSB3aXRoaW5PZmZzZXQ7CgkJCQkJfQoJCQkJfQoJCQkvLyB0b28gZmFyIHVwIC0+IGFsaWduIHdpdGggdG9wCgkJCX0gZWxzZSBpZiAoIG92ZXJUb3AgPiAwICkgewoJCQkJcG9zaXRpb24udG9wICs9IG92ZXJUb3A7CgkJCS8vIHRvbyBmYXIgZG93biAtPiBhbGlnbiB3aXRoIGJvdHRvbSBlZGdlCgkJCX0gZWxzZSBpZiAoIG92ZXJCb3R0b20gPiAwICkgewoJCQkJcG9zaXRpb24udG9wIC09IG92ZXJCb3R0b207CgkJCS8vIGFkanVzdCBiYXNlZCBvbiBwb3NpdGlvbiBhbmQgbWFyZ2luCgkJCX0gZWxzZSB7CgkJCQlwb3NpdGlvbi50b3AgPSBtYXgoIHBvc2l0aW9uLnRvcCAtIGNvbGxpc2lvblBvc1RvcCwgcG9zaXRpb24udG9wICk7CgkJCX0KCQl9Cgl9LAoJZmxpcDogewoJCWxlZnQ6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHsKCQkJdmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLAoJCQkJd2l0aGluT2Zmc2V0ID0gd2l0aGluLm9mZnNldC5sZWZ0ICsgd2l0aGluLnNjcm9sbExlZnQsCgkJCQlvdXRlcldpZHRoID0gd2l0aGluLndpZHRoLAoJCQkJb2Zmc2V0TGVmdCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxMZWZ0IDogd2l0aGluLm9mZnNldC5sZWZ0LAoJCQkJY29sbGlzaW9uUG9zTGVmdCA9IHBvc2l0aW9uLmxlZnQgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsCgkJCQlvdmVyTGVmdCA9IGNvbGxpc2lvblBvc0xlZnQgLSBvZmZzZXRMZWZ0LAoJCQkJb3ZlclJpZ2h0ID0gY29sbGlzaW9uUG9zTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0gb2Zmc2V0TGVmdCwKCQkJCW15T2Zmc2V0ID0gZGF0YS5teVsgMCBdID09PSAibGVmdCIgPwoJCQkJCS1kYXRhLmVsZW1XaWR0aCA6CgkJCQkJZGF0YS5teVsgMCBdID09PSAicmlnaHQiID8KCQkJCQkJZGF0YS5lbGVtV2lkdGggOgoJCQkJCQkwLAoJCQkJYXRPZmZzZXQgPSBkYXRhLmF0WyAwIF0gPT09ICJsZWZ0IiA/CgkJCQkJZGF0YS50YXJnZXRXaWR0aCA6CgkJCQkJZGF0YS5hdFsgMCBdID09PSAicmlnaHQiID8KCQkJCQkJLWRhdGEudGFyZ2V0V2lkdGggOgoJCQkJCQkwLAoJCQkJb2Zmc2V0ID0gLTIgKiBkYXRhLm9mZnNldFsgMCBdLAoJCQkJbmV3T3ZlclJpZ2h0LAoJCQkJbmV3T3ZlckxlZnQ7CgoJCQlpZiAoIG92ZXJMZWZ0IDwgMCApIHsKCQkJCW5ld092ZXJSaWdodCA9IHBvc2l0aW9uLmxlZnQgKyBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0ICsgZGF0YS5jb2xsaXNpb25XaWR0aCAtIG91dGVyV2lkdGggLSB3aXRoaW5PZmZzZXQ7CgkJCQlpZiAoIG5ld092ZXJSaWdodCA8IDAgfHwgbmV3T3ZlclJpZ2h0IDwgYWJzKCBvdmVyTGVmdCApICkgewoJCQkJCXBvc2l0aW9uLmxlZnQgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsKCQkJCX0KCQkJfSBlbHNlIGlmICggb3ZlclJpZ2h0ID4gMCApIHsKCQkJCW5ld092ZXJMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQgLSBvZmZzZXRMZWZ0OwoJCQkJaWYgKCBuZXdPdmVyTGVmdCA+IDAgfHwgYWJzKCBuZXdPdmVyTGVmdCApIDwgb3ZlclJpZ2h0ICkgewoJCQkJCXBvc2l0aW9uLmxlZnQgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsKCQkJCX0KCQkJfQoJCX0sCgkJdG9wOiBmdW5jdGlvbiggcG9zaXRpb24sIGRhdGEgKSB7CgkJCXZhciB3aXRoaW4gPSBkYXRhLndpdGhpbiwKCQkJCXdpdGhpbk9mZnNldCA9IHdpdGhpbi5vZmZzZXQudG9wICsgd2l0aGluLnNjcm9sbFRvcCwKCQkJCW91dGVySGVpZ2h0ID0gd2l0aGluLmhlaWdodCwKCQkJCW9mZnNldFRvcCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxUb3AgOiB3aXRoaW4ub2Zmc2V0LnRvcCwKCQkJCWNvbGxpc2lvblBvc1RvcCA9IHBvc2l0aW9uLnRvcCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLAoJCQkJb3ZlclRvcCA9IGNvbGxpc2lvblBvc1RvcCAtIG9mZnNldFRvcCwKCQkJCW92ZXJCb3R0b20gPSBjb2xsaXNpb25Qb3NUb3AgKyBkYXRhLmNvbGxpc2lvbkhlaWdodCAtIG91dGVySGVpZ2h0IC0gb2Zmc2V0VG9wLAoJCQkJdG9wID0gZGF0YS5teVsgMSBdID09PSAidG9wIiwKCQkJCW15T2Zmc2V0ID0gdG9wID8KCQkJCQktZGF0YS5lbGVtSGVpZ2h0IDoKCQkJCQlkYXRhLm15WyAxIF0gPT09ICJib3R0b20iID8KCQkJCQkJZGF0YS5lbGVtSGVpZ2h0IDoKCQkJCQkJMCwKCQkJCWF0T2Zmc2V0ID0gZGF0YS5hdFsgMSBdID09PSAidG9wIiA/CgkJCQkJZGF0YS50YXJnZXRIZWlnaHQgOgoJCQkJCWRhdGEuYXRbIDEgXSA9PT0gImJvdHRvbSIgPwoJCQkJCQktZGF0YS50YXJnZXRIZWlnaHQgOgoJCQkJCQkwLAoJCQkJb2Zmc2V0ID0gLTIgKiBkYXRhLm9mZnNldFsgMSBdLAoJCQkJbmV3T3ZlclRvcCwKCQkJCW5ld092ZXJCb3R0b207CgkJCWlmICggb3ZlclRvcCA8IDAgKSB7CgkJCQluZXdPdmVyQm90dG9tID0gcG9zaXRpb24udG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQ7CgkJCQlpZiAoICggcG9zaXRpb24udG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCkgPiBvdmVyVG9wICYmICggbmV3T3ZlckJvdHRvbSA8IDAgfHwgbmV3T3ZlckJvdHRvbSA8IGFicyggb3ZlclRvcCApICkgKSB7CgkJCQkJcG9zaXRpb24udG9wICs9IG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQ7CgkJCQl9CgkJCX0gZWxzZSBpZiAoIG92ZXJCb3R0b20gPiAwICkgewoJCQkJbmV3T3ZlclRvcCA9IHBvc2l0aW9uLnRvcCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCAtIG9mZnNldFRvcDsKCQkJCWlmICggKCBwb3NpdGlvbi50b3AgKyBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0KSA+IG92ZXJCb3R0b20gJiYgKCBuZXdPdmVyVG9wID4gMCB8fCBhYnMoIG5ld092ZXJUb3AgKSA8IG92ZXJCb3R0b20gKSApIHsKCQkJCQlwb3NpdGlvbi50b3AgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsKCQkJCX0KCQkJfQoJCX0KCX0sCglmbGlwZml0OiB7CgkJbGVmdDogZnVuY3Rpb24oKSB7CgkJCSQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJJC51aS5wb3NpdGlvbi5maXQubGVmdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfSwKCQl0b3A6IGZ1bmN0aW9uKCkgewoJCQkkLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJJC51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9Cgl9Cn07CgovLyBmcmFjdGlvbiBzdXBwb3J0IHRlc3QKKGZ1bmN0aW9uKCkgewoJdmFyIHRlc3RFbGVtZW50LCB0ZXN0RWxlbWVudFBhcmVudCwgdGVzdEVsZW1lbnRTdHlsZSwgb2Zmc2V0TGVmdCwgaSwKCQlib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJib2R5IiApWyAwIF0sCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCgkvL0NyZWF0ZSBhICJmYWtlIGJvZHkiIGZvciB0ZXN0aW5nIGJhc2VkIG9uIG1ldGhvZCB1c2VkIGluIGpRdWVyeS5zdXBwb3J0Cgl0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIGJvZHkgPyAiZGl2IiA6ICJib2R5IiApOwoJdGVzdEVsZW1lbnRTdHlsZSA9IHsKCQl2aXNpYmlsaXR5OiAiaGlkZGVuIiwKCQl3aWR0aDogMCwKCQloZWlnaHQ6IDAsCgkJYm9yZGVyOiAwLAoJCW1hcmdpbjogMCwKCQliYWNrZ3JvdW5kOiAibm9uZSIKCX07CglpZiAoIGJvZHkgKSB7CgkJJC5leHRlbmQoIHRlc3RFbGVtZW50U3R5bGUsIHsKCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCWxlZnQ6ICItMTAwMHB4IiwKCQkJdG9wOiAiLTEwMDBweCIKCQl9KTsKCX0KCWZvciAoIGkgaW4gdGVzdEVsZW1lbnRTdHlsZSApIHsKCQl0ZXN0RWxlbWVudC5zdHlsZVsgaSBdID0gdGVzdEVsZW1lbnRTdHlsZVsgaSBdOwoJfQoJdGVzdEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGRpdiApOwoJdGVzdEVsZW1lbnRQYXJlbnQgPSBib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCXRlc3RFbGVtZW50UGFyZW50Lmluc2VydEJlZm9yZSggdGVzdEVsZW1lbnQsIHRlc3RFbGVtZW50UGFyZW50LmZpcnN0Q2hpbGQgKTsKCglkaXYuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwLjc0MzIyMjJweDsiOwoKCW9mZnNldExlZnQgPSAkKCBkaXYgKS5vZmZzZXQoKS5sZWZ0OwoJc3VwcG9ydHNPZmZzZXRGcmFjdGlvbnMgPSBvZmZzZXRMZWZ0ID4gMTAgJiYgb2Zmc2V0TGVmdCA8IDExOwoKCXRlc3RFbGVtZW50LmlubmVySFRNTCA9ICIiOwoJdGVzdEVsZW1lbnRQYXJlbnQucmVtb3ZlQ2hpbGQoIHRlc3RFbGVtZW50ICk7Cn0pKCk7Cgp9KSgpOwoKdmFyIHBvc2l0aW9uID0gJC51aS5wb3NpdGlvbjsKCgovKiEKICogalF1ZXJ5IFVJIEFjY29yZGlvbiAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9hY2NvcmRpb24vCiAqLwoKCnZhciBhY2NvcmRpb24gPSAkLndpZGdldCggInVpLmFjY29yZGlvbiIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJb3B0aW9uczogewoJCWFjdGl2ZTogMCwKCQlhbmltYXRlOiB7fSwKCQljb2xsYXBzaWJsZTogZmFsc2UsCgkJZXZlbnQ6ICJjbGljayIsCgkJaGVhZGVyOiAiPiBsaSA+IDpmaXJzdC1jaGlsZCw+IDpub3QobGkpOmV2ZW4iLAoJCWhlaWdodFN0eWxlOiAiYXV0byIsCgkJaWNvbnM6IHsKCQkJYWN0aXZlSGVhZGVyOiAidWktaWNvbi10cmlhbmdsZS0xLXMiLAoJCQloZWFkZXI6ICJ1aS1pY29uLXRyaWFuZ2xlLTEtZSIKCQl9LAoKCQkvLyBjYWxsYmFja3MKCQlhY3RpdmF0ZTogbnVsbCwKCQliZWZvcmVBY3RpdmF0ZTogbnVsbAoJfSwKCgloaWRlUHJvcHM6IHsKCQlib3JkZXJUb3BXaWR0aDogImhpZGUiLAoJCWJvcmRlckJvdHRvbVdpZHRoOiAiaGlkZSIsCgkJcGFkZGluZ1RvcDogImhpZGUiLAoJCXBhZGRpbmdCb3R0b206ICJoaWRlIiwKCQloZWlnaHQ6ICJoaWRlIgoJfSwKCglzaG93UHJvcHM6IHsKCQlib3JkZXJUb3BXaWR0aDogInNob3ciLAoJCWJvcmRlckJvdHRvbVdpZHRoOiAic2hvdyIsCgkJcGFkZGluZ1RvcDogInNob3ciLAoJCXBhZGRpbmdCb3R0b206ICJzaG93IiwKCQloZWlnaHQ6ICJzaG93IgoJfSwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCQl0aGlzLnByZXZTaG93ID0gdGhpcy5wcmV2SGlkZSA9ICQoKTsKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24gdWktd2lkZ2V0IHVpLWhlbHBlci1yZXNldCIgKQoJCQkvLyBBUklBCgkJCS5hdHRyKCAicm9sZSIsICJ0YWJsaXN0IiApOwoKCQkvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2UgLyBudWxsCgkJaWYgKCAhb3B0aW9ucy5jb2xsYXBzaWJsZSAmJiAob3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlIHx8IG9wdGlvbnMuYWN0aXZlID09IG51bGwpICkgewoJCQlvcHRpb25zLmFjdGl2ZSA9IDA7CgkJfQoKCQl0aGlzLl9wcm9jZXNzUGFuZWxzKCk7CgkJLy8gaGFuZGxlIG5lZ2F0aXZlIHZhbHVlcwoJCWlmICggb3B0aW9ucy5hY3RpdmUgPCAwICkgewoJCQlvcHRpb25zLmFjdGl2ZSArPSB0aGlzLmhlYWRlcnMubGVuZ3RoOwoJCX0KCQl0aGlzLl9yZWZyZXNoKCk7Cgl9LAoKCV9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB7CgkJCWhlYWRlcjogdGhpcy5hY3RpdmUsCgkJCXBhbmVsOiAhdGhpcy5hY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5hY3RpdmUubmV4dCgpCgkJfTsKCX0sCgoJX2NyZWF0ZUljb25zOiBmdW5jdGlvbigpIHsKCQl2YXIgaWNvbnMgPSB0aGlzLm9wdGlvbnMuaWNvbnM7CgkJaWYgKCBpY29ucyApIHsKCQkJJCggIjxzcGFuPiIgKQoJCQkJLmFkZENsYXNzKCAidWktYWNjb3JkaW9uLWhlYWRlci1pY29uIHVpLWljb24gIiArIGljb25zLmhlYWRlciApCgkJCQkucHJlcGVuZFRvKCB0aGlzLmhlYWRlcnMgKTsKCQkJdGhpcy5hY3RpdmUuY2hpbGRyZW4oICIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uIiApCgkJCQkucmVtb3ZlQ2xhc3MoIGljb25zLmhlYWRlciApCgkJCQkuYWRkQ2xhc3MoIGljb25zLmFjdGl2ZUhlYWRlciApOwoJCQl0aGlzLmhlYWRlcnMuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24taWNvbnMiICk7CgkJfQoJfSwKCglfZGVzdHJveUljb25zOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhlYWRlcnMKCQkJLnJlbW92ZUNsYXNzKCAidWktYWNjb3JkaW9uLWljb25zIiApCgkJCS5jaGlsZHJlbiggIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iICkKCQkJCS5yZW1vdmUoKTsKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXZhciBjb250ZW50czsKCgkJLy8gY2xlYW4gdXAgbWFpbiBlbGVtZW50CgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0IiApCgkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKTsKCgkJLy8gY2xlYW4gdXAgaGVhZGVycwoJCXRoaXMuaGVhZGVycwoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWRlZmF1bHQgIiArCgkJCQkidWktY29ybmVyLWFsbCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgdWktY29ybmVyLXRvcCIgKQoJCQkucmVtb3ZlQXR0ciggInJvbGUiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWV4cGFuZGVkIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1zZWxlY3RlZCIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtY29udHJvbHMiICkKCQkJLnJlbW92ZUF0dHIoICJ0YWJJbmRleCIgKQoJCQkucmVtb3ZlVW5pcXVlSWQoKTsKCgkJdGhpcy5fZGVzdHJveUljb25zKCk7CgoJCS8vIGNsZWFuIHVwIGNvbnRlbnQgcGFuZWxzCgkJY29udGVudHMgPSB0aGlzLmhlYWRlcnMubmV4dCgpCgkJCS5yZW1vdmVDbGFzcyggInVpLWhlbHBlci1yZXNldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tICIgKwoJCQkJInVpLWFjY29yZGlvbi1jb250ZW50IHVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCIgKQoJCQkuY3NzKCAiZGlzcGxheSIsICIiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1oaWRkZW4iICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWxhYmVsbGVkYnkiICkKCQkJLnJlbW92ZVVuaXF1ZUlkKCk7CgoJCWlmICggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICE9PSAiY29udGVudCIgKSB7CgkJCWNvbnRlbnRzLmNzcyggImhlaWdodCIsICIiICk7CgkJfQoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQlpZiAoIGtleSA9PT0gImFjdGl2ZSIgKSB7CgkJCS8vIF9hY3RpdmF0ZSgpIHdpbGwgaGFuZGxlIGludmFsaWQgdmFsdWVzIGFuZCB1cGRhdGUgdGhpcy5vcHRpb25zCgkJCXRoaXMuX2FjdGl2YXRlKCB2YWx1ZSApOwoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIGtleSA9PT0gImV2ZW50IiApIHsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuZXZlbnQgKSB7CgkJCQl0aGlzLl9vZmYoIHRoaXMuaGVhZGVycywgdGhpcy5vcHRpb25zLmV2ZW50ICk7CgkJCX0KCQkJdGhpcy5fc2V0dXBFdmVudHMoIHZhbHVlICk7CgkJfQoKCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOwoKCQkvLyBzZXR0aW5nIGNvbGxhcHNpYmxlOiBmYWxzZSB3aGlsZSBjb2xsYXBzZWQ7IG9wZW4gZmlyc3QgcGFuZWwKCQlpZiAoIGtleSA9PT0gImNvbGxhcHNpYmxlIiAmJiAhdmFsdWUgJiYgdGhpcy5vcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7CgkJCXRoaXMuX2FjdGl2YXRlKCAwICk7CgkJfQoKCQlpZiAoIGtleSA9PT0gImljb25zIiApIHsKCQkJdGhpcy5fZGVzdHJveUljb25zKCk7CgkJCWlmICggdmFsdWUgKSB7CgkJCQl0aGlzLl9jcmVhdGVJY29ucygpOwoJCQl9CgkJfQoKCQkvLyAjNTMzMiAtIG9wYWNpdHkgZG9lc24ndCBjYXNjYWRlIHRvIHBvc2l0aW9uZWQgZWxlbWVudHMgaW4gSUUKCQkvLyBzbyB3ZSBuZWVkIHRvIGFkZCB0aGUgZGlzYWJsZWQgY2xhc3MgdG8gdGhlIGhlYWRlcnMgYW5kIHBhbmVscwoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQl0aGlzLmVsZW1lbnQKCQkJCS50b2dnbGVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiwgISF2YWx1ZSApCgkJCQkuYXR0ciggImFyaWEtZGlzYWJsZWQiLCB2YWx1ZSApOwoJCQl0aGlzLmhlYWRlcnMuYWRkKCB0aGlzLmhlYWRlcnMubmV4dCgpICkKCQkJCS50b2dnbGVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiwgISF2YWx1ZSApOwoJCX0KCX0sCgoJX2tleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoIGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5ICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIga2V5Q29kZSA9ICQudWkua2V5Q29kZSwKCQkJbGVuZ3RoID0gdGhpcy5oZWFkZXJzLmxlbmd0aCwKCQkJY3VycmVudEluZGV4ID0gdGhpcy5oZWFkZXJzLmluZGV4KCBldmVudC50YXJnZXQgKSwKCQkJdG9Gb2N1cyA9IGZhbHNlOwoKCQlzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkgewoJCQljYXNlIGtleUNvZGUuUklHSFQ6CgkJCWNhc2Uga2V5Q29kZS5ET1dOOgoJCQkJdG9Gb2N1cyA9IHRoaXMuaGVhZGVyc1sgKCBjdXJyZW50SW5kZXggKyAxICkgJSBsZW5ndGggXTsKCQkJCWJyZWFrOwoJCQljYXNlIGtleUNvZGUuTEVGVDoKCQkJY2FzZSBrZXlDb2RlLlVQOgoJCQkJdG9Gb2N1cyA9IHRoaXMuaGVhZGVyc1sgKCBjdXJyZW50SW5kZXggLSAxICsgbGVuZ3RoICkgJSBsZW5ndGggXTsKCQkJCWJyZWFrOwoJCQljYXNlIGtleUNvZGUuU1BBQ0U6CgkJCWNhc2Uga2V5Q29kZS5FTlRFUjoKCQkJCXRoaXMuX2V2ZW50SGFuZGxlciggZXZlbnQgKTsKCQkJCWJyZWFrOwoJCQljYXNlIGtleUNvZGUuSE9NRToKCQkJCXRvRm9jdXMgPSB0aGlzLmhlYWRlcnNbIDAgXTsKCQkJCWJyZWFrOwoJCQljYXNlIGtleUNvZGUuRU5EOgoJCQkJdG9Gb2N1cyA9IHRoaXMuaGVhZGVyc1sgbGVuZ3RoIC0gMSBdOwoJCQkJYnJlYWs7CgkJfQoKCQlpZiAoIHRvRm9jdXMgKSB7CgkJCSQoIGV2ZW50LnRhcmdldCApLmF0dHIoICJ0YWJJbmRleCIsIC0xICk7CgkJCSQoIHRvRm9jdXMgKS5hdHRyKCAidGFiSW5kZXgiLCAwICk7CgkJCXRvRm9jdXMuZm9jdXMoKTsKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQl9Cgl9LAoKCV9wYW5lbEtleURvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5VUCAmJiBldmVudC5jdHJsS2V5ICkgewoJCQkkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucHJldigpLmZvY3VzKCk7CgkJfQoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCQl0aGlzLl9wcm9jZXNzUGFuZWxzKCk7CgoJCS8vIHdhcyBjb2xsYXBzZWQgb3Igbm8gcGFuZWwKCQlpZiAoICggb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICYmIG9wdGlvbnMuY29sbGFwc2libGUgPT09IHRydWUgKSB8fCAhdGhpcy5oZWFkZXJzLmxlbmd0aCApIHsKCQkJb3B0aW9ucy5hY3RpdmUgPSBmYWxzZTsKCQkJdGhpcy5hY3RpdmUgPSAkKCk7CgkJLy8gYWN0aXZlIGZhbHNlIG9ubHkgd2hlbiBjb2xsYXBzaWJsZSBpcyB0cnVlCgkJfSBlbHNlIGlmICggb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkgewoJCQl0aGlzLl9hY3RpdmF0ZSggMCApOwoJCS8vIHdhcyBhY3RpdmUsIGJ1dCBhY3RpdmUgcGFuZWwgaXMgZ29uZQoJCX0gZWxzZSBpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhJC5jb250YWlucyggdGhpcy5lbGVtZW50WyAwIF0sIHRoaXMuYWN0aXZlWyAwIF0gKSApIHsKCQkJLy8gYWxsIHJlbWFpbmluZyBwYW5lbCBhcmUgZGlzYWJsZWQKCQkJaWYgKCB0aGlzLmhlYWRlcnMubGVuZ3RoID09PSB0aGlzLmhlYWRlcnMuZmluZCgiLnVpLXN0YXRlLWRpc2FibGVkIikubGVuZ3RoICkgewoJCQkJb3B0aW9ucy5hY3RpdmUgPSBmYWxzZTsKCQkJCXRoaXMuYWN0aXZlID0gJCgpOwoJCQkvLyBhY3RpdmF0ZSBwcmV2aW91cyBwYW5lbAoJCQl9IGVsc2UgewoJCQkJdGhpcy5fYWN0aXZhdGUoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSApOwoJCQl9CgkJLy8gd2FzIGFjdGl2ZSwgYWN0aXZlIHBhbmVsIHN0aWxsIGV4aXN0cwoJCX0gZWxzZSB7CgkJCS8vIG1ha2Ugc3VyZSBhY3RpdmUgaW5kZXggaXMgY29ycmVjdAoJCQlvcHRpb25zLmFjdGl2ZSA9IHRoaXMuaGVhZGVycy5pbmRleCggdGhpcy5hY3RpdmUgKTsKCQl9CgoJCXRoaXMuX2Rlc3Ryb3lJY29ucygpOwoKCQl0aGlzLl9yZWZyZXNoKCk7Cgl9LAoKCV9wcm9jZXNzUGFuZWxzOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhlYWRlcnMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLmhlYWRlciApCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1oZWFkZXIgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIiApOwoKCQl0aGlzLmhlYWRlcnMubmV4dCgpCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1jb250ZW50IHVpLWhlbHBlci1yZXNldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIiApCgkJCS5maWx0ZXIoICI6bm90KC51aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUpIiApCgkJCS5oaWRlKCk7Cgl9LAoKCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl2YXIgbWF4SGVpZ2h0LAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQloZWlnaHRTdHlsZSA9IG9wdGlvbnMuaGVpZ2h0U3R5bGUsCgkJCXBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTsKCgkJdGhpcy5hY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBvcHRpb25zLmFjdGl2ZSApCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wIiApCgkJCS5yZW1vdmVDbGFzcyggInVpLWNvcm5lci1hbGwiICk7CgkJdGhpcy5hY3RpdmUubmV4dCgpCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIgKQoJCQkuc2hvdygpOwoKCQl0aGlzLmhlYWRlcnMKCQkJLmF0dHIoICJyb2xlIiwgInRhYiIgKQoJCQkuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBoZWFkZXIgPSAkKCB0aGlzICksCgkJCQkJaGVhZGVySWQgPSBoZWFkZXIudW5pcXVlSWQoKS5hdHRyKCAiaWQiICksCgkJCQkJcGFuZWwgPSBoZWFkZXIubmV4dCgpLAoJCQkJCXBhbmVsSWQgPSBwYW5lbC51bmlxdWVJZCgpLmF0dHIoICJpZCIgKTsKCQkJCWhlYWRlci5hdHRyKCAiYXJpYS1jb250cm9scyIsIHBhbmVsSWQgKTsKCQkJCXBhbmVsLmF0dHIoICJhcmlhLWxhYmVsbGVkYnkiLCBoZWFkZXJJZCApOwoJCQl9KQoJCQkubmV4dCgpCgkJCQkuYXR0ciggInJvbGUiLCAidGFicGFuZWwiICk7CgoJCXRoaXMuaGVhZGVycwoJCQkubm90KCB0aGlzLmFjdGl2ZSApCgkJCS5hdHRyKHsKCQkJCSJhcmlhLXNlbGVjdGVkIjogImZhbHNlIiwKCQkJCSJhcmlhLWV4cGFuZGVkIjogImZhbHNlIiwKCQkJCXRhYkluZGV4OiAtMQoJCQl9KQoJCQkubmV4dCgpCgkJCQkuYXR0cih7CgkJCQkJImFyaWEtaGlkZGVuIjogInRydWUiCgkJCQl9KQoJCQkJLmhpZGUoKTsKCgkJLy8gbWFrZSBzdXJlIGF0IGxlYXN0IG9uZSBoZWFkZXIgaXMgaW4gdGhlIHRhYiBvcmRlcgoJCWlmICggIXRoaXMuYWN0aXZlLmxlbmd0aCApIHsKCQkJdGhpcy5oZWFkZXJzLmVxKCAwICkuYXR0ciggInRhYkluZGV4IiwgMCApOwoJCX0gZWxzZSB7CgkJCXRoaXMuYWN0aXZlLmF0dHIoewoJCQkJImFyaWEtc2VsZWN0ZWQiOiAidHJ1ZSIsCgkJCQkiYXJpYS1leHBhbmRlZCI6ICJ0cnVlIiwKCQkJCXRhYkluZGV4OiAwCgkJCX0pCgkJCS5uZXh0KCkKCQkJCS5hdHRyKHsKCQkJCQkiYXJpYS1oaWRkZW4iOiAiZmFsc2UiCgkJCQl9KTsKCQl9CgoJCXRoaXMuX2NyZWF0ZUljb25zKCk7CgoJCXRoaXMuX3NldHVwRXZlbnRzKCBvcHRpb25zLmV2ZW50ICk7CgoJCWlmICggaGVpZ2h0U3R5bGUgPT09ICJmaWxsIiApIHsKCQkJbWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpOwoJCQl0aGlzLmVsZW1lbnQuc2libGluZ3MoICI6dmlzaWJsZSIgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIGVsZW0gPSAkKCB0aGlzICksCgkJCQkJcG9zaXRpb24gPSBlbGVtLmNzcyggInBvc2l0aW9uIiApOwoKCQkJCWlmICggcG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgfHwgcG9zaXRpb24gPT09ICJmaXhlZCIgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJbWF4SGVpZ2h0IC09IGVsZW0ub3V0ZXJIZWlnaHQoIHRydWUgKTsKCQkJfSk7CgoJCQl0aGlzLmhlYWRlcnMuZWFjaChmdW5jdGlvbigpIHsKCQkJCW1heEhlaWdodCAtPSAkKCB0aGlzICkub3V0ZXJIZWlnaHQoIHRydWUgKTsKCQkJfSk7CgoJCQl0aGlzLmhlYWRlcnMubmV4dCgpCgkJCQkuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkkKCB0aGlzICkuaGVpZ2h0KCBNYXRoLm1heCggMCwgbWF4SGVpZ2h0IC0KCQkJCQkJJCggdGhpcyApLmlubmVySGVpZ2h0KCkgKyAkKCB0aGlzICkuaGVpZ2h0KCkgKSApOwoJCQkJfSkKCQkJCS5jc3MoICJvdmVyZmxvdyIsICJhdXRvIiApOwoJCX0gZWxzZSBpZiAoIGhlaWdodFN0eWxlID09PSAiYXV0byIgKSB7CgkJCW1heEhlaWdodCA9IDA7CgkJCXRoaXMuaGVhZGVycy5uZXh0KCkKCQkJCS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCW1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5jc3MoICJoZWlnaHQiLCAiIiApLmhlaWdodCgpICk7CgkJCQl9KQoJCQkJLmhlaWdodCggbWF4SGVpZ2h0ICk7CgkJfQoJfSwKCglfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQl2YXIgYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggaW5kZXggKVsgMCBdOwoKCQkvLyB0cnlpbmcgdG8gYWN0aXZhdGUgdGhlIGFscmVhZHkgYWN0aXZlIHBhbmVsCgkJaWYgKCBhY3RpdmUgPT09IHRoaXMuYWN0aXZlWyAwIF0gKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIHRyeWluZyB0byBjb2xsYXBzZSwgc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgY3VycmVudGx5IGFjdGl2ZSBoZWFkZXIKCQlhY3RpdmUgPSBhY3RpdmUgfHwgdGhpcy5hY3RpdmVbIDAgXTsKCgkJdGhpcy5fZXZlbnRIYW5kbGVyKHsKCQkJdGFyZ2V0OiBhY3RpdmUsCgkJCWN1cnJlbnRUYXJnZXQ6IGFjdGl2ZSwKCQkJcHJldmVudERlZmF1bHQ6ICQubm9vcAoJCX0pOwoJfSwKCglfZmluZEFjdGl2ZTogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09ICJudW1iZXIiID8gdGhpcy5oZWFkZXJzLmVxKCBzZWxlY3RvciApIDogJCgpOwoJfSwKCglfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgZXZlbnRzID0gewoJCQlrZXlkb3duOiAiX2tleWRvd24iCgkJfTsKCQlpZiAoIGV2ZW50ICkgewoJCQkkLmVhY2goIGV2ZW50LnNwbGl0KCAiICIgKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7CgkJCQlldmVudHNbIGV2ZW50TmFtZSBdID0gIl9ldmVudEhhbmRsZXIiOwoJCQl9KTsKCQl9CgoJCXRoaXMuX29mZiggdGhpcy5oZWFkZXJzLmFkZCggdGhpcy5oZWFkZXJzLm5leHQoKSApICk7CgkJdGhpcy5fb24oIHRoaXMuaGVhZGVycywgZXZlbnRzICk7CgkJdGhpcy5fb24oIHRoaXMuaGVhZGVycy5uZXh0KCksIHsga2V5ZG93bjogIl9wYW5lbEtleURvd24iIH0pOwoJCXRoaXMuX2hvdmVyYWJsZSggdGhpcy5oZWFkZXJzICk7CgkJdGhpcy5fZm9jdXNhYmxlKCB0aGlzLmhlYWRlcnMgKTsKCX0sCgoJX2V2ZW50SGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQlhY3RpdmUgPSB0aGlzLmFjdGl2ZSwKCQkJY2xpY2tlZCA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSwKCQkJY2xpY2tlZElzQWN0aXZlID0gY2xpY2tlZFsgMCBdID09PSBhY3RpdmVbIDAgXSwKCQkJY29sbGFwc2luZyA9IGNsaWNrZWRJc0FjdGl2ZSAmJiBvcHRpb25zLmNvbGxhcHNpYmxlLAoJCQl0b1Nob3cgPSBjb2xsYXBzaW5nID8gJCgpIDogY2xpY2tlZC5uZXh0KCksCgkJCXRvSGlkZSA9IGFjdGl2ZS5uZXh0KCksCgkJCWV2ZW50RGF0YSA9IHsKCQkJCW9sZEhlYWRlcjogYWN0aXZlLAoJCQkJb2xkUGFuZWw6IHRvSGlkZSwKCQkJCW5ld0hlYWRlcjogY29sbGFwc2luZyA/ICQoKSA6IGNsaWNrZWQsCgkJCQluZXdQYW5lbDogdG9TaG93CgkJCX07CgoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgoJCWlmICgKCQkJCS8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGUKCQkJCSggY2xpY2tlZElzQWN0aXZlICYmICFvcHRpb25zLmNvbGxhcHNpYmxlICkgfHwKCQkJCS8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uCgkJCQkoIHRoaXMuX3RyaWdnZXIoICJiZWZvcmVBY3RpdmF0ZSIsIGV2ZW50LCBldmVudERhdGEgKSA9PT0gZmFsc2UgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJb3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLmhlYWRlcnMuaW5kZXgoIGNsaWNrZWQgKTsKCgkJLy8gd2hlbiB0aGUgY2FsbCB0byAuX3RvZ2dsZSgpIGNvbWVzIGFmdGVyIHRoZSBjbGFzcyBjaGFuZ2VzCgkJLy8gaXQgY2F1c2VzIGEgdmVyeSBvZGQgYnVnIGluIElFIDggKHNlZSAjNjcyMCkKCQl0aGlzLmFjdGl2ZSA9IGNsaWNrZWRJc0FjdGl2ZSA/ICQoKSA6IGNsaWNrZWQ7CgkJdGhpcy5fdG9nZ2xlKCBldmVudERhdGEgKTsKCgkJLy8gc3dpdGNoIGNsYXNzZXMKCQkvLyBjb3JuZXIgY2xhc3NlcyBvbiB0aGUgcHJldmlvdXNseSBhY3RpdmUgaGVhZGVyIHN0YXkgYWZ0ZXIgdGhlIGFuaW1hdGlvbgoJCWFjdGl2ZS5yZW1vdmVDbGFzcyggInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSIgKTsKCQlpZiAoIG9wdGlvbnMuaWNvbnMgKSB7CgkJCWFjdGl2ZS5jaGlsZHJlbiggIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iICkKCQkJCS5yZW1vdmVDbGFzcyggb3B0aW9ucy5pY29ucy5hY3RpdmVIZWFkZXIgKQoJCQkJLmFkZENsYXNzKCBvcHRpb25zLmljb25zLmhlYWRlciApOwoJCX0KCgkJaWYgKCAhY2xpY2tlZElzQWN0aXZlICkgewoJCQljbGlja2VkCgkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIiApCgkJCQkuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcCIgKTsKCQkJaWYgKCBvcHRpb25zLmljb25zICkgewoJCQkJY2xpY2tlZC5jaGlsZHJlbiggIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iICkKCQkJCQkucmVtb3ZlQ2xhc3MoIG9wdGlvbnMuaWNvbnMuaGVhZGVyICkKCQkJCQkuYWRkQ2xhc3MoIG9wdGlvbnMuaWNvbnMuYWN0aXZlSGVhZGVyICk7CgkJCX0KCgkJCWNsaWNrZWQKCQkJCS5uZXh0KCkKCQkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIgKTsKCQl9Cgl9LAoKCV90b2dnbGU6IGZ1bmN0aW9uKCBkYXRhICkgewoJCXZhciB0b1Nob3cgPSBkYXRhLm5ld1BhbmVsLAoJCQl0b0hpZGUgPSB0aGlzLnByZXZTaG93Lmxlbmd0aCA/IHRoaXMucHJldlNob3cgOiBkYXRhLm9sZFBhbmVsOwoKCQkvLyBoYW5kbGUgYWN0aXZhdGluZyBhIHBhbmVsIGR1cmluZyB0aGUgYW5pbWF0aW9uIGZvciBhbm90aGVyIGFjdGl2YXRpb24KCQl0aGlzLnByZXZTaG93LmFkZCggdGhpcy5wcmV2SGlkZSApLnN0b3AoIHRydWUsIHRydWUgKTsKCQl0aGlzLnByZXZTaG93ID0gdG9TaG93OwoJCXRoaXMucHJldkhpZGUgPSB0b0hpZGU7CgoJCWlmICggdGhpcy5vcHRpb25zLmFuaW1hdGUgKSB7CgkJCXRoaXMuX2FuaW1hdGUoIHRvU2hvdywgdG9IaWRlLCBkYXRhICk7CgkJfSBlbHNlIHsKCQkJdG9IaWRlLmhpZGUoKTsKCQkJdG9TaG93LnNob3coKTsKCQkJdGhpcy5fdG9nZ2xlQ29tcGxldGUoIGRhdGEgKTsKCQl9CgoJCXRvSGlkZS5hdHRyKHsKCQkJImFyaWEtaGlkZGVuIjogInRydWUiCgkJfSk7CgkJdG9IaWRlLnByZXYoKS5hdHRyKCAiYXJpYS1zZWxlY3RlZCIsICJmYWxzZSIgKTsKCQkvLyBpZiB3ZSdyZSBzd2l0Y2hpbmcgcGFuZWxzLCByZW1vdmUgdGhlIG9sZCBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyCgkJLy8gaWYgd2UncmUgb3BlbmluZyBmcm9tIGNvbGxhcHNlZCBzdGF0ZSwgcmVtb3ZlIHRoZSBwcmV2aW91cyBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyCgkJLy8gaWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIGhlYWRlciBpbiB0aGUgdGFiIG9yZGVyCgkJaWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7CgkJCXRvSGlkZS5wcmV2KCkuYXR0cih7CgkJCQkidGFiSW5kZXgiOiAtMSwKCQkJCSJhcmlhLWV4cGFuZGVkIjogImZhbHNlIgoJCQl9KTsKCQl9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkgewoJCQl0aGlzLmhlYWRlcnMuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICQoIHRoaXMgKS5hdHRyKCAidGFiSW5kZXgiICkgPT09IDA7CgkJCX0pCgkJCS5hdHRyKCAidGFiSW5kZXgiLCAtMSApOwoJCX0KCgkJdG9TaG93CgkJCS5hdHRyKCAiYXJpYS1oaWRkZW4iLCAiZmFsc2UiICkKCQkJLnByZXYoKQoJCQkJLmF0dHIoewoJCQkJCSJhcmlhLXNlbGVjdGVkIjogInRydWUiLAoJCQkJCXRhYkluZGV4OiAwLAoJCQkJCSJhcmlhLWV4cGFuZGVkIjogInRydWUiCgkJCQl9KTsKCX0sCgoJX2FuaW1hdGU6IGZ1bmN0aW9uKCB0b1Nob3csIHRvSGlkZSwgZGF0YSApIHsKCQl2YXIgdG90YWwsIGVhc2luZywgZHVyYXRpb24sCgkJCXRoYXQgPSB0aGlzLAoJCQlhZGp1c3QgPSAwLAoJCQlkb3duID0gdG9TaG93Lmxlbmd0aCAmJgoJCQkJKCAhdG9IaWRlLmxlbmd0aCB8fCAoIHRvU2hvdy5pbmRleCgpIDwgdG9IaWRlLmluZGV4KCkgKSApLAoJCQlhbmltYXRlID0gdGhpcy5vcHRpb25zLmFuaW1hdGUgfHwge30sCgkJCW9wdGlvbnMgPSBkb3duICYmIGFuaW1hdGUuZG93biB8fCBhbmltYXRlLAoJCQljb21wbGV0ZSA9IGZ1bmN0aW9uKCkgewoJCQkJdGhhdC5fdG9nZ2xlQ29tcGxldGUoIGRhdGEgKTsKCQkJfTsKCgkJaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gIm51bWJlciIgKSB7CgkJCWR1cmF0aW9uID0gb3B0aW9uczsKCQl9CgkJaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgKSB7CgkJCWVhc2luZyA9IG9wdGlvbnM7CgkJfQoJCS8vIGZhbGwgYmFjayBmcm9tIG9wdGlvbnMgdG8gYW5pbWF0aW9uIGluIGNhc2Ugb2YgcGFydGlhbCBkb3duIHNldHRpbmdzCgkJZWFzaW5nID0gZWFzaW5nIHx8IG9wdGlvbnMuZWFzaW5nIHx8IGFuaW1hdGUuZWFzaW5nOwoJCWR1cmF0aW9uID0gZHVyYXRpb24gfHwgb3B0aW9ucy5kdXJhdGlvbiB8fCBhbmltYXRlLmR1cmF0aW9uOwoKCQlpZiAoICF0b0hpZGUubGVuZ3RoICkgewoJCQlyZXR1cm4gdG9TaG93LmFuaW1hdGUoIHRoaXMuc2hvd1Byb3BzLCBkdXJhdGlvbiwgZWFzaW5nLCBjb21wbGV0ZSApOwoJCX0KCQlpZiAoICF0b1Nob3cubGVuZ3RoICkgewoJCQlyZXR1cm4gdG9IaWRlLmFuaW1hdGUoIHRoaXMuaGlkZVByb3BzLCBkdXJhdGlvbiwgZWFzaW5nLCBjb21wbGV0ZSApOwoJCX0KCgkJdG90YWwgPSB0b1Nob3cuc2hvdygpLm91dGVySGVpZ2h0KCk7CgkJdG9IaWRlLmFuaW1hdGUoIHRoaXMuaGlkZVByb3BzLCB7CgkJCWR1cmF0aW9uOiBkdXJhdGlvbiwKCQkJZWFzaW5nOiBlYXNpbmcsCgkJCXN0ZXA6IGZ1bmN0aW9uKCBub3csIGZ4ICkgewoJCQkJZngubm93ID0gTWF0aC5yb3VuZCggbm93ICk7CgkJCX0KCQl9KTsKCQl0b1Nob3cKCQkJLmhpZGUoKQoJCQkuYW5pbWF0ZSggdGhpcy5zaG93UHJvcHMsIHsKCQkJCWR1cmF0aW9uOiBkdXJhdGlvbiwKCQkJCWVhc2luZzogZWFzaW5nLAoJCQkJY29tcGxldGU6IGNvbXBsZXRlLAoJCQkJc3RlcDogZnVuY3Rpb24oIG5vdywgZnggKSB7CgkJCQkJZngubm93ID0gTWF0aC5yb3VuZCggbm93ICk7CgkJCQkJaWYgKCBmeC5wcm9wICE9PSAiaGVpZ2h0IiApIHsKCQkJCQkJYWRqdXN0ICs9IGZ4Lm5vdzsKCQkJCQl9IGVsc2UgaWYgKCB0aGF0Lm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09ICJjb250ZW50IiApIHsKCQkJCQkJZngubm93ID0gTWF0aC5yb3VuZCggdG90YWwgLSB0b0hpZGUub3V0ZXJIZWlnaHQoKSAtIGFkanVzdCApOwoJCQkJCQlhZGp1c3QgPSAwOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9LAoKCV90b2dnbGVDb21wbGV0ZTogZnVuY3Rpb24oIGRhdGEgKSB7CgkJdmFyIHRvSGlkZSA9IGRhdGEub2xkUGFuZWw7CgoJCXRvSGlkZQoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUiICkKCQkJLnByZXYoKQoJCQkJLnJlbW92ZUNsYXNzKCAidWktY29ybmVyLXRvcCIgKQoJCQkJLmFkZENsYXNzKCAidWktY29ybmVyLWFsbCIgKTsKCgkJLy8gV29yayBhcm91bmQgZm9yIHJlbmRlcmluZyBidWcgaW4gSUUgKCM1NDIxKQoJCWlmICggdG9IaWRlLmxlbmd0aCApIHsKCQkJdG9IaWRlLnBhcmVudCgpWyAwIF0uY2xhc3NOYW1lID0gdG9IaWRlLnBhcmVudCgpWyAwIF0uY2xhc3NOYW1lOwoJCX0KCQl0aGlzLl90cmlnZ2VyKCAiYWN0aXZhdGUiLCBudWxsLCBkYXRhICk7Cgl9Cn0pOwoKCi8qIQogKiBqUXVlcnkgVUkgTWVudSAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9tZW51LwogKi8KCgp2YXIgbWVudSA9ICQud2lkZ2V0KCAidWkubWVudSIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJZGVmYXVsdEVsZW1lbnQ6ICI8dWw+IiwKCWRlbGF5OiAzMDAsCglvcHRpb25zOiB7CgkJaWNvbnM6IHsKCQkJc3VibWVudTogInVpLWljb24tY2FyYXQtMS1lIgoJCX0sCgkJaXRlbXM6ICI+ICoiLAoJCW1lbnVzOiAidWwiLAoJCXBvc2l0aW9uOiB7CgkJCW15OiAibGVmdC0xIHRvcCIsCgkJCWF0OiAicmlnaHQgdG9wIgoJCX0sCgkJcm9sZTogIm1lbnUiLAoKCQkvLyBjYWxsYmFja3MKCQlibHVyOiBudWxsLAoJCWZvY3VzOiBudWxsLAoJCXNlbGVjdDogbnVsbAoJfSwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl0aGlzLmFjdGl2ZU1lbnUgPSB0aGlzLmVsZW1lbnQ7CgoJCS8vIEZsYWcgdXNlZCB0byBwcmV2ZW50IGZpcmluZyBvZiB0aGUgY2xpY2sgaGFuZGxlcgoJCS8vIGFzIHRoZSBldmVudCBidWJibGVzIHVwIHRocm91Z2ggbmVzdGVkIG1lbnVzCgkJdGhpcy5tb3VzZUhhbmRsZWQgPSBmYWxzZTsKCQl0aGlzLmVsZW1lbnQKCQkJLnVuaXF1ZUlkKCkKCQkJLmFkZENsYXNzKCAidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQiICkKCQkJLnRvZ2dsZUNsYXNzKCAidWktbWVudS1pY29ucyIsICEhdGhpcy5lbGVtZW50LmZpbmQoICIudWktaWNvbiIgKS5sZW5ndGggKQoJCQkuYXR0cih7CgkJCQlyb2xlOiB0aGlzLm9wdGlvbnMucm9sZSwKCQkJCXRhYkluZGV4OiAwCgkJCX0pOwoKCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJdGhpcy5lbGVtZW50CgkJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1kaXNhYmxlZCIgKQoJCQkJLmF0dHIoICJhcmlhLWRpc2FibGVkIiwgInRydWUiICk7CgkJfQoKCQl0aGlzLl9vbih7CgkJCS8vIFByZXZlbnQgZm9jdXMgZnJvbSBzdGlja2luZyB0byBsaW5rcyBpbnNpZGUgbWVudSBhZnRlciBjbGlja2luZwoJCQkvLyB0aGVtIChmb2N1cyBzaG91bGQgYWx3YXlzIHN0YXkgb24gVUwgZHVyaW5nIG5hdmlnYXRpb24pLgoJCQkibW91c2Vkb3duIC51aS1tZW51LWl0ZW0iOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQl9LAoJCQkiY2xpY2sgLnVpLW1lbnUtaXRlbSI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXZhciB0YXJnZXQgPSAkKCBldmVudC50YXJnZXQgKTsKCQkJCWlmICggIXRoaXMubW91c2VIYW5kbGVkICYmIHRhcmdldC5ub3QoICIudWktc3RhdGUtZGlzYWJsZWQiICkubGVuZ3RoICkgewoJCQkJCXRoaXMuc2VsZWN0KCBldmVudCApOwoKCQkJCQkvLyBPbmx5IHNldCB0aGUgbW91c2VIYW5kbGVkIGZsYWcgaWYgdGhlIGV2ZW50IHdpbGwgYnViYmxlLCBzZWUgIzk0NjkuCgkJCQkJaWYgKCAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCQkJCQkJdGhpcy5tb3VzZUhhbmRsZWQgPSB0cnVlOwoJCQkJCX0KCgkJCQkJLy8gT3BlbiBzdWJtZW51IG9uIGNsaWNrCgkJCQkJaWYgKCB0YXJnZXQuaGFzKCAiLnVpLW1lbnUiICkubGVuZ3RoICkgewoJCQkJCQl0aGlzLmV4cGFuZCggZXZlbnQgKTsKCQkJCQl9IGVsc2UgaWYgKCAhdGhpcy5lbGVtZW50LmlzKCAiOmZvY3VzIiApICYmICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICkuY2xvc2VzdCggIi51aS1tZW51IiApLmxlbmd0aCApIHsKCgkJCQkJCS8vIFJlZGlyZWN0IGZvY3VzIHRvIHRoZSBtZW51CgkJCQkJCXRoaXMuZWxlbWVudC50cmlnZ2VyKCAiZm9jdXMiLCBbIHRydWUgXSApOwoKCQkJCQkJLy8gSWYgdGhlIGFjdGl2ZSBpdGVtIGlzIG9uIHRoZSB0b3AgbGV2ZWwsIGxldCBpdCBzdGF5IGFjdGl2ZS4KCQkJCQkJLy8gT3RoZXJ3aXNlLCBibHVyIHRoZSBhY3RpdmUgaXRlbSBzaW5jZSBpdCBpcyBubyBsb25nZXIgdmlzaWJsZS4KCQkJCQkJaWYgKCB0aGlzLmFjdGl2ZSAmJiB0aGlzLmFjdGl2ZS5wYXJlbnRzKCAiLnVpLW1lbnUiICkubGVuZ3RoID09PSAxICkgewoJCQkJCQkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0sCgkJCSJtb3VzZWVudGVyIC51aS1tZW51LWl0ZW0iOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQl2YXIgdGFyZ2V0ID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApOwoJCQkJLy8gUmVtb3ZlIHVpLXN0YXRlLWFjdGl2ZSBjbGFzcyBmcm9tIHNpYmxpbmdzIG9mIHRoZSBuZXdseSBmb2N1c2VkIG1lbnUgaXRlbQoJCQkJLy8gdG8gYXZvaWQgYSBqdW1wIGNhdXNlZCBieSBhZGphY2VudCBlbGVtZW50cyBib3RoIGhhdmluZyBhIGNsYXNzIHdpdGggYSBib3JkZXIKCQkJCXRhcmdldC5zaWJsaW5ncyggIi51aS1zdGF0ZS1hY3RpdmUiICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQl0aGlzLmZvY3VzKCBldmVudCwgdGFyZ2V0ICk7CgkJCX0sCgkJCW1vdXNlbGVhdmU6ICJjb2xsYXBzZUFsbCIsCgkJCSJtb3VzZWxlYXZlIC51aS1tZW51IjogImNvbGxhcHNlQWxsIiwKCQkJZm9jdXM6IGZ1bmN0aW9uKCBldmVudCwga2VlcEFjdGl2ZUl0ZW0gKSB7CgkJCQkvLyBJZiB0aGVyZSdzIGFscmVhZHkgYW4gYWN0aXZlIGl0ZW0sIGtlZXAgaXQgYWN0aXZlCgkJCQkvLyBJZiBub3QsIGFjdGl2YXRlIHRoZSBmaXJzdCBpdGVtCgkJCQl2YXIgaXRlbSA9IHRoaXMuYWN0aXZlIHx8IHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKS5lcSggMCApOwoKCQkJCWlmICggIWtlZXBBY3RpdmVJdGVtICkgewoJCQkJCXRoaXMuZm9jdXMoIGV2ZW50LCBpdGVtICk7CgkJCQl9CgkJCX0sCgkJCWJsdXI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJCWlmICggISQuY29udGFpbnMoIHRoaXMuZWxlbWVudFswXSwgdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICkgKSB7CgkJCQkJCXRoaXMuY29sbGFwc2VBbGwoIGV2ZW50ICk7CgkJCQkJfQoJCQkJfSk7CgkJCX0sCgkJCWtleWRvd246ICJfa2V5ZG93biIKCQl9KTsKCgkJdGhpcy5yZWZyZXNoKCk7CgoJCS8vIENsaWNrcyBvdXRzaWRlIG9mIGEgbWVudSBjb2xsYXBzZSBhbnkgb3BlbiBtZW51cwoJCXRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7CgkJCWNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlpZiAoIHRoaXMuX2Nsb3NlT25Eb2N1bWVudENsaWNrKCBldmVudCApICkgewoJCQkJCXRoaXMuY29sbGFwc2VBbGwoIGV2ZW50ICk7CgkJCQl9CgoJCQkJLy8gUmVzZXQgdGhlIG1vdXNlSGFuZGxlZCBmbGFnCgkJCQl0aGlzLm1vdXNlSGFuZGxlZCA9IGZhbHNlOwoJCQl9CgkJfSk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQkvLyBEZXN0cm95IChzdWIpbWVudXMKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiICkKCQkJLmZpbmQoICIudWktbWVudSIgKS5hZGRCYWNrKCkKCQkJCS5yZW1vdmVDbGFzcyggInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtaWNvbnMgdWktZnJvbnQiICkKCQkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKQoJCQkJLnJlbW92ZUF0dHIoICJ0YWJJbmRleCIgKQoJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWxhYmVsbGVkYnkiICkKCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1leHBhbmRlZCIgKQoJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWhpZGRlbiIgKQoJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWRpc2FibGVkIiApCgkJCQkucmVtb3ZlVW5pcXVlSWQoKQoJCQkJLnNob3coKTsKCgkJLy8gRGVzdHJveSBtZW51IGl0ZW1zCgkJdGhpcy5lbGVtZW50LmZpbmQoICIudWktbWVudS1pdGVtIiApCgkJCS5yZW1vdmVDbGFzcyggInVpLW1lbnUtaXRlbSIgKQoJCQkucmVtb3ZlQXR0ciggInJvbGUiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWRpc2FibGVkIiApCgkJCS5yZW1vdmVVbmlxdWVJZCgpCgkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWhvdmVyIiApCgkJCS5yZW1vdmVBdHRyKCAidGFiSW5kZXgiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1oYXNwb3B1cCIgKQoJCQkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCXZhciBlbGVtID0gJCggdGhpcyApOwoJCQkJaWYgKCBlbGVtLmRhdGEoICJ1aS1tZW51LXN1Ym1lbnUtY2FyYXQiICkgKSB7CgkJCQkJZWxlbS5yZW1vdmUoKTsKCQkJCX0KCQkJfSk7CgoJCS8vIERlc3Ryb3kgbWVudSBkaXZpZGVycwoJCXRoaXMuZWxlbWVudC5maW5kKCAiLnVpLW1lbnUtZGl2aWRlciIgKS5yZW1vdmVDbGFzcyggInVpLW1lbnUtZGl2aWRlciB1aS13aWRnZXQtY29udGVudCIgKTsKCX0sCgoJX2tleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgbWF0Y2gsIHByZXYsIGNoYXJhY3Rlciwgc2tpcCwgcmVnZXgsCgkJCXByZXZlbnREZWZhdWx0ID0gdHJ1ZTsKCgkJZnVuY3Rpb24gZXNjYXBlKCB2YWx1ZSApIHsKCQkJcmV0dXJuIHZhbHVlLnJlcGxhY2UoIC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCAiXFwkJiIgKTsKCQl9CgoJCXN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7CgkJY2FzZSAkLnVpLmtleUNvZGUuUEFHRV9VUDoKCQkJdGhpcy5wcmV2aW91c1BhZ2UoIGV2ZW50ICk7CgkJCWJyZWFrOwoJCWNhc2UgJC51aS5rZXlDb2RlLlBBR0VfRE9XTjoKCQkJdGhpcy5uZXh0UGFnZSggZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuSE9NRToKCQkJdGhpcy5fbW92ZSggImZpcnN0IiwgImZpcnN0IiwgZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuRU5EOgoJCQl0aGlzLl9tb3ZlKCAibGFzdCIsICJsYXN0IiwgZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuVVA6CgkJCXRoaXMucHJldmlvdXMoIGV2ZW50ICk7CgkJCWJyZWFrOwoJCWNhc2UgJC51aS5rZXlDb2RlLkRPV046CgkJCXRoaXMubmV4dCggZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuTEVGVDoKCQkJdGhpcy5jb2xsYXBzZSggZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6CgkJCWlmICggdGhpcy5hY3RpdmUgJiYgIXRoaXMuYWN0aXZlLmlzKCAiLnVpLXN0YXRlLWRpc2FibGVkIiApICkgewoJCQkJdGhpcy5leHBhbmQoIGV2ZW50ICk7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuRU5URVI6CgkJY2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6CgkJCXRoaXMuX2FjdGl2YXRlKCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5FU0NBUEU6CgkJCXRoaXMuY29sbGFwc2UoIGV2ZW50ICk7CgkJCWJyZWFrOwoJCWRlZmF1bHQ6CgkJCXByZXZlbnREZWZhdWx0ID0gZmFsc2U7CgkJCXByZXYgPSB0aGlzLnByZXZpb3VzRmlsdGVyIHx8ICIiOwoJCQljaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBldmVudC5rZXlDb2RlICk7CgkJCXNraXAgPSBmYWxzZTsKCgkJCWNsZWFyVGltZW91dCggdGhpcy5maWx0ZXJUaW1lciApOwoKCQkJaWYgKCBjaGFyYWN0ZXIgPT09IHByZXYgKSB7CgkJCQlza2lwID0gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCWNoYXJhY3RlciA9IHByZXYgKyBjaGFyYWN0ZXI7CgkJCX0KCgkJCXJlZ2V4ID0gbmV3IFJlZ0V4cCggIl4iICsgZXNjYXBlKCBjaGFyYWN0ZXIgKSwgImkiICk7CgkJCW1hdGNoID0gdGhpcy5hY3RpdmVNZW51LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCXJldHVybiByZWdleC50ZXN0KCAkKCB0aGlzICkudGV4dCgpICk7CgkJCX0pOwoJCQltYXRjaCA9IHNraXAgJiYgbWF0Y2guaW5kZXgoIHRoaXMuYWN0aXZlLm5leHQoKSApICE9PSAtMSA/CgkJCQl0aGlzLmFjdGl2ZS5uZXh0QWxsKCAiLnVpLW1lbnUtaXRlbSIgKSA6CgkJCQltYXRjaDsKCgkJCS8vIElmIG5vIG1hdGNoZXMgb24gdGhlIGN1cnJlbnQgZmlsdGVyLCByZXNldCB0byB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJlc3NlZAoJCQkvLyB0byBtb3ZlIGRvd24gdGhlIG1lbnUgdG8gdGhlIGZpcnN0IGl0ZW0gdGhhdCBzdGFydHMgd2l0aCB0aGF0IGNoYXJhY3RlcgoJCQlpZiAoICFtYXRjaC5sZW5ndGggKSB7CgkJCQljaGFyYWN0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBldmVudC5rZXlDb2RlICk7CgkJCQlyZWdleCA9IG5ldyBSZWdFeHAoICJeIiArIGVzY2FwZSggY2hhcmFjdGVyICksICJpIiApOwoJCQkJbWF0Y2ggPSB0aGlzLmFjdGl2ZU1lbnUuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiByZWdleC50ZXN0KCAkKCB0aGlzICkudGV4dCgpICk7CgkJCQl9KTsKCQkJfQoKCQkJaWYgKCBtYXRjaC5sZW5ndGggKSB7CgkJCQl0aGlzLmZvY3VzKCBldmVudCwgbWF0Y2ggKTsKCQkJCWlmICggbWF0Y2gubGVuZ3RoID4gMSApIHsKCQkJCQl0aGlzLnByZXZpb3VzRmlsdGVyID0gY2hhcmFjdGVyOwoJCQkJCXRoaXMuZmlsdGVyVGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCQkJZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXI7CgkJCQkJfSwgMTAwMCApOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcjsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWRlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyOwoJCQl9CgkJfQoKCQlpZiAoIHByZXZlbnREZWZhdWx0ICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCX0sCgoJX2FjdGl2YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5hY3RpdmUuaXMoICIudWktc3RhdGUtZGlzYWJsZWQiICkgKSB7CgkJCWlmICggdGhpcy5hY3RpdmUuaXMoICJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddIiApICkgewoJCQkJdGhpcy5leHBhbmQoIGV2ZW50ICk7CgkJCX0gZWxzZSB7CgkJCQl0aGlzLnNlbGVjdCggZXZlbnQgKTsKCQkJfQoJCX0KCX0sCgoJcmVmcmVzaDogZnVuY3Rpb24oKSB7CgkJdmFyIG1lbnVzLCBpdGVtcywKCQkJdGhhdCA9IHRoaXMsCgkJCWljb24gPSB0aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSwKCQkJc3VibWVudXMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLm1lbnVzICk7CgoJCXRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggInVpLW1lbnUtaWNvbnMiLCAhIXRoaXMuZWxlbWVudC5maW5kKCAiLnVpLWljb24iICkubGVuZ3RoICk7CgoJCS8vIEluaXRpYWxpemUgbmVzdGVkIG1lbnVzCgkJc3VibWVudXMuZmlsdGVyKCAiOm5vdCgudWktbWVudSkiICkKCQkJLmFkZENsYXNzKCAidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktZnJvbnQiICkKCQkJLmhpZGUoKQoJCQkuYXR0cih7CgkJCQlyb2xlOiB0aGlzLm9wdGlvbnMucm9sZSwKCQkJCSJhcmlhLWhpZGRlbiI6ICJ0cnVlIiwKCQkJCSJhcmlhLWV4cGFuZGVkIjogImZhbHNlIgoJCQl9KQoJCQkuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBtZW51ID0gJCggdGhpcyApLAoJCQkJCWl0ZW0gPSBtZW51LnBhcmVudCgpLAoJCQkJCXN1Ym1lbnVDYXJhdCA9ICQoICI8c3Bhbj4iICkKCQkJCQkJLmFkZENsYXNzKCAidWktbWVudS1pY29uIHVpLWljb24gIiArIGljb24gKQoJCQkJCQkuZGF0YSggInVpLW1lbnUtc3VibWVudS1jYXJhdCIsIHRydWUgKTsKCgkJCQlpdGVtCgkJCQkJLmF0dHIoICJhcmlhLWhhc3BvcHVwIiwgInRydWUiICkKCQkJCQkucHJlcGVuZCggc3VibWVudUNhcmF0ICk7CgkJCQltZW51LmF0dHIoICJhcmlhLWxhYmVsbGVkYnkiLCBpdGVtLmF0dHIoICJpZCIgKSApOwoJCQl9KTsKCgkJbWVudXMgPSBzdWJtZW51cy5hZGQoIHRoaXMuZWxlbWVudCApOwoJCWl0ZW1zID0gbWVudXMuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICk7CgoJCS8vIEluaXRpYWxpemUgbWVudS1pdGVtcyBjb250YWluaW5nIHNwYWNlcyBhbmQvb3IgZGFzaGVzIG9ubHkgYXMgZGl2aWRlcnMKCQlpdGVtcy5ub3QoICIudWktbWVudS1pdGVtIiApLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBpdGVtID0gJCggdGhpcyApOwoJCQlpZiAoIHRoYXQuX2lzRGl2aWRlciggaXRlbSApICkgewoJCQkJaXRlbS5hZGRDbGFzcyggInVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtZGl2aWRlciIgKTsKCQkJfQoJCX0pOwoKCQkvLyBEb24ndCByZWZyZXNoIGxpc3QgaXRlbXMgdGhhdCBhcmUgYWxyZWFkeSBhZGFwdGVkCgkJaXRlbXMubm90KCAiLnVpLW1lbnUtaXRlbSwgLnVpLW1lbnUtZGl2aWRlciIgKQoJCQkuYWRkQ2xhc3MoICJ1aS1tZW51LWl0ZW0iICkKCQkJLnVuaXF1ZUlkKCkKCQkJLmF0dHIoewoJCQkJdGFiSW5kZXg6IC0xLAoJCQkJcm9sZTogdGhpcy5faXRlbVJvbGUoKQoJCQl9KTsKCgkJLy8gQWRkIGFyaWEtZGlzYWJsZWQgYXR0cmlidXRlIHRvIGFueSBkaXNhYmxlZCBtZW51IGl0ZW0KCQlpdGVtcy5maWx0ZXIoICIudWktc3RhdGUtZGlzYWJsZWQiICkuYXR0ciggImFyaWEtZGlzYWJsZWQiLCAidHJ1ZSIgKTsKCgkJLy8gSWYgdGhlIGFjdGl2ZSBpdGVtIGhhcyBiZWVuIHJlbW92ZWQsIGJsdXIgdGhlIG1lbnUKCQlpZiAoIHRoaXMuYWN0aXZlICYmICEkLmNvbnRhaW5zKCB0aGlzLmVsZW1lbnRbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkgewoJCQl0aGlzLmJsdXIoKTsKCQl9Cgl9LAoKCV9pdGVtUm9sZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHsKCQkJbWVudTogIm1lbnVpdGVtIiwKCQkJbGlzdGJveDogIm9wdGlvbiIKCQl9WyB0aGlzLm9wdGlvbnMucm9sZSBdOwoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQlpZiAoIGtleSA9PT0gImljb25zIiApIHsKCQkJdGhpcy5lbGVtZW50LmZpbmQoICIudWktbWVudS1pY29uIiApCgkJCQkucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51ICkKCQkJCS5hZGRDbGFzcyggdmFsdWUuc3VibWVudSApOwoJCX0KCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy5lbGVtZW50CgkJCQkudG9nZ2xlQ2xhc3MoICJ1aS1zdGF0ZS1kaXNhYmxlZCIsICEhdmFsdWUgKQoJCQkJLmF0dHIoICJhcmlhLWRpc2FibGVkIiwgdmFsdWUgKTsKCQl9CgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCX0sCgoJZm9jdXM6IGZ1bmN0aW9uKCBldmVudCwgaXRlbSApIHsKCQl2YXIgbmVzdGVkLCBmb2N1c2VkOwoJCXRoaXMuYmx1ciggZXZlbnQsIGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICJmb2N1cyIgKTsKCgkJdGhpcy5fc2Nyb2xsSW50b1ZpZXcoIGl0ZW0gKTsKCgkJdGhpcy5hY3RpdmUgPSBpdGVtLmZpcnN0KCk7CgkJZm9jdXNlZCA9IHRoaXMuYWN0aXZlLmFkZENsYXNzKCAidWktc3RhdGUtZm9jdXMiICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJLy8gT25seSB1cGRhdGUgYXJpYS1hY3RpdmVkZXNjZW5kYW50IGlmIHRoZXJlJ3MgYSByb2xlCgkJLy8gb3RoZXJ3aXNlIHdlIGFzc3VtZSBmb2N1cyBpcyBtYW5hZ2VkIGVsc2V3aGVyZQoJCWlmICggdGhpcy5vcHRpb25zLnJvbGUgKSB7CgkJCXRoaXMuZWxlbWVudC5hdHRyKCAiYXJpYS1hY3RpdmVkZXNjZW5kYW50IiwgZm9jdXNlZC5hdHRyKCAiaWQiICkgKTsKCQl9CgoJCS8vIEhpZ2hsaWdodCBhY3RpdmUgcGFyZW50IG1lbnUgaXRlbSwgaWYgYW55CgkJdGhpcy5hY3RpdmUKCQkJLnBhcmVudCgpCgkJCS5jbG9zZXN0KCAiLnVpLW1lbnUtaXRlbSIgKQoJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgoJCWlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gImtleWRvd24iICkgewoJCQl0aGlzLl9jbG9zZSgpOwoJCX0gZWxzZSB7CgkJCXRoaXMudGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCXRoaXMuX2Nsb3NlKCk7CgkJCX0sIHRoaXMuZGVsYXkgKTsKCQl9CgoJCW5lc3RlZCA9IGl0ZW0uY2hpbGRyZW4oICIudWktbWVudSIgKTsKCQlpZiAoIG5lc3RlZC5sZW5ndGggJiYgZXZlbnQgJiYgKCAvXm1vdXNlLy50ZXN0KCBldmVudC50eXBlICkgKSApIHsKCQkJdGhpcy5fc3RhcnRPcGVuaW5nKG5lc3RlZCk7CgkJfQoJCXRoaXMuYWN0aXZlTWVudSA9IGl0ZW0ucGFyZW50KCk7CgoJCXRoaXMuX3RyaWdnZXIoICJmb2N1cyIsIGV2ZW50LCB7IGl0ZW06IGl0ZW0gfSApOwoJfSwKCglfc2Nyb2xsSW50b1ZpZXc6IGZ1bmN0aW9uKCBpdGVtICkgewoJCXZhciBib3JkZXJUb3AsIHBhZGRpbmdUb3AsIG9mZnNldCwgc2Nyb2xsLCBlbGVtZW50SGVpZ2h0LCBpdGVtSGVpZ2h0OwoJCWlmICggdGhpcy5faGFzU2Nyb2xsKCkgKSB7CgkJCWJvcmRlclRvcCA9IHBhcnNlRmxvYXQoICQuY3NzKCB0aGlzLmFjdGl2ZU1lbnVbMF0sICJib3JkZXJUb3BXaWR0aCIgKSApIHx8IDA7CgkJCXBhZGRpbmdUb3AgPSBwYXJzZUZsb2F0KCAkLmNzcyggdGhpcy5hY3RpdmVNZW51WzBdLCAicGFkZGluZ1RvcCIgKSApIHx8IDA7CgkJCW9mZnNldCA9IGl0ZW0ub2Zmc2V0KCkudG9wIC0gdGhpcy5hY3RpdmVNZW51Lm9mZnNldCgpLnRvcCAtIGJvcmRlclRvcCAtIHBhZGRpbmdUb3A7CgkJCXNjcm9sbCA9IHRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoKTsKCQkJZWxlbWVudEhlaWdodCA9IHRoaXMuYWN0aXZlTWVudS5oZWlnaHQoKTsKCQkJaXRlbUhlaWdodCA9IGl0ZW0ub3V0ZXJIZWlnaHQoKTsKCgkJCWlmICggb2Zmc2V0IDwgMCApIHsKCQkJCXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoIHNjcm9sbCArIG9mZnNldCApOwoJCQl9IGVsc2UgaWYgKCBvZmZzZXQgKyBpdGVtSGVpZ2h0ID4gZWxlbWVudEhlaWdodCApIHsKCQkJCXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoIHNjcm9sbCArIG9mZnNldCAtIGVsZW1lbnRIZWlnaHQgKyBpdGVtSGVpZ2h0ICk7CgkJCX0KCQl9Cgl9LAoKCWJsdXI6IGZ1bmN0aW9uKCBldmVudCwgZnJvbUZvY3VzICkgewoJCWlmICggIWZyb21Gb2N1cyApIHsKCQkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJfQoKCQlpZiAoICF0aGlzLmFjdGl2ZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5hY3RpdmUucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQl0aGlzLmFjdGl2ZSA9IG51bGw7CgoJCXRoaXMuX3RyaWdnZXIoICJibHVyIiwgZXZlbnQsIHsgaXRlbTogdGhpcy5hY3RpdmUgfSApOwoJfSwKCglfc3RhcnRPcGVuaW5nOiBmdW5jdGlvbiggc3VibWVudSApIHsKCQljbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTsKCgkJLy8gRG9uJ3Qgb3BlbiBpZiBhbHJlYWR5IG9wZW4gZml4ZXMgYSBGaXJlZm94IGJ1ZyB0aGF0IGNhdXNlZCBhIC41IHBpeGVsCgkJLy8gc2hpZnQgaW4gdGhlIHN1Ym1lbnUgcG9zaXRpb24gd2hlbiBtb3VzaW5nIG92ZXIgdGhlIGNhcmF0IGljb24KCQlpZiAoIHN1Ym1lbnUuYXR0ciggImFyaWEtaGlkZGVuIiApICE9PSAidHJ1ZSIgKSB7CgkJCXJldHVybjsKCQl9CgoJCXRoaXMudGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJdGhpcy5fY2xvc2UoKTsKCQkJdGhpcy5fb3Blbiggc3VibWVudSApOwoJCX0sIHRoaXMuZGVsYXkgKTsKCX0sCgoJX29wZW46IGZ1bmN0aW9uKCBzdWJtZW51ICkgewoJCXZhciBwb3NpdGlvbiA9ICQuZXh0ZW5kKHsKCQkJb2Y6IHRoaXMuYWN0aXZlCgkJfSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uICk7CgoJCWNsZWFyVGltZW91dCggdGhpcy50aW1lciApOwoJCXRoaXMuZWxlbWVudC5maW5kKCAiLnVpLW1lbnUiICkubm90KCBzdWJtZW51LnBhcmVudHMoICIudWktbWVudSIgKSApCgkJCS5oaWRlKCkKCQkJLmF0dHIoICJhcmlhLWhpZGRlbiIsICJ0cnVlIiApOwoKCQlzdWJtZW51CgkJCS5zaG93KCkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWhpZGRlbiIgKQoJCQkuYXR0ciggImFyaWEtZXhwYW5kZWQiLCAidHJ1ZSIgKQoJCQkucG9zaXRpb24oIHBvc2l0aW9uICk7Cgl9LAoKCWNvbGxhcHNlQWxsOiBmdW5jdGlvbiggZXZlbnQsIGFsbCApIHsKCQljbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTsKCQl0aGlzLnRpbWVyID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCS8vIElmIHdlIHdlcmUgcGFzc2VkIGFuIGV2ZW50LCBsb29rIGZvciB0aGUgc3VibWVudSB0aGF0IGNvbnRhaW5zIHRoZSBldmVudAoJCQl2YXIgY3VycmVudE1lbnUgPSBhbGwgPyB0aGlzLmVsZW1lbnQgOgoJCQkJJCggZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggdGhpcy5lbGVtZW50LmZpbmQoICIudWktbWVudSIgKSApOwoKCQkJLy8gSWYgd2UgZm91bmQgbm8gdmFsaWQgc3VibWVudSBhbmNlc3RvciwgdXNlIHRoZSBtYWluIG1lbnUgdG8gY2xvc2UgYWxsIHN1YiBtZW51cyBhbnl3YXkKCQkJaWYgKCAhY3VycmVudE1lbnUubGVuZ3RoICkgewoJCQkJY3VycmVudE1lbnUgPSB0aGlzLmVsZW1lbnQ7CgkJCX0KCgkJCXRoaXMuX2Nsb3NlKCBjdXJyZW50TWVudSApOwoKCQkJdGhpcy5ibHVyKCBldmVudCApOwoJCQl0aGlzLmFjdGl2ZU1lbnUgPSBjdXJyZW50TWVudTsKCQl9LCB0aGlzLmRlbGF5ICk7Cgl9LAoKCS8vIFdpdGggbm8gYXJndW1lbnRzLCBjbG9zZXMgdGhlIGN1cnJlbnRseSBhY3RpdmUgbWVudSAtIGlmIG5vdGhpbmcgaXMgYWN0aXZlCgkvLyBpdCBjbG9zZXMgYWxsIG1lbnVzLiAgSWYgcGFzc2VkIGFuIGFyZ3VtZW50LCBpdCB3aWxsIHNlYXJjaCBmb3IgbWVudXMgQkVMT1cKCV9jbG9zZTogZnVuY3Rpb24oIHN0YXJ0TWVudSApIHsKCQlpZiAoICFzdGFydE1lbnUgKSB7CgkJCXN0YXJ0TWVudSA9IHRoaXMuYWN0aXZlID8gdGhpcy5hY3RpdmUucGFyZW50KCkgOiB0aGlzLmVsZW1lbnQ7CgkJfQoKCQlzdGFydE1lbnUKCQkJLmZpbmQoICIudWktbWVudSIgKQoJCQkJLmhpZGUoKQoJCQkJLmF0dHIoICJhcmlhLWhpZGRlbiIsICJ0cnVlIiApCgkJCQkuYXR0ciggImFyaWEtZXhwYW5kZWQiLCAiZmFsc2UiICkKCQkJLmVuZCgpCgkJCS5maW5kKCAiLnVpLXN0YXRlLWFjdGl2ZSIgKS5ub3QoICIudWktc3RhdGUtZm9jdXMiICkKCQkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCX0sCgoJX2Nsb3NlT25Eb2N1bWVudENsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJcmV0dXJuICEkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCAiLnVpLW1lbnUiICkubGVuZ3RoOwoJfSwKCglfaXNEaXZpZGVyOiBmdW5jdGlvbiggaXRlbSApIHsKCgkJLy8gTWF0Y2ggaHlwaGVuLCBlbSBkYXNoLCBlbiBkYXNoCgkJcmV0dXJuICEvW15cLVx1MjAxNFx1MjAxM1xzXS8udGVzdCggaXRlbS50ZXh0KCkgKTsKCX0sCgoJY29sbGFwc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgbmV3SXRlbSA9IHRoaXMuYWN0aXZlICYmCgkJCXRoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoICIudWktbWVudS1pdGVtIiwgdGhpcy5lbGVtZW50ICk7CgkJaWYgKCBuZXdJdGVtICYmIG5ld0l0ZW0ubGVuZ3RoICkgewoJCQl0aGlzLl9jbG9zZSgpOwoJCQl0aGlzLmZvY3VzKCBldmVudCwgbmV3SXRlbSApOwoJCX0KCX0sCgoJZXhwYW5kOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIG5ld0l0ZW0gPSB0aGlzLmFjdGl2ZSAmJgoJCQl0aGlzLmFjdGl2ZQoJCQkJLmNoaWxkcmVuKCAiLnVpLW1lbnUgIiApCgkJCQkuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkKCQkJCS5maXJzdCgpOwoKCQlpZiAoIG5ld0l0ZW0gJiYgbmV3SXRlbS5sZW5ndGggKSB7CgkJCXRoaXMuX29wZW4oIG5ld0l0ZW0ucGFyZW50KCkgKTsKCgkJCS8vIERlbGF5IHNvIEZpcmVmb3ggd2lsbCBub3QgaGlkZSBhY3RpdmVkZXNjZW5kYW50IGNoYW5nZSBpbiBleHBhbmRpbmcgc3VibWVudSBmcm9tIEFUCgkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5mb2N1cyggZXZlbnQsIG5ld0l0ZW0gKTsKCQkJfSk7CgkJfQoJfSwKCgluZXh0OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdGhpcy5fbW92ZSggIm5leHQiLCAiZmlyc3QiLCBldmVudCApOwoJfSwKCglwcmV2aW91czogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXRoaXMuX21vdmUoICJwcmV2IiwgImxhc3QiLCBldmVudCApOwoJfSwKCglpc0ZpcnN0SXRlbTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuYWN0aXZlICYmICF0aGlzLmFjdGl2ZS5wcmV2QWxsKCAiLnVpLW1lbnUtaXRlbSIgKS5sZW5ndGg7Cgl9LAoKCWlzTGFzdEl0ZW06IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmFjdGl2ZSAmJiAhdGhpcy5hY3RpdmUubmV4dEFsbCggIi51aS1tZW51LWl0ZW0iICkubGVuZ3RoOwoJfSwKCglfbW92ZTogZnVuY3Rpb24oIGRpcmVjdGlvbiwgZmlsdGVyLCBldmVudCApIHsKCQl2YXIgbmV4dDsKCQlpZiAoIHRoaXMuYWN0aXZlICkgewoJCQlpZiAoIGRpcmVjdGlvbiA9PT0gImZpcnN0IiB8fCBkaXJlY3Rpb24gPT09ICJsYXN0IiApIHsKCQkJCW5leHQgPSB0aGlzLmFjdGl2ZQoJCQkJCVsgZGlyZWN0aW9uID09PSAiZmlyc3QiID8gInByZXZBbGwiIDogIm5leHRBbGwiIF0oICIudWktbWVudS1pdGVtIiApCgkJCQkJLmVxKCAtMSApOwoJCQl9IGVsc2UgewoJCQkJbmV4dCA9IHRoaXMuYWN0aXZlCgkJCQkJWyBkaXJlY3Rpb24gKyAiQWxsIiBdKCAiLnVpLW1lbnUtaXRlbSIgKQoJCQkJCS5lcSggMCApOwoJCQl9CgkJfQoJCWlmICggIW5leHQgfHwgIW5leHQubGVuZ3RoIHx8ICF0aGlzLmFjdGl2ZSApIHsKCQkJbmV4dCA9IHRoaXMuYWN0aXZlTWVudS5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKVsgZmlsdGVyIF0oKTsKCQl9CgoJCXRoaXMuZm9jdXMoIGV2ZW50LCBuZXh0ICk7Cgl9LAoKCW5leHRQYWdlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGl0ZW0sIGJhc2UsIGhlaWdodDsKCgkJaWYgKCAhdGhpcy5hY3RpdmUgKSB7CgkJCXRoaXMubmV4dCggZXZlbnQgKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAoIHRoaXMuaXNMYXN0SXRlbSgpICkgewoJCQlyZXR1cm47CgkJfQoJCWlmICggdGhpcy5faGFzU2Nyb2xsKCkgKSB7CgkJCWJhc2UgPSB0aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3A7CgkJCWhlaWdodCA9IHRoaXMuZWxlbWVudC5oZWlnaHQoKTsKCQkJdGhpcy5hY3RpdmUubmV4dEFsbCggIi51aS1tZW51LWl0ZW0iICkuZWFjaChmdW5jdGlvbigpIHsKCQkJCWl0ZW0gPSAkKCB0aGlzICk7CgkJCQlyZXR1cm4gaXRlbS5vZmZzZXQoKS50b3AgLSBiYXNlIC0gaGVpZ2h0IDwgMDsKCQkJfSk7CgoJCQl0aGlzLmZvY3VzKCBldmVudCwgaXRlbSApOwoJCX0gZWxzZSB7CgkJCXRoaXMuZm9jdXMoIGV2ZW50LCB0aGlzLmFjdGl2ZU1lbnUuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkKCQkJCVsgIXRoaXMuYWN0aXZlID8gImZpcnN0IiA6ICJsYXN0IiBdKCkgKTsKCQl9Cgl9LAoKCXByZXZpb3VzUGFnZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBpdGVtLCBiYXNlLCBoZWlnaHQ7CgkJaWYgKCAhdGhpcy5hY3RpdmUgKSB7CgkJCXRoaXMubmV4dCggZXZlbnQgKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAoIHRoaXMuaXNGaXJzdEl0ZW0oKSApIHsKCQkJcmV0dXJuOwoJCX0KCQlpZiAoIHRoaXMuX2hhc1Njcm9sbCgpICkgewoJCQliYXNlID0gdGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wOwoJCQloZWlnaHQgPSB0aGlzLmVsZW1lbnQuaGVpZ2h0KCk7CgkJCXRoaXMuYWN0aXZlLnByZXZBbGwoICIudWktbWVudS1pdGVtIiApLmVhY2goZnVuY3Rpb24oKSB7CgkJCQlpdGVtID0gJCggdGhpcyApOwoJCQkJcmV0dXJuIGl0ZW0ub2Zmc2V0KCkudG9wIC0gYmFzZSArIGhlaWdodCA+IDA7CgkJCX0pOwoKCQkJdGhpcy5mb2N1cyggZXZlbnQsIGl0ZW0gKTsKCQl9IGVsc2UgewoJCQl0aGlzLmZvY3VzKCBldmVudCwgdGhpcy5hY3RpdmVNZW51LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLmZpcnN0KCkgKTsKCQl9Cgl9LAoKCV9oYXNTY3JvbGw6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSA8IHRoaXMuZWxlbWVudC5wcm9wKCAic2Nyb2xsSGVpZ2h0IiApOwoJfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkvLyBUT0RPOiBJdCBzaG91bGQgbmV2ZXIgYmUgcG9zc2libGUgdG8gbm90IGhhdmUgYW4gYWN0aXZlIGl0ZW0gYXQgdGhpcwoJCS8vIHBvaW50LCBidXQgdGhlIHRlc3RzIGRvbid0IHRyaWdnZXIgbW91c2VlbnRlciBiZWZvcmUgY2xpY2suCgkJdGhpcy5hY3RpdmUgPSB0aGlzLmFjdGl2ZSB8fCAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCAiLnVpLW1lbnUtaXRlbSIgKTsKCQl2YXIgdWkgPSB7IGl0ZW06IHRoaXMuYWN0aXZlIH07CgkJaWYgKCAhdGhpcy5hY3RpdmUuaGFzKCAiLnVpLW1lbnUiICkubGVuZ3RoICkgewoJCQl0aGlzLmNvbGxhcHNlQWxsKCBldmVudCwgdHJ1ZSApOwoJCX0KCQl0aGlzLl90cmlnZ2VyKCAic2VsZWN0IiwgZXZlbnQsIHVpICk7Cgl9Cn0pOwoKCi8qIQogKiBqUXVlcnkgVUkgQXV0b2NvbXBsZXRlIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2F1dG9jb21wbGV0ZS8KICovCgoKJC53aWRnZXQoICJ1aS5hdXRvY29tcGxldGUiLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCWRlZmF1bHRFbGVtZW50OiAiPGlucHV0PiIsCglvcHRpb25zOiB7CgkJYXBwZW5kVG86IG51bGwsCgkJYXV0b0ZvY3VzOiBmYWxzZSwKCQlkZWxheTogMzAwLAoJCW1pbkxlbmd0aDogMSwKCQlwb3NpdGlvbjogewoJCQlteTogImxlZnQgdG9wIiwKCQkJYXQ6ICJsZWZ0IGJvdHRvbSIsCgkJCWNvbGxpc2lvbjogIm5vbmUiCgkJfSwKCQlzb3VyY2U6IG51bGwsCgoJCS8vIGNhbGxiYWNrcwoJCWNoYW5nZTogbnVsbCwKCQljbG9zZTogbnVsbCwKCQlmb2N1czogbnVsbCwKCQlvcGVuOiBudWxsLAoJCXJlc3BvbnNlOiBudWxsLAoJCXNlYXJjaDogbnVsbCwKCQlzZWxlY3Q6IG51bGwKCX0sCgoJcmVxdWVzdEluZGV4OiAwLAoJcGVuZGluZzogMCwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQkvLyBTb21lIGJyb3dzZXJzIG9ubHkgcmVwZWF0IGtleWRvd24gZXZlbnRzLCBub3Qga2V5cHJlc3MgZXZlbnRzLAoJCS8vIHNvIHdlIHVzZSB0aGUgc3VwcHJlc3NLZXlQcmVzcyBmbGFnIHRvIGRldGVybWluZSBpZiB3ZSd2ZSBhbHJlYWR5CgkJLy8gaGFuZGxlZCB0aGUga2V5ZG93biBldmVudC4gIzcyNjkKCQkvLyBVbmZvcnR1bmF0ZWx5IHRoZSBjb2RlIGZvciAmIGluIGtleXByZXNzIGlzIHRoZSBzYW1lIGFzIHRoZSB1cCBhcnJvdywKCQkvLyBzbyB3ZSB1c2UgdGhlIHN1cHByZXNzS2V5UHJlc3NSZXBlYXQgZmxhZyB0byBhdm9pZCBoYW5kbGluZyBrZXlwcmVzcwoJCS8vIGV2ZW50cyB3aGVuIHdlIGtub3cgdGhlIGtleWRvd24gZXZlbnQgd2FzIHVzZWQgdG8gbW9kaWZ5IHRoZQoJCS8vIHNlYXJjaCB0ZXJtLiAjNzc5OQoJCXZhciBzdXBwcmVzc0tleVByZXNzLCBzdXBwcmVzc0tleVByZXNzUmVwZWF0LCBzdXBwcmVzc0lucHV0LAoJCQlub2RlTmFtZSA9IHRoaXMuZWxlbWVudFsgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksCgkJCWlzVGV4dGFyZWEgPSBub2RlTmFtZSA9PT0gInRleHRhcmVhIiwKCQkJaXNJbnB1dCA9IG5vZGVOYW1lID09PSAiaW5wdXQiOwoKCQl0aGlzLmlzTXVsdGlMaW5lID0KCQkJLy8gVGV4dGFyZWFzIGFyZSBhbHdheXMgbXVsdGktbGluZQoJCQlpc1RleHRhcmVhID8gdHJ1ZSA6CgkJCS8vIElucHV0cyBhcmUgYWx3YXlzIHNpbmdsZS1saW5lLCBldmVuIGlmIGluc2lkZSBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50CgkJCS8vIElFIGFsc28gdHJlYXRzIGlucHV0cyBhcyBjb250ZW50RWRpdGFibGUKCQkJaXNJbnB1dCA/IGZhbHNlIDoKCQkJLy8gQWxsIG90aGVyIGVsZW1lbnQgdHlwZXMgYXJlIGRldGVybWluZWQgYnkgd2hldGhlciBvciBub3QgdGhleSdyZSBjb250ZW50RWRpdGFibGUKCQkJdGhpcy5lbGVtZW50LnByb3AoICJpc0NvbnRlbnRFZGl0YWJsZSIgKTsKCgkJdGhpcy52YWx1ZU1ldGhvZCA9IHRoaXMuZWxlbWVudFsgaXNUZXh0YXJlYSB8fCBpc0lucHV0ID8gInZhbCIgOiAidGV4dCIgXTsKCQl0aGlzLmlzTmV3TWVudSA9IHRydWU7CgoJCXRoaXMuZWxlbWVudAoJCQkuYWRkQ2xhc3MoICJ1aS1hdXRvY29tcGxldGUtaW5wdXQiICkKCQkJLmF0dHIoICJhdXRvY29tcGxldGUiLCAib2ZmIiApOwoKCQl0aGlzLl9vbiggdGhpcy5lbGVtZW50LCB7CgkJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggdGhpcy5lbGVtZW50LnByb3AoICJyZWFkT25seSIgKSApIHsKCQkJCQlzdXBwcmVzc0tleVByZXNzID0gdHJ1ZTsKCQkJCQlzdXBwcmVzc0lucHV0ID0gdHJ1ZTsKCQkJCQlzdXBwcmVzc0tleVByZXNzUmVwZWF0ID0gdHJ1ZTsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IGZhbHNlOwoJCQkJc3VwcHJlc3NJbnB1dCA9IGZhbHNlOwoJCQkJc3VwcHJlc3NLZXlQcmVzc1JlcGVhdCA9IGZhbHNlOwoJCQkJdmFyIGtleUNvZGUgPSAkLnVpLmtleUNvZGU7CgkJCQlzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkgewoJCQkJY2FzZSBrZXlDb2RlLlBBR0VfVVA6CgkJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7CgkJCQkJdGhpcy5fbW92ZSggInByZXZpb3VzUGFnZSIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuUEFHRV9ET1dOOgoJCQkJCXN1cHByZXNzS2V5UHJlc3MgPSB0cnVlOwoJCQkJCXRoaXMuX21vdmUoICJuZXh0UGFnZSIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuVVA6CgkJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7CgkJCQkJdGhpcy5fa2V5RXZlbnQoICJwcmV2aW91cyIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuRE9XTjoKCQkJCQlzdXBwcmVzc0tleVByZXNzID0gdHJ1ZTsKCQkJCQl0aGlzLl9rZXlFdmVudCggIm5leHQiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBrZXlDb2RlLkVOVEVSOgoJCQkJCS8vIHdoZW4gbWVudSBpcyBvcGVuIGFuZCBoYXMgZm9jdXMKCQkJCQlpZiAoIHRoaXMubWVudS5hY3RpdmUgKSB7CgkJCQkJCS8vICM2MDU1IC0gT3BlcmEgc3RpbGwgYWxsb3dzIHRoZSBrZXlwcmVzcyB0byBvY2N1cgoJCQkJCQkvLyB3aGljaCBjYXVzZXMgZm9ybXMgdG8gc3VibWl0CgkJCQkJCXN1cHByZXNzS2V5UHJlc3MgPSB0cnVlOwoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCQl0aGlzLm1lbnUuc2VsZWN0KCBldmVudCApOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5UQUI6CgkJCQkJaWYgKCB0aGlzLm1lbnUuYWN0aXZlICkgewoJCQkJCQl0aGlzLm1lbnUuc2VsZWN0KCBldmVudCApOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5FU0NBUEU6CgkJCQkJaWYgKCB0aGlzLm1lbnUuZWxlbWVudC5pcyggIjp2aXNpYmxlIiApICkgewoJCQkJCQlpZiAoICF0aGlzLmlzTXVsdGlMaW5lICkgewoJCQkJCQkJdGhpcy5fdmFsdWUoIHRoaXMudGVybSApOwoJCQkJCQl9CgkJCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCQkJCS8vIERpZmZlcmVudCBicm93c2VycyBoYXZlIGRpZmZlcmVudCBkZWZhdWx0IGJlaGF2aW9yIGZvciBlc2NhcGUKCQkJCQkJLy8gU2luZ2xlIHByZXNzIGNhbiBtZWFuIHVuZG8gb3IgY2xlYXIKCQkJCQkJLy8gRG91YmxlIHByZXNzIGluIElFIG1lYW5zIGNsZWFyIHRoZSB3aG9sZSBmb3JtCgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlzdXBwcmVzc0tleVByZXNzUmVwZWF0ID0gdHJ1ZTsKCQkJCQkvLyBzZWFyY2ggdGltZW91dCBzaG91bGQgYmUgdHJpZ2dlcmVkIGJlZm9yZSB0aGUgaW5wdXQgdmFsdWUgaXMgY2hhbmdlZAoJCQkJCXRoaXMuX3NlYXJjaFRpbWVvdXQoIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0sCgkJCWtleXByZXNzOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlpZiAoIHN1cHByZXNzS2V5UHJlc3MgKSB7CgkJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IGZhbHNlOwoJCQkJCWlmICggIXRoaXMuaXNNdWx0aUxpbmUgfHwgdGhpcy5tZW51LmVsZW1lbnQuaXMoICI6dmlzaWJsZSIgKSApIHsKCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQl9CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJaWYgKCBzdXBwcmVzc0tleVByZXNzUmVwZWF0ICkgewoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQkvLyByZXBsaWNhdGUgc29tZSBrZXkgaGFuZGxlcnMgdG8gYWxsb3cgdGhlbSB0byByZXBlYXQgaW4gRmlyZWZveCBhbmQgT3BlcmEKCQkJCXZhciBrZXlDb2RlID0gJC51aS5rZXlDb2RlOwoJCQkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJCWNhc2Uga2V5Q29kZS5QQUdFX1VQOgoJCQkJCXRoaXMuX21vdmUoICJwcmV2aW91c1BhZ2UiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBrZXlDb2RlLlBBR0VfRE9XTjoKCQkJCQl0aGlzLl9tb3ZlKCAibmV4dFBhZ2UiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBrZXlDb2RlLlVQOgoJCQkJCXRoaXMuX2tleUV2ZW50KCAicHJldmlvdXMiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBrZXlDb2RlLkRPV046CgkJCQkJdGhpcy5fa2V5RXZlbnQoICJuZXh0IiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfSwKCQkJaW5wdXQ6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggc3VwcHJlc3NJbnB1dCApIHsKCQkJCQlzdXBwcmVzc0lucHV0ID0gZmFsc2U7CgkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQl0aGlzLl9zZWFyY2hUaW1lb3V0KCBldmVudCApOwoJCQl9LAoJCQlmb2N1czogZnVuY3Rpb24oKSB7CgkJCQl0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7CgkJCQl0aGlzLnByZXZpb3VzID0gdGhpcy5fdmFsdWUoKTsKCQkJfSwKCQkJYmx1cjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJaWYgKCB0aGlzLmNhbmNlbEJsdXIgKSB7CgkJCQkJZGVsZXRlIHRoaXMuY2FuY2VsQmx1cjsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJY2xlYXJUaW1lb3V0KCB0aGlzLnNlYXJjaGluZyApOwoJCQkJdGhpcy5jbG9zZSggZXZlbnQgKTsKCQkJCXRoaXMuX2NoYW5nZSggZXZlbnQgKTsKCQkJfQoJCX0pOwoKCQl0aGlzLl9pbml0U291cmNlKCk7CgkJdGhpcy5tZW51ID0gJCggIjx1bD4iICkKCQkJLmFkZENsYXNzKCAidWktYXV0b2NvbXBsZXRlIHVpLWZyb250IiApCgkJCS5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApCgkJCS5tZW51KHsKCQkJCS8vIGRpc2FibGUgQVJJQSBzdXBwb3J0LCB0aGUgbGl2ZSByZWdpb24gdGFrZXMgY2FyZSBvZiB0aGF0CgkJCQlyb2xlOiBudWxsCgkJCX0pCgkJCS5oaWRlKCkKCQkJLm1lbnUoICJpbnN0YW5jZSIgKTsKCgkJdGhpcy5fb24oIHRoaXMubWVudS5lbGVtZW50LCB7CgkJCW1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJLy8gcHJldmVudCBtb3ZpbmcgZm9jdXMgb3V0IG9mIHRoZSB0ZXh0IGZpZWxkCgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJCS8vIElFIGRvZXNuJ3QgcHJldmVudCBtb3ZpbmcgZm9jdXMgZXZlbiB3aXRoIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCQkJCS8vIHNvIHdlIHNldCBhIGZsYWcgdG8ga25vdyB3aGVuIHdlIHNob3VsZCBpZ25vcmUgdGhlIGJsdXIgZXZlbnQKCQkJCXRoaXMuY2FuY2VsQmx1ciA9IHRydWU7CgkJCQl0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCQlkZWxldGUgdGhpcy5jYW5jZWxCbHVyOwoJCQkJfSk7CgoJCQkJLy8gY2xpY2tpbmcgb24gdGhlIHNjcm9sbGJhciBjYXVzZXMgZm9jdXMgdG8gc2hpZnQgdG8gdGhlIGJvZHkKCQkJCS8vIGJ1dCB3ZSBjYW4ndCBkZXRlY3QgYSBtb3VzZXVwIG9yIGEgY2xpY2sgaW1tZWRpYXRlbHkgYWZ0ZXJ3YXJkCgkJCQkvLyBzbyB3ZSBoYXZlIHRvIHRyYWNrIHRoZSBuZXh0IG1vdXNlZG93biBhbmQgY2xvc2UgdGhlIG1lbnUgaWYKCQkJCS8vIHRoZSB1c2VyIGNsaWNrcyBzb21ld2hlcmUgb3V0c2lkZSBvZiB0aGUgYXV0b2NvbXBsZXRlCgkJCQl2YXIgbWVudUVsZW1lbnQgPSB0aGlzLm1lbnUuZWxlbWVudFsgMCBdOwoJCQkJaWYgKCAhJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggIi51aS1tZW51LWl0ZW0iICkubGVuZ3RoICkgewoJCQkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgdGhhdCA9IHRoaXM7CgkJCQkJCXRoaXMuZG9jdW1lbnQub25lKCAibW91c2Vkb3duIiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkJaWYgKCBldmVudC50YXJnZXQgIT09IHRoYXQuZWxlbWVudFsgMCBdICYmCgkJCQkJCQkJCWV2ZW50LnRhcmdldCAhPT0gbWVudUVsZW1lbnQgJiYKCQkJCQkJCQkJISQuY29udGFpbnMoIG1lbnVFbGVtZW50LCBldmVudC50YXJnZXQgKSApIHsKCQkJCQkJCQl0aGF0LmNsb3NlKCk7CgkJCQkJCQl9CgkJCQkJCX0pOwoJCQkJCX0pOwoJCQkJfQoJCQl9LAoJCQltZW51Zm9jdXM6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQl2YXIgbGFiZWwsIGl0ZW07CgkJCQkvLyBzdXBwb3J0OiBGaXJlZm94CgkJCQkvLyBQcmV2ZW50IGFjY2lkZW50YWwgYWN0aXZhdGlvbiBvZiBtZW51IGl0ZW1zIGluIEZpcmVmb3ggKCM3MDI0ICM5MTE4KQoJCQkJaWYgKCB0aGlzLmlzTmV3TWVudSApIHsKCQkJCQl0aGlzLmlzTmV3TWVudSA9IGZhbHNlOwoJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudCAmJiAvXm1vdXNlLy50ZXN0KCBldmVudC5vcmlnaW5hbEV2ZW50LnR5cGUgKSApIHsKCQkJCQkJdGhpcy5tZW51LmJsdXIoKTsKCgkJCQkJCXRoaXMuZG9jdW1lbnQub25lKCAibW91c2Vtb3ZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkkKCBldmVudC50YXJnZXQgKS50cmlnZ2VyKCBldmVudC5vcmlnaW5hbEV2ZW50ICk7CgkJCQkJCX0pOwoKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCgkJCQlpdGVtID0gdWkuaXRlbS5kYXRhKCAidWktYXV0b2NvbXBsZXRlLWl0ZW0iICk7CgkJCQlpZiAoIGZhbHNlICE9PSB0aGlzLl90cmlnZ2VyKCAiZm9jdXMiLCBldmVudCwgeyBpdGVtOiBpdGVtIH0gKSApIHsKCQkJCQkvLyB1c2UgdmFsdWUgdG8gbWF0Y2ggd2hhdCB3aWxsIGVuZCB1cCBpbiB0aGUgaW5wdXQsIGlmIGl0IHdhcyBhIGtleSBldmVudAoJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudCAmJiAvXmtleS8udGVzdCggZXZlbnQub3JpZ2luYWxFdmVudC50eXBlICkgKSB7CgkJCQkJCXRoaXMuX3ZhbHVlKCBpdGVtLnZhbHVlICk7CgkJCQkJfQoJCQkJfQoKCQkJCS8vIEFubm91bmNlIHRoZSB2YWx1ZSBpbiB0aGUgbGl2ZVJlZ2lvbgoJCQkJbGFiZWwgPSB1aS5pdGVtLmF0dHIoICJhcmlhLWxhYmVsIiApIHx8IGl0ZW0udmFsdWU7CgkJCQlpZiAoIGxhYmVsICYmICQudHJpbSggbGFiZWwgKS5sZW5ndGggKSB7CgkJCQkJdGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpOwoJCQkJCSQoICI8ZGl2PiIgKS50ZXh0KCBsYWJlbCApLmFwcGVuZFRvKCB0aGlzLmxpdmVSZWdpb24gKTsKCQkJCX0KCQkJfSwKCQkJbWVudXNlbGVjdDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsKCQkJCXZhciBpdGVtID0gdWkuaXRlbS5kYXRhKCAidWktYXV0b2NvbXBsZXRlLWl0ZW0iICksCgkJCQkJcHJldmlvdXMgPSB0aGlzLnByZXZpb3VzOwoKCQkJCS8vIG9ubHkgdHJpZ2dlciB3aGVuIGZvY3VzIHdhcyBsb3N0IChjbGljayBvbiBtZW51KQoJCQkJaWYgKCB0aGlzLmVsZW1lbnRbIDAgXSAhPT0gdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKSB7CgkJCQkJdGhpcy5lbGVtZW50LmZvY3VzKCk7CgkJCQkJdGhpcy5wcmV2aW91cyA9IHByZXZpb3VzOwoJCQkJCS8vICM2MTA5IC0gSUUgdHJpZ2dlcnMgdHdvIGZvY3VzIGV2ZW50cyBhbmQgdGhlIHNlY29uZAoJCQkJCS8vIGlzIGFzeW5jaHJvbm91cywgc28gd2UgbmVlZCB0byByZXNldCB0aGUgcHJldmlvdXMKCQkJCQkvLyB0ZXJtIHN5bmNocm9ub3VzbHkgYW5kIGFzeW5jaHJvbm91c2x5IDotKAoJCQkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJCQl0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7CgkJCQkJCXRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTsKCQkJCQl9KTsKCQkJCX0KCgkJCQlpZiAoIGZhbHNlICE9PSB0aGlzLl90cmlnZ2VyKCAic2VsZWN0IiwgZXZlbnQsIHsgaXRlbTogaXRlbSB9ICkgKSB7CgkJCQkJdGhpcy5fdmFsdWUoIGl0ZW0udmFsdWUgKTsKCQkJCX0KCQkJCS8vIHJlc2V0IHRoZSB0ZXJtIGFmdGVyIHRoZSBzZWxlY3QgZXZlbnQKCQkJCS8vIHRoaXMgYWxsb3dzIGN1c3RvbSBzZWxlY3QgaGFuZGxpbmcgdG8gd29yayBwcm9wZXJseQoJCQkJdGhpcy50ZXJtID0gdGhpcy5fdmFsdWUoKTsKCgkJCQl0aGlzLmNsb3NlKCBldmVudCApOwoJCQkJdGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtOwoJCQl9CgkJfSk7CgoJCXRoaXMubGl2ZVJlZ2lvbiA9ICQoICI8c3Bhbj4iLCB7CgkJCQlyb2xlOiAic3RhdHVzIiwKCQkJCSJhcmlhLWxpdmUiOiAiYXNzZXJ0aXZlIiwKCQkJCSJhcmlhLXJlbGV2YW50IjogImFkZGl0aW9ucyIKCQkJfSkKCQkJLmFkZENsYXNzKCAidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiApCgkJCS5hcHBlbmRUbyggdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkgKTsKCgkJLy8gdHVybmluZyBvZmYgYXV0b2NvbXBsZXRlIHByZXZlbnRzIHRoZSBicm93c2VyIGZyb20gcmVtZW1iZXJpbmcgdGhlCgkJLy8gdmFsdWUgd2hlbiBuYXZpZ2F0aW5nIHRocm91Z2ggaGlzdG9yeSwgc28gd2UgcmUtZW5hYmxlIGF1dG9jb21wbGV0ZQoJCS8vIGlmIHRoZSBwYWdlIGlzIHVubG9hZGVkIGJlZm9yZSB0aGUgd2lkZ2V0IGlzIGRlc3Ryb3llZC4gIzc3OTAKCQl0aGlzLl9vbiggdGhpcy53aW5kb3csIHsKCQkJYmVmb3JldW5sb2FkOiBmdW5jdGlvbigpIHsKCQkJCXRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCAiYXV0b2NvbXBsZXRlIiApOwoJCQl9CgkJfSk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQljbGVhclRpbWVvdXQoIHRoaXMuc2VhcmNoaW5nICk7CgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLWF1dG9jb21wbGV0ZS1pbnB1dCIgKQoJCQkucmVtb3ZlQXR0ciggImF1dG9jb21wbGV0ZSIgKTsKCQl0aGlzLm1lbnUuZWxlbWVudC5yZW1vdmUoKTsKCQl0aGlzLmxpdmVSZWdpb24ucmVtb3ZlKCk7Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7CgkJaWYgKCBrZXkgPT09ICJzb3VyY2UiICkgewoJCQl0aGlzLl9pbml0U291cmNlKCk7CgkJfQoJCWlmICgga2V5ID09PSAiYXBwZW5kVG8iICkgewoJCQl0aGlzLm1lbnUuZWxlbWVudC5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApOwoJCX0KCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiAmJiB2YWx1ZSAmJiB0aGlzLnhociApIHsKCQkJdGhpcy54aHIuYWJvcnQoKTsKCQl9Cgl9LAoKCV9hcHBlbmRUbzogZnVuY3Rpb24oKSB7CgkJdmFyIGVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXBwZW5kVG87CgoJCWlmICggZWxlbWVudCApIHsKCQkJZWxlbWVudCA9IGVsZW1lbnQuanF1ZXJ5IHx8IGVsZW1lbnQubm9kZVR5cGUgPwoJCQkJJCggZWxlbWVudCApIDoKCQkJCXRoaXMuZG9jdW1lbnQuZmluZCggZWxlbWVudCApLmVxKCAwICk7CgkJfQoKCQlpZiAoICFlbGVtZW50IHx8ICFlbGVtZW50WyAwIF0gKSB7CgkJCWVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCggIi51aS1mcm9udCIgKTsKCQl9CgoJCWlmICggIWVsZW1lbnQubGVuZ3RoICkgewoJCQllbGVtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHk7CgkJfQoKCQlyZXR1cm4gZWxlbWVudDsKCX0sCgoJX2luaXRTb3VyY2U6IGZ1bmN0aW9uKCkgewoJCXZhciBhcnJheSwgdXJsLAoJCQl0aGF0ID0gdGhpczsKCQlpZiAoICQuaXNBcnJheSggdGhpcy5vcHRpb25zLnNvdXJjZSApICkgewoJCQlhcnJheSA9IHRoaXMub3B0aW9ucy5zb3VyY2U7CgkJCXRoaXMuc291cmNlID0gZnVuY3Rpb24oIHJlcXVlc3QsIHJlc3BvbnNlICkgewoJCQkJcmVzcG9uc2UoICQudWkuYXV0b2NvbXBsZXRlLmZpbHRlciggYXJyYXksIHJlcXVlc3QudGVybSApICk7CgkJCX07CgkJfSBlbHNlIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2UgPT09ICJzdHJpbmciICkgewoJCQl1cmwgPSB0aGlzLm9wdGlvbnMuc291cmNlOwoJCQl0aGlzLnNvdXJjZSA9IGZ1bmN0aW9uKCByZXF1ZXN0LCByZXNwb25zZSApIHsKCQkJCWlmICggdGhhdC54aHIgKSB7CgkJCQkJdGhhdC54aHIuYWJvcnQoKTsKCQkJCX0KCQkJCXRoYXQueGhyID0gJC5hamF4KHsKCQkJCQl1cmw6IHVybCwKCQkJCQlkYXRhOiByZXF1ZXN0LAoJCQkJCWRhdGFUeXBlOiAianNvbiIsCgkJCQkJc3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7CgkJCQkJCXJlc3BvbnNlKCBkYXRhICk7CgkJCQkJfSwKCQkJCQllcnJvcjogZnVuY3Rpb24oKSB7CgkJCQkJCXJlc3BvbnNlKFtdKTsKCQkJCQl9CgkJCQl9KTsKCQkJfTsKCQl9IGVsc2UgewoJCQl0aGlzLnNvdXJjZSA9IHRoaXMub3B0aW9ucy5zb3VyY2U7CgkJfQoJfSwKCglfc2VhcmNoVGltZW91dDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWNsZWFyVGltZW91dCggdGhpcy5zZWFyY2hpbmcgKTsKCQl0aGlzLnNlYXJjaGluZyA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoKCQkJLy8gU2VhcmNoIGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCwgb3IgaWYgdGhlIHVzZXIgcmV0eXBlcyB0aGUgc2FtZSB2YWx1ZSAoc2VlICM3NDM0KQoJCQl2YXIgZXF1YWxWYWx1ZXMgPSB0aGlzLnRlcm0gPT09IHRoaXMuX3ZhbHVlKCksCgkJCQltZW51VmlzaWJsZSA9IHRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICksCgkJCQltb2RpZmllcktleSA9IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuc2hpZnRLZXk7CgoJCQlpZiAoICFlcXVhbFZhbHVlcyB8fCAoIGVxdWFsVmFsdWVzICYmICFtZW51VmlzaWJsZSAmJiAhbW9kaWZpZXJLZXkgKSApIHsKCQkJCXRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDsKCQkJCXRoaXMuc2VhcmNoKCBudWxsLCBldmVudCApOwoJCQl9CgkJfSwgdGhpcy5vcHRpb25zLmRlbGF5ICk7Cgl9LAoKCXNlYXJjaDogZnVuY3Rpb24oIHZhbHVlLCBldmVudCApIHsKCQl2YWx1ZSA9IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IHRoaXMuX3ZhbHVlKCk7CgoJCS8vIGFsd2F5cyBzYXZlIHRoZSBhY3R1YWwgdmFsdWUsIG5vdCB0aGUgb25lIHBhc3NlZCBhcyBhbiBhcmd1bWVudAoJCXRoaXMudGVybSA9IHRoaXMuX3ZhbHVlKCk7CgoJCWlmICggdmFsdWUubGVuZ3RoIDwgdGhpcy5vcHRpb25zLm1pbkxlbmd0aCApIHsKCQkJcmV0dXJuIHRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJfQoKCQlpZiAoIHRoaXMuX3RyaWdnZXIoICJzZWFyY2giLCBldmVudCApID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJcmV0dXJuIHRoaXMuX3NlYXJjaCggdmFsdWUgKTsKCX0sCgoJX3NlYXJjaDogZnVuY3Rpb24oIHZhbHVlICkgewoJCXRoaXMucGVuZGluZysrOwoJCXRoaXMuZWxlbWVudC5hZGRDbGFzcyggInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nIiApOwoJCXRoaXMuY2FuY2VsU2VhcmNoID0gZmFsc2U7CgoJCXRoaXMuc291cmNlKCB7IHRlcm06IHZhbHVlIH0sIHRoaXMuX3Jlc3BvbnNlKCkgKTsKCX0sCgoJX3Jlc3BvbnNlOiBmdW5jdGlvbigpIHsKCQl2YXIgaW5kZXggPSArK3RoaXMucmVxdWVzdEluZGV4OwoKCQlyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggY29udGVudCApIHsKCQkJaWYgKCBpbmRleCA9PT0gdGhpcy5yZXF1ZXN0SW5kZXggKSB7CgkJCQl0aGlzLl9fcmVzcG9uc2UoIGNvbnRlbnQgKTsKCQkJfQoKCQkJdGhpcy5wZW5kaW5nLS07CgkJCWlmICggIXRoaXMucGVuZGluZyApIHsKCQkJCXRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nIiApOwoJCQl9CgkJfSwgdGhpcyApOwoJfSwKCglfX3Jlc3BvbnNlOiBmdW5jdGlvbiggY29udGVudCApIHsKCQlpZiAoIGNvbnRlbnQgKSB7CgkJCWNvbnRlbnQgPSB0aGlzLl9ub3JtYWxpemUoIGNvbnRlbnQgKTsKCQl9CgkJdGhpcy5fdHJpZ2dlciggInJlc3BvbnNlIiwgbnVsbCwgeyBjb250ZW50OiBjb250ZW50IH0gKTsKCQlpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgY29udGVudCAmJiBjb250ZW50Lmxlbmd0aCAmJiAhdGhpcy5jYW5jZWxTZWFyY2ggKSB7CgkJCXRoaXMuX3N1Z2dlc3QoIGNvbnRlbnQgKTsKCQkJdGhpcy5fdHJpZ2dlciggIm9wZW4iICk7CgkJfSBlbHNlIHsKCQkJLy8gdXNlIC5fY2xvc2UoKSBpbnN0ZWFkIG9mIC5jbG9zZSgpIHNvIHdlIGRvbid0IGNhbmNlbCBmdXR1cmUgc2VhcmNoZXMKCQkJdGhpcy5fY2xvc2UoKTsKCQl9Cgl9LAoKCWNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdGhpcy5jYW5jZWxTZWFyY2ggPSB0cnVlOwoJCXRoaXMuX2Nsb3NlKCBldmVudCApOwoJfSwKCglfY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoIHRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICkgKSB7CgkJCXRoaXMubWVudS5lbGVtZW50LmhpZGUoKTsKCQkJdGhpcy5tZW51LmJsdXIoKTsKCQkJdGhpcy5pc05ld01lbnUgPSB0cnVlOwoJCQl0aGlzLl90cmlnZ2VyKCAiY2xvc2UiLCBldmVudCApOwoJCX0KCX0sCgoJX2NoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggdGhpcy5wcmV2aW91cyAhPT0gdGhpcy5fdmFsdWUoKSApIHsKCQkJdGhpcy5fdHJpZ2dlciggImNoYW5nZSIsIGV2ZW50LCB7IGl0ZW06IHRoaXMuc2VsZWN0ZWRJdGVtIH0gKTsKCQl9Cgl9LAoKCV9ub3JtYWxpemU6IGZ1bmN0aW9uKCBpdGVtcyApIHsKCQkvLyBhc3N1bWUgYWxsIGl0ZW1zIGhhdmUgdGhlIHJpZ2h0IGZvcm1hdCB3aGVuIHRoZSBmaXJzdCBpdGVtIGlzIGNvbXBsZXRlCgkJaWYgKCBpdGVtcy5sZW5ndGggJiYgaXRlbXNbIDAgXS5sYWJlbCAmJiBpdGVtc1sgMCBdLnZhbHVlICkgewoJCQlyZXR1cm4gaXRlbXM7CgkJfQoJCXJldHVybiAkLm1hcCggaXRlbXMsIGZ1bmN0aW9uKCBpdGVtICkgewoJCQlpZiAoIHR5cGVvZiBpdGVtID09PSAic3RyaW5nIiApIHsKCQkJCXJldHVybiB7CgkJCQkJbGFiZWw6IGl0ZW0sCgkJCQkJdmFsdWU6IGl0ZW0KCQkJCX07CgkJCX0KCQkJcmV0dXJuICQuZXh0ZW5kKCB7fSwgaXRlbSwgewoJCQkJbGFiZWw6IGl0ZW0ubGFiZWwgfHwgaXRlbS52YWx1ZSwKCQkJCXZhbHVlOiBpdGVtLnZhbHVlIHx8IGl0ZW0ubGFiZWwKCQkJfSk7CgkJfSk7Cgl9LAoKCV9zdWdnZXN0OiBmdW5jdGlvbiggaXRlbXMgKSB7CgkJdmFyIHVsID0gdGhpcy5tZW51LmVsZW1lbnQuZW1wdHkoKTsKCQl0aGlzLl9yZW5kZXJNZW51KCB1bCwgaXRlbXMgKTsKCQl0aGlzLmlzTmV3TWVudSA9IHRydWU7CgkJdGhpcy5tZW51LnJlZnJlc2goKTsKCgkJLy8gc2l6ZSBhbmQgcG9zaXRpb24gbWVudQoJCXVsLnNob3coKTsKCQl0aGlzLl9yZXNpemVNZW51KCk7CgkJdWwucG9zaXRpb24oICQuZXh0ZW5kKHsKCQkJb2Y6IHRoaXMuZWxlbWVudAoJCX0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApICk7CgoJCWlmICggdGhpcy5vcHRpb25zLmF1dG9Gb2N1cyApIHsKCQkJdGhpcy5tZW51Lm5leHQoKTsKCQl9Cgl9LAoKCV9yZXNpemVNZW51OiBmdW5jdGlvbigpIHsKCQl2YXIgdWwgPSB0aGlzLm1lbnUuZWxlbWVudDsKCQl1bC5vdXRlcldpZHRoKCBNYXRoLm1heCgKCQkJLy8gRmlyZWZveCB3cmFwcyBsb25nIHRleHQgKHBvc3NpYmx5IGEgcm91bmRpbmcgYnVnKQoJCQkvLyBzbyB3ZSBhZGQgMXB4IHRvIGF2b2lkIHRoZSB3cmFwcGluZyAoIzc1MTMpCgkJCXVsLndpZHRoKCAiIiApLm91dGVyV2lkdGgoKSArIDEsCgkJCXRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkKCQkpICk7Cgl9LAoKCV9yZW5kZXJNZW51OiBmdW5jdGlvbiggdWwsIGl0ZW1zICkgewoJCXZhciB0aGF0ID0gdGhpczsKCQkkLmVhY2goIGl0ZW1zLCBmdW5jdGlvbiggaW5kZXgsIGl0ZW0gKSB7CgkJCXRoYXQuX3JlbmRlckl0ZW1EYXRhKCB1bCwgaXRlbSApOwoJCX0pOwoJfSwKCglfcmVuZGVySXRlbURhdGE6IGZ1bmN0aW9uKCB1bCwgaXRlbSApIHsKCQlyZXR1cm4gdGhpcy5fcmVuZGVySXRlbSggdWwsIGl0ZW0gKS5kYXRhKCAidWktYXV0b2NvbXBsZXRlLWl0ZW0iLCBpdGVtICk7Cgl9LAoKCV9yZW5kZXJJdGVtOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7CgkJcmV0dXJuICQoICI8bGk+IiApLnRleHQoIGl0ZW0ubGFiZWwgKS5hcHBlbmRUbyggdWwgKTsKCX0sCgoJX21vdmU6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGV2ZW50ICkgewoJCWlmICggIXRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICkgKSB7CgkJCXRoaXMuc2VhcmNoKCBudWxsLCBldmVudCApOwoJCQlyZXR1cm47CgkJfQoJCWlmICggdGhpcy5tZW51LmlzRmlyc3RJdGVtKCkgJiYgL15wcmV2aW91cy8udGVzdCggZGlyZWN0aW9uICkgfHwKCQkJCXRoaXMubWVudS5pc0xhc3RJdGVtKCkgJiYgL15uZXh0Ly50ZXN0KCBkaXJlY3Rpb24gKSApIHsKCgkJCWlmICggIXRoaXMuaXNNdWx0aUxpbmUgKSB7CgkJCQl0aGlzLl92YWx1ZSggdGhpcy50ZXJtICk7CgkJCX0KCgkJCXRoaXMubWVudS5ibHVyKCk7CgkJCXJldHVybjsKCQl9CgkJdGhpcy5tZW51WyBkaXJlY3Rpb24gXSggZXZlbnQgKTsKCX0sCgoJd2lkZ2V0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5tZW51LmVsZW1lbnQ7Cgl9LAoKCV92YWx1ZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMudmFsdWVNZXRob2QuYXBwbHkoIHRoaXMuZWxlbWVudCwgYXJndW1lbnRzICk7Cgl9LAoKCV9rZXlFdmVudDogZnVuY3Rpb24oIGtleUV2ZW50LCBldmVudCApIHsKCQlpZiAoICF0aGlzLmlzTXVsdGlMaW5lIHx8IHRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICkgKSB7CgkJCXRoaXMuX21vdmUoIGtleUV2ZW50LCBldmVudCApOwoKCQkJLy8gcHJldmVudHMgbW92aW5nIGN1cnNvciB0byBiZWdpbm5pbmcvZW5kIG9mIHRoZSB0ZXh0IGZpZWxkIGluIHNvbWUgYnJvd3NlcnMKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQl9Cgl9Cn0pOwoKJC5leHRlbmQoICQudWkuYXV0b2NvbXBsZXRlLCB7Cgllc2NhcGVSZWdleDogZnVuY3Rpb24oIHZhbHVlICkgewoJCXJldHVybiB2YWx1ZS5yZXBsYWNlKCAvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywgIlxcJCYiICk7Cgl9LAoJZmlsdGVyOiBmdW5jdGlvbiggYXJyYXksIHRlcm0gKSB7CgkJdmFyIG1hdGNoZXIgPSBuZXcgUmVnRXhwKCAkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCggdGVybSApLCAiaSIgKTsKCQlyZXR1cm4gJC5ncmVwKCBhcnJheSwgZnVuY3Rpb24oIHZhbHVlICkgewoJCQlyZXR1cm4gbWF0Y2hlci50ZXN0KCB2YWx1ZS5sYWJlbCB8fCB2YWx1ZS52YWx1ZSB8fCB2YWx1ZSApOwoJCX0pOwoJfQp9KTsKCi8vIGxpdmUgcmVnaW9uIGV4dGVuc2lvbiwgYWRkaW5nIGEgYG1lc3NhZ2VzYCBvcHRpb24KLy8gTk9URTogVGhpcyBpcyBhbiBleHBlcmltZW50YWwgQVBJLiBXZSBhcmUgc3RpbGwgaW52ZXN0aWdhdGluZwovLyBhIGZ1bGwgc29sdXRpb24gZm9yIHN0cmluZyBtYW5pcHVsYXRpb24gYW5kIGludGVybmF0aW9uYWxpemF0aW9uLgokLndpZGdldCggInVpLmF1dG9jb21wbGV0ZSIsICQudWkuYXV0b2NvbXBsZXRlLCB7CglvcHRpb25zOiB7CgkJbWVzc2FnZXM6IHsKCQkJbm9SZXN1bHRzOiAiTm8gc2VhcmNoIHJlc3VsdHMuIiwKCQkJcmVzdWx0czogZnVuY3Rpb24oIGFtb3VudCApIHsKCQkJCXJldHVybiBhbW91bnQgKyAoIGFtb3VudCA+IDEgPyAiIHJlc3VsdHMgYXJlIiA6ICIgcmVzdWx0IGlzIiApICsKCQkJCQkiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIjsKCQkJfQoJCX0KCX0sCgoJX19yZXNwb25zZTogZnVuY3Rpb24oIGNvbnRlbnQgKSB7CgkJdmFyIG1lc3NhZ2U7CgkJdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7CgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5jYW5jZWxTZWFyY2ggKSB7CgkJCXJldHVybjsKCQl9CgkJaWYgKCBjb250ZW50ICYmIGNvbnRlbnQubGVuZ3RoICkgewoJCQltZXNzYWdlID0gdGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJlc3VsdHMoIGNvbnRlbnQubGVuZ3RoICk7CgkJfSBlbHNlIHsKCQkJbWVzc2FnZSA9IHRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHM7CgkJfQoJCXRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKTsKCQkkKCAiPGRpdj4iICkudGV4dCggbWVzc2FnZSApLmFwcGVuZFRvKCB0aGlzLmxpdmVSZWdpb24gKTsKCX0KfSk7Cgp2YXIgYXV0b2NvbXBsZXRlID0gJC51aS5hdXRvY29tcGxldGU7CgoKLyohCiAqIGpRdWVyeSBVSSBCdXR0b24gMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vYnV0dG9uLwogKi8KCgp2YXIgbGFzdEFjdGl2ZSwKCWJhc2VDbGFzc2VzID0gInVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIiwKCXR5cGVDbGFzc2VzID0gInVpLWJ1dHRvbi1pY29ucy1vbmx5IHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktYnV0dG9uLXRleHQtaWNvbnMgdWktYnV0dG9uLXRleHQtaWNvbi1wcmltYXJ5IHVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IHVpLWJ1dHRvbi10ZXh0LW9ubHkiLAoJZm9ybVJlc2V0SGFuZGxlciA9IGZ1bmN0aW9uKCkgewoJCXZhciBmb3JtID0gJCggdGhpcyApOwoJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCWZvcm0uZmluZCggIjp1aS1idXR0b24iICkuYnV0dG9uKCAicmVmcmVzaCIgKTsKCQl9LCAxICk7Cgl9LAoJcmFkaW9Hcm91cCA9IGZ1bmN0aW9uKCByYWRpbyApIHsKCQl2YXIgbmFtZSA9IHJhZGlvLm5hbWUsCgkJCWZvcm0gPSByYWRpby5mb3JtLAoJCQlyYWRpb3MgPSAkKCBbXSApOwoJCWlmICggbmFtZSApIHsKCQkJbmFtZSA9IG5hbWUucmVwbGFjZSggLycvZywgIlxcJyIgKTsKCQkJaWYgKCBmb3JtICkgewoJCQkJcmFkaW9zID0gJCggZm9ybSApLmZpbmQoICJbbmFtZT0nIiArIG5hbWUgKyAiJ11bdHlwZT1yYWRpb10iICk7CgkJCX0gZWxzZSB7CgkJCQlyYWRpb3MgPSAkKCAiW25hbWU9JyIgKyBuYW1lICsgIiddW3R5cGU9cmFkaW9dIiwgcmFkaW8ub3duZXJEb2N1bWVudCApCgkJCQkJLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuICF0aGlzLmZvcm07CgkJCQkJfSk7CgkJCX0KCQl9CgkJcmV0dXJuIHJhZGlvczsKCX07CgokLndpZGdldCggInVpLmJ1dHRvbiIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJZGVmYXVsdEVsZW1lbnQ6ICI8YnV0dG9uPiIsCglvcHRpb25zOiB7CgkJZGlzYWJsZWQ6IG51bGwsCgkJdGV4dDogdHJ1ZSwKCQlsYWJlbDogbnVsbCwKCQlpY29uczogewoJCQlwcmltYXJ5OiBudWxsLAoJCQlzZWNvbmRhcnk6IG51bGwKCQl9Cgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJdGhpcy5lbGVtZW50LmNsb3Nlc3QoICJmb3JtIiApCgkJCS51bmJpbmQoICJyZXNldCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlICkKCQkJLmJpbmQoICJyZXNldCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmb3JtUmVzZXRIYW5kbGVyICk7CgoJCWlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5kaXNhYmxlZCAhPT0gImJvb2xlYW4iICkgewoJCQl0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSAhIXRoaXMuZWxlbWVudC5wcm9wKCAiZGlzYWJsZWQiICk7CgkJfSBlbHNlIHsKCQkJdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIsIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApOwoJCX0KCgkJdGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpOwoJCXRoaXMuaGFzVGl0bGUgPSAhIXRoaXMuYnV0dG9uRWxlbWVudC5hdHRyKCAidGl0bGUiICk7CgoJCXZhciB0aGF0ID0gdGhpcywKCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJdG9nZ2xlQnV0dG9uID0gdGhpcy50eXBlID09PSAiY2hlY2tib3giIHx8IHRoaXMudHlwZSA9PT0gInJhZGlvIiwKCQkJYWN0aXZlQ2xhc3MgPSAhdG9nZ2xlQnV0dG9uID8gInVpLXN0YXRlLWFjdGl2ZSIgOiAiIjsKCgkJaWYgKCBvcHRpb25zLmxhYmVsID09PSBudWxsICkgewoJCQlvcHRpb25zLmxhYmVsID0gKHRoaXMudHlwZSA9PT0gImlucHV0IiA/IHRoaXMuYnV0dG9uRWxlbWVudC52YWwoKSA6IHRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpOwoJCX0KCgkJdGhpcy5faG92ZXJhYmxlKCB0aGlzLmJ1dHRvbkVsZW1lbnQgKTsKCgkJdGhpcy5idXR0b25FbGVtZW50CgkJCS5hZGRDbGFzcyggYmFzZUNsYXNzZXMgKQoJCQkuYXR0ciggInJvbGUiLCAiYnV0dG9uIiApCgkJCS5iaW5kKCAibW91c2VlbnRlciIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQlpZiAoIHRoaXMgPT09IGxhc3RBY3RpdmUgKSB7CgkJCQkJJCggdGhpcyApLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJfQoJCQl9KQoJCQkuYmluZCggIm1vdXNlbGVhdmUiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQlpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCBhY3RpdmVDbGFzcyApOwoJCQl9KQoJCQkuYmluZCggImNsaWNrIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCWV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCQkJfQoJCQl9KTsKCgkJLy8gQ2FuJ3QgdXNlIF9mb2N1c2FibGUoKSBiZWNhdXNlIHRoZSBlbGVtZW50IHRoYXQgcmVjZWl2ZXMgZm9jdXMKCQkvLyBhbmQgdGhlIGVsZW1lbnQgdGhhdCBnZXRzIHRoZSB1aS1zdGF0ZS1mb2N1cyBjbGFzcyBhcmUgZGlmZmVyZW50CgkJdGhpcy5fb24oewoJCQlmb2N1czogZnVuY3Rpb24oKSB7CgkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJfSwKCQkJYmx1cjogZnVuY3Rpb24oKSB7CgkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJfQoJCX0pOwoKCQlpZiAoIHRvZ2dsZUJ1dHRvbiApIHsKCQkJdGhpcy5lbGVtZW50LmJpbmQoICJjaGFuZ2UiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQl0aGF0LnJlZnJlc2goKTsKCQkJfSk7CgkJfQoKCQlpZiAoIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiApIHsKCQkJdGhpcy5idXR0b25FbGVtZW50LmJpbmQoICJjbGljayIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSBpZiAoIHRoaXMudHlwZSA9PT0gInJhZGlvIiApIHsKCQkJdGhpcy5idXR0b25FbGVtZW50LmJpbmQoICJjbGljayIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQl0aGF0LmJ1dHRvbkVsZW1lbnQuYXR0ciggImFyaWEtcHJlc3NlZCIsICJ0cnVlIiApOwoKCQkJCXZhciByYWRpbyA9IHRoYXQuZWxlbWVudFsgMCBdOwoJCQkJcmFkaW9Hcm91cCggcmFkaW8gKQoJCQkJCS5ub3QoIHJhZGlvICkKCQkJCQkubWFwKGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gJCggdGhpcyApLmJ1dHRvbiggIndpZGdldCIgKVsgMCBdOwoJCQkJCX0pCgkJCQkJLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApCgkJCQkJLmF0dHIoICJhcmlhLXByZXNzZWQiLCAiZmFsc2UiICk7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCXRoaXMuYnV0dG9uRWxlbWVudAoJCQkJLmJpbmQoICJtb3VzZWRvd24iICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBvcHRpb25zLmRpc2FibGVkICkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJCSQoIHRoaXMgKS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCQlsYXN0QWN0aXZlID0gdGhpczsKCQkJCQl0aGF0LmRvY3VtZW50Lm9uZSggIm1vdXNldXAiLCBmdW5jdGlvbigpIHsKCQkJCQkJbGFzdEFjdGl2ZSA9IG51bGw7CgkJCQkJfSk7CgkJCQl9KQoJCQkJLmJpbmQoICJtb3VzZXVwIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkgewoJCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCQkkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQl9KQoJCQkJLmJpbmQoICJrZXlkb3duIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaWYgKCBvcHRpb25zLmRpc2FibGVkICkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJCWlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlNQQUNFIHx8IGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FTlRFUiApIHsKCQkJCQkJJCggdGhpcyApLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJCX0KCQkJCX0pCgkJCQkvLyBzZWUgIzg1NTksIHdlIGJpbmQgdG8gYmx1ciBoZXJlIGluIGNhc2UgdGhlIGJ1dHRvbiBlbGVtZW50IGxvc2VzCgkJCQkvLyBmb2N1cyBiZXR3ZWVuIGtleWRvd24gYW5kIGtleXVwLCBpdCB3b3VsZCBiZSBsZWZ0IGluIGFuICJhY3RpdmUiIHN0YXRlCgkJCQkuYmluZCggImtleXVwIiArIHRoaXMuZXZlbnROYW1lc3BhY2UgKyAiIGJsdXIiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJfSk7CgoJCQlpZiAoIHRoaXMuYnV0dG9uRWxlbWVudC5pcygiYSIpICkgewoJCQkJdGhpcy5idXR0b25FbGVtZW50LmtleXVwKGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuU1BBQ0UgKSB7CgkJCQkJCS8vIFRPRE8gcGFzcyB0aHJvdWdoIG9yaWdpbmFsIGV2ZW50IGNvcnJlY3RseSAoanVzdCBhcyAybmQgYXJndW1lbnQgZG9lc24ndCB3b3JrKQoJCQkJCQkkKCB0aGlzICkuY2xpY2soKTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoJCX0KCgkJdGhpcy5fc2V0T3B0aW9uKCAiZGlzYWJsZWQiLCBvcHRpb25zLmRpc2FibGVkICk7CgkJdGhpcy5fcmVzZXRCdXR0b24oKTsKCX0sCgoJX2RldGVybWluZUJ1dHRvblR5cGU6IGZ1bmN0aW9uKCkgewoJCXZhciBhbmNlc3RvciwgbGFiZWxTZWxlY3RvciwgY2hlY2tlZDsKCgkJaWYgKCB0aGlzLmVsZW1lbnQuaXMoIlt0eXBlPWNoZWNrYm94XSIpICkgewoJCQl0aGlzLnR5cGUgPSAiY2hlY2tib3giOwoJCX0gZWxzZSBpZiAoIHRoaXMuZWxlbWVudC5pcygiW3R5cGU9cmFkaW9dIikgKSB7CgkJCXRoaXMudHlwZSA9ICJyYWRpbyI7CgkJfSBlbHNlIGlmICggdGhpcy5lbGVtZW50LmlzKCJpbnB1dCIpICkgewoJCQl0aGlzLnR5cGUgPSAiaW5wdXQiOwoJCX0gZWxzZSB7CgkJCXRoaXMudHlwZSA9ICJidXR0b24iOwoJCX0KCgkJaWYgKCB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgfHwgdGhpcy50eXBlID09PSAicmFkaW8iICkgewoJCQkvLyB3ZSBkb24ndCBzZWFyY2ggYWdhaW5zdCB0aGUgZG9jdW1lbnQgaW4gY2FzZSB0aGUgZWxlbWVudAoJCQkvLyBpcyBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgRE9NCgkJCWFuY2VzdG9yID0gdGhpcy5lbGVtZW50LnBhcmVudHMoKS5sYXN0KCk7CgkJCWxhYmVsU2VsZWN0b3IgPSAibGFiZWxbZm9yPSciICsgdGhpcy5lbGVtZW50LmF0dHIoImlkIikgKyAiJ10iOwoJCQl0aGlzLmJ1dHRvbkVsZW1lbnQgPSBhbmNlc3Rvci5maW5kKCBsYWJlbFNlbGVjdG9yICk7CgkJCWlmICggIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGggKSB7CgkJCQlhbmNlc3RvciA9IGFuY2VzdG9yLmxlbmd0aCA/IGFuY2VzdG9yLnNpYmxpbmdzKCkgOiB0aGlzLmVsZW1lbnQuc2libGluZ3MoKTsKCQkJCXRoaXMuYnV0dG9uRWxlbWVudCA9IGFuY2VzdG9yLmZpbHRlciggbGFiZWxTZWxlY3RvciApOwoJCQkJaWYgKCAhdGhpcy5idXR0b25FbGVtZW50Lmxlbmd0aCApIHsKCQkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQgPSBhbmNlc3Rvci5maW5kKCBsYWJlbFNlbGVjdG9yICk7CgkJCQl9CgkJCX0KCQkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCAidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiApOwoKCQkJY2hlY2tlZCA9IHRoaXMuZWxlbWVudC5pcyggIjpjaGVja2VkIiApOwoJCQlpZiAoIGNoZWNrZWQgKSB7CgkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCX0KCQkJdGhpcy5idXR0b25FbGVtZW50LnByb3AoICJhcmlhLXByZXNzZWQiLCBjaGVja2VkICk7CgkJfSBlbHNlIHsKCQkJdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5lbGVtZW50OwoJCX0KCX0sCgoJd2lkZ2V0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5idXR0b25FbGVtZW50OwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIgKTsKCQl0aGlzLmJ1dHRvbkVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCBiYXNlQ2xhc3NlcyArICIgdWktc3RhdGUtYWN0aXZlICIgKyB0eXBlQ2xhc3NlcyApCgkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtcHJlc3NlZCIgKQoJCQkuaHRtbCggdGhpcy5idXR0b25FbGVtZW50LmZpbmQoIi51aS1idXR0b24tdGV4dCIpLmh0bWwoKSApOwoKCQlpZiAoICF0aGlzLmhhc1RpdGxlICkgewoJCQl0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0ciggInRpdGxlIiApOwoJCX0KCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiwgISF2YWx1ZSApOwoJCQl0aGlzLmVsZW1lbnQucHJvcCggImRpc2FibGVkIiwgISF2YWx1ZSApOwoJCQlpZiAoIHZhbHVlICkgewoJCQkJaWYgKCB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgfHwgdGhpcy50eXBlID09PSAicmFkaW8iICkgewoJCQkJCXRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWZvY3VzIiApOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyB1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuOwoJCX0KCQl0aGlzLl9yZXNldEJ1dHRvbigpOwoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbigpIHsKCQkvL1NlZSAjODIzNyAmICM4ODI4CgkJdmFyIGlzRGlzYWJsZWQgPSB0aGlzLmVsZW1lbnQuaXMoICJpbnB1dCwgYnV0dG9uIiApID8gdGhpcy5lbGVtZW50LmlzKCAiOmRpc2FibGVkIiApIDogdGhpcy5lbGVtZW50Lmhhc0NsYXNzKCAidWktYnV0dG9uLWRpc2FibGVkIiApOwoKCQlpZiAoIGlzRGlzYWJsZWQgIT09IHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJdGhpcy5fc2V0T3B0aW9uKCAiZGlzYWJsZWQiLCBpc0Rpc2FibGVkICk7CgkJfQoJCWlmICggdGhpcy50eXBlID09PSAicmFkaW8iICkgewoJCQlyYWRpb0dyb3VwKCB0aGlzLmVsZW1lbnRbMF0gKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAkKCB0aGlzICkuaXMoICI6Y2hlY2tlZCIgKSApIHsKCQkJCQkkKCB0aGlzICkuYnV0dG9uKCAid2lkZ2V0IiApCgkJCQkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKQoJCQkJCQkuYXR0ciggImFyaWEtcHJlc3NlZCIsICJ0cnVlIiApOwoJCQkJfSBlbHNlIHsKCQkJCQkkKCB0aGlzICkuYnV0dG9uKCAid2lkZ2V0IiApCgkJCQkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKQoJCQkJCQkuYXR0ciggImFyaWEtcHJlc3NlZCIsICJmYWxzZSIgKTsKCQkJCX0KCQkJfSk7CgkJfSBlbHNlIGlmICggdGhpcy50eXBlID09PSAiY2hlY2tib3giICkgewoJCQlpZiAoIHRoaXMuZWxlbWVudC5pcyggIjpjaGVja2VkIiApICkgewoJCQkJdGhpcy5idXR0b25FbGVtZW50CgkJCQkJLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApCgkJCQkJLmF0dHIoICJhcmlhLXByZXNzZWQiLCAidHJ1ZSIgKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuYnV0dG9uRWxlbWVudAoJCQkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKQoJCQkJCS5hdHRyKCAiYXJpYS1wcmVzc2VkIiwgImZhbHNlIiApOwoJCQl9CgkJfQoJfSwKCglfcmVzZXRCdXR0b246IGZ1bmN0aW9uKCkgewoJCWlmICggdGhpcy50eXBlID09PSAiaW5wdXQiICkgewoJCQlpZiAoIHRoaXMub3B0aW9ucy5sYWJlbCApIHsKCQkJCXRoaXMuZWxlbWVudC52YWwoIHRoaXMub3B0aW9ucy5sYWJlbCApOwoJCQl9CgkJCXJldHVybjsKCQl9CgkJdmFyIGJ1dHRvbkVsZW1lbnQgPSB0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoIHR5cGVDbGFzc2VzICksCgkJCWJ1dHRvblRleHQgPSAkKCAiPHNwYW4+PC9zcGFuPiIsIHRoaXMuZG9jdW1lbnRbMF0gKQoJCQkJLmFkZENsYXNzKCAidWktYnV0dG9uLXRleHQiICkKCQkJCS5odG1sKCB0aGlzLm9wdGlvbnMubGFiZWwgKQoJCQkJLmFwcGVuZFRvKCBidXR0b25FbGVtZW50LmVtcHR5KCkgKQoJCQkJLnRleHQoKSwKCQkJaWNvbnMgPSB0aGlzLm9wdGlvbnMuaWNvbnMsCgkJCW11bHRpcGxlSWNvbnMgPSBpY29ucy5wcmltYXJ5ICYmIGljb25zLnNlY29uZGFyeSwKCQkJYnV0dG9uQ2xhc3NlcyA9IFtdOwoKCQlpZiAoIGljb25zLnByaW1hcnkgfHwgaWNvbnMuc2Vjb25kYXJ5ICkgewoJCQlpZiAoIHRoaXMub3B0aW9ucy50ZXh0ICkgewoJCQkJYnV0dG9uQ2xhc3Nlcy5wdXNoKCAidWktYnV0dG9uLXRleHQtaWNvbiIgKyAoIG11bHRpcGxlSWNvbnMgPyAicyIgOiAoIGljb25zLnByaW1hcnkgPyAiLXByaW1hcnkiIDogIi1zZWNvbmRhcnkiICkgKSApOwoJCQl9CgoJCQlpZiAoIGljb25zLnByaW1hcnkgKSB7CgkJCQlidXR0b25FbGVtZW50LnByZXBlbmQoICI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tcHJpbWFyeSB1aS1pY29uICIgKyBpY29ucy5wcmltYXJ5ICsgIic+PC9zcGFuPiIgKTsKCQkJfQoKCQkJaWYgKCBpY29ucy5zZWNvbmRhcnkgKSB7CgkJCQlidXR0b25FbGVtZW50LmFwcGVuZCggIjxzcGFuIGNsYXNzPSd1aS1idXR0b24taWNvbi1zZWNvbmRhcnkgdWktaWNvbiAiICsgaWNvbnMuc2Vjb25kYXJ5ICsgIic+PC9zcGFuPiIgKTsKCQkJfQoKCQkJaWYgKCAhdGhpcy5vcHRpb25zLnRleHQgKSB7CgkJCQlidXR0b25DbGFzc2VzLnB1c2goIG11bHRpcGxlSWNvbnMgPyAidWktYnV0dG9uLWljb25zLW9ubHkiIDogInVpLWJ1dHRvbi1pY29uLW9ubHkiICk7CgoJCQkJaWYgKCAhdGhpcy5oYXNUaXRsZSApIHsKCQkJCQlidXR0b25FbGVtZW50LmF0dHIoICJ0aXRsZSIsICQudHJpbSggYnV0dG9uVGV4dCApICk7CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlidXR0b25DbGFzc2VzLnB1c2goICJ1aS1idXR0b24tdGV4dC1vbmx5IiApOwoJCX0KCQlidXR0b25FbGVtZW50LmFkZENsYXNzKCBidXR0b25DbGFzc2VzLmpvaW4oICIgIiApICk7Cgl9Cn0pOwoKJC53aWRnZXQoICJ1aS5idXR0b25zZXQiLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCW9wdGlvbnM6IHsKCQlpdGVtczogImJ1dHRvbiwgaW5wdXRbdHlwZT1idXR0b25dLCBpbnB1dFt0eXBlPXN1Ym1pdF0sIGlucHV0W3R5cGU9cmVzZXRdLCBpbnB1dFt0eXBlPWNoZWNrYm94XSwgaW5wdXRbdHlwZT1yYWRpb10sIGEsIDpkYXRhKHVpLWJ1dHRvbikiCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudC5hZGRDbGFzcyggInVpLWJ1dHRvbnNldCIgKTsKCX0sCgoJX2luaXQ6IGZ1bmN0aW9uKCkgewoJCXRoaXMucmVmcmVzaCgpOwoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy5idXR0b25zLmJ1dHRvbiggIm9wdGlvbiIsIGtleSwgdmFsdWUgKTsKCQl9CgoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7Cgl9LAoKCXJlZnJlc2g6IGZ1bmN0aW9uKCkgewoJCXZhciBydGwgPSB0aGlzLmVsZW1lbnQuY3NzKCAiZGlyZWN0aW9uIiApID09PSAicnRsIiwKCQkJYWxsQnV0dG9ucyA9IHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKSwKCQkJZXhpc3RpbmdCdXR0b25zID0gYWxsQnV0dG9ucy5maWx0ZXIoICI6dWktYnV0dG9uIiApOwoKCQkvLyBJbml0aWFsaXplIG5ldyBidXR0b25zCgkJYWxsQnV0dG9ucy5ub3QoICI6dWktYnV0dG9uIiApLmJ1dHRvbigpOwoKCQkvLyBSZWZyZXNoIGV4aXN0aW5nIGJ1dHRvbnMKCQlleGlzdGluZ0J1dHRvbnMuYnV0dG9uKCAicmVmcmVzaCIgKTsKCgkJdGhpcy5idXR0b25zID0gYWxsQnV0dG9ucwoJCQkubWFwKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICQoIHRoaXMgKS5idXR0b24oICJ3aWRnZXQiIClbIDAgXTsKCQkJfSkKCQkJCS5yZW1vdmVDbGFzcyggInVpLWNvcm5lci1hbGwgdWktY29ybmVyLWxlZnQgdWktY29ybmVyLXJpZ2h0IiApCgkJCQkuZmlsdGVyKCAiOmZpcnN0IiApCgkJCQkJLmFkZENsYXNzKCBydGwgPyAidWktY29ybmVyLXJpZ2h0IiA6ICJ1aS1jb3JuZXItbGVmdCIgKQoJCQkJLmVuZCgpCgkJCQkuZmlsdGVyKCAiOmxhc3QiICkKCQkJCQkuYWRkQ2xhc3MoIHJ0bCA/ICJ1aS1jb3JuZXItbGVmdCIgOiAidWktY29ybmVyLXJpZ2h0IiApCgkJCQkuZW5kKCkKCQkJLmVuZCgpOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCAidWktYnV0dG9uc2V0IiApOwoJCXRoaXMuYnV0dG9ucwoJCQkubWFwKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICQoIHRoaXMgKS5idXR0b24oICJ3aWRnZXQiIClbIDAgXTsKCQkJfSkKCQkJCS5yZW1vdmVDbGFzcyggInVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodCIgKQoJCQkuZW5kKCkKCQkJLmJ1dHRvbiggImRlc3Ryb3kiICk7Cgl9Cn0pOwoKdmFyIGJ1dHRvbiA9ICQudWkuYnV0dG9uOwoKCi8qIQogKiBqUXVlcnkgVUkgRGF0ZXBpY2tlciAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kYXRlcGlja2VyLwogKi8KCgokLmV4dGVuZCgkLnVpLCB7IGRhdGVwaWNrZXI6IHsgdmVyc2lvbjogIjEuMTEuMSIgfSB9KTsKCnZhciBkYXRlcGlja2VyX2luc3RBY3RpdmU7CgpmdW5jdGlvbiBkYXRlcGlja2VyX2dldFppbmRleCggZWxlbSApIHsKCXZhciBwb3NpdGlvbiwgdmFsdWU7Cgl3aGlsZSAoIGVsZW0ubGVuZ3RoICYmIGVsZW1bIDAgXSAhPT0gZG9jdW1lbnQgKSB7CgkJLy8gSWdub3JlIHotaW5kZXggaWYgcG9zaXRpb24gaXMgc2V0IHRvIGEgdmFsdWUgd2hlcmUgei1pbmRleCBpcyBpZ25vcmVkIGJ5IHRoZSBicm93c2VyCgkJLy8gVGhpcyBtYWtlcyBiZWhhdmlvciBvZiB0aGlzIGZ1bmN0aW9uIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzCgkJLy8gV2ViS2l0IGFsd2F5cyByZXR1cm5zIGF1dG8gaWYgdGhlIGVsZW1lbnQgaXMgcG9zaXRpb25lZAoJCXBvc2l0aW9uID0gZWxlbS5jc3MoICJwb3NpdGlvbiIgKTsKCQlpZiAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAicmVsYXRpdmUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgewoJCQkvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZAoJCQkvLyBvdGhlciBicm93c2VycyByZXR1cm4gYSBzdHJpbmcKCQkJLy8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDAKCQkJLy8gPGRpdiBzdHlsZT0iei1pbmRleDogLTEwOyI+PGRpdiBzdHlsZT0iei1pbmRleDogMDsiPjwvZGl2PjwvZGl2PgoJCQl2YWx1ZSA9IHBhcnNlSW50KCBlbGVtLmNzcyggInpJbmRleCIgKSwgMTAgKTsKCQkJaWYgKCAhaXNOYU4oIHZhbHVlICkgJiYgdmFsdWUgIT09IDAgKSB7CgkJCQlyZXR1cm4gdmFsdWU7CgkJCX0KCQl9CgkJZWxlbSA9IGVsZW0ucGFyZW50KCk7Cgl9CgoJcmV0dXJuIDA7Cn0KLyogRGF0ZSBwaWNrZXIgbWFuYWdlci4KICAgVXNlIHRoZSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcywgJC5kYXRlcGlja2VyLCB0byBpbnRlcmFjdCB3aXRoIHRoZSBkYXRlIHBpY2tlci4KICAgU2V0dGluZ3MgZm9yIChncm91cHMgb2YpIGRhdGUgcGlja2VycyBhcmUgbWFpbnRhaW5lZCBpbiBhbiBpbnN0YW5jZSBvYmplY3QsCiAgIGFsbG93aW5nIG11bHRpcGxlIGRpZmZlcmVudCBzZXR0aW5ncyBvbiB0aGUgc2FtZSBwYWdlLiAqLwoKZnVuY3Rpb24gRGF0ZXBpY2tlcigpIHsKCXRoaXMuX2N1ckluc3QgPSBudWxsOyAvLyBUaGUgY3VycmVudCBpbnN0YW5jZSBpbiB1c2UKCXRoaXMuX2tleUV2ZW50ID0gZmFsc2U7IC8vIElmIHRoZSBsYXN0IGV2ZW50IHdhcyBhIGtleSBldmVudAoJdGhpcy5fZGlzYWJsZWRJbnB1dHMgPSBbXTsgLy8gTGlzdCBvZiBkYXRlIHBpY2tlciBpbnB1dHMgdGhhdCBoYXZlIGJlZW4gZGlzYWJsZWQKCXRoaXMuX2RhdGVwaWNrZXJTaG93aW5nID0gZmFsc2U7IC8vIFRydWUgaWYgdGhlIHBvcHVwIHBpY2tlciBpcyBzaG93aW5nICwgZmFsc2UgaWYgbm90Cgl0aGlzLl9pbkRpYWxvZyA9IGZhbHNlOyAvLyBUcnVlIGlmIHNob3dpbmcgd2l0aGluIGEgImRpYWxvZyIsIGZhbHNlIGlmIG5vdAoJdGhpcy5fbWFpbkRpdklkID0gInVpLWRhdGVwaWNrZXItZGl2IjsgLy8gVGhlIElEIG9mIHRoZSBtYWluIGRhdGVwaWNrZXIgZGl2aXNpb24KCXRoaXMuX2lubGluZUNsYXNzID0gInVpLWRhdGVwaWNrZXItaW5saW5lIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGlubGluZSBtYXJrZXIgY2xhc3MKCXRoaXMuX2FwcGVuZENsYXNzID0gInVpLWRhdGVwaWNrZXItYXBwZW5kIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGFwcGVuZCBtYXJrZXIgY2xhc3MKCXRoaXMuX3RyaWdnZXJDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLXRyaWdnZXIiOyAvLyBUaGUgbmFtZSBvZiB0aGUgdHJpZ2dlciBtYXJrZXIgY2xhc3MKCXRoaXMuX2RpYWxvZ0NsYXNzID0gInVpLWRhdGVwaWNrZXItZGlhbG9nIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRpYWxvZyBtYXJrZXIgY2xhc3MKCXRoaXMuX2Rpc2FibGVDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLWRpc2FibGVkIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRpc2FibGVkIGNvdmVyaW5nIG1hcmtlciBjbGFzcwoJdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MgPSAidWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGUiOyAvLyBUaGUgbmFtZSBvZiB0aGUgdW5zZWxlY3RhYmxlIGNlbGwgbWFya2VyIGNsYXNzCgl0aGlzLl9jdXJyZW50Q2xhc3MgPSAidWktZGF0ZXBpY2tlci1jdXJyZW50LWRheSI7IC8vIFRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IGRheSBtYXJrZXIgY2xhc3MKCXRoaXMuX2RheU92ZXJDbGFzcyA9ICJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyIjsgLy8gVGhlIG5hbWUgb2YgdGhlIGRheSBob3ZlciBtYXJrZXIgY2xhc3MKCXRoaXMucmVnaW9uYWwgPSBbXTsgLy8gQXZhaWxhYmxlIHJlZ2lvbmFsIHNldHRpbmdzLCBpbmRleGVkIGJ5IGxhbmd1YWdlIGNvZGUKCXRoaXMucmVnaW9uYWxbIiJdID0geyAvLyBEZWZhdWx0IHJlZ2lvbmFsIHNldHRpbmdzCgkJY2xvc2VUZXh0OiAiRG9uZSIsIC8vIERpc3BsYXkgdGV4dCBmb3IgY2xvc2UgbGluawoJCXByZXZUZXh0OiAiUHJldiIsIC8vIERpc3BsYXkgdGV4dCBmb3IgcHJldmlvdXMgbW9udGggbGluawoJCW5leHRUZXh0OiAiTmV4dCIsIC8vIERpc3BsYXkgdGV4dCBmb3IgbmV4dCBtb250aCBsaW5rCgkJY3VycmVudFRleHQ6ICJUb2RheSIsIC8vIERpc3BsYXkgdGV4dCBmb3IgY3VycmVudCBtb250aCBsaW5rCgkJbW9udGhOYW1lczogWyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsCgkJCSJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSwgLy8gTmFtZXMgb2YgbW9udGhzIGZvciBkcm9wLWRvd24gYW5kIGZvcm1hdHRpbmcKCQltb250aE5hbWVzU2hvcnQ6IFsiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXSwgLy8gRm9yIGZvcm1hdHRpbmcKCQlkYXlOYW1lczogWyJTdW5kYXkiLCAiTW9uZGF5IiwgIlR1ZXNkYXkiLCAiV2VkbmVzZGF5IiwgIlRodXJzZGF5IiwgIkZyaWRheSIsICJTYXR1cmRheSJdLCAvLyBGb3IgZm9ybWF0dGluZwoJCWRheU5hbWVzU2hvcnQ6IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0sIC8vIEZvciBmb3JtYXR0aW5nCgkJZGF5TmFtZXNNaW46IFsiU3UiLCJNbyIsIlR1IiwiV2UiLCJUaCIsIkZyIiwiU2EiXSwgLy8gQ29sdW1uIGhlYWRpbmdzIGZvciBkYXlzIHN0YXJ0aW5nIGF0IFN1bmRheQoJCXdlZWtIZWFkZXI6ICJXayIsIC8vIENvbHVtbiBoZWFkZXIgZm9yIHdlZWsgb2YgdGhlIHllYXIKCQlkYXRlRm9ybWF0OiAibW0vZGQveXkiLCAvLyBTZWUgZm9ybWF0IG9wdGlvbnMgb24gcGFyc2VEYXRlCgkJZmlyc3REYXk6IDAsIC8vIFRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIFN1biA9IDAsIE1vbiA9IDEsIC4uLgoJCWlzUlRMOiBmYWxzZSwgLy8gVHJ1ZSBpZiByaWdodC10by1sZWZ0IGxhbmd1YWdlLCBmYWxzZSBpZiBsZWZ0LXRvLXJpZ2h0CgkJc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSwgLy8gVHJ1ZSBpZiB0aGUgeWVhciBzZWxlY3QgcHJlY2VkZXMgbW9udGgsIGZhbHNlIGZvciBtb250aCB0aGVuIHllYXIKCQl5ZWFyU3VmZml4OiAiIiAvLyBBZGRpdGlvbmFsIHRleHQgdG8gYXBwZW5kIHRvIHRoZSB5ZWFyIGluIHRoZSBtb250aCBoZWFkZXJzCgl9OwoJdGhpcy5fZGVmYXVsdHMgPSB7IC8vIEdsb2JhbCBkZWZhdWx0cyBmb3IgYWxsIHRoZSBkYXRlIHBpY2tlciBpbnN0YW5jZXMKCQlzaG93T246ICJmb2N1cyIsIC8vICJmb2N1cyIgZm9yIHBvcHVwIG9uIGZvY3VzLAoJCQkvLyAiYnV0dG9uIiBmb3IgdHJpZ2dlciBidXR0b24sIG9yICJib3RoIiBmb3IgZWl0aGVyCgkJc2hvd0FuaW06ICJmYWRlSW4iLCAvLyBOYW1lIG9mIGpRdWVyeSBhbmltYXRpb24gZm9yIHBvcHVwCgkJc2hvd09wdGlvbnM6IHt9LCAvLyBPcHRpb25zIGZvciBlbmhhbmNlZCBhbmltYXRpb25zCgkJZGVmYXVsdERhdGU6IG51bGwsIC8vIFVzZWQgd2hlbiBmaWVsZCBpcyBibGFuazogYWN0dWFsIGRhdGUsCgkJCS8vICsvLW51bWJlciBmb3Igb2Zmc2V0IGZyb20gdG9kYXksIG51bGwgZm9yIHRvZGF5CgkJYXBwZW5kVGV4dDogIiIsIC8vIERpc3BsYXkgdGV4dCBmb2xsb3dpbmcgdGhlIGlucHV0IGJveCwgZS5nLiBzaG93aW5nIHRoZSBmb3JtYXQKCQlidXR0b25UZXh0OiAiLi4uIiwgLy8gVGV4dCBmb3IgdHJpZ2dlciBidXR0b24KCQlidXR0b25JbWFnZTogIiIsIC8vIFVSTCBmb3IgdHJpZ2dlciBidXR0b24gaW1hZ2UKCQlidXR0b25JbWFnZU9ubHk6IGZhbHNlLCAvLyBUcnVlIGlmIHRoZSBpbWFnZSBhcHBlYXJzIGFsb25lLCBmYWxzZSBpZiBpdCBhcHBlYXJzIG9uIGEgYnV0dG9uCgkJaGlkZUlmTm9QcmV2TmV4dDogZmFsc2UsIC8vIFRydWUgdG8gaGlkZSBuZXh0L3ByZXZpb3VzIG1vbnRoIGxpbmtzCgkJCS8vIGlmIG5vdCBhcHBsaWNhYmxlLCBmYWxzZSB0byBqdXN0IGRpc2FibGUgdGhlbQoJCW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6IGZhbHNlLCAvLyBUcnVlIGlmIGRhdGUgZm9ybWF0dGluZyBhcHBsaWVkIHRvIHByZXYvdG9kYXkvbmV4dCBsaW5rcwoJCWdvdG9DdXJyZW50OiBmYWxzZSwgLy8gVHJ1ZSBpZiB0b2RheSBsaW5rIGdvZXMgYmFjayB0byBjdXJyZW50IHNlbGVjdGlvbiBpbnN0ZWFkCgkJY2hhbmdlTW9udGg6IGZhbHNlLCAvLyBUcnVlIGlmIG1vbnRoIGNhbiBiZSBzZWxlY3RlZCBkaXJlY3RseSwgZmFsc2UgaWYgb25seSBwcmV2L25leHQKCQljaGFuZ2VZZWFyOiBmYWxzZSwgLy8gVHJ1ZSBpZiB5ZWFyIGNhbiBiZSBzZWxlY3RlZCBkaXJlY3RseSwgZmFsc2UgaWYgb25seSBwcmV2L25leHQKCQl5ZWFyUmFuZ2U6ICJjLTEwOmMrMTAiLCAvLyBSYW5nZSBvZiB5ZWFycyB0byBkaXNwbGF5IGluIGRyb3AtZG93biwKCQkJLy8gZWl0aGVyIHJlbGF0aXZlIHRvIHRvZGF5J3MgeWVhciAoLW5uOitubiksIHJlbGF0aXZlIHRvIGN1cnJlbnRseSBkaXNwbGF5ZWQgeWVhcgoJCQkvLyAoYy1ubjpjK25uKSwgYWJzb2x1dGUgKG5ubm46bm5ubiksIG9yIGEgY29tYmluYXRpb24gb2YgdGhlIGFib3ZlIChubm5uOi1uKQoJCXNob3dPdGhlck1vbnRoczogZmFsc2UsIC8vIFRydWUgdG8gc2hvdyBkYXRlcyBpbiBvdGhlciBtb250aHMsIGZhbHNlIHRvIGxlYXZlIGJsYW5rCgkJc2VsZWN0T3RoZXJNb250aHM6IGZhbHNlLCAvLyBUcnVlIHRvIGFsbG93IHNlbGVjdGlvbiBvZiBkYXRlcyBpbiBvdGhlciBtb250aHMsIGZhbHNlIGZvciB1bnNlbGVjdGFibGUKCQlzaG93V2VlazogZmFsc2UsIC8vIFRydWUgdG8gc2hvdyB3ZWVrIG9mIHRoZSB5ZWFyLCBmYWxzZSB0byBub3Qgc2hvdyBpdAoJCWNhbGN1bGF0ZVdlZWs6IHRoaXMuaXNvODYwMVdlZWssIC8vIEhvdyB0byBjYWxjdWxhdGUgdGhlIHdlZWsgb2YgdGhlIHllYXIsCgkJCS8vIHRha2VzIGEgRGF0ZSBhbmQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIHRoZSB3ZWVrIGZvciBpdAoJCXNob3J0WWVhckN1dG9mZjogIisxMCIsIC8vIFNob3J0IHllYXIgdmFsdWVzIDwgdGhpcyBhcmUgaW4gdGhlIGN1cnJlbnQgY2VudHVyeSwKCQkJLy8gPiB0aGlzIGFyZSBpbiB0aGUgcHJldmlvdXMgY2VudHVyeSwKCQkJLy8gc3RyaW5nIHZhbHVlIHN0YXJ0aW5nIHdpdGggIisiIGZvciBjdXJyZW50IHllYXIgKyB2YWx1ZQoJCW1pbkRhdGU6IG51bGwsIC8vIFRoZSBlYXJsaWVzdCBzZWxlY3RhYmxlIGRhdGUsIG9yIG51bGwgZm9yIG5vIGxpbWl0CgkJbWF4RGF0ZTogbnVsbCwgLy8gVGhlIGxhdGVzdCBzZWxlY3RhYmxlIGRhdGUsIG9yIG51bGwgZm9yIG5vIGxpbWl0CgkJZHVyYXRpb246ICJmYXN0IiwgLy8gRHVyYXRpb24gb2YgZGlzcGxheS9jbG9zdXJlCgkJYmVmb3JlU2hvd0RheTogbnVsbCwgLy8gRnVuY3Rpb24gdGhhdCB0YWtlcyBhIGRhdGUgYW5kIHJldHVybnMgYW4gYXJyYXkgd2l0aAoJCQkvLyBbMF0gPSB0cnVlIGlmIHNlbGVjdGFibGUsIGZhbHNlIGlmIG5vdCwgWzFdID0gY3VzdG9tIENTUyBjbGFzcyBuYW1lKHMpIG9yICIiLAoJCQkvLyBbMl0gPSBjZWxsIHRpdGxlIChvcHRpb25hbCksIGUuZy4gJC5kYXRlcGlja2VyLm5vV2Vla2VuZHMKCQliZWZvcmVTaG93OiBudWxsLCAvLyBGdW5jdGlvbiB0aGF0IHRha2VzIGFuIGlucHV0IGZpZWxkIGFuZAoJCQkvLyByZXR1cm5zIGEgc2V0IG9mIGN1c3RvbSBzZXR0aW5ncyBmb3IgdGhlIGRhdGUgcGlja2VyCgkJb25TZWxlY3Q6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gYSBkYXRlIGlzIHNlbGVjdGVkCgkJb25DaGFuZ2VNb250aFllYXI6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG1vbnRoIG9yIHllYXIgaXMgY2hhbmdlZAoJCW9uQ2xvc2U6IG51bGwsIC8vIERlZmluZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIGRhdGVwaWNrZXIgaXMgY2xvc2VkCgkJbnVtYmVyT2ZNb250aHM6IDEsIC8vIE51bWJlciBvZiBtb250aHMgdG8gc2hvdyBhdCBhIHRpbWUKCQlzaG93Q3VycmVudEF0UG9zOiAwLCAvLyBUaGUgcG9zaXRpb24gaW4gbXVsdGlwZSBtb250aHMgYXQgd2hpY2ggdG8gc2hvdyB0aGUgY3VycmVudCBtb250aCAoc3RhcnRpbmcgYXQgMCkKCQlzdGVwTW9udGhzOiAxLCAvLyBOdW1iZXIgb2YgbW9udGhzIHRvIHN0ZXAgYmFjay9mb3J3YXJkCgkJc3RlcEJpZ01vbnRoczogMTIsIC8vIE51bWJlciBvZiBtb250aHMgdG8gc3RlcCBiYWNrL2ZvcndhcmQgZm9yIHRoZSBiaWcgbGlua3MKCQlhbHRGaWVsZDogIiIsIC8vIFNlbGVjdG9yIGZvciBhbiBhbHRlcm5hdGUgZmllbGQgdG8gc3RvcmUgc2VsZWN0ZWQgZGF0ZXMgaW50bwoJCWFsdEZvcm1hdDogIiIsIC8vIFRoZSBkYXRlIGZvcm1hdCB0byB1c2UgZm9yIHRoZSBhbHRlcm5hdGUgZmllbGQKCQljb25zdHJhaW5JbnB1dDogdHJ1ZSwgLy8gVGhlIGlucHV0IGlzIGNvbnN0cmFpbmVkIGJ5IHRoZSBjdXJyZW50IGRhdGUgZm9ybWF0CgkJc2hvd0J1dHRvblBhbmVsOiBmYWxzZSwgLy8gVHJ1ZSB0byBzaG93IGJ1dHRvbiBwYW5lbCwgZmFsc2UgdG8gbm90IHNob3cgaXQKCQlhdXRvU2l6ZTogZmFsc2UsIC8vIFRydWUgdG8gc2l6ZSB0aGUgaW5wdXQgZm9yIHRoZSBkYXRlIGZvcm1hdCwgZmFsc2UgdG8gbGVhdmUgYXMgaXMKCQlkaXNhYmxlZDogZmFsc2UgLy8gVGhlIGluaXRpYWwgZGlzYWJsZWQgc3RhdGUKCX07CgkkLmV4dGVuZCh0aGlzLl9kZWZhdWx0cywgdGhpcy5yZWdpb25hbFsiIl0pOwoJdGhpcy5yZWdpb25hbC5lbiA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgdGhpcy5yZWdpb25hbFsgIiIgXSk7Cgl0aGlzLnJlZ2lvbmFsWyAiZW4tVVMiIF0gPSAkLmV4dGVuZCggdHJ1ZSwge30sIHRoaXMucmVnaW9uYWwuZW4gKTsKCXRoaXMuZHBEaXYgPSBkYXRlcGlja2VyX2JpbmRIb3ZlcigkKCI8ZGl2IGlkPSciICsgdGhpcy5fbWFpbkRpdklkICsgIicgY2xhc3M9J3VpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSk7Cn0KCiQuZXh0ZW5kKERhdGVwaWNrZXIucHJvdG90eXBlLCB7CgkvKiBDbGFzcyBuYW1lIGFkZGVkIHRvIGVsZW1lbnRzIHRvIGluZGljYXRlIGFscmVhZHkgY29uZmlndXJlZCB3aXRoIGEgZGF0ZSBwaWNrZXIuICovCgltYXJrZXJDbGFzc05hbWU6ICJoYXNEYXRlcGlja2VyIiwKCgkvL0tlZXAgdHJhY2sgb2YgdGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgZGlzcGxheWVkIChzZWUgIzcwNDMpCgltYXhSb3dzOiA0LAoKCS8vIFRPRE8gcmVuYW1lIHRvICJ3aWRnZXQiIHdoZW4gc3dpdGNoaW5nIHRvIHdpZGdldCBmYWN0b3J5Cglfd2lkZ2V0RGF0ZXBpY2tlcjogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZHBEaXY7Cgl9LAoKCS8qIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHNldHRpbmdzIGZvciBhbGwgaW5zdGFuY2VzIG9mIHRoZSBkYXRlIHBpY2tlci4KCSAqIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGFzIGRlZmF1bHRzIChhbm9ueW1vdXMgb2JqZWN0KQoJICogQHJldHVybiB0aGUgbWFuYWdlciBvYmplY3QKCSAqLwoJc2V0RGVmYXVsdHM6IGZ1bmN0aW9uKHNldHRpbmdzKSB7CgkJZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUodGhpcy5fZGVmYXVsdHMsIHNldHRpbmdzIHx8IHt9KTsKCQlyZXR1cm4gdGhpczsKCX0sCgoJLyogQXR0YWNoIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uCgkgKiBAcGFyYW0gIHRhcmdldAllbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuCgkgKiBAcGFyYW0gIHNldHRpbmdzICBvYmplY3QgLSB0aGUgbmV3IHNldHRpbmdzIHRvIHVzZSBmb3IgdGhpcyBkYXRlIHBpY2tlciBpbnN0YW5jZSAoYW5vbnltb3VzKQoJICovCglfYXR0YWNoRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBzZXR0aW5ncykgewoJCXZhciBub2RlTmFtZSwgaW5saW5lLCBpbnN0OwoJCW5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJaW5saW5lID0gKG5vZGVOYW1lID09PSAiZGl2IiB8fCBub2RlTmFtZSA9PT0gInNwYW4iKTsKCQlpZiAoIXRhcmdldC5pZCkgewoJCQl0aGlzLnV1aWQgKz0gMTsKCQkJdGFyZ2V0LmlkID0gImRwIiArIHRoaXMudXVpZDsKCQl9CgkJaW5zdCA9IHRoaXMuX25ld0luc3QoJCh0YXJnZXQpLCBpbmxpbmUpOwoJCWluc3Quc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgc2V0dGluZ3MgfHwge30pOwoJCWlmIChub2RlTmFtZSA9PT0gImlucHV0IikgewoJCQl0aGlzLl9jb25uZWN0RGF0ZXBpY2tlcih0YXJnZXQsIGluc3QpOwoJCX0gZWxzZSBpZiAoaW5saW5lKSB7CgkJCXRoaXMuX2lubGluZURhdGVwaWNrZXIodGFyZ2V0LCBpbnN0KTsKCQl9Cgl9LAoKCS8qIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvYmplY3QuICovCglfbmV3SW5zdDogZnVuY3Rpb24odGFyZ2V0LCBpbmxpbmUpIHsKCQl2YXIgaWQgPSB0YXJnZXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1wtXSkvZywgIlxcXFwkMSIpOyAvLyBlc2NhcGUgalF1ZXJ5IG1ldGEgY2hhcnMKCQlyZXR1cm4ge2lkOiBpZCwgaW5wdXQ6IHRhcmdldCwgLy8gYXNzb2NpYXRlZCB0YXJnZXQKCQkJc2VsZWN0ZWREYXk6IDAsIHNlbGVjdGVkTW9udGg6IDAsIHNlbGVjdGVkWWVhcjogMCwgLy8gY3VycmVudCBzZWxlY3Rpb24KCQkJZHJhd01vbnRoOiAwLCBkcmF3WWVhcjogMCwgLy8gbW9udGggYmVpbmcgZHJhd24KCQkJaW5saW5lOiBpbmxpbmUsIC8vIGlzIGRhdGVwaWNrZXIgaW5saW5lIG9yIG5vdAoJCQlkcERpdjogKCFpbmxpbmUgPyB0aGlzLmRwRGl2IDogLy8gcHJlc2VudGF0aW9uIGRpdgoJCQlkYXRlcGlja2VyX2JpbmRIb3ZlcigkKCI8ZGl2IGNsYXNzPSciICsgdGhpcy5faW5saW5lQ2xhc3MgKyAiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSkpfTsKCX0sCgoJLyogQXR0YWNoIHRoZSBkYXRlIHBpY2tlciB0byBhbiBpbnB1dCBmaWVsZC4gKi8KCV9jb25uZWN0RGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBpbnN0KSB7CgkJdmFyIGlucHV0ID0gJCh0YXJnZXQpOwoJCWluc3QuYXBwZW5kID0gJChbXSk7CgkJaW5zdC50cmlnZ2VyID0gJChbXSk7CgkJaWYgKGlucHV0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkgewoJCQlyZXR1cm47CgkJfQoJCXRoaXMuX2F0dGFjaG1lbnRzKGlucHV0LCBpbnN0KTsKCQlpbnB1dC5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLgoJCQlrZXlwcmVzcyh0aGlzLl9kb0tleVByZXNzKS5rZXl1cCh0aGlzLl9kb0tleVVwKTsKCQl0aGlzLl9hdXRvU2l6ZShpbnN0KTsKCQkkLmRhdGEodGFyZ2V0LCAiZGF0ZXBpY2tlciIsIGluc3QpOwoJCS8vSWYgZGlzYWJsZWQgb3B0aW9uIGlzIHRydWUsIGRpc2FibGUgdGhlIGRhdGVwaWNrZXIgb25jZSBpdCBoYXMgYmVlbiBhdHRhY2hlZCB0byB0aGUgaW5wdXQgKHNlZSB0aWNrZXQgIzU2NjUpCgkJaWYoIGluc3Quc2V0dGluZ3MuZGlzYWJsZWQgKSB7CgkJCXRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKCB0YXJnZXQgKTsKCQl9Cgl9LAoKCS8qIE1ha2UgYXR0YWNobWVudHMgYmFzZWQgb24gc2V0dGluZ3MuICovCglfYXR0YWNobWVudHM6IGZ1bmN0aW9uKGlucHV0LCBpbnN0KSB7CgkJdmFyIHNob3dPbiwgYnV0dG9uVGV4dCwgYnV0dG9uSW1hZ2UsCgkJCWFwcGVuZFRleHQgPSB0aGlzLl9nZXQoaW5zdCwgImFwcGVuZFRleHQiKSwKCQkJaXNSVEwgPSB0aGlzLl9nZXQoaW5zdCwgImlzUlRMIik7CgoJCWlmIChpbnN0LmFwcGVuZCkgewoJCQlpbnN0LmFwcGVuZC5yZW1vdmUoKTsKCQl9CgkJaWYgKGFwcGVuZFRleHQpIHsKCQkJaW5zdC5hcHBlbmQgPSAkKCI8c3BhbiBjbGFzcz0nIiArIHRoaXMuX2FwcGVuZENsYXNzICsgIic+IiArIGFwcGVuZFRleHQgKyAiPC9zcGFuPiIpOwoJCQlpbnB1dFtpc1JUTCA/ICJiZWZvcmUiIDogImFmdGVyIl0oaW5zdC5hcHBlbmQpOwoJCX0KCgkJaW5wdXQudW5iaW5kKCJmb2N1cyIsIHRoaXMuX3Nob3dEYXRlcGlja2VyKTsKCgkJaWYgKGluc3QudHJpZ2dlcikgewoJCQlpbnN0LnRyaWdnZXIucmVtb3ZlKCk7CgkJfQoKCQlzaG93T24gPSB0aGlzLl9nZXQoaW5zdCwgInNob3dPbiIpOwoJCWlmIChzaG93T24gPT09ICJmb2N1cyIgfHwgc2hvd09uID09PSAiYm90aCIpIHsgLy8gcG9wLXVwIGRhdGUgcGlja2VyIHdoZW4gaW4gdGhlIG1hcmtlZCBmaWVsZAoJCQlpbnB1dC5mb2N1cyh0aGlzLl9zaG93RGF0ZXBpY2tlcik7CgkJfQoJCWlmIChzaG93T24gPT09ICJidXR0b24iIHx8IHNob3dPbiA9PT0gImJvdGgiKSB7IC8vIHBvcC11cCBkYXRlIHBpY2tlciB3aGVuIGJ1dHRvbiBjbGlja2VkCgkJCWJ1dHRvblRleHQgPSB0aGlzLl9nZXQoaW5zdCwgImJ1dHRvblRleHQiKTsKCQkJYnV0dG9uSW1hZ2UgPSB0aGlzLl9nZXQoaW5zdCwgImJ1dHRvbkltYWdlIik7CgkJCWluc3QudHJpZ2dlciA9ICQodGhpcy5fZ2V0KGluc3QsICJidXR0b25JbWFnZU9ubHkiKSA/CgkJCQkkKCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLgoJCQkJCWF0dHIoeyBzcmM6IGJ1dHRvbkltYWdlLCBhbHQ6IGJ1dHRvblRleHQsIHRpdGxlOiBidXR0b25UZXh0IH0pIDoKCQkJCSQoIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLgoJCQkJCWh0bWwoIWJ1dHRvbkltYWdlID8gYnV0dG9uVGV4dCA6ICQoIjxpbWcvPiIpLmF0dHIoCgkJCQkJeyBzcmM6YnV0dG9uSW1hZ2UsIGFsdDpidXR0b25UZXh0LCB0aXRsZTpidXR0b25UZXh0IH0pKSk7CgkJCWlucHV0W2lzUlRMID8gImJlZm9yZSIgOiAiYWZ0ZXIiXShpbnN0LnRyaWdnZXIpOwoJCQlpbnN0LnRyaWdnZXIuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQlpZiAoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiAkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9PT0gaW5wdXRbMF0pIHsKCQkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7CgkJCQl9IGVsc2UgaWYgKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgJiYgJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQgIT09IGlucHV0WzBdKSB7CgkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCQkJCSQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaW5wdXRbMF0pOwoJCQkJfSBlbHNlIHsKCQkJCQkkLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlucHV0WzBdKTsKCQkJCX0KCQkJCXJldHVybiBmYWxzZTsKCQkJfSk7CgkJfQoJfSwKCgkvKiBBcHBseSB0aGUgbWF4aW11bSBsZW5ndGggZm9yIHRoZSBkYXRlIGZvcm1hdC4gKi8KCV9hdXRvU2l6ZTogZnVuY3Rpb24oaW5zdCkgewoJCWlmICh0aGlzLl9nZXQoaW5zdCwgImF1dG9TaXplIikgJiYgIWluc3QuaW5saW5lKSB7CgkJCXZhciBmaW5kTWF4LCBtYXgsIG1heEksIGksCgkJCQlkYXRlID0gbmV3IERhdGUoMjAwOSwgMTIgLSAxLCAyMCksIC8vIEVuc3VyZSBkb3VibGUgZGlnaXRzCgkJCQlkYXRlRm9ybWF0ID0gdGhpcy5fZ2V0KGluc3QsICJkYXRlRm9ybWF0Iik7CgoJCQlpZiAoZGF0ZUZvcm1hdC5tYXRjaCgvW0RNXS8pKSB7CgkJCQlmaW5kTWF4ID0gZnVuY3Rpb24obmFtZXMpIHsKCQkJCQltYXggPSAwOwoJCQkJCW1heEkgPSAwOwoJCQkJCWZvciAoaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykgewoJCQkJCQlpZiAobmFtZXNbaV0ubGVuZ3RoID4gbWF4KSB7CgkJCQkJCQltYXggPSBuYW1lc1tpXS5sZW5ndGg7CgkJCQkJCQltYXhJID0gaTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlyZXR1cm4gbWF4STsKCQkJCX07CgkJCQlkYXRlLnNldE1vbnRoKGZpbmRNYXgodGhpcy5fZ2V0KGluc3QsIChkYXRlRm9ybWF0Lm1hdGNoKC9NTS8pID8KCQkJCQkibW9udGhOYW1lcyIgOiAibW9udGhOYW1lc1Nob3J0IikpKSk7CgkJCQlkYXRlLnNldERhdGUoZmluZE1heCh0aGlzLl9nZXQoaW5zdCwgKGRhdGVGb3JtYXQubWF0Y2goL0RELykgPwoJCQkJCSJkYXlOYW1lcyIgOiAiZGF5TmFtZXNTaG9ydCIpKSkgKyAyMCAtIGRhdGUuZ2V0RGF5KCkpOwoJCQl9CgkJCWluc3QuaW5wdXQuYXR0cigic2l6ZSIsIHRoaXMuX2Zvcm1hdERhdGUoaW5zdCwgZGF0ZSkubGVuZ3RoKTsKCQl9Cgl9LAoKCS8qIEF0dGFjaCBhbiBpbmxpbmUgZGF0ZSBwaWNrZXIgdG8gYSBkaXYuICovCglfaW5saW5lRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBpbnN0KSB7CgkJdmFyIGRpdlNwYW4gPSAkKHRhcmdldCk7CgkJaWYgKGRpdlNwYW4uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKSB7CgkJCXJldHVybjsKCQl9CgkJZGl2U3Bhbi5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGluc3QuZHBEaXYpOwoJCSQuZGF0YSh0YXJnZXQsICJkYXRlcGlja2VyIiwgaW5zdCk7CgkJdGhpcy5fc2V0RGF0ZShpbnN0LCB0aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KSwgdHJ1ZSk7CgkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCQl0aGlzLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7CgkJLy9JZiBkaXNhYmxlZCBvcHRpb24gaXMgdHJ1ZSwgZGlzYWJsZSB0aGUgZGF0ZXBpY2tlciBiZWZvcmUgc2hvd2luZyBpdCAoc2VlIHRpY2tldCAjNTY2NSkKCQlpZiggaW5zdC5zZXR0aW5ncy5kaXNhYmxlZCApIHsKCQkJdGhpcy5fZGlzYWJsZURhdGVwaWNrZXIoIHRhcmdldCApOwoJCX0KCQkvLyBTZXQgZGlzcGxheTpibG9jayBpbiBwbGFjZSBvZiBpbnN0LmRwRGl2LnNob3coKSB3aGljaCB3b24ndCB3b3JrIG9uIGRpc2Nvbm5lY3RlZCBlbGVtZW50cwoJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeXVpLmNvbS90aWNrZXQvNzU1MiAtIEEgRGF0ZXBpY2tlciBjcmVhdGVkIG9uIGEgZGV0YWNoZWQgZGl2IGhhcyB6ZXJvIGhlaWdodAoJCWluc3QuZHBEaXYuY3NzKCAiZGlzcGxheSIsICJibG9jayIgKTsKCX0sCgoJLyogUG9wLXVwIHRoZSBkYXRlIHBpY2tlciBpbiBhICJkaWFsb2ciIGJveC4KCSAqIEBwYXJhbSAgaW5wdXQgZWxlbWVudCAtIGlnbm9yZWQKCSAqIEBwYXJhbSAgZGF0ZQlzdHJpbmcgb3IgRGF0ZSAtIHRoZSBpbml0aWFsIGRhdGUgdG8gZGlzcGxheQoJICogQHBhcmFtICBvblNlbGVjdCAgZnVuY3Rpb24gLSB0aGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGEgZGF0ZSBpcyBzZWxlY3RlZAoJICogQHBhcmFtICBzZXR0aW5ncyAgb2JqZWN0IC0gdXBkYXRlIHRoZSBkaWFsb2cgZGF0ZSBwaWNrZXIgaW5zdGFuY2UncyBzZXR0aW5ncyAoYW5vbnltb3VzIG9iamVjdCkKCSAqIEBwYXJhbSAgcG9zIGludFsyXSAtIGNvb3JkaW5hdGVzIGZvciB0aGUgZGlhbG9nJ3MgcG9zaXRpb24gd2l0aGluIHRoZSBzY3JlZW4gb3IKCSAqCQkJCQlldmVudCAtIHdpdGggeC95IGNvb3JkaW5hdGVzIG9yCgkgKgkJCQkJbGVhdmUgZW1wdHkgZm9yIGRlZmF1bHQgKHNjcmVlbiBjZW50cmUpCgkgKiBAcmV0dXJuIHRoZSBtYW5hZ2VyIG9iamVjdAoJICovCglfZGlhbG9nRGF0ZXBpY2tlcjogZnVuY3Rpb24oaW5wdXQsIGRhdGUsIG9uU2VsZWN0LCBzZXR0aW5ncywgcG9zKSB7CgkJdmFyIGlkLCBicm93c2VyV2lkdGgsIGJyb3dzZXJIZWlnaHQsIHNjcm9sbFgsIHNjcm9sbFksCgkJCWluc3QgPSB0aGlzLl9kaWFsb2dJbnN0OyAvLyBpbnRlcm5hbCBpbnN0YW5jZQoKCQlpZiAoIWluc3QpIHsKCQkJdGhpcy51dWlkICs9IDE7CgkJCWlkID0gImRwIiArIHRoaXMudXVpZDsKCQkJdGhpcy5fZGlhbG9nSW5wdXQgPSAkKCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9JyIgKyBpZCArCgkJCQkiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz4iKTsKCQkJdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pOwoJCQkkKCJib2R5IikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KTsKCQkJaW5zdCA9IHRoaXMuX2RpYWxvZ0luc3QgPSB0aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LCBmYWxzZSk7CgkJCWluc3Quc2V0dGluZ3MgPSB7fTsKCQkJJC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCAiZGF0ZXBpY2tlciIsIGluc3QpOwoJCX0KCQlkYXRlcGlja2VyX2V4dGVuZFJlbW92ZShpbnN0LnNldHRpbmdzLCBzZXR0aW5ncyB8fCB7fSk7CgkJZGF0ZSA9IChkYXRlICYmIGRhdGUuY29uc3RydWN0b3IgPT09IERhdGUgPyB0aGlzLl9mb3JtYXREYXRlKGluc3QsIGRhdGUpIDogZGF0ZSk7CgkJdGhpcy5fZGlhbG9nSW5wdXQudmFsKGRhdGUpOwoKCQl0aGlzLl9wb3MgPSAocG9zID8gKHBvcy5sZW5ndGggPyBwb3MgOiBbcG9zLnBhZ2VYLCBwb3MucGFnZVldKSA6IG51bGwpOwoJCWlmICghdGhpcy5fcG9zKSB7CgkJCWJyb3dzZXJXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKCQkJYnJvd3NlckhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CgkJCXNjcm9sbFggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CgkJCXNjcm9sbFkgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwoJCQl0aGlzLl9wb3MgPSAvLyBzaG91bGQgdXNlIGFjdHVhbCB3aWR0aC9oZWlnaHQgYmVsb3cKCQkJCVsoYnJvd3NlcldpZHRoIC8gMikgLSAxMDAgKyBzY3JvbGxYLCAoYnJvd3NlckhlaWdodCAvIDIpIC0gMTUwICsgc2Nyb2xsWV07CgkJfQoKCQkvLyBtb3ZlIGlucHV0IG9uIHNjcmVlbiBmb3IgZm9jdXMsIGJ1dCBoaWRkZW4gYmVoaW5kIGRpYWxvZwoJCXRoaXMuX2RpYWxvZ0lucHV0LmNzcygibGVmdCIsICh0aGlzLl9wb3NbMF0gKyAyMCkgKyAicHgiKS5jc3MoInRvcCIsIHRoaXMuX3Bvc1sxXSArICJweCIpOwoJCWluc3Quc2V0dGluZ3Mub25TZWxlY3QgPSBvblNlbGVjdDsKCQl0aGlzLl9pbkRpYWxvZyA9IHRydWU7CgkJdGhpcy5kcERpdi5hZGRDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcyk7CgkJdGhpcy5fc2hvd0RhdGVwaWNrZXIodGhpcy5fZGlhbG9nSW5wdXRbMF0pOwoJCWlmICgkLmJsb2NrVUkpIHsKCQkJJC5ibG9ja1VJKHRoaXMuZHBEaXYpOwoJCX0KCQkkLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sICJkYXRlcGlja2VyIiwgaW5zdCk7CgkJcmV0dXJuIHRoaXM7Cgl9LAoKCS8qIERldGFjaCBhIGRhdGVwaWNrZXIgZnJvbSBpdHMgY29udHJvbC4KCSAqIEBwYXJhbSAgdGFyZ2V0CWVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAqLwoJX2Rlc3Ryb3lEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQpIHsKCQl2YXIgbm9kZU5hbWUsCgkJCSR0YXJnZXQgPSAkKHRhcmdldCksCgkJCWluc3QgPSAkLmRhdGEodGFyZ2V0LCAiZGF0ZXBpY2tlciIpOwoKCQlpZiAoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKSB7CgkJCXJldHVybjsKCQl9CgoJCW5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJJC5yZW1vdmVEYXRhKHRhcmdldCwgImRhdGVwaWNrZXIiKTsKCQlpZiAobm9kZU5hbWUgPT09ICJpbnB1dCIpIHsKCQkJaW5zdC5hcHBlbmQucmVtb3ZlKCk7CgkJCWluc3QudHJpZ2dlci5yZW1vdmUoKTsKCQkJJHRhcmdldC5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuCgkJCQl1bmJpbmQoImZvY3VzIiwgdGhpcy5fc2hvd0RhdGVwaWNrZXIpLgoJCQkJdW5iaW5kKCJrZXlkb3duIiwgdGhpcy5fZG9LZXlEb3duKS4KCQkJCXVuYmluZCgia2V5cHJlc3MiLCB0aGlzLl9kb0tleVByZXNzKS4KCQkJCXVuYmluZCgia2V5dXAiLCB0aGlzLl9kb0tleVVwKTsKCQl9IGVsc2UgaWYgKG5vZGVOYW1lID09PSAiZGl2IiB8fCBub2RlTmFtZSA9PT0gInNwYW4iKSB7CgkJCSR0YXJnZXQucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCk7CgkJfQoJfSwKCgkvKiBFbmFibGUgdGhlIGRhdGUgcGlja2VyIHRvIGEgalF1ZXJ5IHNlbGVjdGlvbi4KCSAqIEBwYXJhbSAgdGFyZ2V0CWVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAqLwoJX2VuYWJsZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkgewoJCXZhciBub2RlTmFtZSwgaW5saW5lLAoJCQkkdGFyZ2V0ID0gJCh0YXJnZXQpLAoJCQlpbnN0ID0gJC5kYXRhKHRhcmdldCwgImRhdGVwaWNrZXIiKTsKCgkJaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkgewoJCQlyZXR1cm47CgkJfQoKCQlub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCWlmIChub2RlTmFtZSA9PT0gImlucHV0IikgewoJCQl0YXJnZXQuZGlzYWJsZWQgPSBmYWxzZTsKCQkJaW5zdC50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuCgkJCQllYWNoKGZ1bmN0aW9uKCkgeyB0aGlzLmRpc2FibGVkID0gZmFsc2U7IH0pLmVuZCgpLgoJCQkJZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6ICIxLjAiLCBjdXJzb3I6ICIifSk7CgkJfSBlbHNlIGlmIChub2RlTmFtZSA9PT0gImRpdiIgfHwgbm9kZU5hbWUgPT09ICJzcGFuIikgewoJCQlpbmxpbmUgPSAkdGFyZ2V0LmNoaWxkcmVuKCIuIiArIHRoaXMuX2lubGluZUNsYXNzKTsKCQkJaW5saW5lLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7CgkJCWlubGluZS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLgoJCQkJcHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CgkJfQoJCXRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsCgkJCWZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiAodmFsdWUgPT09IHRhcmdldCA/IG51bGwgOiB2YWx1ZSk7IH0pOyAvLyBkZWxldGUgZW50cnkKCX0sCgoJLyogRGlzYWJsZSB0aGUgZGF0ZSBwaWNrZXIgdG8gYSBqUXVlcnkgc2VsZWN0aW9uLgoJICogQHBhcmFtICB0YXJnZXQJZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhbgoJICovCglfZGlzYWJsZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkgewoJCXZhciBub2RlTmFtZSwgaW5saW5lLAoJCQkkdGFyZ2V0ID0gJCh0YXJnZXQpLAoJCQlpbnN0ID0gJC5kYXRhKHRhcmdldCwgImRhdGVwaWNrZXIiKTsKCgkJaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkgewoJCQlyZXR1cm47CgkJfQoKCQlub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCWlmIChub2RlTmFtZSA9PT0gImlucHV0IikgewoJCQl0YXJnZXQuZGlzYWJsZWQgPSB0cnVlOwoJCQlpbnN0LnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS4KCQkJCWVhY2goZnVuY3Rpb24oKSB7IHRoaXMuZGlzYWJsZWQgPSB0cnVlOyB9KS5lbmQoKS4KCQkJCWZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiAiMC41IiwgY3Vyc29yOiAiZGVmYXVsdCJ9KTsKCQl9IGVsc2UgaWYgKG5vZGVOYW1lID09PSAiZGl2IiB8fCBub2RlTmFtZSA9PT0gInNwYW4iKSB7CgkJCWlubGluZSA9ICR0YXJnZXQuY2hpbGRyZW4oIi4iICsgdGhpcy5faW5saW5lQ2xhc3MpOwoJCQlpbmxpbmUuY2hpbGRyZW4oKS5hZGRDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTsKCQkJaW5saW5lLmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLW1vbnRoLCBzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyIikuCgkJCQlwcm9wKCJkaXNhYmxlZCIsIHRydWUpOwoJCX0KCQl0aGlzLl9kaXNhYmxlZElucHV0cyA9ICQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLAoJCQlmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gKHZhbHVlID09PSB0YXJnZXQgPyBudWxsIDogdmFsdWUpOyB9KTsgLy8gZGVsZXRlIGVudHJ5CgkJdGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXSA9IHRhcmdldDsKCX0sCgoJLyogSXMgdGhlIGZpcnN0IGZpZWxkIGluIGEgalF1ZXJ5IGNvbGxlY3Rpb24gZGlzYWJsZWQgYXMgYSBkYXRlcGlja2VyPwoJICogQHBhcmFtICB0YXJnZXQJZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhbgoJICogQHJldHVybiBib29sZWFuIC0gdHJ1ZSBpZiBkaXNhYmxlZCwgZmFsc2UgaWYgZW5hYmxlZAoJICovCglfaXNEaXNhYmxlZERhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkgewoJCWlmICghdGFyZ2V0KSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGg7IGkrKykgewoJCQlpZiAodGhpcy5fZGlzYWJsZWRJbnB1dHNbaV0gPT09IHRhcmdldCkgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJcmV0dXJuIGZhbHNlOwoJfSwKCgkvKiBSZXRyaWV2ZSB0aGUgaW5zdGFuY2UgZGF0YSBmb3IgdGhlIHRhcmdldCBjb250cm9sLgoJICogQHBhcmFtICB0YXJnZXQgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAqIEByZXR1cm4gIG9iamVjdCAtIHRoZSBhc3NvY2lhdGVkIGluc3RhbmNlIGRhdGEKCSAqIEB0aHJvd3MgIGVycm9yIGlmIGEgalF1ZXJ5IHByb2JsZW0gZ2V0dGluZyBkYXRhCgkgKi8KCV9nZXRJbnN0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQl0cnkgewoJCQlyZXR1cm4gJC5kYXRhKHRhcmdldCwgImRhdGVwaWNrZXIiKTsKCQl9CgkJY2F0Y2ggKGVycikgewoJCQl0aHJvdyAiTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXIiOwoJCX0KCX0sCgoJLyogVXBkYXRlIG9yIHJldHJpZXZlIHRoZSBzZXR0aW5ncyBmb3IgYSBkYXRlIHBpY2tlciBhdHRhY2hlZCB0byBhbiBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbi4KCSAqIEBwYXJhbSAgdGFyZ2V0ICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuCgkgKiBAcGFyYW0gIG5hbWUJb2JqZWN0IC0gdGhlIG5ldyBzZXR0aW5ncyB0byB1cGRhdGUgb3IKCSAqCQkJCXN0cmluZyAtIHRoZSBuYW1lIG9mIHRoZSBzZXR0aW5nIHRvIGNoYW5nZSBvciByZXRyaWV2ZSwKCSAqCQkJCXdoZW4gcmV0cmlldmluZyBhbHNvICJhbGwiIGZvciBhbGwgaW5zdGFuY2Ugc2V0dGluZ3Mgb3IKCSAqCQkJCSJkZWZhdWx0cyIgZm9yIGFsbCBnbG9iYWwgZGVmYXVsdHMKCSAqIEBwYXJhbSAgdmFsdWUgICBhbnkgLSB0aGUgbmV3IHZhbHVlIGZvciB0aGUgc2V0dGluZwoJICoJCQkJKG9taXQgaWYgYWJvdmUgaXMgYW4gb2JqZWN0IG9yIHRvIHJldHJpZXZlIGEgdmFsdWUpCgkgKi8KCV9vcHRpb25EYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5hbWUsIHZhbHVlKSB7CgkJdmFyIHNldHRpbmdzLCBkYXRlLCBtaW5EYXRlLCBtYXhEYXRlLAoJCQlpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXQpOwoKCQlpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgbmFtZSA9PT0gInN0cmluZyIpIHsKCQkJcmV0dXJuIChuYW1lID09PSAiZGVmYXVsdHMiID8gJC5leHRlbmQoe30sICQuZGF0ZXBpY2tlci5fZGVmYXVsdHMpIDoKCQkJCShpbnN0ID8gKG5hbWUgPT09ICJhbGwiID8gJC5leHRlbmQoe30sIGluc3Quc2V0dGluZ3MpIDoKCQkJCXRoaXMuX2dldChpbnN0LCBuYW1lKSkgOiBudWxsKSk7CgkJfQoKCQlzZXR0aW5ncyA9IG5hbWUgfHwge307CgkJaWYgKHR5cGVvZiBuYW1lID09PSAic3RyaW5nIikgewoJCQlzZXR0aW5ncyA9IHt9OwoJCQlzZXR0aW5nc1tuYW1lXSA9IHZhbHVlOwoJCX0KCgkJaWYgKGluc3QpIHsKCQkJaWYgKHRoaXMuX2N1ckluc3QgPT09IGluc3QpIHsKCQkJCXRoaXMuX2hpZGVEYXRlcGlja2VyKCk7CgkJCX0KCgkJCWRhdGUgPSB0aGlzLl9nZXREYXRlRGF0ZXBpY2tlcih0YXJnZXQsIHRydWUpOwoJCQltaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCAibWluIik7CgkJCW1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsICJtYXgiKTsKCQkJZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywgc2V0dGluZ3MpOwoJCQkvLyByZWZvcm1hdCB0aGUgb2xkIG1pbkRhdGUvbWF4RGF0ZSB2YWx1ZXMgaWYgZGF0ZUZvcm1hdCBjaGFuZ2VzIGFuZCBhIG5ldyBtaW5EYXRlL21heERhdGUgaXNuJ3QgcHJvdmlkZWQKCQkJaWYgKG1pbkRhdGUgIT09IG51bGwgJiYgc2V0dGluZ3MuZGF0ZUZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIHNldHRpbmdzLm1pbkRhdGUgPT09IHVuZGVmaW5lZCkgewoJCQkJaW5zdC5zZXR0aW5ncy5taW5EYXRlID0gdGhpcy5fZm9ybWF0RGF0ZShpbnN0LCBtaW5EYXRlKTsKCQkJfQoJCQlpZiAobWF4RGF0ZSAhPT0gbnVsbCAmJiBzZXR0aW5ncy5kYXRlRm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgc2V0dGluZ3MubWF4RGF0ZSA9PT0gdW5kZWZpbmVkKSB7CgkJCQlpbnN0LnNldHRpbmdzLm1heERhdGUgPSB0aGlzLl9mb3JtYXREYXRlKGluc3QsIG1heERhdGUpOwoJCQl9CgkJCWlmICggImRpc2FibGVkIiBpbiBzZXR0aW5ncyApIHsKCQkJCWlmICggc2V0dGluZ3MuZGlzYWJsZWQgKSB7CgkJCQkJdGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodGFyZ2V0KTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0YXJnZXQpOwoJCQkJfQoJCQl9CgkJCXRoaXMuX2F0dGFjaG1lbnRzKCQodGFyZ2V0KSwgaW5zdCk7CgkJCXRoaXMuX2F1dG9TaXplKGluc3QpOwoJCQl0aGlzLl9zZXREYXRlKGluc3QsIGRhdGUpOwoJCQl0aGlzLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7CgkJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7CgkJfQoJfSwKCgkvLyBjaGFuZ2UgbWV0aG9kIGRlcHJlY2F0ZWQKCV9jaGFuZ2VEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5hbWUsIHZhbHVlKSB7CgkJdGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0YXJnZXQsIG5hbWUsIHZhbHVlKTsKCX0sCgoJLyogUmVkcmF3IHRoZSBkYXRlIHBpY2tlciBhdHRhY2hlZCB0byBhbiBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbi4KCSAqIEBwYXJhbSAgdGFyZ2V0ICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuCgkgKi8KCV9yZWZyZXNoRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0KSB7CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldCk7CgkJaWYgKGluc3QpIHsKCQkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCQl9Cgl9LAoKCS8qIFNldCB0aGUgZGF0ZXMgZm9yIGEgalF1ZXJ5IHNlbGVjdGlvbi4KCSAqIEBwYXJhbSAgdGFyZ2V0IGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAqIEBwYXJhbSAgZGF0ZQlEYXRlIC0gdGhlIG5ldyBkYXRlCgkgKi8KCV9zZXREYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBkYXRlKSB7CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldCk7CgkJaWYgKGluc3QpIHsKCQkJdGhpcy5fc2V0RGF0ZShpbnN0LCBkYXRlKTsKCQkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCQkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCX0KCX0sCgoJLyogR2V0IHRoZSBkYXRlKHMpIGZvciB0aGUgZmlyc3QgZW50cnkgaW4gYSBqUXVlcnkgc2VsZWN0aW9uLgoJICogQHBhcmFtICB0YXJnZXQgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhbgoJICogQHBhcmFtICBub0RlZmF1bHQgYm9vbGVhbiAtIHRydWUgaWYgbm8gZGVmYXVsdCBkYXRlIGlzIHRvIGJlIHVzZWQKCSAqIEByZXR1cm4gRGF0ZSAtIHRoZSBjdXJyZW50IGRhdGUKCSAqLwoJX2dldERhdGVEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5vRGVmYXVsdCkgewoJCXZhciBpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXQpOwoJCWlmIChpbnN0ICYmICFpbnN0LmlubGluZSkgewoJCQl0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGluc3QsIG5vRGVmYXVsdCk7CgkJfQoJCXJldHVybiAoaW5zdCA/IHRoaXMuX2dldERhdGUoaW5zdCkgOiBudWxsKTsKCX0sCgoJLyogSGFuZGxlIGtleXN0cm9rZXMuICovCglfZG9LZXlEb3duOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBvblNlbGVjdCwgZGF0ZVN0ciwgc2VsLAoJCQlpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCksCgkJCWhhbmRsZWQgPSB0cnVlLAoJCQlpc1JUTCA9IGluc3QuZHBEaXYuaXMoIi51aS1kYXRlcGlja2VyLXJ0bCIpOwoKCQlpbnN0Ll9rZXlFdmVudCA9IHRydWU7CgkJaWYgKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpIHsKCQkJc3dpdGNoIChldmVudC5rZXlDb2RlKSB7CgkJCQljYXNlIDk6ICQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTsKCQkJCQkJaGFuZGxlZCA9IGZhbHNlOwoJCQkJCQlicmVhazsgLy8gaGlkZSBvbiB0YWIgb3V0CgkJCQljYXNlIDEzOiBzZWwgPSAkKCJ0ZC4iICsgJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MgKyAiOm5vdCguIiArCgkJCQkJCQkJCSQuZGF0ZXBpY2tlci5fY3VycmVudENsYXNzICsgIikiLCBpbnN0LmRwRGl2KTsKCQkJCQkJaWYgKHNlbFswXSkgewoJCQkJCQkJJC5kYXRlcGlja2VyLl9zZWxlY3REYXkoZXZlbnQudGFyZ2V0LCBpbnN0LnNlbGVjdGVkTW9udGgsIGluc3Quc2VsZWN0ZWRZZWFyLCBzZWxbMF0pOwoJCQkJCQl9CgoJCQkJCQlvblNlbGVjdCA9ICQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICJvblNlbGVjdCIpOwoJCQkJCQlpZiAob25TZWxlY3QpIHsKCQkJCQkJCWRhdGVTdHIgPSAkLmRhdGVwaWNrZXIuX2Zvcm1hdERhdGUoaW5zdCk7CgoJCQkJCQkJLy8gdHJpZ2dlciBjdXN0b20gY2FsbGJhY2sKCQkJCQkJCW9uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLCBbZGF0ZVN0ciwgaW5zdF0pOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCQkJCQl9CgoJCQkJCQlyZXR1cm4gZmFsc2U7IC8vIGRvbid0IHN1Ym1pdCB0aGUgZm9ybQoJCQkJY2FzZSAyNzogJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCQkJCQlicmVhazsgLy8gaGlkZSBvbiBlc2NhcGUKCQkJCWNhc2UgMzM6ICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID8KCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcEJpZ01vbnRocyIpIDoKCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcE1vbnRocyIpKSwgIk0iKTsKCQkJCQkJYnJlYWs7IC8vIHByZXZpb3VzIG1vbnRoL3llYXIgb24gcGFnZSB1cC8rIGN0cmwKCQkJCWNhc2UgMzQ6ICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID8KCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcEJpZ01vbnRocyIpIDoKCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcE1vbnRocyIpKSwgIk0iKTsKCQkJCQkJYnJlYWs7IC8vIG5leHQgbW9udGgveWVhciBvbiBwYWdlIGRvd24vKyBjdHJsCgkJCQljYXNlIDM1OiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7CgkJCQkJCQkkLmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShldmVudC50YXJnZXQpOwoJCQkJCQl9CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCWJyZWFrOyAvLyBjbGVhciBvbiBjdHJsIG9yIGNvbW1hbmQgK2VuZAoJCQkJY2FzZSAzNjogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgewoJCQkJCQkJJC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoZXZlbnQudGFyZ2V0KTsKCQkJCQkJfQoJCQkJCQloYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5OwoJCQkJCQlicmVhazsgLy8gY3VycmVudCBvbiBjdHJsIG9yIGNvbW1hbmQgK2hvbWUKCQkJCWNhc2UgMzc6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHsKCQkJCQkJCSQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChpc1JUTCA/ICsxIDogLTEpLCAiRCIpOwoJCQkJCQl9CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCS8vIC0xIGRheSBvbiBjdHJsIG9yIGNvbW1hbmQgK2xlZnQKCQkJCQkJaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5KSB7CgkJCQkJCQkkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCAoZXZlbnQuY3RybEtleSA/CgkJCQkJCQkJLSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICJzdGVwQmlnTW9udGhzIikgOgoJCQkJCQkJCS0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcE1vbnRocyIpKSwgIk0iKTsKCQkJCQkJfQoJCQkJCQkvLyBuZXh0IG1vbnRoL3llYXIgb24gYWx0ICtsZWZ0IG9uIE1hYwoJCQkJCQlicmVhazsKCQkJCWNhc2UgMzg6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHsKCQkJCQkJCSQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIC03LCAiRCIpOwoJCQkJCQl9CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCWJyZWFrOyAvLyAtMSB3ZWVrIG9uIGN0cmwgb3IgY29tbWFuZCArdXAKCQkJCWNhc2UgMzk6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHsKCQkJCQkJCSQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChpc1JUTCA/IC0xIDogKzEpLCAiRCIpOwoJCQkJCQl9CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCS8vICsxIGRheSBvbiBjdHJsIG9yIGNvbW1hbmQgK3JpZ2h0CgkJCQkJCWlmIChldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleSkgewoJCQkJCQkJJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwgKGV2ZW50LmN0cmxLZXkgPwoJCQkJCQkJCSskLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic3RlcEJpZ01vbnRocyIpIDoKCQkJCQkJCQkrJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgInN0ZXBNb250aHMiKSksICJNIik7CgkJCQkJCX0KCQkJCQkJLy8gbmV4dCBtb250aC95ZWFyIG9uIGFsdCArcmlnaHQKCQkJCQkJYnJlYWs7CgkJCQljYXNlIDQwOiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7CgkJCQkJCQkkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCArNywgIkQiKTsKCQkJCQkJfQoJCQkJCQloYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5OwoJCQkJCQlicmVhazsgLy8gKzEgd2VlayBvbiBjdHJsIG9yIGNvbW1hbmQgK2Rvd24KCQkJCWRlZmF1bHQ6IGhhbmRsZWQgPSBmYWxzZTsKCQkJfQoJCX0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzYgJiYgZXZlbnQuY3RybEtleSkgeyAvLyBkaXNwbGF5IHRoZSBkYXRlIHBpY2tlciBvbiBjdHJsK2hvbWUKCQkJJC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0aGlzKTsKCQl9IGVsc2UgewoJCQloYW5kbGVkID0gZmFsc2U7CgkJfQoKCQlpZiAoaGFuZGxlZCkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQlldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCQl9Cgl9LAoKCS8qIEZpbHRlciBlbnRlcmVkIGNoYXJhY3RlcnMgLSBiYXNlZCBvbiBkYXRlIGZvcm1hdC4gKi8KCV9kb0tleVByZXNzOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBjaGFycywgY2hyLAoJCQlpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7CgoJCWlmICgkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAiY29uc3RyYWluSW5wdXQiKSkgewoJCQljaGFycyA9ICQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycygkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAiZGF0ZUZvcm1hdCIpKTsKCQkJY2hyID0gU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC5jaGFyQ29kZSA9PSBudWxsID8gZXZlbnQua2V5Q29kZSA6IGV2ZW50LmNoYXJDb2RlKTsKCQkJcmV0dXJuIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCAoY2hyIDwgIiAiIHx8ICFjaGFycyB8fCBjaGFycy5pbmRleE9mKGNocikgPiAtMSk7CgkJfQoJfSwKCgkvKiBTeW5jaHJvbmlzZSBtYW51YWwgZW50cnkgYW5kIGZpZWxkL2FsdGVybmF0ZSBmaWVsZC4gKi8KCV9kb0tleVVwOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBkYXRlLAoJCQlpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7CgoJCWlmIChpbnN0LmlucHV0LnZhbCgpICE9PSBpbnN0Lmxhc3RWYWwpIHsKCQkJdHJ5IHsKCQkJCWRhdGUgPSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICJkYXRlRm9ybWF0IiksCgkJCQkJKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogbnVsbCksCgkJCQkJJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpOwoKCQkJCWlmIChkYXRlKSB7IC8vIG9ubHkgaWYgdmFsaWQKCQkJCQkkLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaW5zdCk7CgkJCQkJJC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoaW5zdCk7CgkJCQkJJC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGluc3QpOwoJCQkJfQoJCQl9CgkJCWNhdGNoIChlcnIpIHsKCQkJfQoJCX0KCQlyZXR1cm4gdHJ1ZTsKCX0sCgoJLyogUG9wLXVwIHRoZSBkYXRlIHBpY2tlciBmb3IgYSBnaXZlbiBpbnB1dCBmaWVsZC4KCSAqIElmIGZhbHNlIHJldHVybmVkIGZyb20gYmVmb3JlU2hvdyBldmVudCBoYW5kbGVyIGRvIG5vdCBzaG93LgoJICogQHBhcmFtICBpbnB1dCAgZWxlbWVudCAtIHRoZSBpbnB1dCBmaWVsZCBhdHRhY2hlZCB0byB0aGUgZGF0ZSBwaWNrZXIgb3IKCSAqCQkJCQlldmVudCAtIGlmIHRyaWdnZXJlZCBieSBmb2N1cwoJICovCglfc2hvd0RhdGVwaWNrZXI6IGZ1bmN0aW9uKGlucHV0KSB7CgkJaW5wdXQgPSBpbnB1dC50YXJnZXQgfHwgaW5wdXQ7CgkJaWYgKGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJpbnB1dCIpIHsgLy8gZmluZCBmcm9tIGJ1dHRvbi9pbWFnZSB0cmlnZ2VyCgkJCWlucHV0ID0gJCgiaW5wdXQiLCBpbnB1dC5wYXJlbnROb2RlKVswXTsKCQl9CgoJCWlmICgkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKGlucHV0KSB8fCAkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9PT0gaW5wdXQpIHsgLy8gYWxyZWFkeSBoZXJlCgkJCXJldHVybjsKCQl9CgoJCXZhciBpbnN0LCBiZWZvcmVTaG93LCBiZWZvcmVTaG93U2V0dGluZ3MsIGlzRml4ZWQsCgkJCW9mZnNldCwgc2hvd0FuaW0sIGR1cmF0aW9uOwoKCQlpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGlucHV0KTsKCQlpZiAoJC5kYXRlcGlja2VyLl9jdXJJbnN0ICYmICQuZGF0ZXBpY2tlci5fY3VySW5zdCAhPT0gaW5zdCkgewoJCQkkLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCh0cnVlLCB0cnVlKTsKCQkJaWYgKCBpbnN0ICYmICQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcgKSB7CgkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCAkLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0gKTsKCQkJfQoJCX0KCgkJYmVmb3JlU2hvdyA9ICQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICJiZWZvcmVTaG93Iik7CgkJYmVmb3JlU2hvd1NldHRpbmdzID0gYmVmb3JlU2hvdyA/IGJlZm9yZVNob3cuYXBwbHkoaW5wdXQsIFtpbnB1dCwgaW5zdF0pIDoge307CgkJaWYoYmVmb3JlU2hvd1NldHRpbmdzID09PSBmYWxzZSl7CgkJCXJldHVybjsKCQl9CgkJZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywgYmVmb3JlU2hvd1NldHRpbmdzKTsKCgkJaW5zdC5sYXN0VmFsID0gbnVsbDsKCQkkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9IGlucHV0OwoJCSQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChpbnN0KTsKCgkJaWYgKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cpIHsgLy8gaGlkZSBjdXJzb3IKCQkJaW5wdXQudmFsdWUgPSAiIjsKCQl9CgkJaWYgKCEkLmRhdGVwaWNrZXIuX3BvcykgeyAvLyBwb3NpdGlvbiBiZWxvdyBpbnB1dAoJCQkkLmRhdGVwaWNrZXIuX3BvcyA9ICQuZGF0ZXBpY2tlci5fZmluZFBvcyhpbnB1dCk7CgkJCSQuZGF0ZXBpY2tlci5fcG9zWzFdICs9IGlucHV0Lm9mZnNldEhlaWdodDsgLy8gYWRkIHRoZSBoZWlnaHQKCQl9CgoJCWlzRml4ZWQgPSBmYWxzZTsKCQkkKGlucHV0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpIHsKCQkJaXNGaXhlZCB8PSAkKHRoaXMpLmNzcygicG9zaXRpb24iKSA9PT0gImZpeGVkIjsKCQkJcmV0dXJuICFpc0ZpeGVkOwoJCX0pOwoKCQlvZmZzZXQgPSB7bGVmdDogJC5kYXRlcGlja2VyLl9wb3NbMF0sIHRvcDogJC5kYXRlcGlja2VyLl9wb3NbMV19OwoJCSQuZGF0ZXBpY2tlci5fcG9zID0gbnVsbDsKCQkvL3RvIGF2b2lkIGZsYXNoZXMgb24gRmlyZWZveAoJCWluc3QuZHBEaXYuZW1wdHkoKTsKCQkvLyBkZXRlcm1pbmUgc2l6aW5nIG9mZnNjcmVlbgoJCWluc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjogImFic29sdXRlIiwgZGlzcGxheTogImJsb2NrIiwgdG9wOiAiLTEwMDBweCJ9KTsKCQkkLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7CgkJLy8gZml4IHdpZHRoIGZvciBkeW5hbWljIG51bWJlciBvZiBkYXRlIHBpY2tlcnMKCQkvLyBhbmQgYWRqdXN0IHBvc2l0aW9uIGJlZm9yZSBzaG93aW5nCgkJb2Zmc2V0ID0gJC5kYXRlcGlja2VyLl9jaGVja09mZnNldChpbnN0LCBvZmZzZXQsIGlzRml4ZWQpOwoJCWluc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjogKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cgJiYgJC5ibG9ja1VJID8KCQkJInN0YXRpYyIgOiAoaXNGaXhlZCA/ICJmaXhlZCIgOiAiYWJzb2x1dGUiKSksIGRpc3BsYXk6ICJub25lIiwKCQkJbGVmdDogb2Zmc2V0LmxlZnQgKyAicHgiLCB0b3A6IG9mZnNldC50b3AgKyAicHgifSk7CgoJCWlmICghaW5zdC5pbmxpbmUpIHsKCQkJc2hvd0FuaW0gPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic2hvd0FuaW0iKTsKCQkJZHVyYXRpb24gPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAiZHVyYXRpb24iKTsKCQkJaW5zdC5kcERpdi5jc3MoICJ6LWluZGV4IiwgZGF0ZXBpY2tlcl9nZXRaaW5kZXgoICQoIGlucHV0ICkgKSArIDEgKTsKCQkJJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyA9IHRydWU7CgoJCQlpZiAoICQuZWZmZWN0cyAmJiAkLmVmZmVjdHMuZWZmZWN0WyBzaG93QW5pbSBdICkgewoJCQkJaW5zdC5kcERpdi5zaG93KHNob3dBbmltLCAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAic2hvd09wdGlvbnMiKSwgZHVyYXRpb24pOwoJCQl9IGVsc2UgewoJCQkJaW5zdC5kcERpdltzaG93QW5pbSB8fCAic2hvdyJdKHNob3dBbmltID8gZHVyYXRpb24gOiBudWxsKTsKCQkJfQoKCQkJaWYgKCAkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoIGluc3QgKSApIHsKCQkJCWluc3QuaW5wdXQuZm9jdXMoKTsKCQkJfQoKCQkJJC5kYXRlcGlja2VyLl9jdXJJbnN0ID0gaW5zdDsKCQl9Cgl9LAoKCS8qIEdlbmVyYXRlIHRoZSBkYXRlIHBpY2tlciBjb250ZW50LiAqLwoJX3VwZGF0ZURhdGVwaWNrZXI6IGZ1bmN0aW9uKGluc3QpIHsKCQl0aGlzLm1heFJvd3MgPSA0OyAvL1Jlc2V0IHRoZSBtYXggbnVtYmVyIG9mIHJvd3MgYmVpbmcgZGlzcGxheWVkIChzZWUgIzcwNDMpCgkJZGF0ZXBpY2tlcl9pbnN0QWN0aXZlID0gaW5zdDsgLy8gZm9yIGRlbGVnYXRlIGhvdmVyIGV2ZW50cwoJCWluc3QuZHBEaXYuZW1wdHkoKS5hcHBlbmQodGhpcy5fZ2VuZXJhdGVIVE1MKGluc3QpKTsKCQl0aGlzLl9hdHRhY2hIYW5kbGVycyhpbnN0KTsKCgkJdmFyIG9yaWd5ZWFyc2h0bWwsCgkJCW51bU1vbnRocyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKGluc3QpLAoJCQljb2xzID0gbnVtTW9udGhzWzFdLAoJCQl3aWR0aCA9IDE3LAoJCQlhY3RpdmVDZWxsID0gaW5zdC5kcERpdi5maW5kKCAiLiIgKyB0aGlzLl9kYXlPdmVyQ2xhc3MgKyAiIGEiICk7CgoJCWlmICggYWN0aXZlQ2VsbC5sZW5ndGggPiAwICkgewoJCQlkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3Zlci5hcHBseSggYWN0aXZlQ2VsbC5nZXQoIDAgKSApOwoJCX0KCgkJaW5zdC5kcERpdi5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTQiKS53aWR0aCgiIik7CgkJaWYgKGNvbHMgPiAxKSB7CgkJCWluc3QuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIiArIGNvbHMpLmNzcygid2lkdGgiLCAod2lkdGggKiBjb2xzKSArICJlbSIpOwoJCX0KCQlpbnN0LmRwRGl2WyhudW1Nb250aHNbMF0gIT09IDEgfHwgbnVtTW9udGhzWzFdICE9PSAxID8gImFkZCIgOiAicmVtb3ZlIikgKwoJCQkiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpOwoJCWluc3QuZHBEaXZbKHRoaXMuX2dldChpbnN0LCAiaXNSVEwiKSA/ICJhZGQiIDogInJlbW92ZSIpICsKCQkJIkNsYXNzIl0oInVpLWRhdGVwaWNrZXItcnRsIik7CgoJCWlmIChpbnN0ID09PSAkLmRhdGVwaWNrZXIuX2N1ckluc3QgJiYgJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiAkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoIGluc3QgKSApIHsKCQkJaW5zdC5pbnB1dC5mb2N1cygpOwoJCX0KCgkJLy8gZGVmZmVyZWQgcmVuZGVyIG9mIHRoZSB5ZWFycyBzZWxlY3QgKHRvIGF2b2lkIGZsYXNoZXMgb24gRmlyZWZveCkKCQlpZiggaW5zdC55ZWFyc2h0bWwgKXsKCQkJb3JpZ3llYXJzaHRtbCA9IGluc3QueWVhcnNodG1sOwoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CgkJCQkvL2Fzc3VyZSB0aGF0IGluc3QueWVhcnNodG1sIGRpZG4ndCBjaGFuZ2UuCgkJCQlpZiggb3JpZ3llYXJzaHRtbCA9PT0gaW5zdC55ZWFyc2h0bWwgJiYgaW5zdC55ZWFyc2h0bWwgKXsKCQkJCQlpbnN0LmRwRGl2LmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLXllYXI6Zmlyc3QiKS5yZXBsYWNlV2l0aChpbnN0LnllYXJzaHRtbCk7CgkJCQl9CgkJCQlvcmlneWVhcnNodG1sID0gaW5zdC55ZWFyc2h0bWwgPSBudWxsOwoJCQl9LCAwKTsKCQl9Cgl9LAoKCS8vICM2Njk0IC0gZG9uJ3QgZm9jdXMgdGhlIGlucHV0IGlmIGl0J3MgYWxyZWFkeSBmb2N1c2VkCgkvLyB0aGlzIGJyZWFrcyB0aGUgY2hhbmdlIGV2ZW50IGluIElFCgkvLyBTdXBwb3J0OiBJRSBhbmQgalF1ZXJ5IDwxLjkKCV9zaG91bGRGb2N1c0lucHV0OiBmdW5jdGlvbiggaW5zdCApIHsKCQlyZXR1cm4gaW5zdC5pbnB1dCAmJiBpbnN0LmlucHV0LmlzKCAiOnZpc2libGUiICkgJiYgIWluc3QuaW5wdXQuaXMoICI6ZGlzYWJsZWQiICkgJiYgIWluc3QuaW5wdXQuaXMoICI6Zm9jdXMiICk7Cgl9LAoKCS8qIENoZWNrIHBvc2l0aW9uaW5nIHRvIHJlbWFpbiBvbiBzY3JlZW4uICovCglfY2hlY2tPZmZzZXQ6IGZ1bmN0aW9uKGluc3QsIG9mZnNldCwgaXNGaXhlZCkgewoJCXZhciBkcFdpZHRoID0gaW5zdC5kcERpdi5vdXRlcldpZHRoKCksCgkJCWRwSGVpZ2h0ID0gaW5zdC5kcERpdi5vdXRlckhlaWdodCgpLAoJCQlpbnB1dFdpZHRoID0gaW5zdC5pbnB1dCA/IGluc3QuaW5wdXQub3V0ZXJXaWR0aCgpIDogMCwKCQkJaW5wdXRIZWlnaHQgPSBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC5vdXRlckhlaWdodCgpIDogMCwKCQkJdmlld1dpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICsgKGlzRml4ZWQgPyAwIDogJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSwKCQkJdmlld0hlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKyAoaXNGaXhlZCA/IDAgOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7CgoJCW9mZnNldC5sZWZ0IC09ICh0aGlzLl9nZXQoaW5zdCwgImlzUlRMIikgPyAoZHBXaWR0aCAtIGlucHV0V2lkdGgpIDogMCk7CgkJb2Zmc2V0LmxlZnQgLT0gKGlzRml4ZWQgJiYgb2Zmc2V0LmxlZnQgPT09IGluc3QuaW5wdXQub2Zmc2V0KCkubGVmdCkgPyAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgOiAwOwoJCW9mZnNldC50b3AgLT0gKGlzRml4ZWQgJiYgb2Zmc2V0LnRvcCA9PT0gKGluc3QuaW5wdXQub2Zmc2V0KCkudG9wICsgaW5wdXRIZWlnaHQpKSA/ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDogMDsKCgkJLy8gbm93IGNoZWNrIGlmIGRhdGVwaWNrZXIgaXMgc2hvd2luZyBvdXRzaWRlIHdpbmRvdyB2aWV3cG9ydCAtIG1vdmUgdG8gYSBiZXR0ZXIgcGxhY2UgaWYgc28uCgkJb2Zmc2V0LmxlZnQgLT0gTWF0aC5taW4ob2Zmc2V0LmxlZnQsIChvZmZzZXQubGVmdCArIGRwV2lkdGggPiB2aWV3V2lkdGggJiYgdmlld1dpZHRoID4gZHBXaWR0aCkgPwoJCQlNYXRoLmFicyhvZmZzZXQubGVmdCArIGRwV2lkdGggLSB2aWV3V2lkdGgpIDogMCk7CgkJb2Zmc2V0LnRvcCAtPSBNYXRoLm1pbihvZmZzZXQudG9wLCAob2Zmc2V0LnRvcCArIGRwSGVpZ2h0ID4gdmlld0hlaWdodCAmJiB2aWV3SGVpZ2h0ID4gZHBIZWlnaHQpID8KCQkJTWF0aC5hYnMoZHBIZWlnaHQgKyBpbnB1dEhlaWdodCkgOiAwKTsKCgkJcmV0dXJuIG9mZnNldDsKCX0sCgoJLyogRmluZCBhbiBvYmplY3QncyBwb3NpdGlvbiBvbiB0aGUgc2NyZWVuLiAqLwoJX2ZpbmRQb3M6IGZ1bmN0aW9uKG9iaikgewoJCXZhciBwb3NpdGlvbiwKCQkJaW5zdCA9IHRoaXMuX2dldEluc3Qob2JqKSwKCQkJaXNSVEwgPSB0aGlzLl9nZXQoaW5zdCwgImlzUlRMIik7CgoJCXdoaWxlIChvYmogJiYgKG9iai50eXBlID09PSAiaGlkZGVuIiB8fCBvYmoubm9kZVR5cGUgIT09IDEgfHwgJC5leHByLmZpbHRlcnMuaGlkZGVuKG9iaikpKSB7CgkJCW9iaiA9IG9ialtpc1JUTCA/ICJwcmV2aW91c1NpYmxpbmciIDogIm5leHRTaWJsaW5nIl07CgkJfQoKCQlwb3NpdGlvbiA9ICQob2JqKS5vZmZzZXQoKTsKCQlyZXR1cm4gW3Bvc2l0aW9uLmxlZnQsIHBvc2l0aW9uLnRvcF07Cgl9LAoKCS8qIEhpZGUgdGhlIGRhdGUgcGlja2VyIGZyb20gdmlldy4KCSAqIEBwYXJhbSAgaW5wdXQgIGVsZW1lbnQgLSB0aGUgaW5wdXQgZmllbGQgYXR0YWNoZWQgdG8gdGhlIGRhdGUgcGlja2VyCgkgKi8KCV9oaWRlRGF0ZXBpY2tlcjogZnVuY3Rpb24oaW5wdXQpIHsKCQl2YXIgc2hvd0FuaW0sIGR1cmF0aW9uLCBwb3N0UHJvY2Vzcywgb25DbG9zZSwKCQkJaW5zdCA9IHRoaXMuX2N1ckluc3Q7CgoJCWlmICghaW5zdCB8fCAoaW5wdXQgJiYgaW5zdCAhPT0gJC5kYXRhKGlucHV0LCAiZGF0ZXBpY2tlciIpKSkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAodGhpcy5fZGF0ZXBpY2tlclNob3dpbmcpIHsKCQkJc2hvd0FuaW0gPSB0aGlzLl9nZXQoaW5zdCwgInNob3dBbmltIik7CgkJCWR1cmF0aW9uID0gdGhpcy5fZ2V0KGluc3QsICJkdXJhdGlvbiIpOwoJCQlwb3N0UHJvY2VzcyA9IGZ1bmN0aW9uKCkgewoJCQkJJC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKGluc3QpOwoJCQl9OwoKCQkJLy8gREVQUkVDQVRFRDogYWZ0ZXIgQkMgZm9yIDEuOC54ICQuZWZmZWN0c1sgc2hvd0FuaW0gXSBpcyBub3QgbmVlZGVkCgkJCWlmICggJC5lZmZlY3RzICYmICggJC5lZmZlY3RzLmVmZmVjdFsgc2hvd0FuaW0gXSB8fCAkLmVmZmVjdHNbIHNob3dBbmltIF0gKSApIHsKCQkJCWluc3QuZHBEaXYuaGlkZShzaG93QW5pbSwgJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgInNob3dPcHRpb25zIiksIGR1cmF0aW9uLCBwb3N0UHJvY2Vzcyk7CgkJCX0gZWxzZSB7CgkJCQlpbnN0LmRwRGl2WyhzaG93QW5pbSA9PT0gInNsaWRlRG93biIgPyAic2xpZGVVcCIgOgoJCQkJCShzaG93QW5pbSA9PT0gImZhZGVJbiIgPyAiZmFkZU91dCIgOiAiaGlkZSIpKV0oKHNob3dBbmltID8gZHVyYXRpb24gOiBudWxsKSwgcG9zdFByb2Nlc3MpOwoJCQl9CgoJCQlpZiAoIXNob3dBbmltKSB7CgkJCQlwb3N0UHJvY2VzcygpOwoJCQl9CgkJCXRoaXMuX2RhdGVwaWNrZXJTaG93aW5nID0gZmFsc2U7CgoJCQlvbkNsb3NlID0gdGhpcy5fZ2V0KGluc3QsICJvbkNsb3NlIik7CgkJCWlmIChvbkNsb3NlKSB7CgkJCQlvbkNsb3NlLmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLCBbKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogIiIpLCBpbnN0XSk7CgkJCX0KCgkJCXRoaXMuX2xhc3RJbnB1dCA9IG51bGw7CgkJCWlmICh0aGlzLl9pbkRpYWxvZykgewoJCQkJdGhpcy5fZGlhbG9nSW5wdXQuY3NzKHsgcG9zaXRpb246ICJhYnNvbHV0ZSIsIGxlZnQ6ICIwIiwgdG9wOiAiLTEwMHB4IiB9KTsKCQkJCWlmICgkLmJsb2NrVUkpIHsKCQkJCQkkLnVuYmxvY2tVSSgpOwoJCQkJCSQoImJvZHkiKS5hcHBlbmQodGhpcy5kcERpdik7CgkJCQl9CgkJCX0KCQkJdGhpcy5faW5EaWFsb2cgPSBmYWxzZTsKCQl9Cgl9LAoKCS8qIFRpZHkgdXAgYWZ0ZXIgYSBkaWFsb2cgZGlzcGxheS4gKi8KCV90aWR5RGlhbG9nOiBmdW5jdGlvbihpbnN0KSB7CgkJaW5zdC5kcERpdi5yZW1vdmVDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcykudW5iaW5kKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpOwoJfSwKCgkvKiBDbG9zZSBkYXRlIHBpY2tlciBpZiBjbGlja2VkIGVsc2V3aGVyZS4gKi8KCV9jaGVja0V4dGVybmFsQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJaWYgKCEkLmRhdGVwaWNrZXIuX2N1ckluc3QpIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCksCgkJCWluc3QgPSAkLmRhdGVwaWNrZXIuX2dldEluc3QoJHRhcmdldFswXSk7CgoJCWlmICggKCAoICR0YXJnZXRbMF0uaWQgIT09ICQuZGF0ZXBpY2tlci5fbWFpbkRpdklkICYmCgkJCQkkdGFyZ2V0LnBhcmVudHMoIiMiICsgJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aCA9PT0gMCAmJgoJCQkJISR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkgJiYKCQkJCSEkdGFyZ2V0LmNsb3Nlc3QoIi4iICsgJC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCAmJgoJCQkJJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiAhKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cgJiYgJC5ibG9ja1VJKSApICkgfHwKCQkJKCAkdGFyZ2V0Lmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpICYmICQuZGF0ZXBpY2tlci5fY3VySW5zdCAhPT0gaW5zdCApICkgewoJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCX0KCX0sCgoJLyogQWRqdXN0IG9uZSBvZiB0aGUgZGF0ZSBzdWItZmllbGRzLiAqLwoJX2FkanVzdERhdGU6IGZ1bmN0aW9uKGlkLCBvZmZzZXQsIHBlcmlvZCkgewoJCXZhciB0YXJnZXQgPSAkKGlkKSwKCQkJaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCgkJaWYgKHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRhcmdldFswXSkpIHsKCQkJcmV0dXJuOwoJCX0KCQl0aGlzLl9hZGp1c3RJbnN0RGF0ZShpbnN0LCBvZmZzZXQgKwoJCQkocGVyaW9kID09PSAiTSIgPyB0aGlzLl9nZXQoaW5zdCwgInNob3dDdXJyZW50QXRQb3MiKSA6IDApLCAvLyB1bmRvIHBvc2l0aW9uaW5nCgkJCXBlcmlvZCk7CgkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCX0sCgoJLyogQWN0aW9uIGZvciBjdXJyZW50IGxpbmsuICovCglfZ290b1RvZGF5OiBmdW5jdGlvbihpZCkgewoJCXZhciBkYXRlLAoJCQl0YXJnZXQgPSAkKGlkKSwKCQkJaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCgkJaWYgKHRoaXMuX2dldChpbnN0LCAiZ290b0N1cnJlbnQiKSAmJiBpbnN0LmN1cnJlbnREYXkpIHsKCQkJaW5zdC5zZWxlY3RlZERheSA9IGluc3QuY3VycmVudERheTsKCQkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBpbnN0LmN1cnJlbnRNb250aDsKCQkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gaW5zdC5jdXJyZW50WWVhcjsKCQl9IGVsc2UgewoJCQlkYXRlID0gbmV3IERhdGUoKTsKCQkJaW5zdC5zZWxlY3RlZERheSA9IGRhdGUuZ2V0RGF0ZSgpOwoJCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGRhdGUuZ2V0TW9udGgoKTsKCQkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCX0KCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJdGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpOwoJfSwKCgkvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIG5ldyBtb250aC95ZWFyLiAqLwoJX3NlbGVjdE1vbnRoWWVhcjogZnVuY3Rpb24oaWQsIHNlbGVjdCwgcGVyaW9kKSB7CgkJdmFyIHRhcmdldCA9ICQoaWQpLAoJCQlpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pOwoKCQlpbnN0WyJzZWxlY3RlZCIgKyAocGVyaW9kID09PSAiTSIgPyAiTW9udGgiIDogIlllYXIiKV0gPQoJCWluc3RbImRyYXciICsgKHBlcmlvZCA9PT0gIk0iID8gIk1vbnRoIiA6ICJZZWFyIildID0KCQkJcGFyc2VJbnQoc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTsKCgkJdGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpOwoJCXRoaXMuX2FkanVzdERhdGUodGFyZ2V0KTsKCX0sCgoJLyogQWN0aW9uIGZvciBzZWxlY3RpbmcgYSBkYXkuICovCglfc2VsZWN0RGF5OiBmdW5jdGlvbihpZCwgbW9udGgsIHllYXIsIHRkKSB7CgkJdmFyIGluc3QsCgkJCXRhcmdldCA9ICQoaWQpOwoKCQlpZiAoJCh0ZCkuaGFzQ2xhc3ModGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MpIHx8IHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRhcmdldFswXSkpIHsKCQkJcmV0dXJuOwoJCX0KCgkJaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCQlpbnN0LnNlbGVjdGVkRGF5ID0gaW5zdC5jdXJyZW50RGF5ID0gJCgiYSIsIHRkKS5odG1sKCk7CgkJaW5zdC5zZWxlY3RlZE1vbnRoID0gaW5zdC5jdXJyZW50TW9udGggPSBtb250aDsKCQlpbnN0LnNlbGVjdGVkWWVhciA9IGluc3QuY3VycmVudFllYXIgPSB5ZWFyOwoJCXRoaXMuX3NlbGVjdERhdGUoaWQsIHRoaXMuX2Zvcm1hdERhdGUoaW5zdCwKCQkJaW5zdC5jdXJyZW50RGF5LCBpbnN0LmN1cnJlbnRNb250aCwgaW5zdC5jdXJyZW50WWVhcikpOwoJfSwKCgkvKiBFcmFzZSB0aGUgaW5wdXQgZmllbGQgYW5kIGhpZGUgdGhlIGRhdGUgcGlja2VyLiAqLwoJX2NsZWFyRGF0ZTogZnVuY3Rpb24oaWQpIHsKCQl2YXIgdGFyZ2V0ID0gJChpZCk7CgkJdGhpcy5fc2VsZWN0RGF0ZSh0YXJnZXQsICIiKTsKCX0sCgoJLyogVXBkYXRlIHRoZSBpbnB1dCBmaWVsZCB3aXRoIHRoZSBzZWxlY3RlZCBkYXRlLiAqLwoJX3NlbGVjdERhdGU6IGZ1bmN0aW9uKGlkLCBkYXRlU3RyKSB7CgkJdmFyIG9uU2VsZWN0LAoJCQl0YXJnZXQgPSAkKGlkKSwKCQkJaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCgkJZGF0ZVN0ciA9IChkYXRlU3RyICE9IG51bGwgPyBkYXRlU3RyIDogdGhpcy5fZm9ybWF0RGF0ZShpbnN0KSk7CgkJaWYgKGluc3QuaW5wdXQpIHsKCQkJaW5zdC5pbnB1dC52YWwoZGF0ZVN0cik7CgkJfQoJCXRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KTsKCgkJb25TZWxlY3QgPSB0aGlzLl9nZXQoaW5zdCwgIm9uU2VsZWN0Iik7CgkJaWYgKG9uU2VsZWN0KSB7CgkJCW9uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLCBbZGF0ZVN0ciwgaW5zdF0pOyAgLy8gdHJpZ2dlciBjdXN0b20gY2FsbGJhY2sKCQl9IGVsc2UgaWYgKGluc3QuaW5wdXQpIHsKCQkJaW5zdC5pbnB1dC50cmlnZ2VyKCJjaGFuZ2UiKTsgLy8gZmlyZSB0aGUgY2hhbmdlIGV2ZW50CgkJfQoKCQlpZiAoaW5zdC5pbmxpbmUpewoJCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpOwoJCX0gZWxzZSB7CgkJCXRoaXMuX2hpZGVEYXRlcGlja2VyKCk7CgkJCXRoaXMuX2xhc3RJbnB1dCA9IGluc3QuaW5wdXRbMF07CgkJCWlmICh0eXBlb2YoaW5zdC5pbnB1dFswXSkgIT09ICJvYmplY3QiKSB7CgkJCQlpbnN0LmlucHV0LmZvY3VzKCk7IC8vIHJlc3RvcmUgZm9jdXMKCQkJfQoJCQl0aGlzLl9sYXN0SW5wdXQgPSBudWxsOwoJCX0KCX0sCgoJLyogVXBkYXRlIGFueSBhbHRlcm5hdGUgZmllbGQgdG8gc3luY2hyb25pc2Ugd2l0aCB0aGUgbWFpbiBmaWVsZC4gKi8KCV91cGRhdGVBbHRlcm5hdGU6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgYWx0Rm9ybWF0LCBkYXRlLCBkYXRlU3RyLAoJCQlhbHRGaWVsZCA9IHRoaXMuX2dldChpbnN0LCAiYWx0RmllbGQiKTsKCgkJaWYgKGFsdEZpZWxkKSB7IC8vIHVwZGF0ZSBhbHRlcm5hdGUgZmllbGQgdG9vCgkJCWFsdEZvcm1hdCA9IHRoaXMuX2dldChpbnN0LCAiYWx0Rm9ybWF0IikgfHwgdGhpcy5fZ2V0KGluc3QsICJkYXRlRm9ybWF0Iik7CgkJCWRhdGUgPSB0aGlzLl9nZXREYXRlKGluc3QpOwoJCQlkYXRlU3RyID0gdGhpcy5mb3JtYXREYXRlKGFsdEZvcm1hdCwgZGF0ZSwgdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKTsKCQkJJChhbHRGaWVsZCkuZWFjaChmdW5jdGlvbigpIHsgJCh0aGlzKS52YWwoZGF0ZVN0cik7IH0pOwoJCX0KCX0sCgoJLyogU2V0IGFzIGJlZm9yZVNob3dEYXkgZnVuY3Rpb24gdG8gcHJldmVudCBzZWxlY3Rpb24gb2Ygd2Vla2VuZHMuCgkgKiBAcGFyYW0gIGRhdGUgIERhdGUgLSB0aGUgZGF0ZSB0byBjdXN0b21pc2UKCSAqIEByZXR1cm4gW2Jvb2xlYW4sIHN0cmluZ10gLSBpcyB0aGlzIGRhdGUgc2VsZWN0YWJsZT8sIHdoYXQgaXMgaXRzIENTUyBjbGFzcz8KCSAqLwoJbm9XZWVrZW5kczogZnVuY3Rpb24oZGF0ZSkgewoJCXZhciBkYXkgPSBkYXRlLmdldERheSgpOwoJCXJldHVybiBbKGRheSA+IDAgJiYgZGF5IDwgNiksICIiXTsKCX0sCgoJLyogU2V0IGFzIGNhbGN1bGF0ZVdlZWsgdG8gZGV0ZXJtaW5lIHRoZSB3ZWVrIG9mIHRoZSB5ZWFyIGJhc2VkIG9uIHRoZSBJU08gODYwMSBkZWZpbml0aW9uLgoJICogQHBhcmFtICBkYXRlICBEYXRlIC0gdGhlIGRhdGUgdG8gZ2V0IHRoZSB3ZWVrIGZvcgoJICogQHJldHVybiAgbnVtYmVyIC0gdGhlIG51bWJlciBvZiB0aGUgd2VlayB3aXRoaW4gdGhlIHllYXIgdGhhdCBjb250YWlucyB0aGlzIGRhdGUKCSAqLwoJaXNvODYwMVdlZWs6IGZ1bmN0aW9uKGRhdGUpIHsKCQl2YXIgdGltZSwKCQkJY2hlY2tEYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpOwoKCQkvLyBGaW5kIFRodXJzZGF5IG9mIHRoaXMgd2VlayBzdGFydGluZyBvbiBNb25kYXkKCQljaGVja0RhdGUuc2V0RGF0ZShjaGVja0RhdGUuZ2V0RGF0ZSgpICsgNCAtIChjaGVja0RhdGUuZ2V0RGF5KCkgfHwgNykpOwoKCQl0aW1lID0gY2hlY2tEYXRlLmdldFRpbWUoKTsKCQljaGVja0RhdGUuc2V0TW9udGgoMCk7IC8vIENvbXBhcmUgd2l0aCBKYW4gMQoJCWNoZWNrRGF0ZS5zZXREYXRlKDEpOwoJCXJldHVybiBNYXRoLmZsb29yKE1hdGgucm91bmQoKHRpbWUgLSBjaGVja0RhdGUpIC8gODY0MDAwMDApIC8gNykgKyAxOwoJfSwKCgkvKiBQYXJzZSBhIHN0cmluZyB2YWx1ZSBpbnRvIGEgZGF0ZSBvYmplY3QuCgkgKiBTZWUgZm9ybWF0RGF0ZSBiZWxvdyBmb3IgdGhlIHBvc3NpYmxlIGZvcm1hdHMuCgkgKgoJICogQHBhcmFtICBmb3JtYXQgc3RyaW5nIC0gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgZGF0ZQoJICogQHBhcmFtICB2YWx1ZSBzdHJpbmcgLSB0aGUgZGF0ZSBpbiB0aGUgYWJvdmUgZm9ybWF0CgkgKiBAcGFyYW0gIHNldHRpbmdzIE9iamVjdCAtIGF0dHJpYnV0ZXMgaW5jbHVkZToKCSAqCQkJCQlzaG9ydFllYXJDdXRvZmYgIG51bWJlciAtIHRoZSBjdXRvZmYgeWVhciBmb3IgZGV0ZXJtaW5pbmcgdGhlIGNlbnR1cnkgKG9wdGlvbmFsKQoJICoJCQkJCWRheU5hbWVzU2hvcnQJc3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQoJICoJCQkJCWRheU5hbWVzCQlzdHJpbmdbN10gLSBuYW1lcyBvZiB0aGUgZGF5cyBmcm9tIFN1bmRheSAob3B0aW9uYWwpCgkgKgkJCQkJbW9udGhOYW1lc1Nob3J0IHN0cmluZ1sxMl0gLSBhYmJyZXZpYXRlZCBuYW1lcyBvZiB0aGUgbW9udGhzIChvcHRpb25hbCkKCSAqCQkJCQltb250aE5hbWVzCQlzdHJpbmdbMTJdIC0gbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpCgkgKiBAcmV0dXJuICBEYXRlIC0gdGhlIGV4dHJhY3RlZCBkYXRlIHZhbHVlIG9yIG51bGwgaWYgdmFsdWUgaXMgYmxhbmsKCSAqLwoJcGFyc2VEYXRlOiBmdW5jdGlvbiAoZm9ybWF0LCB2YWx1ZSwgc2V0dGluZ3MpIHsKCQlpZiAoZm9ybWF0ID09IG51bGwgfHwgdmFsdWUgPT0gbnVsbCkgewoJCQl0aHJvdyAiSW52YWxpZCBhcmd1bWVudHMiOwoJCX0KCgkJdmFsdWUgPSAodHlwZW9mIHZhbHVlID09PSAib2JqZWN0IiA/IHZhbHVlLnRvU3RyaW5nKCkgOiB2YWx1ZSArICIiKTsKCQlpZiAodmFsdWUgPT09ICIiKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCgkJdmFyIGlGb3JtYXQsIGRpbSwgZXh0cmEsCgkJCWlWYWx1ZSA9IDAsCgkJCXNob3J0WWVhckN1dG9mZlRlbXAgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5zaG9ydFllYXJDdXRvZmYgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsCgkJCXNob3J0WWVhckN1dG9mZiA9ICh0eXBlb2Ygc2hvcnRZZWFyQ3V0b2ZmVGVtcCAhPT0gInN0cmluZyIgPyBzaG9ydFllYXJDdXRvZmZUZW1wIDoKCQkJCW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAlIDEwMCArIHBhcnNlSW50KHNob3J0WWVhckN1dG9mZlRlbXAsIDEwKSksCgkJCWRheU5hbWVzU2hvcnQgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lc1Nob3J0IDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCwKCQkJZGF5TmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lcyA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLAoJCQltb250aE5hbWVzU2hvcnQgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5tb250aE5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsCgkJCW1vbnRoTmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5tb250aE5hbWVzIDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcywKCQkJeWVhciA9IC0xLAoJCQltb250aCA9IC0xLAoJCQlkYXkgPSAtMSwKCQkJZG95ID0gLTEsCgkJCWxpdGVyYWwgPSBmYWxzZSwKCQkJZGF0ZSwKCQkJLy8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZAoJCQlsb29rQWhlYWQgPSBmdW5jdGlvbihtYXRjaCkgewoJCQkJdmFyIG1hdGNoZXMgPSAoaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoaUZvcm1hdCArIDEpID09PSBtYXRjaCk7CgkJCQlpZiAobWF0Y2hlcykgewoJCQkJCWlGb3JtYXQrKzsKCQkJCX0KCQkJCXJldHVybiBtYXRjaGVzOwoJCQl9LAoJCQkvLyBFeHRyYWN0IGEgbnVtYmVyIGZyb20gdGhlIHN0cmluZyB2YWx1ZQoJCQlnZXROdW1iZXIgPSBmdW5jdGlvbihtYXRjaCkgewoJCQkJdmFyIGlzRG91YmxlZCA9IGxvb2tBaGVhZChtYXRjaCksCgkJCQkJc2l6ZSA9IChtYXRjaCA9PT0gIkAiID8gMTQgOiAobWF0Y2ggPT09ICIhIiA/IDIwIDoKCQkJCQkobWF0Y2ggPT09ICJ5IiAmJiBpc0RvdWJsZWQgPyA0IDogKG1hdGNoID09PSAibyIgPyAzIDogMikpKSksCgkJCQkJbWluU2l6ZSA9IChtYXRjaCA9PT0gInkiID8gc2l6ZSA6IDEpLAoJCQkJCWRpZ2l0cyA9IG5ldyBSZWdFeHAoIl5cXGR7IiArIG1pblNpemUgKyAiLCIgKyBzaXplICsgIn0iKSwKCQkJCQludW0gPSB2YWx1ZS5zdWJzdHJpbmcoaVZhbHVlKS5tYXRjaChkaWdpdHMpOwoJCQkJaWYgKCFudW0pIHsKCQkJCQl0aHJvdyAiTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gIiArIGlWYWx1ZTsKCQkJCX0KCQkJCWlWYWx1ZSArPSBudW1bMF0ubGVuZ3RoOwoJCQkJcmV0dXJuIHBhcnNlSW50KG51bVswXSwgMTApOwoJCQl9LAoJCQkvLyBFeHRyYWN0IGEgbmFtZSBmcm9tIHRoZSBzdHJpbmcgdmFsdWUgYW5kIGNvbnZlcnQgdG8gYW4gaW5kZXgKCQkJZ2V0TmFtZSA9IGZ1bmN0aW9uKG1hdGNoLCBzaG9ydE5hbWVzLCBsb25nTmFtZXMpIHsKCQkJCXZhciBpbmRleCA9IC0xLAoJCQkJCW5hbWVzID0gJC5tYXAobG9va0FoZWFkKG1hdGNoKSA/IGxvbmdOYW1lcyA6IHNob3J0TmFtZXMsIGZ1bmN0aW9uICh2LCBrKSB7CgkJCQkJCXJldHVybiBbIFtrLCB2XSBdOwoJCQkJCX0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKCQkJCQkJcmV0dXJuIC0oYVsxXS5sZW5ndGggLSBiWzFdLmxlbmd0aCk7CgkJCQkJfSk7CgoJCQkJJC5lYWNoKG5hbWVzLCBmdW5jdGlvbiAoaSwgcGFpcikgewoJCQkJCXZhciBuYW1lID0gcGFpclsxXTsKCQkJCQlpZiAodmFsdWUuc3Vic3RyKGlWYWx1ZSwgbmFtZS5sZW5ndGgpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkgewoJCQkJCQlpbmRleCA9IHBhaXJbMF07CgkJCQkJCWlWYWx1ZSArPSBuYW1lLmxlbmd0aDsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0KCQkJCX0pOwoJCQkJaWYgKGluZGV4ICE9PSAtMSkgewoJCQkJCXJldHVybiBpbmRleCArIDE7CgkJCQl9IGVsc2UgewoJCQkJCXRocm93ICJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIiArIGlWYWx1ZTsKCQkJCX0KCQkJfSwKCQkJLy8gQ29uZmlybSB0aGF0IGEgbGl0ZXJhbCBjaGFyYWN0ZXIgbWF0Y2hlcyB0aGUgc3RyaW5nIHZhbHVlCgkJCWNoZWNrTGl0ZXJhbCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKHZhbHVlLmNoYXJBdChpVmFsdWUpICE9PSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpKSB7CgkJCQkJdGhyb3cgIlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiAiICsgaVZhbHVlOwoJCQkJfQoJCQkJaVZhbHVlKys7CgkJCX07CgoJCWZvciAoaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHsKCQkJaWYgKGxpdGVyYWwpIHsKCQkJCWlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09PSAiJyIgJiYgIWxvb2tBaGVhZCgiJyIpKSB7CgkJCQkJbGl0ZXJhbCA9IGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQljaGVja0xpdGVyYWwoKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkgewoJCQkJCWNhc2UgImQiOgoJCQkJCQlkYXkgPSBnZXROdW1iZXIoImQiKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiRCI6CgkJCQkJCWdldE5hbWUoIkQiLCBkYXlOYW1lc1Nob3J0LCBkYXlOYW1lcyk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgIm8iOgoJCQkJCQlkb3kgPSBnZXROdW1iZXIoIm8iKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAibSI6CgkJCQkJCW1vbnRoID0gZ2V0TnVtYmVyKCJtIik7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgIk0iOgoJCQkJCQltb250aCA9IGdldE5hbWUoIk0iLCBtb250aE5hbWVzU2hvcnQsIG1vbnRoTmFtZXMpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICJ5IjoKCQkJCQkJeWVhciA9IGdldE51bWJlcigieSIpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICJAIjoKCQkJCQkJZGF0ZSA9IG5ldyBEYXRlKGdldE51bWJlcigiQCIpKTsKCQkJCQkJeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKCQkJCQkJbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxOwoJCQkJCQlkYXkgPSBkYXRlLmdldERhdGUoKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiISI6CgkJCQkJCWRhdGUgPSBuZXcgRGF0ZSgoZ2V0TnVtYmVyKCIhIikgLSB0aGlzLl90aWNrc1RvMTk3MCkgLyAxMDAwMCk7CgkJCQkJCXllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgkJCQkJCW1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsKCQkJCQkJZGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgIiciOgoJCQkJCQlpZiAobG9va0FoZWFkKCInIikpewoJCQkJCQkJY2hlY2tMaXRlcmFsKCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlsaXRlcmFsID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQlicmVhazsKCQkJCQlkZWZhdWx0OgoJCQkJCQljaGVja0xpdGVyYWwoKTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKGlWYWx1ZSA8IHZhbHVlLmxlbmd0aCl7CgkJCWV4dHJhID0gdmFsdWUuc3Vic3RyKGlWYWx1ZSk7CgkJCWlmICghL15ccysvLnRlc3QoZXh0cmEpKSB7CgkJCQl0aHJvdyAiRXh0cmEvdW5wYXJzZWQgY2hhcmFjdGVycyBmb3VuZCBpbiBkYXRlOiAiICsgZXh0cmE7CgkJCX0KCQl9CgoJCWlmICh5ZWFyID09PSAtMSkgewoJCQl5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwoJCX0gZWxzZSBpZiAoeWVhciA8IDEwMCkgewoJCQl5ZWFyICs9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAlIDEwMCArCgkJCQkoeWVhciA8PSBzaG9ydFllYXJDdXRvZmYgPyAwIDogLTEwMCk7CgkJfQoKCQlpZiAoZG95ID4gLTEpIHsKCQkJbW9udGggPSAxOwoJCQlkYXkgPSBkb3k7CgkJCWRvIHsKCQkJCWRpbSA9IHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoIC0gMSk7CgkJCQlpZiAoZGF5IDw9IGRpbSkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJbW9udGgrKzsKCQkJCWRheSAtPSBkaW07CgkJCX0gd2hpbGUgKHRydWUpOwoJCX0KCgkJZGF0ZSA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KSk7CgkJaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSAhPT0geWVhciB8fCBkYXRlLmdldE1vbnRoKCkgKyAxICE9PSBtb250aCB8fCBkYXRlLmdldERhdGUoKSAhPT0gZGF5KSB7CgkJCXRocm93ICJJbnZhbGlkIGRhdGUiOyAvLyBFLmcuIDMxLzAyLzAwCgkJfQoJCXJldHVybiBkYXRlOwoJfSwKCgkvKiBTdGFuZGFyZCBkYXRlIGZvcm1hdHMuICovCglBVE9NOiAieXktbW0tZGQiLCAvLyBSRkMgMzMzOSAoSVNPIDg2MDEpCglDT09LSUU6ICJELCBkZCBNIHl5IiwKCUlTT184NjAxOiAieXktbW0tZGQiLAoJUkZDXzgyMjogIkQsIGQgTSB5IiwKCVJGQ184NTA6ICJERCwgZGQtTS15IiwKCVJGQ18xMDM2OiAiRCwgZCBNIHkiLAoJUkZDXzExMjM6ICJELCBkIE0geXkiLAoJUkZDXzI4MjI6ICJELCBkIE0geXkiLAoJUlNTOiAiRCwgZCBNIHkiLCAvLyBSRkMgODIyCglUSUNLUzogIiEiLAoJVElNRVNUQU1QOiAiQCIsCglXM0M6ICJ5eS1tbS1kZCIsIC8vIElTTyA4NjAxCgoJX3RpY2tzVG8xOTcwOiAoKCgxOTcwIC0gMSkgKiAzNjUgKyBNYXRoLmZsb29yKDE5NzAgLyA0KSAtIE1hdGguZmxvb3IoMTk3MCAvIDEwMCkgKwoJCU1hdGguZmxvb3IoMTk3MCAvIDQwMCkpICogMjQgKiA2MCAqIDYwICogMTAwMDAwMDApLAoKCS8qIEZvcm1hdCBhIGRhdGUgb2JqZWN0IGludG8gYSBzdHJpbmcgdmFsdWUuCgkgKiBUaGUgZm9ybWF0IGNhbiBiZSBjb21iaW5hdGlvbnMgb2YgdGhlIGZvbGxvd2luZzoKCSAqIGQgIC0gZGF5IG9mIG1vbnRoIChubyBsZWFkaW5nIHplcm8pCgkgKiBkZCAtIGRheSBvZiBtb250aCAodHdvIGRpZ2l0KQoJICogbyAgLSBkYXkgb2YgeWVhciAobm8gbGVhZGluZyB6ZXJvcykKCSAqIG9vIC0gZGF5IG9mIHllYXIgKHRocmVlIGRpZ2l0KQoJICogRCAgLSBkYXkgbmFtZSBzaG9ydAoJICogREQgLSBkYXkgbmFtZSBsb25nCgkgKiBtICAtIG1vbnRoIG9mIHllYXIgKG5vIGxlYWRpbmcgemVybykKCSAqIG1tIC0gbW9udGggb2YgeWVhciAodHdvIGRpZ2l0KQoJICogTSAgLSBtb250aCBuYW1lIHNob3J0CgkgKiBNTSAtIG1vbnRoIG5hbWUgbG9uZwoJICogeSAgLSB5ZWFyICh0d28gZGlnaXQpCgkgKiB5eSAtIHllYXIgKGZvdXIgZGlnaXQpCgkgKiBAIC0gVW5peCB0aW1lc3RhbXAgKG1zIHNpbmNlIDAxLzAxLzE5NzApCgkgKiAhIC0gV2luZG93cyB0aWNrcyAoMTAwbnMgc2luY2UgMDEvMDEvMDAwMSkKCSAqICIuLi4iIC0gbGl0ZXJhbCB0ZXh0CgkgKiAnJyAtIHNpbmdsZSBxdW90ZQoJICoKCSAqIEBwYXJhbSAgZm9ybWF0IHN0cmluZyAtIHRoZSBkZXNpcmVkIGZvcm1hdCBvZiB0aGUgZGF0ZQoJICogQHBhcmFtICBkYXRlIERhdGUgLSB0aGUgZGF0ZSB2YWx1ZSB0byBmb3JtYXQKCSAqIEBwYXJhbSAgc2V0dGluZ3MgT2JqZWN0IC0gYXR0cmlidXRlcyBpbmNsdWRlOgoJICoJCQkJCWRheU5hbWVzU2hvcnQJc3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQoJICoJCQkJCWRheU5hbWVzCQlzdHJpbmdbN10gLSBuYW1lcyBvZiB0aGUgZGF5cyBmcm9tIFN1bmRheSAob3B0aW9uYWwpCgkgKgkJCQkJbW9udGhOYW1lc1Nob3J0IHN0cmluZ1sxMl0gLSBhYmJyZXZpYXRlZCBuYW1lcyBvZiB0aGUgbW9udGhzIChvcHRpb25hbCkKCSAqCQkJCQltb250aE5hbWVzCQlzdHJpbmdbMTJdIC0gbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpCgkgKiBAcmV0dXJuICBzdHJpbmcgLSB0aGUgZGF0ZSBpbiB0aGUgYWJvdmUgZm9ybWF0CgkgKi8KCWZvcm1hdERhdGU6IGZ1bmN0aW9uIChmb3JtYXQsIGRhdGUsIHNldHRpbmdzKSB7CgkJaWYgKCFkYXRlKSB7CgkJCXJldHVybiAiIjsKCQl9CgoJCXZhciBpRm9ybWF0LAoJCQlkYXlOYW1lc1Nob3J0ID0gKHNldHRpbmdzID8gc2V0dGluZ3MuZGF5TmFtZXNTaG9ydCA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsCgkJCWRheU5hbWVzID0gKHNldHRpbmdzID8gc2V0dGluZ3MuZGF5TmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcywKCQkJbW9udGhOYW1lc1Nob3J0ID0gKHNldHRpbmdzID8gc2V0dGluZ3MubW9udGhOYW1lc1Nob3J0IDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LAoJCQltb250aE5hbWVzID0gKHNldHRpbmdzID8gc2V0dGluZ3MubW9udGhOYW1lcyA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMsCgkJCS8vIENoZWNrIHdoZXRoZXIgYSBmb3JtYXQgY2hhcmFjdGVyIGlzIGRvdWJsZWQKCQkJbG9va0FoZWFkID0gZnVuY3Rpb24obWF0Y2gpIHsKCQkJCXZhciBtYXRjaGVzID0gKGlGb3JtYXQgKyAxIDwgZm9ybWF0Lmxlbmd0aCAmJiBmb3JtYXQuY2hhckF0KGlGb3JtYXQgKyAxKSA9PT0gbWF0Y2gpOwoJCQkJaWYgKG1hdGNoZXMpIHsKCQkJCQlpRm9ybWF0Kys7CgkJCQl9CgkJCQlyZXR1cm4gbWF0Y2hlczsKCQkJfSwKCQkJLy8gRm9ybWF0IGEgbnVtYmVyLCB3aXRoIGxlYWRpbmcgemVybyBpZiBuZWNlc3NhcnkKCQkJZm9ybWF0TnVtYmVyID0gZnVuY3Rpb24obWF0Y2gsIHZhbHVlLCBsZW4pIHsKCQkJCXZhciBudW0gPSAiIiArIHZhbHVlOwoJCQkJaWYgKGxvb2tBaGVhZChtYXRjaCkpIHsKCQkJCQl3aGlsZSAobnVtLmxlbmd0aCA8IGxlbikgewoJCQkJCQludW0gPSAiMCIgKyBudW07CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIG51bTsKCQkJfSwKCQkJLy8gRm9ybWF0IGEgbmFtZSwgc2hvcnQgb3IgbG9uZyBhcyByZXF1ZXN0ZWQKCQkJZm9ybWF0TmFtZSA9IGZ1bmN0aW9uKG1hdGNoLCB2YWx1ZSwgc2hvcnROYW1lcywgbG9uZ05hbWVzKSB7CgkJCQlyZXR1cm4gKGxvb2tBaGVhZChtYXRjaCkgPyBsb25nTmFtZXNbdmFsdWVdIDogc2hvcnROYW1lc1t2YWx1ZV0pOwoJCQl9LAoJCQlvdXRwdXQgPSAiIiwKCQkJbGl0ZXJhbCA9IGZhbHNlOwoKCQlpZiAoZGF0ZSkgewoJCQlmb3IgKGlGb3JtYXQgPSAwOyBpRm9ybWF0IDwgZm9ybWF0Lmxlbmd0aDsgaUZvcm1hdCsrKSB7CgkJCQlpZiAobGl0ZXJhbCkgewoJCQkJCWlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09PSAiJyIgJiYgIWxvb2tBaGVhZCgiJyIpKSB7CgkJCQkJCWxpdGVyYWwgPSBmYWxzZTsKCQkJCQl9IGVsc2UgewoJCQkJCQlvdXRwdXQgKz0gZm9ybWF0LmNoYXJBdChpRm9ybWF0KTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkgewoJCQkJCQljYXNlICJkIjoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoImQiLCBkYXRlLmdldERhdGUoKSwgMik7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiRCI6CgkJCQkJCQlvdXRwdXQgKz0gZm9ybWF0TmFtZSgiRCIsIGRhdGUuZ2V0RGF5KCksIGRheU5hbWVzU2hvcnQsIGRheU5hbWVzKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJvIjoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoIm8iLAoJCQkJCQkJCU1hdGgucm91bmQoKG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAwKS5nZXRUaW1lKCkpIC8gODY0MDAwMDApLCAzKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJtIjoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoIm0iLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAyKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJNIjoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROYW1lKCJNIiwgZGF0ZS5nZXRNb250aCgpLCBtb250aE5hbWVzU2hvcnQsIG1vbnRoTmFtZXMpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgInkiOgoJCQkJCQkJb3V0cHV0ICs9IChsb29rQWhlYWQoInkiKSA/IGRhdGUuZ2V0RnVsbFllYXIoKSA6CgkJCQkJCQkJKGRhdGUuZ2V0WWVhcigpICUgMTAwIDwgMTAgPyAiMCIgOiAiIikgKyBkYXRlLmdldFllYXIoKSAlIDEwMCk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiQCI6CgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiISI6CgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCkgKiAxMDAwMCArIHRoaXMuX3RpY2tzVG8xOTcwOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgIiciOgoJCQkJCQkJaWYgKGxvb2tBaGVhZCgiJyIpKSB7CgkJCQkJCQkJb3V0cHV0ICs9ICInIjsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJbGl0ZXJhbCA9IHRydWU7CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gb3V0cHV0OwoJfSwKCgkvKiBFeHRyYWN0IGFsbCBwb3NzaWJsZSBjaGFyYWN0ZXJzIGZyb20gdGhlIGRhdGUgZm9ybWF0LiAqLwoJX3Bvc3NpYmxlQ2hhcnM6IGZ1bmN0aW9uIChmb3JtYXQpIHsKCQl2YXIgaUZvcm1hdCwKCQkJY2hhcnMgPSAiIiwKCQkJbGl0ZXJhbCA9IGZhbHNlLAoJCQkvLyBDaGVjayB3aGV0aGVyIGEgZm9ybWF0IGNoYXJhY3RlciBpcyBkb3VibGVkCgkJCWxvb2tBaGVhZCA9IGZ1bmN0aW9uKG1hdGNoKSB7CgkJCQl2YXIgbWF0Y2hlcyA9IChpRm9ybWF0ICsgMSA8IGZvcm1hdC5sZW5ndGggJiYgZm9ybWF0LmNoYXJBdChpRm9ybWF0ICsgMSkgPT09IG1hdGNoKTsKCQkJCWlmIChtYXRjaGVzKSB7CgkJCQkJaUZvcm1hdCsrOwoJCQkJfQoJCQkJcmV0dXJuIG1hdGNoZXM7CgkJCX07CgoJCWZvciAoaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHsKCQkJaWYgKGxpdGVyYWwpIHsKCQkJCWlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09PSAiJyIgJiYgIWxvb2tBaGVhZCgiJyIpKSB7CgkJCQkJbGl0ZXJhbCA9IGZhbHNlOwoJCQkJfSBlbHNlIHsKCQkJCQljaGFycyArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJc3dpdGNoIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpKSB7CgkJCQkJY2FzZSAiZCI6IGNhc2UgIm0iOiBjYXNlICJ5IjogY2FzZSAiQCI6CgkJCQkJCWNoYXJzICs9ICIwMTIzNDU2Nzg5IjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiRCI6IGNhc2UgIk0iOgoJCQkJCQlyZXR1cm4gbnVsbDsgLy8gQWNjZXB0IGFueXRoaW5nCgkJCQkJY2FzZSAiJyI6CgkJCQkJCWlmIChsb29rQWhlYWQoIiciKSkgewoJCQkJCQkJY2hhcnMgKz0gIiciOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJbGl0ZXJhbCA9IHRydWU7CgkJCQkJCX0KCQkJCQkJYnJlYWs7CgkJCQkJZGVmYXVsdDoKCQkJCQkJY2hhcnMgKz0gZm9ybWF0LmNoYXJBdChpRm9ybWF0KTsKCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gY2hhcnM7Cgl9LAoKCS8qIEdldCBhIHNldHRpbmcgdmFsdWUsIGRlZmF1bHRpbmcgaWYgbmVjZXNzYXJ5LiAqLwoJX2dldDogZnVuY3Rpb24oaW5zdCwgbmFtZSkgewoJCXJldHVybiBpbnN0LnNldHRpbmdzW25hbWVdICE9PSB1bmRlZmluZWQgPwoJCQlpbnN0LnNldHRpbmdzW25hbWVdIDogdGhpcy5fZGVmYXVsdHNbbmFtZV07Cgl9LAoKCS8qIFBhcnNlIGV4aXN0aW5nIGRhdGUgYW5kIGluaXRpYWxpc2UgZGF0ZSBwaWNrZXIuICovCglfc2V0RGF0ZUZyb21GaWVsZDogZnVuY3Rpb24oaW5zdCwgbm9EZWZhdWx0KSB7CgkJaWYgKGluc3QuaW5wdXQudmFsKCkgPT09IGluc3QubGFzdFZhbCkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgZGF0ZUZvcm1hdCA9IHRoaXMuX2dldChpbnN0LCAiZGF0ZUZvcm1hdCIpLAoJCQlkYXRlcyA9IGluc3QubGFzdFZhbCA9IGluc3QuaW5wdXQgPyBpbnN0LmlucHV0LnZhbCgpIDogbnVsbCwKCQkJZGVmYXVsdERhdGUgPSB0aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KSwKCQkJZGF0ZSA9IGRlZmF1bHREYXRlLAoJCQlzZXR0aW5ncyA9IHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KTsKCgkJdHJ5IHsKCQkJZGF0ZSA9IHRoaXMucGFyc2VEYXRlKGRhdGVGb3JtYXQsIGRhdGVzLCBzZXR0aW5ncykgfHwgZGVmYXVsdERhdGU7CgkJfSBjYXRjaCAoZXZlbnQpIHsKCQkJZGF0ZXMgPSAobm9EZWZhdWx0ID8gIiIgOiBkYXRlcyk7CgkJfQoJCWluc3Quc2VsZWN0ZWREYXkgPSBkYXRlLmdldERhdGUoKTsKCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGRhdGUuZ2V0TW9udGgoKTsKCQlpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgkJaW5zdC5jdXJyZW50RGF5ID0gKGRhdGVzID8gZGF0ZS5nZXREYXRlKCkgOiAwKTsKCQlpbnN0LmN1cnJlbnRNb250aCA9IChkYXRlcyA/IGRhdGUuZ2V0TW9udGgoKSA6IDApOwoJCWluc3QuY3VycmVudFllYXIgPSAoZGF0ZXMgPyBkYXRlLmdldEZ1bGxZZWFyKCkgOiAwKTsKCQl0aGlzLl9hZGp1c3RJbnN0RGF0ZShpbnN0KTsKCX0sCgoJLyogUmV0cmlldmUgdGhlIGRlZmF1bHQgZGF0ZSBzaG93biBvbiBvcGVuaW5nLiAqLwoJX2dldERlZmF1bHREYXRlOiBmdW5jdGlvbihpbnN0KSB7CgkJcmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KGluc3QsCgkJCXRoaXMuX2RldGVybWluZURhdGUoaW5zdCwgdGhpcy5fZ2V0KGluc3QsICJkZWZhdWx0RGF0ZSIpLCBuZXcgRGF0ZSgpKSk7Cgl9LAoKCS8qIEEgZGF0ZSBtYXkgYmUgc3BlY2lmaWVkIGFzIGFuIGV4YWN0IHZhbHVlIG9yIGEgcmVsYXRpdmUgb25lLiAqLwoJX2RldGVybWluZURhdGU6IGZ1bmN0aW9uKGluc3QsIGRhdGUsIGRlZmF1bHREYXRlKSB7CgkJdmFyIG9mZnNldE51bWVyaWMgPSBmdW5jdGlvbihvZmZzZXQpIHsKCQkJCXZhciBkYXRlID0gbmV3IERhdGUoKTsKCQkJCWRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIG9mZnNldCk7CgkJCQlyZXR1cm4gZGF0ZTsKCQkJfSwKCQkJb2Zmc2V0U3RyaW5nID0gZnVuY3Rpb24ob2Zmc2V0KSB7CgkJCQl0cnkgewoJCQkJCXJldHVybiAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICJkYXRlRm9ybWF0IiksCgkJCQkJCW9mZnNldCwgJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpOwoJCQkJfQoJCQkJY2F0Y2ggKGUpIHsKCQkJCQkvLyBJZ25vcmUKCQkJCX0KCgkJCQl2YXIgZGF0ZSA9IChvZmZzZXQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKSA/CgkJCQkJJC5kYXRlcGlja2VyLl9nZXREYXRlKGluc3QpIDogbnVsbCkgfHwgbmV3IERhdGUoKSwKCQkJCQl5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLAoJCQkJCW1vbnRoID0gZGF0ZS5nZXRNb250aCgpLAoJCQkJCWRheSA9IGRhdGUuZ2V0RGF0ZSgpLAoJCQkJCXBhdHRlcm4gPSAvKFsrXC1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZywKCQkJCQltYXRjaGVzID0gcGF0dGVybi5leGVjKG9mZnNldCk7CgoJCQkJd2hpbGUgKG1hdGNoZXMpIHsKCQkJCQlzd2l0Y2ggKG1hdGNoZXNbMl0gfHwgImQiKSB7CgkJCQkJCWNhc2UgImQiIDogY2FzZSAiRCIgOgoJCQkJCQkJZGF5ICs9IHBhcnNlSW50KG1hdGNoZXNbMV0sMTApOyBicmVhazsKCQkJCQkJY2FzZSAidyIgOiBjYXNlICJXIiA6CgkJCQkJCQlkYXkgKz0gcGFyc2VJbnQobWF0Y2hlc1sxXSwxMCkgKiA3OyBicmVhazsKCQkJCQkJY2FzZSAibSIgOiBjYXNlICJNIiA6CgkJCQkJCQltb250aCArPSBwYXJzZUludChtYXRjaGVzWzFdLDEwKTsKCQkJCQkJCWRheSA9IE1hdGgubWluKGRheSwgJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgInkiOiBjYXNlICJZIiA6CgkJCQkJCQl5ZWFyICs9IHBhcnNlSW50KG1hdGNoZXNbMV0sMTApOwoJCQkJCQkJZGF5ID0gTWF0aC5taW4oZGF5LCAkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSk7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJbWF0Y2hlcyA9IHBhdHRlcm4uZXhlYyhvZmZzZXQpOwoJCQkJfQoJCQkJcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpOwoJCQl9LAoJCQluZXdEYXRlID0gKGRhdGUgPT0gbnVsbCB8fCBkYXRlID09PSAiIiA/IGRlZmF1bHREYXRlIDogKHR5cGVvZiBkYXRlID09PSAic3RyaW5nIiA/IG9mZnNldFN0cmluZyhkYXRlKSA6CgkJCQkodHlwZW9mIGRhdGUgPT09ICJudW1iZXIiID8gKGlzTmFOKGRhdGUpID8gZGVmYXVsdERhdGUgOiBvZmZzZXROdW1lcmljKGRhdGUpKSA6IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKSkpKTsKCgkJbmV3RGF0ZSA9IChuZXdEYXRlICYmIG5ld0RhdGUudG9TdHJpbmcoKSA9PT0gIkludmFsaWQgRGF0ZSIgPyBkZWZhdWx0RGF0ZSA6IG5ld0RhdGUpOwoJCWlmIChuZXdEYXRlKSB7CgkJCW5ld0RhdGUuc2V0SG91cnMoMCk7CgkJCW5ld0RhdGUuc2V0TWludXRlcygwKTsKCQkJbmV3RGF0ZS5zZXRTZWNvbmRzKDApOwoJCQluZXdEYXRlLnNldE1pbGxpc2Vjb25kcygwKTsKCQl9CgkJcmV0dXJuIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ld0RhdGUpOwoJfSwKCgkvKiBIYW5kbGUgc3dpdGNoIHRvL2Zyb20gZGF5bGlnaHQgc2F2aW5nLgoJICogSG91cnMgbWF5IGJlIG5vbi16ZXJvIG9uIGRheWxpZ2h0IHNhdmluZyBjdXQtb3ZlcjoKCSAqID4gMTIgd2hlbiBtaWRuaWdodCBjaGFuZ2VvdmVyLCBidXQgdGhlbiBjYW5ub3QgZ2VuZXJhdGUKCSAqIG1pZG5pZ2h0IGRhdGV0aW1lLCBzbyBqdW1wIHRvIDFBTSwgb3RoZXJ3aXNlIHJlc2V0LgoJICogQHBhcmFtICBkYXRlICAoRGF0ZSkgdGhlIGRhdGUgdG8gY2hlY2sKCSAqIEByZXR1cm4gIChEYXRlKSB0aGUgY29ycmVjdGVkIGRhdGUKCSAqLwoJX2RheWxpZ2h0U2F2aW5nQWRqdXN0OiBmdW5jdGlvbihkYXRlKSB7CgkJaWYgKCFkYXRlKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQlkYXRlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSA+IDEyID8gZGF0ZS5nZXRIb3VycygpICsgMiA6IDApOwoJCXJldHVybiBkYXRlOwoJfSwKCgkvKiBTZXQgdGhlIGRhdGUocykgZGlyZWN0bHkuICovCglfc2V0RGF0ZTogZnVuY3Rpb24oaW5zdCwgZGF0ZSwgbm9DaGFuZ2UpIHsKCQl2YXIgY2xlYXIgPSAhZGF0ZSwKCQkJb3JpZ01vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoLAoJCQlvcmlnWWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyLAoJCQluZXdEYXRlID0gdGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCwgdGhpcy5fZGV0ZXJtaW5lRGF0ZShpbnN0LCBkYXRlLCBuZXcgRGF0ZSgpKSk7CgoJCWluc3Quc2VsZWN0ZWREYXkgPSBpbnN0LmN1cnJlbnREYXkgPSBuZXdEYXRlLmdldERhdGUoKTsKCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGluc3QuY3VycmVudE1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpOwoJCWluc3QuZHJhd1llYXIgPSBpbnN0LnNlbGVjdGVkWWVhciA9IGluc3QuY3VycmVudFllYXIgPSBuZXdEYXRlLmdldEZ1bGxZZWFyKCk7CgkJaWYgKChvcmlnTW9udGggIT09IGluc3Quc2VsZWN0ZWRNb250aCB8fCBvcmlnWWVhciAhPT0gaW5zdC5zZWxlY3RlZFllYXIpICYmICFub0NoYW5nZSkgewoJCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJfQoJCXRoaXMuX2FkanVzdEluc3REYXRlKGluc3QpOwoJCWlmIChpbnN0LmlucHV0KSB7CgkJCWluc3QuaW5wdXQudmFsKGNsZWFyID8gIiIgOiB0aGlzLl9mb3JtYXREYXRlKGluc3QpKTsKCQl9Cgl9LAoKCS8qIFJldHJpZXZlIHRoZSBkYXRlKHMpIGRpcmVjdGx5LiAqLwoJX2dldERhdGU6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgc3RhcnREYXRlID0gKCFpbnN0LmN1cnJlbnRZZWFyIHx8IChpbnN0LmlucHV0ICYmIGluc3QuaW5wdXQudmFsKCkgPT09ICIiKSA/IG51bGwgOgoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSgKCQkJaW5zdC5jdXJyZW50WWVhciwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudERheSkpKTsKCQkJcmV0dXJuIHN0YXJ0RGF0ZTsKCX0sCgoJLyogQXR0YWNoIHRoZSBvbnh4eCBoYW5kbGVycy4gIFRoZXNlIGFyZSBkZWNsYXJlZCBzdGF0aWNhbGx5IHNvCgkgKiB0aGV5IHdvcmsgd2l0aCBzdGF0aWMgY29kZSB0cmFuc2Zvcm1lcnMgbGlrZSBDYWphLgoJICovCglfYXR0YWNoSGFuZGxlcnM6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgc3RlcE1vbnRocyA9IHRoaXMuX2dldChpbnN0LCAic3RlcE1vbnRocyIpLAoJCQlpZCA9ICIjIiArIGluc3QuaWQucmVwbGFjZSggL1xcXFwvZywgIlxcIiApOwoJCWluc3QuZHBEaXYuZmluZCgiW2RhdGEtaGFuZGxlcl0iKS5tYXAoZnVuY3Rpb24gKCkgewoJCQl2YXIgaGFuZGxlciA9IHsKCQkJCXByZXY6IGZ1bmN0aW9uICgpIHsKCQkJCQkkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoaWQsIC1zdGVwTW9udGhzLCAiTSIpOwoJCQkJfSwKCQkJCW5leHQ6IGZ1bmN0aW9uICgpIHsKCQkJCQkkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoaWQsICtzdGVwTW9udGhzLCAiTSIpOwoJCQkJfSwKCQkJCWhpZGU6IGZ1bmN0aW9uICgpIHsKCQkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7CgkJCQl9LAoJCQkJdG9kYXk6IGZ1bmN0aW9uICgpIHsKCQkJCQkkLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShpZCk7CgkJCQl9LAoJCQkJc2VsZWN0RGF5OiBmdW5jdGlvbiAoKSB7CgkJCQkJJC5kYXRlcGlja2VyLl9zZWxlY3REYXkoaWQsICt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1tb250aCIpLCArdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEteWVhciIpLCB0aGlzKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9LAoJCQkJc2VsZWN0TW9udGg6IGZ1bmN0aW9uICgpIHsKCQkJCQkkLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihpZCwgdGhpcywgIk0iKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9LAoJCQkJc2VsZWN0WWVhcjogZnVuY3Rpb24gKCkgewoJCQkJCSQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGlkLCB0aGlzLCAiWSIpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfTsKCQkJJCh0aGlzKS5iaW5kKHRoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLWV2ZW50IiksIGhhbmRsZXJbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSk7CgkJfSk7Cgl9LAoKCS8qIEdlbmVyYXRlIHRoZSBIVE1MIGZvciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZGF0ZSBwaWNrZXIuICovCglfZ2VuZXJhdGVIVE1MOiBmdW5jdGlvbihpbnN0KSB7CgkJdmFyIG1heERyYXcsIHByZXZUZXh0LCBwcmV2LCBuZXh0VGV4dCwgbmV4dCwgY3VycmVudFRleHQsIGdvdG9EYXRlLAoJCQljb250cm9scywgYnV0dG9uUGFuZWwsIGZpcnN0RGF5LCBzaG93V2VlaywgZGF5TmFtZXMsIGRheU5hbWVzTWluLAoJCQltb250aE5hbWVzLCBtb250aE5hbWVzU2hvcnQsIGJlZm9yZVNob3dEYXksIHNob3dPdGhlck1vbnRocywKCQkJc2VsZWN0T3RoZXJNb250aHMsIGRlZmF1bHREYXRlLCBodG1sLCBkb3csIHJvdywgZ3JvdXAsIGNvbCwgc2VsZWN0ZWREYXRlLAoJCQljb3JuZXJDbGFzcywgY2FsZW5kZXIsIHRoZWFkLCBkYXksIGRheXNJbk1vbnRoLCBsZWFkRGF5cywgY3VyUm93cywgbnVtUm93cywKCQkJcHJpbnREYXRlLCBkUm93LCB0Ym9keSwgZGF5U2V0dGluZ3MsIG90aGVyTW9udGgsIHVuc2VsZWN0YWJsZSwKCQkJdGVtcERhdGUgPSBuZXcgRGF0ZSgpLAoJCQl0b2RheSA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KAoJCQkJbmV3IERhdGUodGVtcERhdGUuZ2V0RnVsbFllYXIoKSwgdGVtcERhdGUuZ2V0TW9udGgoKSwgdGVtcERhdGUuZ2V0RGF0ZSgpKSksIC8vIGNsZWFyIHRpbWUKCQkJaXNSVEwgPSB0aGlzLl9nZXQoaW5zdCwgImlzUlRMIiksCgkJCXNob3dCdXR0b25QYW5lbCA9IHRoaXMuX2dldChpbnN0LCAic2hvd0J1dHRvblBhbmVsIiksCgkJCWhpZGVJZk5vUHJldk5leHQgPSB0aGlzLl9nZXQoaW5zdCwgImhpZGVJZk5vUHJldk5leHQiKSwKCQkJbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCA9IHRoaXMuX2dldChpbnN0LCAibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCIpLAoJCQludW1Nb250aHMgPSB0aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpbnN0KSwKCQkJc2hvd0N1cnJlbnRBdFBvcyA9IHRoaXMuX2dldChpbnN0LCAic2hvd0N1cnJlbnRBdFBvcyIpLAoJCQlzdGVwTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsICJzdGVwTW9udGhzIiksCgkJCWlzTXVsdGlNb250aCA9IChudW1Nb250aHNbMF0gIT09IDEgfHwgbnVtTW9udGhzWzFdICE9PSAxKSwKCQkJY3VycmVudERhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCgoIWluc3QuY3VycmVudERheSA/IG5ldyBEYXRlKDk5OTksIDksIDkpIDoKCQkJCW5ldyBEYXRlKGluc3QuY3VycmVudFllYXIsIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnREYXkpKSksCgkJCW1pbkRhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsICJtaW4iKSwKCQkJbWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgIm1heCIpLAoJCQlkcmF3TW9udGggPSBpbnN0LmRyYXdNb250aCAtIHNob3dDdXJyZW50QXRQb3MsCgkJCWRyYXdZZWFyID0gaW5zdC5kcmF3WWVhcjsKCgkJaWYgKGRyYXdNb250aCA8IDApIHsKCQkJZHJhd01vbnRoICs9IDEyOwoJCQlkcmF3WWVhci0tOwoJCX0KCQlpZiAobWF4RGF0ZSkgewoJCQltYXhEcmF3ID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobWF4RGF0ZS5nZXRGdWxsWWVhcigpLAoJCQkJbWF4RGF0ZS5nZXRNb250aCgpIC0gKG51bU1vbnRoc1swXSAqIG51bU1vbnRoc1sxXSkgKyAxLCBtYXhEYXRlLmdldERhdGUoKSkpOwoJCQltYXhEcmF3ID0gKG1pbkRhdGUgJiYgbWF4RHJhdyA8IG1pbkRhdGUgPyBtaW5EYXRlIDogbWF4RHJhdyk7CgkJCXdoaWxlICh0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhciwgZHJhd01vbnRoLCAxKSkgPiBtYXhEcmF3KSB7CgkJCQlkcmF3TW9udGgtLTsKCQkJCWlmIChkcmF3TW9udGggPCAwKSB7CgkJCQkJZHJhd01vbnRoID0gMTE7CgkJCQkJZHJhd1llYXItLTsKCQkJCX0KCQkJfQoJCX0KCQlpbnN0LmRyYXdNb250aCA9IGRyYXdNb250aDsKCQlpbnN0LmRyYXdZZWFyID0gZHJhd1llYXI7CgoJCXByZXZUZXh0ID0gdGhpcy5fZ2V0KGluc3QsICJwcmV2VGV4dCIpOwoJCXByZXZUZXh0ID0gKCFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID8gcHJldlRleHQgOiB0aGlzLmZvcm1hdERhdGUocHJldlRleHQsCgkJCXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLCBkcmF3TW9udGggLSBzdGVwTW9udGhzLCAxKSksCgkJCXRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpOwoKCQlwcmV2ID0gKHRoaXMuX2NhbkFkanVzdE1vbnRoKGluc3QsIC0xLCBkcmF3WWVhciwgZHJhd01vbnRoKSA/CgkJCSI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIiArCgkJCSIgdGl0bGU9JyIgKyBwcmV2VGV4dCArICInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIgKyAoIGlzUlRMID8gImUiIDogInciKSArICInPiIgKyBwcmV2VGV4dCArICI8L3NwYW4+PC9hPiIgOgoJCQkoaGlkZUlmTm9QcmV2TmV4dCA/ICIiIDogIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrIHByZXZUZXh0ICsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iICsgKCBpc1JUTCA/ICJlIiA6ICJ3IikgKyAiJz4iICsgcHJldlRleHQgKyAiPC9zcGFuPjwvYT4iKSk7CgoJCW5leHRUZXh0ID0gdGhpcy5fZ2V0KGluc3QsICJuZXh0VGV4dCIpOwoJCW5leHRUZXh0ID0gKCFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0ID8gbmV4dFRleHQgOiB0aGlzLmZvcm1hdERhdGUobmV4dFRleHQsCgkJCXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLCBkcmF3TW9udGggKyBzdGVwTW9udGhzLCAxKSksCgkJCXRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpOwoKCQluZXh0ID0gKHRoaXMuX2NhbkFkanVzdE1vbnRoKGluc3QsICsxLCBkcmF3WWVhciwgZHJhd01vbnRoKSA/CgkJCSI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0nbmV4dCcgZGF0YS1ldmVudD0nY2xpY2snIiArCgkJCSIgdGl0bGU9JyIgKyBuZXh0VGV4dCArICInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIgKyAoIGlzUlRMID8gInciIDogImUiKSArICInPiIgKyBuZXh0VGV4dCArICI8L3NwYW4+PC9hPiIgOgoJCQkoaGlkZUlmTm9QcmV2TmV4dCA/ICIiIDogIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrIG5leHRUZXh0ICsgIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIiArICggaXNSVEwgPyAidyIgOiAiZSIpICsgIic+IiArIG5leHRUZXh0ICsgIjwvc3Bhbj48L2E+IikpOwoKCQljdXJyZW50VGV4dCA9IHRoaXMuX2dldChpbnN0LCAiY3VycmVudFRleHQiKTsKCQlnb3RvRGF0ZSA9ICh0aGlzLl9nZXQoaW5zdCwgImdvdG9DdXJyZW50IikgJiYgaW5zdC5jdXJyZW50RGF5ID8gY3VycmVudERhdGUgOiB0b2RheSk7CgkJY3VycmVudFRleHQgPSAoIW5hdmlnYXRpb25Bc0RhdGVGb3JtYXQgPyBjdXJyZW50VGV4dCA6CgkJCXRoaXMuZm9ybWF0RGF0ZShjdXJyZW50VGV4dCwgZ290b0RhdGUsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpOwoKCQljb250cm9scyA9ICghaW5zdC5pbmxpbmUgPyAiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNsb3NlIHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktcHJpbWFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J2hpZGUnIGRhdGEtZXZlbnQ9J2NsaWNrJz4iICsKCQkJdGhpcy5fZ2V0KGluc3QsICJjbG9zZVRleHQiKSArICI8L2J1dHRvbj4iIDogIiIpOwoKCQlidXR0b25QYW5lbCA9IChzaG93QnV0dG9uUGFuZWwpID8gIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCc+IiArIChpc1JUTCA/IGNvbnRyb2xzIDogIiIpICsKCQkJKHRoaXMuX2lzSW5SYW5nZShpbnN0LCBnb3RvRGF0ZSkgPyAiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWN1cnJlbnQgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1zZWNvbmRhcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSd0b2RheScgZGF0YS1ldmVudD0nY2xpY2snIiArCgkJCSI+IiArIGN1cnJlbnRUZXh0ICsgIjwvYnV0dG9uPiIgOiAiIikgKyAoaXNSVEwgPyAiIiA6IGNvbnRyb2xzKSArICI8L2Rpdj4iIDogIiI7CgoJCWZpcnN0RGF5ID0gcGFyc2VJbnQodGhpcy5fZ2V0KGluc3QsICJmaXJzdERheSIpLDEwKTsKCQlmaXJzdERheSA9IChpc05hTihmaXJzdERheSkgPyAwIDogZmlyc3REYXkpOwoKCQlzaG93V2VlayA9IHRoaXMuX2dldChpbnN0LCAic2hvd1dlZWsiKTsKCQlkYXlOYW1lcyA9IHRoaXMuX2dldChpbnN0LCAiZGF5TmFtZXMiKTsKCQlkYXlOYW1lc01pbiA9IHRoaXMuX2dldChpbnN0LCAiZGF5TmFtZXNNaW4iKTsKCQltb250aE5hbWVzID0gdGhpcy5fZ2V0KGluc3QsICJtb250aE5hbWVzIik7CgkJbW9udGhOYW1lc1Nob3J0ID0gdGhpcy5fZ2V0KGluc3QsICJtb250aE5hbWVzU2hvcnQiKTsKCQliZWZvcmVTaG93RGF5ID0gdGhpcy5fZ2V0KGluc3QsICJiZWZvcmVTaG93RGF5Iik7CgkJc2hvd090aGVyTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsICJzaG93T3RoZXJNb250aHMiKTsKCQlzZWxlY3RPdGhlck1vbnRocyA9IHRoaXMuX2dldChpbnN0LCAic2VsZWN0T3RoZXJNb250aHMiKTsKCQlkZWZhdWx0RGF0ZSA9IHRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpOwoJCWh0bWwgPSAiIjsKCQlkb3c7CgkJZm9yIChyb3cgPSAwOyByb3cgPCBudW1Nb250aHNbMF07IHJvdysrKSB7CgkJCWdyb3VwID0gIiI7CgkJCXRoaXMubWF4Um93cyA9IDQ7CgkJCWZvciAoY29sID0gMDsgY29sIDwgbnVtTW9udGhzWzFdOyBjb2wrKykgewoJCQkJc2VsZWN0ZWREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgaW5zdC5zZWxlY3RlZERheSkpOwoJCQkJY29ybmVyQ2xhc3MgPSAiIHVpLWNvcm5lci1hbGwiOwoJCQkJY2FsZW5kZXIgPSAiIjsKCQkJCWlmIChpc011bHRpTW9udGgpIHsKCQkJCQljYWxlbmRlciArPSAiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1ncm91cCI7CgkJCQkJaWYgKG51bU1vbnRoc1sxXSA+IDEpIHsKCQkJCQkJc3dpdGNoIChjb2wpIHsKCQkJCQkJCWNhc2UgMDogY2FsZW5kZXIgKz0gIiB1aS1kYXRlcGlja2VyLWdyb3VwLWZpcnN0IjsKCQkJCQkJCQljb3JuZXJDbGFzcyA9ICIgdWktY29ybmVyLSIgKyAoaXNSVEwgPyAicmlnaHQiIDogImxlZnQiKTsgYnJlYWs7CgkJCQkJCQljYXNlIG51bU1vbnRoc1sxXS0xOiBjYWxlbmRlciArPSAiIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCI7CgkJCQkJCQkJY29ybmVyQ2xhc3MgPSAiIHVpLWNvcm5lci0iICsgKGlzUlRMID8gImxlZnQiIDogInJpZ2h0Iik7IGJyZWFrOwoJCQkJCQkJZGVmYXVsdDogY2FsZW5kZXIgKz0gIiB1aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZSI7IGNvcm5lckNsYXNzID0gIiI7IGJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWNhbGVuZGVyICs9ICInPiI7CgkJCQl9CgkJCQljYWxlbmRlciArPSAiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgiICsgY29ybmVyQ2xhc3MgKyAiJz4iICsKCQkJCQkoL2FsbHxsZWZ0Ly50ZXN0KGNvcm5lckNsYXNzKSAmJiByb3cgPT09IDAgPyAoaXNSVEwgPyBuZXh0IDogcHJldikgOiAiIikgKwoJCQkJCSgvYWxsfHJpZ2h0Ly50ZXN0KGNvcm5lckNsYXNzKSAmJiByb3cgPT09IDAgPyAoaXNSVEwgPyBwcmV2IDogbmV4dCkgOiAiIikgKwoJCQkJCXRoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGluc3QsIGRyYXdNb250aCwgZHJhd1llYXIsIG1pbkRhdGUsIG1heERhdGUsCgkJCQkJcm93ID4gMCB8fCBjb2wgPiAwLCBtb250aE5hbWVzLCBtb250aE5hbWVzU2hvcnQpICsgLy8gZHJhdyBtb250aCBoZWFkZXJzCgkJCQkJIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPiIgKwoJCQkJCSI8dHI+IjsKCQkJCXRoZWFkID0gKHNob3dXZWVrID8gIjx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+IiArIHRoaXMuX2dldChpbnN0LCAid2Vla0hlYWRlciIpICsgIjwvdGg+IiA6ICIiKTsKCQkJCWZvciAoZG93ID0gMDsgZG93IDwgNzsgZG93KyspIHsgLy8gZGF5cyBvZiB0aGUgd2VlawoJCQkJCWRheSA9IChkb3cgKyBmaXJzdERheSkgJSA3OwoJCQkJCXRoZWFkICs9ICI8dGggc2NvcGU9J2NvbCciICsgKChkb3cgKyBmaXJzdERheSArIDYpICUgNyA+PSA1ID8gIiBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWVuZCciIDogIiIpICsgIj4iICsKCQkJCQkJIjxzcGFuIHRpdGxlPSciICsgZGF5TmFtZXNbZGF5XSArICInPiIgKyBkYXlOYW1lc01pbltkYXldICsgIjwvc3Bhbj48L3RoPiI7CgkJCQl9CgkJCQljYWxlbmRlciArPSB0aGVhZCArICI8L3RyPjwvdGhlYWQ+PHRib2R5PiI7CgkJCQlkYXlzSW5Nb250aCA9IHRoaXMuX2dldERheXNJbk1vbnRoKGRyYXdZZWFyLCBkcmF3TW9udGgpOwoJCQkJaWYgKGRyYXdZZWFyID09PSBpbnN0LnNlbGVjdGVkWWVhciAmJiBkcmF3TW9udGggPT09IGluc3Quc2VsZWN0ZWRNb250aCkgewoJCQkJCWluc3Quc2VsZWN0ZWREYXkgPSBNYXRoLm1pbihpbnN0LnNlbGVjdGVkRGF5LCBkYXlzSW5Nb250aCk7CgkJCQl9CgkJCQlsZWFkRGF5cyA9ICh0aGlzLl9nZXRGaXJzdERheU9mTW9udGgoZHJhd1llYXIsIGRyYXdNb250aCkgLSBmaXJzdERheSArIDcpICUgNzsKCQkJCWN1clJvd3MgPSBNYXRoLmNlaWwoKGxlYWREYXlzICsgZGF5c0luTW9udGgpIC8gNyk7IC8vIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHJvd3MgdG8gZ2VuZXJhdGUKCQkJCW51bVJvd3MgPSAoaXNNdWx0aU1vbnRoID8gdGhpcy5tYXhSb3dzID4gY3VyUm93cyA/IHRoaXMubWF4Um93cyA6IGN1clJvd3MgOiBjdXJSb3dzKTsgLy9JZiBtdWx0aXBsZSBtb250aHMsIHVzZSB0aGUgaGlnaGVyIG51bWJlciBvZiByb3dzIChzZWUgIzcwNDMpCgkJCQl0aGlzLm1heFJvd3MgPSBudW1Sb3dzOwoJCQkJcHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgMSAtIGxlYWREYXlzKSk7CgkJCQlmb3IgKGRSb3cgPSAwOyBkUm93IDwgbnVtUm93czsgZFJvdysrKSB7IC8vIGNyZWF0ZSBkYXRlIHBpY2tlciByb3dzCgkJCQkJY2FsZW5kZXIgKz0gIjx0cj4iOwoJCQkJCXRib2R5ID0gKCFzaG93V2VlayA/ICIiIDogIjx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+IiArCgkJCQkJCXRoaXMuX2dldChpbnN0LCAiY2FsY3VsYXRlV2VlayIpKHByaW50RGF0ZSkgKyAiPC90ZD4iKTsKCQkJCQlmb3IgKGRvdyA9IDA7IGRvdyA8IDc7IGRvdysrKSB7IC8vIGNyZWF0ZSBkYXRlIHBpY2tlciBkYXlzCgkJCQkJCWRheVNldHRpbmdzID0gKGJlZm9yZVNob3dEYXkgPwoJCQkJCQkJYmVmb3JlU2hvd0RheS5hcHBseSgoaW5zdC5pbnB1dCA/IGluc3QuaW5wdXRbMF0gOiBudWxsKSwgW3ByaW50RGF0ZV0pIDogW3RydWUsICIiXSk7CgkJCQkJCW90aGVyTW9udGggPSAocHJpbnREYXRlLmdldE1vbnRoKCkgIT09IGRyYXdNb250aCk7CgkJCQkJCXVuc2VsZWN0YWJsZSA9IChvdGhlck1vbnRoICYmICFzZWxlY3RPdGhlck1vbnRocykgfHwgIWRheVNldHRpbmdzWzBdIHx8CgkJCQkJCQkobWluRGF0ZSAmJiBwcmludERhdGUgPCBtaW5EYXRlKSB8fCAobWF4RGF0ZSAmJiBwcmludERhdGUgPiBtYXhEYXRlKTsKCQkJCQkJdGJvZHkgKz0gIjx0ZCBjbGFzcz0nIiArCgkJCQkJCQkoKGRvdyArIGZpcnN0RGF5ICsgNikgJSA3ID49IDUgPyAiIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiIDogIiIpICsgLy8gaGlnaGxpZ2h0IHdlZWtlbmRzCgkJCQkJCQkob3RoZXJNb250aCA/ICIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aCIgOiAiIikgKyAvLyBoaWdobGlnaHQgZGF5cyBmcm9tIG90aGVyIG1vbnRocwoJCQkJCQkJKChwcmludERhdGUuZ2V0VGltZSgpID09PSBzZWxlY3RlZERhdGUuZ2V0VGltZSgpICYmIGRyYXdNb250aCA9PT0gaW5zdC5zZWxlY3RlZE1vbnRoICYmIGluc3QuX2tleUV2ZW50KSB8fCAvLyB1c2VyIHByZXNzZWQga2V5CgkJCQkJCQkoZGVmYXVsdERhdGUuZ2V0VGltZSgpID09PSBwcmludERhdGUuZ2V0VGltZSgpICYmIGRlZmF1bHREYXRlLmdldFRpbWUoKSA9PT0gc2VsZWN0ZWREYXRlLmdldFRpbWUoKSkgPwoJCQkJCQkJLy8gb3IgZGVmYXVsdERhdGUgaXMgY3VycmVudCBwcmludGVkRGF0ZSBhbmQgZGVmYXVsdERhdGUgaXMgc2VsZWN0ZWREYXRlCgkJCQkJCQkiICIgKyB0aGlzLl9kYXlPdmVyQ2xhc3MgOiAiIikgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5CgkJCQkJCQkodW5zZWxlY3RhYmxlID8gIiAiICsgdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MgKyAiIHVpLXN0YXRlLWRpc2FibGVkIjogIiIpICsgIC8vIGhpZ2hsaWdodCB1bnNlbGVjdGFibGUgZGF5cwoJCQkJCQkJKG90aGVyTW9udGggJiYgIXNob3dPdGhlck1vbnRocyA/ICIiIDogIiAiICsgZGF5U2V0dGluZ3NbMV0gKyAvLyBoaWdobGlnaHQgY3VzdG9tIGRhdGVzCgkJCQkJCQkocHJpbnREYXRlLmdldFRpbWUoKSA9PT0gY3VycmVudERhdGUuZ2V0VGltZSgpID8gIiAiICsgdGhpcy5fY3VycmVudENsYXNzIDogIiIpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheQoJCQkJCQkJKHByaW50RGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKSA/ICIgdWktZGF0ZXBpY2tlci10b2RheSIgOiAiIikpICsgIiciICsgLy8gaGlnaGxpZ2h0IHRvZGF5IChpZiBkaWZmZXJlbnQpCgkJCQkJCQkoKCFvdGhlck1vbnRoIHx8IHNob3dPdGhlck1vbnRocykgJiYgZGF5U2V0dGluZ3NbMl0gPyAiIHRpdGxlPSciICsgZGF5U2V0dGluZ3NbMl0ucmVwbGFjZSgvJy9nLCAiJiMzOTsiKSArICInIiA6ICIiKSArIC8vIGNlbGwgdGl0bGUKCQkJCQkJCSh1bnNlbGVjdGFibGUgPyAiIiA6ICIgZGF0YS1oYW5kbGVyPSdzZWxlY3REYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyBkYXRhLW1vbnRoPSciICsgcHJpbnREYXRlLmdldE1vbnRoKCkgKyAiJyBkYXRhLXllYXI9JyIgKyBwcmludERhdGUuZ2V0RnVsbFllYXIoKSArICInIikgKyAiPiIgKyAvLyBhY3Rpb25zCgkJCQkJCQkob3RoZXJNb250aCAmJiAhc2hvd090aGVyTW9udGhzID8gIiYjeGEwOyIgOiAvLyBkaXNwbGF5IGZvciBvdGhlciBtb250aHMKCQkJCQkJCSh1bnNlbGVjdGFibGUgPyAiPHNwYW4gY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQnPiIgKyBwcmludERhdGUuZ2V0RGF0ZSgpICsgIjwvc3Bhbj4iIDogIjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IiArCgkJCQkJCQkocHJpbnREYXRlLmdldFRpbWUoKSA9PT0gdG9kYXkuZ2V0VGltZSgpID8gIiB1aS1zdGF0ZS1oaWdobGlnaHQiIDogIiIpICsKCQkJCQkJCShwcmludERhdGUuZ2V0VGltZSgpID09PSBjdXJyZW50RGF0ZS5nZXRUaW1lKCkgPyAiIHVpLXN0YXRlLWFjdGl2ZSIgOiAiIikgKyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgZGF5CgkJCQkJCQkob3RoZXJNb250aCA/ICIgdWktcHJpb3JpdHktc2Vjb25kYXJ5IiA6ICIiKSArIC8vIGRpc3Rpbmd1aXNoIGRhdGVzIGZyb20gb3RoZXIgbW9udGhzCgkJCQkJCQkiJyBocmVmPScjJz4iICsgcHJpbnREYXRlLmdldERhdGUoKSArICI8L2E+IikpICsgIjwvdGQ+IjsgLy8gZGlzcGxheSBzZWxlY3RhYmxlIGRhdGUKCQkJCQkJcHJpbnREYXRlLnNldERhdGUocHJpbnREYXRlLmdldERhdGUoKSArIDEpOwoJCQkJCQlwcmludERhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChwcmludERhdGUpOwoJCQkJCX0KCQkJCQljYWxlbmRlciArPSB0Ym9keSArICI8L3RyPiI7CgkJCQl9CgkJCQlkcmF3TW9udGgrKzsKCQkJCWlmIChkcmF3TW9udGggPiAxMSkgewoJCQkJCWRyYXdNb250aCA9IDA7CgkJCQkJZHJhd1llYXIrKzsKCQkJCX0KCQkJCWNhbGVuZGVyICs9ICI8L3Rib2R5PjwvdGFibGU+IiArIChpc011bHRpTW9udGggPyAiPC9kaXY+IiArCgkJCQkJCQkoKG51bU1vbnRoc1swXSA+IDAgJiYgY29sID09PSBudW1Nb250aHNbMV0tMSkgPyAiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1yb3ctYnJlYWsnPjwvZGl2PiIgOiAiIikgOiAiIik7CgkJCQlncm91cCArPSBjYWxlbmRlcjsKCQkJfQoJCQlodG1sICs9IGdyb3VwOwoJCX0KCQlodG1sICs9IGJ1dHRvblBhbmVsOwoJCWluc3QuX2tleUV2ZW50ID0gZmFsc2U7CgkJcmV0dXJuIGh0bWw7Cgl9LAoKCS8qIEdlbmVyYXRlIHRoZSBtb250aCBhbmQgeWVhciBoZWFkZXIuICovCglfZ2VuZXJhdGVNb250aFllYXJIZWFkZXI6IGZ1bmN0aW9uKGluc3QsIGRyYXdNb250aCwgZHJhd1llYXIsIG1pbkRhdGUsIG1heERhdGUsCgkJCXNlY29uZGFyeSwgbW9udGhOYW1lcywgbW9udGhOYW1lc1Nob3J0KSB7CgoJCXZhciBpbk1pblllYXIsIGluTWF4WWVhciwgbW9udGgsIHllYXJzLCB0aGlzWWVhciwgZGV0ZXJtaW5lWWVhciwgeWVhciwgZW5kWWVhciwKCQkJY2hhbmdlTW9udGggPSB0aGlzLl9nZXQoaW5zdCwgImNoYW5nZU1vbnRoIiksCgkJCWNoYW5nZVllYXIgPSB0aGlzLl9nZXQoaW5zdCwgImNoYW5nZVllYXIiKSwKCQkJc2hvd01vbnRoQWZ0ZXJZZWFyID0gdGhpcy5fZ2V0KGluc3QsICJzaG93TW9udGhBZnRlclllYXIiKSwKCQkJaHRtbCA9ICI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXRpdGxlJz4iLAoJCQltb250aEh0bWwgPSAiIjsKCgkJLy8gbW9udGggc2VsZWN0aW9uCgkJaWYgKHNlY29uZGFyeSB8fCAhY2hhbmdlTW9udGgpIHsKCQkJbW9udGhIdG1sICs9ICI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+IiArIG1vbnRoTmFtZXNbZHJhd01vbnRoXSArICI8L3NwYW4+IjsKCQl9IGVsc2UgewoJCQlpbk1pblllYXIgPSAobWluRGF0ZSAmJiBtaW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IGRyYXdZZWFyKTsKCQkJaW5NYXhZZWFyID0gKG1heERhdGUgJiYgbWF4RGF0ZS5nZXRGdWxsWWVhcigpID09PSBkcmF3WWVhcik7CgkJCW1vbnRoSHRtbCArPSAiPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCcgZGF0YS1oYW5kbGVyPSdzZWxlY3RNb250aCcgZGF0YS1ldmVudD0nY2hhbmdlJz4iOwoJCQlmb3IgKCBtb250aCA9IDA7IG1vbnRoIDwgMTI7IG1vbnRoKyspIHsKCQkJCWlmICgoIWluTWluWWVhciB8fCBtb250aCA+PSBtaW5EYXRlLmdldE1vbnRoKCkpICYmICghaW5NYXhZZWFyIHx8IG1vbnRoIDw9IG1heERhdGUuZ2V0TW9udGgoKSkpIHsKCQkJCQltb250aEh0bWwgKz0gIjxvcHRpb24gdmFsdWU9JyIgKyBtb250aCArICInIiArCgkJCQkJCShtb250aCA9PT0gZHJhd01vbnRoID8gIiBzZWxlY3RlZD0nc2VsZWN0ZWQnIiA6ICIiKSArCgkJCQkJCSI+IiArIG1vbnRoTmFtZXNTaG9ydFttb250aF0gKyAiPC9vcHRpb24+IjsKCQkJCX0KCQkJfQoJCQltb250aEh0bWwgKz0gIjwvc2VsZWN0PiI7CgkJfQoKCQlpZiAoIXNob3dNb250aEFmdGVyWWVhcikgewoJCQlodG1sICs9IG1vbnRoSHRtbCArIChzZWNvbmRhcnkgfHwgIShjaGFuZ2VNb250aCAmJiBjaGFuZ2VZZWFyKSA/ICImI3hhMDsiIDogIiIpOwoJCX0KCgkJLy8geWVhciBzZWxlY3Rpb24KCQlpZiAoICFpbnN0LnllYXJzaHRtbCApIHsKCQkJaW5zdC55ZWFyc2h0bWwgPSAiIjsKCQkJaWYgKHNlY29uZGFyeSB8fCAhY2hhbmdlWWVhcikgewoJCQkJaHRtbCArPSAiPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcic+IiArIGRyYXdZZWFyICsgIjwvc3Bhbj4iOwoJCQl9IGVsc2UgewoJCQkJLy8gZGV0ZXJtaW5lIHJhbmdlIG9mIHllYXJzIHRvIGRpc3BsYXkKCQkJCXllYXJzID0gdGhpcy5fZ2V0KGluc3QsICJ5ZWFyUmFuZ2UiKS5zcGxpdCgiOiIpOwoJCQkJdGhpc1llYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7CgkJCQlkZXRlcm1pbmVZZWFyID0gZnVuY3Rpb24odmFsdWUpIHsKCQkJCQl2YXIgeWVhciA9ICh2YWx1ZS5tYXRjaCgvY1srXC1dLiovKSA/IGRyYXdZZWFyICsgcGFyc2VJbnQodmFsdWUuc3Vic3RyaW5nKDEpLCAxMCkgOgoJCQkJCQkodmFsdWUubWF0Y2goL1srXC1dLiovKSA/IHRoaXNZZWFyICsgcGFyc2VJbnQodmFsdWUsIDEwKSA6CgkJCQkJCXBhcnNlSW50KHZhbHVlLCAxMCkpKTsKCQkJCQlyZXR1cm4gKGlzTmFOKHllYXIpID8gdGhpc1llYXIgOiB5ZWFyKTsKCQkJCX07CgkJCQl5ZWFyID0gZGV0ZXJtaW5lWWVhcih5ZWFyc1swXSk7CgkJCQllbmRZZWFyID0gTWF0aC5tYXgoeWVhciwgZGV0ZXJtaW5lWWVhcih5ZWFyc1sxXSB8fCAiIikpOwoJCQkJeWVhciA9IChtaW5EYXRlID8gTWF0aC5tYXgoeWVhciwgbWluRGF0ZS5nZXRGdWxsWWVhcigpKSA6IHllYXIpOwoJCQkJZW5kWWVhciA9IChtYXhEYXRlID8gTWF0aC5taW4oZW5kWWVhciwgbWF4RGF0ZS5nZXRGdWxsWWVhcigpKSA6IGVuZFllYXIpOwoJCQkJaW5zdC55ZWFyc2h0bWwgKz0gIjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcicgZGF0YS1oYW5kbGVyPSdzZWxlY3RZZWFyJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7CgkJCQlmb3IgKDsgeWVhciA8PSBlbmRZZWFyOyB5ZWFyKyspIHsKCQkJCQlpbnN0LnllYXJzaHRtbCArPSAiPG9wdGlvbiB2YWx1ZT0nIiArIHllYXIgKyAiJyIgKwoJCQkJCQkoeWVhciA9PT0gZHJhd1llYXIgPyAiIHNlbGVjdGVkPSdzZWxlY3RlZCciIDogIiIpICsKCQkJCQkJIj4iICsgeWVhciArICI8L29wdGlvbj4iOwoJCQkJfQoJCQkJaW5zdC55ZWFyc2h0bWwgKz0gIjwvc2VsZWN0PiI7CgoJCQkJaHRtbCArPSBpbnN0LnllYXJzaHRtbDsKCQkJCWluc3QueWVhcnNodG1sID0gbnVsbDsKCQkJfQoJCX0KCgkJaHRtbCArPSB0aGlzLl9nZXQoaW5zdCwgInllYXJTdWZmaXgiKTsKCQlpZiAoc2hvd01vbnRoQWZ0ZXJZZWFyKSB7CgkJCWh0bWwgKz0gKHNlY29uZGFyeSB8fCAhKGNoYW5nZU1vbnRoICYmIGNoYW5nZVllYXIpID8gIiYjeGEwOyIgOiAiIikgKyBtb250aEh0bWw7CgkJfQoJCWh0bWwgKz0gIjwvZGl2PiI7IC8vIENsb3NlIGRhdGVwaWNrZXJfaGVhZGVyCgkJcmV0dXJuIGh0bWw7Cgl9LAoKCS8qIEFkanVzdCBvbmUgb2YgdGhlIGRhdGUgc3ViLWZpZWxkcy4gKi8KCV9hZGp1c3RJbnN0RGF0ZTogZnVuY3Rpb24oaW5zdCwgb2Zmc2V0LCBwZXJpb2QpIHsKCQl2YXIgeWVhciA9IGluc3QuZHJhd1llYXIgKyAocGVyaW9kID09PSAiWSIgPyBvZmZzZXQgOiAwKSwKCQkJbW9udGggPSBpbnN0LmRyYXdNb250aCArIChwZXJpb2QgPT09ICJNIiA/IG9mZnNldCA6IDApLAoJCQlkYXkgPSBNYXRoLm1pbihpbnN0LnNlbGVjdGVkRGF5LCB0aGlzLl9nZXREYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICsgKHBlcmlvZCA9PT0gIkQiID8gb2Zmc2V0IDogMCksCgkJCWRhdGUgPSB0aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LCB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSkpOwoKCQlpbnN0LnNlbGVjdGVkRGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7CgkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCWlmIChwZXJpb2QgPT09ICJNIiB8fCBwZXJpb2QgPT09ICJZIikgewoJCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJfQoJfSwKCgkvKiBFbnN1cmUgYSBkYXRlIGlzIHdpdGhpbiBhbnkgbWluL21heCBib3VuZHMuICovCglfcmVzdHJpY3RNaW5NYXg6IGZ1bmN0aW9uKGluc3QsIGRhdGUpIHsKCQl2YXIgbWluRGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgIm1pbiIpLAoJCQltYXhEYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCAibWF4IiksCgkJCW5ld0RhdGUgPSAobWluRGF0ZSAmJiBkYXRlIDwgbWluRGF0ZSA/IG1pbkRhdGUgOiBkYXRlKTsKCQlyZXR1cm4gKG1heERhdGUgJiYgbmV3RGF0ZSA+IG1heERhdGUgPyBtYXhEYXRlIDogbmV3RGF0ZSk7Cgl9LAoKCS8qIE5vdGlmeSBjaGFuZ2Ugb2YgbW9udGgveWVhci4gKi8KCV9ub3RpZnlDaGFuZ2U6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgb25DaGFuZ2UgPSB0aGlzLl9nZXQoaW5zdCwgIm9uQ2hhbmdlTW9udGhZZWFyIik7CgkJaWYgKG9uQ2hhbmdlKSB7CgkJCW9uQ2hhbmdlLmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLAoJCQkJW2luc3Quc2VsZWN0ZWRZZWFyLCBpbnN0LnNlbGVjdGVkTW9udGggKyAxLCBpbnN0XSk7CgkJfQoJfSwKCgkvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBtb250aHMgdG8gc2hvdy4gKi8KCV9nZXROdW1iZXJPZk1vbnRoczogZnVuY3Rpb24oaW5zdCkgewoJCXZhciBudW1Nb250aHMgPSB0aGlzLl9nZXQoaW5zdCwgIm51bWJlck9mTW9udGhzIik7CgkJcmV0dXJuIChudW1Nb250aHMgPT0gbnVsbCA/IFsxLCAxXSA6ICh0eXBlb2YgbnVtTW9udGhzID09PSAibnVtYmVyIiA/IFsxLCBudW1Nb250aHNdIDogbnVtTW9udGhzKSk7Cgl9LAoKCS8qIERldGVybWluZSB0aGUgY3VycmVudCBtYXhpbXVtIGRhdGUgLSBlbnN1cmUgbm8gdGltZSBjb21wb25lbnRzIGFyZSBzZXQuICovCglfZ2V0TWluTWF4RGF0ZTogZnVuY3Rpb24oaW5zdCwgbWluTWF4KSB7CgkJcmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaW5zdCwgdGhpcy5fZ2V0KGluc3QsIG1pbk1heCArICJEYXRlIiksIG51bGwpOwoJfSwKCgkvKiBGaW5kIHRoZSBudW1iZXIgb2YgZGF5cyBpbiBhIGdpdmVuIG1vbnRoLiAqLwoJX2dldERheXNJbk1vbnRoOiBmdW5jdGlvbih5ZWFyLCBtb250aCkgewoJCXJldHVybiAzMiAtIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCAzMikpLmdldERhdGUoKTsKCX0sCgoJLyogRmluZCB0aGUgZGF5IG9mIHRoZSB3ZWVrIG9mIHRoZSBmaXJzdCBvZiBhIG1vbnRoLiAqLwoJX2dldEZpcnN0RGF5T2ZNb250aDogZnVuY3Rpb24oeWVhciwgbW9udGgpIHsKCQlyZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpOwoJfSwKCgkvKiBEZXRlcm1pbmVzIGlmIHdlIHNob3VsZCBhbGxvdyBhICJuZXh0L3ByZXYiIG1vbnRoIGRpc3BsYXkgY2hhbmdlLiAqLwoJX2NhbkFkanVzdE1vbnRoOiBmdW5jdGlvbihpbnN0LCBvZmZzZXQsIGN1clllYXIsIGN1ck1vbnRoKSB7CgkJdmFyIG51bU1vbnRocyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKGluc3QpLAoJCQlkYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoY3VyWWVhciwKCQkJY3VyTW9udGggKyAob2Zmc2V0IDwgMCA/IG9mZnNldCA6IG51bU1vbnRoc1swXSAqIG51bU1vbnRoc1sxXSksIDEpKTsKCgkJaWYgKG9mZnNldCA8IDApIHsKCQkJZGF0ZS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpKSk7CgkJfQoJCXJldHVybiB0aGlzLl9pc0luUmFuZ2UoaW5zdCwgZGF0ZSk7Cgl9LAoKCS8qIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBhY2NlcHRlZCByYW5nZT8gKi8KCV9pc0luUmFuZ2U6IGZ1bmN0aW9uKGluc3QsIGRhdGUpIHsKCQl2YXIgeWVhclNwbGl0LCBjdXJyZW50WWVhciwKCQkJbWluRGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgIm1pbiIpLAoJCQltYXhEYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCAibWF4IiksCgkJCW1pblllYXIgPSBudWxsLAoJCQltYXhZZWFyID0gbnVsbCwKCQkJeWVhcnMgPSB0aGlzLl9nZXQoaW5zdCwgInllYXJSYW5nZSIpOwoJCQlpZiAoeWVhcnMpewoJCQkJeWVhclNwbGl0ID0geWVhcnMuc3BsaXQoIjoiKTsKCQkJCWN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwoJCQkJbWluWWVhciA9IHBhcnNlSW50KHllYXJTcGxpdFswXSwgMTApOwoJCQkJbWF4WWVhciA9IHBhcnNlSW50KHllYXJTcGxpdFsxXSwgMTApOwoJCQkJaWYgKCB5ZWFyU3BsaXRbMF0ubWF0Y2goL1srXC1dLiovKSApIHsKCQkJCQltaW5ZZWFyICs9IGN1cnJlbnRZZWFyOwoJCQkJfQoJCQkJaWYgKCB5ZWFyU3BsaXRbMV0ubWF0Y2goL1srXC1dLiovKSApIHsKCQkJCQltYXhZZWFyICs9IGN1cnJlbnRZZWFyOwoJCQkJfQoJCQl9CgoJCXJldHVybiAoKCFtaW5EYXRlIHx8IGRhdGUuZ2V0VGltZSgpID49IG1pbkRhdGUuZ2V0VGltZSgpKSAmJgoJCQkoIW1heERhdGUgfHwgZGF0ZS5nZXRUaW1lKCkgPD0gbWF4RGF0ZS5nZXRUaW1lKCkpICYmCgkJCSghbWluWWVhciB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgPj0gbWluWWVhcikgJiYKCQkJKCFtYXhZZWFyIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSA8PSBtYXhZZWFyKSk7Cgl9LAoKCS8qIFByb3ZpZGUgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgZm9yIGZvcm1hdHRpbmcvcGFyc2luZy4gKi8KCV9nZXRGb3JtYXRDb25maWc6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgc2hvcnRZZWFyQ3V0b2ZmID0gdGhpcy5fZ2V0KGluc3QsICJzaG9ydFllYXJDdXRvZmYiKTsKCQlzaG9ydFllYXJDdXRvZmYgPSAodHlwZW9mIHNob3J0WWVhckN1dG9mZiAhPT0gInN0cmluZyIgPyBzaG9ydFllYXJDdXRvZmYgOgoJCQluZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgJSAxMDAgKyBwYXJzZUludChzaG9ydFllYXJDdXRvZmYsIDEwKSk7CgkJcmV0dXJuIHtzaG9ydFllYXJDdXRvZmY6IHNob3J0WWVhckN1dG9mZiwKCQkJZGF5TmFtZXNTaG9ydDogdGhpcy5fZ2V0KGluc3QsICJkYXlOYW1lc1Nob3J0IiksIGRheU5hbWVzOiB0aGlzLl9nZXQoaW5zdCwgImRheU5hbWVzIiksCgkJCW1vbnRoTmFtZXNTaG9ydDogdGhpcy5fZ2V0KGluc3QsICJtb250aE5hbWVzU2hvcnQiKSwgbW9udGhOYW1lczogdGhpcy5fZ2V0KGluc3QsICJtb250aE5hbWVzIil9OwoJfSwKCgkvKiBGb3JtYXQgdGhlIGdpdmVuIGRhdGUgZm9yIGRpc3BsYXkuICovCglfZm9ybWF0RGF0ZTogZnVuY3Rpb24oaW5zdCwgZGF5LCBtb250aCwgeWVhcikgewoJCWlmICghZGF5KSB7CgkJCWluc3QuY3VycmVudERheSA9IGluc3Quc2VsZWN0ZWREYXk7CgkJCWluc3QuY3VycmVudE1vbnRoID0gaW5zdC5zZWxlY3RlZE1vbnRoOwoJCQlpbnN0LmN1cnJlbnRZZWFyID0gaW5zdC5zZWxlY3RlZFllYXI7CgkJfQoJCXZhciBkYXRlID0gKGRheSA/ICh0eXBlb2YgZGF5ID09PSAib2JqZWN0IiA/IGRheSA6CgkJCXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpKSkgOgoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShpbnN0LmN1cnJlbnRZZWFyLCBpbnN0LmN1cnJlbnRNb250aCwgaW5zdC5jdXJyZW50RGF5KSkpOwoJCXJldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5fZ2V0KGluc3QsICJkYXRlRm9ybWF0IiksIGRhdGUsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7Cgl9Cn0pOwoKLyoKICogQmluZCBob3ZlciBldmVudHMgZm9yIGRhdGVwaWNrZXIgZWxlbWVudHMuCiAqIERvbmUgdmlhIGRlbGVnYXRlIHNvIHRoZSBiaW5kaW5nIG9ubHkgb2NjdXJzIG9uY2UgaW4gdGhlIGxpZmV0aW1lIG9mIHRoZSBwYXJlbnQgZGl2LgogKiBHbG9iYWwgZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLCBzZXQgYnkgX3VwZGF0ZURhdGVwaWNrZXIgYWxsb3dzIHRoZSBoYW5kbGVycyB0byBmaW5kIHRoZWlyIHdheSBiYWNrIHRvIHRoZSBhY3RpdmUgcGlja2VyLgogKi8KZnVuY3Rpb24gZGF0ZXBpY2tlcl9iaW5kSG92ZXIoZHBEaXYpIHsKCXZhciBzZWxlY3RvciA9ICJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEiOwoJcmV0dXJuIGRwRGl2LmRlbGVnYXRlKHNlbGVjdG9yLCAibW91c2VvdXQiLCBmdW5jdGlvbigpIHsKCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTsKCQkJaWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpICE9PSAtMSkgewoJCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIik7CgkJCX0KCQkJaWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItbmV4dCIpICE9PSAtMSkgewoJCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIik7CgkJCX0KCQl9KQoJCS5kZWxlZ2F0ZSggc2VsZWN0b3IsICJtb3VzZW92ZXIiLCBkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3ZlciApOwp9CgpmdW5jdGlvbiBkYXRlcGlja2VyX2hhbmRsZU1vdXNlb3ZlcigpIHsKCWlmICghJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlciggZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLmlubGluZT8gZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLmRwRGl2LnBhcmVudCgpWzBdIDogZGF0ZXBpY2tlcl9pbnN0QWN0aXZlLmlucHV0WzBdKSkgewoJCSQodGhpcykucGFyZW50cygiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKS5maW5kKCJhIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7CgkJJCh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKTsKCQlpZiAodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikgIT09IC0xKSB7CgkJCSQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpOwoJCX0KCQlpZiAodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikgIT09IC0xKSB7CgkJCSQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpOwoJCX0KCX0KfQoKLyogalF1ZXJ5IGV4dGVuZCBub3cgaWdub3JlcyBudWxscyEgKi8KZnVuY3Rpb24gZGF0ZXBpY2tlcl9leHRlbmRSZW1vdmUodGFyZ2V0LCBwcm9wcykgewoJJC5leHRlbmQodGFyZ2V0LCBwcm9wcyk7Cglmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7CgkJaWYgKHByb3BzW25hbWVdID09IG51bGwpIHsKCQkJdGFyZ2V0W25hbWVdID0gcHJvcHNbbmFtZV07CgkJfQoJfQoJcmV0dXJuIHRhcmdldDsKfQoKLyogSW52b2tlIHRoZSBkYXRlcGlja2VyIGZ1bmN0aW9uYWxpdHkuCiAgIEBwYXJhbSAgb3B0aW9ucyAgc3RyaW5nIC0gYSBjb21tYW5kLCBvcHRpb25hbGx5IGZvbGxvd2VkIGJ5IGFkZGl0aW9uYWwgcGFyYW1ldGVycyBvcgoJCQkJCU9iamVjdCAtIHNldHRpbmdzIGZvciBhdHRhY2hpbmcgbmV3IGRhdGVwaWNrZXIgZnVuY3Rpb25hbGl0eQogICBAcmV0dXJuICBqUXVlcnkgb2JqZWN0ICovCiQuZm4uZGF0ZXBpY2tlciA9IGZ1bmN0aW9uKG9wdGlvbnMpewoKCS8qIFZlcmlmeSBhbiBlbXB0eSBjb2xsZWN0aW9uIHdhc24ndCBwYXNzZWQgLSBGaXhlcyAjNjk3NiAqLwoJaWYgKCAhdGhpcy5sZW5ndGggKSB7CgkJcmV0dXJuIHRoaXM7Cgl9CgoJLyogSW5pdGlhbGlzZSB0aGUgZGF0ZSBwaWNrZXIuICovCglpZiAoISQuZGF0ZXBpY2tlci5pbml0aWFsaXplZCkgewoJCSQoZG9jdW1lbnQpLm1vdXNlZG93bigkLmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljayk7CgkJJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gdHJ1ZTsKCX0KCgkvKiBBcHBlbmQgZGF0ZXBpY2tlciBtYWluIGNvbnRhaW5lciB0byBib2R5IGlmIG5vdCBleGlzdC4gKi8KCWlmICgkKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoID09PSAwKSB7CgkJJCgiYm9keSIpLmFwcGVuZCgkLmRhdGVwaWNrZXIuZHBEaXYpOwoJfQoKCXZhciBvdGhlckFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoJaWYgKHR5cGVvZiBvcHRpb25zID09PSAic3RyaW5nIiAmJiAob3B0aW9ucyA9PT0gImlzRGlzYWJsZWQiIHx8IG9wdGlvbnMgPT09ICJnZXREYXRlIiB8fCBvcHRpb25zID09PSAid2lkZ2V0IikpIHsKCQlyZXR1cm4gJC5kYXRlcGlja2VyWyJfIiArIG9wdGlvbnMgKyAiRGF0ZXBpY2tlciJdLgoJCQlhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7Cgl9CglpZiAob3B0aW9ucyA9PT0gIm9wdGlvbiIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAic3RyaW5nIikgewoJCXJldHVybiAkLmRhdGVwaWNrZXJbIl8iICsgb3B0aW9ucyArICJEYXRlcGlja2VyIl0uCgkJCWFwcGx5KCQuZGF0ZXBpY2tlciwgW3RoaXNbMF1dLmNvbmNhdChvdGhlckFyZ3MpKTsKCX0KCXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciID8KCQkJJC5kYXRlcGlja2VyWyJfIiArIG9wdGlvbnMgKyAiRGF0ZXBpY2tlciJdLgoJCQkJYXBwbHkoJC5kYXRlcGlja2VyLCBbdGhpc10uY29uY2F0KG90aGVyQXJncykpIDoKCQkJJC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsIG9wdGlvbnMpOwoJfSk7Cn07CgokLmRhdGVwaWNrZXIgPSBuZXcgRGF0ZXBpY2tlcigpOyAvLyBzaW5nbGV0b24gaW5zdGFuY2UKJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gZmFsc2U7CiQuZGF0ZXBpY2tlci51dWlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiQuZGF0ZXBpY2tlci52ZXJzaW9uID0gIjEuMTEuMSI7Cgp2YXIgZGF0ZXBpY2tlciA9ICQuZGF0ZXBpY2tlcjsKCgovKiEKICogalF1ZXJ5IFVJIERyYWdnYWJsZSAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kcmFnZ2FibGUvCiAqLwoKCiQud2lkZ2V0KCJ1aS5kcmFnZ2FibGUiLCAkLnVpLm1vdXNlLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCXdpZGdldEV2ZW50UHJlZml4OiAiZHJhZyIsCglvcHRpb25zOiB7CgkJYWRkQ2xhc3NlczogdHJ1ZSwKCQlhcHBlbmRUbzogInBhcmVudCIsCgkJYXhpczogZmFsc2UsCgkJY29ubmVjdFRvU29ydGFibGU6IGZhbHNlLAoJCWNvbnRhaW5tZW50OiBmYWxzZSwKCQljdXJzb3I6ICJhdXRvIiwKCQljdXJzb3JBdDogZmFsc2UsCgkJZ3JpZDogZmFsc2UsCgkJaGFuZGxlOiBmYWxzZSwKCQloZWxwZXI6ICJvcmlnaW5hbCIsCgkJaWZyYW1lRml4OiBmYWxzZSwKCQlvcGFjaXR5OiBmYWxzZSwKCQlyZWZyZXNoUG9zaXRpb25zOiBmYWxzZSwKCQlyZXZlcnQ6IGZhbHNlLAoJCXJldmVydER1cmF0aW9uOiA1MDAsCgkJc2NvcGU6ICJkZWZhdWx0IiwKCQlzY3JvbGw6IHRydWUsCgkJc2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLAoJCXNjcm9sbFNwZWVkOiAyMCwKCQlzbmFwOiBmYWxzZSwKCQlzbmFwTW9kZTogImJvdGgiLAoJCXNuYXBUb2xlcmFuY2U6IDIwLAoJCXN0YWNrOiBmYWxzZSwKCQl6SW5kZXg6IGZhbHNlLAoKCQkvLyBjYWxsYmFja3MKCQlkcmFnOiBudWxsLAoJCXN0YXJ0OiBudWxsLAoJCXN0b3A6IG51bGwKCX0sCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCgkJaWYgKHRoaXMub3B0aW9ucy5oZWxwZXIgPT09ICJvcmlnaW5hbCIgJiYgISgvXig/OnJ8YXxmKS8pLnRlc3QodGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSkpIHsKCQkJdGhpcy5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKCQl9CgkJaWYgKHRoaXMub3B0aW9ucy5hZGRDbGFzc2VzKXsKCQkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1kcmFnZ2FibGUiKTsKCQl9CgkJaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCl7CgkJCXRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZHJhZ2dhYmxlLWRpc2FibGVkIik7CgkJfQoJCXRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpOwoKCQl0aGlzLl9tb3VzZUluaXQoKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCQlpZiAoIGtleSA9PT0gImhhbmRsZSIgKSB7CgkJCXRoaXMuX3JlbW92ZUhhbmRsZUNsYXNzTmFtZSgpOwoJCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsKCQl9Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQlpZiAoICggdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50ICkuaXMoICIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIiApICkgewoJCQl0aGlzLmRlc3Ryb3lPbkNsZWFyID0gdHJ1ZTsKCQkJcmV0dXJuOwoJCX0KCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1kcmFnZ2FibGUgdWktZHJhZ2dhYmxlLWRyYWdnaW5nIHVpLWRyYWdnYWJsZS1kaXNhYmxlZCIgKTsKCQl0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKTsKCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsKCX0sCgoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIGRvY3VtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLAoJCQlvID0gdGhpcy5vcHRpb25zOwoKCQkvLyBzdXBwb3J0OiBJRTkKCQkvLyBJRTkgdGhyb3dzIGFuICJVbnNwZWNpZmllZCBlcnJvciIgYWNjZXNzaW5nIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgZnJvbSBhbiA8aWZyYW1lPgoJCXRyeSB7CgkJCS8vIFN1cHBvcnQ6IElFOSsKCQkJLy8gSWYgdGhlIDxib2R5PiBpcyBibHVycmVkLCBJRSB3aWxsIHN3aXRjaCB3aW5kb3dzLCBzZWUgIzk1MjAKCQkJaWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gImJvZHkiICkgewoJCQkJLy8gQmx1ciBhbnkgZWxlbWVudCB0aGF0IGN1cnJlbnRseSBoYXMgZm9jdXMsIHNlZSAjNDI2MQoJCQkJJCggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCApLmJsdXIoKTsKCQkJfQoJCX0gY2F0Y2ggKCBlcnJvciApIHt9CgoJCS8vIGFtb25nIG90aGVycywgcHJldmVudCBhIGRyYWcgb24gYSByZXNpemFibGUtaGFuZGxlCgkJaWYgKHRoaXMuaGVscGVyIHx8IG8uZGlzYWJsZWQgfHwgJChldmVudC50YXJnZXQpLmNsb3Nlc3QoIi51aS1yZXNpemFibGUtaGFuZGxlIikubGVuZ3RoID4gMCkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQkvL1F1aXQgaWYgd2UncmUgbm90IG9uIGEgdmFsaWQgaGFuZGxlCgkJdGhpcy5oYW5kbGUgPSB0aGlzLl9nZXRIYW5kbGUoZXZlbnQpOwoJCWlmICghdGhpcy5oYW5kbGUpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJJChvLmlmcmFtZUZpeCA9PT0gdHJ1ZSA/ICJpZnJhbWUiIDogby5pZnJhbWVGaXgpLmVhY2goZnVuY3Rpb24oKSB7CgkJCSQoIjxkaXYgY2xhc3M9J3VpLWRyYWdnYWJsZS1pZnJhbWVGaXgnIHN0eWxlPSdiYWNrZ3JvdW5kOiAjZmZmOyc+PC9kaXY+IikKCQkJLmNzcyh7CgkJCQl3aWR0aDogdGhpcy5vZmZzZXRXaWR0aCArICJweCIsIGhlaWdodDogdGhpcy5vZmZzZXRIZWlnaHQgKyAicHgiLAoJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsIG9wYWNpdHk6ICIwLjAwMSIsIHpJbmRleDogMTAwMAoJCQl9KQoJCQkuY3NzKCQodGhpcykub2Zmc2V0KCkpCgkJCS5hcHBlbmRUbygiYm9keSIpOwoJCX0pOwoKCQlyZXR1cm4gdHJ1ZTsKCgl9LAoKCV9tb3VzZVN0YXJ0OiBmdW5jdGlvbihldmVudCkgewoKCQl2YXIgbyA9IHRoaXMub3B0aW9uczsKCgkJLy9DcmVhdGUgYW5kIGFwcGVuZCB0aGUgdmlzaWJsZSBoZWxwZXIKCQl0aGlzLmhlbHBlciA9IHRoaXMuX2NyZWF0ZUhlbHBlcihldmVudCk7CgoJCXRoaXMuaGVscGVyLmFkZENsYXNzKCJ1aS1kcmFnZ2FibGUtZHJhZ2dpbmciKTsKCgkJLy9DYWNoZSB0aGUgaGVscGVyIHNpemUKCQl0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7CgoJCS8vSWYgZGRtYW5hZ2VyIGlzIHVzZWQgZm9yIGRyb3BwYWJsZXMsIHNldCB0aGUgZ2xvYmFsIGRyYWdnYWJsZQoJCWlmICgkLnVpLmRkbWFuYWdlcikgewoJCQkkLnVpLmRkbWFuYWdlci5jdXJyZW50ID0gdGhpczsKCQl9CgoJCS8qCgkJICogLSBQb3NpdGlvbiBnZW5lcmF0aW9uIC0KCQkgKiBUaGlzIGJsb2NrIGdlbmVyYXRlcyBldmVyeXRoaW5nIHBvc2l0aW9uIHJlbGF0ZWQgLSBpdCdzIHRoZSBjb3JlIG9mIGRyYWdnYWJsZXMuCgkJICovCgoJCS8vQ2FjaGUgdGhlIG1hcmdpbnMgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnQKCQl0aGlzLl9jYWNoZU1hcmdpbnMoKTsKCgkJLy9TdG9yZSB0aGUgaGVscGVyJ3MgY3NzIHBvc2l0aW9uCgkJdGhpcy5jc3NQb3NpdGlvbiA9IHRoaXMuaGVscGVyLmNzcyggInBvc2l0aW9uIiApOwoJCXRoaXMuc2Nyb2xsUGFyZW50ID0gdGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCB0cnVlICk7CgkJdGhpcy5vZmZzZXRQYXJlbnQgPSB0aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTsKCQl0aGlzLm9mZnNldFBhcmVudENzc1Bvc2l0aW9uID0gdGhpcy5vZmZzZXRQYXJlbnQuY3NzKCAicG9zaXRpb24iICk7CgoJCS8vVGhlIGVsZW1lbnQncyBhYnNvbHV0ZSBwb3NpdGlvbiBvbiB0aGUgcGFnZSBtaW51cyBtYXJnaW5zCgkJdGhpcy5vZmZzZXQgPSB0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpOwoJCXRoaXMub2Zmc2V0ID0gewoJCQl0b3A6IHRoaXMub2Zmc2V0LnRvcCAtIHRoaXMubWFyZ2lucy50b3AsCgkJCWxlZnQ6IHRoaXMub2Zmc2V0LmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdAoJCX07CgoJCS8vUmVzZXQgc2Nyb2xsIGNhY2hlCgkJdGhpcy5vZmZzZXQuc2Nyb2xsID0gZmFsc2U7CgoJCSQuZXh0ZW5kKHRoaXMub2Zmc2V0LCB7CgkJCWNsaWNrOiB7IC8vV2hlcmUgdGhlIGNsaWNrIGhhcHBlbmVkLCByZWxhdGl2ZSB0byB0aGUgZWxlbWVudAoJCQkJbGVmdDogZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5sZWZ0LAoJCQkJdG9wOiBldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LnRvcAoJCQl9LAoJCQlwYXJlbnQ6IHRoaXMuX2dldFBhcmVudE9mZnNldCgpLAoJCQlyZWxhdGl2ZTogdGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKSAvL1RoaXMgaXMgYSByZWxhdGl2ZSB0byBhYnNvbHV0ZSBwb3NpdGlvbiBtaW51cyB0aGUgYWN0dWFsIHBvc2l0aW9uIGNhbGN1bGF0aW9uIC0gb25seSB1c2VkIGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIGhlbHBlcgoJCX0pOwoKCQkvL0dlbmVyYXRlIHRoZSBvcmlnaW5hbCBwb3NpdGlvbgoJCXRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHRoaXMucG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKCBldmVudCwgZmFsc2UgKTsKCQl0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDsKCQl0aGlzLm9yaWdpbmFsUGFnZVkgPSBldmVudC5wYWdlWTsKCgkJLy9BZGp1c3QgdGhlIG1vdXNlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgaGVscGVyIGlmICJjdXJzb3JBdCIgaXMgc3VwcGxpZWQKCQkoby5jdXJzb3JBdCAmJiB0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKG8uY3Vyc29yQXQpKTsKCgkJLy9TZXQgYSBjb250YWlubWVudCBpZiBnaXZlbiBpbiB0aGUgb3B0aW9ucwoJCXRoaXMuX3NldENvbnRhaW5tZW50KCk7CgoJCS8vVHJpZ2dlciBldmVudCArIGNhbGxiYWNrcwoJCWlmICh0aGlzLl90cmlnZ2VyKCJzdGFydCIsIGV2ZW50KSA9PT0gZmFsc2UpIHsKCQkJdGhpcy5fY2xlYXIoKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJLy9SZWNhY2hlIHRoZSBoZWxwZXIgc2l6ZQoJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsKCgkJLy9QcmVwYXJlIHRoZSBkcm9wcGFibGUgb2Zmc2V0cwoJCWlmICgkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyKSB7CgkJCSQudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsIGV2ZW50KTsKCQl9CgoJCXRoaXMuX21vdXNlRHJhZyhldmVudCwgdHJ1ZSk7IC8vRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZSBiZWZvcmUgZ2V0dGluZyBpdHMgY29ycmVjdCBwb3NpdGlvbgoKCQkvL0lmIHRoZSBkZG1hbmFnZXIgaXMgdXNlZCBmb3IgZHJvcHBhYmxlcywgaW5mb3JtIHRoZSBtYW5hZ2VyIHRoYXQgZHJhZ2dpbmcgaGFzIHN0YXJ0ZWQgKHNlZSAjNTAwMykKCQlpZiAoICQudWkuZGRtYW5hZ2VyICkgewoJCQkkLnVpLmRkbWFuYWdlci5kcmFnU3RhcnQodGhpcywgZXZlbnQpOwoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9LAoKCV9tb3VzZURyYWc6IGZ1bmN0aW9uKGV2ZW50LCBub1Byb3BhZ2F0aW9uKSB7CgkJLy8gcmVzZXQgYW55IG5lY2Vzc2FyeSBjYWNoZWQgcHJvcGVydGllcyAoc2VlICM1MDA5KQoJCWlmICggdGhpcy5vZmZzZXRQYXJlbnRDc3NQb3NpdGlvbiA9PT0gImZpeGVkIiApIHsKCQkJdGhpcy5vZmZzZXQucGFyZW50ID0gdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCk7CgkJfQoKCQkvL0NvbXB1dGUgdGhlIGhlbHBlcnMgcG9zaXRpb24KCQl0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbiggZXZlbnQsIHRydWUgKTsKCQl0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7CgoJCS8vQ2FsbCBwbHVnaW5zIGFuZCBjYWxsYmFja3MgYW5kIHVzZSB0aGUgcmVzdWx0aW5nIHBvc2l0aW9uIGlmIHNvbWV0aGluZyBpcyByZXR1cm5lZAoJCWlmICghbm9Qcm9wYWdhdGlvbikgewoJCQl2YXIgdWkgPSB0aGlzLl91aUhhc2goKTsKCQkJaWYgKHRoaXMuX3RyaWdnZXIoImRyYWciLCBldmVudCwgdWkpID09PSBmYWxzZSkgewoJCQkJdGhpcy5fbW91c2VVcCh7fSk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJdGhpcy5wb3NpdGlvbiA9IHVpLnBvc2l0aW9uOwoJCX0KCgkJdGhpcy5oZWxwZXJbIDAgXS5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NpdGlvbi5sZWZ0ICsgInB4IjsKCQl0aGlzLmhlbHBlclsgMCBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgInB4IjsKCgkJaWYgKCQudWkuZGRtYW5hZ2VyKSB7CgkJCSQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgZXZlbnQpOwoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfSwKCglfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCkgewoKCQkvL0lmIHdlIGFyZSB1c2luZyBkcm9wcGFibGVzLCBpbmZvcm0gdGhlIG1hbmFnZXIgYWJvdXQgdGhlIGRyb3AKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCWRyb3BwZWQgPSBmYWxzZTsKCQlpZiAoJC51aS5kZG1hbmFnZXIgJiYgIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKSB7CgkJCWRyb3BwZWQgPSAkLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsIGV2ZW50KTsKCQl9CgoJCS8vaWYgYSBkcm9wIGNvbWVzIGZyb20gb3V0c2lkZSAoYSBzb3J0YWJsZSkKCQlpZiAodGhpcy5kcm9wcGVkKSB7CgkJCWRyb3BwZWQgPSB0aGlzLmRyb3BwZWQ7CgkJCXRoaXMuZHJvcHBlZCA9IGZhbHNlOwoJCX0KCgkJaWYgKCh0aGlzLm9wdGlvbnMucmV2ZXJ0ID09PSAiaW52YWxpZCIgJiYgIWRyb3BwZWQpIHx8ICh0aGlzLm9wdGlvbnMucmV2ZXJ0ID09PSAidmFsaWQiICYmIGRyb3BwZWQpIHx8IHRoaXMub3B0aW9ucy5yZXZlcnQgPT09IHRydWUgfHwgKCQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmV2ZXJ0KSAmJiB0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LCBkcm9wcGVkKSkpIHsKCQkJJCh0aGlzLmhlbHBlcikuYW5pbWF0ZSh0aGlzLm9yaWdpbmFsUG9zaXRpb24sIHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwgMTApLCBmdW5jdGlvbigpIHsKCQkJCWlmICh0aGF0Ll90cmlnZ2VyKCJzdG9wIiwgZXZlbnQpICE9PSBmYWxzZSkgewoJCQkJCXRoYXQuX2NsZWFyKCk7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWlmICh0aGlzLl90cmlnZ2VyKCJzdG9wIiwgZXZlbnQpICE9PSBmYWxzZSkgewoJCQkJdGhpcy5fY2xlYXIoKTsKCQkJfQoJCX0KCgkJcmV0dXJuIGZhbHNlOwoJfSwKCglfbW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHsKCQkvL1JlbW92ZSBmcmFtZSBoZWxwZXJzCgkJJCgiZGl2LnVpLWRyYWdnYWJsZS1pZnJhbWVGaXgiKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7CgkJfSk7CgoJCS8vSWYgdGhlIGRkbWFuYWdlciBpcyB1c2VkIGZvciBkcm9wcGFibGVzLCBpbmZvcm0gdGhlIG1hbmFnZXIgdGhhdCBkcmFnZ2luZyBoYXMgc3RvcHBlZCAoc2VlICM1MDAzKQoJCWlmICggJC51aS5kZG1hbmFnZXIgKSB7CgkJCSQudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsIGV2ZW50KTsKCQl9CgoJCS8vIFRoZSBpbnRlcmFjdGlvbiBpcyBvdmVyOyB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpY2sgcmVzdWx0ZWQgaW4gYSBkcmFnLCBmb2N1cyB0aGUgZWxlbWVudAoJCXRoaXMuZWxlbWVudC5mb2N1cygpOwoKCQlyZXR1cm4gJC51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLCBldmVudCk7Cgl9LAoKCWNhbmNlbDogZnVuY3Rpb24oKSB7CgoJCWlmICh0aGlzLmhlbHBlci5pcygiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpKSB7CgkJCXRoaXMuX21vdXNlVXAoe30pOwoJCX0gZWxzZSB7CgkJCXRoaXMuX2NsZWFyKCk7CgkJfQoKCQlyZXR1cm4gdGhpczsKCgl9LAoKCV9nZXRIYW5kbGU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJcmV0dXJuIHRoaXMub3B0aW9ucy5oYW5kbGUgPwoJCQkhISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaGFuZGxlICkgKS5sZW5ndGggOgoJCQl0cnVlOwoJfSwKCglfc2V0SGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhhbmRsZUVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuaGFuZGxlID8KCQkJdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5oYW5kbGUgKSA6IHRoaXMuZWxlbWVudDsKCQl0aGlzLmhhbmRsZUVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1kcmFnZ2FibGUtaGFuZGxlIiApOwoJfSwKCglfcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhhbmRsZUVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1kcmFnZ2FibGUtaGFuZGxlIiApOwoJfSwKCglfY3JlYXRlSGVscGVyOiBmdW5jdGlvbihldmVudCkgewoKCQl2YXIgbyA9IHRoaXMub3B0aW9ucywKCQkJaGVscGVyID0gJC5pc0Z1bmN0aW9uKG8uaGVscGVyKSA/ICQoby5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WyAwIF0sIFsgZXZlbnQgXSkpIDogKG8uaGVscGVyID09PSAiY2xvbmUiID8gdGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0cigiaWQiKSA6IHRoaXMuZWxlbWVudCk7CgoJCWlmICghaGVscGVyLnBhcmVudHMoImJvZHkiKS5sZW5ndGgpIHsKCQkJaGVscGVyLmFwcGVuZFRvKChvLmFwcGVuZFRvID09PSAicGFyZW50IiA/IHRoaXMuZWxlbWVudFswXS5wYXJlbnROb2RlIDogby5hcHBlbmRUbykpOwoJCX0KCgkJaWYgKGhlbHBlclswXSAhPT0gdGhpcy5lbGVtZW50WzBdICYmICEoLyhmaXhlZHxhYnNvbHV0ZSkvKS50ZXN0KGhlbHBlci5jc3MoInBvc2l0aW9uIikpKSB7CgkJCWhlbHBlci5jc3MoInBvc2l0aW9uIiwgImFic29sdXRlIik7CgkJfQoKCQlyZXR1cm4gaGVscGVyOwoKCX0sCgoJX2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uKG9iaikgewoJCWlmICh0eXBlb2Ygb2JqID09PSAic3RyaW5nIikgewoJCQlvYmogPSBvYmouc3BsaXQoIiAiKTsKCQl9CgkJaWYgKCQuaXNBcnJheShvYmopKSB7CgkJCW9iaiA9IHsgbGVmdDogK29ialswXSwgdG9wOiArb2JqWzFdIHx8IDAgfTsKCQl9CgkJaWYgKCJsZWZ0IiBpbiBvYmopIHsKCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IG9iai5sZWZ0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7CgkJfQoJCWlmICgicmlnaHQiIGluIG9iaikgewoJCQl0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIG9iai5yaWdodCArIHRoaXMubWFyZ2lucy5sZWZ0OwoJCX0KCQlpZiAoInRvcCIgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IG9iai50b3AgKyB0aGlzLm1hcmdpbnMudG9wOwoJCX0KCQlpZiAoImJvdHRvbSIgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gb2JqLmJvdHRvbSArIHRoaXMubWFyZ2lucy50b3A7CgkJfQoJfSwKCglfaXNSb290Tm9kZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJcmV0dXJuICggLyhodG1sfGJvZHkpL2kgKS50ZXN0KCBlbGVtZW50LnRhZ05hbWUgKSB8fCBlbGVtZW50ID09PSB0aGlzLmRvY3VtZW50WyAwIF07Cgl9LAoKCV9nZXRQYXJlbnRPZmZzZXQ6IGZ1bmN0aW9uKCkgewoKCQkvL0dldCB0aGUgb2Zmc2V0UGFyZW50IGFuZCBjYWNoZSBpdHMgcG9zaXRpb24KCQl2YXIgcG8gPSB0aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKSwKCQkJZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF07CgoJCS8vIFRoaXMgaXMgYSBzcGVjaWFsIGNhc2Ugd2hlcmUgd2UgbmVlZCB0byBtb2RpZnkgYSBvZmZzZXQgY2FsY3VsYXRlZCBvbiBzdGFydCwgc2luY2UgdGhlIGZvbGxvd2luZyBoYXBwZW5lZDoKCQkvLyAxLiBUaGUgcG9zaXRpb24gb2YgdGhlIGhlbHBlciBpcyBhYnNvbHV0ZSwgc28gaXQncyBwb3NpdGlvbiBpcyBjYWxjdWxhdGVkIGJhc2VkIG9uIHRoZSBuZXh0IHBvc2l0aW9uZWQgcGFyZW50CgkJLy8gMi4gVGhlIGFjdHVhbCBvZmZzZXQgcGFyZW50IGlzIGEgY2hpbGQgb2YgdGhlIHNjcm9sbCBwYXJlbnQsIGFuZCB0aGUgc2Nyb2xsIHBhcmVudCBpc24ndCB0aGUgZG9jdW1lbnQsIHdoaWNoIG1lYW5zIHRoYXQKCQkvLyAgICB0aGUgc2Nyb2xsIGlzIGluY2x1ZGVkIGluIHRoZSBpbml0aWFsIGNhbGN1bGF0aW9uIG9mIHRoZSBvZmZzZXQgb2YgdGhlIHBhcmVudCwgYW5kIG5ldmVyIHJlY2FsY3VsYXRlZCB1cG9uIGRyYWcKCQlpZiAodGhpcy5jc3NQb3NpdGlvbiA9PT0gImFic29sdXRlIiAmJiB0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gZG9jdW1lbnQgJiYgJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSwgdGhpcy5vZmZzZXRQYXJlbnRbMF0pKSB7CgkJCXBvLmxlZnQgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOwoJCQlwby50b3AgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk7CgkJfQoKCQlpZiAoIHRoaXMuX2lzUm9vdE5vZGUoIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gKSApIHsKCQkJcG8gPSB7IHRvcDogMCwgbGVmdDogMCB9OwoJCX0KCgkJcmV0dXJuIHsKCQkJdG9wOiBwby50b3AgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJUb3BXaWR0aCIpLCAxMCkgfHwgMCksCgkJCWxlZnQ6IHBvLmxlZnQgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwgMTApIHx8IDApCgkJfTsKCgl9LAoKCV9nZXRSZWxhdGl2ZU9mZnNldDogZnVuY3Rpb24oKSB7CgkJaWYgKCB0aGlzLmNzc1Bvc2l0aW9uICE9PSAicmVsYXRpdmUiICkgewoJCQlyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCQl9CgoJCXZhciBwID0gdGhpcy5lbGVtZW50LnBvc2l0aW9uKCksCgkJCXNjcm9sbElzUm9vdE5vZGUgPSB0aGlzLl9pc1Jvb3ROb2RlKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICk7CgoJCXJldHVybiB7CgkJCXRvcDogcC50b3AgLSAoIHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcyggInRvcCIgKSwgMTApIHx8IDAgKSArICggIXNjcm9sbElzUm9vdE5vZGUgPyB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6IDAgKSwKCQkJbGVmdDogcC5sZWZ0IC0gKCBwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoICJsZWZ0IiApLCAxMCkgfHwgMCApICsgKCAhc2Nyb2xsSXNSb290Tm9kZSA/IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6IDAgKQoJCX07CgoJfSwKCglfY2FjaGVNYXJnaW5zOiBmdW5jdGlvbigpIHsKCQl0aGlzLm1hcmdpbnMgPSB7CgkJCWxlZnQ6IChwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksIDEwKSB8fCAwKSwKCQkJdG9wOiAocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksIDEwKSB8fCAwKSwKCQkJcmlnaHQ6IChwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpLCAxMCkgfHwgMCksCgkJCWJvdHRvbTogKHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpLCAxMCkgfHwgMCkKCQl9OwoJfSwKCglfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24oKSB7CgkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHsKCQkJd2lkdGg6IHRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSwKCQkJaGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpCgkJfTsKCX0sCgoJX3NldENvbnRhaW5tZW50OiBmdW5jdGlvbigpIHsKCgkJdmFyIG92ZXIsIGMsIGNlLAoJCQlvID0gdGhpcy5vcHRpb25zLAoJCQlkb2N1bWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXTsKCgkJdGhpcy5yZWxhdGl2ZUNvbnRhaW5lciA9IG51bGw7CgoJCWlmICggIW8uY29udGFpbm1lbnQgKSB7CgkJCXRoaXMuY29udGFpbm1lbnQgPSBudWxsOwoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIG8uY29udGFpbm1lbnQgPT09ICJ3aW5kb3ciICkgewoJCQl0aGlzLmNvbnRhaW5tZW50ID0gWwoJCQkJJCggd2luZG93ICkuc2Nyb2xsTGVmdCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LAoJCQkJJCggd2luZG93ICkuc2Nyb2xsVG9wKCkgLSB0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgLSB0aGlzLm9mZnNldC5wYXJlbnQudG9wLAoJCQkJJCggd2luZG93ICkuc2Nyb2xsTGVmdCgpICsgJCggd2luZG93ICkud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwKCQkJCSQoIHdpbmRvdyApLnNjcm9sbFRvcCgpICsgKCAkKCB3aW5kb3cgKS5oZWlnaHQoKSB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0ICkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3AKCQkJXTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBvLmNvbnRhaW5tZW50ID09PSAiZG9jdW1lbnQiKSB7CgkJCXRoaXMuY29udGFpbm1lbnQgPSBbCgkJCQkwLAoJCQkJMCwKCQkJCSQoIGRvY3VtZW50ICkud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwKCQkJCSggJCggZG9jdW1lbnQgKS5oZWlnaHQoKSB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0ICkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3AKCQkJXTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBvLmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yID09PSBBcnJheSApIHsKCQkJdGhpcy5jb250YWlubWVudCA9IG8uY29udGFpbm1lbnQ7CgkJCXJldHVybjsKCQl9CgoJCWlmICggby5jb250YWlubWVudCA9PT0gInBhcmVudCIgKSB7CgkJCW8uY29udGFpbm1lbnQgPSB0aGlzLmhlbHBlclsgMCBdLnBhcmVudE5vZGU7CgkJfQoKCQljID0gJCggby5jb250YWlubWVudCApOwoJCWNlID0gY1sgMCBdOwoKCQlpZiAoICFjZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJb3ZlciA9IGMuY3NzKCAib3ZlcmZsb3ciICkgIT09ICJoaWRkZW4iOwoKCQl0aGlzLmNvbnRhaW5tZW50ID0gWwoJCQkoIHBhcnNlSW50KCBjLmNzcyggImJvcmRlckxlZnRXaWR0aCIgKSwgMTAgKSB8fCAwICkgKyAoIHBhcnNlSW50KCBjLmNzcyggInBhZGRpbmdMZWZ0IiApLCAxMCApIHx8IDAgKSwKCQkJKCBwYXJzZUludCggYy5jc3MoICJib3JkZXJUb3BXaWR0aCIgKSwgMTAgKSB8fCAwICkgKyAoIHBhcnNlSW50KCBjLmNzcyggInBhZGRpbmdUb3AiICksIDEwICkgfHwgMCApLAoJCQkoIG92ZXIgPyBNYXRoLm1heCggY2Uuc2Nyb2xsV2lkdGgsIGNlLm9mZnNldFdpZHRoICkgOiBjZS5vZmZzZXRXaWR0aCApIC0gKCBwYXJzZUludCggYy5jc3MoICJib3JkZXJSaWdodFdpZHRoIiApLCAxMCApIHx8IDAgKSAtICggcGFyc2VJbnQoIGMuY3NzKCAicGFkZGluZ1JpZ2h0IiApLCAxMCApIHx8IDAgKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCAtIHRoaXMubWFyZ2lucy5yaWdodCwKCQkJKCBvdmVyID8gTWF0aC5tYXgoIGNlLnNjcm9sbEhlaWdodCwgY2Uub2Zmc2V0SGVpZ2h0ICkgOiBjZS5vZmZzZXRIZWlnaHQgKSAtICggcGFyc2VJbnQoIGMuY3NzKCAiYm9yZGVyQm90dG9tV2lkdGgiICksIDEwICkgfHwgMCApIC0gKCBwYXJzZUludCggYy5jc3MoICJwYWRkaW5nQm90dG9tIiApLCAxMCApIHx8IDAgKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcCAgLSB0aGlzLm1hcmdpbnMuYm90dG9tCgkJXTsKCQl0aGlzLnJlbGF0aXZlQ29udGFpbmVyID0gYzsKCX0sCgoJX2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbihkLCBwb3MpIHsKCgkJaWYgKCFwb3MpIHsKCQkJcG9zID0gdGhpcy5wb3NpdGlvbjsKCQl9CgoJCXZhciBtb2QgPSBkID09PSAiYWJzb2x1dGUiID8gMSA6IC0xLAoJCQlzY3JvbGxJc1Jvb3ROb2RlID0gdGhpcy5faXNSb290Tm9kZSggdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSApOwoKCQlyZXR1cm4gewoJCQl0b3A6ICgKCQkJCXBvcy50b3AJKwkJCQkJCQkJCQkJCQkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24KCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAqIG1vZCArCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LnRvcCAqIG1vZCAtCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQkoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gImZpeGVkIiA/IC10aGlzLm9mZnNldC5zY3JvbGwudG9wIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC50b3AgKSApICogbW9kKQoJCQkpLAoJCQlsZWZ0OiAoCgkJCQlwb3MubGVmdCArCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAqIG1vZCArCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKiBtb2QJLQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJKCAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPyAtdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgOiAoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgKSApICogbW9kKQoJCQkpCgkJfTsKCgl9LAoKCV9nZW5lcmF0ZVBvc2l0aW9uOiBmdW5jdGlvbiggZXZlbnQsIGNvbnN0cmFpblBvc2l0aW9uICkgewoKCQl2YXIgY29udGFpbm1lbnQsIGNvLCB0b3AsIGxlZnQsCgkJCW8gPSB0aGlzLm9wdGlvbnMsCgkJCXNjcm9sbElzUm9vdE5vZGUgPSB0aGlzLl9pc1Jvb3ROb2RlKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICksCgkJCXBhZ2VYID0gZXZlbnQucGFnZVgsCgkJCXBhZ2VZID0gZXZlbnQucGFnZVk7CgoJCS8vIENhY2hlIHRoZSBzY3JvbGwKCQlpZiAoICFzY3JvbGxJc1Jvb3ROb2RlIHx8ICF0aGlzLm9mZnNldC5zY3JvbGwgKSB7CgkJCXRoaXMub2Zmc2V0LnNjcm9sbCA9IHsKCQkJCXRvcDogdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksCgkJCQlsZWZ0OiB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkKCQkJfTsKCQl9CgoJCS8qCgkJICogLSBQb3NpdGlvbiBjb25zdHJhaW5pbmcgLQoJCSAqIENvbnN0cmFpbiB0aGUgcG9zaXRpb24gdG8gYSBtaXggb2YgZ3JpZCwgY29udGFpbm1lbnQuCgkJICovCgoJCS8vIElmIHdlIGFyZSBub3QgZHJhZ2dpbmcgeWV0LCB3ZSB3b24ndCBjaGVjayBmb3Igb3B0aW9ucwoJCWlmICggY29uc3RyYWluUG9zaXRpb24gKSB7CgkJCWlmICggdGhpcy5jb250YWlubWVudCApIHsKCQkJCWlmICggdGhpcy5yZWxhdGl2ZUNvbnRhaW5lciApewoJCQkJCWNvID0gdGhpcy5yZWxhdGl2ZUNvbnRhaW5lci5vZmZzZXQoKTsKCQkJCQljb250YWlubWVudCA9IFsKCQkJCQkJdGhpcy5jb250YWlubWVudFsgMCBdICsgY28ubGVmdCwKCQkJCQkJdGhpcy5jb250YWlubWVudFsgMSBdICsgY28udG9wLAoJCQkJCQl0aGlzLmNvbnRhaW5tZW50WyAyIF0gKyBjby5sZWZ0LAoJCQkJCQl0aGlzLmNvbnRhaW5tZW50WyAzIF0gKyBjby50b3AKCQkJCQldOwoJCQkJfSBlbHNlIHsKCQkJCQljb250YWlubWVudCA9IHRoaXMuY29udGFpbm1lbnQ7CgkJCQl9CgoJCQkJaWYgKGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IGNvbnRhaW5tZW50WzBdKSB7CgkJCQkJcGFnZVggPSBjb250YWlubWVudFswXSArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7CgkJCQl9CgkJCQlpZiAoZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCBjb250YWlubWVudFsxXSkgewoJCQkJCXBhZ2VZID0gY29udGFpbm1lbnRbMV0gKyB0aGlzLm9mZnNldC5jbGljay50b3A7CgkJCQl9CgkJCQlpZiAoZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gY29udGFpbm1lbnRbMl0pIHsKCQkJCQlwYWdlWCA9IGNvbnRhaW5tZW50WzJdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDsKCQkJCX0KCQkJCWlmIChldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WzNdKSB7CgkJCQkJcGFnZVkgPSBjb250YWlubWVudFszXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDsKCQkJCX0KCQkJfQoKCQkJaWYgKG8uZ3JpZCkgewoJCQkJLy9DaGVjayBmb3IgZ3JpZCBlbGVtZW50cyBzZXQgdG8gMCB0byBwcmV2ZW50IGRpdmlkZSBieSAwIGVycm9yIGNhdXNpbmcgaW52YWxpZCBhcmd1bWVudCBlcnJvcnMgaW4gSUUgKHNlZSB0aWNrZXQgIzY5NTApCgkJCQl0b3AgPSBvLmdyaWRbMV0gPyB0aGlzLm9yaWdpbmFsUGFnZVkgKyBNYXRoLnJvdW5kKChwYWdlWSAtIHRoaXMub3JpZ2luYWxQYWdlWSkgLyBvLmdyaWRbMV0pICogby5ncmlkWzFdIDogdGhpcy5vcmlnaW5hbFBhZ2VZOwoJCQkJcGFnZVkgPSBjb250YWlubWVudCA/ICgodG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IGNvbnRhaW5tZW50WzFdIHx8IHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WzNdKSA/IHRvcCA6ICgodG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IGNvbnRhaW5tZW50WzFdKSA/IHRvcCAtIG8uZ3JpZFsxXSA6IHRvcCArIG8uZ3JpZFsxXSkpIDogdG9wOwoKCQkJCWxlZnQgPSBvLmdyaWRbMF0gPyB0aGlzLm9yaWdpbmFsUGFnZVggKyBNYXRoLnJvdW5kKChwYWdlWCAtIHRoaXMub3JpZ2luYWxQYWdlWCkgLyBvLmdyaWRbMF0pICogby5ncmlkWzBdIDogdGhpcy5vcmlnaW5hbFBhZ2VYOwoJCQkJcGFnZVggPSBjb250YWlubWVudCA/ICgobGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gY29udGFpbm1lbnRbMF0gfHwgbGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiBjb250YWlubWVudFsyXSkgPyBsZWZ0IDogKChsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+PSBjb250YWlubWVudFswXSkgPyBsZWZ0IC0gby5ncmlkWzBdIDogbGVmdCArIG8uZ3JpZFswXSkpIDogbGVmdDsKCQkJfQoKCQkJaWYgKCBvLmF4aXMgPT09ICJ5IiApIHsKCQkJCXBhZ2VYID0gdGhpcy5vcmlnaW5hbFBhZ2VYOwoJCQl9CgoJCQlpZiAoIG8uYXhpcyA9PT0gIngiICkgewoJCQkJcGFnZVkgPSB0aGlzLm9yaWdpbmFsUGFnZVk7CgkJCX0KCQl9CgoJCXJldHVybiB7CgkJCXRvcDogKAoJCQkJcGFnZVkgLQkJCQkJCQkJCQkJCQkJCQkJLy8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uCgkJCQl0aGlzLm9mZnNldC5jbGljay50b3AJLQkJCQkJCQkJCQkJCS8vIENsaWNrIG9mZnNldCAocmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQpCgkJCQl0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgLQkJCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LnRvcCArCQkJCQkJCQkJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikKCQkJCSggdGhpcy5jc3NQb3NpdGlvbiA9PT0gImZpeGVkIiA/IC10aGlzLm9mZnNldC5zY3JvbGwudG9wIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHRoaXMub2Zmc2V0LnNjcm9sbC50b3AgKSApCgkJCSksCgkJCWxlZnQ6ICgKCQkJCXBhZ2VYIC0JCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCAtCQkJCQkJCQkJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkKCQkJCXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgLQkJCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKwkJCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQkoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPyAtdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgOiAoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQgKSApCgkJCSkKCQl9OwoKCX0sCgoJX2NsZWFyOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhlbHBlci5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7CgkJaWYgKHRoaXMuaGVscGVyWzBdICE9PSB0aGlzLmVsZW1lbnRbMF0gJiYgIXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCkgewoJCQl0aGlzLmhlbHBlci5yZW1vdmUoKTsKCQl9CgkJdGhpcy5oZWxwZXIgPSBudWxsOwoJCXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IGZhbHNlOwoJCWlmICggdGhpcy5kZXN0cm95T25DbGVhciApIHsKCQkJdGhpcy5kZXN0cm95KCk7CgkJfQoJfSwKCgkvLyBGcm9tIG5vdyBvbiBidWxrIHN0dWZmIC0gbWFpbmx5IGhlbHBlcnMKCglfdHJpZ2dlcjogZnVuY3Rpb24odHlwZSwgZXZlbnQsIHVpKSB7CgkJdWkgPSB1aSB8fCB0aGlzLl91aUhhc2goKTsKCQkkLnVpLnBsdWdpbi5jYWxsKCB0aGlzLCB0eXBlLCBbIGV2ZW50LCB1aSwgdGhpcyBdLCB0cnVlICk7CgkJLy9UaGUgYWJzb2x1dGUgcG9zaXRpb24gaGFzIHRvIGJlIHJlY2FsY3VsYXRlZCBhZnRlciBwbHVnaW5zCgkJaWYgKHR5cGUgPT09ICJkcmFnIikgewoJCQl0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7CgkJfQoJCXJldHVybiAkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuY2FsbCh0aGlzLCB0eXBlLCBldmVudCwgdWkpOwoJfSwKCglwbHVnaW5zOiB7fSwKCglfdWlIYXNoOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gewoJCQloZWxwZXI6IHRoaXMuaGVscGVyLAoJCQlwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwKCQkJb3JpZ2luYWxQb3NpdGlvbjogdGhpcy5vcmlnaW5hbFBvc2l0aW9uLAoJCQlvZmZzZXQ6IHRoaXMucG9zaXRpb25BYnMKCQl9OwoJfQoKfSk7CgokLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsICJjb25uZWN0VG9Tb3J0YWJsZSIsIHsKCXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0ICkgewoKCQl2YXIgbyA9IGluc3Qub3B0aW9ucywKCQkJdWlTb3J0YWJsZSA9ICQuZXh0ZW5kKHt9LCB1aSwgeyBpdGVtOiBpbnN0LmVsZW1lbnQgfSk7CgkJaW5zdC5zb3J0YWJsZXMgPSBbXTsKCQkkKG8uY29ubmVjdFRvU29ydGFibGUpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBzb3J0YWJsZSA9ICQoIHRoaXMgKS5zb3J0YWJsZSggImluc3RhbmNlIiApOwoJCQlpZiAoc29ydGFibGUgJiYgIXNvcnRhYmxlLm9wdGlvbnMuZGlzYWJsZWQpIHsKCQkJCWluc3Quc29ydGFibGVzLnB1c2goewoJCQkJCWluc3RhbmNlOiBzb3J0YWJsZSwKCQkJCQlzaG91bGRSZXZlcnQ6IHNvcnRhYmxlLm9wdGlvbnMucmV2ZXJ0CgkJCQl9KTsKCQkJCXNvcnRhYmxlLnJlZnJlc2hQb3NpdGlvbnMoKTsJLy8gQ2FsbCB0aGUgc29ydGFibGUncyByZWZyZXNoUG9zaXRpb25zIGF0IGRyYWcgc3RhcnQgdG8gcmVmcmVzaCB0aGUgY29udGFpbmVyQ2FjaGUgc2luY2UgdGhlIHNvcnRhYmxlIGNvbnRhaW5lciBjYWNoZSBpcyB1c2VkIGluIGRyYWcgYW5kIG5lZWRzIHRvIGJlIHVwIHRvIGRhdGUgKHRoaXMgd2lsbCBlbnN1cmUgaXQncyBpbml0aWFsaXNlZCBhcyB3ZWxsIGFzIGJlaW5nIGtlcHQgaW4gc3RlcCB3aXRoIGFueSBjaGFuZ2VzIHRoYXQgbWlnaHQgaGF2ZSBoYXBwZW5lZCBvbiB0aGUgcGFnZSkuCgkJCQlzb3J0YWJsZS5fdHJpZ2dlcigiYWN0aXZhdGUiLCBldmVudCwgdWlTb3J0YWJsZSk7CgkJCX0KCQl9KTsKCgl9LAoJc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdCApIHsKCgkJLy9JZiB3ZSBhcmUgc3RpbGwgb3ZlciB0aGUgc29ydGFibGUsIHdlIGZha2UgdGhlIHN0b3AgZXZlbnQgb2YgdGhlIHNvcnRhYmxlLCBidXQgYWxzbyByZW1vdmUgaGVscGVyCgkJdmFyIHVpU29ydGFibGUgPSAkLmV4dGVuZCgge30sIHVpLCB7CgkJCWl0ZW06IGluc3QuZWxlbWVudAoJCX0pOwoKCQkkLmVhY2goaW5zdC5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkgewoJCQlpZiAodGhpcy5pbnN0YW5jZS5pc092ZXIpIHsKCgkJCQl0aGlzLmluc3RhbmNlLmlzT3ZlciA9IDA7CgoJCQkJaW5zdC5jYW5jZWxIZWxwZXJSZW1vdmFsID0gdHJ1ZTsgLy9Eb24ndCByZW1vdmUgdGhlIGhlbHBlciBpbiB0aGUgZHJhZ2dhYmxlIGluc3RhbmNlCgkJCQl0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWwgPSBmYWxzZTsgLy9SZW1vdmUgaXQgaW4gdGhlIHNvcnRhYmxlIGluc3RhbmNlIChzbyBzb3J0YWJsZSBwbHVnaW5zIGxpa2UgcmV2ZXJ0IHN0aWxsIHdvcmspCgoJCQkJLy9UaGUgc29ydGFibGUgcmV2ZXJ0IGlzIHN1cHBvcnRlZCwgYW5kIHdlIGhhdmUgdG8gc2V0IGEgdGVtcG9yYXJ5IGRyb3BwZWQgdmFyaWFibGUgb24gdGhlIGRyYWdnYWJsZSB0byBzdXBwb3J0IHJldmVydDogInZhbGlkL2ludmFsaWQiCgkJCQlpZiAodGhpcy5zaG91bGRSZXZlcnQpIHsKCQkJCQl0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0ID0gdGhpcy5zaG91bGRSZXZlcnQ7CgkJCQl9CgoJCQkJLy9UcmlnZ2VyIHRoZSBzdG9wIG9mIHRoZSBzb3J0YWJsZQoJCQkJdGhpcy5pbnN0YW5jZS5fbW91c2VTdG9wKGV2ZW50KTsKCgkJCQl0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyID0gdGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXI7CgoJCQkJLy9JZiB0aGUgaGVscGVyIGhhcyBiZWVuIHRoZSBvcmlnaW5hbCBpdGVtLCByZXN0b3JlIHByb3BlcnRpZXMgaW4gdGhlIHNvcnRhYmxlCgkJCQlpZiAoaW5zdC5vcHRpb25zLmhlbHBlciA9PT0gIm9yaWdpbmFsIikgewoJCQkJCXRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0uY3NzKHsgdG9wOiAiYXV0byIsIGxlZnQ6ICJhdXRvIiB9KTsKCQkJCX0KCgkJCX0gZWxzZSB7CgkJCQl0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWwgPSBmYWxzZTsgLy9SZW1vdmUgdGhlIGhlbHBlciBpbiB0aGUgc29ydGFibGUgaW5zdGFuY2UKCQkJCXRoaXMuaW5zdGFuY2UuX3RyaWdnZXIoImRlYWN0aXZhdGUiLCBldmVudCwgdWlTb3J0YWJsZSk7CgkJCX0KCgkJfSk7CgoJfSwKCWRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3QgKSB7CgoJCXZhciB0aGF0ID0gdGhpczsKCgkJJC5lYWNoKGluc3Quc29ydGFibGVzLCBmdW5jdGlvbigpIHsKCgkJCXZhciBpbm5lcm1vc3RJbnRlcnNlY3RpbmcgPSBmYWxzZSwKCQkJCXRoaXNTb3J0YWJsZSA9IHRoaXM7CgoJCQkvL0NvcHkgb3ZlciBzb21lIHZhcmlhYmxlcyB0byBhbGxvdyBjYWxsaW5nIHRoZSBzb3J0YWJsZSdzIG5hdGl2ZSBfaW50ZXJzZWN0c1dpdGgKCQkJdGhpcy5pbnN0YW5jZS5wb3NpdGlvbkFicyA9IGluc3QucG9zaXRpb25BYnM7CgkJCXRoaXMuaW5zdGFuY2UuaGVscGVyUHJvcG9ydGlvbnMgPSBpbnN0LmhlbHBlclByb3BvcnRpb25zOwoJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljayA9IGluc3Qub2Zmc2V0LmNsaWNrOwoKCQkJaWYgKHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpKSB7CgkJCQlpbm5lcm1vc3RJbnRlcnNlY3RpbmcgPSB0cnVlOwoJCQkJJC5lYWNoKGluc3Quc29ydGFibGVzLCBmdW5jdGlvbigpIHsKCQkJCQl0aGlzLmluc3RhbmNlLnBvc2l0aW9uQWJzID0gaW5zdC5wb3NpdGlvbkFiczsKCQkJCQl0aGlzLmluc3RhbmNlLmhlbHBlclByb3BvcnRpb25zID0gaW5zdC5oZWxwZXJQcm9wb3J0aW9uczsKCQkJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljayA9IGluc3Qub2Zmc2V0LmNsaWNrOwoJCQkJCWlmICh0aGlzICE9PSB0aGlzU29ydGFibGUgJiYKCQkJCQkJdGhpcy5pbnN0YW5jZS5faW50ZXJzZWN0c1dpdGgodGhpcy5pbnN0YW5jZS5jb250YWluZXJDYWNoZSkgJiYKCQkJCQkJJC5jb250YWlucyh0aGlzU29ydGFibGUuaW5zdGFuY2UuZWxlbWVudFswXSwgdGhpcy5pbnN0YW5jZS5lbGVtZW50WzBdKQoJCQkJCSkgewoJCQkJCQlpbm5lcm1vc3RJbnRlcnNlY3RpbmcgPSBmYWxzZTsKCQkJCQl9CgkJCQkJcmV0dXJuIGlubmVybW9zdEludGVyc2VjdGluZzsKCQkJCX0pOwoJCQl9CgoJCQlpZiAoaW5uZXJtb3N0SW50ZXJzZWN0aW5nKSB7CgkJCQkvL0lmIGl0IGludGVyc2VjdHMsIHdlIHVzZSBhIGxpdHRsZSBpc092ZXIgdmFyaWFibGUgYW5kIHNldCBpdCBvbmNlLCBzbyBvdXIgbW92ZS1pbiBzdHVmZiBnZXRzIGZpcmVkIG9ubHkgb25jZQoJCQkJaWYgKCF0aGlzLmluc3RhbmNlLmlzT3ZlcikgewoKCQkJCQl0aGlzLmluc3RhbmNlLmlzT3ZlciA9IDE7CgkJCQkJLy9Ob3cgd2UgZmFrZSB0aGUgc3RhcnQgb2YgZHJhZ2dpbmcgZm9yIHRoZSBzb3J0YWJsZSBpbnN0YW5jZSwKCQkJCQkvL2J5IGNsb25pbmcgdGhlIGxpc3QgZ3JvdXAgaXRlbSwgYXBwZW5kaW5nIGl0IHRvIHRoZSBzb3J0YWJsZSBhbmQgdXNpbmcgaXQgYXMgaW5zdC5jdXJyZW50SXRlbQoJCQkJCS8vV2UgY2FuIHRoZW4gZmlyZSB0aGUgc3RhcnQgZXZlbnQgb2YgdGhlIHNvcnRhYmxlIHdpdGggb3VyIHBhc3NlZCBicm93c2VyIGV2ZW50LCBhbmQgb3VyIG93biBoZWxwZXIgKHNvIGl0IGRvZXNuJ3QgY3JlYXRlIGEgbmV3IG9uZSkKCQkJCQl0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtID0gJCh0aGF0KS5jbG9uZSgpLnJlbW92ZUF0dHIoImlkIikuYXBwZW5kVG8odGhpcy5pbnN0YW5jZS5lbGVtZW50KS5kYXRhKCJ1aS1zb3J0YWJsZS1pdGVtIiwgdHJ1ZSk7CgkJCQkJdGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXIgPSB0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyOyAvL1N0b3JlIGhlbHBlciBvcHRpb24gdG8gbGF0ZXIgcmVzdG9yZSBpdAoJCQkJCXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHVpLmhlbHBlclswXTsgfTsKCgkJCQkJZXZlbnQudGFyZ2V0ID0gdGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbVswXTsKCQkJCQl0aGlzLmluc3RhbmNlLl9tb3VzZUNhcHR1cmUoZXZlbnQsIHRydWUpOwoJCQkJCXRoaXMuaW5zdGFuY2UuX21vdXNlU3RhcnQoZXZlbnQsIHRydWUsIHRydWUpOwoKCQkJCQkvL0JlY2F1c2UgdGhlIGJyb3dzZXIgZXZlbnQgaXMgd2F5IG9mZiB0aGUgbmV3IGFwcGVuZGVkIHBvcnRsZXQsIHdlIG1vZGlmeSBhIGNvdXBsZSBvZiB2YXJpYWJsZXMgdG8gcmVmbGVjdCB0aGUgY2hhbmdlcwoJCQkJCXRoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrLnRvcCA9IGluc3Qub2Zmc2V0LmNsaWNrLnRvcDsKCQkJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljay5sZWZ0ID0gaW5zdC5vZmZzZXQuY2xpY2subGVmdDsKCQkJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQubGVmdCAtPSBpbnN0Lm9mZnNldC5wYXJlbnQubGVmdCAtIHRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC5sZWZ0OwoJCQkJCXRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC50b3AgLT0gaW5zdC5vZmZzZXQucGFyZW50LnRvcCAtIHRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC50b3A7CgoJCQkJCWluc3QuX3RyaWdnZXIoInRvU29ydGFibGUiLCBldmVudCk7CgkJCQkJaW5zdC5kcm9wcGVkID0gdGhpcy5pbnN0YW5jZS5lbGVtZW50OyAvL2RyYWdnYWJsZSByZXZlcnQgbmVlZHMgdGhhdAoJCQkJCS8vaGFjayBzbyByZWNlaXZlL3VwZGF0ZSBjYWxsYmFja3Mgd29yayAobW9zdGx5KQoJCQkJCWluc3QuY3VycmVudEl0ZW0gPSBpbnN0LmVsZW1lbnQ7CgkJCQkJdGhpcy5pbnN0YW5jZS5mcm9tT3V0c2lkZSA9IGluc3Q7CgoJCQkJfQoKCQkJCS8vUHJvdmlkZWQgd2UgZGlkIGFsbCB0aGUgcHJldmlvdXMgc3RlcHMsIHdlIGNhbiBmaXJlIHRoZSBkcmFnIGV2ZW50IG9mIHRoZSBzb3J0YWJsZSBvbiBldmVyeSBkcmFnZ2FibGUgZHJhZywgd2hlbiBpdCBpbnRlcnNlY3RzIHdpdGggdGhlIHNvcnRhYmxlCgkJCQlpZiAodGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbSkgewoJCQkJCXRoaXMuaW5zdGFuY2UuX21vdXNlRHJhZyhldmVudCk7CgkJCQl9CgoJCQl9IGVsc2UgewoKCQkJCS8vSWYgaXQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCB0aGUgc29ydGFibGUsIGFuZCBpdCBpbnRlcnNlY3RlZCBiZWZvcmUsCgkJCQkvL3dlIGZha2UgdGhlIGRyYWcgc3RvcCBvZiB0aGUgc29ydGFibGUsIGJ1dCBtYWtlIHN1cmUgaXQgZG9lc24ndCByZW1vdmUgdGhlIGhlbHBlciBieSB1c2luZyBjYW5jZWxIZWxwZXJSZW1vdmFsCgkJCQlpZiAodGhpcy5pbnN0YW5jZS5pc092ZXIpIHsKCgkJCQkJdGhpcy5pbnN0YW5jZS5pc092ZXIgPSAwOwoJCQkJCXRoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IHRydWU7CgoJCQkJCS8vUHJldmVudCByZXZlcnRpbmcgb24gdGhpcyBmb3JjZWQgc3RvcAoJCQkJCXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5yZXZlcnQgPSBmYWxzZTsKCgkJCQkJLy8gVGhlIG91dCBldmVudCBuZWVkcyB0byBiZSB0cmlnZ2VyZWQgaW5kZXBlbmRlbnRseQoJCQkJCXRoaXMuaW5zdGFuY2UuX3RyaWdnZXIoIm91dCIsIGV2ZW50LCB0aGlzLmluc3RhbmNlLl91aUhhc2godGhpcy5pbnN0YW5jZSkpOwoKCQkJCQl0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AoZXZlbnQsIHRydWUpOwoJCQkJCXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXIgPSB0aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcjsKCgkJCQkJLy9Ob3cgd2UgcmVtb3ZlIG91ciBjdXJyZW50SXRlbSwgdGhlIGxpc3QgZ3JvdXAgY2xvbmUgYWdhaW4sIGFuZCB0aGUgcGxhY2Vob2xkZXIsIGFuZCBhbmltYXRlIHRoZSBoZWxwZXIgYmFjayB0byBpdCdzIG9yaWdpbmFsIHNpemUKCQkJCQl0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtLnJlbW92ZSgpOwoJCQkJCWlmICh0aGlzLmluc3RhbmNlLnBsYWNlaG9sZGVyKSB7CgkJCQkJCXRoaXMuaW5zdGFuY2UucGxhY2Vob2xkZXIucmVtb3ZlKCk7CgkJCQkJfQoKCQkJCQlpbnN0Ll90cmlnZ2VyKCJmcm9tU29ydGFibGUiLCBldmVudCk7CgkJCQkJaW5zdC5kcm9wcGVkID0gZmFsc2U7IC8vZHJhZ2dhYmxlIHJldmVydCBuZWVkcyB0aGF0CgkJCQl9CgoJCQl9CgoJCX0pOwoKCX0KfSk7CgokLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsICJjdXJzb3IiLCB7CglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7CgkJdmFyIHQgPSAkKCAiYm9keSIgKSwKCQkJbyA9IGluc3RhbmNlLm9wdGlvbnM7CgoJCWlmICh0LmNzcygiY3Vyc29yIikpIHsKCQkJby5fY3Vyc29yID0gdC5jc3MoImN1cnNvciIpOwoJCX0KCQl0LmNzcygiY3Vyc29yIiwgby5jdXJzb3IpOwoJfSwKCXN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3RhbmNlICkgewoJCXZhciBvID0gaW5zdGFuY2Uub3B0aW9uczsKCQlpZiAoby5fY3Vyc29yKSB7CgkJCSQoImJvZHkiKS5jc3MoImN1cnNvciIsIG8uX2N1cnNvcik7CgkJfQoJfQp9KTsKCiQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwgIm9wYWNpdHkiLCB7CglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7CgkJdmFyIHQgPSAkKCB1aS5oZWxwZXIgKSwKCQkJbyA9IGluc3RhbmNlLm9wdGlvbnM7CgkJaWYgKHQuY3NzKCJvcGFjaXR5IikpIHsKCQkJby5fb3BhY2l0eSA9IHQuY3NzKCJvcGFjaXR5Iik7CgkJfQoJCXQuY3NzKCJvcGFjaXR5Iiwgby5vcGFjaXR5KTsKCX0sCglzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpbnN0YW5jZSApIHsKCQl2YXIgbyA9IGluc3RhbmNlLm9wdGlvbnM7CgkJaWYgKG8uX29wYWNpdHkpIHsKCQkJJCh1aS5oZWxwZXIpLmNzcygib3BhY2l0eSIsIG8uX29wYWNpdHkpOwoJCX0KCX0KfSk7CgokLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsICJzY3JvbGwiLCB7CglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaSApIHsKCQlpZiAoICFpLnNjcm9sbFBhcmVudE5vdEhpZGRlbiApIHsKCQkJaS5zY3JvbGxQYXJlbnROb3RIaWRkZW4gPSBpLmhlbHBlci5zY3JvbGxQYXJlbnQoIGZhbHNlICk7CgkJfQoKCQlpZiAoIGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWyAwIF0gIT09IGkuZG9jdW1lbnRbIDAgXSAmJiBpLnNjcm9sbFBhcmVudE5vdEhpZGRlblsgMCBdLnRhZ05hbWUgIT09ICJIVE1MIiApIHsKCQkJaS5vdmVyZmxvd09mZnNldCA9IGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuLm9mZnNldCgpOwoJCX0KCX0sCglkcmFnOiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpICApIHsKCgkJdmFyIG8gPSBpLm9wdGlvbnMsCgkJCXNjcm9sbGVkID0gZmFsc2UsCgkJCXNjcm9sbFBhcmVudCA9IGkuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWyAwIF0sCgkJCWRvY3VtZW50ID0gaS5kb2N1bWVudFsgMCBdOwoKCQlpZiAoIHNjcm9sbFBhcmVudCAhPT0gZG9jdW1lbnQgJiYgc2Nyb2xsUGFyZW50LnRhZ05hbWUgIT09ICJIVE1MIiApIHsKCQkJaWYgKCAhby5heGlzIHx8IG8uYXhpcyAhPT0gIngiICkgewoJCQkJaWYgKCAoIGkub3ZlcmZsb3dPZmZzZXQudG9wICsgc2Nyb2xsUGFyZW50Lm9mZnNldEhlaWdodCApIC0gZXZlbnQucGFnZVkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkgewoJCQkJCXNjcm9sbFBhcmVudC5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHNjcm9sbFBhcmVudC5zY3JvbGxUb3AgKyBvLnNjcm9sbFNwZWVkOwoJCQkJfSBlbHNlIGlmICggZXZlbnQucGFnZVkgLSBpLm92ZXJmbG93T2Zmc2V0LnRvcCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7CgkJCQkJc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCA9IHNjcm9sbGVkID0gc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQ7CgkJCQl9CgkJCX0KCgkJCWlmICggIW8uYXhpcyB8fCBvLmF4aXMgIT09ICJ5IiApIHsKCQkJCWlmICggKCBpLm92ZXJmbG93T2Zmc2V0LmxlZnQgKyBzY3JvbGxQYXJlbnQub2Zmc2V0V2lkdGggKSAtIGV2ZW50LnBhZ2VYIDwgby5zY3JvbGxTZW5zaXRpdml0eSApIHsKCQkJCQlzY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID0gc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQgKyBvLnNjcm9sbFNwZWVkOwoJCQkJfSBlbHNlIGlmICggZXZlbnQucGFnZVggLSBpLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkgewoJCQkJCXNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCAtIG8uc2Nyb2xsU3BlZWQ7CgkJCQl9CgkJCX0KCgkJfSBlbHNlIHsKCgkJCWlmICghby5heGlzIHx8IG8uYXhpcyAhPT0gIngiKSB7CgkJCQlpZiAoZXZlbnQucGFnZVkgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQpOwoJCQkJfSBlbHNlIGlmICgkKHdpbmRvdykuaGVpZ2h0KCkgLSAoZXZlbnQucGFnZVkgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7CgkJCQkJc2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkKTsKCQkJCX0KCQkJfQoKCQkJaWYgKCFvLmF4aXMgfHwgby5heGlzICE9PSAieSIpIHsKCQkJCWlmIChldmVudC5wYWdlWCAtICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpIC0gby5zY3JvbGxTcGVlZCk7CgkJCQl9IGVsc2UgaWYgKCQod2luZG93KS53aWR0aCgpIC0gKGV2ZW50LnBhZ2VYIC0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZCk7CgkJCQl9CgkJCX0KCgkJfQoKCQlpZiAoc2Nyb2xsZWQgIT09IGZhbHNlICYmICQudWkuZGRtYW5hZ2VyICYmICFvLmRyb3BCZWhhdmlvdXIpIHsKCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoaSwgZXZlbnQpOwoJCX0KCgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAic25hcCIsIHsKCXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpLCBpICkgewoKCQl2YXIgbyA9IGkub3B0aW9uczsKCgkJaS5zbmFwRWxlbWVudHMgPSBbXTsKCgkJJChvLnNuYXAuY29uc3RydWN0b3IgIT09IFN0cmluZyA/ICggby5zbmFwLml0ZW1zIHx8ICI6ZGF0YSh1aS1kcmFnZ2FibGUpIiApIDogby5zbmFwKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgJHQgPSAkKHRoaXMpLAoJCQkJJG8gPSAkdC5vZmZzZXQoKTsKCQkJaWYgKHRoaXMgIT09IGkuZWxlbWVudFswXSkgewoJCQkJaS5zbmFwRWxlbWVudHMucHVzaCh7CgkJCQkJaXRlbTogdGhpcywKCQkJCQl3aWR0aDogJHQub3V0ZXJXaWR0aCgpLCBoZWlnaHQ6ICR0Lm91dGVySGVpZ2h0KCksCgkJCQkJdG9wOiAkby50b3AsIGxlZnQ6ICRvLmxlZnQKCQkJCX0pOwoJCQl9CgkJfSk7CgoJfSwKCWRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3QgKSB7CgoJCXZhciB0cywgYnMsIGxzLCBycywgbCwgciwgdCwgYiwgaSwgZmlyc3QsCgkJCW8gPSBpbnN0Lm9wdGlvbnMsCgkJCWQgPSBvLnNuYXBUb2xlcmFuY2UsCgkJCXgxID0gdWkub2Zmc2V0LmxlZnQsIHgyID0geDEgKyBpbnN0LmhlbHBlclByb3BvcnRpb25zLndpZHRoLAoJCQl5MSA9IHVpLm9mZnNldC50b3AsIHkyID0geTEgKyBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodDsKCgkJZm9yIChpID0gaW5zdC5zbmFwRWxlbWVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoKCQkJbCA9IGluc3Quc25hcEVsZW1lbnRzW2ldLmxlZnQ7CgkJCXIgPSBsICsgaW5zdC5zbmFwRWxlbWVudHNbaV0ud2lkdGg7CgkJCXQgPSBpbnN0LnNuYXBFbGVtZW50c1tpXS50b3A7CgkJCWIgPSB0ICsgaW5zdC5zbmFwRWxlbWVudHNbaV0uaGVpZ2h0OwoKCQkJaWYgKCB4MiA8IGwgLSBkIHx8IHgxID4gciArIGQgfHwgeTIgPCB0IC0gZCB8fCB5MSA+IGIgKyBkIHx8ICEkLmNvbnRhaW5zKCBpbnN0LnNuYXBFbGVtZW50c1sgaSBdLml0ZW0ub3duZXJEb2N1bWVudCwgaW5zdC5zbmFwRWxlbWVudHNbIGkgXS5pdGVtICkgKSB7CgkJCQlpZiAoaW5zdC5zbmFwRWxlbWVudHNbaV0uc25hcHBpbmcpIHsKCQkJCQkoaW5zdC5vcHRpb25zLnNuYXAucmVsZWFzZSAmJiBpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoaW5zdC5lbGVtZW50LCBldmVudCwgJC5leHRlbmQoaW5zdC5fdWlIYXNoKCksIHsgc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0gfSkpKTsKCQkJCX0KCQkJCWluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nID0gZmFsc2U7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJaWYgKG8uc25hcE1vZGUgIT09ICJpbm5lciIpIHsKCQkJCXRzID0gTWF0aC5hYnModCAtIHkyKSA8PSBkOwoJCQkJYnMgPSBNYXRoLmFicyhiIC0geTEpIDw9IGQ7CgkJCQlscyA9IE1hdGguYWJzKGwgLSB4MikgPD0gZDsKCQkJCXJzID0gTWF0aC5hYnMociAtIHgxKSA8PSBkOwoJCQkJaWYgKHRzKSB7CgkJCQkJdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IHQgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwgbGVmdDogMCB9KS50b3AgLSBpbnN0Lm1hcmdpbnMudG9wOwoJCQkJfQoJCQkJaWYgKGJzKSB7CgkJCQkJdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IGIsIGxlZnQ6IDAgfSkudG9wIC0gaW5zdC5tYXJnaW5zLnRvcDsKCQkJCX0KCQkJCWlmIChscykgewoJCQkJCXVpLnBvc2l0aW9uLmxlZnQgPSBpbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLCB7IHRvcDogMCwgbGVmdDogbCAtIGluc3QuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggfSkubGVmdCAtIGluc3QubWFyZ2lucy5sZWZ0OwoJCQkJfQoJCQkJaWYgKHJzKSB7CgkJCQkJdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiAwLCBsZWZ0OiByIH0pLmxlZnQgLSBpbnN0Lm1hcmdpbnMubGVmdDsKCQkJCX0KCQkJfQoKCQkJZmlyc3QgPSAodHMgfHwgYnMgfHwgbHMgfHwgcnMpOwoKCQkJaWYgKG8uc25hcE1vZGUgIT09ICJvdXRlciIpIHsKCQkJCXRzID0gTWF0aC5hYnModCAtIHkxKSA8PSBkOwoJCQkJYnMgPSBNYXRoLmFicyhiIC0geTIpIDw9IGQ7CgkJCQlscyA9IE1hdGguYWJzKGwgLSB4MSkgPD0gZDsKCQkJCXJzID0gTWF0aC5hYnMociAtIHgyKSA8PSBkOwoJCQkJaWYgKHRzKSB7CgkJCQkJdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IHQsIGxlZnQ6IDAgfSkudG9wIC0gaW5zdC5tYXJnaW5zLnRvcDsKCQkJCX0KCQkJCWlmIChicykgewoJCQkJCXVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiBiIC0gaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsIGxlZnQ6IDAgfSkudG9wIC0gaW5zdC5tYXJnaW5zLnRvcDsKCQkJCX0KCQkJCWlmIChscykgewoJCQkJCXVpLnBvc2l0aW9uLmxlZnQgPSBpbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLCB7IHRvcDogMCwgbGVmdDogbCB9KS5sZWZ0IC0gaW5zdC5tYXJnaW5zLmxlZnQ7CgkJCQl9CgkJCQlpZiAocnMpIHsKCQkJCQl1aS5wb3NpdGlvbi5sZWZ0ID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IDAsIGxlZnQ6IHIgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLndpZHRoIH0pLmxlZnQgLSBpbnN0Lm1hcmdpbnMubGVmdDsKCQkJCX0KCQkJfQoKCQkJaWYgKCFpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyAmJiAodHMgfHwgYnMgfHwgbHMgfHwgcnMgfHwgZmlyc3QpKSB7CgkJCQkoaW5zdC5vcHRpb25zLnNuYXAuc25hcCAmJiBpbnN0Lm9wdGlvbnMuc25hcC5zbmFwLmNhbGwoaW5zdC5lbGVtZW50LCBldmVudCwgJC5leHRlbmQoaW5zdC5fdWlIYXNoKCksIHsgc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0gfSkpKTsKCQkJfQoJCQlpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyA9ICh0cyB8fCBicyB8fCBscyB8fCBycyB8fCBmaXJzdCk7CgoJCX0KCgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAic3RhY2siLCB7CglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7CgkJdmFyIG1pbiwKCQkJbyA9IGluc3RhbmNlLm9wdGlvbnMsCgkJCWdyb3VwID0gJC5tYWtlQXJyYXkoJChvLnN0YWNrKSkuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJCQlyZXR1cm4gKHBhcnNlSW50KCQoYSkuY3NzKCJ6SW5kZXgiKSwgMTApIHx8IDApIC0gKHBhcnNlSW50KCQoYikuY3NzKCJ6SW5kZXgiKSwgMTApIHx8IDApOwoJCQl9KTsKCgkJaWYgKCFncm91cC5sZW5ndGgpIHsgcmV0dXJuOyB9CgoJCW1pbiA9IHBhcnNlSW50KCQoZ3JvdXBbMF0pLmNzcygiekluZGV4IiksIDEwKSB8fCAwOwoJCSQoZ3JvdXApLmVhY2goZnVuY3Rpb24oaSkgewoJCQkkKHRoaXMpLmNzcygiekluZGV4IiwgbWluICsgaSk7CgkJfSk7CgkJdGhpcy5jc3MoInpJbmRleCIsIChtaW4gKyBncm91cC5sZW5ndGgpKTsKCX0KfSk7CgokLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsICJ6SW5kZXgiLCB7CglzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSwgaW5zdGFuY2UgKSB7CgkJdmFyIHQgPSAkKCB1aS5oZWxwZXIgKSwKCQkJbyA9IGluc3RhbmNlLm9wdGlvbnM7CgoJCWlmICh0LmNzcygiekluZGV4IikpIHsKCQkJby5fekluZGV4ID0gdC5jc3MoInpJbmRleCIpOwoJCX0KCQl0LmNzcygiekluZGV4Iiwgby56SW5kZXgpOwoJfSwKCXN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWksIGluc3RhbmNlICkgewoJCXZhciBvID0gaW5zdGFuY2Uub3B0aW9uczsKCgkJaWYgKG8uX3pJbmRleCkgewoJCQkkKHVpLmhlbHBlcikuY3NzKCJ6SW5kZXgiLCBvLl96SW5kZXgpOwoJCX0KCX0KfSk7Cgp2YXIgZHJhZ2dhYmxlID0gJC51aS5kcmFnZ2FibGU7CgoKLyohCiAqIGpRdWVyeSBVSSBSZXNpemFibGUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcmVzaXphYmxlLwogKi8KCgokLndpZGdldCgidWkucmVzaXphYmxlIiwgJC51aS5tb3VzZSwgewoJdmVyc2lvbjogIjEuMTEuMSIsCgl3aWRnZXRFdmVudFByZWZpeDogInJlc2l6ZSIsCglvcHRpb25zOiB7CgkJYWxzb1Jlc2l6ZTogZmFsc2UsCgkJYW5pbWF0ZTogZmFsc2UsCgkJYW5pbWF0ZUR1cmF0aW9uOiAic2xvdyIsCgkJYW5pbWF0ZUVhc2luZzogInN3aW5nIiwKCQlhc3BlY3RSYXRpbzogZmFsc2UsCgkJYXV0b0hpZGU6IGZhbHNlLAoJCWNvbnRhaW5tZW50OiBmYWxzZSwKCQlnaG9zdDogZmFsc2UsCgkJZ3JpZDogZmFsc2UsCgkJaGFuZGxlczogImUscyxzZSIsCgkJaGVscGVyOiBmYWxzZSwKCQltYXhIZWlnaHQ6IG51bGwsCgkJbWF4V2lkdGg6IG51bGwsCgkJbWluSGVpZ2h0OiAxMCwKCQltaW5XaWR0aDogMTAsCgkJLy8gU2VlICM3OTYwCgkJekluZGV4OiA5MCwKCgkJLy8gY2FsbGJhY2tzCgkJcmVzaXplOiBudWxsLAoJCXN0YXJ0OiBudWxsLAoJCXN0b3A6IG51bGwKCX0sCgoJX251bTogZnVuY3Rpb24oIHZhbHVlICkgewoJCXJldHVybiBwYXJzZUludCggdmFsdWUsIDEwICkgfHwgMDsKCX0sCgoJX2lzTnVtYmVyOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJcmV0dXJuICFpc05hTiggcGFyc2VJbnQoIHZhbHVlLCAxMCApICk7Cgl9LAoKCV9oYXNTY3JvbGw6IGZ1bmN0aW9uKCBlbCwgYSApIHsKCgkJaWYgKCAkKCBlbCApLmNzcyggIm92ZXJmbG93IiApID09PSAiaGlkZGVuIikgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQl2YXIgc2Nyb2xsID0gKCBhICYmIGEgPT09ICJsZWZ0IiApID8gInNjcm9sbExlZnQiIDogInNjcm9sbFRvcCIsCgkJCWhhcyA9IGZhbHNlOwoKCQlpZiAoIGVsWyBzY3JvbGwgXSA+IDAgKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCgkJLy8gVE9ETzogZGV0ZXJtaW5lIHdoaWNoIGNhc2VzIGFjdHVhbGx5IGNhdXNlIHRoaXMgdG8gaGFwcGVuCgkJLy8gaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIHRoZSBzY3JvbGwgc2V0LCBzZWUgaWYgaXQncyBwb3NzaWJsZSB0bwoJCS8vIHNldCB0aGUgc2Nyb2xsCgkJZWxbIHNjcm9sbCBdID0gMTsKCQloYXMgPSAoIGVsWyBzY3JvbGwgXSA+IDAgKTsKCQllbFsgc2Nyb2xsIF0gPSAwOwoJCXJldHVybiBoYXM7Cgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoKCQl2YXIgbiwgaSwgaGFuZGxlLCBheGlzLCBobmFtZSwKCQkJdGhhdCA9IHRoaXMsCgkJCW8gPSB0aGlzLm9wdGlvbnM7CgkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1yZXNpemFibGUiKTsKCgkJJC5leHRlbmQodGhpcywgewoJCQlfYXNwZWN0UmF0aW86ICEhKG8uYXNwZWN0UmF0aW8pLAoJCQlhc3BlY3RSYXRpbzogby5hc3BlY3RSYXRpbywKCQkJb3JpZ2luYWxFbGVtZW50OiB0aGlzLmVsZW1lbnQsCgkJCV9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzOiBbXSwKCQkJX2hlbHBlcjogby5oZWxwZXIgfHwgby5naG9zdCB8fCBvLmFuaW1hdGUgPyBvLmhlbHBlciB8fCAidWktcmVzaXphYmxlLWhlbHBlciIgOiBudWxsCgkJfSk7CgoJCS8vIFdyYXAgdGhlIGVsZW1lbnQgaWYgaXQgY2Fubm90IGhvbGQgY2hpbGQgbm9kZXMKCQlpZiAodGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9jYW52YXN8dGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbnxpbWcvaSkpIHsKCgkJCXRoaXMuZWxlbWVudC53cmFwKAoJCQkJJCgiPGRpdiBjbGFzcz0ndWktd3JhcHBlcicgc3R5bGU9J292ZXJmbG93OiBoaWRkZW47Jz48L2Rpdj4iKS5jc3MoewoJCQkJCXBvc2l0aW9uOiB0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpLAoJCQkJCXdpZHRoOiB0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLAoJCQkJCWhlaWdodDogdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksCgkJCQkJdG9wOiB0aGlzLmVsZW1lbnQuY3NzKCJ0b3AiKSwKCQkJCQlsZWZ0OiB0aGlzLmVsZW1lbnQuY3NzKCJsZWZ0IikKCQkJCX0pCgkJCSk7CgoJCQl0aGlzLmVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgKCQkJCSJ1aS1yZXNpemFibGUiLCB0aGlzLmVsZW1lbnQucmVzaXphYmxlKCAiaW5zdGFuY2UiICkKCQkJKTsKCgkJCXRoaXMuZWxlbWVudElzV3JhcHBlciA9IHRydWU7CgoJCQl0aGlzLmVsZW1lbnQuY3NzKHsKCQkJCW1hcmdpbkxlZnQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLAoJCQkJbWFyZ2luVG9wOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpblRvcCIpLAoJCQkJbWFyZ2luUmlnaHQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKSwKCQkJCW1hcmdpbkJvdHRvbTogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKQoJCQl9KTsKCQkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHsKCQkJCW1hcmdpbkxlZnQ6IDAsCgkJCQltYXJnaW5Ub3A6IDAsCgkJCQltYXJnaW5SaWdodDogMCwKCQkJCW1hcmdpbkJvdHRvbTogMAoJCQl9KTsKCQkJLy8gc3VwcG9ydDogU2FmYXJpCgkJCS8vIFByZXZlbnQgU2FmYXJpIHRleHRhcmVhIHJlc2l6ZQoJCQl0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUgPSB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIpOwoJCQl0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIsICJub25lIik7CgoJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLnB1c2goIHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7CgkJCQlwb3NpdGlvbjogInN0YXRpYyIsCgkJCQl6b29tOiAxLAoJCQkJZGlzcGxheTogImJsb2NrIgoJCQl9KSApOwoKCQkJLy8gc3VwcG9ydDogSUU5CgkJCS8vIGF2b2lkIElFIGp1bXAgKGhhcmQgc2V0IHRoZSBtYXJnaW4pCgkJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7IG1hcmdpbjogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW4iKSB9KTsKCgkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7CgkJfQoKCQl0aGlzLmhhbmRsZXMgPSBvLmhhbmRsZXMgfHwKCQkJKCAhJCgiLnVpLXJlc2l6YWJsZS1oYW5kbGUiLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCA/CgkJCQkiZSxzLHNlIiA6IHsKCQkJCQluOiAiLnVpLXJlc2l6YWJsZS1uIiwKCQkJCQllOiAiLnVpLXJlc2l6YWJsZS1lIiwKCQkJCQlzOiAiLnVpLXJlc2l6YWJsZS1zIiwKCQkJCQl3OiAiLnVpLXJlc2l6YWJsZS13IiwKCQkJCQlzZTogIi51aS1yZXNpemFibGUtc2UiLAoJCQkJCXN3OiAiLnVpLXJlc2l6YWJsZS1zdyIsCgkJCQkJbmU6ICIudWktcmVzaXphYmxlLW5lIiwKCQkJCQludzogIi51aS1yZXNpemFibGUtbnciCgkJCQl9ICk7CgoJCWlmICh0aGlzLmhhbmRsZXMuY29uc3RydWN0b3IgPT09IFN0cmluZykgewoKCQkJaWYgKCB0aGlzLmhhbmRsZXMgPT09ICJhbGwiKSB7CgkJCQl0aGlzLmhhbmRsZXMgPSAibixlLHMsdyxzZSxzdyxuZSxudyI7CgkJCX0KCgkJCW4gPSB0aGlzLmhhbmRsZXMuc3BsaXQoIiwiKTsKCQkJdGhpcy5oYW5kbGVzID0ge307CgoJCQlmb3IgKGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykgewoKCQkJCWhhbmRsZSA9ICQudHJpbShuW2ldKTsKCQkJCWhuYW1lID0gInVpLXJlc2l6YWJsZS0iICsgaGFuZGxlOwoJCQkJYXhpcyA9ICQoIjxkaXYgY2xhc3M9J3VpLXJlc2l6YWJsZS1oYW5kbGUgIiArIGhuYW1lICsgIic+PC9kaXY+Iik7CgoJCQkJYXhpcy5jc3MoeyB6SW5kZXg6IG8uekluZGV4IH0pOwoKCQkJCS8vIFRPRE8gOiBXaGF0J3MgZ29pbmcgb24gaGVyZT8KCQkJCWlmICgic2UiID09PSBoYW5kbGUpIHsKCQkJCQlheGlzLmFkZENsYXNzKCJ1aS1pY29uIHVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlIik7CgkJCQl9CgoJCQkJdGhpcy5oYW5kbGVzW2hhbmRsZV0gPSAiLnVpLXJlc2l6YWJsZS0iICsgaGFuZGxlOwoJCQkJdGhpcy5lbGVtZW50LmFwcGVuZChheGlzKTsKCQkJfQoKCQl9CgoJCXRoaXMuX3JlbmRlckF4aXMgPSBmdW5jdGlvbih0YXJnZXQpIHsKCgkJCXZhciBpLCBheGlzLCBwYWRQb3MsIHBhZFdyYXBwZXI7CgoJCQl0YXJnZXQgPSB0YXJnZXQgfHwgdGhpcy5lbGVtZW50OwoKCQkJZm9yIChpIGluIHRoaXMuaGFuZGxlcykgewoKCQkJCWlmICh0aGlzLmhhbmRsZXNbaV0uY29uc3RydWN0b3IgPT09IFN0cmluZykgewoJCQkJCXRoaXMuaGFuZGxlc1tpXSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggdGhpcy5oYW5kbGVzWyBpIF0gKS5maXJzdCgpLnNob3coKTsKCQkJCX0KCgkJCQlpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyICYmIHRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC90ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uL2kpKSB7CgoJCQkJCWF4aXMgPSAkKHRoaXMuaGFuZGxlc1tpXSwgdGhpcy5lbGVtZW50KTsKCgkJCQkJcGFkV3JhcHBlciA9IC9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSkgPyBheGlzLm91dGVySGVpZ2h0KCkgOiBheGlzLm91dGVyV2lkdGgoKTsKCgkJCQkJcGFkUG9zID0gWyAicGFkZGluZyIsCgkJCQkJCS9uZXxud3xuLy50ZXN0KGkpID8gIlRvcCIgOgoJCQkJCQkvc2V8c3d8cy8udGVzdChpKSA/ICJCb3R0b20iIDoKCQkJCQkJL15lJC8udGVzdChpKSA/ICJSaWdodCIgOiAiTGVmdCIgXS5qb2luKCIiKTsKCgkJCQkJdGFyZ2V0LmNzcyhwYWRQb3MsIHBhZFdyYXBwZXIpOwoKCQkJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOwoKCQkJCX0KCgkJCQkvLyBUT0RPOiBXaGF0J3MgdGhhdCBnb29kIGZvcj8gVGhlcmUncyBub3QgYW55dGhpbmcgdG8gYmUgZXhlY3V0ZWQgbGVmdAoJCQkJaWYgKCEkKHRoaXMuaGFuZGxlc1tpXSkubGVuZ3RoKSB7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCX0KCQl9OwoKCQkvLyBUT0RPOiBtYWtlIHJlbmRlckF4aXMgYSBwcm90b3R5cGUgZnVuY3Rpb24KCQl0aGlzLl9yZW5kZXJBeGlzKHRoaXMuZWxlbWVudCk7CgoJCXRoaXMuX2hhbmRsZXMgPSAkKCIudWktcmVzaXphYmxlLWhhbmRsZSIsIHRoaXMuZWxlbWVudCkKCQkJLmRpc2FibGVTZWxlY3Rpb24oKTsKCgkJdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7CgkJCWlmICghdGhhdC5yZXNpemluZykgewoJCQkJaWYgKHRoaXMuY2xhc3NOYW1lKSB7CgkJCQkJYXhpcyA9IHRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpOwoJCQkJfQoJCQkJdGhhdC5heGlzID0gYXhpcyAmJiBheGlzWzFdID8gYXhpc1sxXSA6ICJzZSI7CgkJCX0KCQl9KTsKCgkJaWYgKG8uYXV0b0hpZGUpIHsKCQkJdGhpcy5faGFuZGxlcy5oaWRlKCk7CgkJCSQodGhpcy5lbGVtZW50KQoJCQkJLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKQoJCQkJLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7CgkJCQkJaWYgKG8uZGlzYWJsZWQpIHsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCQkkKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTsKCQkJCQl0aGF0Ll9oYW5kbGVzLnNob3coKTsKCQkJCX0pCgkJCQkubW91c2VsZWF2ZShmdW5jdGlvbigpIHsKCQkJCQlpZiAoby5kaXNhYmxlZCkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCWlmICghdGhhdC5yZXNpemluZykgewoJCQkJCQkkKHRoaXMpLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTsKCQkJCQkJdGhhdC5faGFuZGxlcy5oaWRlKCk7CgkJCQkJfQoJCQkJfSk7CgkJfQoKCQl0aGlzLl9tb3VzZUluaXQoKTsKCgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCgkJdGhpcy5fbW91c2VEZXN0cm95KCk7CgoJCXZhciB3cmFwcGVyLAoJCQlfZGVzdHJveSA9IGZ1bmN0aW9uKGV4cCkgewoJCQkJJChleHApCgkJCQkJLnJlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUgdWktcmVzaXphYmxlLWRpc2FibGVkIHVpLXJlc2l6YWJsZS1yZXNpemluZyIpCgkJCQkJLnJlbW92ZURhdGEoInJlc2l6YWJsZSIpCgkJCQkJLnJlbW92ZURhdGEoInVpLXJlc2l6YWJsZSIpCgkJCQkJLnVuYmluZCgiLnJlc2l6YWJsZSIpCgkJCQkJLmZpbmQoIi51aS1yZXNpemFibGUtaGFuZGxlIikKCQkJCQkJLnJlbW92ZSgpOwoJCQl9OwoKCQkvLyBUT0RPOiBVbndyYXAgYXQgc2FtZSBET00gcG9zaXRpb24KCQlpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyKSB7CgkJCV9kZXN0cm95KHRoaXMuZWxlbWVudCk7CgkJCXdyYXBwZXIgPSB0aGlzLmVsZW1lbnQ7CgkJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7CgkJCQlwb3NpdGlvbjogd3JhcHBlci5jc3MoInBvc2l0aW9uIiksCgkJCQl3aWR0aDogd3JhcHBlci5vdXRlcldpZHRoKCksCgkJCQloZWlnaHQ6IHdyYXBwZXIub3V0ZXJIZWlnaHQoKSwKCQkJCXRvcDogd3JhcHBlci5jc3MoInRvcCIpLAoJCQkJbGVmdDogd3JhcHBlci5jc3MoImxlZnQiKQoJCQl9KS5pbnNlcnRBZnRlciggd3JhcHBlciApOwoJCQl3cmFwcGVyLnJlbW92ZSgpOwoJCX0KCgkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiLCB0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUpOwoJCV9kZXN0cm95KHRoaXMub3JpZ2luYWxFbGVtZW50KTsKCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCV9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJdmFyIGksIGhhbmRsZSwKCQkJY2FwdHVyZSA9IGZhbHNlOwoKCQlmb3IgKGkgaW4gdGhpcy5oYW5kbGVzKSB7CgkJCWhhbmRsZSA9ICQodGhpcy5oYW5kbGVzW2ldKVswXTsKCQkJaWYgKGhhbmRsZSA9PT0gZXZlbnQudGFyZ2V0IHx8ICQuY29udGFpbnMoaGFuZGxlLCBldmVudC50YXJnZXQpKSB7CgkJCQljYXB0dXJlID0gdHJ1ZTsKCQkJfQoJCX0KCgkJcmV0dXJuICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgY2FwdHVyZTsKCX0sCgoJX21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7CgoJCXZhciBjdXJsZWZ0LCBjdXJ0b3AsIGN1cnNvciwKCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJZWwgPSB0aGlzLmVsZW1lbnQ7CgoJCXRoaXMucmVzaXppbmcgPSB0cnVlOwoKCQl0aGlzLl9yZW5kZXJQcm94eSgpOwoKCQljdXJsZWZ0ID0gdGhpcy5fbnVtKHRoaXMuaGVscGVyLmNzcygibGVmdCIpKTsKCQljdXJ0b3AgPSB0aGlzLl9udW0odGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSk7CgoJCWlmIChvLmNvbnRhaW5tZW50KSB7CgkJCWN1cmxlZnQgKz0gJChvLmNvbnRhaW5tZW50KS5zY3JvbGxMZWZ0KCkgfHwgMDsKCQkJY3VydG9wICs9ICQoby5jb250YWlubWVudCkuc2Nyb2xsVG9wKCkgfHwgMDsKCQl9CgoJCXRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCk7CgkJdGhpcy5wb3NpdGlvbiA9IHsgbGVmdDogY3VybGVmdCwgdG9wOiBjdXJ0b3AgfTsKCgkJdGhpcy5zaXplID0gdGhpcy5faGVscGVyID8gewoJCQkJd2lkdGg6IHRoaXMuaGVscGVyLndpZHRoKCksCgkJCQloZWlnaHQ6IHRoaXMuaGVscGVyLmhlaWdodCgpCgkJCX0gOiB7CgkJCQl3aWR0aDogZWwud2lkdGgoKSwKCQkJCWhlaWdodDogZWwuaGVpZ2h0KCkKCQkJfTsKCgkJdGhpcy5vcmlnaW5hbFNpemUgPSB0aGlzLl9oZWxwZXIgPyB7CgkJCQl3aWR0aDogZWwub3V0ZXJXaWR0aCgpLAoJCQkJaGVpZ2h0OiBlbC5vdXRlckhlaWdodCgpCgkJCX0gOiB7CgkJCQl3aWR0aDogZWwud2lkdGgoKSwKCQkJCWhlaWdodDogZWwuaGVpZ2h0KCkKCQkJfTsKCgkJdGhpcy5zaXplRGlmZiA9IHsKCQkJd2lkdGg6IGVsLm91dGVyV2lkdGgoKSAtIGVsLndpZHRoKCksCgkJCWhlaWdodDogZWwub3V0ZXJIZWlnaHQoKSAtIGVsLmhlaWdodCgpCgkJfTsKCgkJdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0geyBsZWZ0OiBjdXJsZWZ0LCB0b3A6IGN1cnRvcCB9OwoJCXRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uID0geyBsZWZ0OiBldmVudC5wYWdlWCwgdG9wOiBldmVudC5wYWdlWSB9OwoKCQl0aGlzLmFzcGVjdFJhdGlvID0gKHR5cGVvZiBvLmFzcGVjdFJhdGlvID09PSAibnVtYmVyIikgPwoJCQlvLmFzcGVjdFJhdGlvIDoKCQkJKCh0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCAvIHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCkgfHwgMSk7CgoJCWN1cnNvciA9ICQoIi51aS1yZXNpemFibGUtIiArIHRoaXMuYXhpcykuY3NzKCJjdXJzb3IiKTsKCQkkKCJib2R5IikuY3NzKCJjdXJzb3IiLCBjdXJzb3IgPT09ICJhdXRvIiA/IHRoaXMuYXhpcyArICItcmVzaXplIiA6IGN1cnNvcik7CgoJCWVsLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtcmVzaXppbmciKTsKCQl0aGlzLl9wcm9wYWdhdGUoInN0YXJ0IiwgZXZlbnQpOwoJCXJldHVybiB0cnVlOwoJfSwKCglfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCkgewoKCQl2YXIgZGF0YSwgcHJvcHMsCgkJCXNtcCA9IHRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uLAoJCQlhID0gdGhpcy5heGlzLAoJCQlkeCA9IChldmVudC5wYWdlWCAtIHNtcC5sZWZ0KSB8fCAwLAoJCQlkeSA9IChldmVudC5wYWdlWSAtIHNtcC50b3ApIHx8IDAsCgkJCXRyaWdnZXIgPSB0aGlzLl9jaGFuZ2VbYV07CgoJCXRoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCk7CgoJCWlmICghdHJpZ2dlcikgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlkYXRhID0gdHJpZ2dlci5hcHBseSh0aGlzLCBbIGV2ZW50LCBkeCwgZHkgXSk7CgoJCXRoaXMuX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzKGV2ZW50LnNoaWZ0S2V5KTsKCQlpZiAodGhpcy5fYXNwZWN0UmF0aW8gfHwgZXZlbnQuc2hpZnRLZXkpIHsKCQkJZGF0YSA9IHRoaXMuX3VwZGF0ZVJhdGlvKGRhdGEsIGV2ZW50KTsKCQl9CgoJCWRhdGEgPSB0aGlzLl9yZXNwZWN0U2l6ZShkYXRhLCBldmVudCk7CgoJCXRoaXMuX3VwZGF0ZUNhY2hlKGRhdGEpOwoKCQl0aGlzLl9wcm9wYWdhdGUoInJlc2l6ZSIsIGV2ZW50KTsKCgkJcHJvcHMgPSB0aGlzLl9hcHBseUNoYW5nZXMoKTsKCgkJaWYgKCAhdGhpcy5faGVscGVyICYmIHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoICkgewoJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOwoJCX0KCgkJaWYgKCAhJC5pc0VtcHR5T2JqZWN0KCBwcm9wcyApICkgewoJCQl0aGlzLl91cGRhdGVQcmV2UHJvcGVydGllcygpOwoJCQl0aGlzLl90cmlnZ2VyKCAicmVzaXplIiwgZXZlbnQsIHRoaXMudWkoKSApOwoJCQl0aGlzLl9hcHBseUNoYW5nZXMoKTsKCQl9CgoJCXJldHVybiBmYWxzZTsKCX0sCgoJX21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdGhpcy5yZXNpemluZyA9IGZhbHNlOwoJCXZhciBwciwgaXN0YSwgc29mZnNldGgsIHNvZmZzZXR3LCBzLCBsZWZ0LCB0b3AsCgkJCW8gPSB0aGlzLm9wdGlvbnMsIHRoYXQgPSB0aGlzOwoKCQlpZiAodGhpcy5faGVscGVyKSB7CgoJCQlwciA9IHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM7CgkJCWlzdGEgPSBwci5sZW5ndGggJiYgKC90ZXh0YXJlYS9pKS50ZXN0KHByWzBdLm5vZGVOYW1lKTsKCQkJc29mZnNldGggPSBpc3RhICYmIHRoaXMuX2hhc1Njcm9sbChwclswXSwgImxlZnQiKSA/IDAgOiB0aGF0LnNpemVEaWZmLmhlaWdodDsKCQkJc29mZnNldHcgPSBpc3RhID8gMCA6IHRoYXQuc2l6ZURpZmYud2lkdGg7CgoJCQlzID0gewoJCQkJd2lkdGg6ICh0aGF0LmhlbHBlci53aWR0aCgpICAtIHNvZmZzZXR3KSwKCQkJCWhlaWdodDogKHRoYXQuaGVscGVyLmhlaWdodCgpIC0gc29mZnNldGgpCgkJCX07CgkJCWxlZnQgPSAocGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygibGVmdCIpLCAxMCkgKwoJCQkJKHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbDsKCQkJdG9wID0gKHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoInRvcCIpLCAxMCkgKwoJCQkJKHRoYXQucG9zaXRpb24udG9wIC0gdGhhdC5vcmlnaW5hbFBvc2l0aW9uLnRvcCkpIHx8IG51bGw7CgoJCQlpZiAoIW8uYW5pbWF0ZSkgewoJCQkJdGhpcy5lbGVtZW50LmNzcygkLmV4dGVuZChzLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pKTsKCQkJfQoKCQkJdGhhdC5oZWxwZXIuaGVpZ2h0KHRoYXQuc2l6ZS5oZWlnaHQpOwoJCQl0aGF0LmhlbHBlci53aWR0aCh0aGF0LnNpemUud2lkdGgpOwoKCQkJaWYgKHRoaXMuX2hlbHBlciAmJiAhby5hbmltYXRlKSB7CgkJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOwoJCQl9CgkJfQoKCQkkKCJib2R5IikuY3NzKCJjdXJzb3IiLCAiYXV0byIpOwoKCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpOwoKCQl0aGlzLl9wcm9wYWdhdGUoInN0b3AiLCBldmVudCk7CgoJCWlmICh0aGlzLl9oZWxwZXIpIHsKCQkJdGhpcy5oZWxwZXIucmVtb3ZlKCk7CgkJfQoKCQlyZXR1cm4gZmFsc2U7CgoJfSwKCglfdXBkYXRlUHJldlByb3BlcnRpZXM6IGZ1bmN0aW9uKCkgewoJCXRoaXMucHJldlBvc2l0aW9uID0gewoJCQl0b3A6IHRoaXMucG9zaXRpb24udG9wLAoJCQlsZWZ0OiB0aGlzLnBvc2l0aW9uLmxlZnQKCQl9OwoJCXRoaXMucHJldlNpemUgPSB7CgkJCXdpZHRoOiB0aGlzLnNpemUud2lkdGgsCgkJCWhlaWdodDogdGhpcy5zaXplLmhlaWdodAoJCX07Cgl9LAoKCV9hcHBseUNoYW5nZXM6IGZ1bmN0aW9uKCkgewoJCXZhciBwcm9wcyA9IHt9OwoKCQlpZiAoIHRoaXMucG9zaXRpb24udG9wICE9PSB0aGlzLnByZXZQb3NpdGlvbi50b3AgKSB7CgkJCXByb3BzLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgInB4IjsKCQl9CgkJaWYgKCB0aGlzLnBvc2l0aW9uLmxlZnQgIT09IHRoaXMucHJldlBvc2l0aW9uLmxlZnQgKSB7CgkJCXByb3BzLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyAicHgiOwoJCX0KCQlpZiAoIHRoaXMuc2l6ZS53aWR0aCAhPT0gdGhpcy5wcmV2U2l6ZS53aWR0aCApIHsKCQkJcHJvcHMud2lkdGggPSB0aGlzLnNpemUud2lkdGggKyAicHgiOwoJCX0KCQlpZiAoIHRoaXMuc2l6ZS5oZWlnaHQgIT09IHRoaXMucHJldlNpemUuaGVpZ2h0ICkgewoJCQlwcm9wcy5oZWlnaHQgPSB0aGlzLnNpemUuaGVpZ2h0ICsgInB4IjsKCQl9CgoJCXRoaXMuaGVscGVyLmNzcyggcHJvcHMgKTsKCgkJcmV0dXJuIHByb3BzOwoJfSwKCglfdXBkYXRlVmlydHVhbEJvdW5kYXJpZXM6IGZ1bmN0aW9uKGZvcmNlQXNwZWN0UmF0aW8pIHsKCQl2YXIgcE1pbldpZHRoLCBwTWF4V2lkdGgsIHBNaW5IZWlnaHQsIHBNYXhIZWlnaHQsIGIsCgkJCW8gPSB0aGlzLm9wdGlvbnM7CgoJCWIgPSB7CgkJCW1pbldpZHRoOiB0aGlzLl9pc051bWJlcihvLm1pbldpZHRoKSA/IG8ubWluV2lkdGggOiAwLAoJCQltYXhXaWR0aDogdGhpcy5faXNOdW1iZXIoby5tYXhXaWR0aCkgPyBvLm1heFdpZHRoIDogSW5maW5pdHksCgkJCW1pbkhlaWdodDogdGhpcy5faXNOdW1iZXIoby5taW5IZWlnaHQpID8gby5taW5IZWlnaHQgOiAwLAoJCQltYXhIZWlnaHQ6IHRoaXMuX2lzTnVtYmVyKG8ubWF4SGVpZ2h0KSA/IG8ubWF4SGVpZ2h0IDogSW5maW5pdHkKCQl9OwoKCQlpZiAodGhpcy5fYXNwZWN0UmF0aW8gfHwgZm9yY2VBc3BlY3RSYXRpbykgewoJCQlwTWluV2lkdGggPSBiLm1pbkhlaWdodCAqIHRoaXMuYXNwZWN0UmF0aW87CgkJCXBNaW5IZWlnaHQgPSBiLm1pbldpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbzsKCQkJcE1heFdpZHRoID0gYi5tYXhIZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvOwoJCQlwTWF4SGVpZ2h0ID0gYi5tYXhXaWR0aCAvIHRoaXMuYXNwZWN0UmF0aW87CgoJCQlpZiAocE1pbldpZHRoID4gYi5taW5XaWR0aCkgewoJCQkJYi5taW5XaWR0aCA9IHBNaW5XaWR0aDsKCQkJfQoJCQlpZiAocE1pbkhlaWdodCA+IGIubWluSGVpZ2h0KSB7CgkJCQliLm1pbkhlaWdodCA9IHBNaW5IZWlnaHQ7CgkJCX0KCQkJaWYgKHBNYXhXaWR0aCA8IGIubWF4V2lkdGgpIHsKCQkJCWIubWF4V2lkdGggPSBwTWF4V2lkdGg7CgkJCX0KCQkJaWYgKHBNYXhIZWlnaHQgPCBiLm1heEhlaWdodCkgewoJCQkJYi5tYXhIZWlnaHQgPSBwTWF4SGVpZ2h0OwoJCQl9CgkJfQoJCXRoaXMuX3ZCb3VuZGFyaWVzID0gYjsKCX0sCgoJX3VwZGF0ZUNhY2hlOiBmdW5jdGlvbihkYXRhKSB7CgkJdGhpcy5vZmZzZXQgPSB0aGlzLmhlbHBlci5vZmZzZXQoKTsKCQlpZiAodGhpcy5faXNOdW1iZXIoZGF0YS5sZWZ0KSkgewoJCQl0aGlzLnBvc2l0aW9uLmxlZnQgPSBkYXRhLmxlZnQ7CgkJfQoJCWlmICh0aGlzLl9pc051bWJlcihkYXRhLnRvcCkpIHsKCQkJdGhpcy5wb3NpdGlvbi50b3AgPSBkYXRhLnRvcDsKCQl9CgkJaWYgKHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSkgewoJCQl0aGlzLnNpemUuaGVpZ2h0ID0gZGF0YS5oZWlnaHQ7CgkJfQoJCWlmICh0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSkgewoJCQl0aGlzLnNpemUud2lkdGggPSBkYXRhLndpZHRoOwoJCX0KCX0sCgoJX3VwZGF0ZVJhdGlvOiBmdW5jdGlvbiggZGF0YSApIHsKCgkJdmFyIGNwb3MgPSB0aGlzLnBvc2l0aW9uLAoJCQljc2l6ZSA9IHRoaXMuc2l6ZSwKCQkJYSA9IHRoaXMuYXhpczsKCgkJaWYgKHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSkgewoJCQlkYXRhLndpZHRoID0gKGRhdGEuaGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbyk7CgkJfSBlbHNlIGlmICh0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSkgewoJCQlkYXRhLmhlaWdodCA9IChkYXRhLndpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbyk7CgkJfQoKCQlpZiAoYSA9PT0gInN3IikgewoJCQlkYXRhLmxlZnQgPSBjcG9zLmxlZnQgKyAoY3NpemUud2lkdGggLSBkYXRhLndpZHRoKTsKCQkJZGF0YS50b3AgPSBudWxsOwoJCX0KCQlpZiAoYSA9PT0gIm53IikgewoJCQlkYXRhLnRvcCA9IGNwb3MudG9wICsgKGNzaXplLmhlaWdodCAtIGRhdGEuaGVpZ2h0KTsKCQkJZGF0YS5sZWZ0ID0gY3Bvcy5sZWZ0ICsgKGNzaXplLndpZHRoIC0gZGF0YS53aWR0aCk7CgkJfQoKCQlyZXR1cm4gZGF0YTsKCX0sCgoJX3Jlc3BlY3RTaXplOiBmdW5jdGlvbiggZGF0YSApIHsKCgkJdmFyIG8gPSB0aGlzLl92Qm91bmRhcmllcywKCQkJYSA9IHRoaXMuYXhpcywKCQkJaXNtYXh3ID0gdGhpcy5faXNOdW1iZXIoZGF0YS53aWR0aCkgJiYgby5tYXhXaWR0aCAmJiAoby5tYXhXaWR0aCA8IGRhdGEud2lkdGgpLAoJCQlpc21heGggPSB0aGlzLl9pc051bWJlcihkYXRhLmhlaWdodCkgJiYgby5tYXhIZWlnaHQgJiYgKG8ubWF4SGVpZ2h0IDwgZGF0YS5oZWlnaHQpLAoJCQlpc21pbncgPSB0aGlzLl9pc051bWJlcihkYXRhLndpZHRoKSAmJiBvLm1pbldpZHRoICYmIChvLm1pbldpZHRoID4gZGF0YS53aWR0aCksCgkJCWlzbWluaCA9IHRoaXMuX2lzTnVtYmVyKGRhdGEuaGVpZ2h0KSAmJiBvLm1pbkhlaWdodCAmJiAoby5taW5IZWlnaHQgPiBkYXRhLmhlaWdodCksCgkJCWR3ID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQgKyB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCwKCQkJZGggPSB0aGlzLnBvc2l0aW9uLnRvcCArIHRoaXMuc2l6ZS5oZWlnaHQsCgkJCWN3ID0gL3N3fG53fHcvLnRlc3QoYSksIGNoID0gL253fG5lfG4vLnRlc3QoYSk7CgkJaWYgKGlzbWludykgewoJCQlkYXRhLndpZHRoID0gby5taW5XaWR0aDsKCQl9CgkJaWYgKGlzbWluaCkgewoJCQlkYXRhLmhlaWdodCA9IG8ubWluSGVpZ2h0OwoJCX0KCQlpZiAoaXNtYXh3KSB7CgkJCWRhdGEud2lkdGggPSBvLm1heFdpZHRoOwoJCX0KCQlpZiAoaXNtYXhoKSB7CgkJCWRhdGEuaGVpZ2h0ID0gby5tYXhIZWlnaHQ7CgkJfQoKCQlpZiAoaXNtaW53ICYmIGN3KSB7CgkJCWRhdGEubGVmdCA9IGR3IC0gby5taW5XaWR0aDsKCQl9CgkJaWYgKGlzbWF4dyAmJiBjdykgewoJCQlkYXRhLmxlZnQgPSBkdyAtIG8ubWF4V2lkdGg7CgkJfQoJCWlmIChpc21pbmggJiYgY2gpIHsKCQkJZGF0YS50b3AgPSBkaCAtIG8ubWluSGVpZ2h0OwoJCX0KCQlpZiAoaXNtYXhoICYmIGNoKSB7CgkJCWRhdGEudG9wID0gZGggLSBvLm1heEhlaWdodDsKCQl9CgoJCS8vIEZpeGluZyBqdW1wIGVycm9yIG9uIHRvcC9sZWZ0IC0gYnVnICMyMzMwCgkJaWYgKCFkYXRhLndpZHRoICYmICFkYXRhLmhlaWdodCAmJiAhZGF0YS5sZWZ0ICYmIGRhdGEudG9wKSB7CgkJCWRhdGEudG9wID0gbnVsbDsKCQl9IGVsc2UgaWYgKCFkYXRhLndpZHRoICYmICFkYXRhLmhlaWdodCAmJiAhZGF0YS50b3AgJiYgZGF0YS5sZWZ0KSB7CgkJCWRhdGEubGVmdCA9IG51bGw7CgkJfQoKCQlyZXR1cm4gZGF0YTsKCX0sCgoJX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9uczogZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJdmFyIGkgPSAwLAoJCQl3aWR0aHMgPSBbXSwKCQkJYm9yZGVycyA9IFsKCQkJCWVsZW1lbnQuY3NzKCAiYm9yZGVyVG9wV2lkdGgiICksCgkJCQllbGVtZW50LmNzcyggImJvcmRlclJpZ2h0V2lkdGgiICksCgkJCQllbGVtZW50LmNzcyggImJvcmRlckJvdHRvbVdpZHRoIiApLAoJCQkJZWxlbWVudC5jc3MoICJib3JkZXJMZWZ0V2lkdGgiICkKCQkJXSwKCQkJcGFkZGluZ3MgPSBbCgkJCQllbGVtZW50LmNzcyggInBhZGRpbmdUb3AiICksCgkJCQllbGVtZW50LmNzcyggInBhZGRpbmdSaWdodCIgKSwKCQkJCWVsZW1lbnQuY3NzKCAicGFkZGluZ0JvdHRvbSIgKSwKCQkJCWVsZW1lbnQuY3NzKCAicGFkZGluZ0xlZnQiICkKCQkJXTsKCgkJZm9yICggOyBpIDwgNDsgaSsrICkgewoJCQl3aWR0aHNbIGkgXSA9ICggcGFyc2VJbnQoIGJvcmRlcnNbIGkgXSwgMTAgKSB8fCAwICk7CgkJCXdpZHRoc1sgaSBdICs9ICggcGFyc2VJbnQoIHBhZGRpbmdzWyBpIF0sIDEwICkgfHwgMCApOwoJCX0KCgkJcmV0dXJuIHsKCQkJaGVpZ2h0OiB3aWR0aHNbIDAgXSArIHdpZHRoc1sgMiBdLAoJCQl3aWR0aDogd2lkdGhzWyAxIF0gKyB3aWR0aHNbIDMgXQoJCX07Cgl9LAoKCV9wcm9wb3J0aW9uYWxseVJlc2l6ZTogZnVuY3Rpb24oKSB7CgoJCWlmICghdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIHByZWwsCgkJCWkgPSAwLAoJCQllbGVtZW50ID0gdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50OwoKCQlmb3IgKCA7IGkgPCB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CgoJCQlwcmVsID0gdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50c1tpXTsKCgkJCS8vIFRPRE86IFNlZW1zIGxpa2UgYSBidWcgdG8gY2FjaGUgdGhpcy5vdXRlckRpbWVuc2lvbnMKCQkJLy8gY29uc2lkZXJpbmcgdGhhdCB3ZSBhcmUgaW4gYSBsb29wLgoJCQlpZiAoIXRoaXMub3V0ZXJEaW1lbnNpb25zKSB7CgkJCQl0aGlzLm91dGVyRGltZW5zaW9ucyA9IHRoaXMuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyggcHJlbCApOwoJCQl9CgoJCQlwcmVsLmNzcyh7CgkJCQloZWlnaHQ6IChlbGVtZW50LmhlaWdodCgpIC0gdGhpcy5vdXRlckRpbWVuc2lvbnMuaGVpZ2h0KSB8fCAwLAoJCQkJd2lkdGg6IChlbGVtZW50LndpZHRoKCkgLSB0aGlzLm91dGVyRGltZW5zaW9ucy53aWR0aCkgfHwgMAoJCQl9KTsKCgkJfQoKCX0sCgoJX3JlbmRlclByb3h5OiBmdW5jdGlvbigpIHsKCgkJdmFyIGVsID0gdGhpcy5lbGVtZW50LCBvID0gdGhpcy5vcHRpb25zOwoJCXRoaXMuZWxlbWVudE9mZnNldCA9IGVsLm9mZnNldCgpOwoKCQlpZiAodGhpcy5faGVscGVyKSB7CgoJCQl0aGlzLmhlbHBlciA9IHRoaXMuaGVscGVyIHx8ICQoIjxkaXYgc3R5bGU9J292ZXJmbG93OmhpZGRlbjsnPjwvZGl2PiIpOwoKCQkJdGhpcy5oZWxwZXIuYWRkQ2xhc3ModGhpcy5faGVscGVyKS5jc3MoewoJCQkJd2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkgLSAxLAoJCQkJaGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIDEsCgkJCQlwb3NpdGlvbjogImFic29sdXRlIiwKCQkJCWxlZnQ6IHRoaXMuZWxlbWVudE9mZnNldC5sZWZ0ICsgInB4IiwKCQkJCXRvcDogdGhpcy5lbGVtZW50T2Zmc2V0LnRvcCArICJweCIsCgkJCQl6SW5kZXg6ICsrby56SW5kZXggLy9UT0RPOiBEb24ndCBtb2RpZnkgb3B0aW9uCgkJCX0pOwoKCQkJdGhpcy5oZWxwZXIKCQkJCS5hcHBlbmRUbygiYm9keSIpCgkJCQkuZGlzYWJsZVNlbGVjdGlvbigpOwoKCQl9IGVsc2UgewoJCQl0aGlzLmhlbHBlciA9IHRoaXMuZWxlbWVudDsKCQl9CgoJfSwKCglfY2hhbmdlOiB7CgkJZTogZnVuY3Rpb24oZXZlbnQsIGR4KSB7CgkJCXJldHVybiB7IHdpZHRoOiB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCArIGR4IH07CgkJfSwKCQl3OiBmdW5jdGlvbihldmVudCwgZHgpIHsKCQkJdmFyIGNzID0gdGhpcy5vcmlnaW5hbFNpemUsIHNwID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uOwoJCQlyZXR1cm4geyBsZWZ0OiBzcC5sZWZ0ICsgZHgsIHdpZHRoOiBjcy53aWR0aCAtIGR4IH07CgkJfSwKCQluOiBmdW5jdGlvbihldmVudCwgZHgsIGR5KSB7CgkJCXZhciBjcyA9IHRoaXMub3JpZ2luYWxTaXplLCBzcCA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjsKCQkJcmV0dXJuIHsgdG9wOiBzcC50b3AgKyBkeSwgaGVpZ2h0OiBjcy5oZWlnaHQgLSBkeSB9OwoJCX0sCgkJczogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQlyZXR1cm4geyBoZWlnaHQ6IHRoaXMub3JpZ2luYWxTaXplLmhlaWdodCArIGR5IH07CgkJfSwKCQlzZTogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQlyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCQkJCXRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7CgkJfSwKCQlzdzogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQlyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCQkJCXRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7CgkJfSwKCQluZTogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQlyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCQkJCXRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7CgkJfSwKCQludzogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQlyZXR1cm4gJC5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCQkJCXRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFsgZXZlbnQsIGR4LCBkeSBdKSk7CgkJfQoJfSwKCglfcHJvcGFnYXRlOiBmdW5jdGlvbihuLCBldmVudCkgewoJCSQudWkucGx1Z2luLmNhbGwodGhpcywgbiwgWyBldmVudCwgdGhpcy51aSgpIF0pOwoJCShuICE9PSAicmVzaXplIiAmJiB0aGlzLl90cmlnZ2VyKG4sIGV2ZW50LCB0aGlzLnVpKCkpKTsKCX0sCgoJcGx1Z2luczoge30sCgoJdWk6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB7CgkJCW9yaWdpbmFsRWxlbWVudDogdGhpcy5vcmlnaW5hbEVsZW1lbnQsCgkJCWVsZW1lbnQ6IHRoaXMuZWxlbWVudCwKCQkJaGVscGVyOiB0aGlzLmhlbHBlciwKCQkJcG9zaXRpb246IHRoaXMucG9zaXRpb24sCgkJCXNpemU6IHRoaXMuc2l6ZSwKCQkJb3JpZ2luYWxTaXplOiB0aGlzLm9yaWdpbmFsU2l6ZSwKCQkJb3JpZ2luYWxQb3NpdGlvbjogdGhpcy5vcmlnaW5hbFBvc2l0aW9uCgkJfTsKCX0KCn0pOwoKLyoKICogUmVzaXphYmxlIEV4dGVuc2lvbnMKICovCgokLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsICJhbmltYXRlIiwgewoKCXN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCAiaW5zdGFuY2UiICksCgkJCW8gPSB0aGF0Lm9wdGlvbnMsCgkJCXByID0gdGhhdC5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cywKCQkJaXN0YSA9IHByLmxlbmd0aCAmJiAoL3RleHRhcmVhL2kpLnRlc3QocHJbMF0ubm9kZU5hbWUpLAoJCQlzb2Zmc2V0aCA9IGlzdGEgJiYgdGhhdC5faGFzU2Nyb2xsKHByWzBdLCAibGVmdCIpID8gMCA6IHRoYXQuc2l6ZURpZmYuaGVpZ2h0LAoJCQlzb2Zmc2V0dyA9IGlzdGEgPyAwIDogdGhhdC5zaXplRGlmZi53aWR0aCwKCQkJc3R5bGUgPSB7IHdpZHRoOiAodGhhdC5zaXplLndpZHRoIC0gc29mZnNldHcpLCBoZWlnaHQ6ICh0aGF0LnNpemUuaGVpZ2h0IC0gc29mZnNldGgpIH0sCgkJCWxlZnQgPSAocGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygibGVmdCIpLCAxMCkgKwoJCQkJKHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbCwKCQkJdG9wID0gKHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoInRvcCIpLCAxMCkgKwoJCQkJKHRoYXQucG9zaXRpb24udG9wIC0gdGhhdC5vcmlnaW5hbFBvc2l0aW9uLnRvcCkpIHx8IG51bGw7CgoJCXRoYXQuZWxlbWVudC5hbmltYXRlKAoJCQkkLmV4dGVuZChzdHlsZSwgdG9wICYmIGxlZnQgPyB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0gOiB7fSksIHsKCQkJCWR1cmF0aW9uOiBvLmFuaW1hdGVEdXJhdGlvbiwKCQkJCWVhc2luZzogby5hbmltYXRlRWFzaW5nLAoJCQkJc3RlcDogZnVuY3Rpb24oKSB7CgoJCQkJCXZhciBkYXRhID0gewoJCQkJCQl3aWR0aDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygid2lkdGgiKSwgMTApLAoJCQkJCQloZWlnaHQ6IHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoImhlaWdodCIpLCAxMCksCgkJCQkJCXRvcDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygidG9wIiksIDEwKSwKCQkJCQkJbGVmdDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygibGVmdCIpLCAxMCkKCQkJCQl9OwoKCQkJCQlpZiAocHIgJiYgcHIubGVuZ3RoKSB7CgkJCQkJCSQocHJbMF0pLmNzcyh7IHdpZHRoOiBkYXRhLndpZHRoLCBoZWlnaHQ6IGRhdGEuaGVpZ2h0IH0pOwoJCQkJCX0KCgkJCQkJLy8gcHJvcGFnYXRpbmcgcmVzaXplLCBhbmQgdXBkYXRpbmcgdmFsdWVzIGZvciBlYWNoIGFuaW1hdGlvbiBzdGVwCgkJCQkJdGhhdC5fdXBkYXRlQ2FjaGUoZGF0YSk7CgkJCQkJdGhhdC5fcHJvcGFnYXRlKCJyZXNpemUiLCBldmVudCk7CgoJCQkJfQoJCQl9CgkJKTsKCX0KCn0pOwoKJC51aS5wbHVnaW4uYWRkKCAicmVzaXphYmxlIiwgImNvbnRhaW5tZW50IiwgewoKCXN0YXJ0OiBmdW5jdGlvbigpIHsKCQl2YXIgZWxlbWVudCwgcCwgY28sIGNoLCBjdywgd2lkdGgsIGhlaWdodCwKCQkJdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwKCQkJbyA9IHRoYXQub3B0aW9ucywKCQkJZWwgPSB0aGF0LmVsZW1lbnQsCgkJCW9jID0gby5jb250YWlubWVudCwKCQkJY2UgPSAoIG9jIGluc3RhbmNlb2YgJCApID8gb2MuZ2V0KCAwICkgOiAoIC9wYXJlbnQvLnRlc3QoIG9jICkgKSA/IGVsLnBhcmVudCgpLmdldCggMCApIDogb2M7CgoJCWlmICggIWNlICkgewoJCQlyZXR1cm47CgkJfQoKCQl0aGF0LmNvbnRhaW5lckVsZW1lbnQgPSAkKCBjZSApOwoKCQlpZiAoIC9kb2N1bWVudC8udGVzdCggb2MgKSB8fCBvYyA9PT0gZG9jdW1lbnQgKSB7CgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0gewoJCQkJbGVmdDogMCwKCQkJCXRvcDogMAoJCQl9OwoJCQl0aGF0LmNvbnRhaW5lclBvc2l0aW9uID0gewoJCQkJbGVmdDogMCwKCQkJCXRvcDogMAoJCQl9OwoKCQkJdGhhdC5wYXJlbnREYXRhID0gewoJCQkJZWxlbWVudDogJCggZG9jdW1lbnQgKSwKCQkJCWxlZnQ6IDAsCgkJCQl0b3A6IDAsCgkJCQl3aWR0aDogJCggZG9jdW1lbnQgKS53aWR0aCgpLAoJCQkJaGVpZ2h0OiAkKCBkb2N1bWVudCApLmhlaWdodCgpIHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQKCQkJfTsKCQl9IGVsc2UgewoJCQllbGVtZW50ID0gJCggY2UgKTsKCQkJcCA9IFtdOwoJCQkkKFsgIlRvcCIsICJSaWdodCIsICJMZWZ0IiwgIkJvdHRvbSIgXSkuZWFjaChmdW5jdGlvbiggaSwgbmFtZSApIHsKCQkJCXBbIGkgXSA9IHRoYXQuX251bSggZWxlbWVudC5jc3MoICJwYWRkaW5nIiArIG5hbWUgKSApOwoJCQl9KTsKCgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKTsKCQkJdGhhdC5jb250YWluZXJQb3NpdGlvbiA9IGVsZW1lbnQucG9zaXRpb24oKTsKCQkJdGhhdC5jb250YWluZXJTaXplID0gewoJCQkJaGVpZ2h0OiAoIGVsZW1lbnQuaW5uZXJIZWlnaHQoKSAtIHBbIDMgXSApLAoJCQkJd2lkdGg6ICggZWxlbWVudC5pbm5lcldpZHRoKCkgLSBwWyAxIF0gKQoJCQl9OwoKCQkJY28gPSB0aGF0LmNvbnRhaW5lck9mZnNldDsKCQkJY2ggPSB0aGF0LmNvbnRhaW5lclNpemUuaGVpZ2h0OwoJCQljdyA9IHRoYXQuY29udGFpbmVyU2l6ZS53aWR0aDsKCQkJd2lkdGggPSAoIHRoYXQuX2hhc1Njcm9sbCAoIGNlLCAibGVmdCIgKSA/IGNlLnNjcm9sbFdpZHRoIDogY3cgKTsKCQkJaGVpZ2h0ID0gKCB0aGF0Ll9oYXNTY3JvbGwgKCBjZSApID8gY2Uuc2Nyb2xsSGVpZ2h0IDogY2ggKSA7CgoJCQl0aGF0LnBhcmVudERhdGEgPSB7CgkJCQllbGVtZW50OiBjZSwKCQkJCWxlZnQ6IGNvLmxlZnQsCgkJCQl0b3A6IGNvLnRvcCwKCQkJCXdpZHRoOiB3aWR0aCwKCQkJCWhlaWdodDogaGVpZ2h0CgkJCX07CgkJfQoJfSwKCglyZXNpemU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgd29zZXQsIGhvc2V0LCBpc1BhcmVudCwgaXNPZmZzZXRSZWxhdGl2ZSwKCQkJdGhhdCA9ICQoIHRoaXMgKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwKCQkJbyA9IHRoYXQub3B0aW9ucywKCQkJY28gPSB0aGF0LmNvbnRhaW5lck9mZnNldCwKCQkJY3AgPSB0aGF0LnBvc2l0aW9uLAoJCQlwUmF0aW8gPSB0aGF0Ll9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleSwKCQkJY29wID0gewoJCQkJdG9wOiAwLAoJCQkJbGVmdDogMAoJCQl9LAoJCQljZSA9IHRoYXQuY29udGFpbmVyRWxlbWVudCwKCQkJY29udGludWVSZXNpemUgPSB0cnVlOwoKCQlpZiAoIGNlWyAwIF0gIT09IGRvY3VtZW50ICYmICggL3N0YXRpYy8gKS50ZXN0KCBjZS5jc3MoICJwb3NpdGlvbiIgKSApICkgewoJCQljb3AgPSBjbzsKCQl9CgoJCWlmICggY3AubGVmdCA8ICggdGhhdC5faGVscGVyID8gY28ubGVmdCA6IDAgKSApIHsKCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLndpZHRoICsKCQkJCSggdGhhdC5faGVscGVyID8KCQkJCQkoIHRoYXQucG9zaXRpb24ubGVmdCAtIGNvLmxlZnQgKSA6CgkJCQkJKCB0aGF0LnBvc2l0aW9uLmxlZnQgLSBjb3AubGVmdCApICk7CgoJCQlpZiAoIHBSYXRpbyApIHsKCQkJCXRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnNpemUud2lkdGggLyB0aGF0LmFzcGVjdFJhdGlvOwoJCQkJY29udGludWVSZXNpemUgPSBmYWxzZTsKCQkJfQoJCQl0aGF0LnBvc2l0aW9uLmxlZnQgPSBvLmhlbHBlciA/IGNvLmxlZnQgOiAwOwoJCX0KCgkJaWYgKCBjcC50b3AgPCAoIHRoYXQuX2hlbHBlciA/IGNvLnRvcCA6IDAgKSApIHsKCQkJdGhhdC5zaXplLmhlaWdodCA9IHRoYXQuc2l6ZS5oZWlnaHQgKwoJCQkJKCB0aGF0Ll9oZWxwZXIgPwoJCQkJCSggdGhhdC5wb3NpdGlvbi50b3AgLSBjby50b3AgKSA6CgkJCQkJdGhhdC5wb3NpdGlvbi50b3AgKTsKCgkJCWlmICggcFJhdGlvICkgewoJCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLmhlaWdodCAqIHRoYXQuYXNwZWN0UmF0aW87CgkJCQljb250aW51ZVJlc2l6ZSA9IGZhbHNlOwoJCQl9CgkJCXRoYXQucG9zaXRpb24udG9wID0gdGhhdC5faGVscGVyID8gY28udG9wIDogMDsKCQl9CgoJCWlzUGFyZW50ID0gdGhhdC5jb250YWluZXJFbGVtZW50LmdldCggMCApID09PSB0aGF0LmVsZW1lbnQucGFyZW50KCkuZ2V0KCAwICk7CgkJaXNPZmZzZXRSZWxhdGl2ZSA9IC9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdCggdGhhdC5jb250YWluZXJFbGVtZW50LmNzcyggInBvc2l0aW9uIiApICk7CgoJCWlmICggaXNQYXJlbnQgJiYgaXNPZmZzZXRSZWxhdGl2ZSApIHsKCQkJdGhhdC5vZmZzZXQubGVmdCA9IHRoYXQucGFyZW50RGF0YS5sZWZ0ICsgdGhhdC5wb3NpdGlvbi5sZWZ0OwoJCQl0aGF0Lm9mZnNldC50b3AgPSB0aGF0LnBhcmVudERhdGEudG9wICsgdGhhdC5wb3NpdGlvbi50b3A7CgkJfSBlbHNlIHsKCQkJdGhhdC5vZmZzZXQubGVmdCA9IHRoYXQuZWxlbWVudC5vZmZzZXQoKS5sZWZ0OwoJCQl0aGF0Lm9mZnNldC50b3AgPSB0aGF0LmVsZW1lbnQub2Zmc2V0KCkudG9wOwoJCX0KCgkJd29zZXQgPSBNYXRoLmFicyggdGhhdC5zaXplRGlmZi53aWR0aCArCgkJCSh0aGF0Ll9oZWxwZXIgPwoJCQkJdGhhdC5vZmZzZXQubGVmdCAtIGNvcC5sZWZ0IDoKCQkJCSh0aGF0Lm9mZnNldC5sZWZ0IC0gY28ubGVmdCkpICk7CgoJCWhvc2V0ID0gTWF0aC5hYnMoIHRoYXQuc2l6ZURpZmYuaGVpZ2h0ICsKCQkJKHRoYXQuX2hlbHBlciA/CgkJCQl0aGF0Lm9mZnNldC50b3AgLSBjb3AudG9wIDoKCQkJCSh0aGF0Lm9mZnNldC50b3AgLSBjby50b3ApKSApOwoKCQlpZiAoIHdvc2V0ICsgdGhhdC5zaXplLndpZHRoID49IHRoYXQucGFyZW50RGF0YS53aWR0aCApIHsKCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5wYXJlbnREYXRhLndpZHRoIC0gd29zZXQ7CgkJCWlmICggcFJhdGlvICkgewoJCQkJdGhhdC5zaXplLmhlaWdodCA9IHRoYXQuc2l6ZS53aWR0aCAvIHRoYXQuYXNwZWN0UmF0aW87CgkJCQljb250aW51ZVJlc2l6ZSA9IGZhbHNlOwoJCQl9CgkJfQoKCQlpZiAoIGhvc2V0ICsgdGhhdC5zaXplLmhlaWdodCA+PSB0aGF0LnBhcmVudERhdGEuaGVpZ2h0ICkgewoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5wYXJlbnREYXRhLmhlaWdodCAtIGhvc2V0OwoJCQlpZiAoIHBSYXRpbyApIHsKCQkJCXRoYXQuc2l6ZS53aWR0aCA9IHRoYXQuc2l6ZS5oZWlnaHQgKiB0aGF0LmFzcGVjdFJhdGlvOwoJCQkJY29udGludWVSZXNpemUgPSBmYWxzZTsKCQkJfQoJCX0KCgkJaWYgKCAhY29udGludWVSZXNpemUgKXsKCQkJdGhhdC5wb3NpdGlvbi5sZWZ0ID0gdGhhdC5wcmV2UG9zaXRpb24ubGVmdDsKCQkJdGhhdC5wb3NpdGlvbi50b3AgPSB0aGF0LnByZXZQb3NpdGlvbi50b3A7CgkJCXRoYXQuc2l6ZS53aWR0aCA9IHRoYXQucHJldlNpemUud2lkdGg7CgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSB0aGF0LnByZXZTaXplLmhlaWdodDsKCQl9Cgl9LAoKCXN0b3A6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gJCggdGhpcyApLnJlc2l6YWJsZSggImluc3RhbmNlIiApLAoJCQlvID0gdGhhdC5vcHRpb25zLAoJCQljbyA9IHRoYXQuY29udGFpbmVyT2Zmc2V0LAoJCQljb3AgPSB0aGF0LmNvbnRhaW5lclBvc2l0aW9uLAoJCQljZSA9IHRoYXQuY29udGFpbmVyRWxlbWVudCwKCQkJaGVscGVyID0gJCggdGhhdC5oZWxwZXIgKSwKCQkJaG8gPSBoZWxwZXIub2Zmc2V0KCksCgkJCXcgPSBoZWxwZXIub3V0ZXJXaWR0aCgpIC0gdGhhdC5zaXplRGlmZi53aWR0aCwKCQkJaCA9IGhlbHBlci5vdXRlckhlaWdodCgpIC0gdGhhdC5zaXplRGlmZi5oZWlnaHQ7CgoJCWlmICggdGhhdC5faGVscGVyICYmICFvLmFuaW1hdGUgJiYgKCAvcmVsYXRpdmUvICkudGVzdCggY2UuY3NzKCAicG9zaXRpb24iICkgKSApIHsKCQkJJCggdGhpcyApLmNzcyh7CgkJCQlsZWZ0OiBoby5sZWZ0IC0gY29wLmxlZnQgLSBjby5sZWZ0LAoJCQkJd2lkdGg6IHcsCgkJCQloZWlnaHQ6IGgKCQkJfSk7CgkJfQoKCQlpZiAoIHRoYXQuX2hlbHBlciAmJiAhby5hbmltYXRlICYmICggL3N0YXRpYy8gKS50ZXN0KCBjZS5jc3MoICJwb3NpdGlvbiIgKSApICkgewoJCQkkKCB0aGlzICkuY3NzKHsKCQkJCWxlZnQ6IGhvLmxlZnQgLSBjb3AubGVmdCAtIGNvLmxlZnQsCgkJCQl3aWR0aDogdywKCQkJCWhlaWdodDogaAoJCQl9KTsKCQl9Cgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCAiYWxzb1Jlc2l6ZSIsIHsKCglzdGFydDogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLnJlc2l6YWJsZSggImluc3RhbmNlIiApLAoJCQlvID0gdGhhdC5vcHRpb25zLAoJCQlfc3RvcmUgPSBmdW5jdGlvbihleHApIHsKCQkJCSQoZXhwKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlbCA9ICQodGhpcyk7CgkJCQkJZWwuZGF0YSgidWktcmVzaXphYmxlLWFsc29yZXNpemUiLCB7CgkJCQkJCXdpZHRoOiBwYXJzZUludChlbC53aWR0aCgpLCAxMCksIGhlaWdodDogcGFyc2VJbnQoZWwuaGVpZ2h0KCksIDEwKSwKCQkJCQkJbGVmdDogcGFyc2VJbnQoZWwuY3NzKCJsZWZ0IiksIDEwKSwgdG9wOiBwYXJzZUludChlbC5jc3MoInRvcCIpLCAxMCkKCQkJCQl9KTsKCQkJCX0pOwoJCQl9OwoKCQlpZiAodHlwZW9mKG8uYWxzb1Jlc2l6ZSkgPT09ICJvYmplY3QiICYmICFvLmFsc29SZXNpemUucGFyZW50Tm9kZSkgewoJCQlpZiAoby5hbHNvUmVzaXplLmxlbmd0aCkgewoJCQkJby5hbHNvUmVzaXplID0gby5hbHNvUmVzaXplWzBdOwoJCQkJX3N0b3JlKG8uYWxzb1Jlc2l6ZSk7CgkJCX0gZWxzZSB7CgkJCQkkLmVhY2goby5hbHNvUmVzaXplLCBmdW5jdGlvbihleHApIHsKCQkJCQlfc3RvcmUoZXhwKTsKCQkJCX0pOwoJCQl9CgkJfSBlbHNlIHsKCQkJX3N0b3JlKG8uYWxzb1Jlc2l6ZSk7CgkJfQoJfSwKCglyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoJCXZhciB0aGF0ID0gJCh0aGlzKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwKCQkJbyA9IHRoYXQub3B0aW9ucywKCQkJb3MgPSB0aGF0Lm9yaWdpbmFsU2l6ZSwKCQkJb3AgPSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24sCgkJCWRlbHRhID0gewoJCQkJaGVpZ2h0OiAodGhhdC5zaXplLmhlaWdodCAtIG9zLmhlaWdodCkgfHwgMCwKCQkJCXdpZHRoOiAodGhhdC5zaXplLndpZHRoIC0gb3Mud2lkdGgpIHx8IDAsCgkJCQl0b3A6ICh0aGF0LnBvc2l0aW9uLnRvcCAtIG9wLnRvcCkgfHwgMCwKCQkJCWxlZnQ6ICh0aGF0LnBvc2l0aW9uLmxlZnQgLSBvcC5sZWZ0KSB8fCAwCgkJCX0sCgoJCQlfYWxzb1Jlc2l6ZSA9IGZ1bmN0aW9uKGV4cCwgYykgewoJCQkJJChleHApLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGVsID0gJCh0aGlzKSwgc3RhcnQgPSAkKHRoaXMpLmRhdGEoInVpLXJlc2l6YWJsZS1hbHNvcmVzaXplIiksIHN0eWxlID0ge30sCgkJCQkJCWNzcyA9IGMgJiYgYy5sZW5ndGggPwoJCQkJCQkJYyA6CgkJCQkJCQllbC5wYXJlbnRzKHVpLm9yaWdpbmFsRWxlbWVudFswXSkubGVuZ3RoID8KCQkJCQkJCQlbICJ3aWR0aCIsICJoZWlnaHQiIF0gOgoJCQkJCQkJCVsgIndpZHRoIiwgImhlaWdodCIsICJ0b3AiLCAibGVmdCIgXTsKCgkJCQkJJC5lYWNoKGNzcywgZnVuY3Rpb24oaSwgcHJvcCkgewoJCQkJCQl2YXIgc3VtID0gKHN0YXJ0W3Byb3BdIHx8IDApICsgKGRlbHRhW3Byb3BdIHx8IDApOwoJCQkJCQlpZiAoc3VtICYmIHN1bSA+PSAwKSB7CgkJCQkJCQlzdHlsZVtwcm9wXSA9IHN1bSB8fCBudWxsOwoJCQkJCQl9CgkJCQkJfSk7CgoJCQkJCWVsLmNzcyhzdHlsZSk7CgkJCQl9KTsKCQkJfTsKCgkJaWYgKHR5cGVvZihvLmFsc29SZXNpemUpID09PSAib2JqZWN0IiAmJiAhby5hbHNvUmVzaXplLm5vZGVUeXBlKSB7CgkJCSQuZWFjaChvLmFsc29SZXNpemUsIGZ1bmN0aW9uKGV4cCwgYykgewoJCQkJX2Fsc29SZXNpemUoZXhwLCBjKTsKCQkJfSk7CgkJfSBlbHNlIHsKCQkJX2Fsc29SZXNpemUoby5hbHNvUmVzaXplKTsKCQl9Cgl9LAoKCXN0b3A6IGZ1bmN0aW9uKCkgewoJCSQodGhpcykucmVtb3ZlRGF0YSgicmVzaXphYmxlLWFsc29yZXNpemUiKTsKCX0KfSk7CgokLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsICJnaG9zdCIsIHsKCglzdGFydDogZnVuY3Rpb24oKSB7CgoJCXZhciB0aGF0ID0gJCh0aGlzKS5yZXNpemFibGUoICJpbnN0YW5jZSIgKSwgbyA9IHRoYXQub3B0aW9ucywgY3MgPSB0aGF0LnNpemU7CgoJCXRoYXQuZ2hvc3QgPSB0aGF0Lm9yaWdpbmFsRWxlbWVudC5jbG9uZSgpOwoJCXRoYXQuZ2hvc3QKCQkJLmNzcyh7CgkJCQlvcGFjaXR5OiAwLjI1LAoJCQkJZGlzcGxheTogImJsb2NrIiwKCQkJCXBvc2l0aW9uOiAicmVsYXRpdmUiLAoJCQkJaGVpZ2h0OiBjcy5oZWlnaHQsCgkJCQl3aWR0aDogY3Mud2lkdGgsCgkJCQltYXJnaW46IDAsCgkJCQlsZWZ0OiAwLAoJCQkJdG9wOiAwCgkJCX0pCgkJCS5hZGRDbGFzcygidWktcmVzaXphYmxlLWdob3N0IikKCQkJLmFkZENsYXNzKHR5cGVvZiBvLmdob3N0ID09PSAic3RyaW5nIiA/IG8uZ2hvc3QgOiAiIik7CgoJCXRoYXQuZ2hvc3QuYXBwZW5kVG8odGhhdC5oZWxwZXIpOwoKCX0sCgoJcmVzaXplOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCAiaW5zdGFuY2UiICk7CgkJaWYgKHRoYXQuZ2hvc3QpIHsKCQkJdGhhdC5naG9zdC5jc3MoewoJCQkJcG9zaXRpb246ICJyZWxhdGl2ZSIsCgkJCQloZWlnaHQ6IHRoYXQuc2l6ZS5oZWlnaHQsCgkJCQl3aWR0aDogdGhhdC5zaXplLndpZHRoCgkJCX0pOwoJCX0KCX0sCgoJc3RvcDogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLnJlc2l6YWJsZSggImluc3RhbmNlIiApOwoJCWlmICh0aGF0Lmdob3N0ICYmIHRoYXQuaGVscGVyKSB7CgkJCXRoYXQuaGVscGVyLmdldCgwKS5yZW1vdmVDaGlsZCh0aGF0Lmdob3N0LmdldCgwKSk7CgkJfQoJfQoKfSk7CgokLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsICJncmlkIiwgewoKCXJlc2l6ZTogZnVuY3Rpb24oKSB7CgkJdmFyIG91dGVyRGltZW5zaW9ucywKCQkJdGhhdCA9ICQodGhpcykucmVzaXphYmxlKCAiaW5zdGFuY2UiICksCgkJCW8gPSB0aGF0Lm9wdGlvbnMsCgkJCWNzID0gdGhhdC5zaXplLAoJCQlvcyA9IHRoYXQub3JpZ2luYWxTaXplLAoJCQlvcCA9IHRoYXQub3JpZ2luYWxQb3NpdGlvbiwKCQkJYSA9IHRoYXQuYXhpcywKCQkJZ3JpZCA9IHR5cGVvZiBvLmdyaWQgPT09ICJudW1iZXIiID8gWyBvLmdyaWQsIG8uZ3JpZCBdIDogby5ncmlkLAoJCQlncmlkWCA9IChncmlkWzBdIHx8IDEpLAoJCQlncmlkWSA9IChncmlkWzFdIHx8IDEpLAoJCQlveCA9IE1hdGgucm91bmQoKGNzLndpZHRoIC0gb3Mud2lkdGgpIC8gZ3JpZFgpICogZ3JpZFgsCgkJCW95ID0gTWF0aC5yb3VuZCgoY3MuaGVpZ2h0IC0gb3MuaGVpZ2h0KSAvIGdyaWRZKSAqIGdyaWRZLAoJCQluZXdXaWR0aCA9IG9zLndpZHRoICsgb3gsCgkJCW5ld0hlaWdodCA9IG9zLmhlaWdodCArIG95LAoJCQlpc01heFdpZHRoID0gby5tYXhXaWR0aCAmJiAoby5tYXhXaWR0aCA8IG5ld1dpZHRoKSwKCQkJaXNNYXhIZWlnaHQgPSBvLm1heEhlaWdodCAmJiAoby5tYXhIZWlnaHQgPCBuZXdIZWlnaHQpLAoJCQlpc01pbldpZHRoID0gby5taW5XaWR0aCAmJiAoby5taW5XaWR0aCA+IG5ld1dpZHRoKSwKCQkJaXNNaW5IZWlnaHQgPSBvLm1pbkhlaWdodCAmJiAoby5taW5IZWlnaHQgPiBuZXdIZWlnaHQpOwoKCQlvLmdyaWQgPSBncmlkOwoKCQlpZiAoaXNNaW5XaWR0aCkgewoJCQluZXdXaWR0aCArPSBncmlkWDsKCQl9CgkJaWYgKGlzTWluSGVpZ2h0KSB7CgkJCW5ld0hlaWdodCArPSBncmlkWTsKCQl9CgkJaWYgKGlzTWF4V2lkdGgpIHsKCQkJbmV3V2lkdGggLT0gZ3JpZFg7CgkJfQoJCWlmIChpc01heEhlaWdodCkgewoJCQluZXdIZWlnaHQgLT0gZ3JpZFk7CgkJfQoKCQlpZiAoL14oc2V8c3xlKSQvLnRlc3QoYSkpIHsKCQkJdGhhdC5zaXplLndpZHRoID0gbmV3V2lkdGg7CgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7CgkJfSBlbHNlIGlmICgvXihuZSkkLy50ZXN0KGEpKSB7CgkJCXRoYXQuc2l6ZS53aWR0aCA9IG5ld1dpZHRoOwoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gbmV3SGVpZ2h0OwoJCQl0aGF0LnBvc2l0aW9uLnRvcCA9IG9wLnRvcCAtIG95OwoJCX0gZWxzZSBpZiAoL14oc3cpJC8udGVzdChhKSkgewoJCQl0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDsKCQkJdGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDsKCQkJdGhhdC5wb3NpdGlvbi5sZWZ0ID0gb3AubGVmdCAtIG94OwoJCX0gZWxzZSB7CgkJCWlmICggbmV3SGVpZ2h0IC0gZ3JpZFkgPD0gMCB8fCBuZXdXaWR0aCAtIGdyaWRYIDw9IDApIHsKCQkJCW91dGVyRGltZW5zaW9ucyA9IHRoYXQuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyggdGhpcyApOwoJCQl9CgoJCQlpZiAoIG5ld0hlaWdodCAtIGdyaWRZID4gMCApIHsKCQkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBuZXdIZWlnaHQ7CgkJCQl0aGF0LnBvc2l0aW9uLnRvcCA9IG9wLnRvcCAtIG95OwoJCQl9IGVsc2UgewoJCQkJbmV3SGVpZ2h0ID0gZ3JpZFkgLSBvdXRlckRpbWVuc2lvbnMuaGVpZ2h0OwoJCQkJdGhhdC5zaXplLmhlaWdodCA9IG5ld0hlaWdodDsKCQkJCXRoYXQucG9zaXRpb24udG9wID0gb3AudG9wICsgb3MuaGVpZ2h0IC0gbmV3SGVpZ2h0OwoJCQl9CgkJCWlmICggbmV3V2lkdGggLSBncmlkWCA+IDAgKSB7CgkJCQl0aGF0LnNpemUud2lkdGggPSBuZXdXaWR0aDsKCQkJCXRoYXQucG9zaXRpb24ubGVmdCA9IG9wLmxlZnQgLSBveDsKCQkJfSBlbHNlIHsKCQkJCW5ld1dpZHRoID0gZ3JpZFkgLSBvdXRlckRpbWVuc2lvbnMuaGVpZ2h0OwoJCQkJdGhhdC5zaXplLndpZHRoID0gbmV3V2lkdGg7CgkJCQl0aGF0LnBvc2l0aW9uLmxlZnQgPSBvcC5sZWZ0ICsgb3Mud2lkdGggLSBuZXdXaWR0aDsKCQkJfQoJCX0KCX0KCn0pOwoKdmFyIHJlc2l6YWJsZSA9ICQudWkucmVzaXphYmxlOwoKCi8qIQogKiBqUXVlcnkgVUkgRGlhbG9nIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RpYWxvZy8KICovCgoKdmFyIGRpYWxvZyA9ICQud2lkZ2V0KCAidWkuZGlhbG9nIiwgewoJdmVyc2lvbjogIjEuMTEuMSIsCglvcHRpb25zOiB7CgkJYXBwZW5kVG86ICJib2R5IiwKCQlhdXRvT3BlbjogdHJ1ZSwKCQlidXR0b25zOiBbXSwKCQljbG9zZU9uRXNjYXBlOiB0cnVlLAoJCWNsb3NlVGV4dDogIkNsb3NlIiwKCQlkaWFsb2dDbGFzczogIiIsCgkJZHJhZ2dhYmxlOiB0cnVlLAoJCWhpZGU6IG51bGwsCgkJaGVpZ2h0OiAiYXV0byIsCgkJbWF4SGVpZ2h0OiBudWxsLAoJCW1heFdpZHRoOiBudWxsLAoJCW1pbkhlaWdodDogMTUwLAoJCW1pbldpZHRoOiAxNTAsCgkJbW9kYWw6IGZhbHNlLAoJCXBvc2l0aW9uOiB7CgkJCW15OiAiY2VudGVyIiwKCQkJYXQ6ICJjZW50ZXIiLAoJCQlvZjogd2luZG93LAoJCQljb2xsaXNpb246ICJmaXQiLAoJCQkvLyBFbnN1cmUgdGhlIHRpdGxlYmFyIGlzIGFsd2F5cyB2aXNpYmxlCgkJCXVzaW5nOiBmdW5jdGlvbiggcG9zICkgewoJCQkJdmFyIHRvcE9mZnNldCA9ICQoIHRoaXMgKS5jc3MoIHBvcyApLm9mZnNldCgpLnRvcDsKCQkJCWlmICggdG9wT2Zmc2V0IDwgMCApIHsKCQkJCQkkKCB0aGlzICkuY3NzKCAidG9wIiwgcG9zLnRvcCAtIHRvcE9mZnNldCApOwoJCQkJfQoJCQl9CgkJfSwKCQlyZXNpemFibGU6IHRydWUsCgkJc2hvdzogbnVsbCwKCQl0aXRsZTogbnVsbCwKCQl3aWR0aDogMzAwLAoKCQkvLyBjYWxsYmFja3MKCQliZWZvcmVDbG9zZTogbnVsbCwKCQljbG9zZTogbnVsbCwKCQlkcmFnOiBudWxsLAoJCWRyYWdTdGFydDogbnVsbCwKCQlkcmFnU3RvcDogbnVsbCwKCQlmb2N1czogbnVsbCwKCQlvcGVuOiBudWxsLAoJCXJlc2l6ZTogbnVsbCwKCQlyZXNpemVTdGFydDogbnVsbCwKCQlyZXNpemVTdG9wOiBudWxsCgl9LAoKCXNpemVSZWxhdGVkT3B0aW9uczogewoJCWJ1dHRvbnM6IHRydWUsCgkJaGVpZ2h0OiB0cnVlLAoJCW1heEhlaWdodDogdHJ1ZSwKCQltYXhXaWR0aDogdHJ1ZSwKCQltaW5IZWlnaHQ6IHRydWUsCgkJbWluV2lkdGg6IHRydWUsCgkJd2lkdGg6IHRydWUKCX0sCgoJcmVzaXphYmxlUmVsYXRlZE9wdGlvbnM6IHsKCQltYXhIZWlnaHQ6IHRydWUsCgkJbWF4V2lkdGg6IHRydWUsCgkJbWluSGVpZ2h0OiB0cnVlLAoJCW1pbldpZHRoOiB0cnVlCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMub3JpZ2luYWxDc3MgPSB7CgkJCWRpc3BsYXk6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLmRpc3BsYXksCgkJCXdpZHRoOiB0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS53aWR0aCwKCQkJbWluSGVpZ2h0OiB0aGlzLmVsZW1lbnRbIDAgXS5zdHlsZS5taW5IZWlnaHQsCgkJCW1heEhlaWdodDogdGhpcy5lbGVtZW50WyAwIF0uc3R5bGUubWF4SGVpZ2h0LAoJCQloZWlnaHQ6IHRoaXMuZWxlbWVudFsgMCBdLnN0eWxlLmhlaWdodAoJCX07CgkJdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0gewoJCQlwYXJlbnQ6IHRoaXMuZWxlbWVudC5wYXJlbnQoKSwKCQkJaW5kZXg6IHRoaXMuZWxlbWVudC5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KCB0aGlzLmVsZW1lbnQgKQoJCX07CgkJdGhpcy5vcmlnaW5hbFRpdGxlID0gdGhpcy5lbGVtZW50LmF0dHIoICJ0aXRsZSIgKTsKCQl0aGlzLm9wdGlvbnMudGl0bGUgPSB0aGlzLm9wdGlvbnMudGl0bGUgfHwgdGhpcy5vcmlnaW5hbFRpdGxlOwoKCQl0aGlzLl9jcmVhdGVXcmFwcGVyKCk7CgoJCXRoaXMuZWxlbWVudAoJCQkuc2hvdygpCgkJCS5yZW1vdmVBdHRyKCAidGl0bGUiICkKCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLWNvbnRlbnQgdWktd2lkZ2V0LWNvbnRlbnQiICkKCQkJLmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7CgoJCXRoaXMuX2NyZWF0ZVRpdGxlYmFyKCk7CgkJdGhpcy5fY3JlYXRlQnV0dG9uUGFuZSgpOwoKCQlpZiAoIHRoaXMub3B0aW9ucy5kcmFnZ2FibGUgJiYgJC5mbi5kcmFnZ2FibGUgKSB7CgkJCXRoaXMuX21ha2VEcmFnZ2FibGUoKTsKCQl9CgkJaWYgKCB0aGlzLm9wdGlvbnMucmVzaXphYmxlICYmICQuZm4ucmVzaXphYmxlICkgewoJCQl0aGlzLl9tYWtlUmVzaXphYmxlKCk7CgkJfQoKCQl0aGlzLl9pc09wZW4gPSBmYWxzZTsKCgkJdGhpcy5fdHJhY2tGb2N1cygpOwoJfSwKCglfaW5pdDogZnVuY3Rpb24oKSB7CgkJaWYgKCB0aGlzLm9wdGlvbnMuYXV0b09wZW4gKSB7CgkJCXRoaXMub3BlbigpOwoJCX0KCX0sCgoJX2FwcGVuZFRvOiBmdW5jdGlvbigpIHsKCQl2YXIgZWxlbWVudCA9IHRoaXMub3B0aW9ucy5hcHBlbmRUbzsKCQlpZiAoIGVsZW1lbnQgJiYgKGVsZW1lbnQuanF1ZXJ5IHx8IGVsZW1lbnQubm9kZVR5cGUpICkgewoJCQlyZXR1cm4gJCggZWxlbWVudCApOwoJCX0KCQlyZXR1cm4gdGhpcy5kb2N1bWVudC5maW5kKCBlbGVtZW50IHx8ICJib2R5IiApLmVxKCAwICk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl2YXIgbmV4dCwKCQkJb3JpZ2luYWxQb3NpdGlvbiA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjsKCgkJdGhpcy5fZGVzdHJveU92ZXJsYXkoKTsKCgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVVbmlxdWVJZCgpCgkJCS5yZW1vdmVDbGFzcyggInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50IiApCgkJCS5jc3MoIHRoaXMub3JpZ2luYWxDc3MgKQoJCQkvLyBXaXRob3V0IGRldGFjaGluZyBmaXJzdCwgdGhlIGZvbGxvd2luZyBiZWNvbWVzIHJlYWxseSBzbG93CgkJCS5kZXRhY2goKTsKCgkJdGhpcy51aURpYWxvZy5zdG9wKCB0cnVlLCB0cnVlICkucmVtb3ZlKCk7CgoJCWlmICggdGhpcy5vcmlnaW5hbFRpdGxlICkgewoJCQl0aGlzLmVsZW1lbnQuYXR0ciggInRpdGxlIiwgdGhpcy5vcmlnaW5hbFRpdGxlICk7CgkJfQoKCQluZXh0ID0gb3JpZ2luYWxQb3NpdGlvbi5wYXJlbnQuY2hpbGRyZW4oKS5lcSggb3JpZ2luYWxQb3NpdGlvbi5pbmRleCApOwoJCS8vIERvbid0IHRyeSB0byBwbGFjZSB0aGUgZGlhbG9nIG5leHQgdG8gaXRzZWxmICgjODYxMykKCQlpZiAoIG5leHQubGVuZ3RoICYmIG5leHRbIDAgXSAhPT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7CgkJCW5leHQuYmVmb3JlKCB0aGlzLmVsZW1lbnQgKTsKCQl9IGVsc2UgewoJCQlvcmlnaW5hbFBvc2l0aW9uLnBhcmVudC5hcHBlbmQoIHRoaXMuZWxlbWVudCApOwoJCX0KCX0sCgoJd2lkZ2V0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy51aURpYWxvZzsKCX0sCgoJZGlzYWJsZTogJC5ub29wLAoJZW5hYmxlOiAkLm5vb3AsCgoJY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgYWN0aXZlRWxlbWVudCwKCQkJdGhhdCA9IHRoaXM7CgoJCWlmICggIXRoaXMuX2lzT3BlbiB8fCB0aGlzLl90cmlnZ2VyKCAiYmVmb3JlQ2xvc2UiLCBldmVudCApID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5faXNPcGVuID0gZmFsc2U7CgkJdGhpcy5fZm9jdXNlZEVsZW1lbnQgPSBudWxsOwoJCXRoaXMuX2Rlc3Ryb3lPdmVybGF5KCk7CgkJdGhpcy5fdW50cmFja0luc3RhbmNlKCk7CgoJCWlmICggIXRoaXMub3BlbmVyLmZpbHRlciggIjpmb2N1c2FibGUiICkuZm9jdXMoKS5sZW5ndGggKSB7CgoJCQkvLyBzdXBwb3J0OiBJRTkKCQkJLy8gSUU5IHRocm93cyBhbiAiVW5zcGVjaWZpZWQgZXJyb3IiIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGZyb20gYW4gPGlmcmFtZT4KCQkJdHJ5IHsKCQkJCWFjdGl2ZUVsZW1lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudDsKCgkJCQkvLyBTdXBwb3J0OiBJRTksIElFMTAKCQkJCS8vIElmIHRoZSA8Ym9keT4gaXMgYmx1cnJlZCwgSUUgd2lsbCBzd2l0Y2ggd2luZG93cywgc2VlICM0NTIwCgkJCQlpZiAoIGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAiYm9keSIgKSB7CgoJCQkJCS8vIEhpZGluZyBhIGZvY3VzZWQgZWxlbWVudCBkb2Vzbid0IHRyaWdnZXIgYmx1ciBpbiBXZWJLaXQKCQkJCQkvLyBzbyBpbiBjYXNlIHdlIGhhdmUgbm90aGluZyB0byBmb2N1cyBvbiwgZXhwbGljaXRseSBibHVyIHRoZSBhY3RpdmUgZWxlbWVudAoJCQkJCS8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD00NzE4MgoJCQkJCSQoIGFjdGl2ZUVsZW1lbnQgKS5ibHVyKCk7CgkJCQl9CgkJCX0gY2F0Y2ggKCBlcnJvciApIHt9CgkJfQoKCQl0aGlzLl9oaWRlKCB0aGlzLnVpRGlhbG9nLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7CgkJCXRoYXQuX3RyaWdnZXIoICJjbG9zZSIsIGV2ZW50ICk7CgkJfSk7Cgl9LAoKCWlzT3BlbjogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuX2lzT3BlbjsKCX0sCgoJbW92ZVRvVG9wOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9tb3ZlVG9Ub3AoKTsKCX0sCgoJX21vdmVUb1RvcDogZnVuY3Rpb24oIGV2ZW50LCBzaWxlbnQgKSB7CgkJdmFyIG1vdmVkID0gZmFsc2UsCgkJCXpJbmRpY2llcyA9IHRoaXMudWlEaWFsb2cuc2libGluZ3MoICIudWktZnJvbnQ6dmlzaWJsZSIgKS5tYXAoZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gKyQoIHRoaXMgKS5jc3MoICJ6LWluZGV4IiApOwoJCQl9KS5nZXQoKSwKCQkJekluZGV4TWF4ID0gTWF0aC5tYXguYXBwbHkoIG51bGwsIHpJbmRpY2llcyApOwoKCQlpZiAoIHpJbmRleE1heCA+PSArdGhpcy51aURpYWxvZy5jc3MoICJ6LWluZGV4IiApICkgewoJCQl0aGlzLnVpRGlhbG9nLmNzcyggInotaW5kZXgiLCB6SW5kZXhNYXggKyAxICk7CgkJCW1vdmVkID0gdHJ1ZTsKCQl9CgoJCWlmICggbW92ZWQgJiYgIXNpbGVudCApIHsKCQkJdGhpcy5fdHJpZ2dlciggImZvY3VzIiwgZXZlbnQgKTsKCQl9CgkJcmV0dXJuIG1vdmVkOwoJfSwKCglvcGVuOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJaWYgKCB0aGlzLl9pc09wZW4gKSB7CgkJCWlmICggdGhpcy5fbW92ZVRvVG9wKCkgKSB7CgkJCQl0aGlzLl9mb2N1c1RhYmJhYmxlKCk7CgkJCX0KCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5faXNPcGVuID0gdHJ1ZTsKCQl0aGlzLm9wZW5lciA9ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICk7CgoJCXRoaXMuX3NpemUoKTsKCQl0aGlzLl9wb3NpdGlvbigpOwoJCXRoaXMuX2NyZWF0ZU92ZXJsYXkoKTsKCQl0aGlzLl9tb3ZlVG9Ub3AoIG51bGwsIHRydWUgKTsKCgkJLy8gRW5zdXJlIHRoZSBvdmVybGF5IGlzIG1vdmVkIHRvIHRoZSB0b3Agd2l0aCB0aGUgZGlhbG9nLCBidXQgb25seSB3aGVuCgkJLy8gb3BlbmluZy4gVGhlIG92ZXJsYXkgc2hvdWxkbid0IG1vdmUgYWZ0ZXIgdGhlIGRpYWxvZyBpcyBvcGVuIHNvIHRoYXQKCQkvLyBtb2RlbGVzcyBkaWFsb2dzIG9wZW5lZCBhZnRlciB0aGUgbW9kYWwgZGlhbG9nIHN0YWNrIHByb3Blcmx5LgoJCWlmICggdGhpcy5vdmVybGF5ICkgewoJCQl0aGlzLm92ZXJsYXkuY3NzKCAiei1pbmRleCIsIHRoaXMudWlEaWFsb2cuY3NzKCAiei1pbmRleCIgKSAtIDEgKTsKCQl9CgoJCXRoaXMuX3Nob3coIHRoaXMudWlEaWFsb2csIHRoaXMub3B0aW9ucy5zaG93LCBmdW5jdGlvbigpIHsKCQkJdGhhdC5fZm9jdXNUYWJiYWJsZSgpOwoJCQl0aGF0Ll90cmlnZ2VyKCAiZm9jdXMiICk7CgkJfSk7CgoJCS8vIFRyYWNrIHRoZSBkaWFsb2cgaW1tZWRpYXRlbHkgdXBvbiBvcGVuZW5pbmcgaW4gY2FzZSBhIGZvY3VzIGV2ZW50CgkJLy8gc29tZWhvdyBvY2N1cnMgb3V0c2lkZSBvZiB0aGUgZGlhbG9nIGJlZm9yZSBhbiBlbGVtZW50IGluc2lkZSB0aGUKCQkvLyBkaWFsb2cgaXMgZm9jdXNlZCAoIzEwMTUyKQoJCXRoaXMuX21ha2VGb2N1c1RhcmdldCgpOwoKCQl0aGlzLl90cmlnZ2VyKCAib3BlbiIgKTsKCX0sCgoJX2ZvY3VzVGFiYmFibGU6IGZ1bmN0aW9uKCkgewoJCS8vIFNldCBmb2N1cyB0byB0aGUgZmlyc3QgbWF0Y2g6CgkJLy8gMS4gQW4gZWxlbWVudCB0aGF0IHdhcyBmb2N1c2VkIHByZXZpb3VzbHkKCQkvLyAyLiBGaXJzdCBlbGVtZW50IGluc2lkZSB0aGUgZGlhbG9nIG1hdGNoaW5nIFthdXRvZm9jdXNdCgkJLy8gMy4gVGFiYmFibGUgZWxlbWVudCBpbnNpZGUgdGhlIGNvbnRlbnQgZWxlbWVudAoJCS8vIDQuIFRhYmJhYmxlIGVsZW1lbnQgaW5zaWRlIHRoZSBidXR0b25wYW5lCgkJLy8gNS4gVGhlIGNsb3NlIGJ1dHRvbgoJCS8vIDYuIFRoZSBkaWFsb2cgaXRzZWxmCgkJdmFyIGhhc0ZvY3VzID0gdGhpcy5fZm9jdXNlZEVsZW1lbnQ7CgkJaWYgKCAhaGFzRm9jdXMgKSB7CgkJCWhhc0ZvY3VzID0gdGhpcy5lbGVtZW50LmZpbmQoICJbYXV0b2ZvY3VzXSIgKTsKCQl9CgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgewoJCQloYXNGb2N1cyA9IHRoaXMuZWxlbWVudC5maW5kKCAiOnRhYmJhYmxlIiApOwoJCX0KCQlpZiAoICFoYXNGb2N1cy5sZW5ndGggKSB7CgkJCWhhc0ZvY3VzID0gdGhpcy51aURpYWxvZ0J1dHRvblBhbmUuZmluZCggIjp0YWJiYWJsZSIgKTsKCQl9CgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgewoJCQloYXNGb2N1cyA9IHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmZpbHRlciggIjp0YWJiYWJsZSIgKTsKCQl9CgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgewoJCQloYXNGb2N1cyA9IHRoaXMudWlEaWFsb2c7CgkJfQoJCWhhc0ZvY3VzLmVxKCAwICkuZm9jdXMoKTsKCX0sCgoJX2tlZXBGb2N1czogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWZ1bmN0aW9uIGNoZWNrRm9jdXMoKSB7CgkJCXZhciBhY3RpdmVFbGVtZW50ID0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50LAoJCQkJaXNBY3RpdmUgPSB0aGlzLnVpRGlhbG9nWzBdID09PSBhY3RpdmVFbGVtZW50IHx8CgkJCQkJJC5jb250YWlucyggdGhpcy51aURpYWxvZ1swXSwgYWN0aXZlRWxlbWVudCApOwoJCQlpZiAoICFpc0FjdGl2ZSApIHsKCQkJCXRoaXMuX2ZvY3VzVGFiYmFibGUoKTsKCQkJfQoJCX0KCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCWNoZWNrRm9jdXMuY2FsbCggdGhpcyApOwoJCS8vIHN1cHBvcnQ6IElFCgkJLy8gSUUgPD0gOCBkb2Vzbid0IHByZXZlbnQgbW92aW5nIGZvY3VzIGV2ZW4gd2l0aCBldmVudC5wcmV2ZW50RGVmYXVsdCgpCgkJLy8gc28gd2UgY2hlY2sgYWdhaW4gbGF0ZXIKCQl0aGlzLl9kZWxheSggY2hlY2tGb2N1cyApOwoJfSwKCglfY3JlYXRlV3JhcHBlcjogZnVuY3Rpb24oKSB7CgkJdGhpcy51aURpYWxvZyA9ICQoIjxkaXY+IikKCQkJLmFkZENsYXNzKCAidWktZGlhbG9nIHVpLXdpZGdldCB1aS1mcm9udCAiICsKCQkJCXRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApCgkJCS5oaWRlKCkKCQkJLmF0dHIoewoJCQkJLy8gU2V0dGluZyB0YWJJbmRleCBtYWtlcyB0aGUgZGl2IGZvY3VzYWJsZQoJCQkJdGFiSW5kZXg6IC0xLAoJCQkJcm9sZTogImRpYWxvZyIKCQkJfSkKCQkJLmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbygpICk7CgoJCXRoaXMuX29uKCB0aGlzLnVpRGlhbG9nLCB7CgkJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggdGhpcy5vcHRpb25zLmNsb3NlT25Fc2NhcGUgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIGV2ZW50LmtleUNvZGUgJiYKCQkJCQkJZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLkVTQ0FQRSApIHsKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIHByZXZlbnQgdGFiYmluZyBvdXQgb2YgZGlhbG9ncwoJCQkJaWYgKCBldmVudC5rZXlDb2RlICE9PSAkLnVpLmtleUNvZGUuVEFCIHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCXZhciB0YWJiYWJsZXMgPSB0aGlzLnVpRGlhbG9nLmZpbmQoICI6dGFiYmFibGUiICksCgkJCQkJZmlyc3QgPSB0YWJiYWJsZXMuZmlsdGVyKCAiOmZpcnN0IiApLAoJCQkJCWxhc3QgPSB0YWJiYWJsZXMuZmlsdGVyKCAiOmxhc3QiICk7CgoJCQkJaWYgKCAoIGV2ZW50LnRhcmdldCA9PT0gbGFzdFswXSB8fCBldmVudC50YXJnZXQgPT09IHRoaXMudWlEaWFsb2dbMF0gKSAmJiAhZXZlbnQuc2hpZnRLZXkgKSB7CgkJCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkJCWZpcnN0LmZvY3VzKCk7CgkJCQkJfSk7CgkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCX0gZWxzZSBpZiAoICggZXZlbnQudGFyZ2V0ID09PSBmaXJzdFswXSB8fCBldmVudC50YXJnZXQgPT09IHRoaXMudWlEaWFsb2dbMF0gKSAmJiBldmVudC5zaGlmdEtleSApIHsKCQkJCQl0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCQkJbGFzdC5mb2N1cygpOwoJCQkJCX0pOwoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQl9CgkJCX0sCgkJCW1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJaWYgKCB0aGlzLl9tb3ZlVG9Ub3AoIGV2ZW50ICkgKSB7CgkJCQkJdGhpcy5fZm9jdXNUYWJiYWJsZSgpOwoJCQkJfQoJCQl9CgkJfSk7CgoJCS8vIFdlIGFzc3VtZSB0aGF0IGFueSBleGlzdGluZyBhcmlhLWRlc2NyaWJlZGJ5IGF0dHJpYnV0ZSBtZWFucwoJCS8vIHRoYXQgdGhlIGRpYWxvZyBjb250ZW50IGlzIG1hcmtlZCB1cCBwcm9wZXJseQoJCS8vIG90aGVyd2lzZSB3ZSBicnV0ZSBmb3JjZSB0aGUgY29udGVudCBhcyB0aGUgZGVzY3JpcHRpb24KCQlpZiAoICF0aGlzLmVsZW1lbnQuZmluZCggIlthcmlhLWRlc2NyaWJlZGJ5XSIgKS5sZW5ndGggKSB7CgkJCXRoaXMudWlEaWFsb2cuYXR0cih7CgkJCQkiYXJpYS1kZXNjcmliZWRieSI6IHRoaXMuZWxlbWVudC51bmlxdWVJZCgpLmF0dHIoICJpZCIgKQoJCQl9KTsKCQl9Cgl9LAoKCV9jcmVhdGVUaXRsZWJhcjogZnVuY3Rpb24oKSB7CgkJdmFyIHVpRGlhbG9nVGl0bGU7CgoJCXRoaXMudWlEaWFsb2dUaXRsZWJhciA9ICQoICI8ZGl2PiIgKQoJCQkuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctdGl0bGViYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIHVpLWhlbHBlci1jbGVhcmZpeCIgKQoJCQkucHJlcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7CgkJdGhpcy5fb24oIHRoaXMudWlEaWFsb2dUaXRsZWJhciwgewoJCQltb3VzZWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCS8vIERvbid0IHByZXZlbnQgY2xpY2sgb24gY2xvc2UgYnV0dG9uICgjODgzOCkKCQkJCS8vIEZvY3VzaW5nIGEgZGlhbG9nIHRoYXQgaXMgcGFydGlhbGx5IHNjcm9sbGVkIG91dCBvZiB2aWV3CgkJCQkvLyBjYXVzZXMgdGhlIGJyb3dzZXIgdG8gc2Nyb2xsIGl0IGludG8gdmlldywgcHJldmVudGluZyB0aGUgY2xpY2sgZXZlbnQKCQkJCWlmICggISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIiApICkgewoJCQkJCS8vIERpYWxvZyBpc24ndCBnZXR0aW5nIGZvY3VzIHdoZW4gZHJhZ2dpbmcgKCM4MDYzKQoJCQkJCXRoaXMudWlEaWFsb2cuZm9jdXMoKTsKCQkJCX0KCQkJfQoJCX0pOwoKCQkvLyBzdXBwb3J0OiBJRQoJCS8vIFVzZSB0eXBlPSJidXR0b24iIHRvIHByZXZlbnQgZW50ZXIga2V5cHJlc3NlcyBpbiB0ZXh0Ym94ZXMgZnJvbSBjbG9zaW5nIHRoZQoJCS8vIGRpYWxvZyBpbiBJRSAoIzkzMTIpCgkJdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UgPSAkKCAiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPiIgKQoJCQkuYnV0dG9uKHsKCQkJCWxhYmVsOiB0aGlzLm9wdGlvbnMuY2xvc2VUZXh0LAoJCQkJaWNvbnM6IHsKCQkJCQlwcmltYXJ5OiAidWktaWNvbi1jbG9zZXRoaWNrIgoJCQkJfSwKCQkJCXRleHQ6IGZhbHNlCgkJCX0pCgkJCS5hZGRDbGFzcyggInVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSIgKQoJCQkuYXBwZW5kVG8oIHRoaXMudWlEaWFsb2dUaXRsZWJhciApOwoJCXRoaXMuX29uKCB0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZSwgewoJCQljbGljazogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCX0KCQl9KTsKCgkJdWlEaWFsb2dUaXRsZSA9ICQoICI8c3Bhbj4iICkKCQkJLnVuaXF1ZUlkKCkKCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLXRpdGxlIiApCgkJCS5wcmVwZW5kVG8oIHRoaXMudWlEaWFsb2dUaXRsZWJhciApOwoJCXRoaXMuX3RpdGxlKCB1aURpYWxvZ1RpdGxlICk7CgoJCXRoaXMudWlEaWFsb2cuYXR0cih7CgkJCSJhcmlhLWxhYmVsbGVkYnkiOiB1aURpYWxvZ1RpdGxlLmF0dHIoICJpZCIgKQoJCX0pOwoJfSwKCglfdGl0bGU6IGZ1bmN0aW9uKCB0aXRsZSApIHsKCQlpZiAoICF0aGlzLm9wdGlvbnMudGl0bGUgKSB7CgkJCXRpdGxlLmh0bWwoICImIzE2MDsiICk7CgkJfQoJCXRpdGxlLnRleHQoIHRoaXMub3B0aW9ucy50aXRsZSApOwoJfSwKCglfY3JlYXRlQnV0dG9uUGFuZTogZnVuY3Rpb24oKSB7CgkJdGhpcy51aURpYWxvZ0J1dHRvblBhbmUgPSAkKCAiPGRpdj4iICkKCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IiApOwoKCQl0aGlzLnVpQnV0dG9uU2V0ID0gJCggIjxkaXY+IiApCgkJCS5hZGRDbGFzcyggInVpLWRpYWxvZy1idXR0b25zZXQiICkKCQkJLmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSApOwoKCQl0aGlzLl9jcmVhdGVCdXR0b25zKCk7Cgl9LAoKCV9jcmVhdGVCdXR0b25zOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCWJ1dHRvbnMgPSB0aGlzLm9wdGlvbnMuYnV0dG9uczsKCgkJLy8gaWYgd2UgYWxyZWFkeSBoYXZlIGEgYnV0dG9uIHBhbmUsIHJlbW92ZSBpdAoJCXRoaXMudWlEaWFsb2dCdXR0b25QYW5lLnJlbW92ZSgpOwoJCXRoaXMudWlCdXR0b25TZXQuZW1wdHkoKTsKCgkJaWYgKCAkLmlzRW1wdHlPYmplY3QoIGJ1dHRvbnMgKSB8fCAoJC5pc0FycmF5KCBidXR0b25zICkgJiYgIWJ1dHRvbnMubGVuZ3RoKSApIHsKCQkJdGhpcy51aURpYWxvZy5yZW1vdmVDbGFzcyggInVpLWRpYWxvZy1idXR0b25zIiApOwoJCQlyZXR1cm47CgkJfQoKCQkkLmVhY2goIGJ1dHRvbnMsIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCQkJdmFyIGNsaWNrLCBidXR0b25PcHRpb25zOwoJCQlwcm9wcyA9ICQuaXNGdW5jdGlvbiggcHJvcHMgKSA/CgkJCQl7IGNsaWNrOiBwcm9wcywgdGV4dDogbmFtZSB9IDoKCQkJCXByb3BzOwoJCQkvLyBEZWZhdWx0IHRvIGEgbm9uLXN1Ym1pdHRpbmcgYnV0dG9uCgkJCXByb3BzID0gJC5leHRlbmQoIHsgdHlwZTogImJ1dHRvbiIgfSwgcHJvcHMgKTsKCQkJLy8gQ2hhbmdlIHRoZSBjb250ZXh0IGZvciB0aGUgY2xpY2sgY2FsbGJhY2sgdG8gYmUgdGhlIG1haW4gZWxlbWVudAoJCQljbGljayA9IHByb3BzLmNsaWNrOwoJCQlwcm9wcy5jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJY2xpY2suYXBwbHkoIHRoYXQuZWxlbWVudFsgMCBdLCBhcmd1bWVudHMgKTsKCQkJfTsKCQkJYnV0dG9uT3B0aW9ucyA9IHsKCQkJCWljb25zOiBwcm9wcy5pY29ucywKCQkJCXRleHQ6IHByb3BzLnNob3dUZXh0CgkJCX07CgkJCWRlbGV0ZSBwcm9wcy5pY29uczsKCQkJZGVsZXRlIHByb3BzLnNob3dUZXh0OwoJCQkkKCAiPGJ1dHRvbj48L2J1dHRvbj4iLCBwcm9wcyApCgkJCQkuYnV0dG9uKCBidXR0b25PcHRpb25zICkKCQkJCS5hcHBlbmRUbyggdGhhdC51aUJ1dHRvblNldCApOwoJCX0pOwoJCXRoaXMudWlEaWFsb2cuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctYnV0dG9ucyIgKTsKCQl0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZS5hcHBlbmRUbyggdGhpcy51aURpYWxvZyApOwoJfSwKCglfbWFrZURyYWdnYWJsZTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQlmdW5jdGlvbiBmaWx0ZXJlZFVpKCB1aSApIHsKCQkJcmV0dXJuIHsKCQkJCXBvc2l0aW9uOiB1aS5wb3NpdGlvbiwKCQkJCW9mZnNldDogdWkub2Zmc2V0CgkJCX07CgkJfQoKCQl0aGlzLnVpRGlhbG9nLmRyYWdnYWJsZSh7CgkJCWNhbmNlbDogIi51aS1kaWFsb2ctY29udGVudCwgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSIsCgkJCWhhbmRsZTogIi51aS1kaWFsb2ctdGl0bGViYXIiLAoJCQljb250YWlubWVudDogImRvY3VtZW50IiwKCQkJc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctZHJhZ2dpbmciICk7CgkJCQl0aGF0Ll9ibG9ja0ZyYW1lcygpOwoJCQkJdGhhdC5fdHJpZ2dlciggImRyYWdTdGFydCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCWRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQl0aGF0Ll90cmlnZ2VyKCAiZHJhZyIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCXN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQl2YXIgbGVmdCA9IHVpLm9mZnNldC5sZWZ0IC0gdGhhdC5kb2N1bWVudC5zY3JvbGxMZWZ0KCksCgkJCQkJdG9wID0gdWkub2Zmc2V0LnRvcCAtIHRoYXQuZG9jdW1lbnQuc2Nyb2xsVG9wKCk7CgoJCQkJb3B0aW9ucy5wb3NpdGlvbiA9IHsKCQkJCQlteTogImxlZnQgdG9wIiwKCQkJCQlhdDogImxlZnQiICsgKGxlZnQgPj0gMCA/ICIrIiA6ICIiKSArIGxlZnQgKyAiICIgKwoJCQkJCQkidG9wIiArICh0b3AgPj0gMCA/ICIrIiA6ICIiKSArIHRvcCwKCQkJCQlvZjogdGhhdC53aW5kb3cKCQkJCX07CgkJCQkkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICJ1aS1kaWFsb2ctZHJhZ2dpbmciICk7CgkJCQl0aGF0Ll91bmJsb2NrRnJhbWVzKCk7CgkJCQl0aGF0Ll90cmlnZ2VyKCAiZHJhZ1N0b3AiLCBldmVudCwgZmlsdGVyZWRVaSggdWkgKSApOwoJCQl9CgkJfSk7Cgl9LAoKCV9tYWtlUmVzaXphYmxlOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCWhhbmRsZXMgPSBvcHRpb25zLnJlc2l6YWJsZSwKCQkJLy8gLnVpLXJlc2l6YWJsZSBoYXMgcG9zaXRpb246IHJlbGF0aXZlIGRlZmluZWQgaW4gdGhlIHN0eWxlc2hlZXQKCQkJLy8gYnV0IGRpYWxvZ3MgaGF2ZSB0byB1c2UgYWJzb2x1dGUgb3IgZml4ZWQgcG9zaXRpb25pbmcKCQkJcG9zaXRpb24gPSB0aGlzLnVpRGlhbG9nLmNzcygicG9zaXRpb24iKSwKCQkJcmVzaXplSGFuZGxlcyA9IHR5cGVvZiBoYW5kbGVzID09PSAic3RyaW5nIiA/CgkJCQloYW5kbGVzCToKCQkJCSJuLGUscyx3LHNlLHN3LG5lLG53IjsKCgkJZnVuY3Rpb24gZmlsdGVyZWRVaSggdWkgKSB7CgkJCXJldHVybiB7CgkJCQlvcmlnaW5hbFBvc2l0aW9uOiB1aS5vcmlnaW5hbFBvc2l0aW9uLAoJCQkJb3JpZ2luYWxTaXplOiB1aS5vcmlnaW5hbFNpemUsCgkJCQlwb3NpdGlvbjogdWkucG9zaXRpb24sCgkJCQlzaXplOiB1aS5zaXplCgkJCX07CgkJfQoKCQl0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSh7CgkJCWNhbmNlbDogIi51aS1kaWFsb2ctY29udGVudCIsCgkJCWNvbnRhaW5tZW50OiAiZG9jdW1lbnQiLAoJCQlhbHNvUmVzaXplOiB0aGlzLmVsZW1lbnQsCgkJCW1heFdpZHRoOiBvcHRpb25zLm1heFdpZHRoLAoJCQltYXhIZWlnaHQ6IG9wdGlvbnMubWF4SGVpZ2h0LAoJCQltaW5XaWR0aDogb3B0aW9ucy5taW5XaWR0aCwKCQkJbWluSGVpZ2h0OiB0aGlzLl9taW5IZWlnaHQoKSwKCQkJaGFuZGxlczogcmVzaXplSGFuZGxlcywKCQkJc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctcmVzaXppbmciICk7CgkJCQl0aGF0Ll9ibG9ja0ZyYW1lcygpOwoJCQkJdGhhdC5fdHJpZ2dlciggInJlc2l6ZVN0YXJ0IiwgZXZlbnQsIGZpbHRlcmVkVWkoIHVpICkgKTsKCQkJfSwKCQkJcmVzaXplOiBmdW5jdGlvbiggZXZlbnQsIHVpICkgewoJCQkJdGhhdC5fdHJpZ2dlciggInJlc2l6ZSIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCXN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQl2YXIgb2Zmc2V0ID0gdGhhdC51aURpYWxvZy5vZmZzZXQoKSwKCQkJCQlsZWZ0ID0gb2Zmc2V0LmxlZnQgLSB0aGF0LmRvY3VtZW50LnNjcm9sbExlZnQoKSwKCQkJCQl0b3AgPSBvZmZzZXQudG9wIC0gdGhhdC5kb2N1bWVudC5zY3JvbGxUb3AoKTsKCgkJCQlvcHRpb25zLmhlaWdodCA9IHRoYXQudWlEaWFsb2cuaGVpZ2h0KCk7CgkJCQlvcHRpb25zLndpZHRoID0gdGhhdC51aURpYWxvZy53aWR0aCgpOwoJCQkJb3B0aW9ucy5wb3NpdGlvbiA9IHsKCQkJCQlteTogImxlZnQgdG9wIiwKCQkJCQlhdDogImxlZnQiICsgKGxlZnQgPj0gMCA/ICIrIiA6ICIiKSArIGxlZnQgKyAiICIgKwoJCQkJCQkidG9wIiArICh0b3AgPj0gMCA/ICIrIiA6ICIiKSArIHRvcCwKCQkJCQlvZjogdGhhdC53aW5kb3cKCQkJCX07CgkJCQkkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICJ1aS1kaWFsb2ctcmVzaXppbmciICk7CgkJCQl0aGF0Ll91bmJsb2NrRnJhbWVzKCk7CgkJCQl0aGF0Ll90cmlnZ2VyKCAicmVzaXplU3RvcCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0KCQl9KQoJCS5jc3MoICJwb3NpdGlvbiIsIHBvc2l0aW9uICk7Cgl9LAoKCV90cmFja0ZvY3VzOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9vbiggdGhpcy53aWRnZXQoKSwgewoJCQlmb2N1c2luOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQl0aGlzLl9tYWtlRm9jdXNUYXJnZXQoKTsKCQkJCXRoaXMuX2ZvY3VzZWRFbGVtZW50ID0gJCggZXZlbnQudGFyZ2V0ICk7CgkJCX0KCQl9KTsKCX0sCgoJX21ha2VGb2N1c1RhcmdldDogZnVuY3Rpb24oKSB7CgkJdGhpcy5fdW50cmFja0luc3RhbmNlKCk7CgkJdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKS51bnNoaWZ0KCB0aGlzICk7Cgl9LAoKCV91bnRyYWNrSW5zdGFuY2U6IGZ1bmN0aW9uKCkgewoJCXZhciBpbnN0YW5jZXMgPSB0aGlzLl90cmFja2luZ0luc3RhbmNlcygpLAoJCQlleGlzdHMgPSAkLmluQXJyYXkoIHRoaXMsIGluc3RhbmNlcyApOwoJCWlmICggZXhpc3RzICE9PSAtMSApIHsKCQkJaW5zdGFuY2VzLnNwbGljZSggZXhpc3RzLCAxICk7CgkJfQoJfSwKCglfdHJhY2tpbmdJbnN0YW5jZXM6IGZ1bmN0aW9uKCkgewoJCXZhciBpbnN0YW5jZXMgPSB0aGlzLmRvY3VtZW50LmRhdGEoICJ1aS1kaWFsb2ctaW5zdGFuY2VzIiApOwoJCWlmICggIWluc3RhbmNlcyApIHsKCQkJaW5zdGFuY2VzID0gW107CgkJCXRoaXMuZG9jdW1lbnQuZGF0YSggInVpLWRpYWxvZy1pbnN0YW5jZXMiLCBpbnN0YW5jZXMgKTsKCQl9CgkJcmV0dXJuIGluc3RhbmNlczsKCX0sCgoJX21pbkhlaWdodDogZnVuY3Rpb24oKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgoJCXJldHVybiBvcHRpb25zLmhlaWdodCA9PT0gImF1dG8iID8KCQkJb3B0aW9ucy5taW5IZWlnaHQgOgoJCQlNYXRoLm1pbiggb3B0aW9ucy5taW5IZWlnaHQsIG9wdGlvbnMuaGVpZ2h0ICk7Cgl9LAoKCV9wb3NpdGlvbjogZnVuY3Rpb24oKSB7CgkJLy8gTmVlZCB0byBzaG93IHRoZSBkaWFsb2cgdG8gZ2V0IHRoZSBhY3R1YWwgb2Zmc2V0IGluIHRoZSBwb3NpdGlvbiBwbHVnaW4KCQl2YXIgaXNWaXNpYmxlID0gdGhpcy51aURpYWxvZy5pcyggIjp2aXNpYmxlIiApOwoJCWlmICggIWlzVmlzaWJsZSApIHsKCQkJdGhpcy51aURpYWxvZy5zaG93KCk7CgkJfQoJCXRoaXMudWlEaWFsb2cucG9zaXRpb24oIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApOwoJCWlmICggIWlzVmlzaWJsZSApIHsKCQkJdGhpcy51aURpYWxvZy5oaWRlKCk7CgkJfQoJfSwKCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlyZXNpemUgPSBmYWxzZSwKCQkJcmVzaXphYmxlT3B0aW9ucyA9IHt9OwoKCQkkLmVhY2goIG9wdGlvbnMsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCQl0aGF0Ll9zZXRPcHRpb24oIGtleSwgdmFsdWUgKTsKCgkJCWlmICgga2V5IGluIHRoYXQuc2l6ZVJlbGF0ZWRPcHRpb25zICkgewoJCQkJcmVzaXplID0gdHJ1ZTsKCQkJfQoJCQlpZiAoIGtleSBpbiB0aGF0LnJlc2l6YWJsZVJlbGF0ZWRPcHRpb25zICkgewoJCQkJcmVzaXphYmxlT3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsKCQkJfQoJCX0pOwoKCQlpZiAoIHJlc2l6ZSApIHsKCQkJdGhpcy5fc2l6ZSgpOwoJCQl0aGlzLl9wb3NpdGlvbigpOwoJCX0KCQlpZiAoIHRoaXMudWlEaWFsb2cuaXMoICI6ZGF0YSh1aS1yZXNpemFibGUpIiApICkgewoJCQl0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSggIm9wdGlvbiIsIHJlc2l6YWJsZU9wdGlvbnMgKTsKCQl9Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCXZhciBpc0RyYWdnYWJsZSwgaXNSZXNpemFibGUsCgkJCXVpRGlhbG9nID0gdGhpcy51aURpYWxvZzsKCgkJaWYgKCBrZXkgPT09ICJkaWFsb2dDbGFzcyIgKSB7CgkJCXVpRGlhbG9nCgkJCQkucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApCgkJCQkuYWRkQ2xhc3MoIHZhbHVlICk7CgkJfQoKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCgkJaWYgKCBrZXkgPT09ICJhcHBlbmRUbyIgKSB7CgkJCXRoaXMudWlEaWFsb2cuYXBwZW5kVG8oIHRoaXMuX2FwcGVuZFRvKCkgKTsKCQl9CgoJCWlmICgga2V5ID09PSAiYnV0dG9ucyIgKSB7CgkJCXRoaXMuX2NyZWF0ZUJ1dHRvbnMoKTsKCQl9CgoJCWlmICgga2V5ID09PSAiY2xvc2VUZXh0IiApIHsKCQkJdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2UuYnV0dG9uKHsKCQkJCS8vIEVuc3VyZSB0aGF0IHdlIGFsd2F5cyBwYXNzIGEgc3RyaW5nCgkJCQlsYWJlbDogIiIgKyB2YWx1ZQoJCQl9KTsKCQl9CgoJCWlmICgga2V5ID09PSAiZHJhZ2dhYmxlIiApIHsKCQkJaXNEcmFnZ2FibGUgPSB1aURpYWxvZy5pcyggIjpkYXRhKHVpLWRyYWdnYWJsZSkiICk7CgkJCWlmICggaXNEcmFnZ2FibGUgJiYgIXZhbHVlICkgewoJCQkJdWlEaWFsb2cuZHJhZ2dhYmxlKCAiZGVzdHJveSIgKTsKCQkJfQoKCQkJaWYgKCAhaXNEcmFnZ2FibGUgJiYgdmFsdWUgKSB7CgkJCQl0aGlzLl9tYWtlRHJhZ2dhYmxlKCk7CgkJCX0KCQl9CgoJCWlmICgga2V5ID09PSAicG9zaXRpb24iICkgewoJCQl0aGlzLl9wb3NpdGlvbigpOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJyZXNpemFibGUiICkgewoJCQkvLyBjdXJyZW50bHkgcmVzaXphYmxlLCBiZWNvbWluZyBub24tcmVzaXphYmxlCgkJCWlzUmVzaXphYmxlID0gdWlEaWFsb2cuaXMoICI6ZGF0YSh1aS1yZXNpemFibGUpIiApOwoJCQlpZiAoIGlzUmVzaXphYmxlICYmICF2YWx1ZSApIHsKCQkJCXVpRGlhbG9nLnJlc2l6YWJsZSggImRlc3Ryb3kiICk7CgkJCX0KCgkJCS8vIGN1cnJlbnRseSByZXNpemFibGUsIGNoYW5naW5nIGhhbmRsZXMKCQkJaWYgKCBpc1Jlc2l6YWJsZSAmJiB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICkgewoJCQkJdWlEaWFsb2cucmVzaXphYmxlKCAib3B0aW9uIiwgImhhbmRsZXMiLCB2YWx1ZSApOwoJCQl9CgoJCQkvLyBjdXJyZW50bHkgbm9uLXJlc2l6YWJsZSwgYmVjb21pbmcgcmVzaXphYmxlCgkJCWlmICggIWlzUmVzaXphYmxlICYmIHZhbHVlICE9PSBmYWxzZSApIHsKCQkJCXRoaXMuX21ha2VSZXNpemFibGUoKTsKCQkJfQoJCX0KCgkJaWYgKCBrZXkgPT09ICJ0aXRsZSIgKSB7CgkJCXRoaXMuX3RpdGxlKCB0aGlzLnVpRGlhbG9nVGl0bGViYXIuZmluZCggIi51aS1kaWFsb2ctdGl0bGUiICkgKTsKCQl9Cgl9LAoKCV9zaXplOiBmdW5jdGlvbigpIHsKCQkvLyBJZiB0aGUgdXNlciBoYXMgcmVzaXplZCB0aGUgZGlhbG9nLCB0aGUgLnVpLWRpYWxvZyBhbmQgLnVpLWRpYWxvZy1jb250ZW50CgkJLy8gZGl2cyB3aWxsIGJvdGggaGF2ZSB3aWR0aCBhbmQgaGVpZ2h0IHNldCwgc28gd2UgbmVlZCB0byByZXNldCB0aGVtCgkJdmFyIG5vbkNvbnRlbnRIZWlnaHQsIG1pbkNvbnRlbnRIZWlnaHQsIG1heENvbnRlbnRIZWlnaHQsCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgoJCS8vIFJlc2V0IGNvbnRlbnQgc2l6aW5nCgkJdGhpcy5lbGVtZW50LnNob3coKS5jc3MoewoJCQl3aWR0aDogImF1dG8iLAoJCQltaW5IZWlnaHQ6IDAsCgkJCW1heEhlaWdodDogIm5vbmUiLAoJCQloZWlnaHQ6IDAKCQl9KTsKCgkJaWYgKCBvcHRpb25zLm1pbldpZHRoID4gb3B0aW9ucy53aWR0aCApIHsKCQkJb3B0aW9ucy53aWR0aCA9IG9wdGlvbnMubWluV2lkdGg7CgkJfQoKCQkvLyByZXNldCB3cmFwcGVyIHNpemluZwoJCS8vIGRldGVybWluZSB0aGUgaGVpZ2h0IG9mIGFsbCB0aGUgbm9uLWNvbnRlbnQgZWxlbWVudHMKCQlub25Db250ZW50SGVpZ2h0ID0gdGhpcy51aURpYWxvZy5jc3MoewoJCQkJaGVpZ2h0OiAiYXV0byIsCgkJCQl3aWR0aDogb3B0aW9ucy53aWR0aAoJCQl9KQoJCQkub3V0ZXJIZWlnaHQoKTsKCQltaW5Db250ZW50SGVpZ2h0ID0gTWF0aC5tYXgoIDAsIG9wdGlvbnMubWluSGVpZ2h0IC0gbm9uQ29udGVudEhlaWdodCApOwoJCW1heENvbnRlbnRIZWlnaHQgPSB0eXBlb2Ygb3B0aW9ucy5tYXhIZWlnaHQgPT09ICJudW1iZXIiID8KCQkJTWF0aC5tYXgoIDAsIG9wdGlvbnMubWF4SGVpZ2h0IC0gbm9uQ29udGVudEhlaWdodCApIDoKCQkJIm5vbmUiOwoKCQlpZiAoIG9wdGlvbnMuaGVpZ2h0ID09PSAiYXV0byIgKSB7CgkJCXRoaXMuZWxlbWVudC5jc3MoewoJCQkJbWluSGVpZ2h0OiBtaW5Db250ZW50SGVpZ2h0LAoJCQkJbWF4SGVpZ2h0OiBtYXhDb250ZW50SGVpZ2h0LAoJCQkJaGVpZ2h0OiAiYXV0byIKCQkJfSk7CgkJfSBlbHNlIHsKCQkJdGhpcy5lbGVtZW50LmhlaWdodCggTWF0aC5tYXgoIDAsIG9wdGlvbnMuaGVpZ2h0IC0gbm9uQ29udGVudEhlaWdodCApICk7CgkJfQoKCQlpZiAoIHRoaXMudWlEaWFsb2cuaXMoICI6ZGF0YSh1aS1yZXNpemFibGUpIiApICkgewoJCQl0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSggIm9wdGlvbiIsICJtaW5IZWlnaHQiLCB0aGlzLl9taW5IZWlnaHQoKSApOwoJCX0KCX0sCgoJX2Jsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHsKCQl0aGlzLmlmcmFtZUJsb2NrcyA9IHRoaXMuZG9jdW1lbnQuZmluZCggImlmcmFtZSIgKS5tYXAoZnVuY3Rpb24oKSB7CgkJCXZhciBpZnJhbWUgPSAkKCB0aGlzICk7CgoJCQlyZXR1cm4gJCggIjxkaXY+IiApCgkJCQkuY3NzKHsKCQkJCQlwb3NpdGlvbjogImFic29sdXRlIiwKCQkJCQl3aWR0aDogaWZyYW1lLm91dGVyV2lkdGgoKSwKCQkJCQloZWlnaHQ6IGlmcmFtZS5vdXRlckhlaWdodCgpCgkJCQl9KQoJCQkJLmFwcGVuZFRvKCBpZnJhbWUucGFyZW50KCkgKQoJCQkJLm9mZnNldCggaWZyYW1lLm9mZnNldCgpIClbMF07CgkJfSk7Cgl9LAoKCV91bmJsb2NrRnJhbWVzOiBmdW5jdGlvbigpIHsKCQlpZiAoIHRoaXMuaWZyYW1lQmxvY2tzICkgewoJCQl0aGlzLmlmcmFtZUJsb2Nrcy5yZW1vdmUoKTsKCQkJZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzOwoJCX0KCX0sCgoJX2FsbG93SW50ZXJhY3Rpb246IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktZGlhbG9nIiApLmxlbmd0aCApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQkvLyBUT0RPOiBSZW1vdmUgaGFjayB3aGVuIGRhdGVwaWNrZXIgaW1wbGVtZW50cwoJCS8vIHRoZSAudWktZnJvbnQgbG9naWMgKCM4OTg5KQoJCXJldHVybiAhISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktZGF0ZXBpY2tlciIgKS5sZW5ndGg7Cgl9LAoKCV9jcmVhdGVPdmVybGF5OiBmdW5jdGlvbigpIHsKCQlpZiAoICF0aGlzLm9wdGlvbnMubW9kYWwgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIFdlIHVzZSBhIGRlbGF5IGluIGNhc2UgdGhlIG92ZXJsYXkgaXMgY3JlYXRlZCBmcm9tIGFuCgkJLy8gZXZlbnQgdGhhdCB3ZSdyZSBnb2luZyB0byBiZSBjYW5jZWxsaW5nICgjMjgwNCkKCQl2YXIgaXNPcGVuaW5nID0gdHJ1ZTsKCQl0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJaXNPcGVuaW5nID0gZmFsc2U7CgkJfSk7CgoJCWlmICggIXRoaXMuZG9jdW1lbnQuZGF0YSggInVpLWRpYWxvZy1vdmVybGF5cyIgKSApIHsKCgkJCS8vIFByZXZlbnQgdXNlIG9mIGFuY2hvcnMgYW5kIGlucHV0cwoJCQkvLyBVc2luZyBfb24oKSBmb3IgYW4gZXZlbnQgaGFuZGxlciBzaGFyZWQgYWNyb3NzIG1hbnkgaW5zdGFuY2VzIGlzCgkJCS8vIHNhZmUgYmVjYXVzZSB0aGUgZGlhbG9ncyBzdGFjayBhbmQgbXVzdCBiZSBjbG9zZWQgaW4gcmV2ZXJzZSBvcmRlcgoJCQl0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwgewoJCQkJZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCWlmICggaXNPcGVuaW5nICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoKCQkJCQlpZiAoICF0aGlzLl9hbGxvd0ludGVyYWN0aW9uKCBldmVudCApICkgewoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCQl0aGlzLl90cmFja2luZ0luc3RhbmNlcygpWyAwIF0uX2ZvY3VzVGFiYmFibGUoKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCX0KCgkJdGhpcy5vdmVybGF5ID0gJCggIjxkaXY+IiApCgkJCS5hZGRDbGFzcyggInVpLXdpZGdldC1vdmVybGF5IHVpLWZyb250IiApCgkJCS5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApOwoJCXRoaXMuX29uKCB0aGlzLm92ZXJsYXksIHsKCQkJbW91c2Vkb3duOiAiX2tlZXBGb2N1cyIKCQl9KTsKCQl0aGlzLmRvY3VtZW50LmRhdGEoICJ1aS1kaWFsb2ctb3ZlcmxheXMiLAoJCQkodGhpcy5kb2N1bWVudC5kYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiApIHx8IDApICsgMSApOwoJfSwKCglfZGVzdHJveU92ZXJsYXk6IGZ1bmN0aW9uKCkgewoJCWlmICggIXRoaXMub3B0aW9ucy5tb2RhbCApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCB0aGlzLm92ZXJsYXkgKSB7CgkJCXZhciBvdmVybGF5cyA9IHRoaXMuZG9jdW1lbnQuZGF0YSggInVpLWRpYWxvZy1vdmVybGF5cyIgKSAtIDE7CgoJCQlpZiAoICFvdmVybGF5cyApIHsKCQkJCXRoaXMuZG9jdW1lbnQKCQkJCQkudW5iaW5kKCAiZm9jdXNpbiIgKQoJCQkJCS5yZW1vdmVEYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiApOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5kb2N1bWVudC5kYXRhKCAidWktZGlhbG9nLW92ZXJsYXlzIiwgb3ZlcmxheXMgKTsKCQkJfQoKCQkJdGhpcy5vdmVybGF5LnJlbW92ZSgpOwoJCQl0aGlzLm92ZXJsYXkgPSBudWxsOwoJCX0KCX0KfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBEcm9wcGFibGUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vZHJvcHBhYmxlLwogKi8KCgokLndpZGdldCggInVpLmRyb3BwYWJsZSIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICJkcm9wIiwKCW9wdGlvbnM6IHsKCQlhY2NlcHQ6ICIqIiwKCQlhY3RpdmVDbGFzczogZmFsc2UsCgkJYWRkQ2xhc3NlczogdHJ1ZSwKCQlncmVlZHk6IGZhbHNlLAoJCWhvdmVyQ2xhc3M6IGZhbHNlLAoJCXNjb3BlOiAiZGVmYXVsdCIsCgkJdG9sZXJhbmNlOiAiaW50ZXJzZWN0IiwKCgkJLy8gY2FsbGJhY2tzCgkJYWN0aXZhdGU6IG51bGwsCgkJZGVhY3RpdmF0ZTogbnVsbCwKCQlkcm9wOiBudWxsLAoJCW91dDogbnVsbCwKCQlvdmVyOiBudWxsCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgoJCXZhciBwcm9wb3J0aW9ucywKCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJYWNjZXB0ID0gby5hY2NlcHQ7CgoJCXRoaXMuaXNvdmVyID0gZmFsc2U7CgkJdGhpcy5pc291dCA9IHRydWU7CgoJCXRoaXMuYWNjZXB0ID0gJC5pc0Z1bmN0aW9uKCBhY2NlcHQgKSA/IGFjY2VwdCA6IGZ1bmN0aW9uKCBkICkgewoJCQlyZXR1cm4gZC5pcyggYWNjZXB0ICk7CgkJfTsKCgkJdGhpcy5wcm9wb3J0aW9ucyA9IGZ1bmN0aW9uKCAvKiB2YWx1ZVRvV3JpdGUgKi8gKSB7CgkJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJCS8vIFN0b3JlIHRoZSBkcm9wcGFibGUncyBwcm9wb3J0aW9ucwoJCQkJcHJvcG9ydGlvbnMgPSBhcmd1bWVudHNbIDAgXTsKCQkJfSBlbHNlIHsKCQkJCS8vIFJldHJpZXZlIG9yIGRlcml2ZSB0aGUgZHJvcHBhYmxlJ3MgcHJvcG9ydGlvbnMKCQkJCXJldHVybiBwcm9wb3J0aW9ucyA/CgkJCQkJcHJvcG9ydGlvbnMgOgoJCQkJCXByb3BvcnRpb25zID0gewoJCQkJCQl3aWR0aDogdGhpcy5lbGVtZW50WyAwIF0ub2Zmc2V0V2lkdGgsCgkJCQkJCWhlaWdodDogdGhpcy5lbGVtZW50WyAwIF0ub2Zmc2V0SGVpZ2h0CgkJCQkJfTsKCQkJfQoJCX07CgoJCXRoaXMuX2FkZFRvTWFuYWdlciggby5zY29wZSApOwoKCQlvLmFkZENsYXNzZXMgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKCAidWktZHJvcHBhYmxlIiApOwoKCX0sCgoJX2FkZFRvTWFuYWdlcjogZnVuY3Rpb24oIHNjb3BlICkgewoJCS8vIEFkZCB0aGUgcmVmZXJlbmNlIGFuZCBwb3NpdGlvbnMgdG8gdGhlIG1hbmFnZXIKCQkkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBzY29wZSBdID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgc2NvcGUgXSB8fCBbXTsKCQkkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzWyBzY29wZSBdLnB1c2goIHRoaXMgKTsKCX0sCgoJX3NwbGljZTogZnVuY3Rpb24oIGRyb3AgKSB7CgkJdmFyIGkgPSAwOwoJCWZvciAoIDsgaSA8IGRyb3AubGVuZ3RoOyBpKysgKSB7CgkJCWlmICggZHJvcFsgaSBdID09PSB0aGlzICkgewoJCQkJZHJvcC5zcGxpY2UoIGksIDEgKTsKCQkJfQoJCX0KCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXZhciBkcm9wID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgdGhpcy5vcHRpb25zLnNjb3BlIF07CgoJCXRoaXMuX3NwbGljZSggZHJvcCApOwoKCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1kcm9wcGFibGUgdWktZHJvcHBhYmxlLWRpc2FibGVkIiApOwoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCgkJaWYgKCBrZXkgPT09ICJhY2NlcHQiICkgewoJCQl0aGlzLmFjY2VwdCA9ICQuaXNGdW5jdGlvbiggdmFsdWUgKSA/IHZhbHVlIDogZnVuY3Rpb24oIGQgKSB7CgkJCQlyZXR1cm4gZC5pcyggdmFsdWUgKTsKCQkJfTsKCQl9IGVsc2UgaWYgKCBrZXkgPT09ICJzY29wZSIgKSB7CgkJCXZhciBkcm9wID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgdGhpcy5vcHRpb25zLnNjb3BlIF07CgoJCQl0aGlzLl9zcGxpY2UoIGRyb3AgKTsKCQkJdGhpcy5fYWRkVG9NYW5hZ2VyKCB2YWx1ZSApOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCX0sCgoJX2FjdGl2YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGRyYWdnYWJsZSA9ICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7CgkJaWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKSB7CgkJCXRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzICk7CgkJfQoJCWlmICggZHJhZ2dhYmxlICl7CgkJCXRoaXMuX3RyaWdnZXIoICJhY3RpdmF0ZSIsIGV2ZW50LCB0aGlzLnVpKCBkcmFnZ2FibGUgKSApOwoJCX0KCX0sCgoJX2RlYWN0aXZhdGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsKCQlpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyApIHsKCQkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKTsKCQl9CgkJaWYgKCBkcmFnZ2FibGUgKXsKCQkJdGhpcy5fdHJpZ2dlciggImRlYWN0aXZhdGUiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTsKCQl9Cgl9LAoKCV9vdmVyOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCXZhciBkcmFnZ2FibGUgPSAkLnVpLmRkbWFuYWdlci5jdXJyZW50OwoKCQkvLyBCYWlsIGlmIGRyYWdnYWJsZSBhbmQgZHJvcHBhYmxlIGFyZSBzYW1lIGVsZW1lbnQKCQlpZiAoICFkcmFnZ2FibGUgfHwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCB0aGlzLmFjY2VwdC5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkgewoJCQlpZiAoIHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzICkgewoJCQkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApOwoJCQl9CgkJCXRoaXMuX3RyaWdnZXIoICJvdmVyIiwgZXZlbnQsIHRoaXMudWkoIGRyYWdnYWJsZSApICk7CgkJfQoKCX0sCgoJX291dDogZnVuY3Rpb24oIGV2ZW50ICkgewoKCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsKCgkJLy8gQmFpbCBpZiBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBhcmUgc2FtZSBlbGVtZW50CgkJaWYgKCAhZHJhZ2dhYmxlIHx8ICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50IClbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50ICkgKSApIHsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyApIHsKCQkJCXRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MgKTsKCQkJfQoJCQl0aGlzLl90cmlnZ2VyKCAib3V0IiwgZXZlbnQsIHRoaXMudWkoIGRyYWdnYWJsZSApICk7CgkJfQoKCX0sCgoJX2Ryb3A6IGZ1bmN0aW9uKCBldmVudCwgY3VzdG9tICkgewoKCQl2YXIgZHJhZ2dhYmxlID0gY3VzdG9tIHx8ICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQsCgkJCWNoaWxkcmVuSW50ZXJzZWN0aW9uID0gZmFsc2U7CgoJCS8vIEJhaWwgaWYgZHJhZ2dhYmxlIGFuZCBkcm9wcGFibGUgYXJlIHNhbWUgZWxlbWVudAoJCWlmICggIWRyYWdnYWJsZSB8fCAoIGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudCApWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQl0aGlzLmVsZW1lbnQuZmluZCggIjpkYXRhKHVpLWRyb3BwYWJsZSkiICkubm90KCAiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgaW5zdCA9ICQoIHRoaXMgKS5kcm9wcGFibGUoICJpbnN0YW5jZSIgKTsKCQkJaWYgKAoJCQkJaW5zdC5vcHRpb25zLmdyZWVkeSAmJgoJCQkJIWluc3Qub3B0aW9ucy5kaXNhYmxlZCAmJgoJCQkJaW5zdC5vcHRpb25zLnNjb3BlID09PSBkcmFnZ2FibGUub3B0aW9ucy5zY29wZSAmJgoJCQkJaW5zdC5hY2NlcHQuY2FsbCggaW5zdC5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50ICkgKSAmJgoJCQkJJC51aS5pbnRlcnNlY3QoIGRyYWdnYWJsZSwgJC5leHRlbmQoIGluc3QsIHsgb2Zmc2V0OiBpbnN0LmVsZW1lbnQub2Zmc2V0KCkgfSApLCBpbnN0Lm9wdGlvbnMudG9sZXJhbmNlLCBldmVudCApCgkJCSkgeyBjaGlsZHJlbkludGVyc2VjdGlvbiA9IHRydWU7IHJldHVybiBmYWxzZTsgfQoJCX0pOwoJCWlmICggY2hpbGRyZW5JbnRlcnNlY3Rpb24gKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCWlmICggdGhpcy5hY2NlcHQuY2FsbCggdGhpcy5lbGVtZW50WyAwIF0sICggZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50ICkgKSApIHsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MgKSB7CgkJCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyApOwoJCQl9CgkJCWlmICggdGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MgKSB7CgkJCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzICk7CgkJCX0KCQkJdGhpcy5fdHJpZ2dlciggImRyb3AiLCBldmVudCwgdGhpcy51aSggZHJhZ2dhYmxlICkgKTsKCQkJcmV0dXJuIHRoaXMuZWxlbWVudDsKCQl9CgoJCXJldHVybiBmYWxzZTsKCgl9LAoKCXVpOiBmdW5jdGlvbiggYyApIHsKCQlyZXR1cm4gewoJCQlkcmFnZ2FibGU6ICggYy5jdXJyZW50SXRlbSB8fCBjLmVsZW1lbnQgKSwKCQkJaGVscGVyOiBjLmhlbHBlciwKCQkJcG9zaXRpb246IGMucG9zaXRpb24sCgkJCW9mZnNldDogYy5wb3NpdGlvbkFicwoJCX07Cgl9Cgp9KTsKCiQudWkuaW50ZXJzZWN0ID0gKGZ1bmN0aW9uKCkgewoJZnVuY3Rpb24gaXNPdmVyQXhpcyggeCwgcmVmZXJlbmNlLCBzaXplICkgewoJCXJldHVybiAoIHggPj0gcmVmZXJlbmNlICkgJiYgKCB4IDwgKCByZWZlcmVuY2UgKyBzaXplICkgKTsKCX0KCglyZXR1cm4gZnVuY3Rpb24oIGRyYWdnYWJsZSwgZHJvcHBhYmxlLCB0b2xlcmFuY2VNb2RlLCBldmVudCApIHsKCgkJaWYgKCAhZHJvcHBhYmxlLm9mZnNldCApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJdmFyIHgxID0gKCBkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwgZHJhZ2dhYmxlLnBvc2l0aW9uLmFic29sdXRlICkubGVmdCwKCQkJeTEgPSAoIGRyYWdnYWJsZS5wb3NpdGlvbkFicyB8fCBkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUgKS50b3AsCgkJCXgyID0geDEgKyBkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsCgkJCXkyID0geTEgKyBkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LAoJCQlsID0gZHJvcHBhYmxlLm9mZnNldC5sZWZ0LAoJCQl0ID0gZHJvcHBhYmxlLm9mZnNldC50b3AsCgkJCXIgPSBsICsgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkud2lkdGgsCgkJCWIgPSB0ICsgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkuaGVpZ2h0OwoKCQlzd2l0Y2ggKCB0b2xlcmFuY2VNb2RlICkgewoJCWNhc2UgImZpdCI6CgkJCXJldHVybiAoIGwgPD0geDEgJiYgeDIgPD0gciAmJiB0IDw9IHkxICYmIHkyIDw9IGIgKTsKCQljYXNlICJpbnRlcnNlY3QiOgoJCQlyZXR1cm4gKCBsIDwgeDEgKyAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSAmJiAvLyBSaWdodCBIYWxmCgkJCQl4MiAtICggZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC8gMiApIDwgciAmJiAvLyBMZWZ0IEhhbGYKCQkJCXQgPCB5MSArICggZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgKSAmJiAvLyBCb3R0b20gSGFsZgoJCQkJeTIgLSAoIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyICkgPCBiICk7IC8vIFRvcCBIYWxmCgkJY2FzZSAicG9pbnRlciI6CgkJCXJldHVybiBpc092ZXJBeGlzKCBldmVudC5wYWdlWSwgdCwgZHJvcHBhYmxlLnByb3BvcnRpb25zKCkuaGVpZ2h0ICkgJiYgaXNPdmVyQXhpcyggZXZlbnQucGFnZVgsIGwsIGRyb3BwYWJsZS5wcm9wb3J0aW9ucygpLndpZHRoICk7CgkJY2FzZSAidG91Y2giOgoJCQlyZXR1cm4gKAoJCQkJKCB5MSA+PSB0ICYmIHkxIDw9IGIgKSB8fCAvLyBUb3AgZWRnZSB0b3VjaGluZwoJCQkJKCB5MiA+PSB0ICYmIHkyIDw9IGIgKSB8fCAvLyBCb3R0b20gZWRnZSB0b3VjaGluZwoJCQkJKCB5MSA8IHQgJiYgeTIgPiBiICkgLy8gU3Vycm91bmRlZCB2ZXJ0aWNhbGx5CgkJCSkgJiYgKAoJCQkJKCB4MSA+PSBsICYmIHgxIDw9IHIgKSB8fCAvLyBMZWZ0IGVkZ2UgdG91Y2hpbmcKCQkJCSggeDIgPj0gbCAmJiB4MiA8PSByICkgfHwgLy8gUmlnaHQgZWRnZSB0b3VjaGluZwoJCQkJKCB4MSA8IGwgJiYgeDIgPiByICkgLy8gU3Vycm91bmRlZCBob3Jpem9udGFsbHkKCQkJKTsKCQlkZWZhdWx0OgoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfTsKfSkoKTsKCi8qCglUaGlzIG1hbmFnZXIgdHJhY2tzIG9mZnNldHMgb2YgZHJhZ2dhYmxlcyBhbmQgZHJvcHBhYmxlcwoqLwokLnVpLmRkbWFuYWdlciA9IHsKCWN1cnJlbnQ6IG51bGwsCglkcm9wcGFibGVzOiB7ICJkZWZhdWx0IjogW10gfSwKCXByZXBhcmVPZmZzZXRzOiBmdW5jdGlvbiggdCwgZXZlbnQgKSB7CgoJCXZhciBpLCBqLAoJCQltID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgdC5vcHRpb25zLnNjb3BlIF0gfHwgW10sCgkJCXR5cGUgPSBldmVudCA/IGV2ZW50LnR5cGUgOiBudWxsLCAvLyB3b3JrYXJvdW5kIGZvciAjMjMxNwoJCQlsaXN0ID0gKCB0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCApLmZpbmQoICI6ZGF0YSh1aS1kcm9wcGFibGUpIiApLmFkZEJhY2soKTsKCgkJZHJvcHBhYmxlc0xvb3A6IGZvciAoIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKyApIHsKCgkJCS8vIE5vIGRpc2FibGVkIGFuZCBub24tYWNjZXB0ZWQKCQkJaWYgKCBtWyBpIF0ub3B0aW9ucy5kaXNhYmxlZCB8fCAoIHQgJiYgIW1bIGkgXS5hY2NlcHQuY2FsbCggbVsgaSBdLmVsZW1lbnRbIDAgXSwgKCB0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCApICkgKSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQkvLyBGaWx0ZXIgb3V0IGVsZW1lbnRzIGluIHRoZSBjdXJyZW50IGRyYWdnZWQgaXRlbQoJCQlmb3IgKCBqID0gMDsgaiA8IGxpc3QubGVuZ3RoOyBqKysgKSB7CgkJCQlpZiAoIGxpc3RbIGogXSA9PT0gbVsgaSBdLmVsZW1lbnRbIDAgXSApIHsKCQkJCQltWyBpIF0ucHJvcG9ydGlvbnMoKS5oZWlnaHQgPSAwOwoJCQkJCWNvbnRpbnVlIGRyb3BwYWJsZXNMb29wOwoJCQkJfQoJCQl9CgoJCQltWyBpIF0udmlzaWJsZSA9IG1bIGkgXS5lbGVtZW50LmNzcyggImRpc3BsYXkiICkgIT09ICJub25lIjsKCQkJaWYgKCAhbVsgaSBdLnZpc2libGUgKSB7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJLy8gQWN0aXZhdGUgdGhlIGRyb3BwYWJsZSBpZiB1c2VkIGRpcmVjdGx5IGZyb20gZHJhZ2dhYmxlcwoJCQlpZiAoIHR5cGUgPT09ICJtb3VzZWRvd24iICkgewoJCQkJbVsgaSBdLl9hY3RpdmF0ZS5jYWxsKCBtWyBpIF0sIGV2ZW50ICk7CgkJCX0KCgkJCW1bIGkgXS5vZmZzZXQgPSBtWyBpIF0uZWxlbWVudC5vZmZzZXQoKTsKCQkJbVsgaSBdLnByb3BvcnRpb25zKHsgd2lkdGg6IG1bIGkgXS5lbGVtZW50WyAwIF0ub2Zmc2V0V2lkdGgsIGhlaWdodDogbVsgaSBdLmVsZW1lbnRbIDAgXS5vZmZzZXRIZWlnaHQgfSk7CgoJCX0KCgl9LAoJZHJvcDogZnVuY3Rpb24oIGRyYWdnYWJsZSwgZXZlbnQgKSB7CgoJCXZhciBkcm9wcGVkID0gZmFsc2U7CgkJLy8gQ3JlYXRlIGEgY29weSBvZiB0aGUgZHJvcHBhYmxlcyBpbiBjYXNlIHRoZSBsaXN0IGNoYW5nZXMgZHVyaW5nIHRoZSBkcm9wICgjOTExNikKCQkkLmVhY2goICggJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGUgXSB8fCBbXSApLnNsaWNlKCksIGZ1bmN0aW9uKCkgewoKCQkJaWYgKCAhdGhpcy5vcHRpb25zICkgewoJCQkJcmV0dXJuOwoJCQl9CgkJCWlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlZCAmJiB0aGlzLnZpc2libGUgJiYgJC51aS5pbnRlcnNlY3QoIGRyYWdnYWJsZSwgdGhpcywgdGhpcy5vcHRpb25zLnRvbGVyYW5jZSwgZXZlbnQgKSApIHsKCQkJCWRyb3BwZWQgPSB0aGlzLl9kcm9wLmNhbGwoIHRoaXMsIGV2ZW50ICkgfHwgZHJvcHBlZDsKCQkJfQoKCQkJaWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMudmlzaWJsZSAmJiB0aGlzLmFjY2VwdC5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgKCBkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQgKSApICkgewoJCQkJdGhpcy5pc291dCA9IHRydWU7CgkJCQl0aGlzLmlzb3ZlciA9IGZhbHNlOwoJCQkJdGhpcy5fZGVhY3RpdmF0ZS5jYWxsKCB0aGlzLCBldmVudCApOwoJCQl9CgoJCX0pOwoJCXJldHVybiBkcm9wcGVkOwoKCX0sCglkcmFnU3RhcnQ6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkgewoJCS8vIExpc3RlbiBmb3Igc2Nyb2xsaW5nIHNvIHRoYXQgaWYgdGhlIGRyYWdnaW5nIGNhdXNlcyBzY3JvbGxpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBkcm9wcGFibGVzIGNhbiBiZSByZWNhbGN1bGF0ZWQgKHNlZSAjNTAwMykKCQlkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoICJib2R5IiApLmJpbmQoICJzY3JvbGwuZHJvcHBhYmxlIiwgZnVuY3Rpb24oKSB7CgkJCWlmICggIWRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMgKSB7CgkJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApOwoJCQl9CgkJfSk7Cgl9LAoJZHJhZzogZnVuY3Rpb24oIGRyYWdnYWJsZSwgZXZlbnQgKSB7CgoJCS8vIElmIHlvdSBoYXZlIGEgaGlnaGx5IGR5bmFtaWMgcGFnZSwgeW91IG1pZ2h0IHRyeSB0aGlzIG9wdGlvbi4gSXQgcmVuZGVycyBwb3NpdGlvbnMgZXZlcnkgdGltZSB5b3UgbW92ZSB0aGUgbW91c2UuCgkJaWYgKCBkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zICkgewoJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApOwoJCX0KCgkJLy8gUnVuIHRocm91Z2ggYWxsIGRyb3BwYWJsZXMgYW5kIGNoZWNrIHRoZWlyIHBvc2l0aW9ucyBiYXNlZCBvbiBzcGVjaWZpYyB0b2xlcmFuY2Ugb3B0aW9ucwoJCSQuZWFjaCggJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1sgZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGUgXSB8fCBbXSwgZnVuY3Rpb24oKSB7CgoJCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmdyZWVkeUNoaWxkIHx8ICF0aGlzLnZpc2libGUgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXZhciBwYXJlbnRJbnN0YW5jZSwgc2NvcGUsIHBhcmVudCwKCQkJCWludGVyc2VjdHMgPSAkLnVpLmludGVyc2VjdCggZHJhZ2dhYmxlLCB0aGlzLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlLCBldmVudCApLAoJCQkJYyA9ICFpbnRlcnNlY3RzICYmIHRoaXMuaXNvdmVyID8gImlzb3V0IiA6ICggaW50ZXJzZWN0cyAmJiAhdGhpcy5pc292ZXIgPyAiaXNvdmVyIiA6IG51bGwgKTsKCQkJaWYgKCAhYyApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKCB0aGlzLm9wdGlvbnMuZ3JlZWR5ICkgewoJCQkJLy8gZmluZCBkcm9wcGFibGUgcGFyZW50cyB3aXRoIHNhbWUgc2NvcGUKCQkJCXNjb3BlID0gdGhpcy5vcHRpb25zLnNjb3BlOwoJCQkJcGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudHMoICI6ZGF0YSh1aS1kcm9wcGFibGUpIiApLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gJCggdGhpcyApLmRyb3BwYWJsZSggImluc3RhbmNlIiApLm9wdGlvbnMuc2NvcGUgPT09IHNjb3BlOwoJCQkJfSk7CgoJCQkJaWYgKCBwYXJlbnQubGVuZ3RoICkgewoJCQkJCXBhcmVudEluc3RhbmNlID0gJCggcGFyZW50WyAwIF0gKS5kcm9wcGFibGUoICJpbnN0YW5jZSIgKTsKCQkJCQlwYXJlbnRJbnN0YW5jZS5ncmVlZHlDaGlsZCA9ICggYyA9PT0gImlzb3ZlciIgKTsKCQkJCX0KCQkJfQoKCQkJLy8gd2UganVzdCBtb3ZlZCBpbnRvIGEgZ3JlZWR5IGNoaWxkCgkJCWlmICggcGFyZW50SW5zdGFuY2UgJiYgYyA9PT0gImlzb3ZlciIgKSB7CgkJCQlwYXJlbnRJbnN0YW5jZS5pc292ZXIgPSBmYWxzZTsKCQkJCXBhcmVudEluc3RhbmNlLmlzb3V0ID0gdHJ1ZTsKCQkJCXBhcmVudEluc3RhbmNlLl9vdXQuY2FsbCggcGFyZW50SW5zdGFuY2UsIGV2ZW50ICk7CgkJCX0KCgkJCXRoaXNbIGMgXSA9IHRydWU7CgkJCXRoaXNbYyA9PT0gImlzb3V0IiA/ICJpc292ZXIiIDogImlzb3V0Il0gPSBmYWxzZTsKCQkJdGhpc1tjID09PSAiaXNvdmVyIiA/ICJfb3ZlciIgOiAiX291dCJdLmNhbGwoIHRoaXMsIGV2ZW50ICk7CgoJCQkvLyB3ZSBqdXN0IG1vdmVkIG91dCBvZiBhIGdyZWVkeSBjaGlsZAoJCQlpZiAoIHBhcmVudEluc3RhbmNlICYmIGMgPT09ICJpc291dCIgKSB7CgkJCQlwYXJlbnRJbnN0YW5jZS5pc291dCA9IGZhbHNlOwoJCQkJcGFyZW50SW5zdGFuY2UuaXNvdmVyID0gdHJ1ZTsKCQkJCXBhcmVudEluc3RhbmNlLl9vdmVyLmNhbGwoIHBhcmVudEluc3RhbmNlLCBldmVudCApOwoJCQl9CgkJfSk7CgoJfSwKCWRyYWdTdG9wOiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBldmVudCApIHsKCQlkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoICJib2R5IiApLnVuYmluZCggInNjcm9sbC5kcm9wcGFibGUiICk7CgkJLy8gQ2FsbCBwcmVwYXJlT2Zmc2V0cyBvbmUgZmluYWwgdGltZSBzaW5jZSBJRSBkb2VzIG5vdCBmaXJlIHJldHVybiBzY3JvbGwgZXZlbnRzIHdoZW4gb3ZlcmZsb3cgd2FzIGNhdXNlZCBieSBkcmFnIChzZWUgIzUwMDMpCgkJaWYgKCAhZHJhZ2dhYmxlLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyApIHsKCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoIGRyYWdnYWJsZSwgZXZlbnQgKTsKCQl9Cgl9Cn07Cgp2YXIgZHJvcHBhYmxlID0gJC51aS5kcm9wcGFibGU7CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L2VmZmVjdHMtY29yZS8KICovCgoKdmFyIGRhdGFTcGFjZSA9ICJ1aS1lZmZlY3RzLSIsCgoJLy8gQ3JlYXRlIGEgbG9jYWwgalF1ZXJ5IGJlY2F1c2UgalF1ZXJ5IENvbG9yIHJlbGllcyBvbiBpdCBhbmQgdGhlCgkvLyBnbG9iYWwgbWF5IG5vdCBleGlzdCB3aXRoIEFNRCBhbmQgYSBjdXN0b20gYnVpbGQgKCMxMDE5OSkKCWpRdWVyeSA9ICQ7CgokLmVmZmVjdHMgPSB7CgllZmZlY3Q6IHt9Cn07CgovKiEKICogalF1ZXJ5IENvbG9yIEFuaW1hdGlvbnMgdjIuMS4yCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LWNvbG9yCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IFdlZCBKYW4gMTYgMDg6NDc6MDkgMjAxMyAtMDYwMAogKi8KKGZ1bmN0aW9uKCBqUXVlcnksIHVuZGVmaW5lZCApIHsKCgl2YXIgc3RlcEhvb2tzID0gImJhY2tncm91bmRDb2xvciBib3JkZXJCb3R0b21Db2xvciBib3JkZXJMZWZ0Q29sb3IgYm9yZGVyUmlnaHRDb2xvciBib3JkZXJUb3BDb2xvciBjb2xvciBjb2x1bW5SdWxlQ29sb3Igb3V0bGluZUNvbG9yIHRleHREZWNvcmF0aW9uQ29sb3IgdGV4dEVtcGhhc2lzQ29sb3IiLAoKCS8vIHBsdXNlcXVhbHMgdGVzdCBmb3IgKz0gMTAwIC09IDEwMAoJcnBsdXNlcXVhbHMgPSAvXihbXC0rXSk9XHMqKFxkK1wuP1xkKikvLAoJLy8gYSBzZXQgb2YgUkUncyB0aGF0IGNhbiBtYXRjaCBzdHJpbmdzIGFuZCBnZW5lcmF0ZSBjb2xvciB0dXBsZXMuCglzdHJpbmdQYXJzZXJzID0gWyB7CgkJCXJlOiAvcmdiYT9cKFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqKD86LFxzKihcZD8oPzpcLlxkKyk/KVxzKik/XCkvLAoJCQlwYXJzZTogZnVuY3Rpb24oIGV4ZWNSZXN1bHQgKSB7CgkJCQlyZXR1cm4gWwoJCQkJCWV4ZWNSZXN1bHRbIDEgXSwKCQkJCQlleGVjUmVzdWx0WyAyIF0sCgkJCQkJZXhlY1Jlc3VsdFsgMyBdLAoJCQkJCWV4ZWNSZXN1bHRbIDQgXQoJCQkJXTsKCQkJfQoJCX0sIHsKCQkJcmU6IC9yZ2JhP1woXHMqKFxkKyg/OlwuXGQrKT8pXCVccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyosXHMqKFxkKyg/OlwuXGQrKT8pXCVccyooPzosXHMqKFxkPyg/OlwuXGQrKT8pXHMqKT9cKS8sCgkJCXBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHsKCQkJCXJldHVybiBbCgkJCQkJZXhlY1Jlc3VsdFsgMSBdICogMi41NSwKCQkJCQlleGVjUmVzdWx0WyAyIF0gKiAyLjU1LAoJCQkJCWV4ZWNSZXN1bHRbIDMgXSAqIDIuNTUsCgkJCQkJZXhlY1Jlc3VsdFsgNCBdCgkJCQldOwoJCQl9CgkJfSwgewoJCQkvLyB0aGlzIHJlZ2V4IGlnbm9yZXMgQS1GIGJlY2F1c2UgaXQncyBjb21wYXJlZCBhZ2FpbnN0IGFuIGFscmVhZHkgbG93ZXJjYXNlZCBzdHJpbmcKCQkJcmU6IC8jKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pLywKCQkJcGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkgewoJCQkJcmV0dXJuIFsKCQkJCQlwYXJzZUludCggZXhlY1Jlc3VsdFsgMSBdLCAxNiApLAoJCQkJCXBhcnNlSW50KCBleGVjUmVzdWx0WyAyIF0sIDE2ICksCgkJCQkJcGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDMgXSwgMTYgKQoJCQkJXTsKCQkJfQoJCX0sIHsKCQkJLy8gdGhpcyByZWdleCBpZ25vcmVzIEEtRiBiZWNhdXNlIGl0J3MgY29tcGFyZWQgYWdhaW5zdCBhbiBhbHJlYWR5IGxvd2VyY2FzZWQgc3RyaW5nCgkJCXJlOiAvIyhbYS1mMC05XSkoW2EtZjAtOV0pKFthLWYwLTldKS8sCgkJCXBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHsKCQkJCXJldHVybiBbCgkJCQkJcGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDEgXSArIGV4ZWNSZXN1bHRbIDEgXSwgMTYgKSwKCQkJCQlwYXJzZUludCggZXhlY1Jlc3VsdFsgMiBdICsgZXhlY1Jlc3VsdFsgMiBdLCAxNiApLAoJCQkJCXBhcnNlSW50KCBleGVjUmVzdWx0WyAzIF0gKyBleGVjUmVzdWx0WyAzIF0sIDE2ICkKCQkJCV07CgkJCX0KCQl9LCB7CgkJCXJlOiAvaHNsYT9cKFxzKihcZCsoPzpcLlxkKyk/KVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKig/OixccyooXGQ/KD86XC5cZCspPylccyopP1wpLywKCQkJc3BhY2U6ICJoc2xhIiwKCQkJcGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkgewoJCQkJcmV0dXJuIFsKCQkJCQlleGVjUmVzdWx0WyAxIF0sCgkJCQkJZXhlY1Jlc3VsdFsgMiBdIC8gMTAwLAoJCQkJCWV4ZWNSZXN1bHRbIDMgXSAvIDEwMCwKCQkJCQlleGVjUmVzdWx0WyA0IF0KCQkJCV07CgkJCX0KCQl9IF0sCgoJLy8galF1ZXJ5LkNvbG9yKCApCgljb2xvciA9IGpRdWVyeS5Db2xvciA9IGZ1bmN0aW9uKCBjb2xvciwgZ3JlZW4sIGJsdWUsIGFscGhhICkgewoJCXJldHVybiBuZXcgalF1ZXJ5LkNvbG9yLmZuLnBhcnNlKCBjb2xvciwgZ3JlZW4sIGJsdWUsIGFscGhhICk7Cgl9LAoJc3BhY2VzID0gewoJCXJnYmE6IHsKCQkJcHJvcHM6IHsKCQkJCXJlZDogewoJCQkJCWlkeDogMCwKCQkJCQl0eXBlOiAiYnl0ZSIKCQkJCX0sCgkJCQlncmVlbjogewoJCQkJCWlkeDogMSwKCQkJCQl0eXBlOiAiYnl0ZSIKCQkJCX0sCgkJCQlibHVlOiB7CgkJCQkJaWR4OiAyLAoJCQkJCXR5cGU6ICJieXRlIgoJCQkJfQoJCQl9CgkJfSwKCgkJaHNsYTogewoJCQlwcm9wczogewoJCQkJaHVlOiB7CgkJCQkJaWR4OiAwLAoJCQkJCXR5cGU6ICJkZWdyZWVzIgoJCQkJfSwKCQkJCXNhdHVyYXRpb246IHsKCQkJCQlpZHg6IDEsCgkJCQkJdHlwZTogInBlcmNlbnQiCgkJCQl9LAoJCQkJbGlnaHRuZXNzOiB7CgkJCQkJaWR4OiAyLAoJCQkJCXR5cGU6ICJwZXJjZW50IgoJCQkJfQoJCQl9CgkJfQoJfSwKCXByb3BUeXBlcyA9IHsKCQkiYnl0ZSI6IHsKCQkJZmxvb3I6IHRydWUsCgkJCW1heDogMjU1CgkJfSwKCQkicGVyY2VudCI6IHsKCQkJbWF4OiAxCgkJfSwKCQkiZGVncmVlcyI6IHsKCQkJbW9kOiAzNjAsCgkJCWZsb29yOiB0cnVlCgkJfQoJfSwKCXN1cHBvcnQgPSBjb2xvci5zdXBwb3J0ID0ge30sCgoJLy8gZWxlbWVudCBmb3Igc3VwcG9ydCB0ZXN0cwoJc3VwcG9ydEVsZW0gPSBqUXVlcnkoICI8cD4iIClbIDAgXSwKCgkvLyBjb2xvcnMgPSBqUXVlcnkuQ29sb3IubmFtZXMKCWNvbG9ycywKCgkvLyBsb2NhbCBhbGlhc2VzIG9mIGZ1bmN0aW9ucyBjYWxsZWQgb2Z0ZW4KCWVhY2ggPSBqUXVlcnkuZWFjaDsKCi8vIGRldGVybWluZSByZ2JhIHN1cHBvcnQgaW1tZWRpYXRlbHkKc3VwcG9ydEVsZW0uc3R5bGUuY3NzVGV4dCA9ICJiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMSwxLDEsLjUpIjsKc3VwcG9ydC5yZ2JhID0gc3VwcG9ydEVsZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yLmluZGV4T2YoICJyZ2JhIiApID4gLTE7CgovLyBkZWZpbmUgY2FjaGUgbmFtZSBhbmQgYWxwaGEgcHJvcGVydGllcwovLyBmb3IgcmdiYSBhbmQgaHNsYSBzcGFjZXMKZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggc3BhY2VOYW1lLCBzcGFjZSApIHsKCXNwYWNlLmNhY2hlID0gIl8iICsgc3BhY2VOYW1lOwoJc3BhY2UucHJvcHMuYWxwaGEgPSB7CgkJaWR4OiAzLAoJCXR5cGU6ICJwZXJjZW50IiwKCQlkZWY6IDEKCX07Cn0pOwoKZnVuY3Rpb24gY2xhbXAoIHZhbHVlLCBwcm9wLCBhbGxvd0VtcHR5ICkgewoJdmFyIHR5cGUgPSBwcm9wVHlwZXNbIHByb3AudHlwZSBdIHx8IHt9OwoKCWlmICggdmFsdWUgPT0gbnVsbCApIHsKCQlyZXR1cm4gKGFsbG93RW1wdHkgfHwgIXByb3AuZGVmKSA/IG51bGwgOiBwcm9wLmRlZjsKCX0KCgkvLyB+fiBpcyBhbiBzaG9ydCB3YXkgb2YgZG9pbmcgZmxvb3IgZm9yIHBvc2l0aXZlIG51bWJlcnMKCXZhbHVlID0gdHlwZS5mbG9vciA/IH5+dmFsdWUgOiBwYXJzZUZsb2F0KCB2YWx1ZSApOwoKCS8vIElFIHdpbGwgcGFzcyBpbiBlbXB0eSBzdHJpbmdzIGFzIHZhbHVlIGZvciBhbHBoYSwKCS8vIHdoaWNoIHdpbGwgaGl0IHRoaXMgY2FzZQoJaWYgKCBpc05hTiggdmFsdWUgKSApIHsKCQlyZXR1cm4gcHJvcC5kZWY7Cgl9CgoJaWYgKCB0eXBlLm1vZCApIHsKCQkvLyB3ZSBhZGQgbW9kIGJlZm9yZSBtb2RkaW5nIHRvIG1ha2Ugc3VyZSB0aGF0IG5lZ2F0aXZlcyB2YWx1ZXMKCQkvLyBnZXQgY29udmVydGVkIHByb3Blcmx5OiAtMTAgLT4gMzUwCgkJcmV0dXJuICh2YWx1ZSArIHR5cGUubW9kKSAlIHR5cGUubW9kOwoJfQoKCS8vIGZvciBub3cgYWxsIHByb3BlcnR5IHR5cGVzIHdpdGhvdXQgbW9kIGhhdmUgbWluIGFuZCBtYXgKCXJldHVybiAwID4gdmFsdWUgPyAwIDogdHlwZS5tYXggPCB2YWx1ZSA/IHR5cGUubWF4IDogdmFsdWU7Cn0KCmZ1bmN0aW9uIHN0cmluZ1BhcnNlKCBzdHJpbmcgKSB7Cgl2YXIgaW5zdCA9IGNvbG9yKCksCgkJcmdiYSA9IGluc3QuX3JnYmEgPSBbXTsKCglzdHJpbmcgPSBzdHJpbmcudG9Mb3dlckNhc2UoKTsKCgllYWNoKCBzdHJpbmdQYXJzZXJzLCBmdW5jdGlvbiggaSwgcGFyc2VyICkgewoJCXZhciBwYXJzZWQsCgkJCW1hdGNoID0gcGFyc2VyLnJlLmV4ZWMoIHN0cmluZyApLAoJCQl2YWx1ZXMgPSBtYXRjaCAmJiBwYXJzZXIucGFyc2UoIG1hdGNoICksCgkJCXNwYWNlTmFtZSA9IHBhcnNlci5zcGFjZSB8fCAicmdiYSI7CgoJCWlmICggdmFsdWVzICkgewoJCQlwYXJzZWQgPSBpbnN0WyBzcGFjZU5hbWUgXSggdmFsdWVzICk7CgoJCQkvLyBpZiB0aGlzIHdhcyBhbiByZ2JhIHBhcnNlIHRoZSBhc3NpZ25tZW50IG1pZ2h0IGhhcHBlbiB0d2ljZQoJCQkvLyBvaCB3ZWxsLi4uLgoJCQlpbnN0WyBzcGFjZXNbIHNwYWNlTmFtZSBdLmNhY2hlIF0gPSBwYXJzZWRbIHNwYWNlc1sgc3BhY2VOYW1lIF0uY2FjaGUgXTsKCQkJcmdiYSA9IGluc3QuX3JnYmEgPSBwYXJzZWQuX3JnYmE7CgoJCQkvLyBleGl0IGVhY2goIHN0cmluZ1BhcnNlcnMgKSBoZXJlIGJlY2F1c2Ugd2UgbWF0Y2hlZAoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfSk7CgoJLy8gRm91bmQgYSBzdHJpbmdQYXJzZXIgdGhhdCBoYW5kbGVkIGl0CglpZiAoIHJnYmEubGVuZ3RoICkgewoKCQkvLyBpZiB0aGlzIGNhbWUgZnJvbSBhIHBhcnNlZCBzdHJpbmcsIGZvcmNlICJ0cmFuc3BhcmVudCIgd2hlbiBhbHBoYSBpcyAwCgkJLy8gY2hyb21lLCAoYW5kIG1heWJlIG90aGVycykgcmV0dXJuICJ0cmFuc3BhcmVudCIgYXMgcmdiYSgwLDAsMCwwKQoJCWlmICggcmdiYS5qb2luKCkgPT09ICIwLDAsMCwwIiApIHsKCQkJalF1ZXJ5LmV4dGVuZCggcmdiYSwgY29sb3JzLnRyYW5zcGFyZW50ICk7CgkJfQoJCXJldHVybiBpbnN0OwoJfQoKCS8vIG5hbWVkIGNvbG9ycwoJcmV0dXJuIGNvbG9yc1sgc3RyaW5nIF07Cn0KCmNvbG9yLmZuID0galF1ZXJ5LmV4dGVuZCggY29sb3IucHJvdG90eXBlLCB7CglwYXJzZTogZnVuY3Rpb24oIHJlZCwgZ3JlZW4sIGJsdWUsIGFscGhhICkgewoJCWlmICggcmVkID09PSB1bmRlZmluZWQgKSB7CgkJCXRoaXMuX3JnYmEgPSBbIG51bGwsIG51bGwsIG51bGwsIG51bGwgXTsKCQkJcmV0dXJuIHRoaXM7CgkJfQoJCWlmICggcmVkLmpxdWVyeSB8fCByZWQubm9kZVR5cGUgKSB7CgkJCXJlZCA9IGpRdWVyeSggcmVkICkuY3NzKCBncmVlbiApOwoJCQlncmVlbiA9IHVuZGVmaW5lZDsKCQl9CgoJCXZhciBpbnN0ID0gdGhpcywKCQkJdHlwZSA9IGpRdWVyeS50eXBlKCByZWQgKSwKCQkJcmdiYSA9IHRoaXMuX3JnYmEgPSBbXTsKCgkJLy8gbW9yZSB0aGFuIDEgYXJndW1lbnQgc3BlY2lmaWVkIC0gYXNzdW1lICggcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEgKQoJCWlmICggZ3JlZW4gIT09IHVuZGVmaW5lZCApIHsKCQkJcmVkID0gWyByZWQsIGdyZWVuLCBibHVlLCBhbHBoYSBdOwoJCQl0eXBlID0gImFycmF5IjsKCQl9CgoJCWlmICggdHlwZSA9PT0gInN0cmluZyIgKSB7CgkJCXJldHVybiB0aGlzLnBhcnNlKCBzdHJpbmdQYXJzZSggcmVkICkgfHwgY29sb3JzLl9kZWZhdWx0ICk7CgkJfQoKCQlpZiAoIHR5cGUgPT09ICJhcnJheSIgKSB7CgkJCWVhY2goIHNwYWNlcy5yZ2JhLnByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkgewoJCQkJcmdiYVsgcHJvcC5pZHggXSA9IGNsYW1wKCByZWRbIHByb3AuaWR4IF0sIHByb3AgKTsKCQkJfSk7CgkJCXJldHVybiB0aGlzOwoJCX0KCgkJaWYgKCB0eXBlID09PSAib2JqZWN0IiApIHsKCQkJaWYgKCByZWQgaW5zdGFuY2VvZiBjb2xvciApIHsKCQkJCWVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7CgkJCQkJaWYgKCByZWRbIHNwYWNlLmNhY2hlIF0gKSB7CgkJCQkJCWluc3RbIHNwYWNlLmNhY2hlIF0gPSByZWRbIHNwYWNlLmNhY2hlIF0uc2xpY2UoKTsKCQkJCQl9CgkJCQl9KTsKCQkJfSBlbHNlIHsKCQkJCWVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7CgkJCQkJdmFyIGNhY2hlID0gc3BhY2UuY2FjaGU7CgkJCQkJZWFjaCggc3BhY2UucHJvcHMsIGZ1bmN0aW9uKCBrZXksIHByb3AgKSB7CgoJCQkJCQkvLyBpZiB0aGUgY2FjaGUgZG9lc24ndCBleGlzdCwgYW5kIHdlIGtub3cgaG93IHRvIGNvbnZlcnQKCQkJCQkJaWYgKCAhaW5zdFsgY2FjaGUgXSAmJiBzcGFjZS50byApIHsKCgkJCQkJCQkvLyBpZiB0aGUgdmFsdWUgd2FzIG51bGwsIHdlIGRvbid0IG5lZWQgdG8gY29weSBpdAoJCQkJCQkJLy8gaWYgdGhlIGtleSB3YXMgYWxwaGEsIHdlIGRvbid0IG5lZWQgdG8gY29weSBpdCBlaXRoZXIKCQkJCQkJCWlmICgga2V5ID09PSAiYWxwaGEiIHx8IHJlZFsga2V5IF0gPT0gbnVsbCApIHsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQlpbnN0WyBjYWNoZSBdID0gc3BhY2UudG8oIGluc3QuX3JnYmEgKTsKCQkJCQkJfQoKCQkJCQkJLy8gdGhpcyBpcyB0aGUgb25seSBjYXNlIHdoZXJlIHdlIGFsbG93IG51bGxzIGZvciBBTEwgcHJvcGVydGllcy4KCQkJCQkJLy8gY2FsbCBjbGFtcCB3aXRoIGFsd2F5c0FsbG93RW1wdHkKCQkJCQkJaW5zdFsgY2FjaGUgXVsgcHJvcC5pZHggXSA9IGNsYW1wKCByZWRbIGtleSBdLCBwcm9wLCB0cnVlICk7CgkJCQkJfSk7CgoJCQkJCS8vIGV2ZXJ5dGhpbmcgZGVmaW5lZCBidXQgYWxwaGE/CgkJCQkJaWYgKCBpbnN0WyBjYWNoZSBdICYmIGpRdWVyeS5pbkFycmF5KCBudWxsLCBpbnN0WyBjYWNoZSBdLnNsaWNlKCAwLCAzICkgKSA8IDAgKSB7CgkJCQkJCS8vIHVzZSB0aGUgZGVmYXVsdCBvZiAxCgkJCQkJCWluc3RbIGNhY2hlIF1bIDMgXSA9IDE7CgkJCQkJCWlmICggc3BhY2UuZnJvbSApIHsKCQkJCQkJCWluc3QuX3JnYmEgPSBzcGFjZS5mcm9tKCBpbnN0WyBjYWNoZSBdICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJfQoJCQlyZXR1cm4gdGhpczsKCQl9Cgl9LAoJaXM6IGZ1bmN0aW9uKCBjb21wYXJlICkgewoJCXZhciBpcyA9IGNvbG9yKCBjb21wYXJlICksCgkJCXNhbWUgPSB0cnVlLAoJCQlpbnN0ID0gdGhpczsKCgkJZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggXywgc3BhY2UgKSB7CgkJCXZhciBsb2NhbENhY2hlLAoJCQkJaXNDYWNoZSA9IGlzWyBzcGFjZS5jYWNoZSBdOwoJCQlpZiAoaXNDYWNoZSkgewoJCQkJbG9jYWxDYWNoZSA9IGluc3RbIHNwYWNlLmNhY2hlIF0gfHwgc3BhY2UudG8gJiYgc3BhY2UudG8oIGluc3QuX3JnYmEgKSB8fCBbXTsKCQkJCWVhY2goIHNwYWNlLnByb3BzLCBmdW5jdGlvbiggXywgcHJvcCApIHsKCQkJCQlpZiAoIGlzQ2FjaGVbIHByb3AuaWR4IF0gIT0gbnVsbCApIHsKCQkJCQkJc2FtZSA9ICggaXNDYWNoZVsgcHJvcC5pZHggXSA9PT0gbG9jYWxDYWNoZVsgcHJvcC5pZHggXSApOwoJCQkJCQlyZXR1cm4gc2FtZTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoJCQlyZXR1cm4gc2FtZTsKCQl9KTsKCQlyZXR1cm4gc2FtZTsKCX0sCglfc3BhY2U6IGZ1bmN0aW9uKCkgewoJCXZhciB1c2VkID0gW10sCgkJCWluc3QgPSB0aGlzOwoJCWVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7CgkJCWlmICggaW5zdFsgc3BhY2UuY2FjaGUgXSApIHsKCQkJCXVzZWQucHVzaCggc3BhY2VOYW1lICk7CgkJCX0KCQl9KTsKCQlyZXR1cm4gdXNlZC5wb3AoKTsKCX0sCgl0cmFuc2l0aW9uOiBmdW5jdGlvbiggb3RoZXIsIGRpc3RhbmNlICkgewoJCXZhciBlbmQgPSBjb2xvciggb3RoZXIgKSwKCQkJc3BhY2VOYW1lID0gZW5kLl9zcGFjZSgpLAoJCQlzcGFjZSA9IHNwYWNlc1sgc3BhY2VOYW1lIF0sCgkJCXN0YXJ0Q29sb3IgPSB0aGlzLmFscGhhKCkgPT09IDAgPyBjb2xvciggInRyYW5zcGFyZW50IiApIDogdGhpcywKCQkJc3RhcnQgPSBzdGFydENvbG9yWyBzcGFjZS5jYWNoZSBdIHx8IHNwYWNlLnRvKCBzdGFydENvbG9yLl9yZ2JhICksCgkJCXJlc3VsdCA9IHN0YXJ0LnNsaWNlKCk7CgoJCWVuZCA9IGVuZFsgc3BhY2UuY2FjaGUgXTsKCQllYWNoKCBzcGFjZS5wcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHsKCQkJdmFyIGluZGV4ID0gcHJvcC5pZHgsCgkJCQlzdGFydFZhbHVlID0gc3RhcnRbIGluZGV4IF0sCgkJCQllbmRWYWx1ZSA9IGVuZFsgaW5kZXggXSwKCQkJCXR5cGUgPSBwcm9wVHlwZXNbIHByb3AudHlwZSBdIHx8IHt9OwoKCQkJLy8gaWYgbnVsbCwgZG9uJ3Qgb3ZlcnJpZGUgc3RhcnQgdmFsdWUKCQkJaWYgKCBlbmRWYWx1ZSA9PT0gbnVsbCApIHsKCQkJCXJldHVybjsKCQkJfQoJCQkvLyBpZiBudWxsIC0gdXNlIGVuZAoJCQlpZiAoIHN0YXJ0VmFsdWUgPT09IG51bGwgKSB7CgkJCQlyZXN1bHRbIGluZGV4IF0gPSBlbmRWYWx1ZTsKCQkJfSBlbHNlIHsKCQkJCWlmICggdHlwZS5tb2QgKSB7CgkJCQkJaWYgKCBlbmRWYWx1ZSAtIHN0YXJ0VmFsdWUgPiB0eXBlLm1vZCAvIDIgKSB7CgkJCQkJCXN0YXJ0VmFsdWUgKz0gdHlwZS5tb2Q7CgkJCQkJfSBlbHNlIGlmICggc3RhcnRWYWx1ZSAtIGVuZFZhbHVlID4gdHlwZS5tb2QgLyAyICkgewoJCQkJCQlzdGFydFZhbHVlIC09IHR5cGUubW9kOwoJCQkJCX0KCQkJCX0KCQkJCXJlc3VsdFsgaW5kZXggXSA9IGNsYW1wKCAoIGVuZFZhbHVlIC0gc3RhcnRWYWx1ZSApICogZGlzdGFuY2UgKyBzdGFydFZhbHVlLCBwcm9wICk7CgkJCX0KCQl9KTsKCQlyZXR1cm4gdGhpc1sgc3BhY2VOYW1lIF0oIHJlc3VsdCApOwoJfSwKCWJsZW5kOiBmdW5jdGlvbiggb3BhcXVlICkgewoJCS8vIGlmIHdlIGFyZSBhbHJlYWR5IG9wYXF1ZSAtIHJldHVybiBvdXJzZWxmCgkJaWYgKCB0aGlzLl9yZ2JhWyAzIF0gPT09IDEgKSB7CgkJCXJldHVybiB0aGlzOwoJCX0KCgkJdmFyIHJnYiA9IHRoaXMuX3JnYmEuc2xpY2UoKSwKCQkJYSA9IHJnYi5wb3AoKSwKCQkJYmxlbmQgPSBjb2xvciggb3BhcXVlICkuX3JnYmE7CgoJCXJldHVybiBjb2xvciggalF1ZXJ5Lm1hcCggcmdiLCBmdW5jdGlvbiggdiwgaSApIHsKCQkJcmV0dXJuICggMSAtIGEgKSAqIGJsZW5kWyBpIF0gKyBhICogdjsKCQl9KSk7Cgl9LAoJdG9SZ2JhU3RyaW5nOiBmdW5jdGlvbigpIHsKCQl2YXIgcHJlZml4ID0gInJnYmEoIiwKCQkJcmdiYSA9IGpRdWVyeS5tYXAoIHRoaXMuX3JnYmEsIGZ1bmN0aW9uKCB2LCBpICkgewoJCQkJcmV0dXJuIHYgPT0gbnVsbCA/ICggaSA+IDIgPyAxIDogMCApIDogdjsKCQkJfSk7CgoJCWlmICggcmdiYVsgMyBdID09PSAxICkgewoJCQlyZ2JhLnBvcCgpOwoJCQlwcmVmaXggPSAicmdiKCI7CgkJfQoKCQlyZXR1cm4gcHJlZml4ICsgcmdiYS5qb2luKCkgKyAiKSI7Cgl9LAoJdG9Ic2xhU3RyaW5nOiBmdW5jdGlvbigpIHsKCQl2YXIgcHJlZml4ID0gImhzbGEoIiwKCQkJaHNsYSA9IGpRdWVyeS5tYXAoIHRoaXMuaHNsYSgpLCBmdW5jdGlvbiggdiwgaSApIHsKCQkJCWlmICggdiA9PSBudWxsICkgewoJCQkJCXYgPSBpID4gMiA/IDEgOiAwOwoJCQkJfQoKCQkJCS8vIGNhdGNoIDEgYW5kIDIKCQkJCWlmICggaSAmJiBpIDwgMyApIHsKCQkJCQl2ID0gTWF0aC5yb3VuZCggdiAqIDEwMCApICsgIiUiOwoJCQkJfQoJCQkJcmV0dXJuIHY7CgkJCX0pOwoKCQlpZiAoIGhzbGFbIDMgXSA9PT0gMSApIHsKCQkJaHNsYS5wb3AoKTsKCQkJcHJlZml4ID0gImhzbCgiOwoJCX0KCQlyZXR1cm4gcHJlZml4ICsgaHNsYS5qb2luKCkgKyAiKSI7Cgl9LAoJdG9IZXhTdHJpbmc6IGZ1bmN0aW9uKCBpbmNsdWRlQWxwaGEgKSB7CgkJdmFyIHJnYmEgPSB0aGlzLl9yZ2JhLnNsaWNlKCksCgkJCWFscGhhID0gcmdiYS5wb3AoKTsKCgkJaWYgKCBpbmNsdWRlQWxwaGEgKSB7CgkJCXJnYmEucHVzaCggfn4oIGFscGhhICogMjU1ICkgKTsKCQl9CgoJCXJldHVybiAiIyIgKyBqUXVlcnkubWFwKCByZ2JhLCBmdW5jdGlvbiggdiApIHsKCgkJCS8vIGRlZmF1bHQgdG8gMCB3aGVuIG51bGxzIGV4aXN0CgkJCXYgPSAoIHYgfHwgMCApLnRvU3RyaW5nKCAxNiApOwoJCQlyZXR1cm4gdi5sZW5ndGggPT09IDEgPyAiMCIgKyB2IDogdjsKCQl9KS5qb2luKCIiKTsKCX0sCgl0b1N0cmluZzogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuX3JnYmFbIDMgXSA9PT0gMCA/ICJ0cmFuc3BhcmVudCIgOiB0aGlzLnRvUmdiYVN0cmluZygpOwoJfQp9KTsKY29sb3IuZm4ucGFyc2UucHJvdG90eXBlID0gY29sb3IuZm47CgovLyBoc2xhIGNvbnZlcnNpb25zIGFkYXB0ZWQgZnJvbToKLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9tYWFzaGFhY2svc291cmNlL2Jyb3dzZS9wYWNrYWdlcy9ncmFwaGljcy90cnVuay9zcmMvZ3JhcGhpY3MvY29sb3JzL0hVRTJSR0IuYXM/cj01MDIxCgpmdW5jdGlvbiBodWUycmdiKCBwLCBxLCBoICkgewoJaCA9ICggaCArIDEgKSAlIDE7CglpZiAoIGggKiA2IDwgMSApIHsKCQlyZXR1cm4gcCArICggcSAtIHAgKSAqIGggKiA2OwoJfQoJaWYgKCBoICogMiA8IDEpIHsKCQlyZXR1cm4gcTsKCX0KCWlmICggaCAqIDMgPCAyICkgewoJCXJldHVybiBwICsgKCBxIC0gcCApICogKCAoIDIgLyAzICkgLSBoICkgKiA2OwoJfQoJcmV0dXJuIHA7Cn0KCnNwYWNlcy5oc2xhLnRvID0gZnVuY3Rpb24oIHJnYmEgKSB7CglpZiAoIHJnYmFbIDAgXSA9PSBudWxsIHx8IHJnYmFbIDEgXSA9PSBudWxsIHx8IHJnYmFbIDIgXSA9PSBudWxsICkgewoJCXJldHVybiBbIG51bGwsIG51bGwsIG51bGwsIHJnYmFbIDMgXSBdOwoJfQoJdmFyIHIgPSByZ2JhWyAwIF0gLyAyNTUsCgkJZyA9IHJnYmFbIDEgXSAvIDI1NSwKCQliID0gcmdiYVsgMiBdIC8gMjU1LAoJCWEgPSByZ2JhWyAzIF0sCgkJbWF4ID0gTWF0aC5tYXgoIHIsIGcsIGIgKSwKCQltaW4gPSBNYXRoLm1pbiggciwgZywgYiApLAoJCWRpZmYgPSBtYXggLSBtaW4sCgkJYWRkID0gbWF4ICsgbWluLAoJCWwgPSBhZGQgKiAwLjUsCgkJaCwgczsKCglpZiAoIG1pbiA9PT0gbWF4ICkgewoJCWggPSAwOwoJfSBlbHNlIGlmICggciA9PT0gbWF4ICkgewoJCWggPSAoIDYwICogKCBnIC0gYiApIC8gZGlmZiApICsgMzYwOwoJfSBlbHNlIGlmICggZyA9PT0gbWF4ICkgewoJCWggPSAoIDYwICogKCBiIC0gciApIC8gZGlmZiApICsgMTIwOwoJfSBlbHNlIHsKCQloID0gKCA2MCAqICggciAtIGcgKSAvIGRpZmYgKSArIDI0MDsKCX0KCgkvLyBjaHJvbWEgKGRpZmYpID09IDAgbWVhbnMgZ3JleXNjYWxlIHdoaWNoLCBieSBkZWZpbml0aW9uLCBzYXR1cmF0aW9uID0gMCUKCS8vIG90aGVyd2lzZSwgc2F0dXJhdGlvbiBpcyBiYXNlZCBvbiB0aGUgcmF0aW8gb2YgY2hyb21hIChkaWZmKSB0byBsaWdodG5lc3MgKGFkZCkKCWlmICggZGlmZiA9PT0gMCApIHsKCQlzID0gMDsKCX0gZWxzZSBpZiAoIGwgPD0gMC41ICkgewoJCXMgPSBkaWZmIC8gYWRkOwoJfSBlbHNlIHsKCQlzID0gZGlmZiAvICggMiAtIGFkZCApOwoJfQoJcmV0dXJuIFsgTWF0aC5yb3VuZChoKSAlIDM2MCwgcywgbCwgYSA9PSBudWxsID8gMSA6IGEgXTsKfTsKCnNwYWNlcy5oc2xhLmZyb20gPSBmdW5jdGlvbiggaHNsYSApIHsKCWlmICggaHNsYVsgMCBdID09IG51bGwgfHwgaHNsYVsgMSBdID09IG51bGwgfHwgaHNsYVsgMiBdID09IG51bGwgKSB7CgkJcmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgaHNsYVsgMyBdIF07Cgl9Cgl2YXIgaCA9IGhzbGFbIDAgXSAvIDM2MCwKCQlzID0gaHNsYVsgMSBdLAoJCWwgPSBoc2xhWyAyIF0sCgkJYSA9IGhzbGFbIDMgXSwKCQlxID0gbCA8PSAwLjUgPyBsICogKCAxICsgcyApIDogbCArIHMgLSBsICogcywKCQlwID0gMiAqIGwgLSBxOwoKCXJldHVybiBbCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCArICggMSAvIDMgKSApICogMjU1ICksCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCApICogMjU1ICksCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCAtICggMSAvIDMgKSApICogMjU1ICksCgkJYQoJXTsKfTsKCmVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7Cgl2YXIgcHJvcHMgPSBzcGFjZS5wcm9wcywKCQljYWNoZSA9IHNwYWNlLmNhY2hlLAoJCXRvID0gc3BhY2UudG8sCgkJZnJvbSA9IHNwYWNlLmZyb207CgoJLy8gbWFrZXMgcmdiYSgpIGFuZCBoc2xhKCkKCWNvbG9yLmZuWyBzcGFjZU5hbWUgXSA9IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCgkJLy8gZ2VuZXJhdGUgYSBjYWNoZSBmb3IgdGhpcyBzcGFjZSBpZiBpdCBkb2Vzbid0IGV4aXN0CgkJaWYgKCB0byAmJiAhdGhpc1sgY2FjaGUgXSApIHsKCQkJdGhpc1sgY2FjaGUgXSA9IHRvKCB0aGlzLl9yZ2JhICk7CgkJfQoJCWlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHsKCQkJcmV0dXJuIHRoaXNbIGNhY2hlIF0uc2xpY2UoKTsKCQl9CgoJCXZhciByZXQsCgkJCXR5cGUgPSBqUXVlcnkudHlwZSggdmFsdWUgKSwKCQkJYXJyID0gKCB0eXBlID09PSAiYXJyYXkiIHx8IHR5cGUgPT09ICJvYmplY3QiICkgPyB2YWx1ZSA6IGFyZ3VtZW50cywKCQkJbG9jYWwgPSB0aGlzWyBjYWNoZSBdLnNsaWNlKCk7CgoJCWVhY2goIHByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkgewoJCQl2YXIgdmFsID0gYXJyWyB0eXBlID09PSAib2JqZWN0IiA/IGtleSA6IHByb3AuaWR4IF07CgkJCWlmICggdmFsID09IG51bGwgKSB7CgkJCQl2YWwgPSBsb2NhbFsgcHJvcC5pZHggXTsKCQkJfQoJCQlsb2NhbFsgcHJvcC5pZHggXSA9IGNsYW1wKCB2YWwsIHByb3AgKTsKCQl9KTsKCgkJaWYgKCBmcm9tICkgewoJCQlyZXQgPSBjb2xvciggZnJvbSggbG9jYWwgKSApOwoJCQlyZXRbIGNhY2hlIF0gPSBsb2NhbDsKCQkJcmV0dXJuIHJldDsKCQl9IGVsc2UgewoJCQlyZXR1cm4gY29sb3IoIGxvY2FsICk7CgkJfQoJfTsKCgkvLyBtYWtlcyByZWQoKSBncmVlbigpIGJsdWUoKSBhbHBoYSgpIGh1ZSgpIHNhdHVyYXRpb24oKSBsaWdodG5lc3MoKQoJZWFjaCggcHJvcHMsIGZ1bmN0aW9uKCBrZXksIHByb3AgKSB7CgkJLy8gYWxwaGEgaXMgaW5jbHVkZWQgaW4gbW9yZSB0aGFuIG9uZSBzcGFjZQoJCWlmICggY29sb3IuZm5bIGtleSBdICkgewoJCQlyZXR1cm47CgkJfQoJCWNvbG9yLmZuWyBrZXkgXSA9IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIHZ0eXBlID0galF1ZXJ5LnR5cGUoIHZhbHVlICksCgkJCQlmbiA9ICgga2V5ID09PSAiYWxwaGEiID8gKCB0aGlzLl9oc2xhID8gImhzbGEiIDogInJnYmEiICkgOiBzcGFjZU5hbWUgKSwKCQkJCWxvY2FsID0gdGhpc1sgZm4gXSgpLAoJCQkJY3VyID0gbG9jYWxbIHByb3AuaWR4IF0sCgkJCQltYXRjaDsKCgkJCWlmICggdnR5cGUgPT09ICJ1bmRlZmluZWQiICkgewoJCQkJcmV0dXJuIGN1cjsKCQkJfQoKCQkJaWYgKCB2dHlwZSA9PT0gImZ1bmN0aW9uIiApIHsKCQkJCXZhbHVlID0gdmFsdWUuY2FsbCggdGhpcywgY3VyICk7CgkJCQl2dHlwZSA9IGpRdWVyeS50eXBlKCB2YWx1ZSApOwoJCQl9CgkJCWlmICggdmFsdWUgPT0gbnVsbCAmJiBwcm9wLmVtcHR5ICkgewoJCQkJcmV0dXJuIHRoaXM7CgkJCX0KCQkJaWYgKCB2dHlwZSA9PT0gInN0cmluZyIgKSB7CgkJCQltYXRjaCA9IHJwbHVzZXF1YWxzLmV4ZWMoIHZhbHVlICk7CgkJCQlpZiAoIG1hdGNoICkgewoJCQkJCXZhbHVlID0gY3VyICsgcGFyc2VGbG9hdCggbWF0Y2hbIDIgXSApICogKCBtYXRjaFsgMSBdID09PSAiKyIgPyAxIDogLTEgKTsKCQkJCX0KCQkJfQoJCQlsb2NhbFsgcHJvcC5pZHggXSA9IHZhbHVlOwoJCQlyZXR1cm4gdGhpc1sgZm4gXSggbG9jYWwgKTsKCQl9OwoJfSk7Cn0pOwoKLy8gYWRkIGNzc0hvb2sgYW5kIC5meC5zdGVwIGZ1bmN0aW9uIGZvciBlYWNoIG5hbWVkIGhvb2suCi8vIGFjY2VwdCBhIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2YgcHJvcGVydGllcwpjb2xvci5ob29rID0gZnVuY3Rpb24oIGhvb2sgKSB7Cgl2YXIgaG9va3MgPSBob29rLnNwbGl0KCAiICIgKTsKCWVhY2goIGhvb2tzLCBmdW5jdGlvbiggaSwgaG9vayApIHsKCQlqUXVlcnkuY3NzSG9va3NbIGhvb2sgXSA9IHsKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQl2YXIgcGFyc2VkLCBjdXJFbGVtLAoJCQkJCWJhY2tncm91bmRDb2xvciA9ICIiOwoKCQkJCWlmICggdmFsdWUgIT09ICJ0cmFuc3BhcmVudCIgJiYgKCBqUXVlcnkudHlwZSggdmFsdWUgKSAhPT0gInN0cmluZyIgfHwgKCBwYXJzZWQgPSBzdHJpbmdQYXJzZSggdmFsdWUgKSApICkgKSB7CgkJCQkJdmFsdWUgPSBjb2xvciggcGFyc2VkIHx8IHZhbHVlICk7CgkJCQkJaWYgKCAhc3VwcG9ydC5yZ2JhICYmIHZhbHVlLl9yZ2JhWyAzIF0gIT09IDEgKSB7CgkJCQkJCWN1ckVsZW0gPSBob29rID09PSAiYmFja2dyb3VuZENvbG9yIiA/IGVsZW0ucGFyZW50Tm9kZSA6IGVsZW07CgkJCQkJCXdoaWxlICgKCQkJCQkJCShiYWNrZ3JvdW5kQ29sb3IgPT09ICIiIHx8IGJhY2tncm91bmRDb2xvciA9PT0gInRyYW5zcGFyZW50IikgJiYKCQkJCQkJCWN1ckVsZW0gJiYgY3VyRWxlbS5zdHlsZQoJCQkJCQkpIHsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJYmFja2dyb3VuZENvbG9yID0galF1ZXJ5LmNzcyggY3VyRWxlbSwgImJhY2tncm91bmRDb2xvciIgKTsKCQkJCQkJCQljdXJFbGVtID0gY3VyRWxlbS5wYXJlbnROb2RlOwoJCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCXZhbHVlID0gdmFsdWUuYmxlbmQoIGJhY2tncm91bmRDb2xvciAmJiBiYWNrZ3JvdW5kQ29sb3IgIT09ICJ0cmFuc3BhcmVudCIgPwoJCQkJCQkJYmFja2dyb3VuZENvbG9yIDoKCQkJCQkJCSJfZGVmYXVsdCIgKTsKCQkJCQl9CgoJCQkJCXZhbHVlID0gdmFsdWUudG9SZ2JhU3RyaW5nKCk7CgkJCQl9CgkJCQl0cnkgewoJCQkJCWVsZW0uc3R5bGVbIGhvb2sgXSA9IHZhbHVlOwoJCQkJfSBjYXRjaCggZSApIHsKCQkJCQkvLyB3cmFwcGVkIHRvIHByZXZlbnQgSUUgZnJvbSB0aHJvd2luZyBlcnJvcnMgb24gImludmFsaWQiIHZhbHVlcyBsaWtlICdhdXRvJyBvciAnaW5oZXJpdCcKCQkJCX0KCQkJfQoJCX07CgkJalF1ZXJ5LmZ4LnN0ZXBbIGhvb2sgXSA9IGZ1bmN0aW9uKCBmeCApIHsKCQkJaWYgKCAhZnguY29sb3JJbml0ICkgewoJCQkJZnguc3RhcnQgPSBjb2xvciggZnguZWxlbSwgaG9vayApOwoJCQkJZnguZW5kID0gY29sb3IoIGZ4LmVuZCApOwoJCQkJZnguY29sb3JJbml0ID0gdHJ1ZTsKCQkJfQoJCQlqUXVlcnkuY3NzSG9va3NbIGhvb2sgXS5zZXQoIGZ4LmVsZW0sIGZ4LnN0YXJ0LnRyYW5zaXRpb24oIGZ4LmVuZCwgZngucG9zICkgKTsKCQl9OwoJfSk7Cgp9OwoKY29sb3IuaG9vayggc3RlcEhvb2tzICk7CgpqUXVlcnkuY3NzSG9va3MuYm9yZGVyQ29sb3IgPSB7CglleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl2YXIgZXhwYW5kZWQgPSB7fTsKCgkJZWFjaCggWyAiVG9wIiwgIlJpZ2h0IiwgIkJvdHRvbSIsICJMZWZ0IiBdLCBmdW5jdGlvbiggaSwgcGFydCApIHsKCQkJZXhwYW5kZWRbICJib3JkZXIiICsgcGFydCArICJDb2xvciIgXSA9IHZhbHVlOwoJCX0pOwoJCXJldHVybiBleHBhbmRlZDsKCX0KfTsKCi8vIEJhc2ljIGNvbG9yIG5hbWVzIG9ubHkuCi8vIFVzYWdlIG9mIGFueSBvZiB0aGUgb3RoZXIgY29sb3IgbmFtZXMgcmVxdWlyZXMgYWRkaW5nIHlvdXJzZWxmIG9yIGluY2x1ZGluZwovLyBqcXVlcnkuY29sb3Iuc3ZnLW5hbWVzLmpzLgpjb2xvcnMgPSBqUXVlcnkuQ29sb3IubmFtZXMgPSB7CgkvLyA0LjEuIEJhc2ljIGNvbG9yIGtleXdvcmRzCglhcXVhOiAiIzAwZmZmZiIsCglibGFjazogIiMwMDAwMDAiLAoJYmx1ZTogIiMwMDAwZmYiLAoJZnVjaHNpYTogIiNmZjAwZmYiLAoJZ3JheTogIiM4MDgwODAiLAoJZ3JlZW46ICIjMDA4MDAwIiwKCWxpbWU6ICIjMDBmZjAwIiwKCW1hcm9vbjogIiM4MDAwMDAiLAoJbmF2eTogIiMwMDAwODAiLAoJb2xpdmU6ICIjODA4MDAwIiwKCXB1cnBsZTogIiM4MDAwODAiLAoJcmVkOiAiI2ZmMDAwMCIsCglzaWx2ZXI6ICIjYzBjMGMwIiwKCXRlYWw6ICIjMDA4MDgwIiwKCXdoaXRlOiAiI2ZmZmZmZiIsCgl5ZWxsb3c6ICIjZmZmZjAwIiwKCgkvLyA0LjIuMy4gInRyYW5zcGFyZW50IiBjb2xvciBrZXl3b3JkCgl0cmFuc3BhcmVudDogWyBudWxsLCBudWxsLCBudWxsLCAwIF0sCgoJX2RlZmF1bHQ6ICIjZmZmZmZmIgp9OwoKfSkoIGpRdWVyeSApOwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBDTEFTUyBBTklNQVRJT05TICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KKGZ1bmN0aW9uKCkgewoKdmFyIGNsYXNzQW5pbWF0aW9uQWN0aW9ucyA9IFsgImFkZCIsICJyZW1vdmUiLCAidG9nZ2xlIiBdLAoJc2hvcnRoYW5kU3R5bGVzID0gewoJCWJvcmRlcjogMSwKCQlib3JkZXJCb3R0b206IDEsCgkJYm9yZGVyQ29sb3I6IDEsCgkJYm9yZGVyTGVmdDogMSwKCQlib3JkZXJSaWdodDogMSwKCQlib3JkZXJUb3A6IDEsCgkJYm9yZGVyV2lkdGg6IDEsCgkJbWFyZ2luOiAxLAoJCXBhZGRpbmc6IDEKCX07CgokLmVhY2goWyAiYm9yZGVyTGVmdFN0eWxlIiwgImJvcmRlclJpZ2h0U3R5bGUiLCAiYm9yZGVyQm90dG9tU3R5bGUiLCAiYm9yZGVyVG9wU3R5bGUiIF0sIGZ1bmN0aW9uKCBfLCBwcm9wICkgewoJJC5meC5zdGVwWyBwcm9wIF0gPSBmdW5jdGlvbiggZnggKSB7CgkJaWYgKCBmeC5lbmQgIT09ICJub25lIiAmJiAhZnguc2V0QXR0ciB8fCBmeC5wb3MgPT09IDEgJiYgIWZ4LnNldEF0dHIgKSB7CgkJCWpRdWVyeS5zdHlsZSggZnguZWxlbSwgcHJvcCwgZnguZW5kICk7CgkJCWZ4LnNldEF0dHIgPSB0cnVlOwoJCX0KCX07Cn0pOwoKZnVuY3Rpb24gZ2V0RWxlbWVudFN0eWxlcyggZWxlbSApIHsKCXZhciBrZXksIGxlbiwKCQlzdHlsZSA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyA/CgkJCWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtLCBudWxsICkgOgoJCQllbGVtLmN1cnJlbnRTdHlsZSwKCQlzdHlsZXMgPSB7fTsKCglpZiAoIHN0eWxlICYmIHN0eWxlLmxlbmd0aCAmJiBzdHlsZVsgMCBdICYmIHN0eWxlWyBzdHlsZVsgMCBdIF0gKSB7CgkJbGVuID0gc3R5bGUubGVuZ3RoOwoJCXdoaWxlICggbGVuLS0gKSB7CgkJCWtleSA9IHN0eWxlWyBsZW4gXTsKCQkJaWYgKCB0eXBlb2Ygc3R5bGVbIGtleSBdID09PSAic3RyaW5nIiApIHsKCQkJCXN0eWxlc1sgJC5jYW1lbENhc2UoIGtleSApIF0gPSBzdHlsZVsga2V5IF07CgkJCX0KCQl9CgkvLyBzdXBwb3J0OiBPcGVyYSwgSUUgPDkKCX0gZWxzZSB7CgkJZm9yICgga2V5IGluIHN0eWxlICkgewoJCQlpZiAoIHR5cGVvZiBzdHlsZVsga2V5IF0gPT09ICJzdHJpbmciICkgewoJCQkJc3R5bGVzWyBrZXkgXSA9IHN0eWxlWyBrZXkgXTsKCQkJfQoJCX0KCX0KCglyZXR1cm4gc3R5bGVzOwp9CgpmdW5jdGlvbiBzdHlsZURpZmZlcmVuY2UoIG9sZFN0eWxlLCBuZXdTdHlsZSApIHsKCXZhciBkaWZmID0ge30sCgkJbmFtZSwgdmFsdWU7CgoJZm9yICggbmFtZSBpbiBuZXdTdHlsZSApIHsKCQl2YWx1ZSA9IG5ld1N0eWxlWyBuYW1lIF07CgkJaWYgKCBvbGRTdHlsZVsgbmFtZSBdICE9PSB2YWx1ZSApIHsKCQkJaWYgKCAhc2hvcnRoYW5kU3R5bGVzWyBuYW1lIF0gKSB7CgkJCQlpZiAoICQuZnguc3RlcFsgbmFtZSBdIHx8ICFpc05hTiggcGFyc2VGbG9hdCggdmFsdWUgKSApICkgewoJCQkJCWRpZmZbIG5hbWUgXSA9IHZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJfQoKCXJldHVybiBkaWZmOwp9CgovLyBzdXBwb3J0OiBqUXVlcnkgPDEuOAppZiAoICEkLmZuLmFkZEJhY2sgKSB7CgkkLmZuLmFkZEJhY2sgPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID8KCQkJdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKQoJCSk7Cgl9Owp9CgokLmVmZmVjdHMuYW5pbWF0ZUNsYXNzID0gZnVuY3Rpb24oIHZhbHVlLCBkdXJhdGlvbiwgZWFzaW5nLCBjYWxsYmFjayApIHsKCXZhciBvID0gJC5zcGVlZCggZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2sgKTsKCglyZXR1cm4gdGhpcy5xdWV1ZSggZnVuY3Rpb24oKSB7CgkJdmFyIGFuaW1hdGVkID0gJCggdGhpcyApLAoJCQliYXNlQ2xhc3MgPSBhbmltYXRlZC5hdHRyKCAiY2xhc3MiICkgfHwgIiIsCgkJCWFwcGx5Q2xhc3NDaGFuZ2UsCgkJCWFsbEFuaW1hdGlvbnMgPSBvLmNoaWxkcmVuID8gYW5pbWF0ZWQuZmluZCggIioiICkuYWRkQmFjaygpIDogYW5pbWF0ZWQ7CgoJCS8vIG1hcCB0aGUgYW5pbWF0ZWQgb2JqZWN0cyB0byBzdG9yZSB0aGUgb3JpZ2luYWwgc3R5bGVzLgoJCWFsbEFuaW1hdGlvbnMgPSBhbGxBbmltYXRpb25zLm1hcChmdW5jdGlvbigpIHsKCQkJdmFyIGVsID0gJCggdGhpcyApOwoJCQlyZXR1cm4gewoJCQkJZWw6IGVsLAoJCQkJc3RhcnQ6IGdldEVsZW1lbnRTdHlsZXMoIHRoaXMgKQoJCQl9OwoJCX0pOwoKCQkvLyBhcHBseSBjbGFzcyBjaGFuZ2UKCQlhcHBseUNsYXNzQ2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJCSQuZWFjaCggY2xhc3NBbmltYXRpb25BY3Rpb25zLCBmdW5jdGlvbihpLCBhY3Rpb24pIHsKCQkJCWlmICggdmFsdWVbIGFjdGlvbiBdICkgewoJCQkJCWFuaW1hdGVkWyBhY3Rpb24gKyAiQ2xhc3MiIF0oIHZhbHVlWyBhY3Rpb24gXSApOwoJCQkJfQoJCQl9KTsKCQl9OwoJCWFwcGx5Q2xhc3NDaGFuZ2UoKTsKCgkJLy8gbWFwIGFsbCBhbmltYXRlZCBvYmplY3RzIGFnYWluIC0gY2FsY3VsYXRlIG5ldyBzdHlsZXMgYW5kIGRpZmYKCQlhbGxBbmltYXRpb25zID0gYWxsQW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24oKSB7CgkJCXRoaXMuZW5kID0gZ2V0RWxlbWVudFN0eWxlcyggdGhpcy5lbFsgMCBdICk7CgkJCXRoaXMuZGlmZiA9IHN0eWxlRGlmZmVyZW5jZSggdGhpcy5zdGFydCwgdGhpcy5lbmQgKTsKCQkJcmV0dXJuIHRoaXM7CgkJfSk7CgoJCS8vIGFwcGx5IG9yaWdpbmFsIGNsYXNzCgkJYW5pbWF0ZWQuYXR0ciggImNsYXNzIiwgYmFzZUNsYXNzICk7CgoJCS8vIG1hcCBhbGwgYW5pbWF0ZWQgb2JqZWN0cyBhZ2FpbiAtIHRoaXMgdGltZSBjb2xsZWN0aW5nIGEgcHJvbWlzZQoJCWFsbEFuaW1hdGlvbnMgPSBhbGxBbmltYXRpb25zLm1hcChmdW5jdGlvbigpIHsKCQkJdmFyIHN0eWxlSW5mbyA9IHRoaXMsCgkJCQlkZmQgPSAkLkRlZmVycmVkKCksCgkJCQlvcHRzID0gJC5leHRlbmQoe30sIG8sIHsKCQkJCQlxdWV1ZTogZmFsc2UsCgkJCQkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQkJCQlkZmQucmVzb2x2ZSggc3R5bGVJbmZvICk7CgkJCQkJfQoJCQkJfSk7CgoJCQl0aGlzLmVsLmFuaW1hdGUoIHRoaXMuZGlmZiwgb3B0cyApOwoJCQlyZXR1cm4gZGZkLnByb21pc2UoKTsKCQl9KTsKCgkJLy8gb25jZSBhbGwgYW5pbWF0aW9ucyBoYXZlIGNvbXBsZXRlZDoKCQkkLndoZW4uYXBwbHkoICQsIGFsbEFuaW1hdGlvbnMuZ2V0KCkgKS5kb25lKGZ1bmN0aW9uKCkgewoKCQkJLy8gc2V0IHRoZSBmaW5hbCBjbGFzcwoJCQlhcHBseUNsYXNzQ2hhbmdlKCk7CgoJCQkvLyBmb3IgZWFjaCBhbmltYXRlZCBlbGVtZW50LAoJCQkvLyBjbGVhciBhbGwgY3NzIHByb3BlcnRpZXMgdGhhdCB3ZXJlIGFuaW1hdGVkCgkJCSQuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbigpIHsKCQkJCXZhciBlbCA9IHRoaXMuZWw7CgkJCQkkLmVhY2goIHRoaXMuZGlmZiwgZnVuY3Rpb24oa2V5KSB7CgkJCQkJZWwuY3NzKCBrZXksICIiICk7CgkJCQl9KTsKCQkJfSk7CgoJCQkvLyB0aGlzIGlzIGd1YXJudGVlZCB0byBiZSB0aGVyZSBpZiB5b3UgdXNlIGpRdWVyeS5zcGVlZCgpCgkJCS8vIGl0IGFsc28gaGFuZGxlcyBkZXF1ZXVpbmcgdGhlIG5leHQgYW5pbS4uLgoJCQlvLmNvbXBsZXRlLmNhbGwoIGFuaW1hdGVkWyAwIF0gKTsKCQl9KTsKCX0pOwp9OwoKJC5mbi5leHRlbmQoewoJYWRkQ2xhc3M6IChmdW5jdGlvbiggb3JpZyApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIGNsYXNzTmFtZXMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgewoJCQlyZXR1cm4gc3BlZWQgPwoJCQkJJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLAoJCQkJCXsgYWRkOiBjbGFzc05hbWVzIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgOgoJCQkJb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfTsKCX0pKCAkLmZuLmFkZENsYXNzICksCgoJcmVtb3ZlQ2xhc3M6IChmdW5jdGlvbiggb3JpZyApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIGNsYXNzTmFtZXMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgewoJCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPwoJCQkJJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLAoJCQkJCXsgcmVtb3ZlOiBjbGFzc05hbWVzIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgOgoJCQkJb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfTsKCX0pKCAkLmZuLnJlbW92ZUNsYXNzICksCgoJdG9nZ2xlQ2xhc3M6IChmdW5jdGlvbiggb3JpZyApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIGNsYXNzTmFtZXMsIGZvcmNlLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQkJaWYgKCB0eXBlb2YgZm9yY2UgPT09ICJib29sZWFuIiB8fCBmb3JjZSA9PT0gdW5kZWZpbmVkICkgewoJCQkJaWYgKCAhc3BlZWQgKSB7CgkJCQkJLy8gd2l0aG91dCBzcGVlZCBwYXJhbWV0ZXIKCQkJCQlyZXR1cm4gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsCgkJCQkJCShmb3JjZSA/IHsgYWRkOiBjbGFzc05hbWVzIH0gOiB7IHJlbW92ZTogY2xhc3NOYW1lcyB9KSwKCQkJCQkJc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIHdpdGhvdXQgZm9yY2UgcGFyYW1ldGVyCgkJCQlyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLAoJCQkJCXsgdG9nZ2xlOiBjbGFzc05hbWVzIH0sIGZvcmNlLCBzcGVlZCwgZWFzaW5nICk7CgkJCX0KCQl9OwoJfSkoICQuZm4udG9nZ2xlQ2xhc3MgKSwKCglzd2l0Y2hDbGFzczogZnVuY3Rpb24oIHJlbW92ZSwgYWRkLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjaykgewoJCXJldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsIHsKCQkJYWRkOiBhZGQsCgkJCXJlbW92ZTogcmVtb3ZlCgkJfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCX0KfSk7Cgp9KSgpOwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVGRkVDVFMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCihmdW5jdGlvbigpIHsKCiQuZXh0ZW5kKCAkLmVmZmVjdHMsIHsKCXZlcnNpb246ICIxLjExLjEiLAoKCS8vIFNhdmVzIGEgc2V0IG9mIHByb3BlcnRpZXMgaW4gYSBkYXRhIHN0b3JhZ2UKCXNhdmU6IGZ1bmN0aW9uKCBlbGVtZW50LCBzZXQgKSB7CgkJZm9yICggdmFyIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkgewoJCQlpZiAoIHNldFsgaSBdICE9PSBudWxsICkgewoJCQkJZWxlbWVudC5kYXRhKCBkYXRhU3BhY2UgKyBzZXRbIGkgXSwgZWxlbWVudFsgMCBdLnN0eWxlWyBzZXRbIGkgXSBdICk7CgkJCX0KCQl9Cgl9LAoKCS8vIFJlc3RvcmVzIGEgc2V0IG9mIHByZXZpb3VzbHkgc2F2ZWQgcHJvcGVydGllcyBmcm9tIGEgZGF0YSBzdG9yYWdlCglyZXN0b3JlOiBmdW5jdGlvbiggZWxlbWVudCwgc2V0ICkgewoJCXZhciB2YWwsIGk7CgkJZm9yICggaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7CgkJCWlmICggc2V0WyBpIF0gIT09IG51bGwgKSB7CgkJCQl2YWwgPSBlbGVtZW50LmRhdGEoIGRhdGFTcGFjZSArIHNldFsgaSBdICk7CgkJCQkvLyBzdXBwb3J0OiBqUXVlcnkgMS42LjIKCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk5MTcKCQkJCS8vIGpRdWVyeSAxLjYuMiBpbmNvcnJlY3RseSByZXR1cm5zIHVuZGVmaW5lZCBmb3IgYW55IGZhbHN5IHZhbHVlLgoJCQkJLy8gV2UgY2FuJ3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuICIiIGFuZCAwIGhlcmUsIHNvIHdlIGp1c3QgYXNzdW1lCgkJCQkvLyBlbXB0eSBzdHJpbmcgc2luY2UgaXQncyBsaWtlbHkgdG8gYmUgYSBtb3JlIGNvbW1vbiB2YWx1ZS4uLgoJCQkJaWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHsKCQkJCQl2YWwgPSAiIjsKCQkJCX0KCQkJCWVsZW1lbnQuY3NzKCBzZXRbIGkgXSwgdmFsICk7CgkJCX0KCQl9Cgl9LAoKCXNldE1vZGU6IGZ1bmN0aW9uKCBlbCwgbW9kZSApIHsKCQlpZiAobW9kZSA9PT0gInRvZ2dsZSIpIHsKCQkJbW9kZSA9IGVsLmlzKCAiOmhpZGRlbiIgKSA/ICJzaG93IiA6ICJoaWRlIjsKCQl9CgkJcmV0dXJuIG1vZGU7Cgl9LAoKCS8vIFRyYW5zbGF0ZXMgYSBbdG9wLGxlZnRdIGFycmF5IGludG8gYSBiYXNlbGluZSB2YWx1ZQoJLy8gdGhpcyBzaG91bGQgYmUgYSBsaXR0bGUgbW9yZSBmbGV4aWJsZSBpbiB0aGUgZnV0dXJlIHRvIGhhbmRsZSBhIHN0cmluZyAmIGhhc2gKCWdldEJhc2VsaW5lOiBmdW5jdGlvbiggb3JpZ2luLCBvcmlnaW5hbCApIHsKCQl2YXIgeSwgeDsKCQlzd2l0Y2ggKCBvcmlnaW5bIDAgXSApIHsKCQkJY2FzZSAidG9wIjogeSA9IDA7IGJyZWFrOwoJCQljYXNlICJtaWRkbGUiOiB5ID0gMC41OyBicmVhazsKCQkJY2FzZSAiYm90dG9tIjogeSA9IDE7IGJyZWFrOwoJCQlkZWZhdWx0OiB5ID0gb3JpZ2luWyAwIF0gLyBvcmlnaW5hbC5oZWlnaHQ7CgkJfQoJCXN3aXRjaCAoIG9yaWdpblsgMSBdICkgewoJCQljYXNlICJsZWZ0IjogeCA9IDA7IGJyZWFrOwoJCQljYXNlICJjZW50ZXIiOiB4ID0gMC41OyBicmVhazsKCQkJY2FzZSAicmlnaHQiOiB4ID0gMTsgYnJlYWs7CgkJCWRlZmF1bHQ6IHggPSBvcmlnaW5bIDEgXSAvIG9yaWdpbmFsLndpZHRoOwoJCX0KCQlyZXR1cm4gewoJCQl4OiB4LAoJCQl5OiB5CgkJfTsKCX0sCgoJLy8gV3JhcHMgdGhlIGVsZW1lbnQgYXJvdW5kIGEgd3JhcHBlciB0aGF0IGNvcGllcyBwb3NpdGlvbiBwcm9wZXJ0aWVzCgljcmVhdGVXcmFwcGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCgkJLy8gaWYgdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSB3cmFwcGVkLCByZXR1cm4gaXQKCQlpZiAoIGVsZW1lbnQucGFyZW50KCkuaXMoICIudWktZWZmZWN0cy13cmFwcGVyIiApKSB7CgkJCXJldHVybiBlbGVtZW50LnBhcmVudCgpOwoJCX0KCgkJLy8gd3JhcCB0aGUgZWxlbWVudAoJCXZhciBwcm9wcyA9IHsKCQkJCXdpZHRoOiBlbGVtZW50Lm91dGVyV2lkdGgodHJ1ZSksCgkJCQloZWlnaHQ6IGVsZW1lbnQub3V0ZXJIZWlnaHQodHJ1ZSksCgkJCQkiZmxvYXQiOiBlbGVtZW50LmNzcyggImZsb2F0IiApCgkJCX0sCgkJCXdyYXBwZXIgPSAkKCAiPGRpdj48L2Rpdj4iICkKCQkJCS5hZGRDbGFzcyggInVpLWVmZmVjdHMtd3JhcHBlciIgKQoJCQkJLmNzcyh7CgkJCQkJZm9udFNpemU6ICIxMDAlIiwKCQkJCQliYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQiLAoJCQkJCWJvcmRlcjogIm5vbmUiLAoJCQkJCW1hcmdpbjogMCwKCQkJCQlwYWRkaW5nOiAwCgkJCQl9KSwKCQkJLy8gU3RvcmUgdGhlIHNpemUgaW4gY2FzZSB3aWR0aC9oZWlnaHQgYXJlIGRlZmluZWQgaW4gJSAtIEZpeGVzICM1MjQ1CgkJCXNpemUgPSB7CgkJCQl3aWR0aDogZWxlbWVudC53aWR0aCgpLAoJCQkJaGVpZ2h0OiBlbGVtZW50LmhlaWdodCgpCgkJCX0sCgkJCWFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CgoJCS8vIHN1cHBvcnQ6IEZpcmVmb3gKCQkvLyBGaXJlZm94IGluY29ycmVjdGx5IGV4cG9zZXMgYW5vbnltb3VzIGNvbnRlbnQKCQkvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NjE2NjQKCQl0cnkgewoJCQlhY3RpdmUuaWQ7CgkJfSBjYXRjaCggZSApIHsKCQkJYWN0aXZlID0gZG9jdW1lbnQuYm9keTsKCQl9CgoJCWVsZW1lbnQud3JhcCggd3JhcHBlciApOwoKCQkvLyBGaXhlcyAjNzU5NSAtIEVsZW1lbnRzIGxvc2UgZm9jdXMgd2hlbiB3cmFwcGVkLgoJCWlmICggZWxlbWVudFsgMCBdID09PSBhY3RpdmUgfHwgJC5jb250YWlucyggZWxlbWVudFsgMCBdLCBhY3RpdmUgKSApIHsKCQkJJCggYWN0aXZlICkuZm9jdXMoKTsKCQl9CgoJCXdyYXBwZXIgPSBlbGVtZW50LnBhcmVudCgpOyAvL0hvdGZpeCBmb3IgalF1ZXJ5IDEuNCBzaW5jZSBzb21lIGNoYW5nZSBpbiB3cmFwKCkgc2VlbXMgdG8gYWN0dWFsbHkgbG9zZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSB3cmFwcGVkIGVsZW1lbnQKCgkJLy8gdHJhbnNmZXIgcG9zaXRpb25pbmcgcHJvcGVydGllcyB0byB0aGUgd3JhcHBlcgoJCWlmICggZWxlbWVudC5jc3MoICJwb3NpdGlvbiIgKSA9PT0gInN0YXRpYyIgKSB7CgkJCXdyYXBwZXIuY3NzKHsgcG9zaXRpb246ICJyZWxhdGl2ZSIgfSk7CgkJCWVsZW1lbnQuY3NzKHsgcG9zaXRpb246ICJyZWxhdGl2ZSIgfSk7CgkJfSBlbHNlIHsKCQkJJC5leHRlbmQoIHByb3BzLCB7CgkJCQlwb3NpdGlvbjogZWxlbWVudC5jc3MoICJwb3NpdGlvbiIgKSwKCQkJCXpJbmRleDogZWxlbWVudC5jc3MoICJ6LWluZGV4IiApCgkJCX0pOwoJCQkkLmVhY2goWyAidG9wIiwgImxlZnQiLCAiYm90dG9tIiwgInJpZ2h0IiBdLCBmdW5jdGlvbihpLCBwb3MpIHsKCQkJCXByb3BzWyBwb3MgXSA9IGVsZW1lbnQuY3NzKCBwb3MgKTsKCQkJCWlmICggaXNOYU4oIHBhcnNlSW50KCBwcm9wc1sgcG9zIF0sIDEwICkgKSApIHsKCQkJCQlwcm9wc1sgcG9zIF0gPSAiYXV0byI7CgkJCQl9CgkJCX0pOwoJCQllbGVtZW50LmNzcyh7CgkJCQlwb3NpdGlvbjogInJlbGF0aXZlIiwKCQkJCXRvcDogMCwKCQkJCWxlZnQ6IDAsCgkJCQlyaWdodDogImF1dG8iLAoJCQkJYm90dG9tOiAiYXV0byIKCQkJfSk7CgkJfQoJCWVsZW1lbnQuY3NzKHNpemUpOwoKCQlyZXR1cm4gd3JhcHBlci5jc3MoIHByb3BzICkuc2hvdygpOwoJfSwKCglyZW1vdmVXcmFwcGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl2YXIgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKCgkJaWYgKCBlbGVtZW50LnBhcmVudCgpLmlzKCAiLnVpLWVmZmVjdHMtd3JhcHBlciIgKSApIHsKCQkJZWxlbWVudC5wYXJlbnQoKS5yZXBsYWNlV2l0aCggZWxlbWVudCApOwoKCQkJLy8gRml4ZXMgIzc1OTUgLSBFbGVtZW50cyBsb3NlIGZvY3VzIHdoZW4gd3JhcHBlZC4KCQkJaWYgKCBlbGVtZW50WyAwIF0gPT09IGFjdGl2ZSB8fCAkLmNvbnRhaW5zKCBlbGVtZW50WyAwIF0sIGFjdGl2ZSApICkgewoJCQkJJCggYWN0aXZlICkuZm9jdXMoKTsKCQkJfQoJCX0KCgkJcmV0dXJuIGVsZW1lbnQ7Cgl9LAoKCXNldFRyYW5zaXRpb246IGZ1bmN0aW9uKCBlbGVtZW50LCBsaXN0LCBmYWN0b3IsIHZhbHVlICkgewoJCXZhbHVlID0gdmFsdWUgfHwge307CgkJJC5lYWNoKCBsaXN0LCBmdW5jdGlvbiggaSwgeCApIHsKCQkJdmFyIHVuaXQgPSBlbGVtZW50LmNzc1VuaXQoIHggKTsKCQkJaWYgKCB1bml0WyAwIF0gPiAwICkgewoJCQkJdmFsdWVbIHggXSA9IHVuaXRbIDAgXSAqIGZhY3RvciArIHVuaXRbIDEgXTsKCQkJfQoJCX0pOwoJCXJldHVybiB2YWx1ZTsKCX0KfSk7CgovLyByZXR1cm4gYW4gZWZmZWN0IG9wdGlvbnMgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gcGFyYW1ldGVyczoKZnVuY3Rpb24gX25vcm1hbGl6ZUFyZ3VtZW50cyggZWZmZWN0LCBvcHRpb25zLCBzcGVlZCwgY2FsbGJhY2sgKSB7CgoJLy8gYWxsb3cgcGFzc2luZyBhbGwgb3B0aW9ucyBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyCglpZiAoICQuaXNQbGFpbk9iamVjdCggZWZmZWN0ICkgKSB7CgkJb3B0aW9ucyA9IGVmZmVjdDsKCQllZmZlY3QgPSBlZmZlY3QuZWZmZWN0OwoJfQoKCS8vIGNvbnZlcnQgdG8gYW4gb2JqZWN0CgllZmZlY3QgPSB7IGVmZmVjdDogZWZmZWN0IH07CgoJLy8gY2F0Y2ggKGVmZmVjdCwgbnVsbCwgLi4uKQoJaWYgKCBvcHRpb25zID09IG51bGwgKSB7CgkJb3B0aW9ucyA9IHt9OwoJfQoKCS8vIGNhdGNoIChlZmZlY3QsIGNhbGxiYWNrKQoJaWYgKCAkLmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHsKCQljYWxsYmFjayA9IG9wdGlvbnM7CgkJc3BlZWQgPSBudWxsOwoJCW9wdGlvbnMgPSB7fTsKCX0KCgkvLyBjYXRjaCAoZWZmZWN0LCBzcGVlZCwgPykKCWlmICggdHlwZW9mIG9wdGlvbnMgPT09ICJudW1iZXIiIHx8ICQuZnguc3BlZWRzWyBvcHRpb25zIF0gKSB7CgkJY2FsbGJhY2sgPSBzcGVlZDsKCQlzcGVlZCA9IG9wdGlvbnM7CgkJb3B0aW9ucyA9IHt9OwoJfQoKCS8vIGNhdGNoIChlZmZlY3QsIG9wdGlvbnMsIGNhbGxiYWNrKQoJaWYgKCAkLmlzRnVuY3Rpb24oIHNwZWVkICkgKSB7CgkJY2FsbGJhY2sgPSBzcGVlZDsKCQlzcGVlZCA9IG51bGw7Cgl9CgoJLy8gYWRkIG9wdGlvbnMgdG8gZWZmZWN0CglpZiAoIG9wdGlvbnMgKSB7CgkJJC5leHRlbmQoIGVmZmVjdCwgb3B0aW9ucyApOwoJfQoKCXNwZWVkID0gc3BlZWQgfHwgb3B0aW9ucy5kdXJhdGlvbjsKCWVmZmVjdC5kdXJhdGlvbiA9ICQuZngub2ZmID8gMCA6CgkJdHlwZW9mIHNwZWVkID09PSAibnVtYmVyIiA/IHNwZWVkIDoKCQlzcGVlZCBpbiAkLmZ4LnNwZWVkcyA/ICQuZnguc3BlZWRzWyBzcGVlZCBdIDoKCQkkLmZ4LnNwZWVkcy5fZGVmYXVsdDsKCgllZmZlY3QuY29tcGxldGUgPSBjYWxsYmFjayB8fCBvcHRpb25zLmNvbXBsZXRlOwoKCXJldHVybiBlZmZlY3Q7Cn0KCmZ1bmN0aW9uIHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKCBvcHRpb24gKSB7CgkvLyBWYWxpZCBzdGFuZGFyZCBzcGVlZHMgKG5vdGhpbmcsIG51bWJlciwgbmFtZWQgc3BlZWQpCglpZiAoICFvcHRpb24gfHwgdHlwZW9mIG9wdGlvbiA9PT0gIm51bWJlciIgfHwgJC5meC5zcGVlZHNbIG9wdGlvbiBdICkgewoJCXJldHVybiB0cnVlOwoJfQoKCS8vIEludmFsaWQgc3RyaW5ncyAtIHRyZWF0IGFzICJub3JtYWwiIHNwZWVkCglpZiAoIHR5cGVvZiBvcHRpb24gPT09ICJzdHJpbmciICYmICEkLmVmZmVjdHMuZWZmZWN0WyBvcHRpb24gXSApIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvLyBDb21wbGV0ZSBjYWxsYmFjawoJaWYgKCAkLmlzRnVuY3Rpb24oIG9wdGlvbiApICkgewoJCXJldHVybiB0cnVlOwoJfQoKCS8vIE9wdGlvbnMgaGFzaCAoYnV0IG5vdCBuYW1pbmcgYW4gZWZmZWN0KQoJaWYgKCB0eXBlb2Ygb3B0aW9uID09PSAib2JqZWN0IiAmJiAhb3B0aW9uLmVmZmVjdCApIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvLyBEaWRuJ3QgbWF0Y2ggYW55IHN0YW5kYXJkIEFQSQoJcmV0dXJuIGZhbHNlOwp9CgokLmZuLmV4dGVuZCh7CgllZmZlY3Q6IGZ1bmN0aW9uKCAvKiBlZmZlY3QsIG9wdGlvbnMsIHNwZWVkLCBjYWxsYmFjayAqLyApIHsKCQl2YXIgYXJncyA9IF9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLAoJCQltb2RlID0gYXJncy5tb2RlLAoJCQlxdWV1ZSA9IGFyZ3MucXVldWUsCgkJCWVmZmVjdE1ldGhvZCA9ICQuZWZmZWN0cy5lZmZlY3RbIGFyZ3MuZWZmZWN0IF07CgoJCWlmICggJC5meC5vZmYgfHwgIWVmZmVjdE1ldGhvZCApIHsKCQkJLy8gZGVsZWdhdGUgdG8gdGhlIG9yaWdpbmFsIG1ldGhvZCAoZS5nLiwgLnNob3coKSkgaWYgcG9zc2libGUKCQkJaWYgKCBtb2RlICkgewoJCQkJcmV0dXJuIHRoaXNbIG1vZGUgXSggYXJncy5kdXJhdGlvbiwgYXJncy5jb21wbGV0ZSApOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBhcmdzLmNvbXBsZXRlICkgewoJCQkJCQlhcmdzLmNvbXBsZXRlLmNhbGwoIHRoaXMgKTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoJCX0KCgkJZnVuY3Rpb24gcnVuKCBuZXh0ICkgewoJCQl2YXIgZWxlbSA9ICQoIHRoaXMgKSwKCQkJCWNvbXBsZXRlID0gYXJncy5jb21wbGV0ZSwKCQkJCW1vZGUgPSBhcmdzLm1vZGU7CgoJCQlmdW5jdGlvbiBkb25lKCkgewoJCQkJaWYgKCAkLmlzRnVuY3Rpb24oIGNvbXBsZXRlICkgKSB7CgkJCQkJY29tcGxldGUuY2FsbCggZWxlbVswXSApOwoJCQkJfQoJCQkJaWYgKCAkLmlzRnVuY3Rpb24oIG5leHQgKSApIHsKCQkJCQluZXh0KCk7CgkJCQl9CgkJCX0KCgkJCS8vIElmIHRoZSBlbGVtZW50IGFscmVhZHkgaGFzIHRoZSBjb3JyZWN0IGZpbmFsIHN0YXRlLCBkZWxlZ2F0ZSB0bwoJCQkvLyB0aGUgY29yZSBtZXRob2RzIHNvIHRoZSBpbnRlcm5hbCB0cmFja2luZyBvZiAib2xkZGlzcGxheSIgd29ya3MuCgkJCWlmICggZWxlbS5pcyggIjpoaWRkZW4iICkgPyBtb2RlID09PSAiaGlkZSIgOiBtb2RlID09PSAic2hvdyIgKSB7CgkJCQllbGVtWyBtb2RlIF0oKTsKCQkJCWRvbmUoKTsKCQkJfSBlbHNlIHsKCQkJCWVmZmVjdE1ldGhvZC5jYWxsKCBlbGVtWzBdLCBhcmdzLCBkb25lICk7CgkJCX0KCQl9CgoJCXJldHVybiBxdWV1ZSA9PT0gZmFsc2UgPyB0aGlzLmVhY2goIHJ1biApIDogdGhpcy5xdWV1ZSggcXVldWUgfHwgImZ4IiwgcnVuICk7Cgl9LAoKCXNob3c6IChmdW5jdGlvbiggb3JpZyApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIG9wdGlvbiApIHsKCQkJaWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgKSB7CgkJCQlyZXR1cm4gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCX0gZWxzZSB7CgkJCQl2YXIgYXJncyA9IF9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJYXJncy5tb2RlID0gInNob3ciOwoJCQkJcmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwoIHRoaXMsIGFyZ3MgKTsKCQkJfQoJCX07Cgl9KSggJC5mbi5zaG93ICksCgoJaGlkZTogKGZ1bmN0aW9uKCBvcmlnICkgewoJCXJldHVybiBmdW5jdGlvbiggb3B0aW9uICkgewoJCQlpZiAoIHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKCBvcHRpb24gKSApIHsKCQkJCXJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJfSBlbHNlIHsKCQkJCXZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQlhcmdzLm1vZGUgPSAiaGlkZSI7CgkJCQlyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCggdGhpcywgYXJncyApOwoJCQl9CgkJfTsKCX0pKCAkLmZuLmhpZGUgKSwKCgl0b2dnbGU6IChmdW5jdGlvbiggb3JpZyApIHsKCQlyZXR1cm4gZnVuY3Rpb24oIG9wdGlvbiApIHsKCQkJaWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgfHwgdHlwZW9mIG9wdGlvbiA9PT0gImJvb2xlYW4iICkgewoJCQkJcmV0dXJuIG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQl9IGVsc2UgewoJCQkJdmFyIGFyZ3MgPSBfbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCWFyZ3MubW9kZSA9ICJ0b2dnbGUiOwoJCQkJcmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwoIHRoaXMsIGFyZ3MgKTsKCQkJfQoJCX07Cgl9KSggJC5mbi50b2dnbGUgKSwKCgkvLyBoZWxwZXIgZnVuY3Rpb25zCgljc3NVbml0OiBmdW5jdGlvbihrZXkpIHsKCQl2YXIgc3R5bGUgPSB0aGlzLmNzcygga2V5ICksCgkJCXZhbCA9IFtdOwoKCQkkLmVhY2goIFsgImVtIiwgInB4IiwgIiUiLCAicHQiIF0sIGZ1bmN0aW9uKCBpLCB1bml0ICkgewoJCQlpZiAoIHN0eWxlLmluZGV4T2YoIHVuaXQgKSA+IDAgKSB7CgkJCQl2YWwgPSBbIHBhcnNlRmxvYXQoIHN0eWxlICksIHVuaXQgXTsKCQkJfQoJCX0pOwoJCXJldHVybiB2YWw7Cgl9Cn0pOwoKfSkoKTsKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFQVNJTkcgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgooZnVuY3Rpb24oKSB7CgovLyBiYXNlZCBvbiBlYXNpbmcgZXF1YXRpb25zIGZyb20gUm9iZXJ0IFBlbm5lciAoaHR0cDovL3d3dy5yb2JlcnRwZW5uZXIuY29tL2Vhc2luZykKCnZhciBiYXNlRWFzaW5ncyA9IHt9OwoKJC5lYWNoKCBbICJRdWFkIiwgIkN1YmljIiwgIlF1YXJ0IiwgIlF1aW50IiwgIkV4cG8iIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkgewoJYmFzZUVhc2luZ3NbIG5hbWUgXSA9IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiBNYXRoLnBvdyggcCwgaSArIDIgKTsKCX07Cn0pOwoKJC5leHRlbmQoIGJhc2VFYXNpbmdzLCB7CglTaW5lOiBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gMSAtIE1hdGguY29zKCBwICogTWF0aC5QSSAvIDIgKTsKCX0sCglDaXJjOiBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gMSAtIE1hdGguc3FydCggMSAtIHAgKiBwICk7Cgl9LAoJRWxhc3RpYzogZnVuY3Rpb24oIHAgKSB7CgkJcmV0dXJuIHAgPT09IDAgfHwgcCA9PT0gMSA/IHAgOgoJCQktTWF0aC5wb3coIDIsIDggKiAocCAtIDEpICkgKiBNYXRoLnNpbiggKCAocCAtIDEpICogODAgLSA3LjUgKSAqIE1hdGguUEkgLyAxNSApOwoJfSwKCUJhY2s6IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiBwICogcCAqICggMyAqIHAgLSAyICk7Cgl9LAoJQm91bmNlOiBmdW5jdGlvbiggcCApIHsKCQl2YXIgcG93MiwKCQkJYm91bmNlID0gNDsKCgkJd2hpbGUgKCBwIDwgKCAoIHBvdzIgPSBNYXRoLnBvdyggMiwgLS1ib3VuY2UgKSApIC0gMSApIC8gMTEgKSB7fQoJCXJldHVybiAxIC8gTWF0aC5wb3coIDQsIDMgLSBib3VuY2UgKSAtIDcuNTYyNSAqIE1hdGgucG93KCAoIHBvdzIgKiAzIC0gMiApIC8gMjIgLSBwLCAyICk7Cgl9Cn0pOwoKJC5lYWNoKCBiYXNlRWFzaW5ncywgZnVuY3Rpb24oIG5hbWUsIGVhc2VJbiApIHsKCSQuZWFzaW5nWyAiZWFzZUluIiArIG5hbWUgXSA9IGVhc2VJbjsKCSQuZWFzaW5nWyAiZWFzZU91dCIgKyBuYW1lIF0gPSBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gMSAtIGVhc2VJbiggMSAtIHAgKTsKCX07CgkkLmVhc2luZ1sgImVhc2VJbk91dCIgKyBuYW1lIF0gPSBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gcCA8IDAuNSA/CgkJCWVhc2VJbiggcCAqIDIgKSAvIDIgOgoJCQkxIC0gZWFzZUluKCBwICogLTIgKyAyICkgLyAyOwoJfTsKfSk7Cgp9KSgpOwoKdmFyIGVmZmVjdCA9ICQuZWZmZWN0czsKCgovKiEKICogalF1ZXJ5IFVJIEVmZmVjdHMgQmxpbmQgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vYmxpbmQtZWZmZWN0LwogKi8KCgp2YXIgZWZmZWN0QmxpbmQgPSAkLmVmZmVjdHMuZWZmZWN0LmJsaW5kID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgkvLyBDcmVhdGUgZWxlbWVudAoJdmFyIGVsID0gJCggdGhpcyApLAoJCXJ2ZXJ0aWNhbCA9IC91cHxkb3dufHZlcnRpY2FsLywKCQlycG9zaXRpdmVtb3Rpb24gPSAvdXB8bGVmdHx2ZXJ0aWNhbHxob3Jpem9udGFsLywKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJoZWlnaHQiLCAid2lkdGgiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJoaWRlIiApLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJ1cCIsCgkJdmVydGljYWwgPSBydmVydGljYWwudGVzdCggZGlyZWN0aW9uICksCgkJcmVmID0gdmVydGljYWwgPyAiaGVpZ2h0IiA6ICJ3aWR0aCIsCgkJcmVmMiA9IHZlcnRpY2FsID8gInRvcCIgOiAibGVmdCIsCgkJbW90aW9uID0gcnBvc2l0aXZlbW90aW9uLnRlc3QoIGRpcmVjdGlvbiApLAoJCWFuaW1hdGlvbiA9IHt9LAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJd3JhcHBlciwgZGlzdGFuY2UsIG1hcmdpbjsKCgkvLyBpZiBhbHJlYWR5IHdyYXBwZWQsIHRoZSB3cmFwcGVyJ3MgcHJvcGVydGllcyBhcmUgbXkgcHJvcGVydHkuICM2MjQ1CglpZiAoIGVsLnBhcmVudCgpLmlzKCAiLnVpLWVmZmVjdHMtd3JhcHBlciIgKSApIHsKCQkkLmVmZmVjdHMuc2F2ZSggZWwucGFyZW50KCksIHByb3BzICk7Cgl9IGVsc2UgewoJCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCX0KCWVsLnNob3coKTsKCXdyYXBwZXIgPSAkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKS5jc3MoewoJCW92ZXJmbG93OiAiaGlkZGVuIgoJfSk7CgoJZGlzdGFuY2UgPSB3cmFwcGVyWyByZWYgXSgpOwoJbWFyZ2luID0gcGFyc2VGbG9hdCggd3JhcHBlci5jc3MoIHJlZjIgKSApIHx8IDA7CgoJYW5pbWF0aW9uWyByZWYgXSA9IHNob3cgPyBkaXN0YW5jZSA6IDA7CglpZiAoICFtb3Rpb24gKSB7CgkJZWwKCQkJLmNzcyggdmVydGljYWwgPyAiYm90dG9tIiA6ICJyaWdodCIsIDAgKQoJCQkuY3NzKCB2ZXJ0aWNhbCA/ICJ0b3AiIDogImxlZnQiLCAiYXV0byIgKQoJCQkuY3NzKHsgcG9zaXRpb246ICJhYnNvbHV0ZSIgfSk7CgoJCWFuaW1hdGlvblsgcmVmMiBdID0gc2hvdyA/IG1hcmdpbiA6IGRpc3RhbmNlICsgbWFyZ2luOwoJfQoKCS8vIHN0YXJ0IGF0IDAgaWYgd2UgYXJlIHNob3dpbmcKCWlmICggc2hvdyApIHsKCQl3cmFwcGVyLmNzcyggcmVmLCAwICk7CgkJaWYgKCAhbW90aW9uICkgewoJCQl3cmFwcGVyLmNzcyggcmVmMiwgbWFyZ2luICsgZGlzdGFuY2UgKTsKCQl9Cgl9CgoJLy8gQW5pbWF0ZQoJd3JhcHBlci5hbmltYXRlKCBhbmltYXRpb24sIHsKCQlkdXJhdGlvbjogby5kdXJhdGlvbiwKCQllYXNpbmc6IG8uZWFzaW5nLAoJCXF1ZXVlOiBmYWxzZSwKCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCWlmICggbW9kZSA9PT0gImhpZGUiICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKfTsKCgovKiEKICogalF1ZXJ5IFVJIEVmZmVjdHMgQm91bmNlIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2JvdW5jZS1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3RCb3VuY2UgPSAkLmVmZmVjdHMuZWZmZWN0LmJvdW5jZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJdmFyIGVsID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgImhlaWdodCIsICJ3aWR0aCIgXSwKCgkJLy8gZGVmYXVsdHM6CgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJlZmZlY3QiICksCgkJaGlkZSA9IG1vZGUgPT09ICJoaWRlIiwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJ1cCIsCgkJZGlzdGFuY2UgPSBvLmRpc3RhbmNlLAoJCXRpbWVzID0gby50aW1lcyB8fCA1LAoKCQkvLyBudW1iZXIgb2YgaW50ZXJuYWwgYW5pbWF0aW9ucwoJCWFuaW1zID0gdGltZXMgKiAyICsgKCBzaG93IHx8IGhpZGUgPyAxIDogMCApLAoJCXNwZWVkID0gby5kdXJhdGlvbiAvIGFuaW1zLAoJCWVhc2luZyA9IG8uZWFzaW5nLAoKCQkvLyB1dGlsaXR5OgoJCXJlZiA9ICggZGlyZWN0aW9uID09PSAidXAiIHx8IGRpcmVjdGlvbiA9PT0gImRvd24iICkgPyAidG9wIiA6ICJsZWZ0IiwKCQltb3Rpb24gPSAoIGRpcmVjdGlvbiA9PT0gInVwIiB8fCBkaXJlY3Rpb24gPT09ICJsZWZ0IiApLAoJCWksCgkJdXBBbmltLAoJCWRvd25BbmltLAoKCQkvLyB3ZSB3aWxsIG5lZWQgdG8gcmUtYXNzZW1ibGUgdGhlIHF1ZXVlIHRvIHN0YWNrIG91ciBhbmltYXRpb25zIGluIHBsYWNlCgkJcXVldWUgPSBlbC5xdWV1ZSgpLAoJCXF1ZXVlbGVuID0gcXVldWUubGVuZ3RoOwoKCS8vIEF2b2lkIHRvdWNoaW5nIG9wYWNpdHkgdG8gcHJldmVudCBjbGVhclR5cGUgYW5kIFBORyBpc3N1ZXMgaW4gSUUKCWlmICggc2hvdyB8fCBoaWRlICkgewoJCXByb3BzLnB1c2goICJvcGFjaXR5IiApOwoJfQoKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCSQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApOyAvLyBDcmVhdGUgV3JhcHBlcgoKCS8vIGRlZmF1bHQgZGlzdGFuY2UgZm9yIHRoZSBCSUdHRVNUIGJvdW5jZSBpcyB0aGUgb3V0ZXIgRGlzdGFuY2UgLyAzCglpZiAoICFkaXN0YW5jZSApIHsKCQlkaXN0YW5jZSA9IGVsWyByZWYgPT09ICJ0b3AiID8gIm91dGVySGVpZ2h0IiA6ICJvdXRlcldpZHRoIiBdKCkgLyAzOwoJfQoKCWlmICggc2hvdyApIHsKCQlkb3duQW5pbSA9IHsgb3BhY2l0eTogMSB9OwoJCWRvd25BbmltWyByZWYgXSA9IDA7CgoJCS8vIGlmIHdlIGFyZSBzaG93aW5nLCBmb3JjZSBvcGFjaXR5IDAgYW5kIHNldCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoJCS8vIHRoZW4gZG8gdGhlICJmaXJzdCIgYW5pbWF0aW9uCgkJZWwuY3NzKCAib3BhY2l0eSIsIDAgKQoJCQkuY3NzKCByZWYsIG1vdGlvbiA/IC1kaXN0YW5jZSAqIDIgOiBkaXN0YW5jZSAqIDIgKQoJCQkuYW5pbWF0ZSggZG93bkFuaW0sIHNwZWVkLCBlYXNpbmcgKTsKCX0KCgkvLyBzdGFydCBhdCB0aGUgc21hbGxlc3QgZGlzdGFuY2UgaWYgd2UgYXJlIGhpZGluZwoJaWYgKCBoaWRlICkgewoJCWRpc3RhbmNlID0gZGlzdGFuY2UgLyBNYXRoLnBvdyggMiwgdGltZXMgLSAxICk7Cgl9CgoJZG93bkFuaW0gPSB7fTsKCWRvd25BbmltWyByZWYgXSA9IDA7CgkvLyBCb3VuY2VzIHVwL2Rvd24vbGVmdC9yaWdodCB0aGVuIGJhY2sgdG8gMCAtLSB0aW1lcyAqIDIgYW5pbWF0aW9ucyBoYXBwZW4gaGVyZQoJZm9yICggaSA9IDA7IGkgPCB0aW1lczsgaSsrICkgewoJCXVwQW5pbSA9IHt9OwoJCXVwQW5pbVsgcmVmIF0gPSAoIG1vdGlvbiA/ICItPSIgOiAiKz0iICkgKyBkaXN0YW5jZTsKCgkJZWwuYW5pbWF0ZSggdXBBbmltLCBzcGVlZCwgZWFzaW5nICkKCQkJLmFuaW1hdGUoIGRvd25BbmltLCBzcGVlZCwgZWFzaW5nICk7CgoJCWRpc3RhbmNlID0gaGlkZSA/IGRpc3RhbmNlICogMiA6IGRpc3RhbmNlIC8gMjsKCX0KCgkvLyBMYXN0IEJvdW5jZSB3aGVuIEhpZGluZwoJaWYgKCBoaWRlICkgewoJCXVwQW5pbSA9IHsgb3BhY2l0eTogMCB9OwoJCXVwQW5pbVsgcmVmIF0gPSAoIG1vdGlvbiA/ICItPSIgOiAiKz0iICkgKyBkaXN0YW5jZTsKCgkJZWwuYW5pbWF0ZSggdXBBbmltLCBzcGVlZCwgZWFzaW5nICk7Cgl9CgoJZWwucXVldWUoZnVuY3Rpb24oKSB7CgkJaWYgKCBoaWRlICkgewoJCQllbC5oaWRlKCk7CgkJfQoJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkkLmVmZmVjdHMucmVtb3ZlV3JhcHBlciggZWwgKTsKCQlkb25lKCk7Cgl9KTsKCgkvLyBpbmplY3QgYWxsIHRoZSBhbmltYXRpb25zIHdlIGp1c3QgcXVldWVkIHRvIGJlIGZpcnN0IGluIGxpbmUgKGFmdGVyICJpbnByb2dyZXNzIikKCWlmICggcXVldWVsZW4gPiAxKSB7CgkJcXVldWUuc3BsaWNlLmFwcGx5KCBxdWV1ZSwKCQkJWyAxLCAwIF0uY29uY2F0KCBxdWV1ZS5zcGxpY2UoIHF1ZXVlbGVuLCBhbmltcyArIDEgKSApICk7Cgl9CgllbC5kZXF1ZXVlKCk7Cgp9OwoKCi8qIQogKiBqUXVlcnkgVUkgRWZmZWN0cyBDbGlwIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NsaXAtZWZmZWN0LwogKi8KCgp2YXIgZWZmZWN0Q2xpcCA9ICQuZWZmZWN0cy5lZmZlY3QuY2xpcCA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJoZWlnaHQiLCAid2lkdGgiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJoaWRlIiApLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgInZlcnRpY2FsIiwKCQl2ZXJ0ID0gZGlyZWN0aW9uID09PSAidmVydGljYWwiLAoJCXNpemUgPSB2ZXJ0ID8gImhlaWdodCIgOiAid2lkdGgiLAoJCXBvc2l0aW9uID0gdmVydCA/ICJ0b3AiIDogImxlZnQiLAoJCWFuaW1hdGlvbiA9IHt9LAoJCXdyYXBwZXIsIGFuaW1hdGUsIGRpc3RhbmNlOwoKCS8vIFNhdmUgJiBTaG93CgkkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7CgllbC5zaG93KCk7CgoJLy8gQ3JlYXRlIFdyYXBwZXIKCXdyYXBwZXIgPSAkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKS5jc3MoewoJCW92ZXJmbG93OiAiaGlkZGVuIgoJfSk7CglhbmltYXRlID0gKCBlbFswXS50YWdOYW1lID09PSAiSU1HIiApID8gd3JhcHBlciA6IGVsOwoJZGlzdGFuY2UgPSBhbmltYXRlWyBzaXplIF0oKTsKCgkvLyBTaGlmdAoJaWYgKCBzaG93ICkgewoJCWFuaW1hdGUuY3NzKCBzaXplLCAwICk7CgkJYW5pbWF0ZS5jc3MoIHBvc2l0aW9uLCBkaXN0YW5jZSAvIDIgKTsKCX0KCgkvLyBDcmVhdGUgQW5pbWF0aW9uIE9iamVjdDoKCWFuaW1hdGlvblsgc2l6ZSBdID0gc2hvdyA/IGRpc3RhbmNlIDogMDsKCWFuaW1hdGlvblsgcG9zaXRpb24gXSA9IHNob3cgPyAwIDogZGlzdGFuY2UgLyAyOwoKCS8vIEFuaW1hdGUKCWFuaW1hdGUuYW5pbWF0ZSggYW5pbWF0aW9uLCB7CgkJcXVldWU6IGZhbHNlLAoJCWR1cmF0aW9uOiBvLmR1cmF0aW9uLAoJCWVhc2luZzogby5lYXNpbmcsCgkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQlpZiAoICFzaG93ICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKCn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIERyb3AgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vZHJvcC1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3REcm9wID0gJC5lZmZlY3RzLmVmZmVjdC5kcm9wID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJdmFyIGVsID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgIm9wYWNpdHkiLCAiaGVpZ2h0IiwgIndpZHRoIiBdLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAiaGlkZSIgKSwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJsZWZ0IiwKCQlyZWYgPSAoIGRpcmVjdGlvbiA9PT0gInVwIiB8fCBkaXJlY3Rpb24gPT09ICJkb3duIiApID8gInRvcCIgOiAibGVmdCIsCgkJbW90aW9uID0gKCBkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAibGVmdCIgKSA/ICJwb3MiIDogIm5lZyIsCgkJYW5pbWF0aW9uID0gewoJCQlvcGFjaXR5OiBzaG93ID8gMSA6IDAKCQl9LAoJCWRpc3RhbmNlOwoKCS8vIEFkanVzdAoJJC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApOwoJZWwuc2hvdygpOwoJJC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICk7CgoJZGlzdGFuY2UgPSBvLmRpc3RhbmNlIHx8IGVsWyByZWYgPT09ICJ0b3AiID8gIm91dGVySGVpZ2h0IjogIm91dGVyV2lkdGgiIF0oIHRydWUgKSAvIDI7CgoJaWYgKCBzaG93ICkgewoJCWVsCgkJCS5jc3MoICJvcGFjaXR5IiwgMCApCgkJCS5jc3MoIHJlZiwgbW90aW9uID09PSAicG9zIiA/IC1kaXN0YW5jZSA6IGRpc3RhbmNlICk7Cgl9CgoJLy8gQW5pbWF0aW9uCglhbmltYXRpb25bIHJlZiBdID0gKCBzaG93ID8KCQkoIG1vdGlvbiA9PT0gInBvcyIgPyAiKz0iIDogIi09IiApIDoKCQkoIG1vdGlvbiA9PT0gInBvcyIgPyAiLT0iIDogIis9IiApICkgKwoJCWRpc3RhbmNlOwoKCS8vIEFuaW1hdGUKCWVsLmFuaW1hdGUoIGFuaW1hdGlvbiwgewoJCXF1ZXVlOiBmYWxzZSwKCQlkdXJhdGlvbjogby5kdXJhdGlvbiwKCQllYXNpbmc6IG8uZWFzaW5nLAoJCWNvbXBsZXRlOiBmdW5jdGlvbigpIHsKCQkJaWYgKCBtb2RlID09PSAiaGlkZSIgKSB7CgkJCQllbC5oaWRlKCk7CgkJCX0KCQkJJC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApOwoJCQkkLmVmZmVjdHMucmVtb3ZlV3JhcHBlciggZWwgKTsKCQkJZG9uZSgpOwoJCX0KCX0pOwp9OwoKCi8qIQogKiBqUXVlcnkgVUkgRWZmZWN0cyBFeHBsb2RlIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2V4cGxvZGUtZWZmZWN0LwogKi8KCgp2YXIgZWZmZWN0RXhwbG9kZSA9ICQuZWZmZWN0cy5lZmZlY3QuZXhwbG9kZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoKCXZhciByb3dzID0gby5waWVjZXMgPyBNYXRoLnJvdW5kKCBNYXRoLnNxcnQoIG8ucGllY2VzICkgKSA6IDMsCgkJY2VsbHMgPSByb3dzLAoJCWVsID0gJCggdGhpcyApLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAiaGlkZSIgKSwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoKCQkvLyBzaG93IGFuZCB0aGVuIHZpc2liaWxpdHk6aGlkZGVuIHRoZSBlbGVtZW50IGJlZm9yZSBjYWxjdWxhdGluZyBvZmZzZXQKCQlvZmZzZXQgPSBlbC5zaG93KCkuY3NzKCAidmlzaWJpbGl0eSIsICJoaWRkZW4iICkub2Zmc2V0KCksCgoJCS8vIHdpZHRoIGFuZCBoZWlnaHQgb2YgYSBwaWVjZQoJCXdpZHRoID0gTWF0aC5jZWlsKCBlbC5vdXRlcldpZHRoKCkgLyBjZWxscyApLAoJCWhlaWdodCA9IE1hdGguY2VpbCggZWwub3V0ZXJIZWlnaHQoKSAvIHJvd3MgKSwKCQlwaWVjZXMgPSBbXSwKCgkJLy8gbG9vcAoJCWksIGosIGxlZnQsIHRvcCwgbXgsIG15OwoKCS8vIGNoaWxkcmVuIGFuaW1hdGUgY29tcGxldGU6CglmdW5jdGlvbiBjaGlsZENvbXBsZXRlKCkgewoJCXBpZWNlcy5wdXNoKCB0aGlzICk7CgkJaWYgKCBwaWVjZXMubGVuZ3RoID09PSByb3dzICogY2VsbHMgKSB7CgkJCWFuaW1Db21wbGV0ZSgpOwoJCX0KCX0KCgkvLyBjbG9uZSB0aGUgZWxlbWVudCBmb3IgZWFjaCByb3cgYW5kIGNlbGwuCglmb3IgKCBpID0gMDsgaSA8IHJvd3MgOyBpKysgKSB7IC8vID09PT4KCQl0b3AgPSBvZmZzZXQudG9wICsgaSAqIGhlaWdodDsKCQlteSA9IGkgLSAoIHJvd3MgLSAxICkgLyAyIDsKCgkJZm9yICggaiA9IDA7IGogPCBjZWxscyA7IGorKyApIHsgLy8gfHx8CgkJCWxlZnQgPSBvZmZzZXQubGVmdCArIGogKiB3aWR0aDsKCQkJbXggPSBqIC0gKCBjZWxscyAtIDEgKSAvIDIgOwoKCQkJLy8gQ3JlYXRlIGEgY2xvbmUgb2YgdGhlIG5vdyBoaWRkZW4gbWFpbiBlbGVtZW50IHRoYXQgd2lsbCBiZSBhYnNvbHV0ZSBwb3NpdGlvbmVkCgkJCS8vIHdpdGhpbiBhIHdyYXBwZXIgZGl2IG9mZiB0aGUgLWxlZnQgYW5kIC10b3AgZXF1YWwgdG8gc2l6ZSBvZiBvdXIgcGllY2VzCgkJCWVsCgkJCQkuY2xvbmUoKQoJCQkJLmFwcGVuZFRvKCAiYm9keSIgKQoJCQkJLndyYXAoICI8ZGl2PjwvZGl2PiIgKQoJCQkJLmNzcyh7CgkJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCQkJdmlzaWJpbGl0eTogInZpc2libGUiLAoJCQkJCWxlZnQ6IC1qICogd2lkdGgsCgkJCQkJdG9wOiAtaSAqIGhlaWdodAoJCQkJfSkKCgkJCS8vIHNlbGVjdCB0aGUgd3JhcHBlciAtIG1ha2UgaXQgb3ZlcmZsb3c6IGhpZGRlbiBhbmQgYWJzb2x1dGUgcG9zaXRpb25lZCBiYXNlZCBvbgoJCQkvLyB3aGVyZSB0aGUgb3JpZ2luYWwgd2FzIGxvY2F0ZWQgK2xlZnQgYW5kICt0b3AgZXF1YWwgdG8gdGhlIHNpemUgb2YgcGllY2VzCgkJCQkucGFyZW50KCkKCQkJCS5hZGRDbGFzcyggInVpLWVmZmVjdHMtZXhwbG9kZSIgKQoJCQkJLmNzcyh7CgkJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCQkJb3ZlcmZsb3c6ICJoaWRkZW4iLAoJCQkJCXdpZHRoOiB3aWR0aCwKCQkJCQloZWlnaHQ6IGhlaWdodCwKCQkJCQlsZWZ0OiBsZWZ0ICsgKCBzaG93ID8gbXggKiB3aWR0aCA6IDAgKSwKCQkJCQl0b3A6IHRvcCArICggc2hvdyA/IG15ICogaGVpZ2h0IDogMCApLAoJCQkJCW9wYWNpdHk6IHNob3cgPyAwIDogMQoJCQkJfSkuYW5pbWF0ZSh7CgkJCQkJbGVmdDogbGVmdCArICggc2hvdyA/IDAgOiBteCAqIHdpZHRoICksCgkJCQkJdG9wOiB0b3AgKyAoIHNob3cgPyAwIDogbXkgKiBoZWlnaHQgKSwKCQkJCQlvcGFjaXR5OiBzaG93ID8gMSA6IDAKCQkJCX0sIG8uZHVyYXRpb24gfHwgNTAwLCBvLmVhc2luZywgY2hpbGRDb21wbGV0ZSApOwoJCX0KCX0KCglmdW5jdGlvbiBhbmltQ29tcGxldGUoKSB7CgkJZWwuY3NzKHsKCQkJdmlzaWJpbGl0eTogInZpc2libGUiCgkJfSk7CgkJJCggcGllY2VzICkucmVtb3ZlKCk7CgkJaWYgKCAhc2hvdyApIHsKCQkJZWwuaGlkZSgpOwoJCX0KCQlkb25lKCk7Cgl9Cn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIEZhZGUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vZmFkZS1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3RGYWRlID0gJC5lZmZlY3RzLmVmZmVjdC5mYWRlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7Cgl2YXIgZWwgPSAkKCB0aGlzICksCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJ0b2dnbGUiICk7CgoJZWwuYW5pbWF0ZSh7CgkJb3BhY2l0eTogbW9kZQoJfSwgewoJCXF1ZXVlOiBmYWxzZSwKCQlkdXJhdGlvbjogby5kdXJhdGlvbiwKCQllYXNpbmc6IG8uZWFzaW5nLAoJCWNvbXBsZXRlOiBkb25lCgl9KTsKfTsKCgovKiEKICogalF1ZXJ5IFVJIEVmZmVjdHMgRm9sZCAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9mb2xkLWVmZmVjdC8KICovCgoKdmFyIGVmZmVjdEZvbGQgPSAkLmVmZmVjdHMuZWZmZWN0LmZvbGQgPSBmdW5jdGlvbiggbywgZG9uZSApIHsKCgkvLyBDcmVhdGUgZWxlbWVudAoJdmFyIGVsID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgImhlaWdodCIsICJ3aWR0aCIgXSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgImhpZGUiICksCgkJc2hvdyA9IG1vZGUgPT09ICJzaG93IiwKCQloaWRlID0gbW9kZSA9PT0gImhpZGUiLAoJCXNpemUgPSBvLnNpemUgfHwgMTUsCgkJcGVyY2VudCA9IC8oWzAtOV0rKSUvLmV4ZWMoIHNpemUgKSwKCQlob3JpekZpcnN0ID0gISFvLmhvcml6Rmlyc3QsCgkJd2lkdGhGaXJzdCA9IHNob3cgIT09IGhvcml6Rmlyc3QsCgkJcmVmID0gd2lkdGhGaXJzdCA/IFsgIndpZHRoIiwgImhlaWdodCIgXSA6IFsgImhlaWdodCIsICJ3aWR0aCIgXSwKCQlkdXJhdGlvbiA9IG8uZHVyYXRpb24gLyAyLAoJCXdyYXBwZXIsIGRpc3RhbmNlLAoJCWFuaW1hdGlvbjEgPSB7fSwKCQlhbmltYXRpb24yID0ge307CgoJJC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApOwoJZWwuc2hvdygpOwoKCS8vIENyZWF0ZSBXcmFwcGVyCgl3cmFwcGVyID0gJC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICkuY3NzKHsKCQlvdmVyZmxvdzogImhpZGRlbiIKCX0pOwoJZGlzdGFuY2UgPSB3aWR0aEZpcnN0ID8KCQlbIHdyYXBwZXIud2lkdGgoKSwgd3JhcHBlci5oZWlnaHQoKSBdIDoKCQlbIHdyYXBwZXIuaGVpZ2h0KCksIHdyYXBwZXIud2lkdGgoKSBdOwoKCWlmICggcGVyY2VudCApIHsKCQlzaXplID0gcGFyc2VJbnQoIHBlcmNlbnRbIDEgXSwgMTAgKSAvIDEwMCAqIGRpc3RhbmNlWyBoaWRlID8gMCA6IDEgXTsKCX0KCWlmICggc2hvdyApIHsKCQl3cmFwcGVyLmNzcyggaG9yaXpGaXJzdCA/IHsKCQkJaGVpZ2h0OiAwLAoJCQl3aWR0aDogc2l6ZQoJCX0gOiB7CgkJCWhlaWdodDogc2l6ZSwKCQkJd2lkdGg6IDAKCQl9KTsKCX0KCgkvLyBBbmltYXRpb24KCWFuaW1hdGlvbjFbIHJlZlsgMCBdIF0gPSBzaG93ID8gZGlzdGFuY2VbIDAgXSA6IHNpemU7CglhbmltYXRpb24yWyByZWZbIDEgXSBdID0gc2hvdyA/IGRpc3RhbmNlWyAxIF0gOiAwOwoKCS8vIEFuaW1hdGUKCXdyYXBwZXIKCQkuYW5pbWF0ZSggYW5pbWF0aW9uMSwgZHVyYXRpb24sIG8uZWFzaW5nICkKCQkuYW5pbWF0ZSggYW5pbWF0aW9uMiwgZHVyYXRpb24sIG8uZWFzaW5nLCBmdW5jdGlvbigpIHsKCQkJaWYgKCBoaWRlICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9KTsKCn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIEhpZ2hsaWdodCAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9oaWdobGlnaHQtZWZmZWN0LwogKi8KCgp2YXIgZWZmZWN0SGlnaGxpZ2h0ID0gJC5lZmZlY3RzLmVmZmVjdC5oaWdobGlnaHQgPSBmdW5jdGlvbiggbywgZG9uZSApIHsKCXZhciBlbGVtID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAiYmFja2dyb3VuZEltYWdlIiwgImJhY2tncm91bmRDb2xvciIsICJvcGFjaXR5IiBdLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWxlbSwgby5tb2RlIHx8ICJzaG93IiApLAoJCWFuaW1hdGlvbiA9IHsKCQkJYmFja2dyb3VuZENvbG9yOiBlbGVtLmNzcyggImJhY2tncm91bmRDb2xvciIgKQoJCX07CgoJaWYgKG1vZGUgPT09ICJoaWRlIikgewoJCWFuaW1hdGlvbi5vcGFjaXR5ID0gMDsKCX0KCgkkLmVmZmVjdHMuc2F2ZSggZWxlbSwgcHJvcHMgKTsKCgllbGVtCgkJLnNob3coKQoJCS5jc3MoewoJCQliYWNrZ3JvdW5kSW1hZ2U6ICJub25lIiwKCQkJYmFja2dyb3VuZENvbG9yOiBvLmNvbG9yIHx8ICIjZmZmZjk5IgoJCX0pCgkJLmFuaW1hdGUoIGFuaW1hdGlvbiwgewoJCQlxdWV1ZTogZmFsc2UsCgkJCWR1cmF0aW9uOiBvLmR1cmF0aW9uLAoJCQllYXNpbmc6IG8uZWFzaW5nLAoJCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCQlpZiAoIG1vZGUgPT09ICJoaWRlIiApIHsKCQkJCQllbGVtLmhpZGUoKTsKCQkJCX0KCQkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbGVtLCBwcm9wcyApOwoJCQkJZG9uZSgpOwoJCQl9CgkJfSk7Cn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIFNpemUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2l6ZS1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3RTaXplID0gJC5lZmZlY3RzLmVmZmVjdC5zaXplID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBvcmlnaW5hbCwgYmFzZWxpbmUsIGZhY3RvciwKCQllbCA9ICQoIHRoaXMgKSwKCQlwcm9wczAgPSBbICJwb3NpdGlvbiIsICJ0b3AiLCAiYm90dG9tIiwgImxlZnQiLCAicmlnaHQiLCAid2lkdGgiLCAiaGVpZ2h0IiwgIm92ZXJmbG93IiwgIm9wYWNpdHkiIF0sCgoJCS8vIEFsd2F5cyByZXN0b3JlCgkJcHJvcHMxID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgIm92ZXJmbG93IiwgIm9wYWNpdHkiIF0sCgoJCS8vIENvcHkgZm9yIGNoaWxkcmVuCgkJcHJvcHMyID0gWyAid2lkdGgiLCAiaGVpZ2h0IiwgIm92ZXJmbG93IiBdLAoJCWNQcm9wcyA9IFsgImZvbnRTaXplIiBdLAoJCXZQcm9wcyA9IFsgImJvcmRlclRvcFdpZHRoIiwgImJvcmRlckJvdHRvbVdpZHRoIiwgInBhZGRpbmdUb3AiLCAicGFkZGluZ0JvdHRvbSIgXSwKCQloUHJvcHMgPSBbICJib3JkZXJMZWZ0V2lkdGgiLCAiYm9yZGVyUmlnaHRXaWR0aCIsICJwYWRkaW5nTGVmdCIsICJwYWRkaW5nUmlnaHQiIF0sCgoJCS8vIFNldCBvcHRpb25zCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJlZmZlY3QiICksCgkJcmVzdG9yZSA9IG8ucmVzdG9yZSB8fCBtb2RlICE9PSAiZWZmZWN0IiwKCQlzY2FsZSA9IG8uc2NhbGUgfHwgImJvdGgiLAoJCW9yaWdpbiA9IG8ub3JpZ2luIHx8IFsgIm1pZGRsZSIsICJjZW50ZXIiIF0sCgkJcG9zaXRpb24gPSBlbC5jc3MoICJwb3NpdGlvbiIgKSwKCQlwcm9wcyA9IHJlc3RvcmUgPyBwcm9wczAgOiBwcm9wczEsCgkJemVybyA9IHsKCQkJaGVpZ2h0OiAwLAoJCQl3aWR0aDogMCwKCQkJb3V0ZXJIZWlnaHQ6IDAsCgkJCW91dGVyV2lkdGg6IDAKCQl9OwoKCWlmICggbW9kZSA9PT0gInNob3ciICkgewoJCWVsLnNob3coKTsKCX0KCW9yaWdpbmFsID0gewoJCWhlaWdodDogZWwuaGVpZ2h0KCksCgkJd2lkdGg6IGVsLndpZHRoKCksCgkJb3V0ZXJIZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCksCgkJb3V0ZXJXaWR0aDogZWwub3V0ZXJXaWR0aCgpCgl9OwoKCWlmICggby5tb2RlID09PSAidG9nZ2xlIiAmJiBtb2RlID09PSAic2hvdyIgKSB7CgkJZWwuZnJvbSA9IG8udG8gfHwgemVybzsKCQllbC50byA9IG8uZnJvbSB8fCBvcmlnaW5hbDsKCX0gZWxzZSB7CgkJZWwuZnJvbSA9IG8uZnJvbSB8fCAoIG1vZGUgPT09ICJzaG93IiA/IHplcm8gOiBvcmlnaW5hbCApOwoJCWVsLnRvID0gby50byB8fCAoIG1vZGUgPT09ICJoaWRlIiA/IHplcm8gOiBvcmlnaW5hbCApOwoJfQoKCS8vIFNldCBzY2FsaW5nIGZhY3RvcgoJZmFjdG9yID0gewoJCWZyb206IHsKCQkJeTogZWwuZnJvbS5oZWlnaHQgLyBvcmlnaW5hbC5oZWlnaHQsCgkJCXg6IGVsLmZyb20ud2lkdGggLyBvcmlnaW5hbC53aWR0aAoJCX0sCgkJdG86IHsKCQkJeTogZWwudG8uaGVpZ2h0IC8gb3JpZ2luYWwuaGVpZ2h0LAoJCQl4OiBlbC50by53aWR0aCAvIG9yaWdpbmFsLndpZHRoCgkJfQoJfTsKCgkvLyBTY2FsZSB0aGUgY3NzIGJveAoJaWYgKCBzY2FsZSA9PT0gImJveCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsKCgkJLy8gVmVydGljYWwgcHJvcHMgc2NhbGluZwoJCWlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7CgkJCXByb3BzID0gcHJvcHMuY29uY2F0KCB2UHJvcHMgKTsKCQkJZWwuZnJvbSA9ICQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKCBlbCwgdlByb3BzLCBmYWN0b3IuZnJvbS55LCBlbC5mcm9tICk7CgkJCWVsLnRvID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCB2UHJvcHMsIGZhY3Rvci50by55LCBlbC50byApOwoJCX0KCgkJLy8gSG9yaXpvbnRhbCBwcm9wcyBzY2FsaW5nCgkJaWYgKCBmYWN0b3IuZnJvbS54ICE9PSBmYWN0b3IudG8ueCApIHsKCQkJcHJvcHMgPSBwcm9wcy5jb25jYXQoIGhQcm9wcyApOwoJCQllbC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCBoUHJvcHMsIGZhY3Rvci5mcm9tLngsIGVsLmZyb20gKTsKCQkJZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGhQcm9wcywgZmFjdG9yLnRvLngsIGVsLnRvICk7CgkJfQoJfQoKCS8vIFNjYWxlIHRoZSBjb250ZW50CglpZiAoIHNjYWxlID09PSAiY29udGVudCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsKCgkJLy8gVmVydGljYWwgcHJvcHMgc2NhbGluZwoJCWlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7CgkJCXByb3BzID0gcHJvcHMuY29uY2F0KCBjUHJvcHMgKS5jb25jYXQoIHByb3BzMiApOwoJCQllbC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCBjUHJvcHMsIGZhY3Rvci5mcm9tLnksIGVsLmZyb20gKTsKCQkJZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGNQcm9wcywgZmFjdG9yLnRvLnksIGVsLnRvICk7CgkJfQoJfQoKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCSQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApOwoJZWwuY3NzKCAib3ZlcmZsb3ciLCAiaGlkZGVuIiApLmNzcyggZWwuZnJvbSApOwoKCS8vIEFkanVzdAoJaWYgKG9yaWdpbikgeyAvLyBDYWxjdWxhdGUgYmFzZWxpbmUgc2hpZnRzCgkJYmFzZWxpbmUgPSAkLmVmZmVjdHMuZ2V0QmFzZWxpbmUoIG9yaWdpbiwgb3JpZ2luYWwgKTsKCQllbC5mcm9tLnRvcCA9ICggb3JpZ2luYWwub3V0ZXJIZWlnaHQgLSBlbC5vdXRlckhlaWdodCgpICkgKiBiYXNlbGluZS55OwoJCWVsLmZyb20ubGVmdCA9ICggb3JpZ2luYWwub3V0ZXJXaWR0aCAtIGVsLm91dGVyV2lkdGgoKSApICogYmFzZWxpbmUueDsKCQllbC50by50b3AgPSAoIG9yaWdpbmFsLm91dGVySGVpZ2h0IC0gZWwudG8ub3V0ZXJIZWlnaHQgKSAqIGJhc2VsaW5lLnk7CgkJZWwudG8ubGVmdCA9ICggb3JpZ2luYWwub3V0ZXJXaWR0aCAtIGVsLnRvLm91dGVyV2lkdGggKSAqIGJhc2VsaW5lLng7Cgl9CgllbC5jc3MoIGVsLmZyb20gKTsgLy8gc2V0IHRvcCAmIGxlZnQKCgkvLyBBbmltYXRlCglpZiAoIHNjYWxlID09PSAiY29udGVudCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsgLy8gU2NhbGUgdGhlIGNoaWxkcmVuCgoJCS8vIEFkZCBtYXJnaW5zL2ZvbnQtc2l6ZQoJCXZQcm9wcyA9IHZQcm9wcy5jb25jYXQoWyAibWFyZ2luVG9wIiwgIm1hcmdpbkJvdHRvbSIgXSkuY29uY2F0KGNQcm9wcyk7CgkJaFByb3BzID0gaFByb3BzLmNvbmNhdChbICJtYXJnaW5MZWZ0IiwgIm1hcmdpblJpZ2h0IiBdKTsKCQlwcm9wczIgPSBwcm9wczAuY29uY2F0KHZQcm9wcykuY29uY2F0KGhQcm9wcyk7CgoJCWVsLmZpbmQoICIqW3dpZHRoXSIgKS5lYWNoKCBmdW5jdGlvbigpIHsKCQkJdmFyIGNoaWxkID0gJCggdGhpcyApLAoJCQkJY19vcmlnaW5hbCA9IHsKCQkJCQloZWlnaHQ6IGNoaWxkLmhlaWdodCgpLAoJCQkJCXdpZHRoOiBjaGlsZC53aWR0aCgpLAoJCQkJCW91dGVySGVpZ2h0OiBjaGlsZC5vdXRlckhlaWdodCgpLAoJCQkJCW91dGVyV2lkdGg6IGNoaWxkLm91dGVyV2lkdGgoKQoJCQkJfTsKCQkJaWYgKHJlc3RvcmUpIHsKCQkJCSQuZWZmZWN0cy5zYXZlKGNoaWxkLCBwcm9wczIpOwoJCQl9CgoJCQljaGlsZC5mcm9tID0gewoJCQkJaGVpZ2h0OiBjX29yaWdpbmFsLmhlaWdodCAqIGZhY3Rvci5mcm9tLnksCgkJCQl3aWR0aDogY19vcmlnaW5hbC53aWR0aCAqIGZhY3Rvci5mcm9tLngsCgkJCQlvdXRlckhlaWdodDogY19vcmlnaW5hbC5vdXRlckhlaWdodCAqIGZhY3Rvci5mcm9tLnksCgkJCQlvdXRlcldpZHRoOiBjX29yaWdpbmFsLm91dGVyV2lkdGggKiBmYWN0b3IuZnJvbS54CgkJCX07CgkJCWNoaWxkLnRvID0gewoJCQkJaGVpZ2h0OiBjX29yaWdpbmFsLmhlaWdodCAqIGZhY3Rvci50by55LAoJCQkJd2lkdGg6IGNfb3JpZ2luYWwud2lkdGggKiBmYWN0b3IudG8ueCwKCQkJCW91dGVySGVpZ2h0OiBjX29yaWdpbmFsLmhlaWdodCAqIGZhY3Rvci50by55LAoJCQkJb3V0ZXJXaWR0aDogY19vcmlnaW5hbC53aWR0aCAqIGZhY3Rvci50by54CgkJCX07CgoJCQkvLyBWZXJ0aWNhbCBwcm9wcyBzY2FsaW5nCgkJCWlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7CgkJCQljaGlsZC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGNoaWxkLCB2UHJvcHMsIGZhY3Rvci5mcm9tLnksIGNoaWxkLmZyb20gKTsKCQkJCWNoaWxkLnRvID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGNoaWxkLCB2UHJvcHMsIGZhY3Rvci50by55LCBjaGlsZC50byApOwoJCQl9CgoJCQkvLyBIb3Jpem9udGFsIHByb3BzIHNjYWxpbmcKCQkJaWYgKCBmYWN0b3IuZnJvbS54ICE9PSBmYWN0b3IudG8ueCApIHsKCQkJCWNoaWxkLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIGhQcm9wcywgZmFjdG9yLmZyb20ueCwgY2hpbGQuZnJvbSApOwoJCQkJY2hpbGQudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIGhQcm9wcywgZmFjdG9yLnRvLngsIGNoaWxkLnRvICk7CgkJCX0KCgkJCS8vIEFuaW1hdGUgY2hpbGRyZW4KCQkJY2hpbGQuY3NzKCBjaGlsZC5mcm9tICk7CgkJCWNoaWxkLmFuaW1hdGUoIGNoaWxkLnRvLCBvLmR1cmF0aW9uLCBvLmVhc2luZywgZnVuY3Rpb24oKSB7CgoJCQkJLy8gUmVzdG9yZSBjaGlsZHJlbgoJCQkJaWYgKCByZXN0b3JlICkgewoJCQkJCSQuZWZmZWN0cy5yZXN0b3JlKCBjaGlsZCwgcHJvcHMyICk7CgkJCQl9CgkJCX0pOwoJCX0pOwoJfQoKCS8vIEFuaW1hdGUKCWVsLmFuaW1hdGUoIGVsLnRvLCB7CgkJcXVldWU6IGZhbHNlLAoJCWR1cmF0aW9uOiBvLmR1cmF0aW9uLAoJCWVhc2luZzogby5lYXNpbmcsCgkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGVsLnRvLm9wYWNpdHkgPT09IDAgKSB7CgkJCQllbC5jc3MoICJvcGFjaXR5IiwgZWwuZnJvbS5vcGFjaXR5ICk7CgkJCX0KCQkJaWYgKCBtb2RlID09PSAiaGlkZSIgKSB7CgkJCQllbC5oaWRlKCk7CgkJCX0KCQkJJC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApOwoJCQlpZiAoICFyZXN0b3JlICkgewoKCQkJCS8vIHdlIG5lZWQgdG8gY2FsY3VsYXRlIG91ciBuZXcgcG9zaXRpb25pbmcgYmFzZWQgb24gdGhlIHNjYWxpbmcKCQkJCWlmICggcG9zaXRpb24gPT09ICJzdGF0aWMiICkgewoJCQkJCWVsLmNzcyh7CgkJCQkJCXBvc2l0aW9uOiAicmVsYXRpdmUiLAoJCQkJCQl0b3A6IGVsLnRvLnRvcCwKCQkJCQkJbGVmdDogZWwudG8ubGVmdAoJCQkJCX0pOwoJCQkJfSBlbHNlIHsKCQkJCQkkLmVhY2goWyAidG9wIiwgImxlZnQiIF0sIGZ1bmN0aW9uKCBpZHgsIHBvcyApIHsKCQkJCQkJZWwuY3NzKCBwb3MsIGZ1bmN0aW9uKCBfLCBzdHIgKSB7CgkJCQkJCQl2YXIgdmFsID0gcGFyc2VJbnQoIHN0ciwgMTAgKSwKCQkJCQkJCQl0b1JlZiA9IGlkeCA/IGVsLnRvLmxlZnQgOiBlbC50by50b3A7CgoJCQkJCQkJLy8gaWYgb3JpZ2luYWwgd2FzICJhdXRvIiwgcmVjYWxjdWxhdGUgdGhlIG5ldyB2YWx1ZSBmcm9tIHdyYXBwZXIKCQkJCQkJCWlmICggc3RyID09PSAiYXV0byIgKSB7CgkJCQkJCQkJcmV0dXJuIHRvUmVmICsgInB4IjsKCQkJCQkJCX0KCgkJCQkJCQlyZXR1cm4gdmFsICsgdG9SZWYgKyAicHgiOwoJCQkJCQl9KTsKCQkJCQl9KTsKCQkJCX0KCQkJfQoKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKCn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIFNjYWxlIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NjYWxlLWVmZmVjdC8KICovCgoKdmFyIGVmZmVjdFNjYWxlID0gJC5lZmZlY3RzLmVmZmVjdC5zY2FsZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoKCS8vIENyZWF0ZSBlbGVtZW50Cgl2YXIgZWwgPSAkKCB0aGlzICksCgkJb3B0aW9ucyA9ICQuZXh0ZW5kKCB0cnVlLCB7fSwgbyApLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAiZWZmZWN0IiApLAoJCXBlcmNlbnQgPSBwYXJzZUludCggby5wZXJjZW50LCAxMCApIHx8CgkJCSggcGFyc2VJbnQoIG8ucGVyY2VudCwgMTAgKSA9PT0gMCA/IDAgOiAoIG1vZGUgPT09ICJoaWRlIiA/IDAgOiAxMDAgKSApLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJib3RoIiwKCQlvcmlnaW4gPSBvLm9yaWdpbiwKCQlvcmlnaW5hbCA9IHsKCQkJaGVpZ2h0OiBlbC5oZWlnaHQoKSwKCQkJd2lkdGg6IGVsLndpZHRoKCksCgkJCW91dGVySGVpZ2h0OiBlbC5vdXRlckhlaWdodCgpLAoJCQlvdXRlcldpZHRoOiBlbC5vdXRlcldpZHRoKCkKCQl9LAoJCWZhY3RvciA9IHsKCQkJeTogZGlyZWN0aW9uICE9PSAiaG9yaXpvbnRhbCIgPyAocGVyY2VudCAvIDEwMCkgOiAxLAoJCQl4OiBkaXJlY3Rpb24gIT09ICJ2ZXJ0aWNhbCIgPyAocGVyY2VudCAvIDEwMCkgOiAxCgkJfTsKCgkvLyBXZSBhcmUgZ29pbmcgdG8gcGFzcyB0aGlzIGVmZmVjdCB0byB0aGUgc2l6ZSBlZmZlY3Q6CglvcHRpb25zLmVmZmVjdCA9ICJzaXplIjsKCW9wdGlvbnMucXVldWUgPSBmYWxzZTsKCW9wdGlvbnMuY29tcGxldGUgPSBkb25lOwoKCS8vIFNldCBkZWZhdWx0IG9yaWdpbiBhbmQgcmVzdG9yZSBmb3Igc2hvdy9oaWRlCglpZiAoIG1vZGUgIT09ICJlZmZlY3QiICkgewoJCW9wdGlvbnMub3JpZ2luID0gb3JpZ2luIHx8IFsgIm1pZGRsZSIsICJjZW50ZXIiIF07CgkJb3B0aW9ucy5yZXN0b3JlID0gdHJ1ZTsKCX0KCglvcHRpb25zLmZyb20gPSBvLmZyb20gfHwgKCBtb2RlID09PSAic2hvdyIgPyB7CgkJaGVpZ2h0OiAwLAoJCXdpZHRoOiAwLAoJCW91dGVySGVpZ2h0OiAwLAoJCW91dGVyV2lkdGg6IDAKCX0gOiBvcmlnaW5hbCApOwoJb3B0aW9ucy50byA9IHsKCQloZWlnaHQ6IG9yaWdpbmFsLmhlaWdodCAqIGZhY3Rvci55LAoJCXdpZHRoOiBvcmlnaW5hbC53aWR0aCAqIGZhY3Rvci54LAoJCW91dGVySGVpZ2h0OiBvcmlnaW5hbC5vdXRlckhlaWdodCAqIGZhY3Rvci55LAoJCW91dGVyV2lkdGg6IG9yaWdpbmFsLm91dGVyV2lkdGggKiBmYWN0b3IueAoJfTsKCgkvLyBGYWRlIG9wdGlvbiB0byBzdXBwb3J0IHB1ZmYKCWlmICggb3B0aW9ucy5mYWRlICkgewoJCWlmICggbW9kZSA9PT0gInNob3ciICkgewoJCQlvcHRpb25zLmZyb20ub3BhY2l0eSA9IDA7CgkJCW9wdGlvbnMudG8ub3BhY2l0eSA9IDE7CgkJfQoJCWlmICggbW9kZSA9PT0gImhpZGUiICkgewoJCQlvcHRpb25zLmZyb20ub3BhY2l0eSA9IDE7CgkJCW9wdGlvbnMudG8ub3BhY2l0eSA9IDA7CgkJfQoJfQoKCS8vIEFuaW1hdGUKCWVsLmVmZmVjdCggb3B0aW9ucyApOwoKfTsKCgovKiEKICogalF1ZXJ5IFVJIEVmZmVjdHMgUHVmZiAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wdWZmLWVmZmVjdC8KICovCgoKdmFyIGVmZmVjdFB1ZmYgPSAkLmVmZmVjdHMuZWZmZWN0LnB1ZmYgPSBmdW5jdGlvbiggbywgZG9uZSApIHsKCXZhciBlbGVtID0gJCggdGhpcyApLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWxlbSwgby5tb2RlIHx8ICJoaWRlIiApLAoJCWhpZGUgPSBtb2RlID09PSAiaGlkZSIsCgkJcGVyY2VudCA9IHBhcnNlSW50KCBvLnBlcmNlbnQsIDEwICkgfHwgMTUwLAoJCWZhY3RvciA9IHBlcmNlbnQgLyAxMDAsCgkJb3JpZ2luYWwgPSB7CgkJCWhlaWdodDogZWxlbS5oZWlnaHQoKSwKCQkJd2lkdGg6IGVsZW0ud2lkdGgoKSwKCQkJb3V0ZXJIZWlnaHQ6IGVsZW0ub3V0ZXJIZWlnaHQoKSwKCQkJb3V0ZXJXaWR0aDogZWxlbS5vdXRlcldpZHRoKCkKCQl9OwoKCSQuZXh0ZW5kKCBvLCB7CgkJZWZmZWN0OiAic2NhbGUiLAoJCXF1ZXVlOiBmYWxzZSwKCQlmYWRlOiB0cnVlLAoJCW1vZGU6IG1vZGUsCgkJY29tcGxldGU6IGRvbmUsCgkJcGVyY2VudDogaGlkZSA/IHBlcmNlbnQgOiAxMDAsCgkJZnJvbTogaGlkZSA/CgkJCW9yaWdpbmFsIDoKCQkJewoJCQkJaGVpZ2h0OiBvcmlnaW5hbC5oZWlnaHQgKiBmYWN0b3IsCgkJCQl3aWR0aDogb3JpZ2luYWwud2lkdGggKiBmYWN0b3IsCgkJCQlvdXRlckhlaWdodDogb3JpZ2luYWwub3V0ZXJIZWlnaHQgKiBmYWN0b3IsCgkJCQlvdXRlcldpZHRoOiBvcmlnaW5hbC5vdXRlcldpZHRoICogZmFjdG9yCgkJCX0KCX0pOwoKCWVsZW0uZWZmZWN0KCBvICk7Cn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIFB1bHNhdGUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcHVsc2F0ZS1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3RQdWxzYXRlID0gJC5lZmZlY3RzLmVmZmVjdC5wdWxzYXRlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7Cgl2YXIgZWxlbSA9ICQoIHRoaXMgKSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsZW0sIG8ubW9kZSB8fCAic2hvdyIgKSwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoJCWhpZGUgPSBtb2RlID09PSAiaGlkZSIsCgkJc2hvd2hpZGUgPSAoIHNob3cgfHwgbW9kZSA9PT0gImhpZGUiICksCgoJCS8vIHNob3dpbmcgb3IgaGlkaW5nIGxlYXZlcyBvZiB0aGUgImxhc3QiIGFuaW1hdGlvbgoJCWFuaW1zID0gKCAoIG8udGltZXMgfHwgNSApICogMiApICsgKCBzaG93aGlkZSA/IDEgOiAwICksCgkJZHVyYXRpb24gPSBvLmR1cmF0aW9uIC8gYW5pbXMsCgkJYW5pbWF0ZVRvID0gMCwKCQlxdWV1ZSA9IGVsZW0ucXVldWUoKSwKCQlxdWV1ZWxlbiA9IHF1ZXVlLmxlbmd0aCwKCQlpOwoKCWlmICggc2hvdyB8fCAhZWxlbS5pcygiOnZpc2libGUiKSkgewoJCWVsZW0uY3NzKCAib3BhY2l0eSIsIDAgKS5zaG93KCk7CgkJYW5pbWF0ZVRvID0gMTsKCX0KCgkvLyBhbmltcyAtIDEgb3BhY2l0eSAidG9nZ2xlcyIKCWZvciAoIGkgPSAxOyBpIDwgYW5pbXM7IGkrKyApIHsKCQllbGVtLmFuaW1hdGUoewoJCQlvcGFjaXR5OiBhbmltYXRlVG8KCQl9LCBkdXJhdGlvbiwgby5lYXNpbmcgKTsKCQlhbmltYXRlVG8gPSAxIC0gYW5pbWF0ZVRvOwoJfQoKCWVsZW0uYW5pbWF0ZSh7CgkJb3BhY2l0eTogYW5pbWF0ZVRvCgl9LCBkdXJhdGlvbiwgby5lYXNpbmcpOwoKCWVsZW0ucXVldWUoZnVuY3Rpb24oKSB7CgkJaWYgKCBoaWRlICkgewoJCQllbGVtLmhpZGUoKTsKCQl9CgkJZG9uZSgpOwoJfSk7CgoJLy8gV2UganVzdCBxdWV1ZWQgdXAgImFuaW1zIiBhbmltYXRpb25zLCB3ZSBuZWVkIHRvIHB1dCB0aGVtIG5leHQgaW4gdGhlIHF1ZXVlCglpZiAoIHF1ZXVlbGVuID4gMSApIHsKCQlxdWV1ZS5zcGxpY2UuYXBwbHkoIHF1ZXVlLAoJCQlbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVsZW4sIGFuaW1zICsgMSApICkgKTsKCX0KCWVsZW0uZGVxdWV1ZSgpOwp9OwoKCi8qIQogKiBqUXVlcnkgVUkgRWZmZWN0cyBTaGFrZSAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9zaGFrZS1lZmZlY3QvCiAqLwoKCnZhciBlZmZlY3RTaGFrZSA9ICQuZWZmZWN0cy5lZmZlY3Quc2hha2UgPSBmdW5jdGlvbiggbywgZG9uZSApIHsKCgl2YXIgZWwgPSAkKCB0aGlzICksCgkJcHJvcHMgPSBbICJwb3NpdGlvbiIsICJ0b3AiLCAiYm90dG9tIiwgImxlZnQiLCAicmlnaHQiLCAiaGVpZ2h0IiwgIndpZHRoIiBdLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAiZWZmZWN0IiApLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJsZWZ0IiwKCQlkaXN0YW5jZSA9IG8uZGlzdGFuY2UgfHwgMjAsCgkJdGltZXMgPSBvLnRpbWVzIHx8IDMsCgkJYW5pbXMgPSB0aW1lcyAqIDIgKyAxLAoJCXNwZWVkID0gTWF0aC5yb3VuZCggby5kdXJhdGlvbiAvIGFuaW1zICksCgkJcmVmID0gKGRpcmVjdGlvbiA9PT0gInVwIiB8fCBkaXJlY3Rpb24gPT09ICJkb3duIikgPyAidG9wIiA6ICJsZWZ0IiwKCQlwb3NpdGl2ZU1vdGlvbiA9IChkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAibGVmdCIpLAoJCWFuaW1hdGlvbiA9IHt9LAoJCWFuaW1hdGlvbjEgPSB7fSwKCQlhbmltYXRpb24yID0ge30sCgkJaSwKCgkJLy8gd2Ugd2lsbCBuZWVkIHRvIHJlLWFzc2VtYmxlIHRoZSBxdWV1ZSB0byBzdGFjayBvdXIgYW5pbWF0aW9ucyBpbiBwbGFjZQoJCXF1ZXVlID0gZWwucXVldWUoKSwKCQlxdWV1ZWxlbiA9IHF1ZXVlLmxlbmd0aDsKCgkkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7CgllbC5zaG93KCk7CgkkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKTsKCgkvLyBBbmltYXRpb24KCWFuaW1hdGlvblsgcmVmIF0gPSAoIHBvc2l0aXZlTW90aW9uID8gIi09IiA6ICIrPSIgKSArIGRpc3RhbmNlOwoJYW5pbWF0aW9uMVsgcmVmIF0gPSAoIHBvc2l0aXZlTW90aW9uID8gIis9IiA6ICItPSIgKSArIGRpc3RhbmNlICogMjsKCWFuaW1hdGlvbjJbIHJlZiBdID0gKCBwb3NpdGl2ZU1vdGlvbiA/ICItPSIgOiAiKz0iICkgKyBkaXN0YW5jZSAqIDI7CgoJLy8gQW5pbWF0ZQoJZWwuYW5pbWF0ZSggYW5pbWF0aW9uLCBzcGVlZCwgby5lYXNpbmcgKTsKCgkvLyBTaGFrZXMKCWZvciAoIGkgPSAxOyBpIDwgdGltZXM7IGkrKyApIHsKCQllbC5hbmltYXRlKCBhbmltYXRpb24xLCBzcGVlZCwgby5lYXNpbmcgKS5hbmltYXRlKCBhbmltYXRpb24yLCBzcGVlZCwgby5lYXNpbmcgKTsKCX0KCWVsCgkJLmFuaW1hdGUoIGFuaW1hdGlvbjEsIHNwZWVkLCBvLmVhc2luZyApCgkJLmFuaW1hdGUoIGFuaW1hdGlvbiwgc3BlZWQgLyAyLCBvLmVhc2luZyApCgkJLnF1ZXVlKGZ1bmN0aW9uKCkgewoJCQlpZiAoIG1vZGUgPT09ICJoaWRlIiApIHsKCQkJCWVsLmhpZGUoKTsKCQkJfQoJCQkkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7CgkJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCQlkb25lKCk7CgkJfSk7CgoJLy8gaW5qZWN0IGFsbCB0aGUgYW5pbWF0aW9ucyB3ZSBqdXN0IHF1ZXVlZCB0byBiZSBmaXJzdCBpbiBsaW5lIChhZnRlciAiaW5wcm9ncmVzcyIpCglpZiAoIHF1ZXVlbGVuID4gMSkgewoJCXF1ZXVlLnNwbGljZS5hcHBseSggcXVldWUsCgkJCVsgMSwgMCBdLmNvbmNhdCggcXVldWUuc3BsaWNlKCBxdWV1ZWxlbiwgYW5pbXMgKyAxICkgKSApOwoJfQoJZWwuZGVxdWV1ZSgpOwoKfTsKCgovKiEKICogalF1ZXJ5IFVJIEVmZmVjdHMgU2xpZGUgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2xpZGUtZWZmZWN0LwogKi8KCgp2YXIgZWZmZWN0U2xpZGUgPSAkLmVmZmVjdHMuZWZmZWN0LnNsaWRlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJ3aWR0aCIsICJoZWlnaHQiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJzaG93IiApLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgImxlZnQiLAoJCXJlZiA9IChkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAiZG93biIpID8gInRvcCIgOiAibGVmdCIsCgkJcG9zaXRpdmVNb3Rpb24gPSAoZGlyZWN0aW9uID09PSAidXAiIHx8IGRpcmVjdGlvbiA9PT0gImxlZnQiKSwKCQlkaXN0YW5jZSwKCQlhbmltYXRpb24gPSB7fTsKCgkvLyBBZGp1c3QKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCWRpc3RhbmNlID0gby5kaXN0YW5jZSB8fCBlbFsgcmVmID09PSAidG9wIiA/ICJvdXRlckhlaWdodCIgOiAib3V0ZXJXaWR0aCIgXSggdHJ1ZSApOwoKCSQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApLmNzcyh7CgkJb3ZlcmZsb3c6ICJoaWRkZW4iCgl9KTsKCglpZiAoIHNob3cgKSB7CgkJZWwuY3NzKCByZWYsIHBvc2l0aXZlTW90aW9uID8gKGlzTmFOKGRpc3RhbmNlKSA/ICItIiArIGRpc3RhbmNlIDogLWRpc3RhbmNlKSA6IGRpc3RhbmNlICk7Cgl9CgoJLy8gQW5pbWF0aW9uCglhbmltYXRpb25bIHJlZiBdID0gKCBzaG93ID8KCQkoIHBvc2l0aXZlTW90aW9uID8gIis9IiA6ICItPSIpIDoKCQkoIHBvc2l0aXZlTW90aW9uID8gIi09IiA6ICIrPSIpKSArCgkJZGlzdGFuY2U7CgoJLy8gQW5pbWF0ZQoJZWwuYW5pbWF0ZSggYW5pbWF0aW9uLCB7CgkJcXVldWU6IGZhbHNlLAoJCWR1cmF0aW9uOiBvLmR1cmF0aW9uLAoJCWVhc2luZzogby5lYXNpbmcsCgkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQlpZiAoIG1vZGUgPT09ICJoaWRlIiApIHsKCQkJCWVsLmhpZGUoKTsKCQkJfQoJCQkkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7CgkJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCQlkb25lKCk7CgkJfQoJfSk7Cn07CgoKLyohCiAqIGpRdWVyeSBVSSBFZmZlY3RzIFRyYW5zZmVyIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3RyYW5zZmVyLWVmZmVjdC8KICovCgoKdmFyIGVmZmVjdFRyYW5zZmVyID0gJC5lZmZlY3RzLmVmZmVjdC50cmFuc2ZlciA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJdmFyIGVsZW0gPSAkKCB0aGlzICksCgkJdGFyZ2V0ID0gJCggby50byApLAoJCXRhcmdldEZpeGVkID0gdGFyZ2V0LmNzcyggInBvc2l0aW9uIiApID09PSAiZml4ZWQiLAoJCWJvZHkgPSAkKCJib2R5IiksCgkJZml4VG9wID0gdGFyZ2V0Rml4ZWQgPyBib2R5LnNjcm9sbFRvcCgpIDogMCwKCQlmaXhMZWZ0ID0gdGFyZ2V0Rml4ZWQgPyBib2R5LnNjcm9sbExlZnQoKSA6IDAsCgkJZW5kUG9zaXRpb24gPSB0YXJnZXQub2Zmc2V0KCksCgkJYW5pbWF0aW9uID0gewoJCQl0b3A6IGVuZFBvc2l0aW9uLnRvcCAtIGZpeFRvcCwKCQkJbGVmdDogZW5kUG9zaXRpb24ubGVmdCAtIGZpeExlZnQsCgkJCWhlaWdodDogdGFyZ2V0LmlubmVySGVpZ2h0KCksCgkJCXdpZHRoOiB0YXJnZXQuaW5uZXJXaWR0aCgpCgkJfSwKCQlzdGFydFBvc2l0aW9uID0gZWxlbS5vZmZzZXQoKSwKCQl0cmFuc2ZlciA9ICQoICI8ZGl2IGNsYXNzPSd1aS1lZmZlY3RzLXRyYW5zZmVyJz48L2Rpdj4iICkKCQkJLmFwcGVuZFRvKCBkb2N1bWVudC5ib2R5ICkKCQkJLmFkZENsYXNzKCBvLmNsYXNzTmFtZSApCgkJCS5jc3MoewoJCQkJdG9wOiBzdGFydFBvc2l0aW9uLnRvcCAtIGZpeFRvcCwKCQkJCWxlZnQ6IHN0YXJ0UG9zaXRpb24ubGVmdCAtIGZpeExlZnQsCgkJCQloZWlnaHQ6IGVsZW0uaW5uZXJIZWlnaHQoKSwKCQkJCXdpZHRoOiBlbGVtLmlubmVyV2lkdGgoKSwKCQkJCXBvc2l0aW9uOiB0YXJnZXRGaXhlZCA/ICJmaXhlZCIgOiAiYWJzb2x1dGUiCgkJCX0pCgkJCS5hbmltYXRlKCBhbmltYXRpb24sIG8uZHVyYXRpb24sIG8uZWFzaW5nLCBmdW5jdGlvbigpIHsKCQkJCXRyYW5zZmVyLnJlbW92ZSgpOwoJCQkJZG9uZSgpOwoJCQl9KTsKfTsKCgovKiEKICogalF1ZXJ5IFVJIFByb2dyZXNzYmFyIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3Byb2dyZXNzYmFyLwogKi8KCgp2YXIgcHJvZ3Jlc3NiYXIgPSAkLndpZGdldCggInVpLnByb2dyZXNzYmFyIiwgewoJdmVyc2lvbjogIjEuMTEuMSIsCglvcHRpb25zOiB7CgkJbWF4OiAxMDAsCgkJdmFsdWU6IDAsCgoJCWNoYW5nZTogbnVsbCwKCQljb21wbGV0ZTogbnVsbAoJfSwKCgltaW46IDAsCgoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJLy8gQ29uc3RyYWluIGluaXRpYWwgdmFsdWUKCQl0aGlzLm9sZFZhbHVlID0gdGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fY29uc3RyYWluZWRWYWx1ZSgpOwoKCQl0aGlzLmVsZW1lbnQKCQkJLmFkZENsYXNzKCAidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLmF0dHIoewoJCQkJLy8gT25seSBzZXQgc3RhdGljIHZhbHVlcywgYXJpYS12YWx1ZW5vdyBhbmQgYXJpYS12YWx1ZW1heCBhcmUKCQkJCS8vIHNldCBpbnNpZGUgX3JlZnJlc2hWYWx1ZSgpCgkJCQlyb2xlOiAicHJvZ3Jlc3NiYXIiLAoJCQkJImFyaWEtdmFsdWVtaW4iOiB0aGlzLm1pbgoJCQl9KTsKCgkJdGhpcy52YWx1ZURpdiA9ICQoICI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci12YWx1ZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1sZWZ0Jz48L2Rpdj4iICkKCQkJLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTsKCgkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS12YWx1ZW1pbiIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtdmFsdWVtYXgiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLXZhbHVlbm93IiApOwoKCQl0aGlzLnZhbHVlRGl2LnJlbW92ZSgpOwoJfSwKCgl2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkgewoJCWlmICggbmV3VmFsdWUgPT09IHVuZGVmaW5lZCApIHsKCQkJcmV0dXJuIHRoaXMub3B0aW9ucy52YWx1ZTsKCQl9CgoJCXRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoIG5ld1ZhbHVlICk7CgkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7Cgl9LAoKCV9jb25zdHJhaW5lZFZhbHVlOiBmdW5jdGlvbiggbmV3VmFsdWUgKSB7CgkJaWYgKCBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkICkgewoJCQluZXdWYWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZTsKCQl9CgoJCXRoaXMuaW5kZXRlcm1pbmF0ZSA9IG5ld1ZhbHVlID09PSBmYWxzZTsKCgkJLy8gc2FuaXRpemUgdmFsdWUKCQlpZiAoIHR5cGVvZiBuZXdWYWx1ZSAhPT0gIm51bWJlciIgKSB7CgkJCW5ld1ZhbHVlID0gMDsKCQl9CgoJCXJldHVybiB0aGlzLmluZGV0ZXJtaW5hdGUgPyBmYWxzZSA6CgkJCU1hdGgubWluKCB0aGlzLm9wdGlvbnMubWF4LCBNYXRoLm1heCggdGhpcy5taW4sIG5ld1ZhbHVlICkgKTsKCX0sCgoJX3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkgewoJCS8vIEVuc3VyZSAidmFsdWUiIG9wdGlvbiBpcyBzZXQgYWZ0ZXIgb3RoZXIgdmFsdWVzIChsaWtlIG1heCkKCQl2YXIgdmFsdWUgPSBvcHRpb25zLnZhbHVlOwoJCWRlbGV0ZSBvcHRpb25zLnZhbHVlOwoKCQl0aGlzLl9zdXBlciggb3B0aW9ucyApOwoKCQl0aGlzLm9wdGlvbnMudmFsdWUgPSB0aGlzLl9jb25zdHJhaW5lZFZhbHVlKCB2YWx1ZSApOwoJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQlpZiAoIGtleSA9PT0gIm1heCIgKSB7CgkJCS8vIERvbid0IGFsbG93IGEgbWF4IGxlc3MgdGhhbiBtaW4KCQkJdmFsdWUgPSBNYXRoLm1heCggdGhpcy5taW4sIHZhbHVlICk7CgkJfQoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQl0aGlzLmVsZW1lbnQKCQkJCS50b2dnbGVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiwgISF2YWx1ZSApCgkJCQkuYXR0ciggImFyaWEtZGlzYWJsZWQiLCB2YWx1ZSApOwoJCX0KCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOwoJfSwKCglfcGVyY2VudGFnZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuaW5kZXRlcm1pbmF0ZSA/IDEwMCA6IDEwMCAqICggdGhpcy5vcHRpb25zLnZhbHVlIC0gdGhpcy5taW4gKSAvICggdGhpcy5vcHRpb25zLm1heCAtIHRoaXMubWluICk7Cgl9LAoKCV9yZWZyZXNoVmFsdWU6IGZ1bmN0aW9uKCkgewoJCXZhciB2YWx1ZSA9IHRoaXMub3B0aW9ucy52YWx1ZSwKCQkJcGVyY2VudGFnZSA9IHRoaXMuX3BlcmNlbnRhZ2UoKTsKCgkJdGhpcy52YWx1ZURpdgoJCQkudG9nZ2xlKCB0aGlzLmluZGV0ZXJtaW5hdGUgfHwgdmFsdWUgPiB0aGlzLm1pbiApCgkJCS50b2dnbGVDbGFzcyggInVpLWNvcm5lci1yaWdodCIsIHZhbHVlID09PSB0aGlzLm9wdGlvbnMubWF4ICkKCQkJLndpZHRoKCBwZXJjZW50YWdlLnRvRml4ZWQoMCkgKyAiJSIgKTsKCgkJdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCAidWktcHJvZ3Jlc3NiYXItaW5kZXRlcm1pbmF0ZSIsIHRoaXMuaW5kZXRlcm1pbmF0ZSApOwoKCQlpZiAoIHRoaXMuaW5kZXRlcm1pbmF0ZSApIHsKCQkJdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoICJhcmlhLXZhbHVlbm93IiApOwoJCQlpZiAoICF0aGlzLm92ZXJsYXlEaXYgKSB7CgkJCQl0aGlzLm92ZXJsYXlEaXYgPSAkKCAiPGRpdiBjbGFzcz0ndWktcHJvZ3Jlc3NiYXItb3ZlcmxheSc+PC9kaXY+IiApLmFwcGVuZFRvKCB0aGlzLnZhbHVlRGl2ICk7CgkJCX0KCQl9IGVsc2UgewoJCQl0aGlzLmVsZW1lbnQuYXR0cih7CgkJCQkiYXJpYS12YWx1ZW1heCI6IHRoaXMub3B0aW9ucy5tYXgsCgkJCQkiYXJpYS12YWx1ZW5vdyI6IHZhbHVlCgkJCX0pOwoJCQlpZiAoIHRoaXMub3ZlcmxheURpdiApIHsKCQkJCXRoaXMub3ZlcmxheURpdi5yZW1vdmUoKTsKCQkJCXRoaXMub3ZlcmxheURpdiA9IG51bGw7CgkJCX0KCQl9CgoJCWlmICggdGhpcy5vbGRWYWx1ZSAhPT0gdmFsdWUgKSB7CgkJCXRoaXMub2xkVmFsdWUgPSB2YWx1ZTsKCQkJdGhpcy5fdHJpZ2dlciggImNoYW5nZSIgKTsKCQl9CgkJaWYgKCB2YWx1ZSA9PT0gdGhpcy5vcHRpb25zLm1heCApIHsKCQkJdGhpcy5fdHJpZ2dlciggImNvbXBsZXRlIiApOwoJCX0KCX0KfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBTZWxlY3RhYmxlIDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NlbGVjdGFibGUvCiAqLwoKCnZhciBzZWxlY3RhYmxlID0gJC53aWRnZXQoInVpLnNlbGVjdGFibGUiLCAkLnVpLm1vdXNlLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCW9wdGlvbnM6IHsKCQlhcHBlbmRUbzogImJvZHkiLAoJCWF1dG9SZWZyZXNoOiB0cnVlLAoJCWRpc3RhbmNlOiAwLAoJCWZpbHRlcjogIioiLAoJCXRvbGVyYW5jZTogInRvdWNoIiwKCgkJLy8gY2FsbGJhY2tzCgkJc2VsZWN0ZWQ6IG51bGwsCgkJc2VsZWN0aW5nOiBudWxsLAoJCXN0YXJ0OiBudWxsLAoJCXN0b3A6IG51bGwsCgkJdW5zZWxlY3RlZDogbnVsbCwKCQl1bnNlbGVjdGluZzogbnVsbAoJfSwKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXZhciBzZWxlY3RlZXMsCgkJCXRoYXQgPSB0aGlzOwoKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTsKCgkJdGhpcy5kcmFnZ2VkID0gZmFsc2U7CgoJCS8vIGNhY2hlIHNlbGVjdGVlIGNoaWxkcmVuIGJhc2VkIG9uIGZpbHRlcgoJCXRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewoJCQlzZWxlY3RlZXMgPSAkKHRoYXQub3B0aW9ucy5maWx0ZXIsIHRoYXQuZWxlbWVudFswXSk7CgkJCXNlbGVjdGVlcy5hZGRDbGFzcygidWktc2VsZWN0ZWUiKTsKCQkJc2VsZWN0ZWVzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQl2YXIgJHRoaXMgPSAkKHRoaXMpLAoJCQkJCXBvcyA9ICR0aGlzLm9mZnNldCgpOwoJCQkJJC5kYXRhKHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iLCB7CgkJCQkJZWxlbWVudDogdGhpcywKCQkJCQkkZWxlbWVudDogJHRoaXMsCgkJCQkJbGVmdDogcG9zLmxlZnQsCgkJCQkJdG9wOiBwb3MudG9wLAoJCQkJCXJpZ2h0OiBwb3MubGVmdCArICR0aGlzLm91dGVyV2lkdGgoKSwKCQkJCQlib3R0b206IHBvcy50b3AgKyAkdGhpcy5vdXRlckhlaWdodCgpLAoJCQkJCXN0YXJ0c2VsZWN0ZWQ6IGZhbHNlLAoJCQkJCXNlbGVjdGVkOiAkdGhpcy5oYXNDbGFzcygidWktc2VsZWN0ZWQiKSwKCQkJCQlzZWxlY3Rpbmc6ICR0aGlzLmhhc0NsYXNzKCJ1aS1zZWxlY3RpbmciKSwKCQkJCQl1bnNlbGVjdGluZzogJHRoaXMuaGFzQ2xhc3MoInVpLXVuc2VsZWN0aW5nIikKCQkJCX0pOwoJCQl9KTsKCQl9OwoJCXRoaXMucmVmcmVzaCgpOwoKCQl0aGlzLnNlbGVjdGVlcyA9IHNlbGVjdGVlcy5hZGRDbGFzcygidWktc2VsZWN0ZWUiKTsKCgkJdGhpcy5fbW91c2VJbml0KCk7CgoJCXRoaXMuaGVscGVyID0gJCgiPGRpdiBjbGFzcz0ndWktc2VsZWN0YWJsZS1oZWxwZXInPjwvZGl2PiIpOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5zZWxlY3RlZXMKCQkJLnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZSIpCgkJCS5yZW1vdmVEYXRhKCJzZWxlY3RhYmxlLWl0ZW0iKTsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RhYmxlIHVpLXNlbGVjdGFibGUtZGlzYWJsZWQiKTsKCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsKCX0sCgoJX21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQl0aGlzLm9wb3MgPSBbIGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSBdOwoKCQlpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkKSB7CgkJCXJldHVybjsKCQl9CgoJCXRoaXMuc2VsZWN0ZWVzID0gJChvcHRpb25zLmZpbHRlciwgdGhpcy5lbGVtZW50WzBdKTsKCgkJdGhpcy5fdHJpZ2dlcigic3RhcnQiLCBldmVudCk7CgoJCSQob3B0aW9ucy5hcHBlbmRUbykuYXBwZW5kKHRoaXMuaGVscGVyKTsKCQkvLyBwb3NpdGlvbiBoZWxwZXIgKGxhc3NvKQoJCXRoaXMuaGVscGVyLmNzcyh7CgkJCSJsZWZ0IjogZXZlbnQucGFnZVgsCgkJCSJ0b3AiOiBldmVudC5wYWdlWSwKCQkJIndpZHRoIjogMCwKCQkJImhlaWdodCI6IDAKCQl9KTsKCgkJaWYgKG9wdGlvbnMuYXV0b1JlZnJlc2gpIHsKCQkJdGhpcy5yZWZyZXNoKCk7CgkJfQoKCQl0aGlzLnNlbGVjdGVlcy5maWx0ZXIoIi51aS1zZWxlY3RlZCIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCAic2VsZWN0YWJsZS1pdGVtIik7CgkJCXNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQgPSB0cnVlOwoJCQlpZiAoIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkpIHsKCQkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpOwoJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSBmYWxzZTsKCQkJCXNlbGVjdGVlLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpOwoJCQkJc2VsZWN0ZWUudW5zZWxlY3RpbmcgPSB0cnVlOwoJCQkJLy8gc2VsZWN0YWJsZSBVTlNFTEVDVElORyBjYWxsYmFjawoJCQkJdGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLCBldmVudCwgewoJCQkJCXVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50CgkJCQl9KTsKCQkJfQoJCX0pOwoKCQkkKGV2ZW50LnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgZG9TZWxlY3QsCgkJCQlzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCAic2VsZWN0YWJsZS1pdGVtIik7CgkJCWlmIChzZWxlY3RlZSkgewoJCQkJZG9TZWxlY3QgPSAoIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkpIHx8ICFzZWxlY3RlZS4kZWxlbWVudC5oYXNDbGFzcygidWktc2VsZWN0ZWQiKTsKCQkJCXNlbGVjdGVlLiRlbGVtZW50CgkJCQkJLnJlbW92ZUNsYXNzKGRvU2VsZWN0ID8gInVpLXVuc2VsZWN0aW5nIiA6ICJ1aS1zZWxlY3RlZCIpCgkJCQkJLmFkZENsYXNzKGRvU2VsZWN0ID8gInVpLXNlbGVjdGluZyIgOiAidWktdW5zZWxlY3RpbmciKTsKCQkJCXNlbGVjdGVlLnVuc2VsZWN0aW5nID0gIWRvU2VsZWN0OwoJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gZG9TZWxlY3Q7CgkJCQlzZWxlY3RlZS5zZWxlY3RlZCA9IGRvU2VsZWN0OwoJCQkJLy8gc2VsZWN0YWJsZSAoVU4pU0VMRUNUSU5HIGNhbGxiYWNrCgkJCQlpZiAoZG9TZWxlY3QpIHsKCQkJCQl0aGF0Ll90cmlnZ2VyKCJzZWxlY3RpbmciLCBldmVudCwgewoJCQkJCQlzZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQKCQkJCQl9KTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLCBldmVudCwgewoJCQkJCQl1bnNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudAoJCQkJCX0pOwoJCQkJfQoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSk7CgoJfSwKCglfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCkgewoKCQl0aGlzLmRyYWdnZWQgPSB0cnVlOwoKCQlpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkKSB7CgkJCXJldHVybjsKCQl9CgoJCXZhciB0bXAsCgkJCXRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQl4MSA9IHRoaXMub3Bvc1swXSwKCQkJeTEgPSB0aGlzLm9wb3NbMV0sCgkJCXgyID0gZXZlbnQucGFnZVgsCgkJCXkyID0gZXZlbnQucGFnZVk7CgoJCWlmICh4MSA+IHgyKSB7IHRtcCA9IHgyOyB4MiA9IHgxOyB4MSA9IHRtcDsgfQoJCWlmICh5MSA+IHkyKSB7IHRtcCA9IHkyOyB5MiA9IHkxOyB5MSA9IHRtcDsgfQoJCXRoaXMuaGVscGVyLmNzcyh7IGxlZnQ6IHgxLCB0b3A6IHkxLCB3aWR0aDogeDIgLSB4MSwgaGVpZ2h0OiB5MiAtIHkxIH0pOwoKCQl0aGlzLnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgInNlbGVjdGFibGUtaXRlbSIpLAoJCQkJaGl0ID0gZmFsc2U7CgoJCQkvL3ByZXZlbnQgaGVscGVyIGZyb20gYmVpbmcgc2VsZWN0ZWQgaWYgYXBwZW5kVG86IHNlbGVjdGFibGUKCQkJaWYgKCFzZWxlY3RlZSB8fCBzZWxlY3RlZS5lbGVtZW50ID09PSB0aGF0LmVsZW1lbnRbMF0pIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKG9wdGlvbnMudG9sZXJhbmNlID09PSAidG91Y2giKSB7CgkJCQloaXQgPSAoICEoc2VsZWN0ZWUubGVmdCA+IHgyIHx8IHNlbGVjdGVlLnJpZ2h0IDwgeDEgfHwgc2VsZWN0ZWUudG9wID4geTIgfHwgc2VsZWN0ZWUuYm90dG9tIDwgeTEpICk7CgkJCX0gZWxzZSBpZiAob3B0aW9ucy50b2xlcmFuY2UgPT09ICJmaXQiKSB7CgkJCQloaXQgPSAoc2VsZWN0ZWUubGVmdCA+IHgxICYmIHNlbGVjdGVlLnJpZ2h0IDwgeDIgJiYgc2VsZWN0ZWUudG9wID4geTEgJiYgc2VsZWN0ZWUuYm90dG9tIDwgeTIpOwoJCQl9CgoJCQlpZiAoaGl0KSB7CgkJCQkvLyBTRUxFQ1QKCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RlZCkgewoJCQkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpOwoJCQkJCXNlbGVjdGVlLnNlbGVjdGVkID0gZmFsc2U7CgkJCQl9CgkJCQlpZiAoc2VsZWN0ZWUudW5zZWxlY3RpbmcpIHsKCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktdW5zZWxlY3RpbmciKTsKCQkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IGZhbHNlOwoJCQkJfQoJCQkJaWYgKCFzZWxlY3RlZS5zZWxlY3RpbmcpIHsKCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0aW5nIik7CgkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gdHJ1ZTsKCQkJCQkvLyBzZWxlY3RhYmxlIFNFTEVDVElORyBjYWxsYmFjawoJCQkJCXRoYXQuX3RyaWdnZXIoInNlbGVjdGluZyIsIGV2ZW50LCB7CgkJCQkJCXNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudAoJCQkJCX0pOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJLy8gVU5TRUxFQ1QKCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RpbmcpIHsKCQkJCQlpZiAoKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgJiYgc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkgewoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0aW5nIik7CgkJCQkJCXNlbGVjdGVlLnNlbGVjdGluZyA9IGZhbHNlOwoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0ZWQiKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RpbmciKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gZmFsc2U7CgkJCQkJCWlmIChzZWxlY3RlZS5zdGFydHNlbGVjdGVkKSB7CgkJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygidWktdW5zZWxlY3RpbmciKTsKCQkJCQkJCXNlbGVjdGVlLnVuc2VsZWN0aW5nID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQkvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrCgkJCQkJCXRoYXQuX3RyaWdnZXIoInVuc2VsZWN0aW5nIiwgZXZlbnQsIHsKCQkJCQkJCXVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX0KCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RlZCkgewoJCQkJCWlmICghZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSAmJiAhc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkgewoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0ZWQiKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSBmYWxzZTsKCgkJCQkJCXNlbGVjdGVlLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpOwoJCQkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7CgkJCQkJCS8vIHNlbGVjdGFibGUgVU5TRUxFQ1RJTkcgY2FsbGJhY2sKCQkJCQkJdGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLCBldmVudCwgewoJCQkJCQkJdW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSk7CgoJCXJldHVybiBmYWxzZTsKCX0sCgoJX21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCXRoaXMuZHJhZ2dlZCA9IGZhbHNlOwoKCQkkKCIudWktdW5zZWxlY3RpbmciLCB0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCAic2VsZWN0YWJsZS1pdGVtIik7CgkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS11bnNlbGVjdGluZyIpOwoJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IGZhbHNlOwoJCQlzZWxlY3RlZS5zdGFydHNlbGVjdGVkID0gZmFsc2U7CgkJCXRoYXQuX3RyaWdnZXIoInVuc2VsZWN0ZWQiLCBldmVudCwgewoJCQkJdW5zZWxlY3RlZDogc2VsZWN0ZWUuZWxlbWVudAoJCQl9KTsKCQl9KTsKCQkkKCIudWktc2VsZWN0aW5nIiwgdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgInNlbGVjdGFibGUtaXRlbSIpOwoJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0aW5nIikuYWRkQ2xhc3MoInVpLXNlbGVjdGVkIik7CgkJCXNlbGVjdGVlLnNlbGVjdGluZyA9IGZhbHNlOwoJCQlzZWxlY3RlZS5zZWxlY3RlZCA9IHRydWU7CgkJCXNlbGVjdGVlLnN0YXJ0c2VsZWN0ZWQgPSB0cnVlOwoJCQl0aGF0Ll90cmlnZ2VyKCJzZWxlY3RlZCIsIGV2ZW50LCB7CgkJCQlzZWxlY3RlZDogc2VsZWN0ZWUuZWxlbWVudAoJCQl9KTsKCQl9KTsKCQl0aGlzLl90cmlnZ2VyKCJzdG9wIiwgZXZlbnQpOwoKCQl0aGlzLmhlbHBlci5yZW1vdmUoKTsKCgkJcmV0dXJuIGZhbHNlOwoJfQoKfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBTZWxlY3RtZW51IDEuMTEuMQogKiBodHRwOi8vanF1ZXJ5dWkuY29tCiAqCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3NlbGVjdG1lbnUKICovCgoKdmFyIHNlbGVjdG1lbnUgPSAkLndpZGdldCggInVpLnNlbGVjdG1lbnUiLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCWRlZmF1bHRFbGVtZW50OiAiPHNlbGVjdD4iLAoJb3B0aW9uczogewoJCWFwcGVuZFRvOiBudWxsLAoJCWRpc2FibGVkOiBudWxsLAoJCWljb25zOiB7CgkJCWJ1dHRvbjogInVpLWljb24tdHJpYW5nbGUtMS1zIgoJCX0sCgkJcG9zaXRpb246IHsKCQkJbXk6ICJsZWZ0IHRvcCIsCgkJCWF0OiAibGVmdCBib3R0b20iLAoJCQljb2xsaXNpb246ICJub25lIgoJCX0sCgkJd2lkdGg6IG51bGwsCgoJCS8vIGNhbGxiYWNrcwoJCWNoYW5nZTogbnVsbCwKCQljbG9zZTogbnVsbCwKCQlmb2N1czogbnVsbCwKCQlvcGVuOiBudWxsLAoJCXNlbGVjdDogbnVsbAoJfSwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl2YXIgc2VsZWN0bWVudUlkID0gdGhpcy5lbGVtZW50LnVuaXF1ZUlkKCkuYXR0ciggImlkIiApOwoJCXRoaXMuaWRzID0gewoJCQllbGVtZW50OiBzZWxlY3RtZW51SWQsCgkJCWJ1dHRvbjogc2VsZWN0bWVudUlkICsgIi1idXR0b24iLAoJCQltZW51OiBzZWxlY3RtZW51SWQgKyAiLW1lbnUiCgkJfTsKCgkJdGhpcy5fZHJhd0J1dHRvbigpOwoJCXRoaXMuX2RyYXdNZW51KCk7CgoJCWlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkgewoJCQl0aGlzLmRpc2FibGUoKTsKCQl9Cgl9LAoKCV9kcmF3QnV0dG9uOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCXRhYmluZGV4ID0gdGhpcy5lbGVtZW50LmF0dHIoICJ0YWJpbmRleCIgKTsKCgkJLy8gQXNzb2NpYXRlIGV4aXN0aW5nIGxhYmVsIHdpdGggdGhlIG5ldyBidXR0b24KCQl0aGlzLmxhYmVsID0gJCggImxhYmVsW2Zvcj0nIiArIHRoaXMuaWRzLmVsZW1lbnQgKyAiJ10iICkuYXR0ciggImZvciIsIHRoaXMuaWRzLmJ1dHRvbiApOwoJCXRoaXMuX29uKCB0aGlzLmxhYmVsLCB7CgkJCWNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQl0aGlzLmJ1dHRvbi5mb2N1cygpOwoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0pOwoKCQkvLyBIaWRlIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50CgkJdGhpcy5lbGVtZW50LmhpZGUoKTsKCgkJLy8gQ3JlYXRlIGJ1dHRvbgoJCXRoaXMuYnV0dG9uID0gJCggIjxzcGFuPiIsIHsKCQkJImNsYXNzIjogInVpLXNlbGVjdG1lbnUtYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiLAoJCQl0YWJpbmRleDogdGFiaW5kZXggfHwgdGhpcy5vcHRpb25zLmRpc2FibGVkID8gLTEgOiAwLAoJCQlpZDogdGhpcy5pZHMuYnV0dG9uLAoJCQlyb2xlOiAiY29tYm9ib3giLAoJCQkiYXJpYS1leHBhbmRlZCI6ICJmYWxzZSIsCgkJCSJhcmlhLWF1dG9jb21wbGV0ZSI6ICJsaXN0IiwKCQkJImFyaWEtb3ducyI6IHRoaXMuaWRzLm1lbnUsCgkJCSJhcmlhLWhhc3BvcHVwIjogInRydWUiCgkJfSkKCQkJLmluc2VydEFmdGVyKCB0aGlzLmVsZW1lbnQgKTsKCgkJJCggIjxzcGFuPiIsIHsKCQkJImNsYXNzIjogInVpLWljb24gIiArIHRoaXMub3B0aW9ucy5pY29ucy5idXR0b24KCQl9KQoJCQkucHJlcGVuZFRvKCB0aGlzLmJ1dHRvbiApOwoKCQl0aGlzLmJ1dHRvblRleHQgPSAkKCAiPHNwYW4+IiwgewoJCQkiY2xhc3MiOiAidWktc2VsZWN0bWVudS10ZXh0IgoJCX0pCgkJCS5hcHBlbmRUbyggdGhpcy5idXR0b24gKTsKCgkJdGhpcy5fc2V0VGV4dCggdGhpcy5idXR0b25UZXh0LCB0aGlzLmVsZW1lbnQuZmluZCggIm9wdGlvbjpzZWxlY3RlZCIgKS50ZXh0KCkgKTsKCQl0aGlzLl9yZXNpemVCdXR0b24oKTsKCgkJdGhpcy5fb24oIHRoaXMuYnV0dG9uLCB0aGlzLl9idXR0b25FdmVudHMgKTsKCQl0aGlzLmJ1dHRvbi5vbmUoICJmb2N1c2luIiwgZnVuY3Rpb24oKSB7CgoJCQkvLyBEZWxheSByZW5kZXJpbmcgdGhlIG1lbnUgaXRlbXMgdW50aWwgdGhlIGJ1dHRvbiByZWNlaXZlcyBmb2N1cy4KCQkJLy8gVGhlIG1lbnUgbWF5IGhhdmUgYWxyZWFkeSBiZWVuIHJlbmRlcmVkIHZpYSBhIHByb2dyYW1tYXRpYyBvcGVuLgoJCQlpZiAoICF0aGF0Lm1lbnVJdGVtcyApIHsKCQkJCXRoYXQuX3JlZnJlc2hNZW51KCk7CgkJCX0KCQl9KTsKCQl0aGlzLl9ob3ZlcmFibGUoIHRoaXMuYnV0dG9uICk7CgkJdGhpcy5fZm9jdXNhYmxlKCB0aGlzLmJ1dHRvbiApOwoJfSwKCglfZHJhd01lbnU6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gdGhpczsKCgkJLy8gQ3JlYXRlIG1lbnUKCQl0aGlzLm1lbnUgPSAkKCAiPHVsPiIsIHsKCQkJImFyaWEtaGlkZGVuIjogInRydWUiLAoJCQkiYXJpYS1sYWJlbGxlZGJ5IjogdGhpcy5pZHMuYnV0dG9uLAoJCQlpZDogdGhpcy5pZHMubWVudQoJCX0pOwoKCQkvLyBXcmFwIG1lbnUKCQl0aGlzLm1lbnVXcmFwID0gJCggIjxkaXY+IiwgewoJCQkiY2xhc3MiOiAidWktc2VsZWN0bWVudS1tZW51IHVpLWZyb250IgoJCX0pCgkJCS5hcHBlbmQoIHRoaXMubWVudSApCgkJCS5hcHBlbmRUbyggdGhpcy5fYXBwZW5kVG8oKSApOwoKCQkvLyBJbml0aWFsaXplIG1lbnUgd2lkZ2V0CgkJdGhpcy5tZW51SW5zdGFuY2UgPSB0aGlzLm1lbnUKCQkJLm1lbnUoewoJCQkJcm9sZTogImxpc3Rib3giLAoJCQkJc2VsZWN0OiBmdW5jdGlvbiggZXZlbnQsIHVpICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJdGhhdC5fc2VsZWN0KCB1aS5pdGVtLmRhdGEoICJ1aS1zZWxlY3RtZW51LWl0ZW0iICksIGV2ZW50ICk7CgkJCQl9LAoJCQkJZm9jdXM6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQkJdmFyIGl0ZW0gPSB1aS5pdGVtLmRhdGEoICJ1aS1zZWxlY3RtZW51LWl0ZW0iICk7CgoJCQkJCS8vIFByZXZlbnQgaW5pdGFsIGZvY3VzIGZyb20gZmlyaW5nIGFuZCBjaGVjayBpZiBpdHMgYSBuZXdseSBmb2N1c2VkIGl0ZW0KCQkJCQlpZiAoIHRoYXQuZm9jdXNJbmRleCAhPSBudWxsICYmIGl0ZW0uaW5kZXggIT09IHRoYXQuZm9jdXNJbmRleCApIHsKCQkJCQkJdGhhdC5fdHJpZ2dlciggImZvY3VzIiwgZXZlbnQsIHsgaXRlbTogaXRlbSB9ICk7CgkJCQkJCWlmICggIXRoYXQuaXNPcGVuICkgewoJCQkJCQkJdGhhdC5fc2VsZWN0KCBpdGVtLCBldmVudCApOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXRoYXQuZm9jdXNJbmRleCA9IGl0ZW0uaW5kZXg7CgoJCQkJCXRoYXQuYnV0dG9uLmF0dHIoICJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiLAoJCQkJCQl0aGF0Lm1lbnVJdGVtcy5lcSggaXRlbS5pbmRleCApLmF0dHIoICJpZCIgKSApOwoJCQkJfQoJCQl9KQoJCQkubWVudSggImluc3RhbmNlIiApOwoKCQkvLyBBZGp1c3QgbWVudSBzdHlsZXMgdG8gZHJvcGRvd24KCQl0aGlzLm1lbnUKCQkJLmFkZENsYXNzKCAidWktY29ybmVyLWJvdHRvbSIgKQoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIiApOwoKCQkvLyBEb24ndCBjbG9zZSB0aGUgbWVudSBvbiBtb3VzZWxlYXZlCgkJdGhpcy5tZW51SW5zdGFuY2UuX29mZiggdGhpcy5tZW51LCAibW91c2VsZWF2ZSIgKTsKCgkJLy8gQ2FuY2VsIHRoZSBtZW51J3MgY29sbGFwc2VBbGwgb24gZG9jdW1lbnQgY2xpY2sKCQl0aGlzLm1lbnVJbnN0YW5jZS5fY2xvc2VPbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX07CgoJCS8vIFNlbGVjdHMgb2Z0ZW4gY29udGFpbiBlbXB0eSBpdGVtcywgYnV0IG5ldmVyIGNvbnRhaW4gZGl2aWRlcnMKCQl0aGlzLm1lbnVJbnN0YW5jZS5faXNEaXZpZGVyID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9OwoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9yZWZyZXNoTWVudSgpOwoJCXRoaXMuX3NldFRleHQoIHRoaXMuYnV0dG9uVGV4dCwgdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkudGV4dCgpICk7CgkJaWYgKCAhdGhpcy5vcHRpb25zLndpZHRoICkgewoJCQl0aGlzLl9yZXNpemVCdXR0b24oKTsKCQl9Cgl9LAoKCV9yZWZyZXNoTWVudTogZnVuY3Rpb24oKSB7CgkJdGhpcy5tZW51LmVtcHR5KCk7CgoJCXZhciBpdGVtLAoJCQlvcHRpb25zID0gdGhpcy5lbGVtZW50LmZpbmQoICJvcHRpb24iICk7CgoJCWlmICggIW9wdGlvbnMubGVuZ3RoICkgewoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLl9wYXJzZU9wdGlvbnMoIG9wdGlvbnMgKTsKCQl0aGlzLl9yZW5kZXJNZW51KCB0aGlzLm1lbnUsIHRoaXMuaXRlbXMgKTsKCgkJdGhpcy5tZW51SW5zdGFuY2UucmVmcmVzaCgpOwoJCXRoaXMubWVudUl0ZW1zID0gdGhpcy5tZW51LmZpbmQoICJsaSIgKS5ub3QoICIudWktc2VsZWN0bWVudS1vcHRncm91cCIgKTsKCgkJaXRlbSA9IHRoaXMuX2dldFNlbGVjdGVkSXRlbSgpOwoKCQkvLyBVcGRhdGUgdGhlIG1lbnUgdG8gaGF2ZSB0aGUgY29ycmVjdCBpdGVtIGZvY3VzZWQKCQl0aGlzLm1lbnVJbnN0YW5jZS5mb2N1cyggbnVsbCwgaXRlbSApOwoJCXRoaXMuX3NldEFyaWEoIGl0ZW0uZGF0YSggInVpLXNlbGVjdG1lbnUtaXRlbSIgKSApOwoKCQkvLyBTZXQgZGlzYWJsZWQgc3RhdGUKCQl0aGlzLl9zZXRPcHRpb24oICJkaXNhYmxlZCIsIHRoaXMuZWxlbWVudC5wcm9wKCAiZGlzYWJsZWQiICkgKTsKCX0sCgoJb3BlbjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoZSBtZW51IGlzIGJlaW5nIG9wZW5lZCwgcmVuZGVyIHRoZSBpdGVtcwoJCWlmICggIXRoaXMubWVudUl0ZW1zICkgewoJCQl0aGlzLl9yZWZyZXNoTWVudSgpOwoJCX0gZWxzZSB7CgoJCQkvLyBNZW51IGNsZWFycyBmb2N1cyBvbiBjbG9zZSwgcmVzZXQgZm9jdXMgdG8gc2VsZWN0ZWQgaXRlbQoJCQl0aGlzLm1lbnUuZmluZCggIi51aS1zdGF0ZS1mb2N1cyIgKS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWZvY3VzIiApOwoJCQl0aGlzLm1lbnVJbnN0YW5jZS5mb2N1cyggbnVsbCwgdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkgKTsKCQl9CgoJCXRoaXMuaXNPcGVuID0gdHJ1ZTsKCQl0aGlzLl90b2dnbGVBdHRyKCk7CgkJdGhpcy5fcmVzaXplTWVudSgpOwoJCXRoaXMuX3Bvc2l0aW9uKCk7CgoJCXRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB0aGlzLl9kb2N1bWVudENsaWNrICk7CgoJCXRoaXMuX3RyaWdnZXIoICJvcGVuIiwgZXZlbnQgKTsKCX0sCgoJX3Bvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQl0aGlzLm1lbnVXcmFwLnBvc2l0aW9uKCAkLmV4dGVuZCggeyBvZjogdGhpcy5idXR0b24gfSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uICkgKTsKCX0sCgoJY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoICF0aGlzLmlzT3BlbiApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5pc09wZW4gPSBmYWxzZTsKCQl0aGlzLl90b2dnbGVBdHRyKCk7CgoJCXRoaXMuX29mZiggdGhpcy5kb2N1bWVudCApOwoKCQl0aGlzLl90cmlnZ2VyKCAiY2xvc2UiLCBldmVudCApOwoJfSwKCgl3aWRnZXQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmJ1dHRvbjsKCX0sCgoJbWVudVdpZGdldDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWVudTsKCX0sCgoJX3JlbmRlck1lbnU6IGZ1bmN0aW9uKCB1bCwgaXRlbXMgKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQljdXJyZW50T3B0Z3JvdXAgPSAiIjsKCgkJJC5lYWNoKCBpdGVtcywgZnVuY3Rpb24oIGluZGV4LCBpdGVtICkgewoJCQlpZiAoIGl0ZW0ub3B0Z3JvdXAgIT09IGN1cnJlbnRPcHRncm91cCApIHsKCQkJCSQoICI8bGk+IiwgewoJCQkJCSJjbGFzcyI6ICJ1aS1zZWxlY3RtZW51LW9wdGdyb3VwIHVpLW1lbnUtZGl2aWRlciIgKwoJCQkJCQkoIGl0ZW0uZWxlbWVudC5wYXJlbnQoICJvcHRncm91cCIgKS5wcm9wKCAiZGlzYWJsZWQiICkgPwoJCQkJCQkJIiB1aS1zdGF0ZS1kaXNhYmxlZCIgOgoJCQkJCQkJIiIgKSwKCQkJCQl0ZXh0OiBpdGVtLm9wdGdyb3VwCgkJCQl9KQoJCQkJCS5hcHBlbmRUbyggdWwgKTsKCgkJCQljdXJyZW50T3B0Z3JvdXAgPSBpdGVtLm9wdGdyb3VwOwoJCQl9CgoJCQl0aGF0Ll9yZW5kZXJJdGVtRGF0YSggdWwsIGl0ZW0gKTsKCQl9KTsKCX0sCgoJX3JlbmRlckl0ZW1EYXRhOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7CgkJcmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0oIHVsLCBpdGVtICkuZGF0YSggInVpLXNlbGVjdG1lbnUtaXRlbSIsIGl0ZW0gKTsKCX0sCgoJX3JlbmRlckl0ZW06IGZ1bmN0aW9uKCB1bCwgaXRlbSApIHsKCQl2YXIgbGkgPSAkKCAiPGxpPiIgKTsKCgkJaWYgKCBpdGVtLmRpc2FibGVkICkgewoJCQlsaS5hZGRDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApOwoJCX0KCQl0aGlzLl9zZXRUZXh0KCBsaSwgaXRlbS5sYWJlbCApOwoKCQlyZXR1cm4gbGkuYXBwZW5kVG8oIHVsICk7Cgl9LAoKCV9zZXRUZXh0OiBmdW5jdGlvbiggZWxlbWVudCwgdmFsdWUgKSB7CgkJaWYgKCB2YWx1ZSApIHsKCQkJZWxlbWVudC50ZXh0KCB2YWx1ZSApOwoJCX0gZWxzZSB7CgkJCWVsZW1lbnQuaHRtbCggIiYjMTYwOyIgKTsKCQl9Cgl9LAoKCV9tb3ZlOiBmdW5jdGlvbiggZGlyZWN0aW9uLCBldmVudCApIHsKCQl2YXIgaXRlbSwgbmV4dCwKCQkJZmlsdGVyID0gIi51aS1tZW51LWl0ZW0iOwoKCQlpZiAoIHRoaXMuaXNPcGVuICkgewoJCQlpdGVtID0gdGhpcy5tZW51SXRlbXMuZXEoIHRoaXMuZm9jdXNJbmRleCApOwoJCX0gZWxzZSB7CgkJCWl0ZW0gPSB0aGlzLm1lbnVJdGVtcy5lcSggdGhpcy5lbGVtZW50WyAwIF0uc2VsZWN0ZWRJbmRleCApOwoJCQlmaWx0ZXIgKz0gIjpub3QoLnVpLXN0YXRlLWRpc2FibGVkKSI7CgkJfQoKCQlpZiAoIGRpcmVjdGlvbiA9PT0gImZpcnN0IiB8fCBkaXJlY3Rpb24gPT09ICJsYXN0IiApIHsKCQkJbmV4dCA9IGl0ZW1bIGRpcmVjdGlvbiA9PT0gImZpcnN0IiA/ICJwcmV2QWxsIiA6ICJuZXh0QWxsIiBdKCBmaWx0ZXIgKS5lcSggLTEgKTsKCQl9IGVsc2UgewoJCQluZXh0ID0gaXRlbVsgZGlyZWN0aW9uICsgIkFsbCIgXSggZmlsdGVyICkuZXEoIDAgKTsKCQl9CgoJCWlmICggbmV4dC5sZW5ndGggKSB7CgkJCXRoaXMubWVudUluc3RhbmNlLmZvY3VzKCBldmVudCwgbmV4dCApOwoJCX0KCX0sCgoJX2dldFNlbGVjdGVkSXRlbTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWVudUl0ZW1zLmVxKCB0aGlzLmVsZW1lbnRbIDAgXS5zZWxlY3RlZEluZGV4ICk7Cgl9LAoKCV90b2dnbGU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl0aGlzWyB0aGlzLmlzT3BlbiA/ICJjbG9zZSIgOiAib3BlbiIgXSggZXZlbnQgKTsKCX0sCgoJX2RvY3VtZW50Q2xpY2s6IHsKCQltb3VzZWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJaWYgKCAhdGhpcy5pc09wZW4gKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktc2VsZWN0bWVudS1tZW51LCAjIiArIHRoaXMuaWRzLmJ1dHRvbiApLmxlbmd0aCApIHsKCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCX0KCQl9Cgl9LAoKCV9idXR0b25FdmVudHM6IHsKCgkJLy8gUHJldmVudCB0ZXh0IHNlbGVjdGlvbiBmcm9tIGJlaW5nIHJlc2V0IHdoZW4gaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc2VsZWN0bWVudSAoIzEwMTQ0KQoJCW1vdXNlZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0sCgoJCWNsaWNrOiAiX3RvZ2dsZSIsCgoJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJdmFyIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTsKCQkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlRBQjoKCQkJCWNhc2UgJC51aS5rZXlDb2RlLkVTQ0FQRToKCQkJCQl0aGlzLmNsb3NlKCBldmVudCApOwoJCQkJCXByZXZlbnREZWZhdWx0ID0gZmFsc2U7CgkJCQkJYnJlYWs7CgkJCQljYXNlICQudWkua2V5Q29kZS5FTlRFUjoKCQkJCQlpZiAoIHRoaXMuaXNPcGVuICkgewoJCQkJCQl0aGlzLl9zZWxlY3RGb2N1c2VkSXRlbSggZXZlbnQgKTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQljYXNlICQudWkua2V5Q29kZS5VUDoKCQkJCQlpZiAoIGV2ZW50LmFsdEtleSApIHsKCQkJCQkJdGhpcy5fdG9nZ2xlKCBldmVudCApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMuX21vdmUoICJwcmV2IiwgZXZlbnQgKTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQljYXNlICQudWkua2V5Q29kZS5ET1dOOgoJCQkJCWlmICggZXZlbnQuYWx0S2V5ICkgewoJCQkJCQl0aGlzLl90b2dnbGUoIGV2ZW50ICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJdGhpcy5fbW92ZSggIm5leHQiLCBldmVudCApOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOgoJCQkJCWlmICggdGhpcy5pc09wZW4gKSB7CgkJCQkJCXRoaXMuX3NlbGVjdEZvY3VzZWRJdGVtKCBldmVudCApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMuX3RvZ2dsZSggZXZlbnQgKTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQljYXNlICQudWkua2V5Q29kZS5MRUZUOgoJCQkJCXRoaXMuX21vdmUoICJwcmV2IiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOgoJCQkJCXRoaXMuX21vdmUoICJuZXh0IiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLkhPTUU6CgkJCQljYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOgoJCQkJCXRoaXMuX21vdmUoICJmaXJzdCIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlICQudWkua2V5Q29kZS5FTkQ6CgkJCQljYXNlICQudWkua2V5Q29kZS5QQUdFX0RPV046CgkJCQkJdGhpcy5fbW92ZSggImxhc3QiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQl0aGlzLm1lbnUudHJpZ2dlciggZXZlbnQgKTsKCQkJCQlwcmV2ZW50RGVmYXVsdCA9IGZhbHNlOwoJCQl9CgoJCQlpZiAoIHByZXZlbnREZWZhdWx0ICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0KCX0sCgoJX3NlbGVjdEZvY3VzZWRJdGVtOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGl0ZW0gPSB0aGlzLm1lbnVJdGVtcy5lcSggdGhpcy5mb2N1c0luZGV4ICk7CgkJaWYgKCAhaXRlbS5oYXNDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApICkgewoJCQl0aGlzLl9zZWxlY3QoIGl0ZW0uZGF0YSggInVpLXNlbGVjdG1lbnUtaXRlbSIgKSwgZXZlbnQgKTsKCQl9Cgl9LAoKCV9zZWxlY3Q6IGZ1bmN0aW9uKCBpdGVtLCBldmVudCApIHsKCQl2YXIgb2xkSW5kZXggPSB0aGlzLmVsZW1lbnRbIDAgXS5zZWxlY3RlZEluZGV4OwoKCQkvLyBDaGFuZ2UgbmF0aXZlIHNlbGVjdCBlbGVtZW50CgkJdGhpcy5lbGVtZW50WyAwIF0uc2VsZWN0ZWRJbmRleCA9IGl0ZW0uaW5kZXg7CgkJdGhpcy5fc2V0VGV4dCggdGhpcy5idXR0b25UZXh0LCBpdGVtLmxhYmVsICk7CgkJdGhpcy5fc2V0QXJpYSggaXRlbSApOwoJCXRoaXMuX3RyaWdnZXIoICJzZWxlY3QiLCBldmVudCwgeyBpdGVtOiBpdGVtIH0gKTsKCgkJaWYgKCBpdGVtLmluZGV4ICE9PSBvbGRJbmRleCApIHsKCQkJdGhpcy5fdHJpZ2dlciggImNoYW5nZSIsIGV2ZW50LCB7IGl0ZW06IGl0ZW0gfSApOwoJCX0KCgkJdGhpcy5jbG9zZSggZXZlbnQgKTsKCX0sCgoJX3NldEFyaWE6IGZ1bmN0aW9uKCBpdGVtICkgewoJCXZhciBpZCA9IHRoaXMubWVudUl0ZW1zLmVxKCBpdGVtLmluZGV4ICkuYXR0ciggImlkIiApOwoKCQl0aGlzLmJ1dHRvbi5hdHRyKHsKCQkJImFyaWEtbGFiZWxsZWRieSI6IGlkLAoJCQkiYXJpYS1hY3RpdmVkZXNjZW5kYW50IjogaWQKCQl9KTsKCQl0aGlzLm1lbnUuYXR0ciggImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsIGlkICk7Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCWlmICgga2V5ID09PSAiaWNvbnMiICkgewoJCQl0aGlzLmJ1dHRvbi5maW5kKCAic3Bhbi51aS1pY29uIiApCgkJCQkucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5pY29ucy5idXR0b24gKQoJCQkJLmFkZENsYXNzKCB2YWx1ZS5idXR0b24gKTsKCQl9CgoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7CgoJCWlmICgga2V5ID09PSAiYXBwZW5kVG8iICkgewoJCQl0aGlzLm1lbnVXcmFwLmFwcGVuZFRvKCB0aGlzLl9hcHBlbmRUbygpICk7CgkJfQoKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy5tZW51SW5zdGFuY2Uub3B0aW9uKCAiZGlzYWJsZWQiLCB2YWx1ZSApOwoJCQl0aGlzLmJ1dHRvbgoJCQkJLnRvZ2dsZUNsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiLCB2YWx1ZSApCgkJCQkuYXR0ciggImFyaWEtZGlzYWJsZWQiLCB2YWx1ZSApOwoKCQkJdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIsIHZhbHVlICk7CgkJCWlmICggdmFsdWUgKSB7CgkJCQl0aGlzLmJ1dHRvbi5hdHRyKCAidGFiaW5kZXgiLCAtMSApOwoJCQkJdGhpcy5jbG9zZSgpOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5idXR0b24uYXR0ciggInRhYmluZGV4IiwgMCApOwoJCQl9CgkJfQoKCQlpZiAoIGtleSA9PT0gIndpZHRoIiApIHsKCQkJdGhpcy5fcmVzaXplQnV0dG9uKCk7CgkJfQoJfSwKCglfYXBwZW5kVG86IGZ1bmN0aW9uKCkgewoJCXZhciBlbGVtZW50ID0gdGhpcy5vcHRpb25zLmFwcGVuZFRvOwoKCQlpZiAoIGVsZW1lbnQgKSB7CgkJCWVsZW1lbnQgPSBlbGVtZW50LmpxdWVyeSB8fCBlbGVtZW50Lm5vZGVUeXBlID8KCQkJCSQoIGVsZW1lbnQgKSA6CgkJCQl0aGlzLmRvY3VtZW50LmZpbmQoIGVsZW1lbnQgKS5lcSggMCApOwoJCX0KCgkJaWYgKCAhZWxlbWVudCB8fCAhZWxlbWVudFsgMCBdICkgewoJCQllbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoICIudWktZnJvbnQiICk7CgkJfQoKCQlpZiAoICFlbGVtZW50Lmxlbmd0aCApIHsKCQkJZWxlbWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXS5ib2R5OwoJCX0KCgkJcmV0dXJuIGVsZW1lbnQ7Cgl9LAoKCV90b2dnbGVBdHRyOiBmdW5jdGlvbigpIHsKCQl0aGlzLmJ1dHRvbgoJCQkudG9nZ2xlQ2xhc3MoICJ1aS1jb3JuZXItdG9wIiwgdGhpcy5pc09wZW4gKQoJCQkudG9nZ2xlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIiwgIXRoaXMuaXNPcGVuICkKCQkJLmF0dHIoICJhcmlhLWV4cGFuZGVkIiwgdGhpcy5pc09wZW4gKTsKCQl0aGlzLm1lbnVXcmFwLnRvZ2dsZUNsYXNzKCAidWktc2VsZWN0bWVudS1vcGVuIiwgdGhpcy5pc09wZW4gKTsKCQl0aGlzLm1lbnUuYXR0ciggImFyaWEtaGlkZGVuIiwgIXRoaXMuaXNPcGVuICk7Cgl9LAoKCV9yZXNpemVCdXR0b246IGZ1bmN0aW9uKCkgewoJCXZhciB3aWR0aCA9IHRoaXMub3B0aW9ucy53aWR0aDsKCgkJaWYgKCAhd2lkdGggKSB7CgkJCXdpZHRoID0gdGhpcy5lbGVtZW50LnNob3coKS5vdXRlcldpZHRoKCk7CgkJCXRoaXMuZWxlbWVudC5oaWRlKCk7CgkJfQoKCQl0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKCB3aWR0aCApOwoJfSwKCglfcmVzaXplTWVudTogZnVuY3Rpb24oKSB7CgkJdGhpcy5tZW51Lm91dGVyV2lkdGgoIE1hdGgubWF4KAoJCQl0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKCksCgoJCQkvLyBzdXBwb3J0OiBJRTEwCgkJCS8vIElFMTAgd3JhcHMgbG9uZyB0ZXh0IChwb3NzaWJseSBhIHJvdW5kaW5nIGJ1ZykKCQkJLy8gc28gd2UgYWRkIDFweCB0byBhdm9pZCB0aGUgd3JhcHBpbmcKCQkJdGhpcy5tZW51LndpZHRoKCAiIiApLm91dGVyV2lkdGgoKSArIDEKCQkpICk7Cgl9LAoKCV9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4geyBkaXNhYmxlZDogdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIgKSB9OwoJfSwKCglfcGFyc2VPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHsKCQl2YXIgZGF0YSA9IFtdOwoJCW9wdGlvbnMuZWFjaChmdW5jdGlvbiggaW5kZXgsIGl0ZW0gKSB7CgkJCXZhciBvcHRpb24gPSAkKCBpdGVtICksCgkJCQlvcHRncm91cCA9IG9wdGlvbi5wYXJlbnQoICJvcHRncm91cCIgKTsKCQkJZGF0YS5wdXNoKHsKCQkJCWVsZW1lbnQ6IG9wdGlvbiwKCQkJCWluZGV4OiBpbmRleCwKCQkJCXZhbHVlOiBvcHRpb24uYXR0ciggInZhbHVlIiApLAoJCQkJbGFiZWw6IG9wdGlvbi50ZXh0KCksCgkJCQlvcHRncm91cDogb3B0Z3JvdXAuYXR0ciggImxhYmVsIiApIHx8ICIiLAoJCQkJZGlzYWJsZWQ6IG9wdGdyb3VwLnByb3AoICJkaXNhYmxlZCIgKSB8fCBvcHRpb24ucHJvcCggImRpc2FibGVkIiApCgkJCX0pOwoJCX0pOwoJCXRoaXMuaXRlbXMgPSBkYXRhOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5tZW51V3JhcC5yZW1vdmUoKTsKCQl0aGlzLmJ1dHRvbi5yZW1vdmUoKTsKCQl0aGlzLmVsZW1lbnQuc2hvdygpOwoJCXRoaXMuZWxlbWVudC5yZW1vdmVVbmlxdWVJZCgpOwoJCXRoaXMubGFiZWwuYXR0ciggImZvciIsIHRoaXMuaWRzLmVsZW1lbnQgKTsKCX0KfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBTbGlkZXIgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2xpZGVyLwogKi8KCgp2YXIgc2xpZGVyID0gJC53aWRnZXQoICJ1aS5zbGlkZXIiLCAkLnVpLm1vdXNlLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCXdpZGdldEV2ZW50UHJlZml4OiAic2xpZGUiLAoKCW9wdGlvbnM6IHsKCQlhbmltYXRlOiBmYWxzZSwKCQlkaXN0YW5jZTogMCwKCQltYXg6IDEwMCwKCQltaW46IDAsCgkJb3JpZW50YXRpb246ICJob3Jpem9udGFsIiwKCQlyYW5nZTogZmFsc2UsCgkJc3RlcDogMSwKCQl2YWx1ZTogMCwKCQl2YWx1ZXM6IG51bGwsCgoJCS8vIGNhbGxiYWNrcwoJCWNoYW5nZTogbnVsbCwKCQlzbGlkZTogbnVsbCwKCQlzdGFydDogbnVsbCwKCQlzdG9wOiBudWxsCgl9LAoKCS8vIG51bWJlciBvZiBwYWdlcyBpbiBhIHNsaWRlcgoJLy8gKGhvdyBtYW55IHRpbWVzIGNhbiB5b3UgcGFnZSB1cC9kb3duIHRvIGdvIHRocm91Z2ggdGhlIHdob2xlIHJhbmdlKQoJbnVtUGFnZXM6IDUsCgoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJdGhpcy5fa2V5U2xpZGluZyA9IGZhbHNlOwoJCXRoaXMuX21vdXNlU2xpZGluZyA9IGZhbHNlOwoJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCXRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbDsKCQl0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpOwoJCXRoaXMuX21vdXNlSW5pdCgpOwoKCQl0aGlzLmVsZW1lbnQKCQkJLmFkZENsYXNzKCAidWktc2xpZGVyIiArCgkJCQkiIHVpLXNsaWRlci0iICsgdGhpcy5vcmllbnRhdGlvbiArCgkJCQkiIHVpLXdpZGdldCIgKwoJCQkJIiB1aS13aWRnZXQtY29udGVudCIgKwoJCQkJIiB1aS1jb3JuZXItYWxsIik7CgoJCXRoaXMuX3JlZnJlc2goKTsKCQl0aGlzLl9zZXRPcHRpb24oICJkaXNhYmxlZCIsIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApOwoKCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7Cgl9LAoKCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9jcmVhdGVSYW5nZSgpOwoJCXRoaXMuX2NyZWF0ZUhhbmRsZXMoKTsKCQl0aGlzLl9zZXR1cEV2ZW50cygpOwoJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJfSwKCglfY3JlYXRlSGFuZGxlczogZnVuY3Rpb24oKSB7CgkJdmFyIGksIGhhbmRsZUNvdW50LAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQlleGlzdGluZ0hhbmRsZXMgPSB0aGlzLmVsZW1lbnQuZmluZCggIi51aS1zbGlkZXItaGFuZGxlIiApLmFkZENsYXNzKCAidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIiApLAoJCQloYW5kbGUgPSAiPHNwYW4gY2xhc3M9J3VpLXNsaWRlci1oYW5kbGUgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsJyB0YWJpbmRleD0nMCc+PC9zcGFuPiIsCgkJCWhhbmRsZXMgPSBbXTsKCgkJaGFuZGxlQ291bnQgPSAoIG9wdGlvbnMudmFsdWVzICYmIG9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHx8IDE7CgoJCWlmICggZXhpc3RpbmdIYW5kbGVzLmxlbmd0aCA+IGhhbmRsZUNvdW50ICkgewoJCQlleGlzdGluZ0hhbmRsZXMuc2xpY2UoIGhhbmRsZUNvdW50ICkucmVtb3ZlKCk7CgkJCWV4aXN0aW5nSGFuZGxlcyA9IGV4aXN0aW5nSGFuZGxlcy5zbGljZSggMCwgaGFuZGxlQ291bnQgKTsKCQl9CgoJCWZvciAoIGkgPSBleGlzdGluZ0hhbmRsZXMubGVuZ3RoOyBpIDwgaGFuZGxlQ291bnQ7IGkrKyApIHsKCQkJaGFuZGxlcy5wdXNoKCBoYW5kbGUgKTsKCQl9CgoJCXRoaXMuaGFuZGxlcyA9IGV4aXN0aW5nSGFuZGxlcy5hZGQoICQoIGhhbmRsZXMuam9pbiggIiIgKSApLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKSApOwoKCQl0aGlzLmhhbmRsZSA9IHRoaXMuaGFuZGxlcy5lcSggMCApOwoKCQl0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiggaSApIHsKCQkJJCggdGhpcyApLmRhdGEoICJ1aS1zbGlkZXItaGFuZGxlLWluZGV4IiwgaSApOwoJCX0pOwoJfSwKCglfY3JlYXRlUmFuZ2U6IGZ1bmN0aW9uKCkgewoJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQljbGFzc2VzID0gIiI7CgoJCWlmICggb3B0aW9ucy5yYW5nZSApIHsKCQkJaWYgKCBvcHRpb25zLnJhbmdlID09PSB0cnVlICkgewoJCQkJaWYgKCAhb3B0aW9ucy52YWx1ZXMgKSB7CgkJCQkJb3B0aW9ucy52YWx1ZXMgPSBbIHRoaXMuX3ZhbHVlTWluKCksIHRoaXMuX3ZhbHVlTWluKCkgXTsKCQkJCX0gZWxzZSBpZiAoIG9wdGlvbnMudmFsdWVzLmxlbmd0aCAmJiBvcHRpb25zLnZhbHVlcy5sZW5ndGggIT09IDIgKSB7CgkJCQkJb3B0aW9ucy52YWx1ZXMgPSBbIG9wdGlvbnMudmFsdWVzWzBdLCBvcHRpb25zLnZhbHVlc1swXSBdOwoJCQkJfSBlbHNlIGlmICggJC5pc0FycmF5KCBvcHRpb25zLnZhbHVlcyApICkgewoJCQkJCW9wdGlvbnMudmFsdWVzID0gb3B0aW9ucy52YWx1ZXMuc2xpY2UoMCk7CgkJCQl9CgkJCX0KCgkJCWlmICggIXRoaXMucmFuZ2UgfHwgIXRoaXMucmFuZ2UubGVuZ3RoICkgewoJCQkJdGhpcy5yYW5nZSA9ICQoICI8ZGl2PjwvZGl2PiIgKQoJCQkJCS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7CgoJCQkJY2xhc3NlcyA9ICJ1aS1zbGlkZXItcmFuZ2UiICsKCQkJCS8vIG5vdGU6IHRoaXMgaXNuJ3QgdGhlIG1vc3QgZml0dGluZ2x5IHNlbWFudGljIGZyYW1ld29yayBjbGFzcyBmb3IgdGhpcyBlbGVtZW50LAoJCQkJLy8gYnV0IHdvcmtlZCBiZXN0IHZpc3VhbGx5IHdpdGggYSB2YXJpZXR5IG9mIHRoZW1lcwoJCQkJIiB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwiOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5yYW5nZS5yZW1vdmVDbGFzcyggInVpLXNsaWRlci1yYW5nZS1taW4gdWktc2xpZGVyLXJhbmdlLW1heCIgKQoJCQkJCS8vIEhhbmRsZSByYW5nZSBzd2l0Y2hpbmcgZnJvbSB0cnVlIHRvIG1pbi9tYXgKCQkJCQkuY3NzKHsKCQkJCQkJImxlZnQiOiAiIiwKCQkJCQkJImJvdHRvbSI6ICIiCgkJCQkJfSk7CgkJCX0KCgkJCXRoaXMucmFuZ2UuYWRkQ2xhc3MoIGNsYXNzZXMgKwoJCQkJKCAoIG9wdGlvbnMucmFuZ2UgPT09ICJtaW4iIHx8IG9wdGlvbnMucmFuZ2UgPT09ICJtYXgiICkgPyAiIHVpLXNsaWRlci1yYW5nZS0iICsgb3B0aW9ucy5yYW5nZSA6ICIiICkgKTsKCQl9IGVsc2UgewoJCQlpZiAoIHRoaXMucmFuZ2UgKSB7CgkJCQl0aGlzLnJhbmdlLnJlbW92ZSgpOwoJCQl9CgkJCXRoaXMucmFuZ2UgPSBudWxsOwoJCX0KCX0sCgoJX3NldHVwRXZlbnRzOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9vZmYoIHRoaXMuaGFuZGxlcyApOwoJCXRoaXMuX29uKCB0aGlzLmhhbmRsZXMsIHRoaXMuX2hhbmRsZUV2ZW50cyApOwoJCXRoaXMuX2hvdmVyYWJsZSggdGhpcy5oYW5kbGVzICk7CgkJdGhpcy5fZm9jdXNhYmxlKCB0aGlzLmhhbmRsZXMgKTsKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXRoaXMuaGFuZGxlcy5yZW1vdmUoKTsKCQlpZiAoIHRoaXMucmFuZ2UgKSB7CgkJCXRoaXMucmFuZ2UucmVtb3ZlKCk7CgkJfQoKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktc2xpZGVyIiArCgkJCQkiIHVpLXNsaWRlci1ob3Jpem9udGFsIiArCgkJCQkiIHVpLXNsaWRlci12ZXJ0aWNhbCIgKwoJCQkJIiB1aS13aWRnZXQiICsKCQkJCSIgdWktd2lkZ2V0LWNvbnRlbnQiICsKCQkJCSIgdWktY29ybmVyLWFsbCIgKTsKCgkJdGhpcy5fbW91c2VEZXN0cm95KCk7Cgl9LAoKCV9tb3VzZUNhcHR1cmU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgcG9zaXRpb24sIG5vcm1WYWx1ZSwgZGlzdGFuY2UsIGNsb3Nlc3RIYW5kbGUsIGluZGV4LCBhbGxvd2VkLCBvZmZzZXQsIG1vdXNlT3ZlckhhbmRsZSwKCQkJdGhhdCA9IHRoaXMsCgkJCW8gPSB0aGlzLm9wdGlvbnM7CgoJCWlmICggby5kaXNhYmxlZCApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJdGhpcy5lbGVtZW50U2l6ZSA9IHsKCQkJd2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksCgkJCWhlaWdodDogdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkKCQl9OwoJCXRoaXMuZWxlbWVudE9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTsKCgkJcG9zaXRpb24gPSB7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9OwoJCW5vcm1WYWx1ZSA9IHRoaXMuX25vcm1WYWx1ZUZyb21Nb3VzZSggcG9zaXRpb24gKTsKCQlkaXN0YW5jZSA9IHRoaXMuX3ZhbHVlTWF4KCkgLSB0aGlzLl92YWx1ZU1pbigpICsgMTsKCQl0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiggaSApIHsKCQkJdmFyIHRoaXNEaXN0YW5jZSA9IE1hdGguYWJzKCBub3JtVmFsdWUgLSB0aGF0LnZhbHVlcyhpKSApOwoJCQlpZiAoKCBkaXN0YW5jZSA+IHRoaXNEaXN0YW5jZSApIHx8CgkJCQkoIGRpc3RhbmNlID09PSB0aGlzRGlzdGFuY2UgJiYKCQkJCQkoaSA9PT0gdGhhdC5fbGFzdENoYW5nZWRWYWx1ZSB8fCB0aGF0LnZhbHVlcyhpKSA9PT0gby5taW4gKSkpIHsKCQkJCWRpc3RhbmNlID0gdGhpc0Rpc3RhbmNlOwoJCQkJY2xvc2VzdEhhbmRsZSA9ICQoIHRoaXMgKTsKCQkJCWluZGV4ID0gaTsKCQkJfQoJCX0pOwoKCQlhbGxvd2VkID0gdGhpcy5fc3RhcnQoIGV2ZW50LCBpbmRleCApOwoJCWlmICggYWxsb3dlZCA9PT0gZmFsc2UgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJdGhpcy5fbW91c2VTbGlkaW5nID0gdHJ1ZTsKCgkJdGhpcy5faGFuZGxlSW5kZXggPSBpbmRleDsKCgkJY2xvc2VzdEhhbmRsZQoJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJLmZvY3VzKCk7CgoJCW9mZnNldCA9IGNsb3Nlc3RIYW5kbGUub2Zmc2V0KCk7CgkJbW91c2VPdmVySGFuZGxlID0gISQoIGV2ZW50LnRhcmdldCApLnBhcmVudHMoKS5hZGRCYWNrKCkuaXMoICIudWktc2xpZGVyLWhhbmRsZSIgKTsKCQl0aGlzLl9jbGlja09mZnNldCA9IG1vdXNlT3ZlckhhbmRsZSA/IHsgbGVmdDogMCwgdG9wOiAwIH0gOiB7CgkJCWxlZnQ6IGV2ZW50LnBhZ2VYIC0gb2Zmc2V0LmxlZnQgLSAoIGNsb3Nlc3RIYW5kbGUud2lkdGgoKSAvIDIgKSwKCQkJdG9wOiBldmVudC5wYWdlWSAtIG9mZnNldC50b3AgLQoJCQkJKCBjbG9zZXN0SGFuZGxlLmhlaWdodCgpIC8gMiApIC0KCQkJCSggcGFyc2VJbnQoIGNsb3Nlc3RIYW5kbGUuY3NzKCJib3JkZXJUb3BXaWR0aCIpLCAxMCApIHx8IDAgKSAtCgkJCQkoIHBhcnNlSW50KCBjbG9zZXN0SGFuZGxlLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSwgMTAgKSB8fCAwKSArCgkJCQkoIHBhcnNlSW50KCBjbG9zZXN0SGFuZGxlLmNzcygibWFyZ2luVG9wIiksIDEwICkgfHwgMCkKCQl9OwoKCQlpZiAoICF0aGlzLmhhbmRsZXMuaGFzQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKSApIHsKCQkJdGhpcy5fc2xpZGUoIGV2ZW50LCBpbmRleCwgbm9ybVZhbHVlICk7CgkJfQoJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCXJldHVybiB0cnVlOwoJfSwKCglfbW91c2VTdGFydDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRydWU7Cgl9LAoKCV9tb3VzZURyYWc6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgcG9zaXRpb24gPSB7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9LAoJCQlub3JtVmFsdWUgPSB0aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoIHBvc2l0aW9uICk7CgoJCXRoaXMuX3NsaWRlKCBldmVudCwgdGhpcy5faGFuZGxlSW5kZXgsIG5vcm1WYWx1ZSApOwoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZVN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl0aGlzLmhhbmRsZXMucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJdGhpcy5fbW91c2VTbGlkaW5nID0gZmFsc2U7CgoJCXRoaXMuX3N0b3AoIGV2ZW50LCB0aGlzLl9oYW5kbGVJbmRleCApOwoJCXRoaXMuX2NoYW5nZSggZXZlbnQsIHRoaXMuX2hhbmRsZUluZGV4ICk7CgoJCXRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbDsKCQl0aGlzLl9jbGlja09mZnNldCA9IG51bGw7CgkJdGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlOwoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9kZXRlY3RPcmllbnRhdGlvbjogZnVuY3Rpb24oKSB7CgkJdGhpcy5vcmllbnRhdGlvbiA9ICggdGhpcy5vcHRpb25zLm9yaWVudGF0aW9uID09PSAidmVydGljYWwiICkgPyAidmVydGljYWwiIDogImhvcml6b250YWwiOwoJfSwKCglfbm9ybVZhbHVlRnJvbU1vdXNlOiBmdW5jdGlvbiggcG9zaXRpb24gKSB7CgkJdmFyIHBpeGVsVG90YWwsCgkJCXBpeGVsTW91c2UsCgkJCXBlcmNlbnRNb3VzZSwKCQkJdmFsdWVUb3RhbCwKCQkJdmFsdWVNb3VzZTsKCgkJaWYgKCB0aGlzLm9yaWVudGF0aW9uID09PSAiaG9yaXpvbnRhbCIgKSB7CgkJCXBpeGVsVG90YWwgPSB0aGlzLmVsZW1lbnRTaXplLndpZHRoOwoJCQlwaXhlbE1vdXNlID0gcG9zaXRpb24ueCAtIHRoaXMuZWxlbWVudE9mZnNldC5sZWZ0IC0gKCB0aGlzLl9jbGlja09mZnNldCA/IHRoaXMuX2NsaWNrT2Zmc2V0LmxlZnQgOiAwICk7CgkJfSBlbHNlIHsKCQkJcGl4ZWxUb3RhbCA9IHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0OwoJCQlwaXhlbE1vdXNlID0gcG9zaXRpb24ueSAtIHRoaXMuZWxlbWVudE9mZnNldC50b3AgLSAoIHRoaXMuX2NsaWNrT2Zmc2V0ID8gdGhpcy5fY2xpY2tPZmZzZXQudG9wIDogMCApOwoJCX0KCgkJcGVyY2VudE1vdXNlID0gKCBwaXhlbE1vdXNlIC8gcGl4ZWxUb3RhbCApOwoJCWlmICggcGVyY2VudE1vdXNlID4gMSApIHsKCQkJcGVyY2VudE1vdXNlID0gMTsKCQl9CgkJaWYgKCBwZXJjZW50TW91c2UgPCAwICkgewoJCQlwZXJjZW50TW91c2UgPSAwOwoJCX0KCQlpZiAoIHRoaXMub3JpZW50YXRpb24gPT09ICJ2ZXJ0aWNhbCIgKSB7CgkJCXBlcmNlbnRNb3VzZSA9IDEgLSBwZXJjZW50TW91c2U7CgkJfQoKCQl2YWx1ZVRvdGFsID0gdGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCk7CgkJdmFsdWVNb3VzZSA9IHRoaXMuX3ZhbHVlTWluKCkgKyBwZXJjZW50TW91c2UgKiB2YWx1ZVRvdGFsOwoKCQlyZXR1cm4gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbHVlTW91c2UgKTsKCX0sCgoJX3N0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIGluZGV4ICkgewoJCXZhciB1aUhhc2ggPSB7CgkJCWhhbmRsZTogdGhpcy5oYW5kbGVzWyBpbmRleCBdLAoJCQl2YWx1ZTogdGhpcy52YWx1ZSgpCgkJfTsKCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCXVpSGFzaC52YWx1ZSA9IHRoaXMudmFsdWVzKCBpbmRleCApOwoJCQl1aUhhc2gudmFsdWVzID0gdGhpcy52YWx1ZXMoKTsKCQl9CgkJcmV0dXJuIHRoaXMuX3RyaWdnZXIoICJzdGFydCIsIGV2ZW50LCB1aUhhc2ggKTsKCX0sCgoJX3NsaWRlOiBmdW5jdGlvbiggZXZlbnQsIGluZGV4LCBuZXdWYWwgKSB7CgkJdmFyIG90aGVyVmFsLAoJCQluZXdWYWx1ZXMsCgkJCWFsbG93ZWQ7CgoJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJb3RoZXJWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggPyAwIDogMSApOwoKCQkJaWYgKCAoIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoID09PSAyICYmIHRoaXMub3B0aW9ucy5yYW5nZSA9PT0gdHJ1ZSApICYmCgkJCQkJKCAoIGluZGV4ID09PSAwICYmIG5ld1ZhbCA+IG90aGVyVmFsKSB8fCAoIGluZGV4ID09PSAxICYmIG5ld1ZhbCA8IG90aGVyVmFsICkgKQoJCQkJKSB7CgkJCQluZXdWYWwgPSBvdGhlclZhbDsKCQkJfQoKCQkJaWYgKCBuZXdWYWwgIT09IHRoaXMudmFsdWVzKCBpbmRleCApICkgewoJCQkJbmV3VmFsdWVzID0gdGhpcy52YWx1ZXMoKTsKCQkJCW5ld1ZhbHVlc1sgaW5kZXggXSA9IG5ld1ZhbDsKCQkJCS8vIEEgc2xpZGUgY2FuIGJlIGNhbmNlbGVkIGJ5IHJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBzbGlkZSBjYWxsYmFjawoJCQkJYWxsb3dlZCA9IHRoaXMuX3RyaWdnZXIoICJzbGlkZSIsIGV2ZW50LCB7CgkJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQkJdmFsdWU6IG5ld1ZhbCwKCQkJCQl2YWx1ZXM6IG5ld1ZhbHVlcwoJCQkJfSApOwoJCQkJb3RoZXJWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggPyAwIDogMSApOwoJCQkJaWYgKCBhbGxvd2VkICE9PSBmYWxzZSApIHsKCQkJCQl0aGlzLnZhbHVlcyggaW5kZXgsIG5ld1ZhbCApOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCBuZXdWYWwgIT09IHRoaXMudmFsdWUoKSApIHsKCQkJCS8vIEEgc2xpZGUgY2FuIGJlIGNhbmNlbGVkIGJ5IHJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBzbGlkZSBjYWxsYmFjawoJCQkJYWxsb3dlZCA9IHRoaXMuX3RyaWdnZXIoICJzbGlkZSIsIGV2ZW50LCB7CgkJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQkJdmFsdWU6IG5ld1ZhbAoJCQkJfSApOwoJCQkJaWYgKCBhbGxvd2VkICE9PSBmYWxzZSApIHsKCQkJCQl0aGlzLnZhbHVlKCBuZXdWYWwgKTsKCQkJCX0KCQkJfQoJCX0KCX0sCgoJX3N0b3A6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7CgkJdmFyIHVpSGFzaCA9IHsKCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCXZhbHVlOiB0aGlzLnZhbHVlKCkKCQl9OwoJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJdWlIYXNoLnZhbHVlID0gdGhpcy52YWx1ZXMoIGluZGV4ICk7CgkJCXVpSGFzaC52YWx1ZXMgPSB0aGlzLnZhbHVlcygpOwoJCX0KCgkJdGhpcy5fdHJpZ2dlciggInN0b3AiLCBldmVudCwgdWlIYXNoICk7Cgl9LAoKCV9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7CgkJaWYgKCAhdGhpcy5fa2V5U2xpZGluZyAmJiAhdGhpcy5fbW91c2VTbGlkaW5nICkgewoJCQl2YXIgdWlIYXNoID0gewoJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQl2YWx1ZTogdGhpcy52YWx1ZSgpCgkJCX07CgkJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJCXVpSGFzaC52YWx1ZSA9IHRoaXMudmFsdWVzKCBpbmRleCApOwoJCQkJdWlIYXNoLnZhbHVlcyA9IHRoaXMudmFsdWVzKCk7CgkJCX0KCgkJCS8vc3RvcmUgdGhlIGxhc3QgY2hhbmdlZCB2YWx1ZSBpbmRleCBmb3IgcmVmZXJlbmNlIHdoZW4gaGFuZGxlcyBvdmVybGFwCgkJCXRoaXMuX2xhc3RDaGFuZ2VkVmFsdWUgPSBpbmRleDsKCgkJCXRoaXMuX3RyaWdnZXIoICJjaGFuZ2UiLCBldmVudCwgdWlIYXNoICk7CgkJfQoJfSwKCgl2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkgewoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJdGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIG5ld1ZhbHVlICk7CgkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQl0aGlzLl9jaGFuZ2UoIG51bGwsIDAgKTsKCQkJcmV0dXJuOwoJCX0KCgkJcmV0dXJuIHRoaXMuX3ZhbHVlKCk7Cgl9LAoKCXZhbHVlczogZnVuY3Rpb24oIGluZGV4LCBuZXdWYWx1ZSApIHsKCQl2YXIgdmFscywKCQkJbmV3VmFsdWVzLAoJCQlpOwoKCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPiAxICkgewoJCQl0aGlzLm9wdGlvbnMudmFsdWVzWyBpbmRleCBdID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIG5ld1ZhbHVlICk7CgkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQl0aGlzLl9jaGFuZ2UoIG51bGwsIGluZGV4ICk7CgkJCXJldHVybjsKCQl9CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJaWYgKCAkLmlzQXJyYXkoIGFyZ3VtZW50c1sgMCBdICkgKSB7CgkJCQl2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlczsKCQkJCW5ld1ZhbHVlcyA9IGFyZ3VtZW50c1sgMCBdOwoJCQkJZm9yICggaSA9IDA7IGkgPCB2YWxzLmxlbmd0aDsgaSArPSAxICkgewoJCQkJCXZhbHNbIGkgXSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBuZXdWYWx1ZXNbIGkgXSApOwoJCQkJCXRoaXMuX2NoYW5nZSggbnVsbCwgaSApOwoJCQkJfQoJCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCQkJcmV0dXJuIHRoaXMuX3ZhbHVlcyggaW5kZXggKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHRoaXMudmFsdWUoKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXJldHVybiB0aGlzLl92YWx1ZXMoKTsKCQl9Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCXZhciBpLAoJCQl2YWxzTGVuZ3RoID0gMDsKCgkJaWYgKCBrZXkgPT09ICJyYW5nZSIgJiYgdGhpcy5vcHRpb25zLnJhbmdlID09PSB0cnVlICkgewoJCQlpZiAoIHZhbHVlID09PSAibWluIiApIHsKCQkJCXRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX3ZhbHVlcyggMCApOwoJCQkJdGhpcy5vcHRpb25zLnZhbHVlcyA9IG51bGw7CgkJCX0gZWxzZSBpZiAoIHZhbHVlID09PSAibWF4IiApIHsKCQkJCXRoaXMub3B0aW9ucy52YWx1ZSA9IHRoaXMuX3ZhbHVlcyggdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggLSAxICk7CgkJCQl0aGlzLm9wdGlvbnMudmFsdWVzID0gbnVsbDsKCQkJfQoJCX0KCgkJaWYgKCAkLmlzQXJyYXkoIHRoaXMub3B0aW9ucy52YWx1ZXMgKSApIHsKCQkJdmFsc0xlbmd0aCA9IHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7CgkJCXRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiwgISF2YWx1ZSApOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCgkJc3dpdGNoICgga2V5ICkgewoJCQljYXNlICJvcmllbnRhdGlvbiI6CgkJCQl0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpOwoJCQkJdGhpcy5lbGVtZW50CgkJCQkJLnJlbW92ZUNsYXNzKCAidWktc2xpZGVyLWhvcml6b250YWwgdWktc2xpZGVyLXZlcnRpY2FsIiApCgkJCQkJLmFkZENsYXNzKCAidWktc2xpZGVyLSIgKyB0aGlzLm9yaWVudGF0aW9uICk7CgkJCQl0aGlzLl9yZWZyZXNoVmFsdWUoKTsKCgkJCQkvLyBSZXNldCBwb3NpdGlvbmluZyBmcm9tIHByZXZpb3VzIG9yaWVudGF0aW9uCgkJCQl0aGlzLmhhbmRsZXMuY3NzKCB2YWx1ZSA9PT0gImhvcml6b250YWwiID8gImJvdHRvbSIgOiAibGVmdCIsICIiICk7CgkJCQlicmVhazsKCQkJY2FzZSAidmFsdWUiOgoJCQkJdGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7CgkJCQl0aGlzLl9yZWZyZXNoVmFsdWUoKTsKCQkJCXRoaXMuX2NoYW5nZSggbnVsbCwgMCApOwoJCQkJdGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlOwoJCQkJYnJlYWs7CgkJCWNhc2UgInZhbHVlcyI6CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gdHJ1ZTsKCQkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQkJZm9yICggaSA9IDA7IGkgPCB2YWxzTGVuZ3RoOyBpICs9IDEgKSB7CgkJCQkJdGhpcy5fY2hhbmdlKCBudWxsLCBpICk7CgkJCQl9CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7CgkJCQlicmVhazsKCQkJY2FzZSAibWluIjoKCQkJY2FzZSAibWF4IjoKCQkJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7CgkJCQlicmVhazsKCQkJY2FzZSAicmFuZ2UiOgoJCQkJdGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7CgkJCQl0aGlzLl9yZWZyZXNoKCk7CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7CgkJCQlicmVhazsKCQl9Cgl9LAoKCS8vaW50ZXJuYWwgdmFsdWUgZ2V0dGVyCgkvLyBfdmFsdWUoKSByZXR1cm5zIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcAoJX3ZhbHVlOiBmdW5jdGlvbigpIHsKCQl2YXIgdmFsID0gdGhpcy5vcHRpb25zLnZhbHVlOwoJCXZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCB2YWwgKTsKCgkJcmV0dXJuIHZhbDsKCX0sCgoJLy9pbnRlcm5hbCB2YWx1ZXMgZ2V0dGVyCgkvLyBfdmFsdWVzKCkgcmV0dXJucyBhcnJheSBvZiB2YWx1ZXMgdHJpbW1lZCBieSBtaW4gYW5kIG1heCwgYWxpZ25lZCBieSBzdGVwCgkvLyBfdmFsdWVzKCBpbmRleCApIHJldHVybnMgc2luZ2xlIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcAoJX3ZhbHVlczogZnVuY3Rpb24oIGluZGV4ICkgewoJCXZhciB2YWwsCgkJCXZhbHMsCgkJCWk7CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJdmFsID0gdGhpcy5vcHRpb25zLnZhbHVlc1sgaW5kZXggXTsKCQkJdmFsID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbCApOwoKCQkJcmV0dXJuIHZhbDsKCQl9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICkgewoJCQkvLyAuc2xpY2UoKSBjcmVhdGVzIGEgY29weSBvZiB0aGUgYXJyYXkKCQkJLy8gdGhpcyBjb3B5IGdldHMgdHJpbW1lZCBieSBtaW4gYW5kIG1heCBhbmQgdGhlbiByZXR1cm5lZAoJCQl2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlcy5zbGljZSgpOwoJCQlmb3IgKCBpID0gMDsgaSA8IHZhbHMubGVuZ3RoOyBpKz0gMSkgewoJCQkJdmFsc1sgaSBdID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbHNbIGkgXSApOwoJCQl9CgoJCQlyZXR1cm4gdmFsczsKCQl9IGVsc2UgewoJCQlyZXR1cm4gW107CgkJfQoJfSwKCgkvLyByZXR1cm5zIHRoZSBzdGVwLWFsaWduZWQgdmFsdWUgdGhhdCB2YWwgaXMgY2xvc2VzdCB0bywgYmV0d2VlbiAoaW5jbHVzaXZlKSBtaW4gYW5kIG1heAoJX3RyaW1BbGlnblZhbHVlOiBmdW5jdGlvbiggdmFsICkgewoJCWlmICggdmFsIDw9IHRoaXMuX3ZhbHVlTWluKCkgKSB7CgkJCXJldHVybiB0aGlzLl92YWx1ZU1pbigpOwoJCX0KCQlpZiAoIHZhbCA+PSB0aGlzLl92YWx1ZU1heCgpICkgewoJCQlyZXR1cm4gdGhpcy5fdmFsdWVNYXgoKTsKCQl9CgkJdmFyIHN0ZXAgPSAoIHRoaXMub3B0aW9ucy5zdGVwID4gMCApID8gdGhpcy5vcHRpb25zLnN0ZXAgOiAxLAoJCQl2YWxNb2RTdGVwID0gKHZhbCAtIHRoaXMuX3ZhbHVlTWluKCkpICUgc3RlcCwKCQkJYWxpZ25WYWx1ZSA9IHZhbCAtIHZhbE1vZFN0ZXA7CgoJCWlmICggTWF0aC5hYnModmFsTW9kU3RlcCkgKiAyID49IHN0ZXAgKSB7CgkJCWFsaWduVmFsdWUgKz0gKCB2YWxNb2RTdGVwID4gMCApID8gc3RlcCA6ICggLXN0ZXAgKTsKCQl9CgoJCS8vIFNpbmNlIEphdmFTY3JpcHQgaGFzIHByb2JsZW1zIHdpdGggbGFyZ2UgZmxvYXRzLCByb3VuZAoJCS8vIHRoZSBmaW5hbCB2YWx1ZSB0byA1IGRpZ2l0cyBhZnRlciB0aGUgZGVjaW1hbCBwb2ludCAoc2VlICM0MTI0KQoJCXJldHVybiBwYXJzZUZsb2F0KCBhbGlnblZhbHVlLnRvRml4ZWQoNSkgKTsKCX0sCgoJX3ZhbHVlTWluOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5vcHRpb25zLm1pbjsKCX0sCgoJX3ZhbHVlTWF4OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5vcHRpb25zLm1heDsKCX0sCgoJX3JlZnJlc2hWYWx1ZTogZnVuY3Rpb24oKSB7CgkJdmFyIGxhc3RWYWxQZXJjZW50LCB2YWxQZXJjZW50LCB2YWx1ZSwgdmFsdWVNaW4sIHZhbHVlTWF4LAoJCQlvUmFuZ2UgPSB0aGlzLm9wdGlvbnMucmFuZ2UsCgkJCW8gPSB0aGlzLm9wdGlvbnMsCgkJCXRoYXQgPSB0aGlzLAoJCQlhbmltYXRlID0gKCAhdGhpcy5fYW5pbWF0ZU9mZiApID8gby5hbmltYXRlIDogZmFsc2UsCgkJCV9zZXQgPSB7fTsKCgkJaWYgKCB0aGlzLm9wdGlvbnMudmFsdWVzICYmIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoICkgewoJCQl0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbiggaSApIHsKCQkJCXZhbFBlcmNlbnQgPSAoIHRoYXQudmFsdWVzKGkpIC0gdGhhdC5fdmFsdWVNaW4oKSApIC8gKCB0aGF0Ll92YWx1ZU1heCgpIC0gdGhhdC5fdmFsdWVNaW4oKSApICogMTAwOwoJCQkJX3NldFsgdGhhdC5vcmllbnRhdGlvbiA9PT0gImhvcml6b250YWwiID8gImxlZnQiIDogImJvdHRvbSIgXSA9IHZhbFBlcmNlbnQgKyAiJSI7CgkJCQkkKCB0aGlzICkuc3RvcCggMSwgMSApWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggX3NldCwgby5hbmltYXRlICk7CgkJCQlpZiAoIHRoYXQub3B0aW9ucy5yYW5nZSA9PT0gdHJ1ZSApIHsKCQkJCQlpZiAoIHRoYXQub3JpZW50YXRpb24gPT09ICJob3Jpem9udGFsIiApIHsKCQkJCQkJaWYgKCBpID09PSAwICkgewoJCQkJCQkJdGhhdC5yYW5nZS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCB7IGxlZnQ6IHZhbFBlcmNlbnQgKyAiJSIgfSwgby5hbmltYXRlICk7CgkJCQkJCX0KCQkJCQkJaWYgKCBpID09PSAxICkgewoJCQkJCQkJdGhhdC5yYW5nZVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIHsgd2lkdGg6ICggdmFsUGVyY2VudCAtIGxhc3RWYWxQZXJjZW50ICkgKyAiJSIgfSwgeyBxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBvLmFuaW1hdGUgfSApOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKCBpID09PSAwICkgewoJCQkJCQkJdGhhdC5yYW5nZS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCB7IGJvdHRvbTogKCB2YWxQZXJjZW50ICkgKyAiJSIgfSwgby5hbmltYXRlICk7CgkJCQkJCX0KCQkJCQkJaWYgKCBpID09PSAxICkgewoJCQkJCQkJdGhhdC5yYW5nZVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIHsgaGVpZ2h0OiAoIHZhbFBlcmNlbnQgLSBsYXN0VmFsUGVyY2VudCApICsgIiUiIH0sIHsgcXVldWU6IGZhbHNlLCBkdXJhdGlvbjogby5hbmltYXRlIH0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWxhc3RWYWxQZXJjZW50ID0gdmFsUGVyY2VudDsKCQkJfSk7CgkJfSBlbHNlIHsKCQkJdmFsdWUgPSB0aGlzLnZhbHVlKCk7CgkJCXZhbHVlTWluID0gdGhpcy5fdmFsdWVNaW4oKTsKCQkJdmFsdWVNYXggPSB0aGlzLl92YWx1ZU1heCgpOwoJCQl2YWxQZXJjZW50ID0gKCB2YWx1ZU1heCAhPT0gdmFsdWVNaW4gKSA/CgkJCQkJKCB2YWx1ZSAtIHZhbHVlTWluICkgLyAoIHZhbHVlTWF4IC0gdmFsdWVNaW4gKSAqIDEwMCA6CgkJCQkJMDsKCQkJX3NldFsgdGhpcy5vcmllbnRhdGlvbiA9PT0gImhvcml6b250YWwiID8gImxlZnQiIDogImJvdHRvbSIgXSA9IHZhbFBlcmNlbnQgKyAiJSI7CgkJCXRoaXMuaGFuZGxlLnN0b3AoIDEsIDEgKVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIF9zZXQsIG8uYW5pbWF0ZSApOwoKCQkJaWYgKCBvUmFuZ2UgPT09ICJtaW4iICYmIHRoaXMub3JpZW50YXRpb24gPT09ICJob3Jpem9udGFsIiApIHsKCQkJCXRoaXMucmFuZ2Uuc3RvcCggMSwgMSApWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyB3aWR0aDogdmFsUGVyY2VudCArICIlIiB9LCBvLmFuaW1hdGUgKTsKCQkJfQoJCQlpZiAoIG9SYW5nZSA9PT0gIm1heCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gImhvcml6b250YWwiICkgewoJCQkJdGhpcy5yYW5nZVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIHsgd2lkdGg6ICggMTAwIC0gdmFsUGVyY2VudCApICsgIiUiIH0sIHsgcXVldWU6IGZhbHNlLCBkdXJhdGlvbjogby5hbmltYXRlIH0gKTsKCQkJfQoJCQlpZiAoIG9SYW5nZSA9PT0gIm1pbiIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gInZlcnRpY2FsIiApIHsKCQkJCXRoaXMucmFuZ2Uuc3RvcCggMSwgMSApWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyBoZWlnaHQ6IHZhbFBlcmNlbnQgKyAiJSIgfSwgby5hbmltYXRlICk7CgkJCX0KCQkJaWYgKCBvUmFuZ2UgPT09ICJtYXgiICYmIHRoaXMub3JpZW50YXRpb24gPT09ICJ2ZXJ0aWNhbCIgKSB7CgkJCQl0aGlzLnJhbmdlWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyBoZWlnaHQ6ICggMTAwIC0gdmFsUGVyY2VudCApICsgIiUiIH0sIHsgcXVldWU6IGZhbHNlLCBkdXJhdGlvbjogby5hbmltYXRlIH0gKTsKCQkJfQoJCX0KCX0sCgoJX2hhbmRsZUV2ZW50czogewoJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJdmFyIGFsbG93ZWQsIGN1clZhbCwgbmV3VmFsLCBzdGVwLAoJCQkJaW5kZXggPSAkKCBldmVudC50YXJnZXQgKS5kYXRhKCAidWktc2xpZGVyLWhhbmRsZS1pbmRleCIgKTsKCgkJCXN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7CgkJCQljYXNlICQudWkua2V5Q29kZS5IT01FOgoJCQkJY2FzZSAkLnVpLmtleUNvZGUuRU5EOgoJCQkJY2FzZSAkLnVpLmtleUNvZGUuUEFHRV9VUDoKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlBBR0VfRE9XTjoKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlVQOgoJCQkJY2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6CgkJCQljYXNlICQudWkua2V5Q29kZS5ET1dOOgoJCQkJY2FzZSAkLnVpLmtleUNvZGUuTEVGVDoKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCWlmICggIXRoaXMuX2tleVNsaWRpbmcgKSB7CgkJCQkJCXRoaXMuX2tleVNsaWRpbmcgPSB0cnVlOwoJCQkJCQkkKCBldmVudC50YXJnZXQgKS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCQkJYWxsb3dlZCA9IHRoaXMuX3N0YXJ0KCBldmVudCwgaW5kZXggKTsKCQkJCQkJaWYgKCBhbGxvd2VkID09PSBmYWxzZSApIHsKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCX0KCQkJCQlicmVhazsKCQkJfQoKCQkJc3RlcCA9IHRoaXMub3B0aW9ucy5zdGVwOwoJCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCQljdXJWYWwgPSBuZXdWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggKTsKCQkJfSBlbHNlIHsKCQkJCWN1clZhbCA9IG5ld1ZhbCA9IHRoaXMudmFsdWUoKTsKCQkJfQoKCQkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLkhPTUU6CgkJCQkJbmV3VmFsID0gdGhpcy5fdmFsdWVNaW4oKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLkVORDoKCQkJCQluZXdWYWwgPSB0aGlzLl92YWx1ZU1heCgpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAkLnVpLmtleUNvZGUuUEFHRV9VUDoKCQkJCQluZXdWYWwgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSgKCQkJCQkJY3VyVmFsICsgKCAoIHRoaXMuX3ZhbHVlTWF4KCkgLSB0aGlzLl92YWx1ZU1pbigpICkgLyB0aGlzLm51bVBhZ2VzICkKCQkJCQkpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOOgoJCQkJCW5ld1ZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKAoJCQkJCQljdXJWYWwgLSAoICh0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSkgLyB0aGlzLm51bVBhZ2VzICkgKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLlVQOgoJCQkJY2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6CgkJCQkJaWYgKCBjdXJWYWwgPT09IHRoaXMuX3ZhbHVlTWF4KCkgKSB7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQkJbmV3VmFsID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIGN1clZhbCArIHN0ZXAgKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJC51aS5rZXlDb2RlLkRPV046CgkJCQljYXNlICQudWkua2V5Q29kZS5MRUZUOgoJCQkJCWlmICggY3VyVmFsID09PSB0aGlzLl92YWx1ZU1pbigpICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCW5ld1ZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBjdXJWYWwgLSBzdGVwICk7CgkJCQkJYnJlYWs7CgkJCX0KCgkJCXRoaXMuX3NsaWRlKCBldmVudCwgaW5kZXgsIG5ld1ZhbCApOwoJCX0sCgkJa2V5dXA6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJdmFyIGluZGV4ID0gJCggZXZlbnQudGFyZ2V0ICkuZGF0YSggInVpLXNsaWRlci1oYW5kbGUtaW5kZXgiICk7CgoJCQlpZiAoIHRoaXMuX2tleVNsaWRpbmcgKSB7CgkJCQl0aGlzLl9rZXlTbGlkaW5nID0gZmFsc2U7CgkJCQl0aGlzLl9zdG9wKCBldmVudCwgaW5kZXggKTsKCQkJCXRoaXMuX2NoYW5nZSggZXZlbnQsIGluZGV4ICk7CgkJCQkkKCBldmVudC50YXJnZXQgKS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJfQoJCX0KCX0KfSk7CgoKLyohCiAqIGpRdWVyeSBVSSBTb3J0YWJsZSAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9zb3J0YWJsZS8KICovCgoKdmFyIHNvcnRhYmxlID0gJC53aWRnZXQoInVpLnNvcnRhYmxlIiwgJC51aS5tb3VzZSwgewoJdmVyc2lvbjogIjEuMTEuMSIsCgl3aWRnZXRFdmVudFByZWZpeDogInNvcnQiLAoJcmVhZHk6IGZhbHNlLAoJb3B0aW9uczogewoJCWFwcGVuZFRvOiAicGFyZW50IiwKCQlheGlzOiBmYWxzZSwKCQljb25uZWN0V2l0aDogZmFsc2UsCgkJY29udGFpbm1lbnQ6IGZhbHNlLAoJCWN1cnNvcjogImF1dG8iLAoJCWN1cnNvckF0OiBmYWxzZSwKCQlkcm9wT25FbXB0eTogdHJ1ZSwKCQlmb3JjZVBsYWNlaG9sZGVyU2l6ZTogZmFsc2UsCgkJZm9yY2VIZWxwZXJTaXplOiBmYWxzZSwKCQlncmlkOiBmYWxzZSwKCQloYW5kbGU6IGZhbHNlLAoJCWhlbHBlcjogIm9yaWdpbmFsIiwKCQlpdGVtczogIj4gKiIsCgkJb3BhY2l0eTogZmFsc2UsCgkJcGxhY2Vob2xkZXI6IGZhbHNlLAoJCXJldmVydDogZmFsc2UsCgkJc2Nyb2xsOiB0cnVlLAoJCXNjcm9sbFNlbnNpdGl2aXR5OiAyMCwKCQlzY3JvbGxTcGVlZDogMjAsCgkJc2NvcGU6ICJkZWZhdWx0IiwKCQl0b2xlcmFuY2U6ICJpbnRlcnNlY3QiLAoJCXpJbmRleDogMTAwMCwKCgkJLy8gY2FsbGJhY2tzCgkJYWN0aXZhdGU6IG51bGwsCgkJYmVmb3JlU3RvcDogbnVsbCwKCQljaGFuZ2U6IG51bGwsCgkJZGVhY3RpdmF0ZTogbnVsbCwKCQlvdXQ6IG51bGwsCgkJb3ZlcjogbnVsbCwKCQlyZWNlaXZlOiBudWxsLAoJCXJlbW92ZTogbnVsbCwKCQlzb3J0OiBudWxsLAoJCXN0YXJ0OiBudWxsLAoJCXN0b3A6IG51bGwsCgkJdXBkYXRlOiBudWxsCgl9LAoKCV9pc092ZXJBeGlzOiBmdW5jdGlvbiggeCwgcmVmZXJlbmNlLCBzaXplICkgewoJCXJldHVybiAoIHggPj0gcmVmZXJlbmNlICkgJiYgKCB4IDwgKCByZWZlcmVuY2UgKyBzaXplICkgKTsKCX0sCgoJX2lzRmxvYXRpbmc6IGZ1bmN0aW9uKCBpdGVtICkgewoJCXJldHVybiAoL2xlZnR8cmlnaHQvKS50ZXN0KGl0ZW0uY3NzKCJmbG9hdCIpKSB8fCAoL2lubGluZXx0YWJsZS1jZWxsLykudGVzdChpdGVtLmNzcygiZGlzcGxheSIpKTsKCX0sCgoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgoJCXZhciBvID0gdGhpcy5vcHRpb25zOwoJCXRoaXMuY29udGFpbmVyQ2FjaGUgPSB7fTsKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNvcnRhYmxlIik7CgoJCS8vR2V0IHRoZSBpdGVtcwoJCXRoaXMucmVmcmVzaCgpOwoKCQkvL0xldCdzIGRldGVybWluZSBpZiB0aGUgaXRlbXMgYXJlIGJlaW5nIGRpc3BsYXllZCBob3Jpem9udGFsbHkKCQl0aGlzLmZsb2F0aW5nID0gdGhpcy5pdGVtcy5sZW5ndGggPyBvLmF4aXMgPT09ICJ4IiB8fCB0aGlzLl9pc0Zsb2F0aW5nKHRoaXMuaXRlbXNbMF0uaXRlbSkgOiBmYWxzZTsKCgkJLy9MZXQncyBkZXRlcm1pbmUgdGhlIHBhcmVudCdzIG9mZnNldAoJCXRoaXMub2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpOwoKCQkvL0luaXRpYWxpemUgbW91c2UgZXZlbnRzIGZvciBpbnRlcmFjdGlvbgoJCXRoaXMuX21vdXNlSW5pdCgpOwoKCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsKCgkJLy9XZSdyZSByZWFkeSB0byBnbwoJCXRoaXMucmVhZHkgPSB0cnVlOwoKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCgkJaWYgKCBrZXkgPT09ICJoYW5kbGUiICkgewoJCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsKCQl9Cgl9LAoKCV9zZXRIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudC5maW5kKCAiLnVpLXNvcnRhYmxlLWhhbmRsZSIgKS5yZW1vdmVDbGFzcyggInVpLXNvcnRhYmxlLWhhbmRsZSIgKTsKCQkkLmVhY2goIHRoaXMuaXRlbXMsIGZ1bmN0aW9uKCkgewoJCQkoIHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUgPwoJCQkJdGhpcy5pdGVtLmZpbmQoIHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUgKSA6IHRoaXMuaXRlbSApCgkJCQkuYWRkQ2xhc3MoICJ1aS1zb3J0YWJsZS1oYW5kbGUiICk7CgkJfSk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktc29ydGFibGUgdWktc29ydGFibGUtZGlzYWJsZWQiICkKCQkJLmZpbmQoICIudWktc29ydGFibGUtaGFuZGxlIiApCgkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zb3J0YWJsZS1oYW5kbGUiICk7CgkJdGhpcy5fbW91c2VEZXN0cm95KCk7CgoJCWZvciAoIHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHsKCQkJdGhpcy5pdGVtc1tpXS5pdGVtLnJlbW92ZURhdGEodGhpcy53aWRnZXROYW1lICsgIi1pdGVtIik7CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQsIG92ZXJyaWRlSGFuZGxlKSB7CgkJdmFyIGN1cnJlbnRJdGVtID0gbnVsbCwKCQkJdmFsaWRIYW5kbGUgPSBmYWxzZSwKCQkJdGhhdCA9IHRoaXM7CgoJCWlmICh0aGlzLnJldmVydGluZykgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZih0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5vcHRpb25zLnR5cGUgPT09ICJzdGF0aWMiKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vV2UgaGF2ZSB0byByZWZyZXNoIHRoZSBpdGVtcyBkYXRhIG9uY2UgZmlyc3QKCQl0aGlzLl9yZWZyZXNoSXRlbXMoZXZlbnQpOwoKCQkvL0ZpbmQgb3V0IGlmIHRoZSBjbGlja2VkIG5vZGUgKG9yIG9uZSBvZiBpdHMgcGFyZW50cykgaXMgYSBhY3R1YWwgaXRlbSBpbiB0aGlzLml0ZW1zCgkJJChldmVudC50YXJnZXQpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQlpZigkLmRhdGEodGhpcywgdGhhdC53aWRnZXROYW1lICsgIi1pdGVtIikgPT09IHRoYXQpIHsKCQkJCWN1cnJlbnRJdGVtID0gJCh0aGlzKTsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0pOwoJCWlmKCQuZGF0YShldmVudC50YXJnZXQsIHRoYXQud2lkZ2V0TmFtZSArICItaXRlbSIpID09PSB0aGF0KSB7CgkJCWN1cnJlbnRJdGVtID0gJChldmVudC50YXJnZXQpOwoJCX0KCgkJaWYoIWN1cnJlbnRJdGVtKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJaWYodGhpcy5vcHRpb25zLmhhbmRsZSAmJiAhb3ZlcnJpZGVIYW5kbGUpIHsKCQkJJCh0aGlzLm9wdGlvbnMuaGFuZGxlLCBjdXJyZW50SXRlbSkuZmluZCgiKiIpLmFkZEJhY2soKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJaWYodGhpcyA9PT0gZXZlbnQudGFyZ2V0KSB7CgkJCQkJdmFsaWRIYW5kbGUgPSB0cnVlOwoJCQkJfQoJCQl9KTsKCQkJaWYoIXZhbGlkSGFuZGxlKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9CgoJCXRoaXMuY3VycmVudEl0ZW0gPSBjdXJyZW50SXRlbTsKCQl0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpOwoJCXJldHVybiB0cnVlOwoKCX0sCgoJX21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCBvdmVycmlkZUhhbmRsZSwgbm9BY3RpdmF0aW9uKSB7CgoJCXZhciBpLCBib2R5LAoJCQlvID0gdGhpcy5vcHRpb25zOwoKCQl0aGlzLmN1cnJlbnRDb250YWluZXIgPSB0aGlzOwoKCQkvL1dlIG9ubHkgbmVlZCB0byBjYWxsIHJlZnJlc2hQb3NpdGlvbnMsIGJlY2F1c2UgdGhlIHJlZnJlc2hJdGVtcyBjYWxsIGhhcyBiZWVuIG1vdmVkIHRvIG1vdXNlQ2FwdHVyZQoJCXRoaXMucmVmcmVzaFBvc2l0aW9ucygpOwoKCQkvL0NyZWF0ZSBhbmQgYXBwZW5kIHRoZSB2aXNpYmxlIGhlbHBlcgoJCXRoaXMuaGVscGVyID0gdGhpcy5fY3JlYXRlSGVscGVyKGV2ZW50KTsKCgkJLy9DYWNoZSB0aGUgaGVscGVyIHNpemUKCQl0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7CgoJCS8qCgkJICogLSBQb3NpdGlvbiBnZW5lcmF0aW9uIC0KCQkgKiBUaGlzIGJsb2NrIGdlbmVyYXRlcyBldmVyeXRoaW5nIHBvc2l0aW9uIHJlbGF0ZWQgLSBpdCdzIHRoZSBjb3JlIG9mIGRyYWdnYWJsZXMuCgkJICovCgoJCS8vQ2FjaGUgdGhlIG1hcmdpbnMgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnQKCQl0aGlzLl9jYWNoZU1hcmdpbnMoKTsKCgkJLy9HZXQgdGhlIG5leHQgc2Nyb2xsaW5nIHBhcmVudAoJCXRoaXMuc2Nyb2xsUGFyZW50ID0gdGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCk7CgoJCS8vVGhlIGVsZW1lbnQncyBhYnNvbHV0ZSBwb3NpdGlvbiBvbiB0aGUgcGFnZSBtaW51cyBtYXJnaW5zCgkJdGhpcy5vZmZzZXQgPSB0aGlzLmN1cnJlbnRJdGVtLm9mZnNldCgpOwoJCXRoaXMub2Zmc2V0ID0gewoJCQl0b3A6IHRoaXMub2Zmc2V0LnRvcCAtIHRoaXMubWFyZ2lucy50b3AsCgkJCWxlZnQ6IHRoaXMub2Zmc2V0LmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdAoJCX07CgoJCSQuZXh0ZW5kKHRoaXMub2Zmc2V0LCB7CgkJCWNsaWNrOiB7IC8vV2hlcmUgdGhlIGNsaWNrIGhhcHBlbmVkLCByZWxhdGl2ZSB0byB0aGUgZWxlbWVudAoJCQkJbGVmdDogZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5sZWZ0LAoJCQkJdG9wOiBldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LnRvcAoJCQl9LAoJCQlwYXJlbnQ6IHRoaXMuX2dldFBhcmVudE9mZnNldCgpLAoJCQlyZWxhdGl2ZTogdGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKSAvL1RoaXMgaXMgYSByZWxhdGl2ZSB0byBhYnNvbHV0ZSBwb3NpdGlvbiBtaW51cyB0aGUgYWN0dWFsIHBvc2l0aW9uIGNhbGN1bGF0aW9uIC0gb25seSB1c2VkIGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIGhlbHBlcgoJCX0pOwoKCQkvLyBPbmx5IGFmdGVyIHdlIGdvdCB0aGUgb2Zmc2V0LCB3ZSBjYW4gY2hhbmdlIHRoZSBoZWxwZXIncyBwb3NpdGlvbiB0byBhYnNvbHV0ZQoJCS8vIFRPRE86IFN0aWxsIG5lZWQgdG8gZmlndXJlIG91dCBhIHdheSB0byBtYWtlIHJlbGF0aXZlIHNvcnRpbmcgcG9zc2libGUKCQl0aGlzLmhlbHBlci5jc3MoInBvc2l0aW9uIiwgImFic29sdXRlIik7CgkJdGhpcy5jc3NQb3NpdGlvbiA9IHRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iKTsKCgkJLy9HZW5lcmF0ZSB0aGUgb3JpZ2luYWwgcG9zaXRpb24KCQl0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB0aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGV2ZW50KTsKCQl0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDsKCQl0aGlzLm9yaWdpbmFsUGFnZVkgPSBldmVudC5wYWdlWTsKCgkJLy9BZGp1c3QgdGhlIG1vdXNlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgaGVscGVyIGlmICJjdXJzb3JBdCIgaXMgc3VwcGxpZWQKCQkoby5jdXJzb3JBdCAmJiB0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKG8uY3Vyc29yQXQpKTsKCgkJLy9DYWNoZSB0aGUgZm9ybWVyIERPTSBwb3NpdGlvbgoJCXRoaXMuZG9tUG9zaXRpb24gPSB7IHByZXY6IHRoaXMuY3VycmVudEl0ZW0ucHJldigpWzBdLCBwYXJlbnQ6IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF0gfTsKCgkJLy9JZiB0aGUgaGVscGVyIGlzIG5vdCB0aGUgb3JpZ2luYWwsIGhpZGUgdGhlIG9yaWdpbmFsIHNvIGl0J3Mgbm90IHBsYXlpbmcgYW55IHJvbGUgZHVyaW5nIHRoZSBkcmFnLCB3b24ndCBjYXVzZSBhbnl0aGluZyBiYWQgdGhpcyB3YXkKCQlpZih0aGlzLmhlbHBlclswXSAhPT0gdGhpcy5jdXJyZW50SXRlbVswXSkgewoJCQl0aGlzLmN1cnJlbnRJdGVtLmhpZGUoKTsKCQl9CgoJCS8vQ3JlYXRlIHRoZSBwbGFjZWhvbGRlcgoJCXRoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCk7CgoJCS8vU2V0IGEgY29udGFpbm1lbnQgaWYgZ2l2ZW4gaW4gdGhlIG9wdGlvbnMKCQlpZihvLmNvbnRhaW5tZW50KSB7CgkJCXRoaXMuX3NldENvbnRhaW5tZW50KCk7CgkJfQoKCQlpZiggby5jdXJzb3IgJiYgby5jdXJzb3IgIT09ICJhdXRvIiApIHsgLy8gY3Vyc29yIG9wdGlvbgoJCQlib2R5ID0gdGhpcy5kb2N1bWVudC5maW5kKCAiYm9keSIgKTsKCgkJCS8vIHN1cHBvcnQ6IElFCgkJCXRoaXMuc3RvcmVkQ3Vyc29yID0gYm9keS5jc3MoICJjdXJzb3IiICk7CgkJCWJvZHkuY3NzKCAiY3Vyc29yIiwgby5jdXJzb3IgKTsKCgkJCXRoaXMuc3RvcmVkU3R5bGVzaGVldCA9ICQoICI8c3R5bGU+KnsgY3Vyc29yOiAiK28uY3Vyc29yKyIgIWltcG9ydGFudDsgfTwvc3R5bGU+IiApLmFwcGVuZFRvKCBib2R5ICk7CgkJfQoKCQlpZihvLm9wYWNpdHkpIHsgLy8gb3BhY2l0eSBvcHRpb24KCQkJaWYgKHRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIpKSB7CgkJCQl0aGlzLl9zdG9yZWRPcGFjaXR5ID0gdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iik7CgkJCX0KCQkJdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iiwgby5vcGFjaXR5KTsKCQl9CgoJCWlmKG8uekluZGV4KSB7IC8vIHpJbmRleCBvcHRpb24KCQkJaWYgKHRoaXMuaGVscGVyLmNzcygiekluZGV4IikpIHsKCQkJCXRoaXMuX3N0b3JlZFpJbmRleCA9IHRoaXMuaGVscGVyLmNzcygiekluZGV4Iik7CgkJCX0KCQkJdGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLCBvLnpJbmRleCk7CgkJfQoKCQkvL1ByZXBhcmUgc2Nyb2xsaW5nCgkJaWYodGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUgIT09ICJIVE1MIikgewoJCQl0aGlzLm92ZXJmbG93T2Zmc2V0ID0gdGhpcy5zY3JvbGxQYXJlbnQub2Zmc2V0KCk7CgkJfQoKCQkvL0NhbGwgY2FsbGJhY2tzCgkJdGhpcy5fdHJpZ2dlcigic3RhcnQiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoKCQkvL1JlY2FjaGUgdGhlIGhlbHBlciBzaXplCgkJaWYoIXRoaXMuX3ByZXNlcnZlSGVscGVyUHJvcG9ydGlvbnMpIHsKCQkJdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpOwoJCX0KCgoJCS8vUG9zdCAiYWN0aXZhdGUiIGV2ZW50cyB0byBwb3NzaWJsZSBjb250YWluZXJzCgkJaWYoICFub0FjdGl2YXRpb24gKSB7CgkJCWZvciAoIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7CgkJCQl0aGlzLmNvbnRhaW5lcnNbIGkgXS5fdHJpZ2dlciggImFjdGl2YXRlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7CgkJCX0KCQl9CgoJCS8vUHJlcGFyZSBwb3NzaWJsZSBkcm9wcGFibGVzCgkJaWYoJC51aS5kZG1hbmFnZXIpIHsKCQkJJC51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXM7CgkJfQoKCQlpZiAoJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91cikgewoJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLCBldmVudCk7CgkJfQoKCQl0aGlzLmRyYWdnaW5nID0gdHJ1ZTsKCgkJdGhpcy5oZWxwZXIuYWRkQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpOwoJCXRoaXMuX21vdXNlRHJhZyhldmVudCk7IC8vRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZSBiZWZvcmUgZ2V0dGluZyBpdHMgY29ycmVjdCBwb3NpdGlvbgoJCXJldHVybiB0cnVlOwoKCX0sCgoJX21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgaSwgaXRlbSwgaXRlbUVsZW1lbnQsIGludGVyc2VjdGlvbiwKCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJc2Nyb2xsZWQgPSBmYWxzZTsKCgkJLy9Db21wdXRlIHRoZSBoZWxwZXJzIHBvc2l0aW9uCgkJdGhpcy5wb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpOwoJCXRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTsKCgkJaWYgKCF0aGlzLmxhc3RQb3NpdGlvbkFicykgewoJCQl0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7CgkJfQoKCQkvL0RvIHNjcm9sbGluZwoJCWlmKHRoaXMub3B0aW9ucy5zY3JvbGwpIHsKCQkJaWYodGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUgIT09ICJIVE1MIikgewoKCQkJCWlmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCArIHRoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldEhlaWdodCkgLSBldmVudC5wYWdlWSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCArIG8uc2Nyb2xsU3BlZWQ7CgkJCQl9IGVsc2UgaWYoZXZlbnQucGFnZVkgLSB0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCAtIG8uc2Nyb2xsU3BlZWQ7CgkJCQl9CgoJCQkJaWYoKHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCArIHRoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldFdpZHRoKSAtIGV2ZW50LnBhZ2VYIDwgby5zY3JvbGxTZW5zaXRpdml0eSkgewoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgKyBvLnNjcm9sbFNwZWVkOwoJCQkJfSBlbHNlIGlmKGV2ZW50LnBhZ2VYIC0gdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0IDwgby5zY3JvbGxTZW5zaXRpdml0eSkgewoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgLSBvLnNjcm9sbFNwZWVkOwoJCQkJfQoKCQkJfSBlbHNlIHsKCgkJCQlpZihldmVudC5wYWdlWSAtICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkgewoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIC0gby5zY3JvbGxTcGVlZCk7CgkJCQl9IGVsc2UgaWYoJCh3aW5kb3cpLmhlaWdodCgpIC0gKGV2ZW50LnBhZ2VZIC0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkgewoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpICsgby5zY3JvbGxTcGVlZCk7CgkJCQl9CgoJCQkJaWYoZXZlbnQucGFnZVggLSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KSB7CgkJCQkJc2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSAtIG8uc2Nyb2xsU3BlZWQpOwoJCQkJfSBlbHNlIGlmKCQod2luZG93KS53aWR0aCgpIC0gKGV2ZW50LnBhZ2VYIC0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpIHsKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZCk7CgkJCQl9CgoJCQl9CgoJCQlpZihzY3JvbGxlZCAhPT0gZmFsc2UgJiYgJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91cikgewoJCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcywgZXZlbnQpOwoJCQl9CgkJfQoKCQkvL1JlZ2VuZXJhdGUgdGhlIGFic29sdXRlIHBvc2l0aW9uIHVzZWQgZm9yIHBvc2l0aW9uIGNoZWNrcwoJCXRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTsKCgkJLy9TZXQgdGhlIGhlbHBlciBwb3NpdGlvbgoJCWlmKCF0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLm9wdGlvbnMuYXhpcyAhPT0gInkiKSB7CgkJCXRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQrInB4IjsKCQl9CgkJaWYoIXRoaXMub3B0aW9ucy5heGlzIHx8IHRoaXMub3B0aW9ucy5heGlzICE9PSAieCIpIHsKCQkJdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wID0gdGhpcy5wb3NpdGlvbi50b3ArInB4IjsKCQl9CgoJCS8vUmVhcnJhbmdlCgkJZm9yIChpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewoKCQkJLy9DYWNoZSB2YXJpYWJsZXMgYW5kIGludGVyc2VjdGlvbiwgY29udGludWUgaWYgbm8gaW50ZXJzZWN0aW9uCgkJCWl0ZW0gPSB0aGlzLml0ZW1zW2ldOwoJCQlpdGVtRWxlbWVudCA9IGl0ZW0uaXRlbVswXTsKCQkJaW50ZXJzZWN0aW9uID0gdGhpcy5faW50ZXJzZWN0c1dpdGhQb2ludGVyKGl0ZW0pOwoJCQlpZiAoIWludGVyc2VjdGlvbikgewoJCQkJY29udGludWU7CgkJCX0KCgkJCS8vIE9ubHkgcHV0IHRoZSBwbGFjZWhvbGRlciBpbnNpZGUgdGhlIGN1cnJlbnQgQ29udGFpbmVyLCBza2lwIGFsbAoJCQkvLyBpdGVtcyBmcm9tIG90aGVyIGNvbnRhaW5lcnMuIFRoaXMgd29ya3MgYmVjYXVzZSB3aGVuIG1vdmluZwoJCQkvLyBhbiBpdGVtIGZyb20gb25lIGNvbnRhaW5lciB0byBhbm90aGVyIHRoZQoJCQkvLyBjdXJyZW50Q29udGFpbmVyIGlzIHN3aXRjaGVkIGJlZm9yZSB0aGUgcGxhY2Vob2xkZXIgaXMgbW92ZWQuCgkJCS8vCgkJCS8vIFdpdGhvdXQgdGhpcywgbW92aW5nIGl0ZW1zIGluICJzdWItc29ydGFibGVzIiBjYW4gY2F1c2UKCQkJLy8gdGhlIHBsYWNlaG9sZGVyIHRvIGppdHRlciBiZXR3ZWVuIHRoZSBvdXRlciBhbmQgaW5uZXIgY29udGFpbmVyLgoJCQlpZiAoaXRlbS5pbnN0YW5jZSAhPT0gdGhpcy5jdXJyZW50Q29udGFpbmVyKSB7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJLy8gY2Fubm90IGludGVyc2VjdCB3aXRoIGl0c2VsZgoJCQkvLyBubyB1c2VsZXNzIGFjdGlvbnMgdGhhdCBoYXZlIGJlZW4gZG9uZSBiZWZvcmUKCQkJLy8gbm8gYWN0aW9uIGlmIHRoZSBpdGVtIG1vdmVkIGlzIHRoZSBwYXJlbnQgb2YgdGhlIGl0ZW0gY2hlY2tlZAoJCQlpZiAoaXRlbUVsZW1lbnQgIT09IHRoaXMuY3VycmVudEl0ZW1bMF0gJiYKCQkJCXRoaXMucGxhY2Vob2xkZXJbaW50ZXJzZWN0aW9uID09PSAxID8gIm5leHQiIDogInByZXYiXSgpWzBdICE9PSBpdGVtRWxlbWVudCAmJgoJCQkJISQuY29udGFpbnModGhpcy5wbGFjZWhvbGRlclswXSwgaXRlbUVsZW1lbnQpICYmCgkJCQkodGhpcy5vcHRpb25zLnR5cGUgPT09ICJzZW1pLWR5bmFtaWMiID8gISQuY29udGFpbnModGhpcy5lbGVtZW50WzBdLCBpdGVtRWxlbWVudCkgOiB0cnVlKQoJCQkpIHsKCgkJCQl0aGlzLmRpcmVjdGlvbiA9IGludGVyc2VjdGlvbiA9PT0gMSA/ICJkb3duIiA6ICJ1cCI7CgoJCQkJaWYgKHRoaXMub3B0aW9ucy50b2xlcmFuY2UgPT09ICJwb2ludGVyIiB8fCB0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKGl0ZW0pKSB7CgkJCQkJdGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBpdGVtKTsKCQkJCX0gZWxzZSB7CgkJCQkJYnJlYWs7CgkJCQl9CgoJCQkJdGhpcy5fdHJpZ2dlcigiY2hhbmdlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoKCQkvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnMKCQl0aGlzLl9jb250YWN0Q29udGFpbmVycyhldmVudCk7CgoJCS8vSW50ZXJjb25uZWN0IHdpdGggZHJvcHBhYmxlcwoJCWlmKCQudWkuZGRtYW5hZ2VyKSB7CgkJCSQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgZXZlbnQpOwoJCX0KCgkJLy9DYWxsIGNhbGxiYWNrcwoJCXRoaXMuX3RyaWdnZXIoInNvcnQiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoKCQl0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7CgkJcmV0dXJuIGZhbHNlOwoKCX0sCgoJX21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQsIG5vUHJvcGFnYXRpb24pIHsKCgkJaWYoIWV2ZW50KSB7CgkJCXJldHVybjsKCQl9CgoJCS8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcAoJCWlmICgkLnVpLmRkbWFuYWdlciAmJiAhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXIpIHsKCQkJJC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLCBldmVudCk7CgkJfQoKCQlpZih0aGlzLm9wdGlvbnMucmV2ZXJ0KSB7CgkJCXZhciB0aGF0ID0gdGhpcywKCQkJCWN1ciA9IHRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCksCgkJCQlheGlzID0gdGhpcy5vcHRpb25zLmF4aXMsCgkJCQlhbmltYXRpb24gPSB7fTsKCgkJCWlmICggIWF4aXMgfHwgYXhpcyA9PT0gIngiICkgewoJCQkJYW5pbWF0aW9uLmxlZnQgPSBjdXIubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQgKyAodGhpcy5vZmZzZXRQYXJlbnRbMF0gPT09IGRvY3VtZW50LmJvZHkgPyAwIDogdGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsTGVmdCk7CgkJCX0KCQkJaWYgKCAhYXhpcyB8fCBheGlzID09PSAieSIgKSB7CgkJCQlhbmltYXRpb24udG9wID0gY3VyLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AgLSB0aGlzLm1hcmdpbnMudG9wICsgKHRoaXMub2Zmc2V0UGFyZW50WzBdID09PSBkb2N1bWVudC5ib2R5ID8gMCA6IHRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbFRvcCk7CgkJCX0KCQkJdGhpcy5yZXZlcnRpbmcgPSB0cnVlOwoJCQkkKHRoaXMuaGVscGVyKS5hbmltYXRlKCBhbmltYXRpb24sIHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnQsIDEwKSB8fCA1MDAsIGZ1bmN0aW9uKCkgewoJCQkJdGhhdC5fY2xlYXIoZXZlbnQpOwoJCQl9KTsKCQl9IGVsc2UgewoJCQl0aGlzLl9jbGVhcihldmVudCwgbm9Qcm9wYWdhdGlvbik7CgkJfQoKCQlyZXR1cm4gZmFsc2U7CgoJfSwKCgljYW5jZWw6IGZ1bmN0aW9uKCkgewoKCQlpZih0aGlzLmRyYWdnaW5nKSB7CgoJCQl0aGlzLl9tb3VzZVVwKHsgdGFyZ2V0OiBudWxsIH0pOwoKCQkJaWYodGhpcy5vcHRpb25zLmhlbHBlciA9PT0gIm9yaWdpbmFsIikgewoJCQkJdGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7CgkJCX0gZWxzZSB7CgkJCQl0aGlzLmN1cnJlbnRJdGVtLnNob3coKTsKCQkJfQoKCQkJLy9Qb3N0IGRlYWN0aXZhdGluZyBldmVudHMgdG8gY29udGFpbmVycwoJCQlmb3IgKHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsKCQkJCXRoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsIG51bGwsIHRoaXMuX3VpSGFzaCh0aGlzKSk7CgkJCQlpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlcikgewoJCQkJCXRoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcigib3V0IiwgbnVsbCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCQkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7CgkJCQl9CgkJCX0KCgkJfQoKCQlpZiAodGhpcy5wbGFjZWhvbGRlcikgewoJCQkvLyQodGhpcy5wbGFjZWhvbGRlclswXSkucmVtb3ZlKCk7IHdvdWxkIGhhdmUgYmVlbiB0aGUgalF1ZXJ5IHdheSAtIHVuZm9ydHVuYXRlbHksIGl0IHVuYmluZHMgQUxMIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIQoJCQlpZih0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUpIHsKCQkJCXRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTsKCQkJfQoJCQlpZih0aGlzLm9wdGlvbnMuaGVscGVyICE9PSAib3JpZ2luYWwiICYmIHRoaXMuaGVscGVyICYmIHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpIHsKCQkJCXRoaXMuaGVscGVyLnJlbW92ZSgpOwoJCQl9CgoJCQkkLmV4dGVuZCh0aGlzLCB7CgkJCQloZWxwZXI6IG51bGwsCgkJCQlkcmFnZ2luZzogZmFsc2UsCgkJCQlyZXZlcnRpbmc6IGZhbHNlLAoJCQkJX25vRmluYWxTb3J0OiBudWxsCgkJCX0pOwoKCQkJaWYodGhpcy5kb21Qb3NpdGlvbi5wcmV2KSB7CgkJCQkkKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5jdXJyZW50SXRlbSk7CgkJCX0gZWxzZSB7CgkJCQkkKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pOwoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCgl9LAoKCXNlcmlhbGl6ZTogZnVuY3Rpb24obykgewoKCQl2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpLAoJCQlzdHIgPSBbXTsKCQlvID0gbyB8fCB7fTsKCgkJJChpdGVtcykuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIHJlcyA9ICgkKG8uaXRlbSB8fCB0aGlzKS5hdHRyKG8uYXR0cmlidXRlIHx8ICJpZCIpIHx8ICIiKS5tYXRjaChvLmV4cHJlc3Npb24gfHwgKC8oLispW1wtPV9dKC4rKS8pKTsKCQkJaWYgKHJlcykgewoJCQkJc3RyLnB1c2goKG8ua2V5IHx8IHJlc1sxXSsiW10iKSsiPSIrKG8ua2V5ICYmIG8uZXhwcmVzc2lvbiA/IHJlc1sxXSA6IHJlc1syXSkpOwoJCQl9CgkJfSk7CgoJCWlmKCFzdHIubGVuZ3RoICYmIG8ua2V5KSB7CgkJCXN0ci5wdXNoKG8ua2V5ICsgIj0iKTsKCQl9CgoJCXJldHVybiBzdHIuam9pbigiJiIpOwoKCX0sCgoJdG9BcnJheTogZnVuY3Rpb24obykgewoKCQl2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpLAoJCQlyZXQgPSBbXTsKCgkJbyA9IG8gfHwge307CgoJCWl0ZW1zLmVhY2goZnVuY3Rpb24oKSB7IHJldC5wdXNoKCQoby5pdGVtIHx8IHRoaXMpLmF0dHIoby5hdHRyaWJ1dGUgfHwgImlkIikgfHwgIiIpOyB9KTsKCQlyZXR1cm4gcmV0OwoKCX0sCgoJLyogQmUgY2FyZWZ1bCB3aXRoIHRoZSBmb2xsb3dpbmcgY29yZSBmdW5jdGlvbnMgKi8KCV9pbnRlcnNlY3RzV2l0aDogZnVuY3Rpb24oaXRlbSkgewoKCQl2YXIgeDEgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQsCgkJCXgyID0geDEgKyB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLAoJCQl5MSA9IHRoaXMucG9zaXRpb25BYnMudG9wLAoJCQl5MiA9IHkxICsgdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsCgkJCWwgPSBpdGVtLmxlZnQsCgkJCXIgPSBsICsgaXRlbS53aWR0aCwKCQkJdCA9IGl0ZW0udG9wLAoJCQliID0gdCArIGl0ZW0uaGVpZ2h0LAoJCQlkeUNsaWNrID0gdGhpcy5vZmZzZXQuY2xpY2sudG9wLAoJCQlkeENsaWNrID0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCwKCQkJaXNPdmVyRWxlbWVudEhlaWdodCA9ICggdGhpcy5vcHRpb25zLmF4aXMgPT09ICJ4IiApIHx8ICggKCB5MSArIGR5Q2xpY2sgKSA+IHQgJiYgKCB5MSArIGR5Q2xpY2sgKSA8IGIgKSwKCQkJaXNPdmVyRWxlbWVudFdpZHRoID0gKCB0aGlzLm9wdGlvbnMuYXhpcyA9PT0gInkiICkgfHwgKCAoIHgxICsgZHhDbGljayApID4gbCAmJiAoIHgxICsgZHhDbGljayApIDwgciApLAoJCQlpc092ZXJFbGVtZW50ID0gaXNPdmVyRWxlbWVudEhlaWdodCAmJiBpc092ZXJFbGVtZW50V2lkdGg7CgoJCWlmICggdGhpcy5vcHRpb25zLnRvbGVyYW5jZSA9PT0gInBvaW50ZXIiIHx8CgkJCXRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzIHx8CgkJCSh0aGlzLm9wdGlvbnMudG9sZXJhbmNlICE9PSAicG9pbnRlciIgJiYgdGhpcy5oZWxwZXJQcm9wb3J0aW9uc1t0aGlzLmZsb2F0aW5nID8gIndpZHRoIiA6ICJoZWlnaHQiXSA+IGl0ZW1bdGhpcy5mbG9hdGluZyA/ICJ3aWR0aCIgOiAiaGVpZ2h0Il0pCgkJKSB7CgkJCXJldHVybiBpc092ZXJFbGVtZW50OwoJCX0gZWxzZSB7CgoJCQlyZXR1cm4gKGwgPCB4MSArICh0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC8gMikgJiYgLy8gUmlnaHQgSGFsZgoJCQkJeDIgLSAodGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIpIDwgciAmJiAvLyBMZWZ0IEhhbGYKCQkJCXQgPCB5MSArICh0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIpICYmIC8vIEJvdHRvbSBIYWxmCgkJCQl5MiAtICh0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIpIDwgYiApOyAvLyBUb3AgSGFsZgoKCQl9Cgl9LAoKCV9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6IGZ1bmN0aW9uKGl0ZW0pIHsKCgkJdmFyIGlzT3ZlckVsZW1lbnRIZWlnaHQgPSAodGhpcy5vcHRpb25zLmF4aXMgPT09ICJ4IikgfHwgdGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCwgaXRlbS50b3AsIGl0ZW0uaGVpZ2h0KSwKCQkJaXNPdmVyRWxlbWVudFdpZHRoID0gKHRoaXMub3B0aW9ucy5heGlzID09PSAieSIpIHx8IHRoaXMuX2lzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0ICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCwgaXRlbS5sZWZ0LCBpdGVtLndpZHRoKSwKCQkJaXNPdmVyRWxlbWVudCA9IGlzT3ZlckVsZW1lbnRIZWlnaHQgJiYgaXNPdmVyRWxlbWVudFdpZHRoLAoJCQl2ZXJ0aWNhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLAoJCQlob3Jpem9udGFsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTsKCgkJaWYgKCFpc092ZXJFbGVtZW50KSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXJldHVybiB0aGlzLmZsb2F0aW5nID8KCQkJKCAoKGhvcml6b250YWxEaXJlY3Rpb24gJiYgaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gInJpZ2h0IikgfHwgdmVydGljYWxEaXJlY3Rpb24gPT09ICJkb3duIikgPyAyIDogMSApCgkJCTogKCB2ZXJ0aWNhbERpcmVjdGlvbiAmJiAodmVydGljYWxEaXJlY3Rpb24gPT09ICJkb3duIiA/IDIgOiAxKSApOwoKCX0sCgoJX2ludGVyc2VjdHNXaXRoU2lkZXM6IGZ1bmN0aW9uKGl0ZW0pIHsKCgkJdmFyIGlzT3ZlckJvdHRvbUhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wLCBpdGVtLnRvcCArIChpdGVtLmhlaWdodC8yKSwgaXRlbS5oZWlnaHQpLAoJCQlpc092ZXJSaWdodEhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsIGl0ZW0ubGVmdCArIChpdGVtLndpZHRoLzIpLCBpdGVtLndpZHRoKSwKCQkJdmVydGljYWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSwKCQkJaG9yaXpvbnRhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7CgoJCWlmICh0aGlzLmZsb2F0aW5nICYmIGhvcml6b250YWxEaXJlY3Rpb24pIHsKCQkJcmV0dXJuICgoaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gInJpZ2h0IiAmJiBpc092ZXJSaWdodEhhbGYpIHx8IChob3Jpem9udGFsRGlyZWN0aW9uID09PSAibGVmdCIgJiYgIWlzT3ZlclJpZ2h0SGFsZikpOwoJCX0gZWxzZSB7CgkJCXJldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiAmJiAoKHZlcnRpY2FsRGlyZWN0aW9uID09PSAiZG93biIgJiYgaXNPdmVyQm90dG9tSGFsZikgfHwgKHZlcnRpY2FsRGlyZWN0aW9uID09PSAidXAiICYmICFpc092ZXJCb3R0b21IYWxmKSk7CgkJfQoKCX0sCgoJX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbjogZnVuY3Rpb24oKSB7CgkJdmFyIGRlbHRhID0gdGhpcy5wb3NpdGlvbkFicy50b3AgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7CgkJcmV0dXJuIGRlbHRhICE9PSAwICYmIChkZWx0YSA+IDAgPyAiZG93biIgOiAidXAiKTsKCX0sCgoJX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uOiBmdW5jdGlvbigpIHsKCQl2YXIgZGVsdGEgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0OwoJCXJldHVybiBkZWx0YSAhPT0gMCAmJiAoZGVsdGEgPiAwID8gInJpZ2h0IiA6ICJsZWZ0Iik7Cgl9LAoKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJdGhpcy5fcmVmcmVzaEl0ZW1zKGV2ZW50KTsKCQl0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTsKCQl0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTsKCQlyZXR1cm4gdGhpczsKCX0sCgoJX2Nvbm5lY3RXaXRoOiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCQlyZXR1cm4gb3B0aW9ucy5jb25uZWN0V2l0aC5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nID8gW29wdGlvbnMuY29ubmVjdFdpdGhdIDogb3B0aW9ucy5jb25uZWN0V2l0aDsKCX0sCgoJX2dldEl0ZW1zQXNqUXVlcnk6IGZ1bmN0aW9uKGNvbm5lY3RlZCkgewoKCQl2YXIgaSwgaiwgY3VyLCBpbnN0LAoJCQlpdGVtcyA9IFtdLAoJCQlxdWVyaWVzID0gW10sCgkJCWNvbm5lY3RXaXRoID0gdGhpcy5fY29ubmVjdFdpdGgoKTsKCgkJaWYoY29ubmVjdFdpdGggJiYgY29ubmVjdGVkKSB7CgkJCWZvciAoaSA9IGNvbm5lY3RXaXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsKCQkJCWN1ciA9ICQoY29ubmVjdFdpdGhbaV0pOwoJCQkJZm9yICggaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSl7CgkJCQkJaW5zdCA9ICQuZGF0YShjdXJbal0sIHRoaXMud2lkZ2V0RnVsbE5hbWUpOwoJCQkJCWlmKGluc3QgJiYgaW5zdCAhPT0gdGhpcyAmJiAhaW5zdC5vcHRpb25zLmRpc2FibGVkKSB7CgkJCQkJCXF1ZXJpZXMucHVzaChbJC5pc0Z1bmN0aW9uKGluc3Qub3B0aW9ucy5pdGVtcykgPyBpbnN0Lm9wdGlvbnMuaXRlbXMuY2FsbChpbnN0LmVsZW1lbnQpIDogJChpbnN0Lm9wdGlvbnMuaXRlbXMsIGluc3QuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCIudWktc29ydGFibGUtcGxhY2Vob2xkZXIiKSwgaW5zdF0pOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKSA/IHRoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudCwgbnVsbCwgeyBvcHRpb25zOiB0aGlzLm9wdGlvbnMsIGl0ZW06IHRoaXMuY3VycmVudEl0ZW0gfSkgOiAkKHRoaXMub3B0aW9ucy5pdGVtcywgdGhpcy5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIpLCB0aGlzXSk7CgoJCWZ1bmN0aW9uIGFkZEl0ZW1zKCkgewoJCQlpdGVtcy5wdXNoKCB0aGlzICk7CgkJfQoJCWZvciAoaSA9IHF1ZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQlxdWVyaWVzW2ldWzBdLmVhY2goIGFkZEl0ZW1zICk7CgkJfQoKCQlyZXR1cm4gJChpdGVtcyk7CgoJfSwKCglfcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXM6IGZ1bmN0aW9uKCkgewoKCQl2YXIgbGlzdCA9IHRoaXMuY3VycmVudEl0ZW0uZmluZCgiOmRhdGEoIiArIHRoaXMud2lkZ2V0TmFtZSArICItaXRlbSkiKTsKCgkJdGhpcy5pdGVtcyA9ICQuZ3JlcCh0aGlzLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkgewoJCQlmb3IgKHZhciBqPTA7IGogPCBsaXN0Lmxlbmd0aDsgaisrKSB7CgkJCQlpZihsaXN0W2pdID09PSBpdGVtLml0ZW1bMF0pIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSk7CgoJfSwKCglfcmVmcmVzaEl0ZW1zOiBmdW5jdGlvbihldmVudCkgewoKCQl0aGlzLml0ZW1zID0gW107CgkJdGhpcy5jb250YWluZXJzID0gW3RoaXNdOwoKCQl2YXIgaSwgaiwgY3VyLCBpbnN0LCB0YXJnZXREYXRhLCBfcXVlcmllcywgaXRlbSwgcXVlcmllc0xlbmd0aCwKCQkJaXRlbXMgPSB0aGlzLml0ZW1zLAoJCQlxdWVyaWVzID0gW1skLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKSA/IHRoaXMub3B0aW9ucy5pdGVtcy5jYWxsKHRoaXMuZWxlbWVudFswXSwgZXZlbnQsIHsgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9KSA6ICQodGhpcy5vcHRpb25zLml0ZW1zLCB0aGlzLmVsZW1lbnQpLCB0aGlzXV0sCgkJCWNvbm5lY3RXaXRoID0gdGhpcy5fY29ubmVjdFdpdGgoKTsKCgkJaWYoY29ubmVjdFdpdGggJiYgdGhpcy5yZWFkeSkgeyAvL1Nob3VsZG4ndCBiZSBydW4gdGhlIGZpcnN0IHRpbWUgdGhyb3VnaCBkdWUgdG8gbWFzc2l2ZSBzbG93LWRvd24KCQkJZm9yIChpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJY3VyID0gJChjb25uZWN0V2l0aFtpXSk7CgkJCQlmb3IgKGogPSBjdXIubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pewoJCQkJCWluc3QgPSAkLmRhdGEoY3VyW2pdLCB0aGlzLndpZGdldEZ1bGxOYW1lKTsKCQkJCQlpZihpbnN0ICYmIGluc3QgIT09IHRoaXMgJiYgIWluc3Qub3B0aW9ucy5kaXNhYmxlZCkgewoJCQkJCQlxdWVyaWVzLnB1c2goWyQuaXNGdW5jdGlvbihpbnN0Lm9wdGlvbnMuaXRlbXMpID8gaW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoaW5zdC5lbGVtZW50WzBdLCBldmVudCwgeyBpdGVtOiB0aGlzLmN1cnJlbnRJdGVtIH0pIDogJChpbnN0Lm9wdGlvbnMuaXRlbXMsIGluc3QuZWxlbWVudCksIGluc3RdKTsKCQkJCQkJdGhpcy5jb250YWluZXJzLnB1c2goaW5zdCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlmb3IgKGkgPSBxdWVyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CgkJCXRhcmdldERhdGEgPSBxdWVyaWVzW2ldWzFdOwoJCQlfcXVlcmllcyA9IHF1ZXJpZXNbaV1bMF07CgoJCQlmb3IgKGo9MCwgcXVlcmllc0xlbmd0aCA9IF9xdWVyaWVzLmxlbmd0aDsgaiA8IHF1ZXJpZXNMZW5ndGg7IGorKykgewoJCQkJaXRlbSA9ICQoX3F1ZXJpZXNbal0pOwoKCQkJCWl0ZW0uZGF0YSh0aGlzLndpZGdldE5hbWUgKyAiLWl0ZW0iLCB0YXJnZXREYXRhKTsgLy8gRGF0YSBmb3IgdGFyZ2V0IGNoZWNraW5nIChtb3VzZSBtYW5hZ2VyKQoKCQkJCWl0ZW1zLnB1c2goewoJCQkJCWl0ZW06IGl0ZW0sCgkJCQkJaW5zdGFuY2U6IHRhcmdldERhdGEsCgkJCQkJd2lkdGg6IDAsIGhlaWdodDogMCwKCQkJCQlsZWZ0OiAwLCB0b3A6IDAKCQkJCX0pOwoJCQl9CgkJfQoKCX0sCgoJcmVmcmVzaFBvc2l0aW9uczogZnVuY3Rpb24oZmFzdCkgewoKCQkvL1RoaXMgaGFzIHRvIGJlIHJlZG9uZSBiZWNhdXNlIGR1ZSB0byB0aGUgaXRlbSBiZWluZyBtb3ZlZCBvdXQvaW50byB0aGUgb2Zmc2V0UGFyZW50LCB0aGUgb2Zmc2V0UGFyZW50J3MgcG9zaXRpb24gd2lsbCBjaGFuZ2UKCQlpZih0aGlzLm9mZnNldFBhcmVudCAmJiB0aGlzLmhlbHBlcikgewoJCQl0aGlzLm9mZnNldC5wYXJlbnQgPSB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKTsKCQl9CgoJCXZhciBpLCBpdGVtLCB0LCBwOwoKCQlmb3IgKGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsKCQkJaXRlbSA9IHRoaXMuaXRlbXNbaV07CgoJCQkvL1dlIGlnbm9yZSBjYWxjdWxhdGluZyBwb3NpdGlvbnMgb2YgYWxsIGNvbm5lY3RlZCBjb250YWluZXJzIHdoZW4gd2UncmUgbm90IG92ZXIgdGhlbQoJCQlpZihpdGVtLmluc3RhbmNlICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIgJiYgdGhpcy5jdXJyZW50Q29udGFpbmVyICYmIGl0ZW0uaXRlbVswXSAhPT0gdGhpcy5jdXJyZW50SXRlbVswXSkgewoJCQkJY29udGludWU7CgkJCX0KCgkJCXQgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudCA/ICQodGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQsIGl0ZW0uaXRlbSkgOiBpdGVtLml0ZW07CgoJCQlpZiAoIWZhc3QpIHsKCQkJCWl0ZW0ud2lkdGggPSB0Lm91dGVyV2lkdGgoKTsKCQkJCWl0ZW0uaGVpZ2h0ID0gdC5vdXRlckhlaWdodCgpOwoJCQl9CgoJCQlwID0gdC5vZmZzZXQoKTsKCQkJaXRlbS5sZWZ0ID0gcC5sZWZ0OwoJCQlpdGVtLnRvcCA9IHAudG9wOwoJCX0KCgkJaWYodGhpcy5vcHRpb25zLmN1c3RvbSAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tLnJlZnJlc2hDb250YWluZXJzKSB7CgkJCXRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMuY2FsbCh0aGlzKTsKCQl9IGVsc2UgewoJCQlmb3IgKGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJcCA9IHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm9mZnNldCgpOwoJCQkJdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmxlZnQgPSBwLmxlZnQ7CgkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUudG9wID0gcC50b3A7CgkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUud2lkdGggPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vdXRlcldpZHRoKCk7CgkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUuaGVpZ2h0ID0gdGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub3V0ZXJIZWlnaHQoKTsKCQkJfQoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCV9jcmVhdGVQbGFjZWhvbGRlcjogZnVuY3Rpb24odGhhdCkgewoJCXRoYXQgPSB0aGF0IHx8IHRoaXM7CgkJdmFyIGNsYXNzTmFtZSwKCQkJbyA9IHRoYXQub3B0aW9uczsKCgkJaWYoIW8ucGxhY2Vob2xkZXIgfHwgby5wbGFjZWhvbGRlci5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7CgkJCWNsYXNzTmFtZSA9IG8ucGxhY2Vob2xkZXI7CgkJCW8ucGxhY2Vob2xkZXIgPSB7CgkJCQllbGVtZW50OiBmdW5jdGlvbigpIHsKCgkJCQkJdmFyIG5vZGVOYW1lID0gdGhhdC5jdXJyZW50SXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLAoJCQkJCQllbGVtZW50ID0gJCggIjwiICsgbm9kZU5hbWUgKyAiPiIsIHRoYXQuZG9jdW1lbnRbMF0gKQoJCQkJCQkJLmFkZENsYXNzKGNsYXNzTmFtZSB8fCB0aGF0LmN1cnJlbnRJdGVtWzBdLmNsYXNzTmFtZSsiIHVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIikKCQkJCQkJCS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7CgoJCQkJCWlmICggbm9kZU5hbWUgPT09ICJ0ciIgKSB7CgkJCQkJCXRoYXQuY3VycmVudEl0ZW0uY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQkJJCggIjx0ZD4mIzE2MDs8L3RkPiIsIHRoYXQuZG9jdW1lbnRbMF0gKQoJCQkJCQkJCS5hdHRyKCAiY29sc3BhbiIsICQoIHRoaXMgKS5hdHRyKCAiY29sc3BhbiIgKSB8fCAxICkKCQkJCQkJCQkuYXBwZW5kVG8oIGVsZW1lbnQgKTsKCQkJCQkJfSk7CgkJCQkJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJpbWciICkgewoJCQkJCQllbGVtZW50LmF0dHIoICJzcmMiLCB0aGF0LmN1cnJlbnRJdGVtLmF0dHIoICJzcmMiICkgKTsKCQkJCQl9CgoJCQkJCWlmICggIWNsYXNzTmFtZSApIHsKCQkJCQkJZWxlbWVudC5jc3MoICJ2aXNpYmlsaXR5IiwgImhpZGRlbiIgKTsKCQkJCQl9CgoJCQkJCXJldHVybiBlbGVtZW50OwoJCQkJfSwKCQkJCXVwZGF0ZTogZnVuY3Rpb24oY29udGFpbmVyLCBwKSB7CgoJCQkJCS8vIDEuIElmIGEgY2xhc3NOYW1lIGlzIHNldCBhcyAncGxhY2Vob2xkZXIgb3B0aW9uLCB3ZSBkb24ndCBmb3JjZSBzaXplcyAtIHRoZSBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhhdAoJCQkJCS8vIDIuIFRoZSBvcHRpb24gJ2ZvcmNlUGxhY2Vob2xkZXJTaXplIGNhbiBiZSBlbmFibGVkIHRvIGZvcmNlIGl0IGV2ZW4gaWYgYSBjbGFzcyBuYW1lIGlzIHNwZWNpZmllZAoJCQkJCWlmKGNsYXNzTmFtZSAmJiAhby5mb3JjZVBsYWNlaG9sZGVyU2l6ZSkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoKCQkJCQkvL0lmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhIGFjdHVhbCBoZWlnaHQgYnkgaXRzZWxmICh3aXRob3V0IHN0eWxlcyBjb21pbmcgZnJvbSBhIHN0eWxlc2hlZXQpLCBpdCByZWNlaXZlcyB0aGUgaW5saW5lIGhlaWdodCBmcm9tIHRoZSBkcmFnZ2VkIGl0ZW0KCQkJCQlpZighcC5oZWlnaHQoKSkgeyBwLmhlaWdodCh0aGF0LmN1cnJlbnRJdGVtLmlubmVySGVpZ2h0KCkgLSBwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ1RvcCIpfHwwLCAxMCkgLSBwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ0JvdHRvbSIpfHwwLCAxMCkpOyB9CgkJCQkJaWYoIXAud2lkdGgoKSkgeyBwLndpZHRoKHRoYXQuY3VycmVudEl0ZW0uaW5uZXJXaWR0aCgpIC0gcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdMZWZ0Iil8fDAsIDEwKSAtIHBhcnNlSW50KHRoYXQuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nUmlnaHQiKXx8MCwgMTApKTsgfQoJCQkJfQoJCQl9OwoJCX0KCgkJLy9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyCgkJdGhhdC5wbGFjZWhvbGRlciA9ICQoby5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwodGhhdC5lbGVtZW50LCB0aGF0LmN1cnJlbnRJdGVtKSk7CgoJCS8vQXBwZW5kIGl0IGFmdGVyIHRoZSBhY3R1YWwgY3VycmVudCBpdGVtCgkJdGhhdC5jdXJyZW50SXRlbS5hZnRlcih0aGF0LnBsYWNlaG9sZGVyKTsKCgkJLy9VcGRhdGUgdGhlIHNpemUgb2YgdGhlIHBsYWNlaG9sZGVyIChUT0RPOiBMb2dpYyB0byBmdXp6eSwgc2VlIGxpbmUgMzE2LzMxNykKCQlvLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGF0LCB0aGF0LnBsYWNlaG9sZGVyKTsKCgl9LAoKCV9jb250YWN0Q29udGFpbmVyczogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgaSwgaiwgZGlzdCwgaXRlbVdpdGhMZWFzdERpc3RhbmNlLCBwb3NQcm9wZXJ0eSwgc2l6ZVByb3BlcnR5LCBjdXIsIG5lYXJCb3R0b20sIGZsb2F0aW5nLCBheGlzLAoJCQlpbm5lcm1vc3RDb250YWluZXIgPSBudWxsLAoJCQlpbm5lcm1vc3RJbmRleCA9IG51bGw7CgoJCS8vIGdldCBpbm5lcm1vc3QgY29udGFpbmVyIHRoYXQgaW50ZXJzZWN0cyB3aXRoIGl0ZW0KCQlmb3IgKGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKCgkJCS8vIG5ldmVyIGNvbnNpZGVyIGEgY29udGFpbmVyIHRoYXQncyBsb2NhdGVkIHdpdGhpbiB0aGUgaXRlbSBpdHNlbGYKCQkJaWYoJC5jb250YWlucyh0aGlzLmN1cnJlbnRJdGVtWzBdLCB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudFswXSkpIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQlpZih0aGlzLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUpKSB7CgoJCQkJLy8gaWYgd2UndmUgYWxyZWFkeSBmb3VuZCBhIGNvbnRhaW5lciBhbmQgaXQncyBtb3JlICJpbm5lciIgdGhhbiB0aGlzLCB0aGVuIGNvbnRpbnVlCgkJCQlpZihpbm5lcm1vc3RDb250YWluZXIgJiYgJC5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudFswXSwgaW5uZXJtb3N0Q29udGFpbmVyLmVsZW1lbnRbMF0pKSB7CgkJCQkJY29udGludWU7CgkJCQl9CgoJCQkJaW5uZXJtb3N0Q29udGFpbmVyID0gdGhpcy5jb250YWluZXJzW2ldOwoJCQkJaW5uZXJtb3N0SW5kZXggPSBpOwoKCQkJfSBlbHNlIHsKCQkJCS8vIGNvbnRhaW5lciBkb2Vzbid0IGludGVyc2VjdC4gdHJpZ2dlciAib3V0IiBldmVudCBpZiBuZWNlc3NhcnkKCQkJCWlmKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyKSB7CgkJCQkJdGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJvdXQiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCQkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7CgkJCQl9CgkJCX0KCgkJfQoKCQkvLyBpZiBubyBpbnRlcnNlY3RpbmcgY29udGFpbmVycyBmb3VuZCwgcmV0dXJuCgkJaWYoIWlubmVybW9zdENvbnRhaW5lcikgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBtb3ZlIHRoZSBpdGVtIGludG8gdGhlIGNvbnRhaW5lciBpZiBpdCdzIG5vdCB0aGVyZSBhbHJlYWR5CgkJaWYodGhpcy5jb250YWluZXJzLmxlbmd0aCA9PT0gMSkgewoJCQlpZiAoIXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3ZlcikgewoJCQkJdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5fdHJpZ2dlcigib3ZlciIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOwoJCQkJdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyID0gMTsKCQkJfQoJCX0gZWxzZSB7CgoJCQkvL1doZW4gZW50ZXJpbmcgYSBuZXcgY29udGFpbmVyLCB3ZSB3aWxsIGZpbmQgdGhlIGl0ZW0gd2l0aCB0aGUgbGVhc3QgZGlzdGFuY2UgYW5kIGFwcGVuZCBvdXIgaXRlbSBuZWFyIGl0CgkJCWRpc3QgPSAxMDAwMDsKCQkJaXRlbVdpdGhMZWFzdERpc3RhbmNlID0gbnVsbDsKCQkJZmxvYXRpbmcgPSBpbm5lcm1vc3RDb250YWluZXIuZmxvYXRpbmcgfHwgdGhpcy5faXNGbG9hdGluZyh0aGlzLmN1cnJlbnRJdGVtKTsKCQkJcG9zUHJvcGVydHkgPSBmbG9hdGluZyA/ICJsZWZ0IiA6ICJ0b3AiOwoJCQlzaXplUHJvcGVydHkgPSBmbG9hdGluZyA/ICJ3aWR0aCIgOiAiaGVpZ2h0IjsKCQkJYXhpcyA9IGZsb2F0aW5nID8gImNsaWVudFgiIDogImNsaWVudFkiOwoKCQkJZm9yIChqID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkgewoJCQkJaWYoISQuY29udGFpbnModGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5lbGVtZW50WzBdLCB0aGlzLml0ZW1zW2pdLml0ZW1bMF0pKSB7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCQlpZih0aGlzLml0ZW1zW2pdLml0ZW1bMF0gPT09IHRoaXMuY3VycmVudEl0ZW1bMF0pIHsKCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQljdXIgPSB0aGlzLml0ZW1zW2pdLml0ZW0ub2Zmc2V0KClbcG9zUHJvcGVydHldOwoJCQkJbmVhckJvdHRvbSA9IGZhbHNlOwoJCQkJaWYgKCBldmVudFsgYXhpcyBdIC0gY3VyID4gdGhpcy5pdGVtc1sgaiBdWyBzaXplUHJvcGVydHkgXSAvIDIgKSB7CgkJCQkJbmVhckJvdHRvbSA9IHRydWU7CgkJCQl9CgoJCQkJaWYgKCBNYXRoLmFicyggZXZlbnRbIGF4aXMgXSAtIGN1ciApIDwgZGlzdCApIHsKCQkJCQlkaXN0ID0gTWF0aC5hYnMoIGV2ZW50WyBheGlzIF0gLSBjdXIgKTsKCQkJCQlpdGVtV2l0aExlYXN0RGlzdGFuY2UgPSB0aGlzLml0ZW1zWyBqIF07CgkJCQkJdGhpcy5kaXJlY3Rpb24gPSBuZWFyQm90dG9tID8gInVwIjogImRvd24iOwoJCQkJfQoJCQl9CgoJCQkvL0NoZWNrIGlmIGRyb3BPbkVtcHR5IGlzIGVuYWJsZWQKCQkJaWYoIWl0ZW1XaXRoTGVhc3REaXN0YW5jZSAmJiAhdGhpcy5vcHRpb25zLmRyb3BPbkVtcHR5KSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmKHRoaXMuY3VycmVudENvbnRhaW5lciA9PT0gdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XSkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpdGVtV2l0aExlYXN0RGlzdGFuY2UgPyB0aGlzLl9yZWFycmFuZ2UoZXZlbnQsIGl0ZW1XaXRoTGVhc3REaXN0YW5jZSwgbnVsbCwgdHJ1ZSkgOiB0aGlzLl9yZWFycmFuZ2UoZXZlbnQsIG51bGwsIHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uZWxlbWVudCwgdHJ1ZSk7CgkJCXRoaXMuX3RyaWdnZXIoImNoYW5nZSIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgkJCXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uX3RyaWdnZXIoImNoYW5nZSIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOwoJCQl0aGlzLmN1cnJlbnRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdOwoKCQkJLy9VcGRhdGUgdGhlIHBsYWNlaG9sZGVyCgkJCXRoaXMub3B0aW9ucy5wbGFjZWhvbGRlci51cGRhdGUodGhpcy5jdXJyZW50Q29udGFpbmVyLCB0aGlzLnBsYWNlaG9sZGVyKTsKCgkJCXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uX3RyaWdnZXIoIm92ZXIiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCQkJdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XS5jb250YWluZXJDYWNoZS5vdmVyID0gMTsKCQl9CgoKCX0sCgoJX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsCgkJCWhlbHBlciA9ICQuaXNGdW5jdGlvbihvLmhlbHBlcikgPyAkKG8uaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSwgW2V2ZW50LCB0aGlzLmN1cnJlbnRJdGVtXSkpIDogKG8uaGVscGVyID09PSAiY2xvbmUiID8gdGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpIDogdGhpcy5jdXJyZW50SXRlbSk7CgoJCS8vQWRkIHRoZSBoZWxwZXIgdG8gdGhlIERPTSBpZiB0aGF0IGRpZG4ndCBoYXBwZW4gYWxyZWFkeQoJCWlmKCFoZWxwZXIucGFyZW50cygiYm9keSIpLmxlbmd0aCkgewoJCQkkKG8uYXBwZW5kVG8gIT09ICJwYXJlbnQiID8gby5hcHBlbmRUbyA6IHRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSlbMF0uYXBwZW5kQ2hpbGQoaGVscGVyWzBdKTsKCQl9CgoJCWlmKGhlbHBlclswXSA9PT0gdGhpcy5jdXJyZW50SXRlbVswXSkgewoJCQl0aGlzLl9zdG9yZWRDU1MgPSB7IHdpZHRoOiB0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLndpZHRoLCBoZWlnaHQ6IHRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUuaGVpZ2h0LCBwb3NpdGlvbjogdGhpcy5jdXJyZW50SXRlbS5jc3MoInBvc2l0aW9uIiksIHRvcDogdGhpcy5jdXJyZW50SXRlbS5jc3MoInRvcCIpLCBsZWZ0OiB0aGlzLmN1cnJlbnRJdGVtLmNzcygibGVmdCIpIH07CgkJfQoKCQlpZighaGVscGVyWzBdLnN0eWxlLndpZHRoIHx8IG8uZm9yY2VIZWxwZXJTaXplKSB7CgkJCWhlbHBlci53aWR0aCh0aGlzLmN1cnJlbnRJdGVtLndpZHRoKCkpOwoJCX0KCQlpZighaGVscGVyWzBdLnN0eWxlLmhlaWdodCB8fCBvLmZvcmNlSGVscGVyU2l6ZSkgewoJCQloZWxwZXIuaGVpZ2h0KHRoaXMuY3VycmVudEl0ZW0uaGVpZ2h0KCkpOwoJCX0KCgkJcmV0dXJuIGhlbHBlcjsKCgl9LAoKCV9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOiBmdW5jdGlvbihvYmopIHsKCQlpZiAodHlwZW9mIG9iaiA9PT0gInN0cmluZyIpIHsKCQkJb2JqID0gb2JqLnNwbGl0KCIgIik7CgkJfQoJCWlmICgkLmlzQXJyYXkob2JqKSkgewoJCQlvYmogPSB7bGVmdDogK29ialswXSwgdG9wOiArb2JqWzFdIHx8IDB9OwoJCX0KCQlpZiAoImxlZnQiIGluIG9iaikgewoJCQl0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gb2JqLmxlZnQgKyB0aGlzLm1hcmdpbnMubGVmdDsKCQl9CgkJaWYgKCJyaWdodCIgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gb2JqLnJpZ2h0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7CgkJfQoJCWlmICgidG9wIiBpbiBvYmopIHsKCQkJdGhpcy5vZmZzZXQuY2xpY2sudG9wID0gb2JqLnRvcCArIHRoaXMubWFyZ2lucy50b3A7CgkJfQoJCWlmICgiYm90dG9tIiBpbiBvYmopIHsKCQkJdGhpcy5vZmZzZXQuY2xpY2sudG9wID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSBvYmouYm90dG9tICsgdGhpcy5tYXJnaW5zLnRvcDsKCQl9Cgl9LAoKCV9nZXRQYXJlbnRPZmZzZXQ6IGZ1bmN0aW9uKCkgewoKCgkJLy9HZXQgdGhlIG9mZnNldFBhcmVudCBhbmQgY2FjaGUgaXRzIHBvc2l0aW9uCgkJdGhpcy5vZmZzZXRQYXJlbnQgPSB0aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTsKCQl2YXIgcG8gPSB0aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTsKCgkJLy8gVGhpcyBpcyBhIHNwZWNpYWwgY2FzZSB3aGVyZSB3ZSBuZWVkIHRvIG1vZGlmeSBhIG9mZnNldCBjYWxjdWxhdGVkIG9uIHN0YXJ0LCBzaW5jZSB0aGUgZm9sbG93aW5nIGhhcHBlbmVkOgoJCS8vIDEuIFRoZSBwb3NpdGlvbiBvZiB0aGUgaGVscGVyIGlzIGFic29sdXRlLCBzbyBpdCdzIHBvc2l0aW9uIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIG5leHQgcG9zaXRpb25lZCBwYXJlbnQKCQkvLyAyLiBUaGUgYWN0dWFsIG9mZnNldCBwYXJlbnQgaXMgYSBjaGlsZCBvZiB0aGUgc2Nyb2xsIHBhcmVudCwgYW5kIHRoZSBzY3JvbGwgcGFyZW50IGlzbid0IHRoZSBkb2N1bWVudCwgd2hpY2ggbWVhbnMgdGhhdAoJCS8vICAgIHRoZSBzY3JvbGwgaXMgaW5jbHVkZWQgaW4gdGhlIGluaXRpYWwgY2FsY3VsYXRpb24gb2YgdGhlIG9mZnNldCBvZiB0aGUgcGFyZW50LCBhbmQgbmV2ZXIgcmVjYWxjdWxhdGVkIHVwb24gZHJhZwoJCWlmKHRoaXMuY3NzUG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgJiYgdGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmICQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSkgewoJCQlwby5sZWZ0ICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTsKCQkJcG8udG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOwoJCX0KCgkJLy8gVGhpcyBuZWVkcyB0byBiZSBhY3R1YWxseSBkb25lIGZvciBhbGwgYnJvd3NlcnMsIHNpbmNlIHBhZ2VYL3BhZ2VZIGluY2x1ZGVzIHRoaXMgaW5mb3JtYXRpb24KCQkvLyB3aXRoIGFuIHVnbHkgSUUgZml4CgkJaWYoIHRoaXMub2Zmc2V0UGFyZW50WzBdID09PSBkb2N1bWVudC5ib2R5IHx8ICh0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lICYmIHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImh0bWwiICYmICQudWkuaWUpKSB7CgkJCXBvID0geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCQl9CgoJCXJldHVybiB7CgkJCXRvcDogcG8udG9wICsgKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCkgfHwgMCksCgkJCWxlZnQ6IHBvLmxlZnQgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCkgfHwgMCkKCQl9OwoKCX0sCgoJX2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHsKCgkJaWYodGhpcy5jc3NQb3NpdGlvbiA9PT0gInJlbGF0aXZlIikgewoJCQl2YXIgcCA9IHRoaXMuY3VycmVudEl0ZW0ucG9zaXRpb24oKTsKCQkJcmV0dXJuIHsKCQkJCXRvcDogcC50b3AgLSAocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSwxMCkgfHwgMCkgKyB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSwKCQkJCWxlZnQ6IHAubGVmdCAtIChwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSwxMCkgfHwgMCkgKyB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkKCQkJfTsKCQl9IGVsc2UgewoJCQlyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCQl9CgoJfSwKCglfY2FjaGVNYXJnaW5zOiBmdW5jdGlvbigpIHsKCQl0aGlzLm1hcmdpbnMgPSB7CgkJCWxlZnQ6IChwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luTGVmdCIpLDEwKSB8fCAwKSwKCQkJdG9wOiAocGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpblRvcCIpLDEwKSB8fCAwKQoJCX07Cgl9LAoKCV9jYWNoZUhlbHBlclByb3BvcnRpb25zOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhlbHBlclByb3BvcnRpb25zID0gewoJCQl3aWR0aDogdGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLAoJCQloZWlnaHQ6IHRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCkKCQl9OwoJfSwKCglfc2V0Q29udGFpbm1lbnQ6IGZ1bmN0aW9uKCkgewoKCQl2YXIgY2UsIGNvLCBvdmVyLAoJCQlvID0gdGhpcy5vcHRpb25zOwoJCWlmKG8uY29udGFpbm1lbnQgPT09ICJwYXJlbnQiKSB7CgkJCW8uY29udGFpbm1lbnQgPSB0aGlzLmhlbHBlclswXS5wYXJlbnROb2RlOwoJCX0KCQlpZihvLmNvbnRhaW5tZW50ID09PSAiZG9jdW1lbnQiIHx8IG8uY29udGFpbm1lbnQgPT09ICJ3aW5kb3ciKSB7CgkJCXRoaXMuY29udGFpbm1lbnQgPSBbCgkJCQkwIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LAoJCQkJMCAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AsCgkJCQkkKG8uY29udGFpbm1lbnQgPT09ICJkb2N1bWVudCIgPyBkb2N1bWVudCA6IHdpbmRvdykud2lkdGgoKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCwKCQkJCSgkKG8uY29udGFpbm1lbnQgPT09ICJkb2N1bWVudCIgPyBkb2N1bWVudCA6IHdpbmRvdykuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3AKCQkJXTsKCQl9CgoJCWlmKCEoL14oZG9jdW1lbnR8d2luZG93fHBhcmVudCkkLykudGVzdChvLmNvbnRhaW5tZW50KSkgewoJCQljZSA9ICQoby5jb250YWlubWVudClbMF07CgkJCWNvID0gJChvLmNvbnRhaW5tZW50KS5vZmZzZXQoKTsKCQkJb3ZlciA9ICgkKGNlKS5jc3MoIm92ZXJmbG93IikgIT09ICJoaWRkZW4iKTsKCgkJCXRoaXMuY29udGFpbm1lbnQgPSBbCgkJCQljby5sZWZ0ICsgKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ0xlZnQiKSwxMCkgfHwgMCkgLSB0aGlzLm1hcmdpbnMubGVmdCwKCQkJCWNvLnRvcCArIChwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1RvcCIpLDEwKSB8fCAwKSAtIHRoaXMubWFyZ2lucy50b3AsCgkJCQljby5sZWZ0KyhvdmVyID8gTWF0aC5tYXgoY2Uuc2Nyb2xsV2lkdGgsY2Uub2Zmc2V0V2lkdGgpIDogY2Uub2Zmc2V0V2lkdGgpIC0gKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApIHx8IDApIC0gKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LAoJCQkJY28udG9wKyhvdmVyID8gTWF0aC5tYXgoY2Uuc2Nyb2xsSGVpZ2h0LGNlLm9mZnNldEhlaWdodCkgOiBjZS5vZmZzZXRIZWlnaHQpIC0gKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCkgfHwgMCkgLSAocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wCgkJCV07CgkJfQoKCX0sCgoJX2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbihkLCBwb3MpIHsKCgkJaWYoIXBvcykgewoJCQlwb3MgPSB0aGlzLnBvc2l0aW9uOwoJCX0KCQl2YXIgbW9kID0gZCA9PT0gImFic29sdXRlIiA/IDEgOiAtMSwKCQkJc2Nyb2xsID0gdGhpcy5jc3NQb3NpdGlvbiA9PT0gImFic29sdXRlIiAmJiAhKHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9PSBkb2N1bWVudCAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpID8gdGhpcy5vZmZzZXRQYXJlbnQgOiB0aGlzLnNjcm9sbFBhcmVudCwKCQkJc2Nyb2xsSXNSb290Tm9kZSA9ICgvKGh0bWx8Ym9keSkvaSkudGVzdChzY3JvbGxbMF0udGFnTmFtZSk7CgoJCXJldHVybiB7CgkJCXRvcDogKAoJCQkJcG9zLnRvcAkrCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wICogbW9kICsJCQkJCQkJCQkJLy8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50CgkJCQl0aGlzLm9mZnNldC5wYXJlbnQudG9wICogbW9kIC0JCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQkoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gImZpeGVkIiA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6ICggc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsVG9wKCkgKSApICogbW9kKQoJCQkpLAoJCQlsZWZ0OiAoCgkJCQlwb3MubGVmdCArCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAqIG1vZCArCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKiBtb2QJLQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJKCAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkgKiBtb2QpCgkJCSkKCQl9OwoKCX0sCgoJX2dlbmVyYXRlUG9zaXRpb246IGZ1bmN0aW9uKGV2ZW50KSB7CgoJCXZhciB0b3AsIGxlZnQsCgkJCW8gPSB0aGlzLm9wdGlvbnMsCgkJCXBhZ2VYID0gZXZlbnQucGFnZVgsCgkJCXBhZ2VZID0gZXZlbnQucGFnZVksCgkJCXNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT09ICJhYnNvbHV0ZSIgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPT0gZG9jdW1lbnQgJiYgJC5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSwgdGhpcy5vZmZzZXRQYXJlbnRbMF0pKSA/IHRoaXMub2Zmc2V0UGFyZW50IDogdGhpcy5zY3JvbGxQYXJlbnQsIHNjcm9sbElzUm9vdE5vZGUgPSAoLyhodG1sfGJvZHkpL2kpLnRlc3Qoc2Nyb2xsWzBdLnRhZ05hbWUpOwoKCQkvLyBUaGlzIGlzIGFub3RoZXIgdmVyeSB3ZWlyZCBzcGVjaWFsIGNhc2UgdGhhdCBvbmx5IGhhcHBlbnMgZm9yIHJlbGF0aXZlIGVsZW1lbnRzOgoJCS8vIDEuIElmIHRoZSBjc3MgcG9zaXRpb24gaXMgcmVsYXRpdmUKCQkvLyAyLiBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXMgdGhlIGRvY3VtZW50IG9yIHNpbWlsYXIgdG8gdGhlIG9mZnNldCBwYXJlbnQKCQkvLyB3ZSBoYXZlIHRvIHJlZnJlc2ggdGhlIHJlbGF0aXZlIG9mZnNldCBkdXJpbmcgdGhlIHNjcm9sbCBzbyB0aGVyZSBhcmUgbm8ganVtcHMKCQlpZih0aGlzLmNzc1Bvc2l0aW9uID09PSAicmVsYXRpdmUiICYmICEodGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9PSB0aGlzLm9mZnNldFBhcmVudFswXSkpIHsKCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUgPSB0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpOwoJCX0KCgkJLyoKCQkgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtCgkJICogQ29uc3RyYWluIHRoZSBwb3NpdGlvbiB0byBhIG1peCBvZiBncmlkLCBjb250YWlubWVudC4KCQkgKi8KCgkJaWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKSB7IC8vSWYgd2UgYXJlIG5vdCBkcmFnZ2luZyB5ZXQsIHdlIHdvbid0IGNoZWNrIGZvciBvcHRpb25zCgoJCQlpZih0aGlzLmNvbnRhaW5tZW50KSB7CgkJCQlpZihldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPCB0aGlzLmNvbnRhaW5tZW50WzBdKSB7CgkJCQkJcGFnZVggPSB0aGlzLmNvbnRhaW5tZW50WzBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDsKCQkJCX0KCQkJCWlmKGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDwgdGhpcy5jb250YWlubWVudFsxXSkgewoJCQkJCXBhZ2VZID0gdGhpcy5jb250YWlubWVudFsxXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDsKCQkJCX0KCQkJCWlmKGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA+IHRoaXMuY29udGFpbm1lbnRbMl0pIHsKCQkJCQlwYWdlWCA9IHRoaXMuY29udGFpbm1lbnRbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0OwoJCQkJfQoJCQkJaWYoZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPiB0aGlzLmNvbnRhaW5tZW50WzNdKSB7CgkJCQkJcGFnZVkgPSB0aGlzLmNvbnRhaW5tZW50WzNdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wOwoJCQkJfQoJCQl9CgoJCQlpZihvLmdyaWQpIHsKCQkJCXRvcCA9IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoKHBhZ2VZIC0gdGhpcy5vcmlnaW5hbFBhZ2VZKSAvIG8uZ3JpZFsxXSkgKiBvLmdyaWRbMV07CgkJCQlwYWdlWSA9IHRoaXMuY29udGFpbm1lbnQgPyAoICh0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPj0gdGhpcy5jb250YWlubWVudFsxXSAmJiB0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPD0gdGhpcy5jb250YWlubWVudFszXSkgPyB0b3AgOiAoKHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSB0aGlzLmNvbnRhaW5tZW50WzFdKSA/IHRvcCAtIG8uZ3JpZFsxXSA6IHRvcCArIG8uZ3JpZFsxXSkpIDogdG9wOwoKCQkJCWxlZnQgPSB0aGlzLm9yaWdpbmFsUGFnZVggKyBNYXRoLnJvdW5kKChwYWdlWCAtIHRoaXMub3JpZ2luYWxQYWdlWCkgLyBvLmdyaWRbMF0pICogby5ncmlkWzBdOwoJCQkJcGFnZVggPSB0aGlzLmNvbnRhaW5tZW50ID8gKCAobGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPj0gdGhpcy5jb250YWlubWVudFswXSAmJiBsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8PSB0aGlzLmNvbnRhaW5tZW50WzJdKSA/IGxlZnQgOiAoKGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IHRoaXMuY29udGFpbm1lbnRbMF0pID8gbGVmdCAtIG8uZ3JpZFswXSA6IGxlZnQgKyBvLmdyaWRbMF0pKSA6IGxlZnQ7CgkJCX0KCgkJfQoKCQlyZXR1cm4gewoJCQl0b3A6ICgKCQkJCXBhZ2VZIC0JCQkJCQkJCQkJCQkJCQkJLy8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uCgkJCQl0aGlzLm9mZnNldC5jbGljay50b3AgLQkJCQkJCQkJCQkJCQkvLyBDbGljayBvZmZzZXQgKHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50KQoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wCS0JCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJdGhpcy5vZmZzZXQucGFyZW50LnRvcCArCQkJCQkJCQkJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikKCQkJCSggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSAiZml4ZWQiID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkpCgkJCSksCgkJCWxlZnQ6ICgKCQkJCXBhZ2VYIC0JCQkJCQkJCQkJCQkJCQkJLy8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uCgkJCQl0aGlzLm9mZnNldC5jbGljay5sZWZ0IC0JCQkJCQkJCQkJCQkvLyBDbGljayBvZmZzZXQgKHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50KQoJCQkJdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdAktCQkJCQkJCQkJCQkvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnQKCQkJCXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICsJCQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJKCAoIHRoaXMuY3NzUG9zaXRpb24gPT09ICJmaXhlZCIgPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkpCgkJCSkKCQl9OwoKCX0sCgoJX3JlYXJyYW5nZTogZnVuY3Rpb24oZXZlbnQsIGksIGEsIGhhcmRSZWZyZXNoKSB7CgoJCWEgPyBhWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pIDogaS5pdGVtWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMucGxhY2Vob2xkZXJbMF0sICh0aGlzLmRpcmVjdGlvbiA9PT0gImRvd24iID8gaS5pdGVtWzBdIDogaS5pdGVtWzBdLm5leHRTaWJsaW5nKSk7CgoJCS8vVmFyaW91cyB0aGluZ3MgZG9uZSBoZXJlIHRvIGltcHJvdmUgdGhlIHBlcmZvcm1hbmNlOgoJCS8vIDEuIHdlIGNyZWF0ZSBhIHNldFRpbWVvdXQsIHRoYXQgY2FsbHMgcmVmcmVzaFBvc2l0aW9ucwoJCS8vIDIuIG9uIHRoZSBpbnN0YW5jZSwgd2UgaGF2ZSBhIGNvdW50ZXIgdmFyaWFibGUsIHRoYXQgZ2V0J3MgaGlnaGVyIGFmdGVyIGV2ZXJ5IGFwcGVuZAoJCS8vIDMuIG9uIHRoZSBsb2NhbCBzY29wZSwgd2UgY29weSB0aGUgY291bnRlciB2YXJpYWJsZSwgYW5kIGNoZWNrIGluIHRoZSB0aW1lb3V0LCBpZiBpdCdzIHN0aWxsIHRoZSBzYW1lCgkJLy8gNC4gdGhpcyBsZXRzIG9ubHkgdGhlIGxhc3QgYWRkaXRpb24gdG8gdGhlIHRpbWVvdXQgc3RhY2sgdGhyb3VnaAoJCXRoaXMuY291bnRlciA9IHRoaXMuY291bnRlciA/ICsrdGhpcy5jb3VudGVyIDogMTsKCQl2YXIgY291bnRlciA9IHRoaXMuY291bnRlcjsKCgkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCWlmKGNvdW50ZXIgPT09IHRoaXMuY291bnRlcikgewoJCQkJdGhpcy5yZWZyZXNoUG9zaXRpb25zKCFoYXJkUmVmcmVzaCk7IC8vUHJlY29tcHV0ZSBhZnRlciBlYWNoIERPTSBpbnNlcnRpb24sIE5PVCBvbiBtb3VzZW1vdmUKCQkJfQoJCX0pOwoKCX0sCgoJX2NsZWFyOiBmdW5jdGlvbihldmVudCwgbm9Qcm9wYWdhdGlvbikgewoKCQl0aGlzLnJldmVydGluZyA9IGZhbHNlOwoJCS8vIFdlIGRlbGF5IGFsbCBldmVudHMgdGhhdCBoYXZlIHRvIGJlIHRyaWdnZXJlZCB0byBhZnRlciB0aGUgcG9pbnQgd2hlcmUgdGhlIHBsYWNlaG9sZGVyIGhhcyBiZWVuIHJlbW92ZWQgYW5kCgkJLy8gZXZlcnl0aGluZyBlbHNlIG5vcm1hbGl6ZWQgYWdhaW4KCQl2YXIgaSwKCQkJZGVsYXllZFRyaWdnZXJzID0gW107CgoJCS8vIFdlIGZpcnN0IGhhdmUgdG8gdXBkYXRlIHRoZSBkb20gcG9zaXRpb24gb2YgdGhlIGFjdHVhbCBjdXJyZW50SXRlbQoJCS8vIE5vdGU6IGRvbid0IGRvIGl0IGlmIHRoZSBjdXJyZW50IGl0ZW0gaXMgYWxyZWFkeSByZW1vdmVkIChieSBhIHVzZXIpLCBvciBpdCBnZXRzIHJlYXBwZW5kZWQgKHNlZSAjNDA4OCkKCQlpZighdGhpcy5fbm9GaW5hbFNvcnQgJiYgdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5sZW5ndGgpIHsKCQkJdGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5jdXJyZW50SXRlbSk7CgkJfQoJCXRoaXMuX25vRmluYWxTb3J0ID0gbnVsbDsKCgkJaWYodGhpcy5oZWxwZXJbMF0gPT09IHRoaXMuY3VycmVudEl0ZW1bMF0pIHsKCQkJZm9yKGkgaW4gdGhpcy5fc3RvcmVkQ1NTKSB7CgkJCQlpZih0aGlzLl9zdG9yZWRDU1NbaV0gPT09ICJhdXRvIiB8fCB0aGlzLl9zdG9yZWRDU1NbaV0gPT09ICJzdGF0aWMiKSB7CgkJCQkJdGhpcy5fc3RvcmVkQ1NTW2ldID0gIiI7CgkJCQl9CgkJCX0KCQkJdGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7CgkJfSBlbHNlIHsKCQkJdGhpcy5jdXJyZW50SXRlbS5zaG93KCk7CgkJfQoKCQlpZih0aGlzLmZyb21PdXRzaWRlICYmICFub1Byb3BhZ2F0aW9uKSB7CgkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKGZ1bmN0aW9uKGV2ZW50KSB7IHRoaXMuX3RyaWdnZXIoInJlY2VpdmUiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKTsgfSk7CgkJfQoJCWlmKCh0aGlzLmZyb21PdXRzaWRlIHx8IHRoaXMuZG9tUG9zaXRpb24ucHJldiAhPT0gdGhpcy5jdXJyZW50SXRlbS5wcmV2KCkubm90KCIudWktc29ydGFibGUtaGVscGVyIilbMF0gfHwgdGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQgIT09IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF0pICYmICFub1Byb3BhZ2F0aW9uKSB7CgkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKGZ1bmN0aW9uKGV2ZW50KSB7IHRoaXMuX3RyaWdnZXIoInVwZGF0ZSIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7IH0pOyAvL1RyaWdnZXIgdXBkYXRlIGNhbGxiYWNrIGlmIHRoZSBET00gcG9zaXRpb24gaGFzIGNoYW5nZWQKCQl9CgoJCS8vIENoZWNrIGlmIHRoZSBpdGVtcyBDb250YWluZXIgaGFzIENoYW5nZWQgYW5kIHRyaWdnZXIgYXBwcm9wcmlhdGUKCQkvLyBldmVudHMuCgkJaWYgKHRoaXMgIT09IHRoaXMuY3VycmVudENvbnRhaW5lcikgewoJCQlpZighbm9Qcm9wYWdhdGlvbikgewoJCQkJZGVsYXllZFRyaWdnZXJzLnB1c2goZnVuY3Rpb24oZXZlbnQpIHsgdGhpcy5fdHJpZ2dlcigicmVtb3ZlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTsgfSk7CgkJCQlkZWxheWVkVHJpZ2dlcnMucHVzaCgoZnVuY3Rpb24oYykgeyByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHsgYy5fdHJpZ2dlcigicmVjZWl2ZSIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOyB9OyAgfSkuY2FsbCh0aGlzLCB0aGlzLmN1cnJlbnRDb250YWluZXIpKTsKCQkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKChmdW5jdGlvbihjKSB7IHJldHVybiBmdW5jdGlvbihldmVudCkgeyBjLl90cmlnZ2VyKCJ1cGRhdGUiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsgIH07IH0pLmNhbGwodGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyKSk7CgkJCX0KCQl9CgoKCQkvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnMKCQlmdW5jdGlvbiBkZWxheUV2ZW50KCB0eXBlLCBpbnN0YW5jZSwgY29udGFpbmVyICkgewoJCQlyZXR1cm4gZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJY29udGFpbmVyLl90cmlnZ2VyKCB0eXBlLCBldmVudCwgaW5zdGFuY2UuX3VpSGFzaCggaW5zdGFuY2UgKSApOwoJCQl9OwoJCX0KCQlmb3IgKGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQlpZiAoIW5vUHJvcGFnYXRpb24pIHsKCQkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBkZWxheUV2ZW50KCAiZGVhY3RpdmF0ZSIsIHRoaXMsIHRoaXMuY29udGFpbmVyc1sgaSBdICkgKTsKCQkJfQoJCQlpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlcikgewoJCQkJZGVsYXllZFRyaWdnZXJzLnB1c2goIGRlbGF5RXZlbnQoICJvdXQiLCB0aGlzLCB0aGlzLmNvbnRhaW5lcnNbIGkgXSApICk7CgkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7CgkJCX0KCQl9CgoJCS8vRG8gd2hhdCB3YXMgb3JpZ2luYWxseSBpbiBwbHVnaW5zCgkJaWYgKCB0aGlzLnN0b3JlZEN1cnNvciApIHsKCQkJdGhpcy5kb2N1bWVudC5maW5kKCAiYm9keSIgKS5jc3MoICJjdXJzb3IiLCB0aGlzLnN0b3JlZEN1cnNvciApOwoJCQl0aGlzLnN0b3JlZFN0eWxlc2hlZXQucmVtb3ZlKCk7CgkJfQoJCWlmKHRoaXMuX3N0b3JlZE9wYWNpdHkpIHsKCQkJdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5IiwgdGhpcy5fc3RvcmVkT3BhY2l0eSk7CgkJfQoJCWlmKHRoaXMuX3N0b3JlZFpJbmRleCkgewoJCQl0aGlzLmhlbHBlci5jc3MoInpJbmRleCIsIHRoaXMuX3N0b3JlZFpJbmRleCA9PT0gImF1dG8iID8gIiIgOiB0aGlzLl9zdG9yZWRaSW5kZXgpOwoJCX0KCgkJdGhpcy5kcmFnZ2luZyA9IGZhbHNlOwoJCWlmKHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCkgewoJCQlpZighbm9Qcm9wYWdhdGlvbikgewoJCQkJdGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgkJCQlmb3IgKGk9MDsgaSA8IGRlbGF5ZWRUcmlnZ2Vycy5sZW5ndGg7IGkrKykgewoJCQkJCWRlbGF5ZWRUcmlnZ2Vyc1tpXS5jYWxsKHRoaXMsIGV2ZW50KTsKCQkJCX0gLy9UcmlnZ2VyIGFsbCBkZWxheWVkIGV2ZW50cwoJCQkJdGhpcy5fdHJpZ2dlcigic3RvcCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgkJCX0KCgkJCXRoaXMuZnJvbU91dHNpZGUgPSBmYWxzZTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYoIW5vUHJvcGFnYXRpb24pIHsKCQkJdGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgkJfQoKCQkvLyQodGhpcy5wbGFjZWhvbGRlclswXSkucmVtb3ZlKCk7IHdvdWxkIGhhdmUgYmVlbiB0aGUgalF1ZXJ5IHdheSAtIHVuZm9ydHVuYXRlbHksIGl0IHVuYmluZHMgQUxMIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIQoJCXRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKTsKCgkJaWYodGhpcy5oZWxwZXJbMF0gIT09IHRoaXMuY3VycmVudEl0ZW1bMF0pIHsKCQkJdGhpcy5oZWxwZXIucmVtb3ZlKCk7CgkJfQoJCXRoaXMuaGVscGVyID0gbnVsbDsKCgkJaWYoIW5vUHJvcGFnYXRpb24pIHsKCQkJZm9yIChpPTA7IGkgPCBkZWxheWVkVHJpZ2dlcnMubGVuZ3RoOyBpKyspIHsKCQkJCWRlbGF5ZWRUcmlnZ2Vyc1tpXS5jYWxsKHRoaXMsIGV2ZW50KTsKCQkJfSAvL1RyaWdnZXIgYWxsIGRlbGF5ZWQgZXZlbnRzCgkJCXRoaXMuX3RyaWdnZXIoInN0b3AiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoJCX0KCgkJdGhpcy5mcm9tT3V0c2lkZSA9IGZhbHNlOwoJCXJldHVybiB0cnVlOwoKCX0sCgoJX3RyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCWlmICgkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA9PT0gZmFsc2UpIHsKCQkJdGhpcy5jYW5jZWwoKTsKCQl9Cgl9LAoKCV91aUhhc2g6IGZ1bmN0aW9uKF9pbnN0KSB7CgkJdmFyIGluc3QgPSBfaW5zdCB8fCB0aGlzOwoJCXJldHVybiB7CgkJCWhlbHBlcjogaW5zdC5oZWxwZXIsCgkJCXBsYWNlaG9sZGVyOiBpbnN0LnBsYWNlaG9sZGVyIHx8ICQoW10pLAoJCQlwb3NpdGlvbjogaW5zdC5wb3NpdGlvbiwKCQkJb3JpZ2luYWxQb3NpdGlvbjogaW5zdC5vcmlnaW5hbFBvc2l0aW9uLAoJCQlvZmZzZXQ6IGluc3QucG9zaXRpb25BYnMsCgkJCWl0ZW06IGluc3QuY3VycmVudEl0ZW0sCgkJCXNlbmRlcjogX2luc3QgPyBfaW5zdC5lbGVtZW50IDogbnVsbAoJCX07Cgl9Cgp9KTsKCgovKiEKICogalF1ZXJ5IFVJIFNwaW5uZXIgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc3Bpbm5lci8KICovCgoKZnVuY3Rpb24gc3Bpbm5lcl9tb2RpZmllciggZm4gKSB7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJdmFyIHByZXZpb3VzID0gdGhpcy5lbGVtZW50LnZhbCgpOwoJCWZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl0aGlzLl9yZWZyZXNoKCk7CgkJaWYgKCBwcmV2aW91cyAhPT0gdGhpcy5lbGVtZW50LnZhbCgpICkgewoJCQl0aGlzLl90cmlnZ2VyKCAiY2hhbmdlIiApOwoJCX0KCX07Cn0KCnZhciBzcGlubmVyID0gJC53aWRnZXQoICJ1aS5zcGlubmVyIiwgewoJdmVyc2lvbjogIjEuMTEuMSIsCglkZWZhdWx0RWxlbWVudDogIjxpbnB1dD4iLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICJzcGluIiwKCW9wdGlvbnM6IHsKCQljdWx0dXJlOiBudWxsLAoJCWljb25zOiB7CgkJCWRvd246ICJ1aS1pY29uLXRyaWFuZ2xlLTEtcyIsCgkJCXVwOiAidWktaWNvbi10cmlhbmdsZS0xLW4iCgkJfSwKCQlpbmNyZW1lbnRhbDogdHJ1ZSwKCQltYXg6IG51bGwsCgkJbWluOiBudWxsLAoJCW51bWJlckZvcm1hdDogbnVsbCwKCQlwYWdlOiAxMCwKCQlzdGVwOiAxLAoKCQljaGFuZ2U6IG51bGwsCgkJc3BpbjogbnVsbCwKCQlzdGFydDogbnVsbCwKCQlzdG9wOiBudWxsCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCS8vIGhhbmRsZSBzdHJpbmcgdmFsdWVzIHRoYXQgbmVlZCB0byBiZSBwYXJzZWQKCQl0aGlzLl9zZXRPcHRpb24oICJtYXgiLCB0aGlzLm9wdGlvbnMubWF4ICk7CgkJdGhpcy5fc2V0T3B0aW9uKCAibWluIiwgdGhpcy5vcHRpb25zLm1pbiApOwoJCXRoaXMuX3NldE9wdGlvbiggInN0ZXAiLCB0aGlzLm9wdGlvbnMuc3RlcCApOwoKCQkvLyBPbmx5IGZvcm1hdCBpZiB0aGVyZSBpcyBhIHZhbHVlLCBwcmV2ZW50cyB0aGUgZmllbGQgZnJvbSBiZWluZyBtYXJrZWQKCQkvLyBhcyBpbnZhbGlkIGluIEZpcmVmb3gsIHNlZSAjOTU3My4KCQlpZiAoIHRoaXMudmFsdWUoKSAhPT0gIiIgKSB7CgkJCS8vIEZvcm1hdCB0aGUgdmFsdWUsIGJ1dCBkb24ndCBjb25zdHJhaW4uCgkJCXRoaXMuX3ZhbHVlKCB0aGlzLmVsZW1lbnQudmFsKCksIHRydWUgKTsKCQl9CgoJCXRoaXMuX2RyYXcoKTsKCQl0aGlzLl9vbiggdGhpcy5fZXZlbnRzICk7CgkJdGhpcy5fcmVmcmVzaCgpOwoKCQkvLyB0dXJuaW5nIG9mZiBhdXRvY29tcGxldGUgcHJldmVudHMgdGhlIGJyb3dzZXIgZnJvbSByZW1lbWJlcmluZyB0aGUKCQkvLyB2YWx1ZSB3aGVuIG5hdmlnYXRpbmcgdGhyb3VnaCBoaXN0b3J5LCBzbyB3ZSByZS1lbmFibGUgYXV0b2NvbXBsZXRlCgkJLy8gaWYgdGhlIHBhZ2UgaXMgdW5sb2FkZWQgYmVmb3JlIHRoZSB3aWRnZXQgaXMgZGVzdHJveWVkLiAjNzc5MAoJCXRoaXMuX29uKCB0aGlzLndpbmRvdywgewoJCQliZWZvcmV1bmxvYWQ6IGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoICJhdXRvY29tcGxldGUiICk7CgkJCX0KCQl9KTsKCX0sCgoJX2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uKCkgewoJCXZhciBvcHRpb25zID0ge30sCgkJCWVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7CgoJCSQuZWFjaCggWyAibWluIiwgIm1heCIsICJzdGVwIiBdLCBmdW5jdGlvbiggaSwgb3B0aW9uICkgewoJCQl2YXIgdmFsdWUgPSBlbGVtZW50LmF0dHIoIG9wdGlvbiApOwoJCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUubGVuZ3RoICkgewoJCQkJb3B0aW9uc1sgb3B0aW9uIF0gPSB2YWx1ZTsKCQkJfQoJCX0pOwoKCQlyZXR1cm4gb3B0aW9uczsKCX0sCgoJX2V2ZW50czogewoJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJaWYgKCB0aGlzLl9zdGFydCggZXZlbnQgKSAmJiB0aGlzLl9rZXlkb3duKCBldmVudCApICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0sCgkJa2V5dXA6ICJfc3RvcCIsCgkJZm9jdXM6IGZ1bmN0aW9uKCkgewoJCQl0aGlzLnByZXZpb3VzID0gdGhpcy5lbGVtZW50LnZhbCgpOwoJCX0sCgkJYmx1cjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQlpZiAoIHRoaXMuY2FuY2VsQmx1ciApIHsKCQkJCWRlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXRoaXMuX3N0b3AoKTsKCQkJdGhpcy5fcmVmcmVzaCgpOwoJCQlpZiAoIHRoaXMucHJldmlvdXMgIT09IHRoaXMuZWxlbWVudC52YWwoKSApIHsKCQkJCXRoaXMuX3RyaWdnZXIoICJjaGFuZ2UiLCBldmVudCApOwoJCQl9CgkJfSwKCQltb3VzZXdoZWVsOiBmdW5jdGlvbiggZXZlbnQsIGRlbHRhICkgewoJCQlpZiAoICFkZWx0YSApIHsKCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoICF0aGlzLnNwaW5uaW5nICYmICF0aGlzLl9zdGFydCggZXZlbnQgKSApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJdGhpcy5fc3BpbiggKGRlbHRhID4gMCA/IDEgOiAtMSkgKiB0aGlzLm9wdGlvbnMuc3RlcCwgZXZlbnQgKTsKCQkJY2xlYXJUaW1lb3V0KCB0aGlzLm1vdXNld2hlZWxUaW1lciApOwoJCQl0aGlzLm1vdXNld2hlZWxUaW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJaWYgKCB0aGlzLnNwaW5uaW5nICkgewoJCQkJCXRoaXMuX3N0b3AoIGV2ZW50ICk7CgkJCQl9CgkJCX0sIDEwMCApOwoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0sCgkJIm1vdXNlZG93biAudWktc3Bpbm5lci1idXR0b24iOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCXZhciBwcmV2aW91czsKCgkJCS8vIFdlIG5ldmVyIHdhbnQgdGhlIGJ1dHRvbnMgdG8gaGF2ZSBmb2N1czsgd2hlbmV2ZXIgdGhlIHVzZXIgaXMKCQkJLy8gaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc3Bpbm5lciwgdGhlIGZvY3VzIHNob3VsZCBiZSBvbiB0aGUgaW5wdXQuCgkJCS8vIElmIHRoZSBpbnB1dCBpcyBmb2N1c2VkIHRoZW4gdGhpcy5wcmV2aW91cyBpcyBwcm9wZXJseSBzZXQgZnJvbQoJCQkvLyB3aGVuIHRoZSBpbnB1dCBmaXJzdCByZWNlaXZlZCBmb2N1cy4gSWYgdGhlIGlucHV0IGlzIG5vdCBmb2N1c2VkCgkJCS8vIHRoZW4gd2UgbmVlZCB0byBzZXQgdGhpcy5wcmV2aW91cyBiYXNlZCBvbiB0aGUgdmFsdWUgYmVmb3JlIHNwaW5uaW5nLgoJCQlwcmV2aW91cyA9IHRoaXMuZWxlbWVudFswXSA9PT0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ID8KCQkJCXRoaXMucHJldmlvdXMgOiB0aGlzLmVsZW1lbnQudmFsKCk7CgkJCWZ1bmN0aW9uIGNoZWNrRm9jdXMoKSB7CgkJCQl2YXIgaXNBY3RpdmUgPSB0aGlzLmVsZW1lbnRbMF0gPT09IHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudDsKCQkJCWlmICggIWlzQWN0aXZlICkgewoJCQkJCXRoaXMuZWxlbWVudC5mb2N1cygpOwoJCQkJCXRoaXMucHJldmlvdXMgPSBwcmV2aW91czsKCQkJCQkvLyBzdXBwb3J0OiBJRQoJCQkJCS8vIElFIHNldHMgZm9jdXMgYXN5bmNocm9ub3VzbHksIHNvIHdlIG5lZWQgdG8gY2hlY2sgaWYgZm9jdXMKCQkJCQkvLyBtb3ZlZCBvZmYgb2YgdGhlIGlucHV0IGJlY2F1c2UgdGhlIHVzZXIgY2xpY2tlZCBvbiB0aGUgYnV0dG9uLgoJCQkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJCQl0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJCS8vIGVuc3VyZSBmb2N1cyBpcyBvbiAob3Igc3RheXMgb24pIHRoZSB0ZXh0IGZpZWxkCgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCWNoZWNrRm9jdXMuY2FsbCggdGhpcyApOwoKCQkJLy8gc3VwcG9ydDogSUUKCQkJLy8gSUUgZG9lc24ndCBwcmV2ZW50IG1vdmluZyBmb2N1cyBldmVuIHdpdGggZXZlbnQucHJldmVudERlZmF1bHQoKQoJCQkvLyBzbyB3ZSBzZXQgYSBmbGFnIHRvIGtub3cgd2hlbiB3ZSBzaG91bGQgaWdub3JlIHRoZSBibHVyIGV2ZW50CgkJCS8vIGFuZCBjaGVjayAoYWdhaW4pIGlmIGZvY3VzIG1vdmVkIG9mZiBvZiB0aGUgaW5wdXQuCgkJCXRoaXMuY2FuY2VsQmx1ciA9IHRydWU7CgkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJZGVsZXRlIHRoaXMuY2FuY2VsQmx1cjsKCQkJCWNoZWNrRm9jdXMuY2FsbCggdGhpcyApOwoJCQl9KTsKCgkJCWlmICggdGhpcy5fc3RhcnQoIGV2ZW50ICkgPT09IGZhbHNlICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQl0aGlzLl9yZXBlYXQoIG51bGwsICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5oYXNDbGFzcyggInVpLXNwaW5uZXItdXAiICkgPyAxIDogLTEsIGV2ZW50ICk7CgkJfSwKCQkibW91c2V1cCAudWktc3Bpbm5lci1idXR0b24iOiAiX3N0b3AiLAoJCSJtb3VzZWVudGVyIC51aS1zcGlubmVyLWJ1dHRvbiI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJLy8gYnV0dG9uIHdpbGwgYWRkIHVpLXN0YXRlLWFjdGl2ZSBpZiBtb3VzZSB3YXMgZG93biB3aGlsZSBtb3VzZWxlYXZlIGFuZCBrZXB0IGRvd24KCQkJaWYgKCAhJCggZXZlbnQuY3VycmVudFRhcmdldCApLmhhc0NsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQlpZiAoIHRoaXMuX3N0YXJ0KCBldmVudCApID09PSBmYWxzZSApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQl0aGlzLl9yZXBlYXQoIG51bGwsICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5oYXNDbGFzcyggInVpLXNwaW5uZXItdXAiICkgPyAxIDogLTEsIGV2ZW50ICk7CgkJfSwKCQkvLyBUT0RPOiBkbyB3ZSByZWFsbHkgd2FudCB0byBjb25zaWRlciB0aGlzIGEgc3RvcD8KCQkvLyBzaG91bGRuJ3Qgd2UganVzdCBzdG9wIHRoZSByZXBlYXRlciBhbmQgd2FpdCB1bnRpbCBtb3VzZXVwIGJlZm9yZQoJCS8vIHdlIHRyaWdnZXIgdGhlIHN0b3AgZXZlbnQ/CgkJIm1vdXNlbGVhdmUgLnVpLXNwaW5uZXItYnV0dG9uIjogIl9zdG9wIgoJfSwKCglfZHJhdzogZnVuY3Rpb24oKSB7CgkJdmFyIHVpU3Bpbm5lciA9IHRoaXMudWlTcGlubmVyID0gdGhpcy5lbGVtZW50CgkJCS5hZGRDbGFzcyggInVpLXNwaW5uZXItaW5wdXQiICkKCQkJLmF0dHIoICJhdXRvY29tcGxldGUiLCAib2ZmIiApCgkJCS53cmFwKCB0aGlzLl91aVNwaW5uZXJIdG1sKCkgKQoJCQkucGFyZW50KCkKCQkJCS8vIGFkZCBidXR0b25zCgkJCQkuYXBwZW5kKCB0aGlzLl9idXR0b25IdG1sKCkgKTsKCgkJdGhpcy5lbGVtZW50LmF0dHIoICJyb2xlIiwgInNwaW5idXR0b24iICk7CgoJCS8vIGJ1dHRvbiBiaW5kaW5ncwoJCXRoaXMuYnV0dG9ucyA9IHVpU3Bpbm5lci5maW5kKCAiLnVpLXNwaW5uZXItYnV0dG9uIiApCgkJCS5hdHRyKCAidGFiSW5kZXgiLCAtMSApCgkJCS5idXR0b24oKQoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIiApOwoKCQkvLyBJRSA2IGRvZXNuJ3QgdW5kZXJzdGFuZCBoZWlnaHQ6IDUwJSBmb3IgdGhlIGJ1dHRvbnMKCQkvLyB1bmxlc3MgdGhlIHdyYXBwZXIgaGFzIGFuIGV4cGxpY2l0IGhlaWdodAoJCWlmICggdGhpcy5idXR0b25zLmhlaWdodCgpID4gTWF0aC5jZWlsKCB1aVNwaW5uZXIuaGVpZ2h0KCkgKiAwLjUgKSAmJgoJCQkJdWlTcGlubmVyLmhlaWdodCgpID4gMCApIHsKCQkJdWlTcGlubmVyLmhlaWdodCggdWlTcGlubmVyLmhlaWdodCgpICk7CgkJfQoKCQkvLyBkaXNhYmxlIHNwaW5uZXIgaWYgZWxlbWVudCB3YXMgYWxyZWFkeSBkaXNhYmxlZAoJCWlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkgewoJCQl0aGlzLmRpc2FibGUoKTsKCQl9Cgl9LAoKCV9rZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCWtleUNvZGUgPSAkLnVpLmtleUNvZGU7CgoJCXN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7CgkJY2FzZSBrZXlDb2RlLlVQOgoJCQl0aGlzLl9yZXBlYXQoIG51bGwsIDEsIGV2ZW50ICk7CgkJCXJldHVybiB0cnVlOwoJCWNhc2Uga2V5Q29kZS5ET1dOOgoJCQl0aGlzLl9yZXBlYXQoIG51bGwsIC0xLCBldmVudCApOwoJCQlyZXR1cm4gdHJ1ZTsKCQljYXNlIGtleUNvZGUuUEFHRV9VUDoKCQkJdGhpcy5fcmVwZWF0KCBudWxsLCBvcHRpb25zLnBhZ2UsIGV2ZW50ICk7CgkJCXJldHVybiB0cnVlOwoJCWNhc2Uga2V5Q29kZS5QQUdFX0RPV046CgkJCXRoaXMuX3JlcGVhdCggbnVsbCwgLW9wdGlvbnMucGFnZSwgZXZlbnQgKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV91aVNwaW5uZXJIdG1sOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gIjxzcGFuIGNsYXNzPSd1aS1zcGlubmVyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsJz48L3NwYW4+IjsKCX0sCgoJX2J1dHRvbkh0bWw6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAiIiArCgkJCSI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci11cCB1aS1jb3JuZXItdHInPiIgKwoJCQkJIjxzcGFuIGNsYXNzPSd1aS1pY29uICIgKyB0aGlzLm9wdGlvbnMuaWNvbnMudXAgKyAiJz4mIzk2NTA7PC9zcGFuPiIgKwoJCQkiPC9hPiIgKwoJCQkiPGEgY2xhc3M9J3VpLXNwaW5uZXItYnV0dG9uIHVpLXNwaW5uZXItZG93biB1aS1jb3JuZXItYnInPiIgKwoJCQkJIjxzcGFuIGNsYXNzPSd1aS1pY29uICIgKyB0aGlzLm9wdGlvbnMuaWNvbnMuZG93biArICInPiYjOTY2MDs8L3NwYW4+IiArCgkJCSI8L2E+IjsKCX0sCgoJX3N0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5zcGlubmluZyAmJiB0aGlzLl90cmlnZ2VyKCAic3RhcnQiLCBldmVudCApID09PSBmYWxzZSApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKCAhdGhpcy5jb3VudGVyICkgewoJCQl0aGlzLmNvdW50ZXIgPSAxOwoJCX0KCQl0aGlzLnNwaW5uaW5nID0gdHJ1ZTsKCQlyZXR1cm4gdHJ1ZTsKCX0sCgoJX3JlcGVhdDogZnVuY3Rpb24oIGksIHN0ZXBzLCBldmVudCApIHsKCQlpID0gaSB8fCA1MDA7CgoJCWNsZWFyVGltZW91dCggdGhpcy50aW1lciApOwoJCXRoaXMudGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJdGhpcy5fcmVwZWF0KCA0MCwgc3RlcHMsIGV2ZW50ICk7CgkJfSwgaSApOwoKCQl0aGlzLl9zcGluKCBzdGVwcyAqIHRoaXMub3B0aW9ucy5zdGVwLCBldmVudCApOwoJfSwKCglfc3BpbjogZnVuY3Rpb24oIHN0ZXAsIGV2ZW50ICkgewoJCXZhciB2YWx1ZSA9IHRoaXMudmFsdWUoKSB8fCAwOwoKCQlpZiAoICF0aGlzLmNvdW50ZXIgKSB7CgkJCXRoaXMuY291bnRlciA9IDE7CgkJfQoKCQl2YWx1ZSA9IHRoaXMuX2FkanVzdFZhbHVlKCB2YWx1ZSArIHN0ZXAgKiB0aGlzLl9pbmNyZW1lbnQoIHRoaXMuY291bnRlciApICk7CgoJCWlmICggIXRoaXMuc3Bpbm5pbmcgfHwgdGhpcy5fdHJpZ2dlciggInNwaW4iLCBldmVudCwgeyB2YWx1ZTogdmFsdWUgfSApICE9PSBmYWxzZSkgewoJCQl0aGlzLl92YWx1ZSggdmFsdWUgKTsKCQkJdGhpcy5jb3VudGVyKys7CgkJfQoJfSwKCglfaW5jcmVtZW50OiBmdW5jdGlvbiggaSApIHsKCQl2YXIgaW5jcmVtZW50YWwgPSB0aGlzLm9wdGlvbnMuaW5jcmVtZW50YWw7CgoJCWlmICggaW5jcmVtZW50YWwgKSB7CgkJCXJldHVybiAkLmlzRnVuY3Rpb24oIGluY3JlbWVudGFsICkgPwoJCQkJaW5jcmVtZW50YWwoIGkgKSA6CgkJCQlNYXRoLmZsb29yKCBpICogaSAqIGkgLyA1MDAwMCAtIGkgKiBpIC8gNTAwICsgMTcgKiBpIC8gMjAwICsgMSApOwoJCX0KCgkJcmV0dXJuIDE7Cgl9LAoKCV9wcmVjaXNpb246IGZ1bmN0aW9uKCkgewoJCXZhciBwcmVjaXNpb24gPSB0aGlzLl9wcmVjaXNpb25PZiggdGhpcy5vcHRpb25zLnN0ZXAgKTsKCQlpZiAoIHRoaXMub3B0aW9ucy5taW4gIT09IG51bGwgKSB7CgkJCXByZWNpc2lvbiA9IE1hdGgubWF4KCBwcmVjaXNpb24sIHRoaXMuX3ByZWNpc2lvbk9mKCB0aGlzLm9wdGlvbnMubWluICkgKTsKCQl9CgkJcmV0dXJuIHByZWNpc2lvbjsKCX0sCgoJX3ByZWNpc2lvbk9mOiBmdW5jdGlvbiggbnVtICkgewoJCXZhciBzdHIgPSBudW0udG9TdHJpbmcoKSwKCQkJZGVjaW1hbCA9IHN0ci5pbmRleE9mKCAiLiIgKTsKCQlyZXR1cm4gZGVjaW1hbCA9PT0gLTEgPyAwIDogc3RyLmxlbmd0aCAtIGRlY2ltYWwgLSAxOwoJfSwKCglfYWRqdXN0VmFsdWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl2YXIgYmFzZSwgYWJvdmVNaW4sCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgoJCS8vIG1ha2Ugc3VyZSB3ZSdyZSBhdCBhIHZhbGlkIHN0ZXAKCQkvLyAtIGZpbmQgb3V0IHdoZXJlIHdlIGFyZSByZWxhdGl2ZSB0byB0aGUgYmFzZSAobWluIG9yIDApCgkJYmFzZSA9IG9wdGlvbnMubWluICE9PSBudWxsID8gb3B0aW9ucy5taW4gOiAwOwoJCWFib3ZlTWluID0gdmFsdWUgLSBiYXNlOwoJCS8vIC0gcm91bmQgdG8gdGhlIG5lYXJlc3Qgc3RlcAoJCWFib3ZlTWluID0gTWF0aC5yb3VuZChhYm92ZU1pbiAvIG9wdGlvbnMuc3RlcCkgKiBvcHRpb25zLnN0ZXA7CgkJLy8gLSByb3VuZGluZyBpcyBiYXNlZCBvbiAwLCBzbyBhZGp1c3QgYmFjayB0byBvdXIgYmFzZQoJCXZhbHVlID0gYmFzZSArIGFib3ZlTWluOwoKCQkvLyBmaXggcHJlY2lzaW9uIGZyb20gYmFkIEpTIGZsb2F0aW5nIHBvaW50IG1hdGgKCQl2YWx1ZSA9IHBhcnNlRmxvYXQoIHZhbHVlLnRvRml4ZWQoIHRoaXMuX3ByZWNpc2lvbigpICkgKTsKCgkJLy8gY2xhbXAgdGhlIHZhbHVlCgkJaWYgKCBvcHRpb25zLm1heCAhPT0gbnVsbCAmJiB2YWx1ZSA+IG9wdGlvbnMubWF4KSB7CgkJCXJldHVybiBvcHRpb25zLm1heDsKCQl9CgkJaWYgKCBvcHRpb25zLm1pbiAhPT0gbnVsbCAmJiB2YWx1ZSA8IG9wdGlvbnMubWluICkgewoJCQlyZXR1cm4gb3B0aW9ucy5taW47CgkJfQoKCQlyZXR1cm4gdmFsdWU7Cgl9LAoKCV9zdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5zcGlubmluZyApIHsKCQkJcmV0dXJuOwoJCX0KCgkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJY2xlYXJUaW1lb3V0KCB0aGlzLm1vdXNld2hlZWxUaW1lciApOwoJCXRoaXMuY291bnRlciA9IDA7CgkJdGhpcy5zcGlubmluZyA9IGZhbHNlOwoJCXRoaXMuX3RyaWdnZXIoICJzdG9wIiwgZXZlbnQgKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJaWYgKCBrZXkgPT09ICJjdWx0dXJlIiB8fCBrZXkgPT09ICJudW1iZXJGb3JtYXQiICkgewoJCQl2YXIgcHJldlZhbHVlID0gdGhpcy5fcGFyc2UoIHRoaXMuZWxlbWVudC52YWwoKSApOwoJCQl0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7CgkJCXRoaXMuZWxlbWVudC52YWwoIHRoaXMuX2Zvcm1hdCggcHJldlZhbHVlICkgKTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJtYXgiIHx8IGtleSA9PT0gIm1pbiIgfHwga2V5ID09PSAic3RlcCIgKSB7CgkJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiApIHsKCQkJCXZhbHVlID0gdGhpcy5fcGFyc2UoIHZhbHVlICk7CgkJCX0KCQl9CgkJaWYgKCBrZXkgPT09ICJpY29ucyIgKSB7CgkJCXRoaXMuYnV0dG9ucy5maXJzdCgpLmZpbmQoICIudWktaWNvbiIgKQoJCQkJLnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuaWNvbnMudXAgKQoJCQkJLmFkZENsYXNzKCB2YWx1ZS51cCApOwoJCQl0aGlzLmJ1dHRvbnMubGFzdCgpLmZpbmQoICIudWktaWNvbiIgKQoJCQkJLnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuaWNvbnMuZG93biApCgkJCQkuYWRkQ2xhc3MoIHZhbHVlLmRvd24gKTsKCQl9CgoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7CgoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQl0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiLCAhIXZhbHVlICk7CgkJCXRoaXMuZWxlbWVudC5wcm9wKCAiZGlzYWJsZWQiLCAhIXZhbHVlICk7CgkJCXRoaXMuYnV0dG9ucy5idXR0b24oIHZhbHVlID8gImRpc2FibGUiIDogImVuYWJsZSIgKTsKCQl9Cgl9LAoKCV9zZXRPcHRpb25zOiBzcGlubmVyX21vZGlmaWVyKGZ1bmN0aW9uKCBvcHRpb25zICkgewoJCXRoaXMuX3N1cGVyKCBvcHRpb25zICk7Cgl9KSwKCglfcGFyc2U6IGZ1bmN0aW9uKCB2YWwgKSB7CgkJaWYgKCB0eXBlb2YgdmFsID09PSAic3RyaW5nIiAmJiB2YWwgIT09ICIiICkgewoJCQl2YWwgPSB3aW5kb3cuR2xvYmFsaXplICYmIHRoaXMub3B0aW9ucy5udW1iZXJGb3JtYXQgPwoJCQkJR2xvYmFsaXplLnBhcnNlRmxvYXQoIHZhbCwgMTAsIHRoaXMub3B0aW9ucy5jdWx0dXJlICkgOiArdmFsOwoJCX0KCQlyZXR1cm4gdmFsID09PSAiIiB8fCBpc05hTiggdmFsICkgPyBudWxsIDogdmFsOwoJfSwKCglfZm9ybWF0OiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJaWYgKCB2YWx1ZSA9PT0gIiIgKSB7CgkJCXJldHVybiAiIjsKCQl9CgkJcmV0dXJuIHdpbmRvdy5HbG9iYWxpemUgJiYgdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdCA/CgkJCUdsb2JhbGl6ZS5mb3JtYXQoIHZhbHVlLCB0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LCB0aGlzLm9wdGlvbnMuY3VsdHVyZSApIDoKCQkJdmFsdWU7Cgl9LAoKCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQuYXR0cih7CgkJCSJhcmlhLXZhbHVlbWluIjogdGhpcy5vcHRpb25zLm1pbiwKCQkJImFyaWEtdmFsdWVtYXgiOiB0aGlzLm9wdGlvbnMubWF4LAoJCQkvLyBUT0RPOiB3aGF0IHNob3VsZCB3ZSBkbyB3aXRoIHZhbHVlcyB0aGF0IGNhbid0IGJlIHBhcnNlZD8KCQkJImFyaWEtdmFsdWVub3ciOiB0aGlzLl9wYXJzZSggdGhpcy5lbGVtZW50LnZhbCgpICkKCQl9KTsKCX0sCgoJaXNWYWxpZDogZnVuY3Rpb24oKSB7CgkJdmFyIHZhbHVlID0gdGhpcy52YWx1ZSgpOwoKCQkvLyBudWxsIGlzIGludmFsaWQKCQlpZiAoIHZhbHVlID09PSBudWxsICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQkvLyBpZiB2YWx1ZSBnZXRzIGFkanVzdGVkLCBpdCdzIGludmFsaWQKCQlyZXR1cm4gdmFsdWUgPT09IHRoaXMuX2FkanVzdFZhbHVlKCB2YWx1ZSApOwoJfSwKCgkvLyB1cGRhdGUgdGhlIHZhbHVlIHdpdGhvdXQgdHJpZ2dlcmluZyBjaGFuZ2UKCV92YWx1ZTogZnVuY3Rpb24oIHZhbHVlLCBhbGxvd0FueSApIHsKCQl2YXIgcGFyc2VkOwoJCWlmICggdmFsdWUgIT09ICIiICkgewoJCQlwYXJzZWQgPSB0aGlzLl9wYXJzZSggdmFsdWUgKTsKCQkJaWYgKCBwYXJzZWQgIT09IG51bGwgKSB7CgkJCQlpZiAoICFhbGxvd0FueSApIHsKCQkJCQlwYXJzZWQgPSB0aGlzLl9hZGp1c3RWYWx1ZSggcGFyc2VkICk7CgkJCQl9CgkJCQl2YWx1ZSA9IHRoaXMuX2Zvcm1hdCggcGFyc2VkICk7CgkJCX0KCQl9CgkJdGhpcy5lbGVtZW50LnZhbCggdmFsdWUgKTsKCQl0aGlzLl9yZWZyZXNoKCk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktc3Bpbm5lci1pbnB1dCIgKQoJCQkucHJvcCggImRpc2FibGVkIiwgZmFsc2UgKQoJCQkucmVtb3ZlQXR0ciggImF1dG9jb21wbGV0ZSIgKQoJCQkucmVtb3ZlQXR0ciggInJvbGUiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLXZhbHVlbWluIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS12YWx1ZW1heCIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtdmFsdWVub3ciICk7CgkJdGhpcy51aVNwaW5uZXIucmVwbGFjZVdpdGgoIHRoaXMuZWxlbWVudCApOwoJfSwKCglzdGVwVXA6IHNwaW5uZXJfbW9kaWZpZXIoZnVuY3Rpb24oIHN0ZXBzICkgewoJCXRoaXMuX3N0ZXBVcCggc3RlcHMgKTsKCX0pLAoJX3N0ZXBVcDogZnVuY3Rpb24oIHN0ZXBzICkgewoJCWlmICggdGhpcy5fc3RhcnQoKSApIHsKCQkJdGhpcy5fc3BpbiggKHN0ZXBzIHx8IDEpICogdGhpcy5vcHRpb25zLnN0ZXAgKTsKCQkJdGhpcy5fc3RvcCgpOwoJCX0KCX0sCgoJc3RlcERvd246IHNwaW5uZXJfbW9kaWZpZXIoZnVuY3Rpb24oIHN0ZXBzICkgewoJCXRoaXMuX3N0ZXBEb3duKCBzdGVwcyApOwoJfSksCglfc3RlcERvd246IGZ1bmN0aW9uKCBzdGVwcyApIHsKCQlpZiAoIHRoaXMuX3N0YXJ0KCkgKSB7CgkJCXRoaXMuX3NwaW4oIChzdGVwcyB8fCAxKSAqIC10aGlzLm9wdGlvbnMuc3RlcCApOwoJCQl0aGlzLl9zdG9wKCk7CgkJfQoJfSwKCglwYWdlVXA6IHNwaW5uZXJfbW9kaWZpZXIoZnVuY3Rpb24oIHBhZ2VzICkgewoJCXRoaXMuX3N0ZXBVcCggKHBhZ2VzIHx8IDEpICogdGhpcy5vcHRpb25zLnBhZ2UgKTsKCX0pLAoKCXBhZ2VEb3duOiBzcGlubmVyX21vZGlmaWVyKGZ1bmN0aW9uKCBwYWdlcyApIHsKCQl0aGlzLl9zdGVwRG93biggKHBhZ2VzIHx8IDEpICogdGhpcy5vcHRpb25zLnBhZ2UgKTsKCX0pLAoKCXZhbHVlOiBmdW5jdGlvbiggbmV3VmFsICkgewoJCWlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCXJldHVybiB0aGlzLl9wYXJzZSggdGhpcy5lbGVtZW50LnZhbCgpICk7CgkJfQoJCXNwaW5uZXJfbW9kaWZpZXIoIHRoaXMuX3ZhbHVlICkuY2FsbCggdGhpcywgbmV3VmFsICk7Cgl9LAoKCXdpZGdldDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMudWlTcGlubmVyOwoJfQp9KTsKCgovKiEKICogalF1ZXJ5IFVJIFRhYnMgMS4xMS4xCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20KICoKICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdGFicy8KICovCgoKdmFyIHRhYnMgPSAkLndpZGdldCggInVpLnRhYnMiLCB7Cgl2ZXJzaW9uOiAiMS4xMS4xIiwKCWRlbGF5OiAzMDAsCglvcHRpb25zOiB7CgkJYWN0aXZlOiBudWxsLAoJCWNvbGxhcHNpYmxlOiBmYWxzZSwKCQlldmVudDogImNsaWNrIiwKCQloZWlnaHRTdHlsZTogImNvbnRlbnQiLAoJCWhpZGU6IG51bGwsCgkJc2hvdzogbnVsbCwKCgkJLy8gY2FsbGJhY2tzCgkJYWN0aXZhdGU6IG51bGwsCgkJYmVmb3JlQWN0aXZhdGU6IG51bGwsCgkJYmVmb3JlTG9hZDogbnVsbCwKCQlsb2FkOiBudWxsCgl9LAoKCV9pc0xvY2FsOiAoZnVuY3Rpb24oKSB7CgkJdmFyIHJoYXNoID0gLyMuKiQvOwoKCQlyZXR1cm4gZnVuY3Rpb24oIGFuY2hvciApIHsKCQkJdmFyIGFuY2hvclVybCwgbG9jYXRpb25Vcmw7CgoJCQkvLyBzdXBwb3J0OiBJRTcKCQkJLy8gSUU3IGRvZXNuJ3Qgbm9ybWFsaXplIHRoZSBocmVmIHByb3BlcnR5IHdoZW4gc2V0IHZpYSBzY3JpcHQgKCM5MzE3KQoJCQlhbmNob3IgPSBhbmNob3IuY2xvbmVOb2RlKCBmYWxzZSApOwoKCQkJYW5jaG9yVXJsID0gYW5jaG9yLmhyZWYucmVwbGFjZSggcmhhc2gsICIiICk7CgkJCWxvY2F0aW9uVXJsID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgIiIgKTsKCgkJCS8vIGRlY29kaW5nIG1heSB0aHJvdyBhbiBlcnJvciBpZiB0aGUgVVJMIGlzbid0IFVURi04ICgjOTUxOCkKCQkJdHJ5IHsKCQkJCWFuY2hvclVybCA9IGRlY29kZVVSSUNvbXBvbmVudCggYW5jaG9yVXJsICk7CgkJCX0gY2F0Y2ggKCBlcnJvciApIHt9CgkJCXRyeSB7CgkJCQlsb2NhdGlvblVybCA9IGRlY29kZVVSSUNvbXBvbmVudCggbG9jYXRpb25VcmwgKTsKCQkJfSBjYXRjaCAoIGVycm9yICkge30KCgkJCXJldHVybiBhbmNob3IuaGFzaC5sZW5ndGggPiAxICYmIGFuY2hvclVybCA9PT0gbG9jYXRpb25Vcmw7CgkJfTsKCX0pKCksCgoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQl0aGlzLnJ1bm5pbmcgPSBmYWxzZTsKCgkJdGhpcy5lbGVtZW50CgkJCS5hZGRDbGFzcyggInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLnRvZ2dsZUNsYXNzKCAidWktdGFicy1jb2xsYXBzaWJsZSIsIG9wdGlvbnMuY29sbGFwc2libGUgKTsKCgkJdGhpcy5fcHJvY2Vzc1RhYnMoKTsKCQlvcHRpb25zLmFjdGl2ZSA9IHRoaXMuX2luaXRpYWxBY3RpdmUoKTsKCgkJLy8gVGFrZSBkaXNhYmxpbmcgdGFicyB2aWEgY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTAoJCS8vIGludG8gYWNjb3VudCBhbmQgdXBkYXRlIG9wdGlvbiBwcm9wZXJseS4KCQlpZiAoICQuaXNBcnJheSggb3B0aW9ucy5kaXNhYmxlZCApICkgewoJCQlvcHRpb25zLmRpc2FibGVkID0gJC51bmlxdWUoIG9wdGlvbnMuZGlzYWJsZWQuY29uY2F0KAoJCQkJJC5tYXAoIHRoaXMudGFicy5maWx0ZXIoICIudWktc3RhdGUtZGlzYWJsZWQiICksIGZ1bmN0aW9uKCBsaSApIHsKCQkJCQlyZXR1cm4gdGhhdC50YWJzLmluZGV4KCBsaSApOwoJCQkJfSkKCQkJKSApLnNvcnQoKTsKCQl9CgoJCS8vIGNoZWNrIGZvciBsZW5ndGggYXZvaWRzIGVycm9yIHdoZW4gaW5pdGlhbGl6aW5nIGVtcHR5IGxpc3QKCQlpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7CgkJCXRoaXMuYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggb3B0aW9ucy5hY3RpdmUgKTsKCQl9IGVsc2UgewoJCQl0aGlzLmFjdGl2ZSA9ICQoKTsKCQl9CgoJCXRoaXMuX3JlZnJlc2goKTsKCgkJaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggKSB7CgkJCXRoaXMubG9hZCggb3B0aW9ucy5hY3RpdmUgKTsKCQl9Cgl9LAoKCV9pbml0aWFsQWN0aXZlOiBmdW5jdGlvbigpIHsKCQl2YXIgYWN0aXZlID0gdGhpcy5vcHRpb25zLmFjdGl2ZSwKCQkJY29sbGFwc2libGUgPSB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUsCgkJCWxvY2F0aW9uSGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICk7CgoJCWlmICggYWN0aXZlID09PSBudWxsICkgewoJCQkvLyBjaGVjayB0aGUgZnJhZ21lbnQgaWRlbnRpZmllciBpbiB0aGUgVVJMCgkJCWlmICggbG9jYXRpb25IYXNoICkgewoJCQkJdGhpcy50YWJzLmVhY2goZnVuY3Rpb24oIGksIHRhYiApIHsKCQkJCQlpZiAoICQoIHRhYiApLmF0dHIoICJhcmlhLWNvbnRyb2xzIiApID09PSBsb2NhdGlvbkhhc2ggKSB7CgkJCQkJCWFjdGl2ZSA9IGk7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoKCQkJLy8gY2hlY2sgZm9yIGEgdGFiIG1hcmtlZCBhY3RpdmUgdmlhIGEgY2xhc3MKCQkJaWYgKCBhY3RpdmUgPT09IG51bGwgKSB7CgkJCQlhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5maWx0ZXIoICIudWktdGFicy1hY3RpdmUiICkgKTsKCQkJfQoKCQkJLy8gbm8gYWN0aXZlIHRhYiwgc2V0IHRvIGZhbHNlCgkJCWlmICggYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gLTEgKSB7CgkJCQlhY3RpdmUgPSB0aGlzLnRhYnMubGVuZ3RoID8gMCA6IGZhbHNlOwoJCQl9CgkJfQoKCQkvLyBoYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZQoJCWlmICggYWN0aXZlICE9PSBmYWxzZSApIHsKCQkJYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZXEoIGFjdGl2ZSApICk7CgkJCWlmICggYWN0aXZlID09PSAtMSApIHsKCQkJCWFjdGl2ZSA9IGNvbGxhcHNpYmxlID8gZmFsc2UgOiAwOwoJCQl9CgkJfQoKCQkvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2UKCQlpZiAoICFjb2xsYXBzaWJsZSAmJiBhY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7CgkJCWFjdGl2ZSA9IDA7CgkJfQoKCQlyZXR1cm4gYWN0aXZlOwoJfSwKCglfZ2V0Q3JlYXRlRXZlbnREYXRhOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gewoJCQl0YWI6IHRoaXMuYWN0aXZlLAoJCQlwYW5lbDogIXRoaXMuYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApCgkJfTsKCX0sCgoJX3RhYktleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgZm9jdXNlZFRhYiA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCApLmNsb3Nlc3QoICJsaSIgKSwKCQkJc2VsZWN0ZWRJbmRleCA9IHRoaXMudGFicy5pbmRleCggZm9jdXNlZFRhYiApLAoJCQlnb2luZ0ZvcndhcmQgPSB0cnVlOwoKCQlpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCXN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7CgkJCWNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOgoJCQljYXNlICQudWkua2V5Q29kZS5ET1dOOgoJCQkJc2VsZWN0ZWRJbmRleCsrOwoJCQkJYnJlYWs7CgkJCWNhc2UgJC51aS5rZXlDb2RlLlVQOgoJCQljYXNlICQudWkua2V5Q29kZS5MRUZUOgoJCQkJZ29pbmdGb3J3YXJkID0gZmFsc2U7CgkJCQlzZWxlY3RlZEluZGV4LS07CgkJCQlicmVhazsKCQkJY2FzZSAkLnVpLmtleUNvZGUuRU5EOgoJCQkJc2VsZWN0ZWRJbmRleCA9IHRoaXMuYW5jaG9ycy5sZW5ndGggLSAxOwoJCQkJYnJlYWs7CgkJCWNhc2UgJC51aS5rZXlDb2RlLkhPTUU6CgkJCQlzZWxlY3RlZEluZGV4ID0gMDsKCQkJCWJyZWFrOwoJCQljYXNlICQudWkua2V5Q29kZS5TUEFDRToKCQkJCS8vIEFjdGl2YXRlIG9ubHksIG5vIGNvbGxhcHNpbmcKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQljbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApOwoJCQkJdGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggKTsKCQkJCXJldHVybjsKCQkJY2FzZSAkLnVpLmtleUNvZGUuRU5URVI6CgkJCQkvLyBUb2dnbGUgKGNhbmNlbCBkZWxheWVkIGFjdGl2YXRpb24sIGFsbG93IGNvbGxhcHNpbmcpCgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJY2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTsKCQkJCS8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgY29sbGFwc2Ugb3IgYWN0aXZhdGUKCQkJCXRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ID09PSB0aGlzLm9wdGlvbnMuYWN0aXZlID8gZmFsc2UgOiBzZWxlY3RlZEluZGV4ICk7CgkJCQlyZXR1cm47CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm47CgkJfQoKCQkvLyBGb2N1cyB0aGUgYXBwcm9wcmlhdGUgdGFiLCBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWQKCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCWNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7CgkJc2VsZWN0ZWRJbmRleCA9IHRoaXMuX2ZvY3VzTmV4dFRhYiggc2VsZWN0ZWRJbmRleCwgZ29pbmdGb3J3YXJkICk7CgoJCS8vIE5hdmlnYXRpbmcgd2l0aCBjb250cm9sIGtleSB3aWxsIHByZXZlbnQgYXV0b21hdGljIGFjdGl2YXRpb24KCQlpZiAoICFldmVudC5jdHJsS2V5ICkgewoJCQkvLyBVcGRhdGUgYXJpYS1zZWxlY3RlZCBpbW1lZGlhdGVseSBzbyB0aGF0IEFUIHRoaW5rIHRoZSB0YWIgaXMgYWxyZWFkeSBzZWxlY3RlZC4KCQkJLy8gT3RoZXJ3aXNlIEFUIG1heSBjb25mdXNlIHRoZSB1c2VyIGJ5IHN0YXRpbmcgdGhhdCB0aGV5IG5lZWQgdG8gYWN0aXZhdGUgdGhlIHRhYiwKCQkJLy8gYnV0IHRoZSB0YWIgd2lsbCBhbHJlYWR5IGJlIGFjdGl2YXRlZCBieSB0aGUgdGltZSB0aGUgYW5ub3VuY2VtZW50IGZpbmlzaGVzLgoJCQlmb2N1c2VkVGFiLmF0dHIoICJhcmlhLXNlbGVjdGVkIiwgImZhbHNlIiApOwoJCQl0aGlzLnRhYnMuZXEoIHNlbGVjdGVkSW5kZXggKS5hdHRyKCAiYXJpYS1zZWxlY3RlZCIsICJ0cnVlIiApOwoKCQkJdGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQl0aGlzLm9wdGlvbiggImFjdGl2ZSIsIHNlbGVjdGVkSW5kZXggKTsKCQkJfSwgdGhpcy5kZWxheSApOwoJCX0KCX0sCgoJX3BhbmVsS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gQ3RybCt1cCBtb3ZlcyBmb2N1cyB0byB0aGUgY3VycmVudCB0YWIKCQlpZiAoIGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQl0aGlzLmFjdGl2ZS5mb2N1cygpOwoJCX0KCX0sCgoJLy8gQWx0K3BhZ2UgdXAvZG93biBtb3ZlcyBmb2N1cyB0byB0aGUgcHJldmlvdXMvbmV4dCB0YWIgKGFuZCBhY3RpdmF0ZXMpCglfaGFuZGxlUGFnZU5hdjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX1VQICkgewoJCQl0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlIC0gMSwgZmFsc2UgKSApOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJaWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfRE9XTiApIHsKCQkJdGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSArIDEsIHRydWUgKSApOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9LAoKCV9maW5kTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7CgkJdmFyIGxhc3RUYWJJbmRleCA9IHRoaXMudGFicy5sZW5ndGggLSAxOwoKCQlmdW5jdGlvbiBjb25zdHJhaW4oKSB7CgkJCWlmICggaW5kZXggPiBsYXN0VGFiSW5kZXggKSB7CgkJCQlpbmRleCA9IDA7CgkJCX0KCQkJaWYgKCBpbmRleCA8IDAgKSB7CgkJCQlpbmRleCA9IGxhc3RUYWJJbmRleDsKCQkJfQoJCQlyZXR1cm4gaW5kZXg7CgkJfQoKCQl3aGlsZSAoICQuaW5BcnJheSggY29uc3RyYWluKCksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApICE9PSAtMSApIHsKCQkJaW5kZXggPSBnb2luZ0ZvcndhcmQgPyBpbmRleCArIDEgOiBpbmRleCAtIDE7CgkJfQoKCQlyZXR1cm4gaW5kZXg7Cgl9LAoKCV9mb2N1c05leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkgewoJCWluZGV4ID0gdGhpcy5fZmluZE5leHRUYWIoIGluZGV4LCBnb2luZ0ZvcndhcmQgKTsKCQl0aGlzLnRhYnMuZXEoIGluZGV4ICkuZm9jdXMoKTsKCQlyZXR1cm4gaW5kZXg7Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCWlmICgga2V5ID09PSAiYWN0aXZlIiApIHsKCQkJLy8gX2FjdGl2YXRlKCkgd2lsbCBoYW5kbGUgaW52YWxpZCB2YWx1ZXMgYW5kIHVwZGF0ZSB0aGlzLm9wdGlvbnMKCQkJdGhpcy5fYWN0aXZhdGUoIHZhbHVlICk7CgkJCXJldHVybjsKCQl9CgoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQkvLyBkb24ndCB1c2UgdGhlIHdpZGdldCBmYWN0b3J5J3MgZGlzYWJsZWQgaGFuZGxpbmcKCQkJdGhpcy5fc2V0dXBEaXNhYmxlZCggdmFsdWUgKTsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUpOwoKCQlpZiAoIGtleSA9PT0gImNvbGxhcHNpYmxlIiApIHsKCQkJdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCAidWktdGFicy1jb2xsYXBzaWJsZSIsIHZhbHVlICk7CgkJCS8vIFNldHRpbmcgY29sbGFwc2libGU6IGZhbHNlIHdoaWxlIGNvbGxhcHNlZDsgb3BlbiBmaXJzdCBwYW5lbAoJCQlpZiAoICF2YWx1ZSAmJiB0aGlzLm9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSApIHsKCQkJCXRoaXMuX2FjdGl2YXRlKCAwICk7CgkJCX0KCQl9CgoJCWlmICgga2V5ID09PSAiZXZlbnQiICkgewoJCQl0aGlzLl9zZXR1cEV2ZW50cyggdmFsdWUgKTsKCQl9CgoJCWlmICgga2V5ID09PSAiaGVpZ2h0U3R5bGUiICkgewoJCQl0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB2YWx1ZSApOwoJCX0KCX0sCgoJX3Nhbml0aXplU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkgewoJCXJldHVybiBoYXNoID8gaGFzaC5yZXBsYWNlKCAvWyEiJCUmJygpKissLlwvOjs8PT4/QFxbXF1cXmB7fH1+XS9nLCAiXFwkJiIgKSA6ICIiOwoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJbGlzID0gdGhpcy50YWJsaXN0LmNoaWxkcmVuKCAiOmhhcyhhW2hyZWZdKSIgKTsKCgkJLy8gZ2V0IGRpc2FibGVkIHRhYnMgZnJvbSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MCgkJLy8gdGhpcyB3aWxsIGdldCBjb252ZXJ0ZWQgdG8gYSBib29sZWFuIGlmIG5lZWRlZCBpbiBfcmVmcmVzaCgpCgkJb3B0aW9ucy5kaXNhYmxlZCA9ICQubWFwKCBsaXMuZmlsdGVyKCAiLnVpLXN0YXRlLWRpc2FibGVkIiApLCBmdW5jdGlvbiggdGFiICkgewoJCQlyZXR1cm4gbGlzLmluZGV4KCB0YWIgKTsKCQl9KTsKCgkJdGhpcy5fcHJvY2Vzc1RhYnMoKTsKCgkJLy8gd2FzIGNvbGxhcHNlZCBvciBubyB0YWJzCgkJaWYgKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgfHwgIXRoaXMuYW5jaG9ycy5sZW5ndGggKSB7CgkJCW9wdGlvbnMuYWN0aXZlID0gZmFsc2U7CgkJCXRoaXMuYWN0aXZlID0gJCgpOwoJCS8vIHdhcyBhY3RpdmUsIGJ1dCBhY3RpdmUgdGFiIGlzIGdvbmUKCQl9IGVsc2UgaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggJiYgISQuY29udGFpbnMoIHRoaXMudGFibGlzdFsgMCBdLCB0aGlzLmFjdGl2ZVsgMCBdICkgKSB7CgkJCS8vIGFsbCByZW1haW5pbmcgdGFicyBhcmUgZGlzYWJsZWQKCQkJaWYgKCB0aGlzLnRhYnMubGVuZ3RoID09PSBvcHRpb25zLmRpc2FibGVkLmxlbmd0aCApIHsKCQkJCW9wdGlvbnMuYWN0aXZlID0gZmFsc2U7CgkJCQl0aGlzLmFjdGl2ZSA9ICQoKTsKCQkJLy8gYWN0aXZhdGUgcHJldmlvdXMgdGFiCgkJCX0gZWxzZSB7CgkJCQl0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZmluZE5leHRUYWIoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSwgZmFsc2UgKSApOwoJCQl9CgkJLy8gd2FzIGFjdGl2ZSwgYWN0aXZlIHRhYiBzdGlsbCBleGlzdHMKCQl9IGVsc2UgewoJCQkvLyBtYWtlIHN1cmUgYWN0aXZlIGluZGV4IGlzIGNvcnJlY3QKCQkJb3B0aW9ucy5hY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMuYWN0aXZlICk7CgkJfQoKCQl0aGlzLl9yZWZyZXNoKCk7Cgl9LAoKCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl0aGlzLl9zZXR1cERpc2FibGVkKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTsKCQl0aGlzLl9zZXR1cEV2ZW50cyggdGhpcy5vcHRpb25zLmV2ZW50ICk7CgkJdGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICk7CgoJCXRoaXMudGFicy5ub3QoIHRoaXMuYWN0aXZlICkuYXR0cih7CgkJCSJhcmlhLXNlbGVjdGVkIjogImZhbHNlIiwKCQkJImFyaWEtZXhwYW5kZWQiOiAiZmFsc2UiLAoJCQl0YWJJbmRleDogLTEKCQl9KTsKCQl0aGlzLnBhbmVscy5ub3QoIHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApICkKCQkJLmhpZGUoKQoJCQkuYXR0cih7CgkJCQkiYXJpYS1oaWRkZW4iOiAidHJ1ZSIKCQkJfSk7CgoJCS8vIE1ha2Ugc3VyZSBvbmUgdGFiIGlzIGluIHRoZSB0YWIgb3JkZXIKCQlpZiAoICF0aGlzLmFjdGl2ZS5sZW5ndGggKSB7CgkJCXRoaXMudGFicy5lcSggMCApLmF0dHIoICJ0YWJJbmRleCIsIDAgKTsKCQl9IGVsc2UgewoJCQl0aGlzLmFjdGl2ZQoJCQkJLmFkZENsYXNzKCAidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIiApCgkJCQkuYXR0cih7CgkJCQkJImFyaWEtc2VsZWN0ZWQiOiAidHJ1ZSIsCgkJCQkJImFyaWEtZXhwYW5kZWQiOiAidHJ1ZSIsCgkJCQkJdGFiSW5kZXg6IDAKCQkJCX0pOwoJCQl0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKQoJCQkJLnNob3coKQoJCQkJLmF0dHIoewoJCQkJCSJhcmlhLWhpZGRlbiI6ICJmYWxzZSIKCQkJCX0pOwoJCX0KCX0sCgoJX3Byb2Nlc3NUYWJzOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCXRoaXMudGFibGlzdCA9IHRoaXMuX2dldExpc3QoKQoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCIgKQoJCQkuYXR0ciggInJvbGUiLCAidGFibGlzdCIgKQoKCQkJLy8gUHJldmVudCB1c2VycyBmcm9tIGZvY3VzaW5nIGRpc2FibGVkIHRhYnMgdmlhIGNsaWNrCgkJCS5kZWxlZ2F0ZSggIj4gbGkiLCAibW91c2Vkb3duIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggJCggdGhpcyApLmlzKCAiLnVpLXN0YXRlLWRpc2FibGVkIiApICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQl9CgkJCX0pCgoJCQkvLyBzdXBwb3J0OiBJRSA8OQoJCQkvLyBQcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGFjdGlvbiBpbiBtb3VzZWRvd24gZG9lc24ndCBwcmV2ZW50IElFCgkJCS8vIGZyb20gZm9jdXNpbmcgdGhlIGVsZW1lbnQsIHNvIGlmIHRoZSBhbmNob3IgZ2V0cyBmb2N1c2VkLCBibHVyLgoJCQkvLyBXZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IGZvY3VzaW5nIHRoZSBwcmV2aW91c2x5IGZvY3VzZWQKCQkJLy8gZWxlbWVudCBzaW5jZSBjbGlja2luZyBvbiBhIG5vbi1mb2N1c2FibGUgZWxlbWVudCBzaG91bGQgZm9jdXMKCQkJLy8gdGhlIGJvZHkgYW55d2F5LgoJCQkuZGVsZWdhdGUoICIudWktdGFicy1hbmNob3IiLCAiZm9jdXMiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQlpZiAoICQoIHRoaXMgKS5jbG9zZXN0KCAibGkiICkuaXMoICIudWktc3RhdGUtZGlzYWJsZWQiICkgKSB7CgkJCQkJdGhpcy5ibHVyKCk7CgkJCQl9CgkJCX0pOwoKCQl0aGlzLnRhYnMgPSB0aGlzLnRhYmxpc3QuZmluZCggIj4gbGk6aGFzKGFbaHJlZl0pIiApCgkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAidGFiIiwKCQkJCXRhYkluZGV4OiAtMQoJCQl9KTsKCgkJdGhpcy5hbmNob3JzID0gdGhpcy50YWJzLm1hcChmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCAiYSIsIHRoaXMgKVsgMCBdOwoJCQl9KQoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLWFuY2hvciIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAicHJlc2VudGF0aW9uIiwKCQkJCXRhYkluZGV4OiAtMQoJCQl9KTsKCgkJdGhpcy5wYW5lbHMgPSAkKCk7CgoJCXRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCBpLCBhbmNob3IgKSB7CgkJCXZhciBzZWxlY3RvciwgcGFuZWwsIHBhbmVsSWQsCgkJCQlhbmNob3JJZCA9ICQoIGFuY2hvciApLnVuaXF1ZUlkKCkuYXR0ciggImlkIiApLAoJCQkJdGFiID0gJCggYW5jaG9yICkuY2xvc2VzdCggImxpIiApLAoJCQkJb3JpZ2luYWxBcmlhQ29udHJvbHMgPSB0YWIuYXR0ciggImFyaWEtY29udHJvbHMiICk7CgoJCQkvLyBpbmxpbmUgdGFiCgkJCWlmICggdGhhdC5faXNMb2NhbCggYW5jaG9yICkgKSB7CgkJCQlzZWxlY3RvciA9IGFuY2hvci5oYXNoOwoJCQkJcGFuZWxJZCA9IHNlbGVjdG9yLnN1YnN0cmluZyggMSApOwoJCQkJcGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggdGhhdC5fc2FuaXRpemVTZWxlY3Rvciggc2VsZWN0b3IgKSApOwoJCQkvLyByZW1vdGUgdGFiCgkJCX0gZWxzZSB7CgkJCQkvLyBJZiB0aGUgdGFiIGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGFyaWEtY29udHJvbHMsCgkJCQkvLyBnZW5lcmF0ZSBhbiBpZCBieSB1c2luZyBhIHRocm93LWF3YXkgZWxlbWVudAoJCQkJcGFuZWxJZCA9IHRhYi5hdHRyKCAiYXJpYS1jb250cm9scyIgKSB8fCAkKCB7fSApLnVuaXF1ZUlkKClbIDAgXS5pZDsKCQkJCXNlbGVjdG9yID0gIiMiICsgcGFuZWxJZDsKCQkJCXBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHNlbGVjdG9yICk7CgkJCQlpZiAoICFwYW5lbC5sZW5ndGggKSB7CgkJCQkJcGFuZWwgPSB0aGF0Ll9jcmVhdGVQYW5lbCggcGFuZWxJZCApOwoJCQkJCXBhbmVsLmluc2VydEFmdGVyKCB0aGF0LnBhbmVsc1sgaSAtIDEgXSB8fCB0aGF0LnRhYmxpc3QgKTsKCQkJCX0KCQkJCXBhbmVsLmF0dHIoICJhcmlhLWxpdmUiLCAicG9saXRlIiApOwoJCQl9CgoJCQlpZiAoIHBhbmVsLmxlbmd0aCkgewoJCQkJdGhhdC5wYW5lbHMgPSB0aGF0LnBhbmVscy5hZGQoIHBhbmVsICk7CgkJCX0KCQkJaWYgKCBvcmlnaW5hbEFyaWFDb250cm9scyApIHsKCQkJCXRhYi5kYXRhKCAidWktdGFicy1hcmlhLWNvbnRyb2xzIiwgb3JpZ2luYWxBcmlhQ29udHJvbHMgKTsKCQkJfQoJCQl0YWIuYXR0cih7CgkJCQkiYXJpYS1jb250cm9scyI6IHBhbmVsSWQsCgkJCQkiYXJpYS1sYWJlbGxlZGJ5IjogYW5jaG9ySWQKCQkJfSk7CgkJCXBhbmVsLmF0dHIoICJhcmlhLWxhYmVsbGVkYnkiLCBhbmNob3JJZCApOwoJCX0pOwoKCQl0aGlzLnBhbmVscwoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iICkKCQkJLmF0dHIoICJyb2xlIiwgInRhYnBhbmVsIiApOwoJfSwKCgkvLyBhbGxvdyBvdmVycmlkaW5nIGhvdyB0byBmaW5kIHRoZSBsaXN0IGZvciByYXJlIHVzYWdlIHNjZW5hcmlvcyAoIzc3MTUpCglfZ2V0TGlzdDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMudGFibGlzdCB8fCB0aGlzLmVsZW1lbnQuZmluZCggIm9sLHVsIiApLmVxKCAwICk7Cgl9LAoKCV9jcmVhdGVQYW5lbDogZnVuY3Rpb24oIGlkICkgewoJCXJldHVybiAkKCAiPGRpdj4iICkKCQkJLmF0dHIoICJpZCIsIGlkICkKCQkJLmFkZENsYXNzKCAidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIiApCgkJCS5kYXRhKCAidWktdGFicy1kZXN0cm95IiwgdHJ1ZSApOwoJfSwKCglfc2V0dXBEaXNhYmxlZDogZnVuY3Rpb24oIGRpc2FibGVkICkgewoJCWlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkgewoJCQlpZiAoICFkaXNhYmxlZC5sZW5ndGggKSB7CgkJCQlkaXNhYmxlZCA9IGZhbHNlOwoJCQl9IGVsc2UgaWYgKCBkaXNhYmxlZC5sZW5ndGggPT09IHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7CgkJCQlkaXNhYmxlZCA9IHRydWU7CgkJCX0KCQl9CgoJCS8vIGRpc2FibGUgdGFicwoJCWZvciAoIHZhciBpID0gMCwgbGk7ICggbGkgPSB0aGlzLnRhYnNbIGkgXSApOyBpKysgKSB7CgkJCWlmICggZGlzYWJsZWQgPT09IHRydWUgfHwgJC5pbkFycmF5KCBpLCBkaXNhYmxlZCApICE9PSAtMSApIHsKCQkJCSQoIGxpICkKCQkJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1kaXNhYmxlZCIgKQoJCQkJCS5hdHRyKCAiYXJpYS1kaXNhYmxlZCIsICJ0cnVlIiApOwoJCQl9IGVsc2UgewoJCQkJJCggbGkgKQoJCQkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApCgkJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWRpc2FibGVkIiApOwoJCQl9CgkJfQoKCQl0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSBkaXNhYmxlZDsKCX0sCgoJX3NldHVwRXZlbnRzOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGV2ZW50cyA9IHt9OwoJCWlmICggZXZlbnQgKSB7CgkJCSQuZWFjaCggZXZlbnQuc3BsaXQoIiAiKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7CgkJCQlldmVudHNbIGV2ZW50TmFtZSBdID0gIl9ldmVudEhhbmRsZXIiOwoJCQl9KTsKCQl9CgoJCXRoaXMuX29mZiggdGhpcy5hbmNob3JzLmFkZCggdGhpcy50YWJzICkuYWRkKCB0aGlzLnBhbmVscyApICk7CgkJLy8gQWx3YXlzIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uLCBldmVuIHdoZW4gZGlzYWJsZWQKCQl0aGlzLl9vbiggdHJ1ZSwgdGhpcy5hbmNob3JzLCB7CgkJCWNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQl9CgkJfSk7CgkJdGhpcy5fb24oIHRoaXMuYW5jaG9ycywgZXZlbnRzICk7CgkJdGhpcy5fb24oIHRoaXMudGFicywgeyBrZXlkb3duOiAiX3RhYktleWRvd24iIH0gKTsKCQl0aGlzLl9vbiggdGhpcy5wYW5lbHMsIHsga2V5ZG93bjogIl9wYW5lbEtleWRvd24iIH0gKTsKCgkJdGhpcy5fZm9jdXNhYmxlKCB0aGlzLnRhYnMgKTsKCQl0aGlzLl9ob3ZlcmFibGUoIHRoaXMudGFicyApOwoJfSwKCglfc2V0dXBIZWlnaHRTdHlsZTogZnVuY3Rpb24oIGhlaWdodFN0eWxlICkgewoJCXZhciBtYXhIZWlnaHQsCgkJCXBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTsKCgkJaWYgKCBoZWlnaHRTdHlsZSA9PT0gImZpbGwiICkgewoJCQltYXhIZWlnaHQgPSBwYXJlbnQuaGVpZ2h0KCk7CgkJCW1heEhlaWdodCAtPSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHRoaXMuZWxlbWVudC5oZWlnaHQoKTsKCgkJCXRoaXMuZWxlbWVudC5zaWJsaW5ncyggIjp2aXNpYmxlIiApLmVhY2goZnVuY3Rpb24oKSB7CgkJCQl2YXIgZWxlbSA9ICQoIHRoaXMgKSwKCQkJCQlwb3NpdGlvbiA9IGVsZW0uY3NzKCAicG9zaXRpb24iICk7CgoJCQkJaWYgKCBwb3NpdGlvbiA9PT0gImFic29sdXRlIiB8fCBwb3NpdGlvbiA9PT0gImZpeGVkIiApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQltYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApOwoJCQl9KTsKCgkJCXRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJbWF4SGVpZ2h0IC09ICQoIHRoaXMgKS5vdXRlckhlaWdodCggdHJ1ZSApOwoJCQl9KTsKCgkJCXRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkkKCB0aGlzICkuaGVpZ2h0KCBNYXRoLm1heCggMCwgbWF4SGVpZ2h0IC0KCQkJCQkkKCB0aGlzICkuaW5uZXJIZWlnaHQoKSArICQoIHRoaXMgKS5oZWlnaHQoKSApICk7CgkJCX0pCgkJCS5jc3MoICJvdmVyZmxvdyIsICJhdXRvIiApOwoJCX0gZWxzZSBpZiAoIGhlaWdodFN0eWxlID09PSAiYXV0byIgKSB7CgkJCW1heEhlaWdodCA9IDA7CgkJCXRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQltYXhIZWlnaHQgPSBNYXRoLm1heCggbWF4SGVpZ2h0LCAkKCB0aGlzICkuaGVpZ2h0KCAiIiApLmhlaWdodCgpICk7CgkJCX0pLmhlaWdodCggbWF4SGVpZ2h0ICk7CgkJfQoJfSwKCglfZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCWFjdGl2ZSA9IHRoaXMuYWN0aXZlLAoJCQlhbmNob3IgPSAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksCgkJCXRhYiA9IGFuY2hvci5jbG9zZXN0KCAibGkiICksCgkJCWNsaWNrZWRJc0FjdGl2ZSA9IHRhYlsgMCBdID09PSBhY3RpdmVbIDAgXSwKCQkJY29sbGFwc2luZyA9IGNsaWNrZWRJc0FjdGl2ZSAmJiBvcHRpb25zLmNvbGxhcHNpYmxlLAoJCQl0b1Nob3cgPSBjb2xsYXBzaW5nID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLAoJCQl0b0hpZGUgPSAhYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCBhY3RpdmUgKSwKCQkJZXZlbnREYXRhID0gewoJCQkJb2xkVGFiOiBhY3RpdmUsCgkJCQlvbGRQYW5lbDogdG9IaWRlLAoJCQkJbmV3VGFiOiBjb2xsYXBzaW5nID8gJCgpIDogdGFiLAoJCQkJbmV3UGFuZWw6IHRvU2hvdwoJCQl9OwoKCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQlpZiAoIHRhYi5oYXNDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApIHx8CgkJCQkvLyB0YWIgaXMgYWxyZWFkeSBsb2FkaW5nCgkJCQl0YWIuaGFzQ2xhc3MoICJ1aS10YWJzLWxvYWRpbmciICkgfHwKCQkJCS8vIGNhbid0IHN3aXRjaCBkdXJuaW5nIGFuIGFuaW1hdGlvbgoJCQkJdGhpcy5ydW5uaW5nIHx8CgkJCQkvLyBjbGljayBvbiBhY3RpdmUgaGVhZGVyLCBidXQgbm90IGNvbGxhcHNpYmxlCgkJCQkoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8CgkJCQkvLyBhbGxvdyBjYW5jZWxpbmcgYWN0aXZhdGlvbgoJCQkJKCB0aGlzLl90cmlnZ2VyKCAiYmVmb3JlQWN0aXZhdGUiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCW9wdGlvbnMuYWN0aXZlID0gY29sbGFwc2luZyA/IGZhbHNlIDogdGhpcy50YWJzLmluZGV4KCB0YWIgKTsKCgkJdGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiB0YWI7CgkJaWYgKCB0aGlzLnhociApIHsKCQkJdGhpcy54aHIuYWJvcnQoKTsKCQl9CgoJCWlmICggIXRvSGlkZS5sZW5ndGggJiYgIXRvU2hvdy5sZW5ndGggKSB7CgkJCSQuZXJyb3IoICJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci4iICk7CgkJfQoKCQlpZiAoIHRvU2hvdy5sZW5ndGggKSB7CgkJCXRoaXMubG9hZCggdGhpcy50YWJzLmluZGV4KCB0YWIgKSwgZXZlbnQgKTsKCQl9CgkJdGhpcy5fdG9nZ2xlKCBldmVudCwgZXZlbnREYXRhICk7Cgl9LAoKCS8vIGhhbmRsZXMgc2hvdy9oaWRlIGZvciBzZWxlY3RpbmcgdGFicwoJX3RvZ2dsZTogZnVuY3Rpb24oIGV2ZW50LCBldmVudERhdGEgKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQl0b1Nob3cgPSBldmVudERhdGEubmV3UGFuZWwsCgkJCXRvSGlkZSA9IGV2ZW50RGF0YS5vbGRQYW5lbDsKCgkJdGhpcy5ydW5uaW5nID0gdHJ1ZTsKCgkJZnVuY3Rpb24gY29tcGxldGUoKSB7CgkJCXRoYXQucnVubmluZyA9IGZhbHNlOwoJCQl0aGF0Ll90cmlnZ2VyKCAiYWN0aXZhdGUiLCBldmVudCwgZXZlbnREYXRhICk7CgkJfQoKCQlmdW5jdGlvbiBzaG93KCkgewoJCQlldmVudERhdGEubmV3VGFiLmNsb3Nlc3QoICJsaSIgKS5hZGRDbGFzcyggInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSIgKTsKCgkJCWlmICggdG9TaG93Lmxlbmd0aCAmJiB0aGF0Lm9wdGlvbnMuc2hvdyApIHsKCQkJCXRoYXQuX3Nob3coIHRvU2hvdywgdGhhdC5vcHRpb25zLnNob3csIGNvbXBsZXRlICk7CgkJCX0gZWxzZSB7CgkJCQl0b1Nob3cuc2hvdygpOwoJCQkJY29tcGxldGUoKTsKCQkJfQoJCX0KCgkJLy8gc3RhcnQgb3V0IGJ5IGhpZGluZywgdGhlbiBzaG93aW5nLCB0aGVuIGNvbXBsZXRpbmcKCQlpZiAoIHRvSGlkZS5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmhpZGUgKSB7CgkJCXRoaXMuX2hpZGUoIHRvSGlkZSwgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uKCkgewoJCQkJZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCAibGkiICkucmVtb3ZlQ2xhc3MoICJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQlzaG93KCk7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggImxpIiApLnJlbW92ZUNsYXNzKCAidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIiApOwoJCQl0b0hpZGUuaGlkZSgpOwoJCQlzaG93KCk7CgkJfQoKCQl0b0hpZGUuYXR0ciggImFyaWEtaGlkZGVuIiwgInRydWUiICk7CgkJZXZlbnREYXRhLm9sZFRhYi5hdHRyKHsKCQkJImFyaWEtc2VsZWN0ZWQiOiAiZmFsc2UiLAoJCQkiYXJpYS1leHBhbmRlZCI6ICJmYWxzZSIKCQl9KTsKCQkvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgdGFicywgcmVtb3ZlIHRoZSBvbGQgdGFiIGZyb20gdGhlIHRhYiBvcmRlci4KCQkvLyBJZiB3ZSdyZSBvcGVuaW5nIGZyb20gY29sbGFwc2VkIHN0YXRlLCByZW1vdmUgdGhlIHByZXZpb3VzIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuCgkJLy8gSWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIHRhYiBpbiB0aGUgdGFiIG9yZGVyLgoJCWlmICggdG9TaG93Lmxlbmd0aCAmJiB0b0hpZGUubGVuZ3RoICkgewoJCQlldmVudERhdGEub2xkVGFiLmF0dHIoICJ0YWJJbmRleCIsIC0xICk7CgkJfSBlbHNlIGlmICggdG9TaG93Lmxlbmd0aCApIHsKCQkJdGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCB0aGlzICkuYXR0ciggInRhYkluZGV4IiApID09PSAwOwoJCQl9KQoJCQkuYXR0ciggInRhYkluZGV4IiwgLTEgKTsKCQl9CgoJCXRvU2hvdy5hdHRyKCAiYXJpYS1oaWRkZW4iLCAiZmFsc2UiICk7CgkJZXZlbnREYXRhLm5ld1RhYi5hdHRyKHsKCQkJImFyaWEtc2VsZWN0ZWQiOiAidHJ1ZSIsCgkJCSJhcmlhLWV4cGFuZGVkIjogInRydWUiLAoJCQl0YWJJbmRleDogMAoJCX0pOwoJfSwKCglfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQl2YXIgYW5jaG9yLAoJCQlhY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBpbmRleCApOwoKCQkvLyB0cnlpbmcgdG8gYWN0aXZhdGUgdGhlIGFscmVhZHkgYWN0aXZlIHBhbmVsCgkJaWYgKCBhY3RpdmVbIDAgXSA9PT0gdGhpcy5hY3RpdmVbIDAgXSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gdHJ5aW5nIHRvIGNvbGxhcHNlLCBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBoZWFkZXIKCQlpZiAoICFhY3RpdmUubGVuZ3RoICkgewoJCQlhY3RpdmUgPSB0aGlzLmFjdGl2ZTsKCQl9CgoJCWFuY2hvciA9IGFjdGl2ZS5maW5kKCAiLnVpLXRhYnMtYW5jaG9yIiApWyAwIF07CgkJdGhpcy5fZXZlbnRIYW5kbGVyKHsKCQkJdGFyZ2V0OiBhbmNob3IsCgkJCWN1cnJlbnRUYXJnZXQ6IGFuY2hvciwKCQkJcHJldmVudERlZmF1bHQ6ICQubm9vcAoJCX0pOwoJfSwKCglfZmluZEFjdGl2ZTogZnVuY3Rpb24oIGluZGV4ICkgewoJCXJldHVybiBpbmRleCA9PT0gZmFsc2UgPyAkKCkgOiB0aGlzLnRhYnMuZXEoIGluZGV4ICk7Cgl9LAoKCV9nZXRJbmRleDogZnVuY3Rpb24oIGluZGV4ICkgewoJCS8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguCgkJaWYgKCB0eXBlb2YgaW5kZXggPT09ICJzdHJpbmciICkgewoJCQlpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggIltocmVmJD0nIiArIGluZGV4ICsgIiddIiApICk7CgkJfQoKCQlyZXR1cm4gaW5kZXg7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQlpZiAoIHRoaXMueGhyICkgewoJCQl0aGlzLnhoci5hYm9ydCgpOwoJCX0KCgkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCAidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlIiApOwoKCQl0aGlzLnRhYmxpc3QKCQkJLnJlbW92ZUNsYXNzKCAidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApOwoKCQl0aGlzLmFuY2hvcnMKCQkJLnJlbW92ZUNsYXNzKCAidWktdGFicy1hbmNob3IiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAidGFiSW5kZXgiICkKCQkJLnJlbW92ZVVuaXF1ZUlkKCk7CgoJCXRoaXMudGFibGlzdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTsKCgkJdGhpcy50YWJzLmFkZCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQlpZiAoICQuZGF0YSggdGhpcywgInVpLXRhYnMtZGVzdHJveSIgKSApIHsKCQkJCSQoIHRoaXMgKS5yZW1vdmUoKTsKCQkJfSBlbHNlIHsKCQkJCSQoIHRoaXMgKQoJCQkJCS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWRlZmF1bHQgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkICIgKwoJCQkJCQkidWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLXdpZGdldC1jb250ZW50IHVpLXRhYnMtYWN0aXZlIHVpLXRhYnMtcGFuZWwiICkKCQkJCQkucmVtb3ZlQXR0ciggInRhYkluZGV4IiApCgkJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWxpdmUiICkKCQkJCQkucmVtb3ZlQXR0ciggImFyaWEtYnVzeSIgKQoJCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1zZWxlY3RlZCIgKQoJCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1sYWJlbGxlZGJ5IiApCgkJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWhpZGRlbiIgKQoJCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1leHBhbmRlZCIgKQoJCQkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKTsKCQkJfQoJCX0pOwoKCQl0aGlzLnRhYnMuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIGxpID0gJCggdGhpcyApLAoJCQkJcHJldiA9IGxpLmRhdGEoICJ1aS10YWJzLWFyaWEtY29udHJvbHMiICk7CgkJCWlmICggcHJldiApIHsKCQkJCWxpCgkJCQkJLmF0dHIoICJhcmlhLWNvbnRyb2xzIiwgcHJldiApCgkJCQkJLnJlbW92ZURhdGEoICJ1aS10YWJzLWFyaWEtY29udHJvbHMiICk7CgkJCX0gZWxzZSB7CgkJCQlsaS5yZW1vdmVBdHRyKCAiYXJpYS1jb250cm9scyIgKTsKCQkJfQoJCX0pOwoKCQl0aGlzLnBhbmVscy5zaG93KCk7CgoJCWlmICggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICE9PSAiY29udGVudCIgKSB7CgkJCXRoaXMucGFuZWxzLmNzcyggImhlaWdodCIsICIiICk7CgkJfQoJfSwKCgllbmFibGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQl2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7CgkJaWYgKCBkaXNhYmxlZCA9PT0gZmFsc2UgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHsKCQkJZGlzYWJsZWQgPSBmYWxzZTsKCQl9IGVsc2UgewoJCQlpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApOwoJCQlpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHsKCQkJCWRpc2FibGVkID0gJC5tYXAoIGRpc2FibGVkLCBmdW5jdGlvbiggbnVtICkgewoJCQkJCXJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDsKCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJZGlzYWJsZWQgPSAkLm1hcCggdGhpcy50YWJzLCBmdW5jdGlvbiggbGksIG51bSApIHsKCQkJCQlyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7CgkJCQl9KTsKCQkJfQoJCX0KCQl0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApOwoJfSwKCglkaXNhYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7CgkJdmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkOwoJCWlmICggZGlzYWJsZWQgPT09IHRydWUgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHsKCQkJZGlzYWJsZWQgPSB0cnVlOwoJCX0gZWxzZSB7CgkJCWluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7CgkJCWlmICggJC5pbkFycmF5KCBpbmRleCwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7CgkJCQlkaXNhYmxlZCA9ICQubWVyZ2UoIFsgaW5kZXggXSwgZGlzYWJsZWQgKS5zb3J0KCk7CgkJCX0gZWxzZSB7CgkJCQlkaXNhYmxlZCA9IFsgaW5kZXggXTsKCQkJfQoJCX0KCQl0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApOwoJfSwKCglsb2FkOiBmdW5jdGlvbiggaW5kZXgsIGV2ZW50ICkgewoJCWluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQl0YWIgPSB0aGlzLnRhYnMuZXEoIGluZGV4ICksCgkJCWFuY2hvciA9IHRhYi5maW5kKCAiLnVpLXRhYnMtYW5jaG9yIiApLAoJCQlwYW5lbCA9IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSwKCQkJZXZlbnREYXRhID0gewoJCQkJdGFiOiB0YWIsCgkJCQlwYW5lbDogcGFuZWwKCQkJfTsKCgkJLy8gbm90IHJlbW90ZQoJCWlmICggdGhpcy5faXNMb2NhbCggYW5jaG9yWyAwIF0gKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy54aHIgPSAkLmFqYXgoIHRoaXMuX2FqYXhTZXR0aW5ncyggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkgKTsKCgkJLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjgKCQkvLyBqUXVlcnkgPDEuOCByZXR1cm5zIGZhbHNlIGlmIHRoZSByZXF1ZXN0IGlzIGNhbmNlbGVkIGluIGJlZm9yZVNlbmQsCgkJLy8gYnV0IGFzIG9mIDEuOCwgJC5hamF4KCkgYWx3YXlzIHJldHVybnMgYSBqcVhIUiBvYmplY3QuCgkJaWYgKCB0aGlzLnhociAmJiB0aGlzLnhoci5zdGF0dXNUZXh0ICE9PSAiY2FuY2VsZWQiICkgewoJCQl0YWIuYWRkQ2xhc3MoICJ1aS10YWJzLWxvYWRpbmciICk7CgkJCXBhbmVsLmF0dHIoICJhcmlhLWJ1c3kiLCAidHJ1ZSIgKTsKCgkJCXRoaXMueGhyCgkJCQkuc3VjY2VzcyhmdW5jdGlvbiggcmVzcG9uc2UgKSB7CgkJCQkJLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjgKCQkJCQkvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OAoJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCXBhbmVsLmh0bWwoIHJlc3BvbnNlICk7CgkJCQkJCXRoYXQuX3RyaWdnZXIoICJsb2FkIiwgZXZlbnQsIGV2ZW50RGF0YSApOwoJCQkJCX0sIDEgKTsKCQkJCX0pCgkJCQkuY29tcGxldGUoZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7CgkJCQkJLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjgKCQkJCQkvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OAoJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCWlmICggc3RhdHVzID09PSAiYWJvcnQiICkgewoJCQkJCQkJdGhhdC5wYW5lbHMuc3RvcCggZmFsc2UsIHRydWUgKTsKCQkJCQkJfQoKCQkJCQkJdGFiLnJlbW92ZUNsYXNzKCAidWktdGFicy1sb2FkaW5nIiApOwoJCQkJCQlwYW5lbC5yZW1vdmVBdHRyKCAiYXJpYS1idXN5IiApOwoKCQkJCQkJaWYgKCBqcVhIUiA9PT0gdGhhdC54aHIgKSB7CgkJCQkJCQlkZWxldGUgdGhhdC54aHI7CgkJCQkJCX0KCQkJCQl9LCAxICk7CgkJCQl9KTsKCQl9Cgl9LAoKCV9hamF4U2V0dGluZ3M6IGZ1bmN0aW9uKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoJCXJldHVybiB7CgkJCXVybDogYW5jaG9yLmF0dHIoICJocmVmIiApLAoJCQliZWZvcmVTZW5kOiBmdW5jdGlvbigganFYSFIsIHNldHRpbmdzICkgewoJCQkJcmV0dXJuIHRoYXQuX3RyaWdnZXIoICJiZWZvcmVMb2FkIiwgZXZlbnQsCgkJCQkJJC5leHRlbmQoIHsganFYSFI6IGpxWEhSLCBhamF4U2V0dGluZ3M6IHNldHRpbmdzIH0sIGV2ZW50RGF0YSApICk7CgkJCX0KCQl9OwoJfSwKCglfZ2V0UGFuZWxGb3JUYWI6IGZ1bmN0aW9uKCB0YWIgKSB7CgkJdmFyIGlkID0gJCggdGFiICkuYXR0ciggImFyaWEtY29udHJvbHMiICk7CgkJcmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLl9zYW5pdGl6ZVNlbGVjdG9yKCAiIyIgKyBpZCApICk7Cgl9Cn0pOwoKCi8qIQogKiBqUXVlcnkgVUkgVG9vbHRpcCAxLjExLjEKICogaHR0cDovL2pxdWVyeXVpLmNvbQogKgogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS90b29sdGlwLwogKi8KCgp2YXIgdG9vbHRpcCA9ICQud2lkZ2V0KCAidWkudG9vbHRpcCIsIHsKCXZlcnNpb246ICIxLjExLjEiLAoJb3B0aW9uczogewoJCWNvbnRlbnQ6IGZ1bmN0aW9uKCkgewoJCQkvLyBzdXBwb3J0OiBJRTw5LCBPcGVyYSBpbiBqUXVlcnkgPDEuNwoJCQkvLyAudGV4dCgpIGNhbid0IGFjY2VwdCB1bmRlZmluZWQsIHNvIGNvZXJjZSB0byBhIHN0cmluZwoJCQl2YXIgdGl0bGUgPSAkKCB0aGlzICkuYXR0ciggInRpdGxlIiApIHx8ICIiOwoJCQkvLyBFc2NhcGUgdGl0bGUsIHNpbmNlIHdlJ3JlIGdvaW5nIGZyb20gYW4gYXR0cmlidXRlIHRvIHJhdyBIVE1MCgkJCXJldHVybiAkKCAiPGE+IiApLnRleHQoIHRpdGxlICkuaHRtbCgpOwoJCX0sCgkJaGlkZTogdHJ1ZSwKCQkvLyBEaXNhYmxlZCBlbGVtZW50cyBoYXZlIGluY29uc2lzdGVudCBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMgKCM4NjYxKQoJCWl0ZW1zOiAiW3RpdGxlXTpub3QoW2Rpc2FibGVkXSkiLAoJCXBvc2l0aW9uOiB7CgkJCW15OiAibGVmdCB0b3ArMTUiLAoJCQlhdDogImxlZnQgYm90dG9tIiwKCQkJY29sbGlzaW9uOiAiZmxpcGZpdCBmbGlwIgoJCX0sCgkJc2hvdzogdHJ1ZSwKCQl0b29sdGlwQ2xhc3M6IG51bGwsCgkJdHJhY2s6IGZhbHNlLAoKCQkvLyBjYWxsYmFja3MKCQljbG9zZTogbnVsbCwKCQlvcGVuOiBudWxsCgl9LAoKCV9hZGREZXNjcmliZWRCeTogZnVuY3Rpb24oIGVsZW0sIGlkICkgewoJCXZhciBkZXNjcmliZWRieSA9IChlbGVtLmF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiApIHx8ICIiKS5zcGxpdCggL1xzKy8gKTsKCQlkZXNjcmliZWRieS5wdXNoKCBpZCApOwoJCWVsZW0KCQkJLmRhdGEoICJ1aS10b29sdGlwLWlkIiwgaWQgKQoJCQkuYXR0ciggImFyaWEtZGVzY3JpYmVkYnkiLCAkLnRyaW0oIGRlc2NyaWJlZGJ5LmpvaW4oICIgIiApICkgKTsKCX0sCgoJX3JlbW92ZURlc2NyaWJlZEJ5OiBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgaWQgPSBlbGVtLmRhdGEoICJ1aS10b29sdGlwLWlkIiApLAoJCQlkZXNjcmliZWRieSA9IChlbGVtLmF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiApIHx8ICIiKS5zcGxpdCggL1xzKy8gKSwKCQkJaW5kZXggPSAkLmluQXJyYXkoIGlkLCBkZXNjcmliZWRieSApOwoKCQlpZiAoIGluZGV4ICE9PSAtMSApIHsKCQkJZGVzY3JpYmVkYnkuc3BsaWNlKCBpbmRleCwgMSApOwoJCX0KCgkJZWxlbS5yZW1vdmVEYXRhKCAidWktdG9vbHRpcC1pZCIgKTsKCQlkZXNjcmliZWRieSA9ICQudHJpbSggZGVzY3JpYmVkYnkuam9pbiggIiAiICkgKTsKCQlpZiAoIGRlc2NyaWJlZGJ5ICkgewoJCQllbGVtLmF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiwgZGVzY3JpYmVkYnkgKTsKCQl9IGVsc2UgewoJCQllbGVtLnJlbW92ZUF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiApOwoJCX0KCX0sCgoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJdGhpcy5fb24oewoJCQltb3VzZW92ZXI6ICJvcGVuIiwKCQkJZm9jdXNpbjogIm9wZW4iCgkJfSk7CgoJCS8vIElEcyBvZiBnZW5lcmF0ZWQgdG9vbHRpcHMsIG5lZWRlZCBmb3IgZGVzdHJveQoJCXRoaXMudG9vbHRpcHMgPSB7fTsKCQkvLyBJRHMgb2YgcGFyZW50IHRvb2x0aXBzIHdoZXJlIHdlIHJlbW92ZWQgdGhlIHRpdGxlIGF0dHJpYnV0ZQoJCXRoaXMucGFyZW50cyA9IHt9OwoKCQlpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJdGhpcy5fZGlzYWJsZSgpOwoJCX0KCgkJLy8gQXBwZW5kIHRoZSBhcmlhLWxpdmUgcmVnaW9uIHNvIHRvb2x0aXBzIGFubm91bmNlIGNvcnJlY3RseQoJCXRoaXMubGl2ZVJlZ2lvbiA9ICQoICI8ZGl2PiIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAibG9nIiwKCQkJCSJhcmlhLWxpdmUiOiAiYXNzZXJ0aXZlIiwKCQkJCSJhcmlhLXJlbGV2YW50IjogImFkZGl0aW9ucyIKCQkJfSkKCQkJLmFkZENsYXNzKCAidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiApCgkJCS5hcHBlbmRUbyggdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkgKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpc1sgdmFsdWUgPyAiX2Rpc2FibGUiIDogIl9lbmFibGUiIF0oKTsKCQkJdGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlOwoJCQkvLyBkaXNhYmxlIGVsZW1lbnQgc3R5bGUgY2hhbmdlcwoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOwoKCQlpZiAoIGtleSA9PT0gImNvbnRlbnQiICkgewoJCQkkLmVhY2goIHRoaXMudG9vbHRpcHMsIGZ1bmN0aW9uKCBpZCwgZWxlbWVudCApIHsKCQkJCXRoYXQuX3VwZGF0ZUNvbnRlbnQoIGVsZW1lbnQgKTsKCQkJfSk7CgkJfQoJfSwKCglfZGlzYWJsZTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQkvLyBjbG9zZSBvcGVuIHRvb2x0aXBzCgkJJC5lYWNoKCB0aGlzLnRvb2x0aXBzLCBmdW5jdGlvbiggaWQsIGVsZW1lbnQgKSB7CgkJCXZhciBldmVudCA9ICQuRXZlbnQoICJibHVyIiApOwoJCQlldmVudC50YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0ID0gZWxlbWVudFswXTsKCQkJdGhhdC5jbG9zZSggZXZlbnQsIHRydWUgKTsKCQl9KTsKCgkJLy8gcmVtb3ZlIHRpdGxlIGF0dHJpYnV0ZXMgdG8gcHJldmVudCBuYXRpdmUgdG9vbHRpcHMKCQl0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLml0ZW1zICkuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBlbGVtZW50ID0gJCggdGhpcyApOwoJCQlpZiAoIGVsZW1lbnQuaXMoICJbdGl0bGVdIiApICkgewoJCQkJZWxlbWVudAoJCQkJCS5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIsIGVsZW1lbnQuYXR0ciggInRpdGxlIiApICkKCQkJCQkucmVtb3ZlQXR0ciggInRpdGxlIiApOwoJCQl9CgkJfSk7Cgl9LAoKCV9lbmFibGU6IGZ1bmN0aW9uKCkgewoJCS8vIHJlc3RvcmUgdGl0bGUgYXR0cmlidXRlcwoJCXRoaXMuZWxlbWVudC5maW5kKCB0aGlzLm9wdGlvbnMuaXRlbXMgKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIGVsZW1lbnQgPSAkKCB0aGlzICk7CgkJCWlmICggZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApIHsKCQkJCWVsZW1lbnQuYXR0ciggInRpdGxlIiwgZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApOwoJCQl9CgkJfSk7Cgl9LAoKCW9wZW46IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCXRhcmdldCA9ICQoIGV2ZW50ID8gZXZlbnQudGFyZ2V0IDogdGhpcy5lbGVtZW50ICkKCQkJCS8vIHdlIG5lZWQgY2xvc2VzdCBoZXJlIGR1ZSB0byBtb3VzZW92ZXIgYnViYmxpbmcsCgkJCQkvLyBidXQgYWx3YXlzIHBvaW50aW5nIGF0IHRoZSBzYW1lIGV2ZW50IHRhcmdldAoJCQkJLmNsb3Nlc3QoIHRoaXMub3B0aW9ucy5pdGVtcyApOwoKCQkvLyBObyBlbGVtZW50IHRvIHNob3cgYSB0b29sdGlwIGZvciBvciB0aGUgdG9vbHRpcCBpcyBhbHJlYWR5IG9wZW4KCQlpZiAoICF0YXJnZXQubGVuZ3RoIHx8IHRhcmdldC5kYXRhKCAidWktdG9vbHRpcC1pZCIgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCB0YXJnZXQuYXR0ciggInRpdGxlIiApICkgewoJCQl0YXJnZXQuZGF0YSggInVpLXRvb2x0aXAtdGl0bGUiLCB0YXJnZXQuYXR0ciggInRpdGxlIiApICk7CgkJfQoKCQl0YXJnZXQuZGF0YSggInVpLXRvb2x0aXAtb3BlbiIsIHRydWUgKTsKCgkJLy8ga2lsbCBwYXJlbnQgdG9vbHRpcHMsIGN1c3RvbSBvciBuYXRpdmUsIGZvciBob3ZlcgoJCWlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gIm1vdXNlb3ZlciIgKSB7CgkJCXRhcmdldC5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBwYXJlbnQgPSAkKCB0aGlzICksCgkJCQkJYmx1ckV2ZW50OwoJCQkJaWYgKCBwYXJlbnQuZGF0YSggInVpLXRvb2x0aXAtb3BlbiIgKSApIHsKCQkJCQlibHVyRXZlbnQgPSAkLkV2ZW50KCAiYmx1ciIgKTsKCQkJCQlibHVyRXZlbnQudGFyZ2V0ID0gYmx1ckV2ZW50LmN1cnJlbnRUYXJnZXQgPSB0aGlzOwoJCQkJCXRoYXQuY2xvc2UoIGJsdXJFdmVudCwgdHJ1ZSApOwoJCQkJfQoJCQkJaWYgKCBwYXJlbnQuYXR0ciggInRpdGxlIiApICkgewoJCQkJCXBhcmVudC51bmlxdWVJZCgpOwoJCQkJCXRoYXQucGFyZW50c1sgdGhpcy5pZCBdID0gewoJCQkJCQllbGVtZW50OiB0aGlzLAoJCQkJCQl0aXRsZTogcGFyZW50LmF0dHIoICJ0aXRsZSIgKQoJCQkJCX07CgkJCQkJcGFyZW50LmF0dHIoICJ0aXRsZSIsICIiICk7CgkJCQl9CgkJCX0pOwoJCX0KCgkJdGhpcy5fdXBkYXRlQ29udGVudCggdGFyZ2V0LCBldmVudCApOwoJfSwKCglfdXBkYXRlQ29udGVudDogZnVuY3Rpb24oIHRhcmdldCwgZXZlbnQgKSB7CgkJdmFyIGNvbnRlbnQsCgkJCWNvbnRlbnRPcHRpb24gPSB0aGlzLm9wdGlvbnMuY29udGVudCwKCQkJdGhhdCA9IHRoaXMsCgkJCWV2ZW50VHlwZSA9IGV2ZW50ID8gZXZlbnQudHlwZSA6IG51bGw7CgoJCWlmICggdHlwZW9mIGNvbnRlbnRPcHRpb24gPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gdGhpcy5fb3BlbiggZXZlbnQsIHRhcmdldCwgY29udGVudE9wdGlvbiApOwoJCX0KCgkJY29udGVudCA9IGNvbnRlbnRPcHRpb24uY2FsbCggdGFyZ2V0WzBdLCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7CgkJCS8vIGlnbm9yZSBhc3luYyByZXNwb25zZSBpZiB0b29sdGlwIHdhcyBjbG9zZWQgYWxyZWFkeQoJCQlpZiAoICF0YXJnZXQuZGF0YSggInVpLXRvb2x0aXAtb3BlbiIgKSApIHsKCQkJCXJldHVybjsKCQkJfQoJCQkvLyBJRSBtYXkgaW5zdGFudGx5IHNlcnZlIGEgY2FjaGVkIHJlc3BvbnNlIGZvciBhamF4IHJlcXVlc3RzCgkJCS8vIGRlbGF5IHRoaXMgY2FsbCB0byBfb3BlbiBzbyB0aGUgb3RoZXIgY2FsbCB0byBfb3BlbiBydW5zIGZpcnN0CgkJCXRoYXQuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJLy8galF1ZXJ5IGNyZWF0ZXMgYSBzcGVjaWFsIGV2ZW50IGZvciBmb2N1c2luIHdoZW4gaXQgZG9lc24ndAoJCQkJLy8gZXhpc3QgbmF0aXZlbHkuIFRvIGltcHJvdmUgcGVyZm9ybWFuY2UsIHRoZSBuYXRpdmUgZXZlbnQKCQkJCS8vIG9iamVjdCBpcyByZXVzZWQgYW5kIHRoZSB0eXBlIGlzIGNoYW5nZWQuIFRoZXJlZm9yZSwgd2UgY2FuJ3QKCQkJCS8vIHJlbHkgb24gdGhlIHR5cGUgYmVpbmcgY29ycmVjdCBhZnRlciB0aGUgZXZlbnQgZmluaXNoZWQKCQkJCS8vIGJ1YmJsaW5nLCBzbyB3ZSBzZXQgaXQgYmFjayB0byB0aGUgcHJldmlvdXMgdmFsdWUuICgjODc0MCkKCQkJCWlmICggZXZlbnQgKSB7CgkJCQkJZXZlbnQudHlwZSA9IGV2ZW50VHlwZTsKCQkJCX0KCQkJCXRoaXMuX29wZW4oIGV2ZW50LCB0YXJnZXQsIHJlc3BvbnNlICk7CgkJCX0pOwoJCX0pOwoJCWlmICggY29udGVudCApIHsKCQkJdGhpcy5fb3BlbiggZXZlbnQsIHRhcmdldCwgY29udGVudCApOwoJCX0KCX0sCgoJX29wZW46IGZ1bmN0aW9uKCBldmVudCwgdGFyZ2V0LCBjb250ZW50ICkgewoJCXZhciB0b29sdGlwLCBldmVudHMsIGRlbGF5ZWRTaG93LCBhMTF5Q29udGVudCwKCQkJcG9zaXRpb25PcHRpb24gPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApOwoKCQlpZiAoICFjb250ZW50ICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBDb250ZW50IGNhbiBiZSB1cGRhdGVkIG11bHRpcGxlIHRpbWVzLiBJZiB0aGUgdG9vbHRpcCBhbHJlYWR5CgkJLy8gZXhpc3RzLCB0aGVuIGp1c3QgdXBkYXRlIHRoZSBjb250ZW50IGFuZCBiYWlsLgoJCXRvb2x0aXAgPSB0aGlzLl9maW5kKCB0YXJnZXQgKTsKCQlpZiAoIHRvb2x0aXAubGVuZ3RoICkgewoJCQl0b29sdGlwLmZpbmQoICIudWktdG9vbHRpcC1jb250ZW50IiApLmh0bWwoIGNvbnRlbnQgKTsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gaWYgd2UgaGF2ZSBhIHRpdGxlLCBjbGVhciBpdCB0byBwcmV2ZW50IHRoZSBuYXRpdmUgdG9vbHRpcAoJCS8vIHdlIGhhdmUgdG8gY2hlY2sgZmlyc3QgdG8gYXZvaWQgZGVmaW5pbmcgYSB0aXRsZSBpZiBub25lIGV4aXN0cwoJCS8vICh3ZSBkb24ndCB3YW50IHRvIGNhdXNlIGFuIGVsZW1lbnQgdG8gc3RhcnQgbWF0Y2hpbmcgW3RpdGxlXSkKCQkvLwoJCS8vIFdlIHVzZSByZW1vdmVBdHRyIG9ubHkgZm9yIGtleSBldmVudHMsIHRvIGFsbG93IElFIHRvIGV4cG9ydCB0aGUgY29ycmVjdAoJCS8vIGFjY2Vzc2libGUgYXR0cmlidXRlcy4gRm9yIG1vdXNlIGV2ZW50cywgc2V0IHRvIGVtcHR5IHN0cmluZyB0byBhdm9pZAoJCS8vIG5hdGl2ZSB0b29sdGlwIHNob3dpbmcgdXAgKGhhcHBlbnMgb25seSB3aGVuIHJlbW92aW5nIGluc2lkZSBtb3VzZW92ZXIpLgoJCWlmICggdGFyZ2V0LmlzKCAiW3RpdGxlXSIgKSApIHsKCQkJaWYgKCBldmVudCAmJiBldmVudC50eXBlID09PSAibW91c2VvdmVyIiApIHsKCQkJCXRhcmdldC5hdHRyKCAidGl0bGUiLCAiIiApOwoJCQl9IGVsc2UgewoJCQkJdGFyZ2V0LnJlbW92ZUF0dHIoICJ0aXRsZSIgKTsKCQkJfQoJCX0KCgkJdG9vbHRpcCA9IHRoaXMuX3Rvb2x0aXAoIHRhcmdldCApOwoJCXRoaXMuX2FkZERlc2NyaWJlZEJ5KCB0YXJnZXQsIHRvb2x0aXAuYXR0ciggImlkIiApICk7CgkJdG9vbHRpcC5maW5kKCAiLnVpLXRvb2x0aXAtY29udGVudCIgKS5odG1sKCBjb250ZW50ICk7CgoJCS8vIFN1cHBvcnQ6IFZvaWNlb3ZlciBvbiBPUyBYLCBKQVdTIG9uIElFIDw9IDkKCQkvLyBKQVdTIGFubm91bmNlcyBkZWxldGlvbnMgZXZlbiB3aGVuIGFyaWEtcmVsZXZhbnQ9ImFkZGl0aW9ucyIKCQkvLyBWb2ljZW92ZXIgd2lsbCBzb21ldGltZXMgcmUtcmVhZCB0aGUgZW50aXJlIGxvZyByZWdpb24ncyBjb250ZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcKCQl0aGlzLmxpdmVSZWdpb24uY2hpbGRyZW4oKS5oaWRlKCk7CgkJaWYgKCBjb250ZW50LmNsb25lICkgewoJCQlhMTF5Q29udGVudCA9IGNvbnRlbnQuY2xvbmUoKTsKCQkJYTExeUNvbnRlbnQucmVtb3ZlQXR0ciggImlkIiApLmZpbmQoICJbaWRdIiApLnJlbW92ZUF0dHIoICJpZCIgKTsKCQl9IGVsc2UgewoJCQlhMTF5Q29udGVudCA9IGNvbnRlbnQ7CgkJfQoJCSQoICI8ZGl2PiIgKS5odG1sKCBhMTF5Q29udGVudCApLmFwcGVuZFRvKCB0aGlzLmxpdmVSZWdpb24gKTsKCgkJZnVuY3Rpb24gcG9zaXRpb24oIGV2ZW50ICkgewoJCQlwb3NpdGlvbk9wdGlvbi5vZiA9IGV2ZW50OwoJCQlpZiAoIHRvb2x0aXAuaXMoICI6aGlkZGVuIiApICkgewoJCQkJcmV0dXJuOwoJCQl9CgkJCXRvb2x0aXAucG9zaXRpb24oIHBvc2l0aW9uT3B0aW9uICk7CgkJfQoJCWlmICggdGhpcy5vcHRpb25zLnRyYWNrICYmIGV2ZW50ICYmIC9ebW91c2UvLnRlc3QoIGV2ZW50LnR5cGUgKSApIHsKCQkJdGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHsKCQkJCW1vdXNlbW92ZTogcG9zaXRpb24KCQkJfSk7CgkJCS8vIHRyaWdnZXIgb25jZSB0byBvdmVycmlkZSBlbGVtZW50LXJlbGF0aXZlIHBvc2l0aW9uaW5nCgkJCXBvc2l0aW9uKCBldmVudCApOwoJCX0gZWxzZSB7CgkJCXRvb2x0aXAucG9zaXRpb24oICQuZXh0ZW5kKHsKCQkJCW9mOiB0YXJnZXQKCQkJfSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uICkgKTsKCQl9CgoJCXRoaXMuaGlkaW5nID0gZmFsc2U7CgkJdGhpcy5jbG9zaW5nID0gZmFsc2U7CgkJdG9vbHRpcC5oaWRlKCk7CgoJCXRoaXMuX3Nob3coIHRvb2x0aXAsIHRoaXMub3B0aW9ucy5zaG93ICk7CgkJLy8gSGFuZGxlIHRyYWNraW5nIHRvb2x0aXBzIHRoYXQgYXJlIHNob3duIHdpdGggYSBkZWxheSAoIzg2NDQpLiBBcyBzb29uCgkJLy8gYXMgdGhlIHRvb2x0aXAgaXMgdmlzaWJsZSwgcG9zaXRpb24gdGhlIHRvb2x0aXAgdXNpbmcgdGhlIG1vc3QgcmVjZW50CgkJLy8gZXZlbnQuCgkJaWYgKCB0aGlzLm9wdGlvbnMuc2hvdyAmJiB0aGlzLm9wdGlvbnMuc2hvdy5kZWxheSApIHsKCQkJZGVsYXllZFNob3cgPSB0aGlzLmRlbGF5ZWRTaG93ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CgkJCQlpZiAoIHRvb2x0aXAuaXMoICI6dmlzaWJsZSIgKSApIHsKCQkJCQlwb3NpdGlvbiggcG9zaXRpb25PcHRpb24ub2YgKTsKCQkJCQljbGVhckludGVydmFsKCBkZWxheWVkU2hvdyApOwoJCQkJfQoJCQl9LCAkLmZ4LmludGVydmFsICk7CgkJfQoKCQl0aGlzLl90cmlnZ2VyKCAib3BlbiIsIGV2ZW50LCB7IHRvb2x0aXA6IHRvb2x0aXAgfSApOwoKCQlldmVudHMgPSB7CgkJCWtleXVwOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FU0NBUEUgKSB7CgkJCQkJdmFyIGZha2VFdmVudCA9ICQuRXZlbnQoZXZlbnQpOwoJCQkJCWZha2VFdmVudC5jdXJyZW50VGFyZ2V0ID0gdGFyZ2V0WzBdOwoJCQkJCXRoaXMuY2xvc2UoIGZha2VFdmVudCwgdHJ1ZSApOwoJCQkJfQoJCQl9CgkJfTsKCgkJLy8gT25seSBiaW5kIHJlbW92ZSBoYW5kbGVyIGZvciBkZWxlZ2F0ZWQgdGFyZ2V0cy4gTm9uLWRlbGVnYXRlZAoJCS8vIHRvb2x0aXBzIHdpbGwgaGFuZGxlIHRoaXMgaW4gZGVzdHJveS4KCQlpZiAoIHRhcmdldFsgMCBdICE9PSB0aGlzLmVsZW1lbnRbIDAgXSApIHsKCQkJZXZlbnRzLnJlbW92ZSA9IGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5fcmVtb3ZlVG9vbHRpcCggdG9vbHRpcCApOwoJCQl9OwoJCX0KCgkJaWYgKCAhZXZlbnQgfHwgZXZlbnQudHlwZSA9PT0gIm1vdXNlb3ZlciIgKSB7CgkJCWV2ZW50cy5tb3VzZWxlYXZlID0gImNsb3NlIjsKCQl9CgkJaWYgKCAhZXZlbnQgfHwgZXZlbnQudHlwZSA9PT0gImZvY3VzaW4iICkgewoJCQlldmVudHMuZm9jdXNvdXQgPSAiY2xvc2UiOwoJCX0KCQl0aGlzLl9vbiggdHJ1ZSwgdGFyZ2V0LCBldmVudHMgKTsKCX0sCgoJY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCXRhcmdldCA9ICQoIGV2ZW50ID8gZXZlbnQuY3VycmVudFRhcmdldCA6IHRoaXMuZWxlbWVudCApLAoJCQl0b29sdGlwID0gdGhpcy5fZmluZCggdGFyZ2V0ICk7CgoJCS8vIGRpc2FibGluZyBjbG9zZXMgdGhlIHRvb2x0aXAsIHNvIHdlIG5lZWQgdG8gdHJhY2sgd2hlbiB3ZSdyZSBjbG9zaW5nCgkJLy8gdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcCBpbiBjYXNlIHRoZSB0b29sdGlwIGJlY29tZXMgZGlzYWJsZWQgb24gY2xvc2UKCQlpZiAoIHRoaXMuY2xvc2luZyApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gQ2xlYXIgdGhlIGludGVydmFsIGZvciBkZWxheWVkIHRyYWNraW5nIHRvb2x0aXBzCgkJY2xlYXJJbnRlcnZhbCggdGhpcy5kZWxheWVkU2hvdyApOwoKCQkvLyBvbmx5IHNldCB0aXRsZSBpZiB3ZSBoYWQgb25lIGJlZm9yZSAoc2VlIGNvbW1lbnQgaW4gX29wZW4oKSkKCQkvLyBJZiB0aGUgdGl0bGUgYXR0cmlidXRlIGhhcyBjaGFuZ2VkIHNpbmNlIG9wZW4oKSwgZG9uJ3QgcmVzdG9yZQoJCWlmICggdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICYmICF0YXJnZXQuYXR0ciggInRpdGxlIiApICkgewoJCQl0YXJnZXQuYXR0ciggInRpdGxlIiwgdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICk7CgkJfQoKCQl0aGlzLl9yZW1vdmVEZXNjcmliZWRCeSggdGFyZ2V0ICk7CgoJCXRoaXMuaGlkaW5nID0gdHJ1ZTsKCQl0b29sdGlwLnN0b3AoIHRydWUgKTsKCQl0aGlzLl9oaWRlKCB0b29sdGlwLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7CgkJCXRoYXQuX3JlbW92ZVRvb2x0aXAoICQoIHRoaXMgKSApOwoJCQl0aGlzLmhpZGluZyA9IGZhbHNlOwoJCQl0aGlzLmNsb3NpbmcgPSBmYWxzZTsKCQl9KTsKCgkJdGFyZ2V0LnJlbW92ZURhdGEoICJ1aS10b29sdGlwLW9wZW4iICk7CgkJdGhpcy5fb2ZmKCB0YXJnZXQsICJtb3VzZWxlYXZlIGZvY3Vzb3V0IGtleXVwIiApOwoKCQkvLyBSZW1vdmUgJ3JlbW92ZScgYmluZGluZyBvbmx5IG9uIGRlbGVnYXRlZCB0YXJnZXRzCgkJaWYgKCB0YXJnZXRbIDAgXSAhPT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7CgkJCXRoaXMuX29mZiggdGFyZ2V0LCAicmVtb3ZlIiApOwoJCX0KCQl0aGlzLl9vZmYoIHRoaXMuZG9jdW1lbnQsICJtb3VzZW1vdmUiICk7CgoJCWlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gIm1vdXNlbGVhdmUiICkgewoJCQkkLmVhY2goIHRoaXMucGFyZW50cywgZnVuY3Rpb24oIGlkLCBwYXJlbnQgKSB7CgkJCQkkKCBwYXJlbnQuZWxlbWVudCApLmF0dHIoICJ0aXRsZSIsIHBhcmVudC50aXRsZSApOwoJCQkJZGVsZXRlIHRoYXQucGFyZW50c1sgaWQgXTsKCQkJfSk7CgkJfQoKCQl0aGlzLmNsb3NpbmcgPSB0cnVlOwoJCXRoaXMuX3RyaWdnZXIoICJjbG9zZSIsIGV2ZW50LCB7IHRvb2x0aXA6IHRvb2x0aXAgfSApOwoJCWlmICggIXRoaXMuaGlkaW5nICkgewoJCQl0aGlzLmNsb3NpbmcgPSBmYWxzZTsKCQl9Cgl9LAoKCV90b29sdGlwOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl2YXIgdG9vbHRpcCA9ICQoICI8ZGl2PiIgKQoJCQkJLmF0dHIoICJyb2xlIiwgInRvb2x0aXAiICkKCQkJCS5hZGRDbGFzcyggInVpLXRvb2x0aXAgdWktd2lkZ2V0IHVpLWNvcm5lci1hbGwgdWktd2lkZ2V0LWNvbnRlbnQgIiArCgkJCQkJKCB0aGlzLm9wdGlvbnMudG9vbHRpcENsYXNzIHx8ICIiICkgKSwKCQkJaWQgPSB0b29sdGlwLnVuaXF1ZUlkKCkuYXR0ciggImlkIiApOwoKCQkkKCAiPGRpdj4iICkKCQkJLmFkZENsYXNzKCAidWktdG9vbHRpcC1jb250ZW50IiApCgkJCS5hcHBlbmRUbyggdG9vbHRpcCApOwoKCQl0b29sdGlwLmFwcGVuZFRvKCB0aGlzLmRvY3VtZW50WzBdLmJvZHkgKTsKCQl0aGlzLnRvb2x0aXBzWyBpZCBdID0gZWxlbWVudDsKCQlyZXR1cm4gdG9vbHRpcDsKCX0sCgoJX2ZpbmQ6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7CgkJdmFyIGlkID0gdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLWlkIiApOwoJCXJldHVybiBpZCA/ICQoICIjIiArIGlkICkgOiAkKCk7Cgl9LAoKCV9yZW1vdmVUb29sdGlwOiBmdW5jdGlvbiggdG9vbHRpcCApIHsKCQl0b29sdGlwLnJlbW92ZSgpOwoJCWRlbGV0ZSB0aGlzLnRvb2x0aXBzWyB0b29sdGlwLmF0dHIoICJpZCIgKSBdOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQkvLyBjbG9zZSBvcGVuIHRvb2x0aXBzCgkJJC5lYWNoKCB0aGlzLnRvb2x0aXBzLCBmdW5jdGlvbiggaWQsIGVsZW1lbnQgKSB7CgkJCS8vIERlbGVnYXRlIHRvIGNsb3NlIG1ldGhvZCB0byBoYW5kbGUgY29tbW9uIGNsZWFudXAKCQkJdmFyIGV2ZW50ID0gJC5FdmVudCggImJsdXIiICk7CgkJCWV2ZW50LnRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBlbGVtZW50WzBdOwoJCQl0aGF0LmNsb3NlKCBldmVudCwgdHJ1ZSApOwoKCQkJLy8gUmVtb3ZlIGltbWVkaWF0ZWx5OyBkZXN0cm95aW5nIGFuIG9wZW4gdG9vbHRpcCBkb2Vzbid0IHVzZSB0aGUKCQkJLy8gaGlkZSBhbmltYXRpb24KCQkJJCggIiMiICsgaWQgKS5yZW1vdmUoKTsKCgkJCS8vIFJlc3RvcmUgdGhlIHRpdGxlCgkJCWlmICggZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApIHsKCQkJCS8vIElmIHRoZSB0aXRsZSBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQgc2luY2Ugb3BlbigpLCBkb24ndCByZXN0b3JlCgkJCQlpZiAoICFlbGVtZW50LmF0dHIoICJ0aXRsZSIgKSApIHsKCQkJCQllbGVtZW50LmF0dHIoICJ0aXRsZSIsIGVsZW1lbnQuZGF0YSggInVpLXRvb2x0aXAtdGl0bGUiICkgKTsKCQkJCX0KCQkJCWVsZW1lbnQucmVtb3ZlRGF0YSggInVpLXRvb2x0aXAtdGl0bGUiICk7CgkJCX0KCQl9KTsKCQl0aGlzLmxpdmVSZWdpb24ucmVtb3ZlKCk7Cgl9Cn0pOwoKCgp9KSk7</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="25" hostname="omniconv" path="/OMNIStatic/scripts/jquery/jquery-ui-extension.js" url="http://omniconv/OMNIStatic/scripts/jquery/jquery-ui-extension.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="13" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2236" sendTime="24" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS11aS1leHRlbnNpb24uanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>OTUx</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDVhY2M2ZGRhOGVkMzE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDk1MQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyoqDQogKiBPdmVycmlkZSBzZWxlY3RhYmxlKCkgdG8gZXh0ZW5kIGZ1bmN0aW9uYWxpdHkgZm9yIHNoaWZ0IHNlbGVjdGlvbnMgYW5kIHNjcm9sbGJhciBkZXRlY3Rpb24uDQogKi8NCihmdW5jdGlvbigkKXsgDQoJLy8gVG8gb3ZlcnJpZGUgd2lkZ2V0IGp1c3QgZ2l2ZSBoaW0gdGhlIHNhbWUgbmFtZQ0KCSQud2lkZ2V0KCJzaGlmdC5zZWxlY3RhYmxlIiwgJC51aS5zZWxlY3RhYmxlLCB7DQoJICAgIG9wdGlvbnM6IHt9LCAvLyByZXF1aXJlZA0KCSAgICBwcmV2aW91c0luZGV4OiAtMSwgLy8gYWRkaXRpb25hbCBhdHRyaWJ1dGUgdG8gc3RvcmUgcHJldmlvdXMgc2VsZWN0aW9uIGluZGV4DQoJICAgIGN1cnJlbnRJbmRleDogLTEsIC8vIGFkZGl0aW9uYWwgYXR0cmlidXRlIHRvIHN0b3JlIGN1cnJlbnQgc2VsZWN0aW9uIGluZGV4DQoJICAgIHNjcm9sbGluZzogZmFsc2UsDQoJICAgIF9jcmVhdGU6IGZ1bmN0aW9uKCkgeyAvLyByZXF1aXJlZA0KCSAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KCQ0KCSAgICAgICAgJC51aS5zZWxlY3RhYmxlLnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyk7IC8vIGRlZmF1bHQgaW1wbGVtZW50YXRpb24NCgkNCgkgICAgICAgIC8vIGhlcmUgd2UgYXJlIGNhdGNoaW5nICJzZWxlY3RpbmciIGV2ZW50IHdpdGggc2hpZnQga2V5DQoJICAgICAgICAkKHRoaXMuZWxlbWVudCkub24oJ3NlbGVjdGFibGVzZWxlY3RpbmcnLCBmdW5jdGlvbihldmVudCwgdWkpew0KCSAgICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gJCh1aS5zZWxlY3RpbmcudGFnTmFtZSwgZXZlbnQudGFyZ2V0KS5pbmRleCh1aS5zZWxlY3RpbmcpOw0KCSAgICAgICAgICAgIGlmKGV2ZW50LnNoaWZ0S2V5ICYmIHNlbGYucHJldmlvdXNJbmRleCA+IC0xKSB7DQoJICAgICAgICAgICAgICAgICQodWkuc2VsZWN0aW5nLnRhZ05hbWUsIGV2ZW50LnRhcmdldCkuc2xpY2UoTWF0aC5taW4oc2VsZi5wcmV2aW91c0luZGV4LCBzZWxmLmN1cnJlbnRJbmRleCksIDEgKyBNYXRoLm1heChzZWxmLnByZXZpb3VzSW5kZXgsIHNlbGYuY3VycmVudEluZGV4KSkuYWRkQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7DQoJICAgICAgICAgICAgfSBlbHNlIHsNCgkgICAgICAgICAgICAgICAgc2VsZi5wcmV2aW91c0luZGV4ID0gc2VsZi5jdXJyZW50SW5kZXg7DQoJICAgICAgICAgICAgfQ0KCSAgICAgICAgfSk7DQoJICAgIH0sDQoJICAgIF9tb3VzZVN0YXJ0OiBmdW5jdGlvbihldmVudCkgew0KCSAgICAJLy8gZGV0ZWN0IHNjcm9sbCBiYXJzLiBTaG9ydC1jaXJjdWl0IGlmIGNsaWNrZWQgd2l0aGluIHNjcm9sbGJhcg0KCSAgICAJaWYgKGV2ZW50LnBhZ2VYID4gJChldmVudC50YXJnZXQpWzBdLmNsaWVudFdpZHRoICsgJChldmVudC50YXJnZXQpLm9mZnNldCgpLmxlZnQpIHsNCgkgICAgCQlzY3JvbGxpbmcgPSB0cnVlOw0KCSAgICAJCXJldHVybjsNCgkgICAgCX0NCiAgICAJCXNjcm9sbGluZyA9IGZhbHNlOw0KCSAgICAgICAgJC51aS5zZWxlY3RhYmxlLnByb3RvdHlwZS5fbW91c2VTdGFydC5jYWxsKHRoaXMsIGV2ZW50KTsgLy8gZGVmYXVsdCBpbXBsZW1lbnRhdGlvbg0KCSAgICB9LA0KCSAgICBfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCkgew0KCSAgICAJLy8gZG9uJ3Qgd29ycnkgYWJvdXQgbW91c2UgZHJhZyBldmVudHMgd2hlbiBzY3JvbGxpbmcNCgkgICAgCWlmIChzY3JvbGxpbmcpIHsNCgkgICAgCQlyZXR1cm47DQoJICAgIAl9DQoJICAgICAgICAkLnVpLnNlbGVjdGFibGUucHJvdG90eXBlLl9tb3VzZURyYWcuY2FsbCh0aGlzLCBldmVudCk7IC8vIGRlZmF1bHQgaW1wbGVtZW50YXRpb24NCgkgICAgfSwNCgkgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7IC8vIHJlcXVpcmVkLCBkZWZhdWx0IGltcGxlbWVudGF0aW9uDQoJICAgICAgICAkLnVpLnNlbGVjdGFibGUucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTsNCgkgICAgfSwNCgkgICAgX3NldE9wdGlvbjogZnVuY3Rpb24oKSB7IC8vIHJlcXVpcmVkLCBkZWZhdWx0IGltcGxlbWVudGF0aW9uDQoJICAgICAgICAkLnVpLnNlbGVjdGFibGUucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCgkgICAgfQ0KCX0pOw0KfSkoalF1ZXJ5KTs=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="26" hostname="omniconv" path="/OMNIStatic/scripts/jquery/jquery-ui.css" url="http://omniconv/OMNIStatic/scripts/jquery/jquery-ui.css" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="14" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2238" sendTime="3" waitTime="0" receiveTime="2">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvanF1ZXJ5L2pxdWVyeS11aS5jc3MgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9jc3M=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA1YWNjNmRkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTA5OTg=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDE2IEphbiAyMDE4IDE0OjU4OjEyIEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNWFjYzZkZGE4ZWQzMTowIg0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTA5OTgNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyohIGpRdWVyeSBVSSAtIHYxLjExLjEgLSAyMDE0LTA4LTEzCiogaHR0cDovL2pxdWVyeXVpLmNvbQoqIEluY2x1ZGVzOiBjb3JlLmNzcywgYWNjb3JkaW9uLmNzcywgYXV0b2NvbXBsZXRlLmNzcywgYnV0dG9uLmNzcywgZGF0ZXBpY2tlci5jc3MsIGRpYWxvZy5jc3MsIGRyYWdnYWJsZS5jc3MsIG1lbnUuY3NzLCBwcm9ncmVzc2Jhci5jc3MsIHJlc2l6YWJsZS5jc3MsIHNlbGVjdGFibGUuY3NzLCBzZWxlY3RtZW51LmNzcywgc2xpZGVyLmNzcywgc29ydGFibGUuY3NzLCBzcGlubmVyLmNzcywgdGFicy5jc3MsIHRvb2x0aXAuY3NzLCB0aGVtZS5jc3MKKiBUbyB2aWV3IGFuZCBtb2RpZnkgdGhpcyB0aGVtZSwgdmlzaXQgaHR0cDovL2pxdWVyeXVpLmNvbS90aGVtZXJvbGxlci8/ZmZEZWZhdWx0PVRyZWJ1Y2hldCUyME1TJTJDVGFob21hJTJDVmVyZGFuYSUyQ0FyaWFsJTJDc2Fucy1zZXJpZiZmd0RlZmF1bHQ9Ym9sZCZmc0RlZmF1bHQ9MS4xZW0mY29ybmVyUmFkaXVzPTRweCZiZ0NvbG9ySGVhZGVyPWY2YTgyOCZiZ1RleHR1cmVIZWFkZXI9Z2xvc3Nfd2F2ZSZiZ0ltZ09wYWNpdHlIZWFkZXI9MzUmYm9yZGVyQ29sb3JIZWFkZXI9ZTc4ZjA4JmZjSGVhZGVyPWZmZmZmZiZpY29uQ29sb3JIZWFkZXI9ZmZmZmZmJmJnQ29sb3JDb250ZW50PWVlZWVlZSZiZ1RleHR1cmVDb250ZW50PWhpZ2hsaWdodF9zb2Z0JmJnSW1nT3BhY2l0eUNvbnRlbnQ9MTAwJmJvcmRlckNvbG9yQ29udGVudD1kZGRkZGQmZmNDb250ZW50PTMzMzMzMyZpY29uQ29sb3JDb250ZW50PTIyMjIyMiZiZ0NvbG9yRGVmYXVsdD1mNmY2ZjYmYmdUZXh0dXJlRGVmYXVsdD1nbGFzcyZiZ0ltZ09wYWNpdHlEZWZhdWx0PTEwMCZib3JkZXJDb2xvckRlZmF1bHQ9Y2NjY2NjJmZjRGVmYXVsdD0xYzk0YzQmaWNvbkNvbG9yRGVmYXVsdD1lZjhjMDgmYmdDb2xvckhvdmVyPWZkZjVjZSZiZ1RleHR1cmVIb3Zlcj1nbGFzcyZiZ0ltZ09wYWNpdHlIb3Zlcj0xMDAmYm9yZGVyQ29sb3JIb3Zlcj1mYmNiMDkmZmNIb3Zlcj1jNzc0MDUmaWNvbkNvbG9ySG92ZXI9ZWY4YzA4JmJnQ29sb3JBY3RpdmU9ZmZmZmZmJmJnVGV4dHVyZUFjdGl2ZT1nbGFzcyZiZ0ltZ09wYWNpdHlBY3RpdmU9NjUmYm9yZGVyQ29sb3JBY3RpdmU9ZmJkODUwJmZjQWN0aXZlPWViOGYwMCZpY29uQ29sb3JBY3RpdmU9ZWY4YzA4JmJnQ29sb3JIaWdobGlnaHQ9ZmZlNDVjJmJnVGV4dHVyZUhpZ2hsaWdodD1oaWdobGlnaHRfc29mdCZiZ0ltZ09wYWNpdHlIaWdobGlnaHQ9NzUmYm9yZGVyQ29sb3JIaWdobGlnaHQ9ZmVkMjJmJmZjSGlnaGxpZ2h0PTM2MzYzNiZpY29uQ29sb3JIaWdobGlnaHQ9MjI4ZWYxJmJnQ29sb3JFcnJvcj1iODE5MDAmYmdUZXh0dXJlRXJyb3I9ZGlhZ29uYWxzX3RoaWNrJmJnSW1nT3BhY2l0eUVycm9yPTE4JmJvcmRlckNvbG9yRXJyb3I9Y2QwYTBhJmZjRXJyb3I9ZmZmZmZmJmljb25Db2xvckVycm9yPWZmZDI3YSZiZ0NvbG9yT3ZlcmxheT02NjY2NjYmYmdUZXh0dXJlT3ZlcmxheT1kaWFnb25hbHNfdGhpY2smYmdJbWdPcGFjaXR5T3ZlcmxheT0yMCZvcGFjaXR5T3ZlcmxheT01MCZiZ0NvbG9yU2hhZG93PTAwMDAwMCZiZ1RleHR1cmVTaGFkb3c9ZmxhdCZiZ0ltZ09wYWNpdHlTaGFkb3c9MTAmb3BhY2l0eVNoYWRvdz0yMCZ0aGlja25lc3NTaGFkb3c9NXB4Jm9mZnNldFRvcFNoYWRvdz0tNXB4Jm9mZnNldExlZnRTaGFkb3c9LTVweCZjb3JuZXJSYWRpdXNTaGFkb3c9NXB4CiogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczsgTGljZW5zZWQgTUlUICovCgovKiBMYXlvdXQgaGVscGVycwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KLnVpLWhlbHBlci1oaWRkZW4gewoJZGlzcGxheTogbm9uZTsKfQoudWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIHsKCWJvcmRlcjogMDsKCWNsaXA6IHJlY3QoMCAwIDAgMCk7CgloZWlnaHQ6IDFweDsKCW1hcmdpbjogLTFweDsKCW92ZXJmbG93OiBoaWRkZW47CglwYWRkaW5nOiAwOwoJcG9zaXRpb246IGFic29sdXRlOwoJd2lkdGg6IDFweDsKfQoudWktaGVscGVyLXJlc2V0IHsKCW1hcmdpbjogMDsKCXBhZGRpbmc6IDA7Cglib3JkZXI6IDA7CglvdXRsaW5lOiAwOwoJbGluZS1oZWlnaHQ6IDEuMzsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKCWZvbnQtc2l6ZTogMTAwJTsKCWxpc3Qtc3R5bGU6IG5vbmU7Cn0KLnVpLWhlbHBlci1jbGVhcmZpeDpiZWZvcmUsCi51aS1oZWxwZXItY2xlYXJmaXg6YWZ0ZXIgewoJY29udGVudDogIiI7CglkaXNwbGF5OiB0YWJsZTsKCWJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Cn0KLnVpLWhlbHBlci1jbGVhcmZpeDphZnRlciB7CgljbGVhcjogYm90aDsKfQoudWktaGVscGVyLWNsZWFyZml4IHsKCW1pbi1oZWlnaHQ6IDA7IC8qIHN1cHBvcnQ6IElFNyAqLwp9Ci51aS1oZWxwZXItemZpeCB7Cgl3aWR0aDogMTAwJTsKCWhlaWdodDogMTAwJTsKCXRvcDogMDsKCWxlZnQ6IDA7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglvcGFjaXR5OiAwOwoJZmlsdGVyOkFscGhhKE9wYWNpdHk9MCk7IC8qIHN1cHBvcnQ6IElFOCAqLwp9CgoudWktZnJvbnQgewoJei1pbmRleDogMTAwOwp9CgoKLyogSW50ZXJhY3Rpb24gQ3VlcwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KLnVpLXN0YXRlLWRpc2FibGVkIHsKCWN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50Owp9CgoKLyogSWNvbnMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgovKiBzdGF0ZXMgYW5kIGltYWdlcyAqLwoudWktaWNvbiB7CglkaXNwbGF5OiBibG9jazsKCXRleHQtaW5kZW50OiAtOTk5OTlweDsKCW92ZXJmbG93OiBoaWRkZW47CgliYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Owp9CgoKLyogTWlzYyB2aXN1YWxzCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKLyogT3ZlcmxheXMgKi8KLnVpLXdpZGdldC1vdmVybGF5IHsKCXBvc2l0aW9uOiBmaXhlZDsKCXRvcDogMDsKCWxlZnQ6IDA7Cgl3aWR0aDogMTAwJTsKCWhlaWdodDogMTAwJTsKfQoudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taGVhZGVyIHsKCWRpc3BsYXk6IGJsb2NrOwoJY3Vyc29yOiBwb2ludGVyOwoJcG9zaXRpb246IHJlbGF0aXZlOwoJbWFyZ2luOiAycHggMCAwIDA7CglwYWRkaW5nOiAuNWVtIC41ZW0gLjVlbSAuN2VtOwoJbWluLWhlaWdodDogMDsgLyogc3VwcG9ydDogSUU3ICovCglmb250LXNpemU6IDlwdDsKCWNvbG9yOiBibGFjazsKfQoudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taWNvbnMgewoJcGFkZGluZy1sZWZ0OiAyLjJlbTsKfQoudWktYWNjb3JkaW9uIC51aS1hY2NvcmRpb24taWNvbnMgLnVpLWFjY29yZGlvbi1pY29ucyB7CglwYWRkaW5nLWxlZnQ6IDIuMmVtOwp9Ci51aS1hY2NvcmRpb24gLnVpLWFjY29yZGlvbi1oZWFkZXIgLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiB7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglsZWZ0OiAuNWVtOwoJdG9wOiA1MCU7CgltYXJnaW4tdG9wOiAtOHB4Owp9Ci51aS1hY2NvcmRpb24gLnVpLWFjY29yZGlvbi1jb250ZW50IHsKCXBhZGRpbmc6IDFlbSAyLjJlbTsKCWJvcmRlci10b3A6IDA7CglvdmVyZmxvdzogYXV0bzsKfQoudWktYWNjb3JkaW9uLWhlYWRlci51aS1zdGF0ZS1kZWZhdWx0LnVpLWFjY29yZGlvbi1pY29ucy51aS1jb3JuZXItYWxsIHsKCWJvcmRlcjogbm9uZTsKfQoudWktYWNjb3JkaW9uLWhlYWRlci1pY29uLnVpLWljb24udWktaWNvbi10cmlhbmdsZS0xLWUsCi51aS1hY2NvcmRpb24taGVhZGVyLWljb24udWktaWNvbi51aS1pY29uLXRyaWFuZ2xlLTEtcyB7CgliYWNrZ3JvdW5kLXBvc2l0aW9uOiBpbmhlcml0Owp9Ci51aS1hY2NvcmRpb24taGVhZGVyLnVpLXN0YXRlLWRlZmF1bHQgewoJYm9yZGVyOiBub25lOwp9Ci51aS1hdXRvY29tcGxldGUgewoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiAwOwoJbGVmdDogMDsKCWN1cnNvcjogZGVmYXVsdDsKfQoudWktYnV0dG9uIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jazsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCXBhZGRpbmc6IDA7CglsaW5lLWhlaWdodDogbm9ybWFsOwoJbWFyZ2luLXJpZ2h0OiAuMWVtOwoJY3Vyc29yOiBwb2ludGVyOwoJdmVydGljYWwtYWxpZ246IG1pZGRsZTsKCXRleHQtYWxpZ246IGNlbnRlcjsKCW92ZXJmbG93OiB2aXNpYmxlOyAvKiByZW1vdmVzIGV4dHJhIHdpZHRoIGluIElFICovCn0KLnVpLWJ1dHRvbiwKLnVpLWJ1dHRvbjpsaW5rLAoudWktYnV0dG9uOnZpc2l0ZWQsCi51aS1idXR0b246aG92ZXIsCi51aS1idXR0b246YWN0aXZlIHsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQovKiB0byBtYWtlIHJvb20gZm9yIHRoZSBpY29uLCBhIHdpZHRoIG5lZWRzIHRvIGJlIHNldCBoZXJlICovCi51aS1idXR0b24taWNvbi1vbmx5IHsKCXdpZHRoOiAyLjJlbTsKfQovKiBidXR0b24gZWxlbWVudHMgc2VlbSB0byBuZWVkIGEgbGl0dGxlIG1vcmUgd2lkdGggKi8KYnV0dG9uLnVpLWJ1dHRvbi1pY29uLW9ubHkgewoJd2lkdGg6IDIuNGVtOwp9Ci51aS1idXR0b24taWNvbnMtb25seSB7Cgl3aWR0aDogMy40ZW07Cn0KYnV0dG9uLnVpLWJ1dHRvbi1pY29ucy1vbmx5IHsKCXdpZHRoOiAzLjdlbTsKfQoKLyogYnV0dG9uIHRleHQgZWxlbWVudCAqLwoudWktYnV0dG9uIC51aS1idXR0b24tdGV4dCB7CglkaXNwbGF5OiBibG9jazsKCWxpbmUtaGVpZ2h0OiBub3JtYWw7Cn0KLnVpLWJ1dHRvbi10ZXh0LW9ubHkgLnVpLWJ1dHRvbi10ZXh0IHsKCXBhZGRpbmc6IDBweDsKfQoudWktYnV0dG9uLWljb24tb25seSAudWktYnV0dG9uLXRleHQsCi51aS1idXR0b24taWNvbnMtb25seSAudWktYnV0dG9uLXRleHQgewoJcGFkZGluZzogLjRlbTsKCXRleHQtaW5kZW50OiAtOTk5OTk5OXB4Owp9Ci51aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgLnVpLWJ1dHRvbi10ZXh0LAoudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWJ1dHRvbi10ZXh0IHsKCXBhZGRpbmc6IC40ZW0gMWVtIC40ZW0gMi4xZW07Cn0KLnVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IC51aS1idXR0b24tdGV4dCwKLnVpLWJ1dHRvbi10ZXh0LWljb25zIC51aS1idXR0b24tdGV4dCB7CglwYWRkaW5nOiAuNGVtIDIuMWVtIC40ZW0gMWVtOwp9Ci51aS1idXR0b24tdGV4dC1pY29ucyAudWktYnV0dG9uLXRleHQgewoJcGFkZGluZy1sZWZ0OiAyLjFlbTsKCXBhZGRpbmctcmlnaHQ6IDIuMWVtOwp9Ci8qIG5vIGljb24gc3VwcG9ydCBmb3IgaW5wdXQgZWxlbWVudHMsIHByb3ZpZGUgcGFkZGluZyBieSBkZWZhdWx0ICovCmlucHV0LnVpLWJ1dHRvbiB7CglwYWRkaW5nOiAuNGVtIDFlbTsKfQoKLyogYnV0dG9uIGljb24gZWxlbWVudChzKSAqLwoudWktYnV0dG9uLWljb24tb25seSAudWktaWNvbiwKLnVpLWJ1dHRvbi10ZXh0LWljb24tcHJpbWFyeSAudWktaWNvbiwKLnVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IC51aS1pY29uLAoudWktYnV0dG9uLXRleHQtaWNvbnMgLnVpLWljb24sCi51aS1idXR0b24taWNvbnMtb25seSAudWktaWNvbiB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl0b3A6IDUwJTsKCW1hcmdpbi10b3A6IC04cHg7Cn0KLnVpLWJ1dHRvbi1pY29uLW9ubHkgLnVpLWljb24gewoJbGVmdDogNTAlOwoJbWFyZ2luLWxlZnQ6IC04cHg7Cn0KLnVpLWJ1dHRvbi10ZXh0LWljb24tcHJpbWFyeSAudWktYnV0dG9uLWljb24tcHJpbWFyeSwKLnVpLWJ1dHRvbi10ZXh0LWljb25zIC51aS1idXR0b24taWNvbi1wcmltYXJ5LAoudWktYnV0dG9uLWljb25zLW9ubHkgLnVpLWJ1dHRvbi1pY29uLXByaW1hcnkgewoJbGVmdDogLjVlbTsKfQoudWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgLnVpLWJ1dHRvbi1pY29uLXNlY29uZGFyeSwKLnVpLWJ1dHRvbi10ZXh0LWljb25zIC51aS1idXR0b24taWNvbi1zZWNvbmRhcnksCi51aS1idXR0b24taWNvbnMtb25seSAudWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHsKCXJpZ2h0OiAuNWVtOwp9CgovKiBidXR0b24gc2V0cyAqLwoudWktYnV0dG9uc2V0IHsKCW1hcmdpbi1yaWdodDogN3B4Owp9Ci51aS1idXR0b25zZXQgLnVpLWJ1dHRvbiB7CgltYXJnaW4tbGVmdDogMDsKCW1hcmdpbi1yaWdodDogLS4zZW07Cn0KCi8qIHdvcmthcm91bmRzICovCi8qIHJlc2V0IGV4dHJhIHBhZGRpbmcgaW4gRmlyZWZveCwgc2VlIGg1YnAuY29tL2wgKi8KaW5wdXQudWktYnV0dG9uOjotbW96LWZvY3VzLWlubmVyLApidXR0b24udWktYnV0dG9uOjotbW96LWZvY3VzLWlubmVyIHsKCWJvcmRlcjogMDsKCXBhZGRpbmc6IDA7Cn0KLnVpLWRhdGVwaWNrZXIgewoJd2lkdGg6IDE3ZW07CglwYWRkaW5nOiAuMmVtIC4yZW0gMDsKCWRpc3BsYXk6IG5vbmU7Cn0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItaGVhZGVyIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCXBhZGRpbmc6IC4yZW0gMDsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2LAoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1uZXh0IHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXRvcDogMnB4OwoJd2lkdGg6IDEuOGVtOwoJaGVpZ2h0OiAxLjhlbTsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyLAoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIHsKCXRvcDogMXB4Owp9Ci51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLXByZXYgewoJbGVmdDogMnB4Owp9Ci51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLW5leHQgewoJcmlnaHQ6IDJweDsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIHsKCWxlZnQ6IDFweDsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIHsKCXJpZ2h0OiAxcHg7Cn0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItcHJldiBzcGFuLAoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1uZXh0IHNwYW4gewoJZGlzcGxheTogYmxvY2s7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglsZWZ0OiA1MCU7CgltYXJnaW4tbGVmdDogLThweDsKCXRvcDogNTAlOwoJbWFyZ2luLXRvcDogLThweDsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci10aXRsZSB7CgltYXJnaW46IDAgMi4zZW07CglsaW5lLWhlaWdodDogMS44ZW07Cgl0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItdGl0bGUgc2VsZWN0IHsKCWZvbnQtc2l6ZTogMWVtOwoJbWFyZ2luOiAxcHggMDsKfQoudWktZGF0ZXBpY2tlciBzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwKLnVpLWRhdGVwaWNrZXIgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciB7Cgl3aWR0aDogNDUlOwp9Ci51aS1kYXRlcGlja2VyIHRhYmxlIHsKCXdpZHRoOiAxMDAlOwoJZm9udC1zaXplOiAuOWVtOwoJYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKCW1hcmdpbjogMCAwIC40ZW07Cn0KLnVpLWRhdGVwaWNrZXIgdGggewoJcGFkZGluZzogLjdlbSAuM2VtOwoJdGV4dC1hbGlnbjogY2VudGVyOwoJZm9udC13ZWlnaHQ6IGJvbGQ7Cglib3JkZXI6IDA7Cn0KLnVpLWRhdGVwaWNrZXIgdGQgewoJYm9yZGVyOiAwOwoJcGFkZGluZzogMXB4Owp9Ci51aS1kYXRlcGlja2VyIHRkIHNwYW4sCi51aS1kYXRlcGlja2VyIHRkIGEgewoJZGlzcGxheTogYmxvY2s7CglwYWRkaW5nOiAuMmVtOwoJdGV4dC1hbGlnbjogcmlnaHQ7Cgl0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KLnVpLWRhdGVwaWNrZXIgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB7CgliYWNrZ3JvdW5kLWltYWdlOiBub25lOwoJbWFyZ2luOiAuN2VtIDAgMCAwOwoJcGFkZGluZzogMCAuMmVtOwoJYm9yZGVyLWxlZnQ6IDA7Cglib3JkZXItcmlnaHQ6IDA7Cglib3JkZXItYm90dG9tOiAwOwp9Ci51aS1kYXRlcGlja2VyIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgYnV0dG9uIHsKCWZsb2F0OiByaWdodDsKCW1hcmdpbjogLjVlbSAuMmVtIC40ZW07CgljdXJzb3I6IHBvaW50ZXI7CglwYWRkaW5nOiAuMmVtIC42ZW0gLjNlbSAuNmVtOwoJd2lkdGg6IGF1dG87CglvdmVyZmxvdzogdmlzaWJsZTsKfQoudWktZGF0ZXBpY2tlciAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbi51aS1kYXRlcGlja2VyLWN1cnJlbnQgewoJZmxvYXQ6IGxlZnQ7Cn0KCi8qIHdpdGggbXVsdGlwbGUgY2FsZW5kYXJzICovCi51aS1kYXRlcGlja2VyLnVpLWRhdGVwaWNrZXItbXVsdGkgewoJd2lkdGg6IGF1dG87Cn0KLnVpLWRhdGVwaWNrZXItbXVsdGkgLnVpLWRhdGVwaWNrZXItZ3JvdXAgewoJZmxvYXQ6IGxlZnQ7Cn0KLnVpLWRhdGVwaWNrZXItbXVsdGkgLnVpLWRhdGVwaWNrZXItZ3JvdXAgdGFibGUgewoJd2lkdGg6IDk1JTsKCW1hcmdpbjogMCBhdXRvIC40ZW07Cn0KLnVpLWRhdGVwaWNrZXItbXVsdGktMiAudWktZGF0ZXBpY2tlci1ncm91cCB7Cgl3aWR0aDogNTAlOwp9Ci51aS1kYXRlcGlja2VyLW11bHRpLTMgLnVpLWRhdGVwaWNrZXItZ3JvdXAgewoJd2lkdGg6IDMzLjMlOwp9Ci51aS1kYXRlcGlja2VyLW11bHRpLTQgLnVpLWRhdGVwaWNrZXItZ3JvdXAgewoJd2lkdGg6IDI1JTsKfQoudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1ncm91cC1sYXN0IC51aS1kYXRlcGlja2VyLWhlYWRlciwKLnVpLWRhdGVwaWNrZXItbXVsdGkgLnVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIC51aS1kYXRlcGlja2VyLWhlYWRlciB7Cglib3JkZXItbGVmdC13aWR0aDogMDsKfQoudWktZGF0ZXBpY2tlci1tdWx0aSAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHsKCWNsZWFyOiBsZWZ0Owp9Ci51aS1kYXRlcGlja2VyLXJvdy1icmVhayB7CgljbGVhcjogYm90aDsKCXdpZHRoOiAxMDAlOwoJZm9udC1zaXplOiAwOwp9CgovKiBSVEwgc3VwcG9ydCAqLwoudWktZGF0ZXBpY2tlci1ydGwgewoJZGlyZWN0aW9uOiBydGw7Cn0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLXByZXYgewoJcmlnaHQ6IDJweDsKCWxlZnQ6IGF1dG87Cn0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLW5leHQgewoJbGVmdDogMnB4OwoJcmlnaHQ6IGF1dG87Cn0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLXByZXY6aG92ZXIgewoJcmlnaHQ6IDFweDsKCWxlZnQ6IGF1dG87Cn0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLW5leHQ6aG92ZXIgewoJbGVmdDogMXB4OwoJcmlnaHQ6IGF1dG87Cn0KLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgewoJY2xlYXI6IHJpZ2h0Owp9Ci51aS1kYXRlcGlja2VyLXJ0bCAudWktZGF0ZXBpY2tlci1idXR0b25wYW5lIGJ1dHRvbiB7CglmbG9hdDogbGVmdDsKfQoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSBidXR0b24udWktZGF0ZXBpY2tlci1jdXJyZW50LAoudWktZGF0ZXBpY2tlci1ydGwgLnVpLWRhdGVwaWNrZXItZ3JvdXAgewoJZmxvYXQ6IHJpZ2h0Owp9Ci51aS1kYXRlcGlja2VyLXJ0bCAudWktZGF0ZXBpY2tlci1ncm91cC1sYXN0IC51aS1kYXRlcGlja2VyLWhlYWRlciwKLnVpLWRhdGVwaWNrZXItcnRsIC51aS1kYXRlcGlja2VyLWdyb3VwLW1pZGRsZSAudWktZGF0ZXBpY2tlci1oZWFkZXIgewoJYm9yZGVyLXJpZ2h0LXdpZHRoOiAwOwoJYm9yZGVyLWxlZnQtd2lkdGg6IDFweDsKfQoudWktZGlhbG9nIHsKCW92ZXJmbG93OiBoaWRkZW47Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl0b3A6IDA7CglsZWZ0OiAwOwoJcGFkZGluZzogLjJlbTsKCW91dGxpbmU6IDA7CQoJYmFja2dyb3VuZC1jb2xvcjogI0VERURDRjsKCWJvcmRlci1yYWRpdXM6IDBweDsKCXBhZGRpbmc6IDBweDsKCWJvcmRlcjogMXB4IHNvbGlkICM2NjY2NjY7Cglib3JkZXItYm90dG9tOiAycHggc29saWQgIzY2NjY2NjsKCWJvcmRlci1yaWdodDogMnB4IHNvbGlkICM2NjY2NjY7Cn0KLnVpLWRpYWxvZyAudWktZGlhbG9nLXRpdGxlYmFyIHsKCXBhZGRpbmc6IC40ZW0gMWVtOwoJcG9zaXRpb246IHJlbGF0aXZlOwkKCWJhY2tncm91bmQtY29sb3I6ICNDQ0NDOTk7Cgljb2xvcjogIzAwMDAwMDsKICAgIGZvbnQtZmFtaWx5OiB2ZXJkYW5hLCBhcmlhbCwgaGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogICAgZm9udC1zaXplOiAxMHB0OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cglib3JkZXItcmFkaXVzOiAwcHg7Cglib3JkZXItdG9wOiBub25lOwoJYm9yZGVyLWxlZnQ6IG5vbmU7Cglib3JkZXItcmlnaHQ6IG5vbmU7Cglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzY2NjY2NjsKfQoudWktZGlhbG9nIC51aS1kaWFsb2ctdGl0bGUgewoJZmxvYXQ6IGxlZnQ7CgltYXJnaW46IC4xZW0gMDsKCXdoaXRlLXNwYWNlOiBub3dyYXA7Cgl3aWR0aDogOTAlOwoJb3ZlcmZsb3c6IGhpZGRlbjsKCXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9Ci51aS1kaWFsb2cgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSB7CglkaXNwbGF5OiBub25lOwp9Ci51aS1kaWFsb2cgLnVpLWRpYWxvZy1jb250ZW50IHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCWJvcmRlcjogMDsKCXBhZGRpbmc6IC41ZW0gMWVtOwoJYmFja2dyb3VuZC1jb2xvcjogI0VERURDRjsKCW92ZXJmbG93OiBhdXRvOwoJdGV4dC1hbGlnbjogY2VudGVyOwp9Ci51aS1kaWFsb2cgLnVpLWRpYWxvZy1idXR0b25wYW5lIHsKCXRleHQtYWxpZ246IGxlZnQ7Cglib3JkZXItd2lkdGg6IDFweCAwIDAgMDsKCWJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CglwYWRkaW5nOiAuM2VtIDFlbSAuNWVtIC40ZW07CgliYWNrZ3JvdW5kLWNvbG9yOiAjRENEQ0IyOwp9Ci51aS1kaWFsb2cgLnVpLWRpYWxvZy1idXR0b25wYW5lIC51aS1kaWFsb2ctYnV0dG9uc2V0IHsKCWZsb2F0OiByaWdodDsKfQoudWktZGlhbG9nIC51aS1kaWFsb2ctYnV0dG9ucGFuZSBidXR0b24gewoJbWFyZ2luOiAuNWVtIC40ZW0gLjVlbSAwOwoJY3Vyc29yOiBwb2ludGVyOwoJZm9udC1mYW1pbHk6IHZlcmRhbmEsIGFyaWFsLCBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7Cglmb250LXNpemU6IDhwdDsKCWNvbG9yOiAjMzMzMzMzOwoJYmFja2dyb3VuZDogbm9uZTsKCWJhY2tncm91bmQtY29sb3I6IGJ1dHRvbmZhY2U7Cglmb250LXdlaWdodDogbm9ybWFsOwoJYm9yZGVyLXdpZHRoOiAycHg7Cglib3JkZXItc3R5bGU6IG91dHNldDsKCWJvcmRlci1jb2xvcjogYnV0dG9uZmFjZTsKCWJvcmRlci1yYWRpdXM6IDBweDsKCXBhZGRpbmc6IDFweCA2cHg7Cn0KLnVpLWRpYWxvZyAudWktZGlhbG9nLWJ1dHRvbnBhbmUgYnV0dG9uW2Rpc2FibGVkXSB7Cgljb2xvcjogZ3JheXRleHQ7CgljdXJzb3I6IGRlZmF1bHQ7Cn0KLnVpLWRpYWxvZyAudWktcmVzaXphYmxlLXNlIHsKCXdpZHRoOiAxMnB4OwoJaGVpZ2h0OiAxMnB4OwoJcmlnaHQ6IC01cHg7Cglib3R0b206IC01cHg7CgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAxNnB4IDE2cHg7Cn0KLnVpLWRyYWdnYWJsZSAudWktZGlhbG9nLXRpdGxlYmFyIHsKCWN1cnNvcjogbW92ZTsKfQoudWktZGlhbG9nLW5vLXJhZGl1cyB7Cglib3JkZXItcmFkaXVzOiAwcHg7Cn0KLnVpLWRyYWdnYWJsZS1oYW5kbGUgewoJLW1zLXRvdWNoLWFjdGlvbjogbm9uZTsKCXRvdWNoLWFjdGlvbjogbm9uZTsKfQoudWktbWVudSB7CglsaXN0LXN0eWxlOiBub25lOwoJcGFkZGluZzogMDsKCW1hcmdpbjogMDsKCWRpc3BsYXk6IGJsb2NrOwoJb3V0bGluZTogbm9uZTsKfQoudWktbWVudSAudWktbWVudSB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cn0KLnVpLW1lbnUgLnVpLW1lbnUtaXRlbSB7Cglwb3NpdGlvbjogcmVsYXRpdmU7CgltYXJnaW46IDA7CglwYWRkaW5nOiAzcHggMWVtIDNweCAuNGVtOwoJY3Vyc29yOiBwb2ludGVyOwoJbWluLWhlaWdodDogMDsgLyogc3VwcG9ydDogSUU3ICovCgkvKiBzdXBwb3J0OiBJRTEwLCBzZWUgIzg4NDQgKi8KCWxpc3Qtc3R5bGUtaW1hZ2U6IHVybCgiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3Iik7Cn0KLnVpLW1lbnUgLnVpLW1lbnUtZGl2aWRlciB7CgltYXJnaW46IDVweCAwOwoJaGVpZ2h0OiAwOwoJZm9udC1zaXplOiAwOwoJbGluZS1oZWlnaHQ6IDA7Cglib3JkZXItd2lkdGg6IDFweCAwIDAgMDsKfQoudWktbWVudSAudWktc3RhdGUtZm9jdXMsCi51aS1tZW51IC51aS1zdGF0ZS1hY3RpdmUgewoJbWFyZ2luOiAtMXB4Owp9CgovKiBpY29uIHN1cHBvcnQgKi8KLnVpLW1lbnUtaWNvbnMgewoJcG9zaXRpb246IHJlbGF0aXZlOwp9Ci51aS1tZW51LWljb25zIC51aS1tZW51LWl0ZW0gewoJcGFkZGluZy1sZWZ0OiAyZW07Cn0KCi8qIGxlZnQtYWxpZ25lZCAqLwoudWktbWVudSAudWktaWNvbiB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl0b3A6IDA7Cglib3R0b206IDA7CglsZWZ0OiAuMmVtOwoJbWFyZ2luOiBhdXRvIDA7Cn0KCi8qIHJpZ2h0LWFsaWduZWQgKi8KLnVpLW1lbnUgLnVpLW1lbnUtaWNvbiB7CglsZWZ0OiBhdXRvOwoJcmlnaHQ6IDA7Cn0KLnVpLXByb2dyZXNzYmFyIHsKCWhlaWdodDogMmVtOwoJdGV4dC1hbGlnbjogbGVmdDsKCW92ZXJmbG93OiBoaWRkZW47Cn0KLnVpLXByb2dyZXNzYmFyIC51aS1wcm9ncmVzc2Jhci12YWx1ZSB7CgltYXJnaW46IC0xcHg7CgloZWlnaHQ6IDEwMCU7Cn0KLnVpLXByb2dyZXNzYmFyIC51aS1wcm9ncmVzc2Jhci1vdmVybGF5IHsKCWJhY2tncm91bmQ6IHVybCgiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoS0FBb0FJQUJBQUFBQVAvLy95SC9DMDVGVkZORFFWQkZNaTR3QXdFQUFBQWgrUVFKQVFBQkFDd0FBQUFBS0FBb0FBQUNrWXdOcVhyZEM1MkRTMDZhN01GWkkrNEZIQkNLb0RlV0tYcXltUHFHcXh2SnJYWmJNeDdUdGMrdzlYZ1UyRkIzbE95UVJXRVQySUZHaVU5bTFmckRWcHhaWmM2YmZId3Y0YzFZWFA2azFWZHkyOTJGYjZVa3V2RnRYcHZXU3pBK0h5Y1hKSFVYaUdZSWlNZzJSNlc0NTlnbldHZkhOZGpJcURXVnFlbUgyZWtwT2JrcE9scHBXVXFaaXFyNmVkcXFXUUFBSWZrRUNRRUFBUUFzQUFBQUFDZ0FLQUFBQXBTTWdabkdmYXFjZzFFMnV1ekRtbUhVQlI4UWlsOTVoaVBLcVduM2FxdExzUzE4eTdHMVN6TmVvd1dCRU50UWQrVDFKa3RQMDVuelBUZEpabFI2dlV4TldXalYrdlVXaFdOa1dGd3hsOVZwWlJlZFljZmxJT0xhZmFhMjhYZHNIL3lubGNjMXVQVkRaeFFJUjBLMjUrY0lDQ21vcUNlNW1HaFpPZmVZU1VoNXlKY0p5cmtaV1dwYVI4ZG9KMm80TllxNjJsQUFBQ0g1QkFrQkFBRUFMQUFBQUFBb0FDZ0FBQUtWREk0WXkyMlpuSU5STnFvc3cwQnY3aTFneUhVa0ZqN29TYVdsdTNvdkM4R3hOc281Zmx1ejNxTFZoQlZlVC9MejdaVEh5eEw1ZERhbFFXUFZPc1FXdFJudXdYYUZUajlqVlZoOHBtYTlKalo0ellTajVaT3ltYTd1dW9sZmZoK0lSNWFXOTdjSHVCVVhLR0tYbEtqbitEaUhXTWNZSmFoNE4wbFlDTWxKT1hpcEdScjVxZGdvU1RycVdTcTZXRmwyeXBvYVVBQUFJZmtFQ1FFQUFRQXNBQUFBQUNnQUtBQUFBcGFFYjZITGdkL2lPN0ZOV3RjRldlK3VmT0RHalJmb2lKMmFrU2hidWViMHd0STUwem0wMnBidndmV0VNV0JRMXpLR2xMSWhza2lFUG05UjZ2Ulh4VjRaeldUMnlIT0dwV015b3JibEtsTnA4SG1IRWIvbENYamNXN2JtdFhQOFh0MjI5T1ZXUjFmb2QyZVdxTmZIdU1qWENQa0lHTmlsZU9pSW1WbUNPRW1vU2ZuM3lYbEpXbW9IR2hxcDZpbFl1V1lwbVRxS1VnQUFJZmtFQ1FFQUFRQXNBQUFBQUNnQUtBQUFBcGlFSDZrYjU4YmlRM0ZOV3RNRldXM2VOVmNvanVGR2ZxblpxU2VidVMwNnc1VjgwL1gwMnBLZTh6RndQNkVGV09UMWxERms4ckdFUmgxVFROT29jUTYxSG00WG0yVmV4VUhwemp5bVZpSHJGYmlFTHNlZlZybjZYS2ZudDJROUcvK1hkaWU0OTlYSGQyZzRoN2lvT0doWEdKYm9HQW5YU0Jub0J3S1l5ZmlvdWJaSjJIbjBSdVJaYWZsWk9pbDU2WnA2aWlvS1NYcFVBQUFoK1FRSkFRQUJBQ3dBQUFBQUtBQW9BQUFDa29RUnFSdm54dUk3a1UxYTFVVTViZDV0blNlT1pYaG1uNWxXSzNxTlRXdlJkUXhQOHF2YUMrL3lhWVF6WE83Qk12YVVFbUpSZDNUc2lNQWdzd21OWXJTZ1pkWXJUWDZ0U0hHWk83M2V6dUF3MnV4dVErQmJlWmZNeHNleFkzNSsvUWU0SjFpblYwZzR4M1dIdU1oSWwyalhPS1QyUStWVTVmZ29TVUk1MlZmWnlma0pHa2hhNmptWSthYVlkaXJxK2xRQUFDSDVCQWtCQUFFQUxBQUFBQUFvQUNnQUFBS1dCSUtwWWUwTDNZTktUb3Fzd1VsdnpuaWdkNHdpUjRLaFpyS3Q5VXBxaXA2MWk5RTN2TXZ4UmRIbGJFRmlFWGZrOVlBUll4T1paRDZWUTJwVXVuQm10UlhvMUxmOGhNVlZjTmw4SmFmVjM4YU0yL0Z1NVYxNkJuNjNyNnh0OTdqMDkrTVhTRmk0Qm5pR0ZhZTNoemJIOStoWUJ6a3B1VWg1YVptSHVhblpPWmdJdXZiR2lOZW9tQ25heHhhcDJ1cGFDWnNxKzFrQUFDSDVCQWtCQUFFQUxBQUFBQUFvQUNnQUFBS1hqSThCeTV6ZjRrT3hUVnJYTlZsdjFYMGQ4SUdaR0tMbk5wWXRtOExyOWNxVmV1T1N2Zk9XNzlEOWFESGl6TmhESmlkRlpoTnlkRWFoT2FESDZub210SmpwMXR1dEtvTldrdkE2SnFmUlZMSFUvUVVmYXU5bDJ4N0c1NGQxZmw5OTV4Y0lHQWRYcU1mQk5hZG9ZcmhIK01nMktCbHBWcGJsdUNpWG1NbloyU2g0R0JxSitja0lPcXFKNkxtS1NsbFptc29xNndwUUFBQWgrUVFKQVFBQkFDd0FBQUFBS0FBb0FBQUNsWXgvb0x2b3h1SkRrVTFhMVlVWmJKNTluU2QyWlhoV3FiUmEyL2dGOEd1MkRZM2lxczd5cnEreEJZRWtZdkZTTThhU1NPYkUrWmdSbDFCSEZaTnI3cFJDYXZaNUJXMjE0MmhZM0FOL3pXdHNtZjEycDlYeHhGbDJscExuMXJzZXp0ZlhaamRJV0lmMnM1ZEl0d2pZS0Jnbzl5ZzVwSGd6SlhURWVHbFp1ZW5weVBtcEdRb0tPV2tZbVNwYVNucUtpbGVJMkZBQUFDSDVCQWtCQUFFQUxBQUFBQUFvQUNnQUFBS1ZqQitndStqRzRrT1JUVnJWaFJsc25uMmRKM1psZUZhcHRGcmIrQ1htTzlPb3plTDVWZlA5OUh2QVdocGlVZGN3a3BCSDM4MjVBd1lkVTh4VHFsTEdodENvc0FyS01wdmZhMW1NUmFlOVZ2V1pmZUIyWGZQa2VMbW0xOGxVY0JqK3A1ZG5OOGpYWjNZSUdFaFl1T1VuNDVhb0NEa3AxNmhsNUlqWUp2aldLY25vR1FwcXlQbHBPaHIzYUVsYXFycTU2QnE3VkFBQU93PT0iKTsKCWhlaWdodDogMTAwJTsKCWZpbHRlcjogYWxwaGEob3BhY2l0eT0yNSk7IC8qIHN1cHBvcnQ6IElFOCAqLwoJb3BhY2l0eTogMC4yNTsKfQoudWktcHJvZ3Jlc3NiYXItaW5kZXRlcm1pbmF0ZSAudWktcHJvZ3Jlc3NiYXItdmFsdWUgewoJYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKfQoudWktcmVzaXphYmxlIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKfQoudWktcmVzaXphYmxlLWhhbmRsZSB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cglmb250LXNpemU6IDAuMXB4OwoJZGlzcGxheTogYmxvY2s7CgktbXMtdG91Y2gtYWN0aW9uOiBub25lOwoJdG91Y2gtYWN0aW9uOiBub25lOwp9Ci51aS1yZXNpemFibGUtZGlzYWJsZWQgLnVpLXJlc2l6YWJsZS1oYW5kbGUsCi51aS1yZXNpemFibGUtYXV0b2hpZGUgLnVpLXJlc2l6YWJsZS1oYW5kbGUgewoJZGlzcGxheTogbm9uZTsKfQoudWktcmVzaXphYmxlLW4gewoJY3Vyc29yOiBuLXJlc2l6ZTsKCWhlaWdodDogN3B4OwoJd2lkdGg6IDEwMCU7Cgl0b3A6IC01cHg7CglsZWZ0OiAwOwp9Ci51aS1yZXNpemFibGUtcyB7CgljdXJzb3I6IHMtcmVzaXplOwoJaGVpZ2h0OiA3cHg7Cgl3aWR0aDogMTAwJTsKCWJvdHRvbTogLTVweDsKCWxlZnQ6IDA7Cn0KLnVpLXJlc2l6YWJsZS1lIHsKCWN1cnNvcjogZS1yZXNpemU7Cgl3aWR0aDogN3B4OwoJcmlnaHQ6IC01cHg7Cgl0b3A6IDA7CgloZWlnaHQ6IDEwMCU7Cn0KLnVpLXJlc2l6YWJsZS13IHsKCWN1cnNvcjogdy1yZXNpemU7Cgl3aWR0aDogN3B4OwoJbGVmdDogLTVweDsKCXRvcDogMDsKCWhlaWdodDogMTAwJTsKfQoudWktcmVzaXphYmxlLXNlIHsKCWN1cnNvcjogc2UtcmVzaXplOwoJd2lkdGg6IDEycHg7CgloZWlnaHQ6IDEycHg7CglyaWdodDogMXB4OwoJYm90dG9tOiAxcHg7Cn0KLnVpLXJlc2l6YWJsZS1zdyB7CgljdXJzb3I6IHN3LXJlc2l6ZTsKCXdpZHRoOiA5cHg7CgloZWlnaHQ6IDlweDsKCWxlZnQ6IC01cHg7Cglib3R0b206IC01cHg7Cn0KLnVpLXJlc2l6YWJsZS1udyB7CgljdXJzb3I6IG53LXJlc2l6ZTsKCXdpZHRoOiA5cHg7CgloZWlnaHQ6IDlweDsKCWxlZnQ6IC01cHg7Cgl0b3A6IC01cHg7Cn0KLnVpLXJlc2l6YWJsZS1uZSB7CgljdXJzb3I6IG5lLXJlc2l6ZTsKCXdpZHRoOiA5cHg7CgloZWlnaHQ6IDlweDsKCXJpZ2h0OiAtNXB4OwoJdG9wOiAtNXB4Owp9Ci51aS1zZWxlY3RhYmxlIHsKCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7Cgl0b3VjaC1hY3Rpb246IG5vbmU7Cn0KLnVpLXNlbGVjdGFibGUtaGVscGVyIHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXotaW5kZXg6IDEwMDsKCWJvcmRlcjogMXB4IGRvdHRlZCBibGFjazsKfQoudWktc2VsZWN0bWVudS1tZW51IHsKCXBhZGRpbmc6IDA7CgltYXJnaW46IDA7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl0b3A6IDA7CglsZWZ0OiAwOwoJZGlzcGxheTogbm9uZTsKfQoudWktc2VsZWN0bWVudS1tZW51IC51aS1tZW51IHsKCW92ZXJmbG93OiBhdXRvOwoJLyogU3VwcG9ydDogSUU3ICovCglvdmVyZmxvdy14OiBoaWRkZW47CglwYWRkaW5nLWJvdHRvbTogMXB4Owp9Ci51aS1zZWxlY3RtZW51LW1lbnUgLnVpLW1lbnUgLnVpLXNlbGVjdG1lbnUtb3B0Z3JvdXAgewoJZm9udC1zaXplOiAxZW07Cglmb250LXdlaWdodDogYm9sZDsKCWxpbmUtaGVpZ2h0OiAxLjU7CglwYWRkaW5nOiAycHggMC40ZW07CgltYXJnaW46IDAuNWVtIDAgMCAwOwoJaGVpZ2h0OiBhdXRvOwoJYm9yZGVyOiAwOwp9Ci51aS1zZWxlY3RtZW51LW9wZW4gewoJZGlzcGxheTogYmxvY2s7Cn0KLnVpLXNlbGVjdG1lbnUtYnV0dG9uIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jazsKCW92ZXJmbG93OiBoaWRkZW47Cglwb3NpdGlvbjogcmVsYXRpdmU7Cgl0ZXh0LWRlY29yYXRpb246IG5vbmU7CgljdXJzb3I6IHBvaW50ZXI7Cn0KLnVpLXNlbGVjdG1lbnUtYnV0dG9uIHNwYW4udWktaWNvbiB7CglyaWdodDogMC41ZW07CglsZWZ0OiBhdXRvOwoJbWFyZ2luLXRvcDogLThweDsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXRvcDogNTAlOwp9Ci51aS1zZWxlY3RtZW51LWJ1dHRvbiBzcGFuLnVpLXNlbGVjdG1lbnUtdGV4dCB7Cgl0ZXh0LWFsaWduOiBsZWZ0OwoJcGFkZGluZzogMC40ZW0gMi4xZW0gMC40ZW0gMWVtOwoJZGlzcGxheTogYmxvY2s7CglsaW5lLWhlaWdodDogMS40OwoJb3ZlcmZsb3c6IGhpZGRlbjsKCXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwoJd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoudWktc2xpZGVyIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCXRleHQtYWxpZ246IGxlZnQ7Cn0KLnVpLXNsaWRlciAudWktc2xpZGVyLWhhbmRsZSB7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl6LWluZGV4OiAyOwoJd2lkdGg6IDEuMmVtOwoJaGVpZ2h0OiAxLjJlbTsKCWN1cnNvcjogZGVmYXVsdDsKCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7Cgl0b3VjaC1hY3Rpb246IG5vbmU7Cn0KLnVpLXNsaWRlciAudWktc2xpZGVyLXJhbmdlIHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXotaW5kZXg6IDE7Cglmb250LXNpemU6IC43ZW07CglkaXNwbGF5OiBibG9jazsKCWJvcmRlcjogMDsKCWJhY2tncm91bmQtcG9zaXRpb246IDAgMDsKfQoKLyogc3VwcG9ydDogSUU4IC0gU2VlICM2NzI3ICovCi51aS1zbGlkZXIudWktc3RhdGUtZGlzYWJsZWQgLnVpLXNsaWRlci1oYW5kbGUsCi51aS1zbGlkZXIudWktc3RhdGUtZGlzYWJsZWQgLnVpLXNsaWRlci1yYW5nZSB7CglmaWx0ZXI6IGluaGVyaXQ7Cn0KCi51aS1zbGlkZXItaG9yaXpvbnRhbCB7CgloZWlnaHQ6IC44ZW07Cn0KLnVpLXNsaWRlci1ob3Jpem9udGFsIC51aS1zbGlkZXItaGFuZGxlIHsKCXRvcDogLS4zZW07CgltYXJnaW4tbGVmdDogLS42ZW07Cn0KLnVpLXNsaWRlci1ob3Jpem9udGFsIC51aS1zbGlkZXItcmFuZ2UgewoJdG9wOiAwOwoJaGVpZ2h0OiAxMDAlOwp9Ci51aS1zbGlkZXItaG9yaXpvbnRhbCAudWktc2xpZGVyLXJhbmdlLW1pbiB7CglsZWZ0OiAwOwp9Ci51aS1zbGlkZXItaG9yaXpvbnRhbCAudWktc2xpZGVyLXJhbmdlLW1heCB7CglyaWdodDogMDsKfQoKLnVpLXNsaWRlci12ZXJ0aWNhbCB7Cgl3aWR0aDogLjhlbTsKCWhlaWdodDogMTAwcHg7Cn0KLnVpLXNsaWRlci12ZXJ0aWNhbCAudWktc2xpZGVyLWhhbmRsZSB7CglsZWZ0OiAtLjNlbTsKCW1hcmdpbi1sZWZ0OiAwOwoJbWFyZ2luLWJvdHRvbTogLS42ZW07Cn0KLnVpLXNsaWRlci12ZXJ0aWNhbCAudWktc2xpZGVyLXJhbmdlIHsKCWxlZnQ6IDA7Cgl3aWR0aDogMTAwJTsKfQoudWktc2xpZGVyLXZlcnRpY2FsIC51aS1zbGlkZXItcmFuZ2UtbWluIHsKCWJvdHRvbTogMDsKfQoudWktc2xpZGVyLXZlcnRpY2FsIC51aS1zbGlkZXItcmFuZ2UtbWF4IHsKCXRvcDogMDsKfQoudWktc29ydGFibGUtaGFuZGxlIHsKCS1tcy10b3VjaC1hY3Rpb246IG5vbmU7Cgl0b3VjaC1hY3Rpb246IG5vbmU7Cn0KLnVpLXNwaW5uZXIgewoJcG9zaXRpb246IHJlbGF0aXZlOwoJZGlzcGxheTogaW5saW5lLWJsb2NrOwoJb3ZlcmZsb3c6IGhpZGRlbjsKCXBhZGRpbmc6IDA7Cgl2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9Ci51aS1zcGlubmVyLWlucHV0IHsKCWJvcmRlcjogbm9uZTsKCWJhY2tncm91bmQ6IG5vbmU7Cgljb2xvcjogaW5oZXJpdDsKCXBhZGRpbmc6IDA7CgltYXJnaW46IC4yZW0gMDsKCXZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CgltYXJnaW4tbGVmdDogLjRlbTsKCW1hcmdpbi1yaWdodDogMjJweDsKfQoudWktc3Bpbm5lci1idXR0b24gewoJd2lkdGg6IDE2cHg7CgloZWlnaHQ6IDUwJTsKCWZvbnQtc2l6ZTogLjVlbTsKCXBhZGRpbmc6IDA7CgltYXJnaW46IDA7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7Cglwb3NpdGlvbjogYWJzb2x1dGU7CgljdXJzb3I6IGRlZmF1bHQ7CglkaXNwbGF5OiBibG9jazsKCW92ZXJmbG93OiBoaWRkZW47CglyaWdodDogMDsKfQovKiBtb3JlIHNwZWNpZmljaXR5IHJlcXVpcmVkIGhlcmUgdG8gb3ZlcnJpZGUgZGVmYXVsdCBib3JkZXJzICovCi51aS1zcGlubmVyIGEudWktc3Bpbm5lci1idXR0b24gewoJYm9yZGVyLXRvcDogbm9uZTsKCWJvcmRlci1ib3R0b206IG5vbmU7Cglib3JkZXItcmlnaHQ6IG5vbmU7Cn0KLyogdmVydGljYWxseSBjZW50ZXIgaWNvbiAqLwoudWktc3Bpbm5lciAudWktaWNvbiB7Cglwb3NpdGlvbjogYWJzb2x1dGU7CgltYXJnaW4tdG9wOiAtOHB4OwoJdG9wOiA1MCU7CglsZWZ0OiAwOwp9Ci51aS1zcGlubmVyLXVwIHsKCXRvcDogMDsKfQoudWktc3Bpbm5lci1kb3duIHsKCWJvdHRvbTogMDsKfQoKLyogVFIgb3ZlcnJpZGVzICovCi51aS1zcGlubmVyIC51aS1pY29uLXRyaWFuZ2xlLTEtcyB7CgkvKiBuZWVkIHRvIGZpeCBpY29ucyBzcHJpdGUgKi8KCWJhY2tncm91bmQtcG9zaXRpb246IC02NXB4IC0xNnB4Owp9Ci51aS10YWJzIHsKCXBvc2l0aW9uOiByZWxhdGl2ZTsvKiBwb3NpdGlvbjogcmVsYXRpdmUgcHJldmVudHMgSUUgc2Nyb2xsIGJ1ZyAoZWxlbWVudCB3aXRoIHBvc2l0aW9uOiByZWxhdGl2ZSBpbnNpZGUgY29udGFpbmVyIHdpdGggb3ZlcmZsb3c6IGF1dG8gYXBwZWFyIGFzICJmaXhlZCIpICovCglwYWRkaW5nOiAuMmVtOwp9Ci51aS10YWJzIC51aS10YWJzLW5hdiB7CgltYXJnaW46IDA7CglwYWRkaW5nOiAuMmVtIC4yZW0gMDsKfQoudWktdGFicyAudWktdGFicy1uYXYgbGkgewoJbGlzdC1zdHlsZTogbm9uZTsKCWZsb2F0OiBsZWZ0OwoJcG9zaXRpb246IHJlbGF0aXZlOwoJdG9wOiAwOwoJbWFyZ2luOiAxcHggLjJlbSAwIDA7Cglib3JkZXItYm90dG9tLXdpZHRoOiAwOwoJcGFkZGluZzogMDsKCXdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KLnVpLXRhYnMgLnVpLXRhYnMtbmF2IC51aS10YWJzLWFuY2hvciB7CglmbG9hdDogbGVmdDsKCXBhZGRpbmc6IC41ZW0gMWVtOwoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9Ci51aS10YWJzIC51aS10YWJzLW5hdiBsaS51aS10YWJzLWFjdGl2ZSB7CgltYXJnaW4tYm90dG9tOiAtMXB4OwoJcGFkZGluZy1ib3R0b206IDFweDsKfQoudWktdGFicyAudWktdGFicy1uYXYgbGkudWktdGFicy1hY3RpdmUgLnVpLXRhYnMtYW5jaG9yLAoudWktdGFicyAudWktdGFicy1uYXYgbGkudWktc3RhdGUtZGlzYWJsZWQgLnVpLXRhYnMtYW5jaG9yLAoudWktdGFicyAudWktdGFicy1uYXYgbGkudWktdGFicy1sb2FkaW5nIC51aS10YWJzLWFuY2hvciB7CgljdXJzb3I6IHRleHQ7Cn0KLnVpLXRhYnMtY29sbGFwc2libGUgLnVpLXRhYnMtbmF2IGxpLnVpLXRhYnMtYWN0aXZlIC51aS10YWJzLWFuY2hvciB7CgljdXJzb3I6IHBvaW50ZXI7Cn0KLnVpLXRhYnMgLnVpLXRhYnMtcGFuZWwgewoJZGlzcGxheTogYmxvY2s7Cglib3JkZXItd2lkdGg6IDA7CglwYWRkaW5nOiAxZW0gMS40ZW07CgliYWNrZ3JvdW5kOiBub25lOwp9Ci51aS10b29sdGlwIHsKCXBhZGRpbmc6IDhweDsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXotaW5kZXg6IDk5OTk7CgltYXgtd2lkdGg6IDMwMHB4OwoJLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgNXB4ICNhYWE7Cglib3gtc2hhZG93OiAwIDAgNXB4ICNhYWE7Cn0KYm9keSAudWktdG9vbHRpcCB7Cglib3JkZXItd2lkdGg6IDJweDsKfQoKLyogQ29tcG9uZW50IGNvbnRhaW5lcnMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCi51aS13aWRnZXQgewoJZm9udC1mYW1pbHk6IHZlcmRhbmEsYXJpYWwsaGVsdmV0aWNhLHNhbnMtc2VyaWY7Cglmb250LXNpemU6IDhwdDsKfQoudWktd2lkZ2V0IC51aS13aWRnZXQgewoJZm9udC1zaXplOiAxZW07Cn0KLnVpLXdpZGdldCBpbnB1dCwKLnVpLXdpZGdldCBzZWxlY3QsCi51aS13aWRnZXQgdGV4dGFyZWEsCi51aS13aWRnZXQgYnV0dG9uIHsKCWZvbnQtZmFtaWx5OiBUcmVidWNoZXQgTVMsVGFob21hLFZlcmRhbmEsQXJpYWwsc2Fucy1zZXJpZjsKCWZvbnQtc2l6ZTogMWVtOwp9Ci51aS13aWRnZXQtY29udGVudCB7CiAgICBiYWNrZ3JvdW5kOiAjRURFRENGOyAvKiBPTU5JIHN0YW5kYXJkICovCiAgICAvKiBib3JkZXI6IDFweCBzb2xpZCAjZGRkZGRkOyAqLwogICAgY29sb3I6ICM2NjY2NjY7Cn0KLyoKLnVpLXdpZGdldC1jb250ZW50IGEgewoJY29sb3I6ICMzMzMzMzM7Cn0KKi8KLnVpLXdpZGdldC1oZWFkZXIgewoJYm9yZGVyOiAxcHggc29saWQgI2U3OGYwODsKCS8qIGJhY2tncm91bmQ6ICNmNmE4MjggdXJsKCJpbWFnZXMvdWktYmdfZ2xvc3Mtd2F2ZV8zNV9mNmE4MjhfNTAweDEwMC5wbmciKSA1MCUgNTAlIHJlcGVhdC14OyAqLwoJY29sb3I6ICNmZmZmZmY7Cglmb250LXdlaWdodDogYm9sZDsKfQoudWktd2lkZ2V0LWhlYWRlciBhIHsKCWNvbG9yOiAjZmZmZmZmOwp9CgovKiBJbnRlcmFjdGlvbiBzdGF0ZXMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCi51aS1zdGF0ZS1kZWZhdWx0LAoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWRlZmF1bHQsCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1kZWZhdWx0IHsKCWJvcmRlcjogMXB4IHNvbGlkICNjY2NjY2M7CgkvKiBiYWNrZ3JvdW5kOiAjZjZmNmY2IHVybCgiaW1hZ2VzL3VpLWJnX2dsYXNzXzEwMF9mNmY2ZjZfMXg0MDAucG5nIikgNTAlIDUwJSByZXBlYXQteDsgKi8KCWZvbnQtd2VpZ2h0OiBib2xkOwoJY29sb3I6ICMxYzk0YzQ7Cn0KLnVpLXN0YXRlLWRlZmF1bHQgYSwKLnVpLXN0YXRlLWRlZmF1bHQgYTpsaW5rLAoudWktc3RhdGUtZGVmYXVsdCBhOnZpc2l0ZWQgewoJY29sb3I6ICMxYzk0YzQ7Cgl0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KLnVpLXN0YXRlLWhvdmVyLAoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWhvdmVyLAoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtaG92ZXIsCi51aS1zdGF0ZS1mb2N1cywKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1mb2N1cywKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWZvY3VzIHsKCWJvcmRlcjogMXB4IHNvbGlkICNmYmNiMDk7CgkvKiBiYWNrZ3JvdW5kOiAjZmRmNWNlIHVybCgiaW1hZ2VzL3VpLWJnX2dsYXNzXzEwMF9mZGY1Y2VfMXg0MDAucG5nIikgNTAlIDUwJSByZXBlYXQteDsgKi8KCWZvbnQtd2VpZ2h0OiBib2xkOwoJY29sb3I6ICNjNzc0MDU7Cn0KLnVpLXN0YXRlLWhvdmVyIGEsCi51aS1zdGF0ZS1ob3ZlciBhOmhvdmVyLAoudWktc3RhdGUtaG92ZXIgYTpsaW5rLAoudWktc3RhdGUtaG92ZXIgYTp2aXNpdGVkLAoudWktc3RhdGUtZm9jdXMgYSwKLnVpLXN0YXRlLWZvY3VzIGE6aG92ZXIsCi51aS1zdGF0ZS1mb2N1cyBhOmxpbmssCi51aS1zdGF0ZS1mb2N1cyBhOnZpc2l0ZWQgewoJY29sb3I6ICNjNzc0MDU7Cgl0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KLnVpLXN0YXRlLWFjdGl2ZSwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1hY3RpdmUsCi51aS13aWRnZXQtaGVhZGVyIC51aS1zdGF0ZS1hY3RpdmUgewoJYm9yZGVyOiAxcHggc29saWQgI2ZiZDg1MDsKCS8qIGJhY2tncm91bmQ6ICNmZmZmZmYgdXJsKCJpbWFnZXMvdWktYmdfZ2xhc3NfNjVfZmZmZmZmXzF4NDAwLnBuZyIpIDUwJSA1MCUgcmVwZWF0LXg7ICovCglmb250LXdlaWdodDogYm9sZDsKCWNvbG9yOiAjZWI4ZjAwOwp9Ci51aS1zdGF0ZS1hY3RpdmUgYSwKLnVpLXN0YXRlLWFjdGl2ZSBhOmxpbmssCi51aS1zdGF0ZS1hY3RpdmUgYTp2aXNpdGVkIHsKCWNvbG9yOiAjZWI4ZjAwOwoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgovKiBJbnRlcmFjdGlvbiBDdWVzCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoudWktc3RhdGUtaGlnaGxpZ2h0LAoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXN0YXRlLWhpZ2hsaWdodCwKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhpZ2hsaWdodCB7Cglib3JkZXI6IDFweCBzb2xpZCAjZmVkMjJmOwoJYmFja2dyb3VuZDogI2ZmZTQ1YyB1cmwoImltYWdlcy91aS1iZ19oaWdobGlnaHQtc29mdF83NV9mZmU0NWNfMXgxMDAucG5nIikgNTAlIHRvcCByZXBlYXQteDsKCWNvbG9yOiAjMzYzNjM2Owp9Ci51aS1zdGF0ZS1oaWdobGlnaHQgYSwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1oaWdobGlnaHQgYSwKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWhpZ2hsaWdodCBhIHsKCWNvbG9yOiAjMzYzNjM2Owp9Ci51aS1zdGF0ZS1lcnJvciwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1lcnJvciwKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWVycm9yIHsKCWJvcmRlcjogMXB4IHNvbGlkICNjZDBhMGE7CgliYWNrZ3JvdW5kOiAjYjgxOTAwIHVybCgiaW1hZ2VzL3VpLWJnX2RpYWdvbmFscy10aGlja18xOF9iODE5MDBfNDB4NDAucG5nIikgNTAlIDUwJSByZXBlYXQ7Cgljb2xvcjogI2ZmZmZmZjsKfQoudWktc3RhdGUtZXJyb3IgYSwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1lcnJvciBhLAoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZXJyb3IgYSB7Cgljb2xvcjogI2ZmZmZmZjsKfQoudWktc3RhdGUtZXJyb3ItdGV4dCwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1lcnJvci10ZXh0LAoudWktd2lkZ2V0LWhlYWRlciAudWktc3RhdGUtZXJyb3ItdGV4dCB7Cgljb2xvcjogI2ZmZmZmZjsKfQoudWktcHJpb3JpdHktcHJpbWFyeSwKLnVpLXdpZGdldC1jb250ZW50IC51aS1wcmlvcml0eS1wcmltYXJ5LAoudWktd2lkZ2V0LWhlYWRlciAudWktcHJpb3JpdHktcHJpbWFyeSB7Cglmb250LXdlaWdodDogYm9sZDsKfQoudWktcHJpb3JpdHktc2Vjb25kYXJ5LAoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLXByaW9yaXR5LXNlY29uZGFyeSwKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXByaW9yaXR5LXNlY29uZGFyeSB7CglvcGFjaXR5OiAuNzsKCWZpbHRlcjpBbHBoYShPcGFjaXR5PTcwKTsgLyogc3VwcG9ydDogSUU4ICovCglmb250LXdlaWdodDogbm9ybWFsOwp9Ci51aS1zdGF0ZS1kaXNhYmxlZCwKLnVpLXdpZGdldC1jb250ZW50IC51aS1zdGF0ZS1kaXNhYmxlZCwKLnVpLXdpZGdldC1oZWFkZXIgLnVpLXN0YXRlLWRpc2FibGVkIHsKCW9wYWNpdHk6IC4zNTsKCWZpbHRlcjpBbHBoYShPcGFjaXR5PTM1KTsgLyogc3VwcG9ydDogSUU4ICovCgliYWNrZ3JvdW5kLWltYWdlOiBub25lOwp9Ci51aS1zdGF0ZS1kaXNhYmxlZCAudWktaWNvbiB7CglmaWx0ZXI6QWxwaGEoT3BhY2l0eT0zNSk7IC8qIHN1cHBvcnQ6IElFOCAtIFNlZSAjNjA1OSAqLwp9CgovKiBJY29ucwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCi8qIHN0YXRlcyBhbmQgaW1hZ2VzICovCi51aS1pY29uIHsKCXdpZHRoOiAxNnB4OwoJaGVpZ2h0OiAxNnB4Owp9Ci51aS1pY29uLAoudWktd2lkZ2V0LWNvbnRlbnQgLnVpLWljb24gewoJLyogYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfMjIyMjIyXzI1NngyNDAucG5nIik7ICovCn0KLnVpLXdpZGdldC1oZWFkZXIgLnVpLWljb24gewoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfZmZmZmZmXzI1NngyNDAucG5nIik7Cn0KLnVpLXN0YXRlLWRlZmF1bHQgLnVpLWljb24gewoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfZWY4YzA4XzI1NngyNDAucG5nIik7Cn0KLnVpLXN0YXRlLWhvdmVyIC51aS1pY29uLAoudWktc3RhdGUtZm9jdXMgLnVpLWljb24gewoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfZWY4YzA4XzI1NngyNDAucG5nIik7Cn0KLnVpLXN0YXRlLWFjdGl2ZSAudWktaWNvbiB7CgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoImltYWdlcy91aS1pY29uc19lZjhjMDhfMjU2eDI0MC5wbmciKTsKfQoudWktc3RhdGUtaGlnaGxpZ2h0IC51aS1pY29uIHsKCWJhY2tncm91bmQtaW1hZ2U6IHVybCgiaW1hZ2VzL3VpLWljb25zXzIyOGVmMV8yNTZ4MjQwLnBuZyIpOwp9Ci51aS1zdGF0ZS1lcnJvciAudWktaWNvbiwKLnVpLXN0YXRlLWVycm9yLXRleHQgLnVpLWljb24gewoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCJpbWFnZXMvdWktaWNvbnNfZmZkMjdhXzI1NngyNDAucG5nIik7Cn0KCi8qIHBvc2l0aW9uaW5nICovCi51aS1pY29uLWJsYW5rIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMTZweCAxNnB4OyB9Ci51aS1pY29uLWNhcmF0LTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgMDsgfQoudWktaWNvbi1jYXJhdC0xLW5lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggMDsgfQoudWktaWNvbi1jYXJhdC0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAwOyB9Ci51aS1pY29uLWNhcmF0LTEtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAwOyB9Ci51aS1pY29uLWNhcmF0LTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IDA7IH0KLnVpLWljb24tY2FyYXQtMS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IDA7IH0KLnVpLWljb24tY2FyYXQtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggMDsgfQoudWktaWNvbi1jYXJhdC0xLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IDA7IH0KLnVpLWljb24tY2FyYXQtMi1uLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggMDsgfQoudWktaWNvbi1jYXJhdC0yLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAwOyB9Ci51aS1pY29uLXRyaWFuZ2xlLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE2cHg7IH0KLnVpLWljb24tdHJpYW5nbGUtMS1uZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xNnB4OyB9Ci51aS1pY29uLXRyaWFuZ2xlLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xNnB4OyB9Ci51aS1pY29uLXRyaWFuZ2xlLTEtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTZweDsgfQoudWktaWNvbi10cmlhbmdsZS0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTZweDsgfQoudWktaWNvbi10cmlhbmdsZS0xLXN3IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE2cHg7IH0KLnVpLWljb24tdHJpYW5nbGUtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE2cHg7IH0KLnVpLWljb24tdHJpYW5nbGUtMS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMTZweDsgfQoudWktaWNvbi10cmlhbmdsZS0yLW4tcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtMTZweDsgfQoudWktaWNvbi10cmlhbmdsZS0yLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTZweDsgfQoudWktaWNvbi1hcnJvdy0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0zMnB4OyB9Ci51aS1pY29uLWFycm93LTEtbmUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMzJweDsgfQoudWktaWNvbi1hcnJvdy0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMzJweDsgfQoudWktaWNvbi1hcnJvdy0xLXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTMycHg7IH0KLnVpLWljb24tYXJyb3ctMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTMycHg7IH0KLnVpLWljb24tYXJyb3ctMS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0zMnB4OyB9Ci51aS1pY29uLWFycm93LTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0zMnB4OyB9Ci51aS1pY29uLWFycm93LTEtbncgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTMycHg7IH0KLnVpLWljb24tYXJyb3ctMi1uLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTMycHg7IH0KLnVpLWljb24tYXJyb3ctMi1uZS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMzJweDsgfQoudWktaWNvbi1hcnJvdy0yLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtMzJweDsgfQoudWktaWNvbi1hcnJvdy0yLXNlLW53IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC0zMnB4OyB9Ci51aS1pY29uLWFycm93c3RvcC0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTMycHg7IH0KLnVpLWljb24tYXJyb3dzdG9wLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMDhweCAtMzJweDsgfQoudWktaWNvbi1hcnJvd3N0b3AtMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC0zMnB4OyB9Ci51aS1pY29uLWFycm93c3RvcC0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTMycHg7IH0KLnVpLWljb24tYXJyb3d0aGljay0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2stMS1uZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2stMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTQ4cHg7IH0KLnVpLWljb24tYXJyb3d0aGljay0xLXNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTQ4cHg7IH0KLnVpLWljb24tYXJyb3d0aGljay0xLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrLTEtc3cgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2stMS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrLTItbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2stMi1uZS1zdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrLTItZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2stMi1zZS1udyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNzZweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrc3RvcC0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTQ4cHg7IH0KLnVpLWljb24tYXJyb3d0aGlja3N0b3AtMS1lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC00OHB4OyB9Ci51aS1pY29uLWFycm93dGhpY2tzdG9wLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtNDhweDsgfQoudWktaWNvbi1hcnJvd3RoaWNrc3RvcC0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTQ4cHg7IH0KLnVpLWljb24tYXJyb3dyZXR1cm50aGljay0xLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC02NHB4OyB9Ci51aS1pY29uLWFycm93cmV0dXJudGhpY2stMS1uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTY0cHg7IH0KLnVpLWljb24tYXJyb3dyZXR1cm50aGljay0xLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtNjRweDsgfQoudWktaWNvbi1hcnJvd3JldHVybnRoaWNrLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93cmV0dXJuLTEtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93cmV0dXJuLTEtbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93cmV0dXJuLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93cmV0dXJuLTEtcyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtNjRweDsgfQoudWktaWNvbi1hcnJvd3JlZnJlc2gtMS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93cmVmcmVzaC0xLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTY0cHg7IH0KLnVpLWljb24tYXJyb3dyZWZyZXNoLTEtZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNjBweCAtNjRweDsgfQoudWktaWNvbi1hcnJvd3JlZnJlc2gtMS1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3NnB4IC02NHB4OyB9Ci51aS1pY29uLWFycm93LTQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC04MHB4OyB9Ci51aS1pY29uLWFycm93LTQtZGlhZyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC04MHB4OyB9Ci51aS1pY29uLWV4dGxpbmsgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtODBweDsgfQoudWktaWNvbi1uZXd3aW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtODBweDsgfQoudWktaWNvbi1yZWZyZXNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTgwcHg7IH0KLnVpLWljb24tc2h1ZmZsZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC04MHB4OyB9Ci51aS1pY29uLXRyYW5zZmVyLWUtdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC04MHB4OyB9Ci51aS1pY29uLXRyYW5zZmVydGhpY2stZS13IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC04MHB4OyB9Ci51aS1pY29uLWZvbGRlci1jb2xsYXBzZWQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC05NnB4OyB9Ci51aS1pY29uLWZvbGRlci1vcGVuIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTk2cHg7IH0KLnVpLWljb24tZG9jdW1lbnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtOTZweDsgfQoudWktaWNvbi1kb2N1bWVudC1iIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTk2cHg7IH0KLnVpLWljb24tbm90ZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC05NnB4OyB9Ci51aS1pY29uLW1haWwtY2xvc2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTk2cHg7IH0KLnVpLWljb24tbWFpbC1vcGVuIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTk2cHg7IH0KLnVpLWljb24tc3VpdGNhc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTk2cHg7IH0KLnVpLWljb24tY29tbWVudCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtOTZweDsgfQoudWktaWNvbi1wZXJzb24geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTk2cHg7IH0KLnVpLWljb24tcHJpbnQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTk2cHg7IH0KLnVpLWljb24tdHJhc2ggeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTk2cHg7IH0KLnVpLWljb24tbG9ja2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC05NnB4OyB9Ci51aS1pY29uLXVubG9ja2VkIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC05NnB4OyB9Ci51aS1pY29uLWJvb2ttYXJrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC05NnB4OyB9Ci51aS1pY29uLXRhZyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yNDBweCAtOTZweDsgfQoudWktaWNvbi1ob21lIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTEycHg7IH0KLnVpLWljb24tZmxhZyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xMTJweDsgfQoudWktaWNvbi1jYWxlbmRhciB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xMTJweDsgfQoudWktaWNvbi1jYXJ0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTExMnB4OyB9Ci51aS1pY29uLXBlbmNpbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xMTJweDsgfQoudWktaWNvbi1jbG9jayB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xMTJweDsgfQoudWktaWNvbi1kaXNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTExMnB4OyB9Ci51aS1pY29uLWNhbGN1bGF0b3IgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTExMnB4OyB9Ci51aS1pY29uLXpvb21pbiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMjhweCAtMTEycHg7IH0KLnVpLWljb24tem9vbW91dCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTEycHg7IH0KLnVpLWljb24tc2VhcmNoIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2MHB4IC0xMTJweDsgfQoudWktaWNvbi13cmVuY2ggeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTExMnB4OyB9Ci51aS1pY29uLWdlYXIgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTExMnB4OyB9Ci51aS1pY29uLWhlYXJ0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0xMTJweDsgfQoudWktaWNvbi1zdGFyIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIyNHB4IC0xMTJweDsgfQoudWktaWNvbi1saW5rIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0xMTJweDsgfQoudWktaWNvbi1jYW5jZWwgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xMjhweDsgfQoudWktaWNvbi1wbHVzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2cHggLTEyOHB4OyB9Ci51aS1pY29uLXBsdXN0aGljayB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0xMjhweDsgfQoudWktaWNvbi1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xMjhweDsgfQoudWktaWNvbi1taW51c3RoaWNrIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTEyOHB4OyB9Ci51aS1pY29uLWNsb3NlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTEyOHB4OyB9Ci51aS1pY29uLWNsb3NldGhpY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTI4cHg7IH0KLnVpLWljb24ta2V5IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xMjhweDsgfQoudWktaWNvbi1saWdodGJ1bGIgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTEyOHB4OyB9Ci51aS1pY29uLXNjaXNzb3JzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xMjhweDsgfQoudWktaWNvbi1jbGlwYm9hcmQgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTEyOHB4OyB9Ci51aS1pY29uLWNvcHkgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTEyOHB4OyB9Ci51aS1pY29uLWNvbnRhY3QgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTEyOHB4OyB9Ci51aS1pY29uLWltYWdlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIwOHB4IC0xMjhweDsgfQoudWktaWNvbi12aWRlbyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0yMjRweCAtMTI4cHg7IH0KLnVpLWljb24tc2NyaXB0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0xMjhweDsgfQoudWktaWNvbi1hbGVydCB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE0NHB4OyB9Ci51aS1pY29uLWluZm8geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTQ0cHg7IH0KLnVpLWljb24tbm90aWNlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE0NHB4OyB9Ci51aS1pY29uLWhlbHAgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTQ0cHg7IH0KLnVpLWljb24tY2hlY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTQ0cHg7IH0KLnVpLWljb24tYnVsbGV0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE0NHB4OyB9Ci51aS1pY29uLXJhZGlvLW9uIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE0NHB4OyB9Ci51aS1pY29uLXJhZGlvLW9mZiB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xMTJweCAtMTQ0cHg7IH0KLnVpLWljb24tcGluLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTI4cHggLTE0NHB4OyB9Ci51aS1pY29uLXBpbi1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC0xNDRweDsgfQoudWktaWNvbi1wbGF5IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTYwcHg7IH0KLnVpLWljb24tcGF1c2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTYwcHg7IH0KLnVpLWljb24tc2Vlay1uZXh0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE2MHB4OyB9Ci51aS1pY29uLXNlZWstcHJldiB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xNjBweDsgfQoudWktaWNvbi1zZWVrLWVuZCB7IGJhY2tncm91bmQtcG9zaXRpb246IC02NHB4IC0xNjBweDsgfQoudWktaWNvbi1zZWVrLXN0YXJ0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE2MHB4OyB9Ci8qIHVpLWljb24tc2Vlay1maXJzdCBpcyBkZXByZWNhdGVkLCB1c2UgdWktaWNvbi1zZWVrLXN0YXJ0IGluc3RlYWQgKi8KLnVpLWljb24tc2Vlay1maXJzdCB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0xNjBweDsgfQoudWktaWNvbi1zdG9wIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTk2cHggLTE2MHB4OyB9Ci51aS1pY29uLWVqZWN0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMnB4IC0xNjBweDsgfQoudWktaWNvbi12b2x1bWUtb2ZmIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xNjBweDsgfQoudWktaWNvbi12b2x1bWUtb24geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTE2MHB4OyB9Ci51aS1pY29uLXBvd2VyIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTc2cHg7IH0KLnVpLWljb24tc2lnbmFsLWRpYWcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTZweCAtMTc2cHg7IH0KLnVpLWljb24tc2lnbmFsIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTE3NnB4OyB9Ci51aS1pY29uLWJhdHRlcnktMCB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xNzZweDsgfQoudWktaWNvbi1iYXR0ZXJ5LTEgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTc2cHg7IH0KLnVpLWljb24tYmF0dGVyeS0yIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTE3NnB4OyB9Ci51aS1pY29uLWJhdHRlcnktMyB7IGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC0xNzZweDsgfQoudWktaWNvbi1jaXJjbGUtcGx1cyB7IGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE5MnB4OyB9Ci51aS1pY29uLWNpcmNsZS1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0xOTJweDsgfQoudWktaWNvbi1jaXJjbGUtY2xvc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLXcgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODBweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLWFycm93LWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTEycHggLTE5MnB4OyB9Ci51aS1pY29uLWNpcmNsZS1hcnJvdy1zIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyOHB4IC0xOTJweDsgfQoudWktaWNvbi1jaXJjbGUtYXJyb3ctdyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtMTkycHg7IH0KLnVpLWljb24tY2lyY2xlLWFycm93LW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTYwcHggLTE5MnB4OyB9Ci51aS1pY29uLWNpcmNsZS16b29taW4geyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc2cHggLTE5MnB4OyB9Ci51aS1pY29uLWNpcmNsZS16b29tb3V0IHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC0xOTJweDsgfQoudWktaWNvbi1jaXJjbGUtY2hlY2sgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjA4cHggLTE5MnB4OyB9Ci51aS1pY29uLWNpcmNsZXNtYWxsLXBsdXMgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0yMDhweDsgfQoudWktaWNvbi1jaXJjbGVzbWFsbC1taW51cyB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0yMDhweDsgfQoudWktaWNvbi1jaXJjbGVzbWFsbC1jbG9zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC0zMnB4IC0yMDhweDsgfQoudWktaWNvbi1zcXVhcmVzbWFsbC1wbHVzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTIwOHB4OyB9Ci51aS1pY29uLXNxdWFyZXNtYWxsLW1pbnVzIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTY0cHggLTIwOHB4OyB9Ci51aS1pY29uLXNxdWFyZXNtYWxsLWNsb3NlIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTgwcHggLTIwOHB4OyB9Ci51aS1pY29uLWdyaXAtZG90dGVkLXZlcnRpY2FsIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMjI0cHg7IH0KLnVpLWljb24tZ3JpcC1kb3R0ZWQtaG9yaXpvbnRhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC0xNnB4IC0yMjRweDsgfQoudWktaWNvbi1ncmlwLXNvbGlkLXZlcnRpY2FsIHsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMycHggLTIyNHB4OyB9Ci51aS1pY29uLWdyaXAtc29saWQtaG9yaXpvbnRhbCB7IGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0yMjRweDsgfQoudWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjRweCAtMjI0cHg7IH0KLnVpLWljb24tZ3JpcC1kaWFnb25hbC1zZSB7IGJhY2tncm91bmQtcG9zaXRpb246IC04MHB4IC0yMjRweDsgfQoKCi8qIE1pc2MgdmlzdWFscwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCi8qIENvcm5lciByYWRpdXMgKi8KLnVpLWNvcm5lci1hbGwsCi51aS1jb3JuZXItdG9wLAoudWktY29ybmVyLWxlZnQsCi51aS1jb3JuZXItdGwgewoJYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4Owp9Ci51aS1jb3JuZXItYWxsLAoudWktY29ybmVyLXRvcCwKLnVpLWNvcm5lci1yaWdodCwKLnVpLWNvcm5lci10ciB7Cglib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4Owp9Ci51aS1jb3JuZXItYWxsLAoudWktY29ybmVyLWJvdHRvbSwKLnVpLWNvcm5lci1sZWZ0LAoudWktY29ybmVyLWJsIHsKCWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKfQoudWktY29ybmVyLWFsbCwKLnVpLWNvcm5lci1ib3R0b20sCi51aS1jb3JuZXItcmlnaHQsCi51aS1jb3JuZXItYnIgewoJYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDsKfQoKLyogT3ZlcmxheXMgKi8KLnVpLXdpZGdldC1vdmVybGF5IHsKCWJhY2tncm91bmQ6ICM2NjY2NjY7IC8qIHVybCgiaW1hZ2VzL3VpLWJnX2RpYWdvbmFscy10aGlja18yMF82NjY2NjZfNDB4NDAucG5nIikgNTAlIDUwJSByZXBlYXQ7ICovCglvcGFjaXR5OiAuNTsKCWZpbHRlcjogQWxwaGEoT3BhY2l0eT01MCk7IC8qIHN1cHBvcnQ6IElFOCAqLwp9Ci51aS13aWRnZXQtc2hhZG93IHsKCW1hcmdpbjogLTVweCAwIDAgLTVweDsKCXBhZGRpbmc6IDVweDsKCWJhY2tncm91bmQ6ICMwMDAwMDAgdXJsKCJpbWFnZXMvdWktYmdfZmxhdF8xMF8wMDAwMDBfNDB4MTAwLnBuZyIpIDUwJSA1MCUgcmVwZWF0LXg7CglvcGFjaXR5OiAuMjsKCWZpbHRlcjogQWxwaGEoT3BhY2l0eT0yMCk7IC8qIHN1cHBvcnQ6IElFOCAqLwoJYm9yZGVyLXJhZGl1czogNXB4Owp9Cg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="27" hostname="omniconv" path="/omni/dwr/engine.js" url="http://omniconv/omni/dwr/engine.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8631" connectionId="2004" origin="HTML" ordinal="15" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2244" sendTime="6" waitTime="0" receiveTime="1">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9vbW5pL2R3ci9lbmdpbmUuanMgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Cache-Control" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>bXVzdC1yZXZhbGlkYXRlLCBwb3N0LWNoZWNrPTAsIHByZS1jaGVjaz0w</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Pragma" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>cHVibGlj</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Type" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Language" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Expires" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW9uLCAxMyBBdWcgMjAxOCAxNjoxMzo0NSBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjE1MzQxNzY4MjUwMDAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="10">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>V2ViU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlci83LjA=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Persistent-Auth" index="11">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dHJ1ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="12">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="13">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="14">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Y2xvc2U=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBtdXN0LXJldmFsaWRhdGUsIHBvc3QtY2hlY2s9MCwgcHJlLWNoZWNrPTANClByYWdtYTogcHVibGljDQpDb250ZW50LVR5cGU6IHRleHQvamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCkV4cGlyZXM6IDANCkxhc3QtTW9kaWZpZWQ6IE1vbiwgMTMgQXVnIDIwMTggMTY6MTM6NDUgR01UDQpFVGFnOiAiMTUzNDE3NjgyNTAwMCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KU2VydmVyOiBXZWJTcGhlcmUgQXBwbGljYXRpb24gU2VydmVyLzcuMA0KUGVyc2lzdGVudC1BdXRoOiB0cnVlDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb25uZWN0aW9uOiBjbG9zZQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>LyoKICogQ29weXJpZ2h0IDIwMDUgSm9lIFdhbGtlcgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8qKgogKiBEZWNsYXJlIGFuIG9iamVjdCB0byB3aGljaCB3ZSBjYW4gYWRkIHJlYWwgZnVuY3Rpb25zLgogKi8KaWYgKGR3ciA9PSBudWxsKSB2YXIgZHdyID0ge307CmlmIChkd3IuZW5naW5lID09IG51bGwpIGR3ci5lbmdpbmUgPSB7fTsKaWYgKERXUkVuZ2luZSA9PSBudWxsKSB2YXIgRFdSRW5naW5lID0gZHdyLmVuZ2luZTsKCi8qKgogKiBTZXQgYW4gYWx0ZXJuYXRpdmUgZXJyb3IgaGFuZGxlciBmcm9tIHRoZSBkZWZhdWx0IGFsZXJ0IGJveC4KICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL2Vycm9ycwogKi8KZHdyLmVuZ2luZS5zZXRFcnJvckhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7CiAgZHdyLmVuZ2luZS5fZXJyb3JIYW5kbGVyID0gaGFuZGxlcjsKfTsKCi8qKgogKiBTZXQgYW4gYWx0ZXJuYXRpdmUgd2FybmluZyBoYW5kbGVyIGZyb20gdGhlIGRlZmF1bHQgYWxlcnQgYm94LgogKiBAc2VlIGdldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci9lbmdpbmUvZXJyb3JzCiAqLwpkd3IuZW5naW5lLnNldFdhcm5pbmdIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikgewogIGR3ci5lbmdpbmUuX3dhcm5pbmdIYW5kbGVyID0gaGFuZGxlcjsKfTsKCi8qKgogKiBTZXR0ZXIgZm9yIHRoZSB0ZXh0L2h0bWwgaGFuZGxlciAtIHdoYXQgaGFwcGVucyBpZiBhIERXUiByZXF1ZXN0IGdldHMgYW4gSFRNTAogKiByZXBseSByYXRoZXIgdGhhbiB0aGUgZXhwZWN0ZWQgSmF2YXNjcmlwdC4gT2Z0ZW4gZHVlIHRvIGxvZ2luIHRpbWVvdXQKICovCmR3ci5lbmdpbmUuc2V0VGV4dEh0bWxIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikgewogIGR3ci5lbmdpbmUuX3RleHRIdG1sSGFuZGxlciA9IGhhbmRsZXI7Cn07CgovKioKICogU2V0IGEgZGVmYXVsdCB0aW1lb3V0IHZhbHVlIGZvciBhbGwgY2FsbHMuIDAgKHRoZSBkZWZhdWx0KSB0dXJucyB0aW1lb3V0cyBvZmYuCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL2VuZ2luZS9lcnJvcnMKICovCmR3ci5lbmdpbmUuc2V0VGltZW91dCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsKICBkd3IuZW5naW5lLl90aW1lb3V0ID0gdGltZW91dDsKfTsKCi8qKgogKiBUaGUgUHJlLUhvb2sgaXMgY2FsbGVkIGJlZm9yZSBhbnkgRFdSIHJlbW90aW5nIGlzIGRvbmUuCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL2VuZ2luZS9ob29rcwogKi8KZHdyLmVuZ2luZS5zZXRQcmVIb29rID0gZnVuY3Rpb24oaGFuZGxlcikgewogIGR3ci5lbmdpbmUuX3ByZUhvb2sgPSBoYW5kbGVyOwp9OwoKLyoqCiAqIFRoZSBQb3N0LUhvb2sgaXMgY2FsbGVkIGFmdGVyIGFueSBEV1IgcmVtb3RpbmcgaXMgZG9uZS4KICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL2hvb2tzCiAqLwpkd3IuZW5naW5lLnNldFBvc3RIb29rID0gZnVuY3Rpb24oaGFuZGxlcikgewogIGR3ci5lbmdpbmUuX3Bvc3RIb29rID0gaGFuZGxlcjsKfTsKCi8qKgogKiBDdXN0b20gaGVhZGVycyBmb3IgYWxsIERXUiBjYWxscwogKiBAc2VlIGdldGFoZWFkLm9yZy9kd3IvPz8/PwogKi8KZHdyLmVuZ2luZS5zZXRIZWFkZXJzID0gZnVuY3Rpb24oaGVhZGVycykgewogIGR3ci5lbmdpbmUuX2hlYWRlcnMgPSBoZWFkZXJzOwp9OwoKLyoqCiAqIEN1c3RvbSBwYXJhbWV0ZXJzIGZvciBhbGwgRFdSIGNhbGxzCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci8/Pz8/CiAqLwpkd3IuZW5naW5lLnNldFBhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbWV0ZXJzKSB7CiAgZHdyLmVuZ2luZS5fcGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7Cn07CgovKiogWEhSIHJlbW90aW5nIHR5cGUgY29uc3RhbnQuIFNlZSBkd3IuZW5naW5lLnNldFtScGN8UG9sbF1UeXBlKCkgKi8KZHdyLmVuZ2luZS5YTUxIdHRwUmVxdWVzdCA9IDE7CgovKiogWEhSIHJlbW90aW5nIHR5cGUgY29uc3RhbnQuIFNlZSBkd3IuZW5naW5lLnNldFtScGN8UG9sbF1UeXBlKCkgKi8KZHdyLmVuZ2luZS5JRnJhbWUgPSAyOwoKLyoqIFhIUiByZW1vdGluZyB0eXBlIGNvbnN0YW50LiBTZWUgZHdyLmVuZ2luZS5zZXRScGNUeXBlKCkgKi8KZHdyLmVuZ2luZS5TY3JpcHRUYWcgPSAzOwoKLyoqCiAqIFNldCB0aGUgcHJlZmVycmVkIHJlbW90aW5nIHR5cGUuCiAqIEBwYXJhbSBuZXdUeXBlIE9uZSBvZiBkd3IuZW5naW5lLlhNTEh0dHBSZXF1ZXN0IG9yIGR3ci5lbmdpbmUuSUZyYW1lIG9yIGR3ci5lbmdpbmUuU2NyaXB0VGFnCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL2VuZ2luZS9vcHRpb25zCiAqLwpkd3IuZW5naW5lLnNldFJwY1R5cGUgPSBmdW5jdGlvbihuZXdUeXBlKSB7CiAgaWYgKG5ld1R5cGUgIT0gZHdyLmVuZ2luZS5YTUxIdHRwUmVxdWVzdCAmJiBuZXdUeXBlICE9IGR3ci5lbmdpbmUuSUZyYW1lICYmIG5ld1R5cGUgIT0gZHdyLmVuZ2luZS5TY3JpcHRUYWcpIHsKICAgIGR3ci5lbmdpbmUuX2hhbmRsZUVycm9yKG51bGwsIHsgbmFtZToiZHdyLmVuZ2luZS5pbnZhbGlkUnBjVHlwZSIsIG1lc3NhZ2U6IlJwY1R5cGUgbXVzdCBiZSBvbmUgb2YgZHdyLmVuZ2luZS5YTUxIdHRwUmVxdWVzdCBvciBkd3IuZW5naW5lLklGcmFtZSBvciBkd3IuZW5naW5lLlNjcmlwdFRhZyIgfSk7CiAgICByZXR1cm47CiAgfQogIGR3ci5lbmdpbmUuX3JwY1R5cGUgPSBuZXdUeXBlOwp9OwoKLyoqCiAqIFdoaWNoIEhUVFAgbWV0aG9kIGRvIHdlIHVzZSB0byBzZW5kIHJlc3VsdHM/IE11c3QgYmUgb25lIG9mICJHRVQiIG9yICJQT1NUIi4KICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL29wdGlvbnMKICovCmR3ci5lbmdpbmUuc2V0SHR0cE1ldGhvZCA9IGZ1bmN0aW9uKGh0dHBNZXRob2QpIHsKICBpZiAoaHR0cE1ldGhvZCAhPSAiR0VUIiAmJiBodHRwTWV0aG9kICE9ICJQT1NUIikgewogICAgZHdyLmVuZ2luZS5faGFuZGxlRXJyb3IobnVsbCwgeyBuYW1lOiJkd3IuZW5naW5lLmludmFsaWRIdHRwTWV0aG9kIiwgbWVzc2FnZToiUmVtb3RpbmcgbWV0aG9kIG11c3QgYmUgb25lIG9mIEdFVCBvciBQT1NUIiB9KTsKICAgIHJldHVybjsKICB9CiAgZHdyLmVuZ2luZS5faHR0cE1ldGhvZCA9IGh0dHBNZXRob2Q7Cn07CgovKioKICogRW5zdXJlIHRoYXQgcmVtb3RlIGNhbGxzIGhhcHBlbiBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIHNlbnQ/IChEZWZhdWx0OiBmYWxzZSkKICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL29yZGVyaW5nCiAqLwpkd3IuZW5naW5lLnNldE9yZGVyZWQgPSBmdW5jdGlvbihvcmRlcmVkKSB7CiAgZHdyLmVuZ2luZS5fb3JkZXJlZCA9IG9yZGVyZWQ7Cn07CgovKioKICogRG8gd2UgYXNrIHRoZSBYSFIgb2JqZWN0IHRvIGJlIGFzeW5jaHJvbm91cz8gKERlZmF1bHQ6IHRydWUpCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL2VuZ2luZS9vcHRpb25zCiAqLwpkd3IuZW5naW5lLnNldEFzeW5jID0gZnVuY3Rpb24oYXN5bmMpIHsKICBkd3IuZW5naW5lLl9hc3luYyA9IGFzeW5jOwp9OwoKLyoqCiAqIERvZXMgRFdSIHBvbGwgdGhlIHNlcnZlciBmb3IgdXBkYXRlcz8gKERlZmF1bHQ6IGZhbHNlKQogKiBAc2VlIGdldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci9lbmdpbmUvb3B0aW9ucwogKi8KZHdyLmVuZ2luZS5zZXRBY3RpdmVSZXZlcnNlQWpheCA9IGZ1bmN0aW9uKGFjdGl2ZVJldmVyc2VBamF4KSB7CiAgaWYgKGFjdGl2ZVJldmVyc2VBamF4KSB7CiAgICAvLyBCYWlsIGlmIHdlIGFyZSBhbHJlYWR5IHN0YXJ0ZWQKICAgIGlmIChkd3IuZW5naW5lLl9hY3RpdmVSZXZlcnNlQWpheCkgcmV0dXJuOwogICAgZHdyLmVuZ2luZS5fYWN0aXZlUmV2ZXJzZUFqYXggPSB0cnVlOwogICAgZHdyLmVuZ2luZS5fcG9sbCgpOwogIH0KICBlbHNlIHsKICAgIC8vIENhbiB3ZSBjYW5jZWwgYW4gZXhpc3RpbmcgcmVxdWVzdD8KICAgIGlmIChkd3IuZW5naW5lLl9hY3RpdmVSZXZlcnNlQWpheCAmJiBkd3IuZW5naW5lLl9wb2xsUmVxKSBkd3IuZW5naW5lLl9wb2xsUmVxLmFib3J0KCk7CiAgICBkd3IuZW5naW5lLl9hY3RpdmVSZXZlcnNlQWpheCA9IGZhbHNlOwogIH0KICAvLyBUT0RPOiBpbiBpZnJhbWUgbW9kZSwgaWYgd2Ugc3RhcnQsIHN0b3AsIHN0YXJ0IHRoZW4gdGhlIHNlY29uZCBzdGFydCBtYXkKICAvLyB3ZWxsIGtpY2sgb2ZmIGEgc2Vjb25kIGlmcmFtZSB3aGlsZSB0aGUgZmlyc3QgaXMgc3RpbGwgYWJvdXQgdG8gcmV0dXJuCiAgLy8gd2Ugc2hvdWxkIGNvcGUgd2l0aCB0aGlzIGJ1dCB3ZSBkb24ndAp9OwoKLyoqCiAqIFRoZSBkZWZhdWx0IG1lc3NhZ2UgaGFuZGxlci4KICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL2Vycm9ycwogKi8KZHdyLmVuZ2luZS5kZWZhdWx0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24obWVzc2FnZSwgZXgpIHsKICBkd3IuZW5naW5lLl9kZWJ1ZygiRXJyb3I6ICIgKyBleC5uYW1lICsgIiwgIiArIGV4Lm1lc3NhZ2UsIHRydWUpOwogIGlmIChtZXNzYWdlID09IG51bGwgfHwgbWVzc2FnZSA9PSAiIikgYWxlcnQoIkEgc2VydmVyIGVycm9yIGhhcyBvY2N1cmVkLiIpOwogIC8vIElnbm9yZSBOU19FUlJPUl9OT1RfQVZBSUxBQkxFIGlmIE1vemlsbGEgaXMgYmVpbmcgbmFya3kKICBlbHNlIGlmIChtZXNzYWdlLmluZGV4T2YoIjB4ODAwNDAxMTEiKSAhPSAtMSkgZHdyLmVuZ2luZS5fZGVidWcobWVzc2FnZSk7CiAgZWxzZSBhbGVydChtZXNzYWdlKTsKfTsKCi8qKgogKiBUaGUgZGVmYXVsdCB3YXJuaW5nIGhhbmRsZXIuCiAqIEBzZWUgZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL2VuZ2luZS9lcnJvcnMKICovCmR3ci5lbmdpbmUuZGVmYXVsdFdhcm5pbmdIYW5kbGVyID0gZnVuY3Rpb24obWVzc2FnZSwgZXgpIHsKICBkd3IuZW5naW5lLl9kZWJ1ZyhtZXNzYWdlKTsKfTsKCi8qKgogKiBGb3IgcmVkdWNlZCBsYXRlbmN5IHlvdSBjYW4gZ3JvdXAgc2V2ZXJhbCByZW1vdGUgY2FsbHMgdG9nZXRoZXIgdXNpbmcgYSBiYXRjaC4KICogQHNlZSBnZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvZW5naW5lL2JhdGNoCiAqLwpkd3IuZW5naW5lLmJlZ2luQmF0Y2ggPSBmdW5jdGlvbigpIHsKICBpZiAoZHdyLmVuZ2luZS5fYmF0Y2gpIHsKICAgIGR3ci5lbmdpbmUuX2hhbmRsZUVycm9yKG51bGwsIHsgbmFtZToiZHdyLmVuZ2luZS5iYXRjaEJlZ3VuIiwgbWVzc2FnZToiQmF0Y2ggYWxyZWFkeSBiZWd1biIgfSk7CiAgICByZXR1cm47CiAgfQogIGR3ci5lbmdpbmUuX2JhdGNoID0gZHdyLmVuZ2luZS5fY3JlYXRlQmF0Y2goKTsKfTsKCi8qKgogKiBGaW5pc2hlZCBncm91cGluZyBhIHNldCBvZiByZW1vdGUgY2FsbHMgdG9nZXRoZXIuIEdvIGFuZCBleGVjdXRlIHRoZW0gYWxsLgogKiBAc2VlIGdldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci9lbmdpbmUvYmF0Y2gKICovCmR3ci5lbmdpbmUuZW5kQmF0Y2ggPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdmFyIGJhdGNoID0gZHdyLmVuZ2luZS5fYmF0Y2g7CiAgaWYgKGJhdGNoID09IG51bGwpIHsKICAgIGR3ci5lbmdpbmUuX2hhbmRsZUVycm9yKG51bGwsIHsgbmFtZToiZHdyLmVuZ2luZS5iYXRjaE5vdEJlZ3VuIiwgbWVzc2FnZToiTm8gYmF0Y2ggaW4gcHJvZ3Jlc3MiIH0pOwogICAgcmV0dXJuOwogIH0KICBkd3IuZW5naW5lLl9iYXRjaCA9IG51bGw7CiAgaWYgKGJhdGNoLm1hcC5jYWxsQ291bnQgPT0gMCkgcmV0dXJuOwoKICAvLyBUaGUgaG9va3MgbmVlZCB0byBiZSBtZXJnZWQgY2FyZWZ1bGx5IHRvIHByZXNlcnZlIG9yZGVyaW5nCiAgaWYgKG9wdGlvbnMpIGR3ci5lbmdpbmUuX21lcmdlQmF0Y2goYmF0Y2gsIG9wdGlvbnMpOwoKICAvLyBJbiBvcmRlcmVkIG1vZGUsIHdlIGRvbid0IHNlbmQgdW5sZXNzIHRoZSBsaXN0IG9mIHNlbnQgaXRlbXMgaXMgZW1wdHkKICBpZiAoZHdyLmVuZ2luZS5fb3JkZXJlZCAmJiBkd3IuZW5naW5lLl9iYXRjaGVzTGVuZ3RoICE9IDApIHsKICAgIGR3ci5lbmdpbmUuX2JhdGNoUXVldWVbZHdyLmVuZ2luZS5fYmF0Y2hRdWV1ZS5sZW5ndGhdID0gYmF0Y2g7CiAgfQogIGVsc2UgewogICAgZHdyLmVuZ2luZS5fc2VuZERhdGEoYmF0Y2gpOwogIH0KfTsKCi8qKiBAZGVwcmVjYXRlZCAqLwpkd3IuZW5naW5lLnNldFBvbGxNZXRob2QgPSBmdW5jdGlvbih0eXBlKSB7IGR3ci5lbmdpbmUuc2V0UG9sbFR5cGUodHlwZSk7IH07CmR3ci5lbmdpbmUuc2V0TWV0aG9kID0gZnVuY3Rpb24odHlwZSkgeyBkd3IuZW5naW5lLnNldFJwY1R5cGUodHlwZSk7IH07CmR3ci5lbmdpbmUuc2V0VmVyYiA9IGZ1bmN0aW9uKHZlcmIpIHsgZHdyLmVuZ2luZS5zZXRIdHRwTWV0aG9kKHZlcmIpOyB9Owpkd3IuZW5naW5lLnNldFBvbGxUeXBlID0gZnVuY3Rpb24oKSB7IGR3ci5lbmdpbmUuX2RlYnVnKCJNYW51YWxseSBzZXR0aW5nIHRoZSBQb2xsIFR5cGUgaXMgbm90IHN1cHBvcnRlZCIpOyB9OwoKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gT25seSBwcml2YXRlIHN0dWZmIGJlbG93IGhlcmUKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8qKiBUaGUgb3JpZ2luYWwgcGFnZSBpZCBzZW50IGZyb20gdGhlIHNlcnZlciAqLwpkd3IuZW5naW5lLl9vcmlnU2NyaXB0U2Vzc2lvbklkID0gIjQyMkM0NzNDQkM1N0YwOUNCMzgyRENGMDg4QkUyMDdGIjsKCi8qKiBUaGUgc2Vzc2lvbiBjb29raWUgbmFtZSAqLwpkd3IuZW5naW5lLl9zZXNzaW9uQ29va2llTmFtZSA9ICJKU0VTU0lPTklEIjsgLy8gSlNFU1NJT05JRAoKLyoqIElzIEdFVCBlbmFibGVkIGZvciB0aGUgYmVuZWZpdCBvZiBTYWZhcmk/ICovCmR3ci5lbmdpbmUuX2FsbG93R2V0Rm9yU2FmYXJpQnV0TWFrZUZvcmdlcnlFYXNpZXIgPSAiZmFsc2UiOwoKLyoqIFRoZSBzY3JpcHQgcHJlZml4IHRvIHN0cmlwIGluIHRoZSBjYXNlIG9mIHNjcmlwdFRhZ1Byb3RlY3Rpb24uICovCmR3ci5lbmdpbmUuX3NjcmlwdFRhZ1Byb3RlY3Rpb24gPSAidGhyb3cgJ2FsbG93U2NyaXB0VGFnUmVtb3RpbmcgaXMgZmFsc2UuJzsiOwoKLyoqIFRoZSBkZWZhdWx0IHBhdGggdG8gdGhlIERXUiBzZXJ2bGV0ICovCmR3ci5lbmdpbmUuX2RlZmF1bHRQYXRoID0gIi9vbW5pL2R3ciI7CgovKiogRG8gd2UgdXNlIFhIUiBmb3IgcmV2ZXJzZSBhamF4IGJlY2F1c2Ugd2UgYXJlIG5vdCBzdHJlYW1pbmc/ICovCmR3ci5lbmdpbmUuX3BvbGxXaXRoWGhyID0gImZhbHNlIjsKCi8qKiBUaGUgcmVhZCBwYWdlIGlkIHRoYXQgd2UgY2FsY3VsYXRlICovCmR3ci5lbmdpbmUuX3NjcmlwdFNlc3Npb25JZCA9IG51bGw7CgovKiogVGhlIGZ1bmN0aW9uIHRoYXQgd2UgdXNlIHRvIGZldGNoL2NhbGN1bGF0ZSBhIHNlc3Npb24gaWQgKi8KZHdyLmVuZ2luZS5fZ2V0U2NyaXB0U2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7CiAgaWYgKGR3ci5lbmdpbmUuX3NjcmlwdFNlc3Npb25JZCA9PSBudWxsKSB7CiAgICBkd3IuZW5naW5lLl9zY3JpcHRTZXNzaW9uSWQgPSBkd3IuZW5naW5lLl9vcmlnU2NyaXB0U2Vzc2lvbklkICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7CiAgfQogIHJldHVybiBkd3IuZW5naW5lLl9zY3JpcHRTZXNzaW9uSWQ7Cn07CgovKiogQSBmdW5jdGlvbiB0byBjYWxsIGlmIHNvbWV0aGluZyBmYWlscy4gKi8KZHdyLmVuZ2luZS5fZXJyb3JIYW5kbGVyID0gZHdyLmVuZ2luZS5kZWZhdWx0RXJyb3JIYW5kbGVyOwoKLyoqIEZvciBkZWJ1Z2dpbmcgd2hlbiBzb21ldGhpbmcgdW5leHBsYWluZWQgaGFwcGVucy4gKi8KZHdyLmVuZ2luZS5fd2FybmluZ0hhbmRsZXIgPSBkd3IuZW5naW5lLmRlZmF1bHRXYXJuaW5nSGFuZGxlcjsKCi8qKiBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBiZWZvcmUgcmVxdWVzdHMgYXJlIG1hcnNoYWxsZWQuIENhbiBiZSBudWxsLiAqLwpkd3IuZW5naW5lLl9wcmVIb29rID0gbnVsbDsKCi8qKiBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhZnRlciByZXBsaWVzIGFyZSByZWNlaXZlZC4gQ2FuIGJlIG51bGwuICovCmR3ci5lbmdpbmUuX3Bvc3RIb29rID0gbnVsbDsKCi8qKiBBbiBtYXAgb2YgdGhlIGJhdGNoZXMgdGhhdCB3ZSBoYXZlIHNlbnQgYW5kIGFyZSBhd2FpdGluZyBhIHJlcGx5IG9uLiAqLwpkd3IuZW5naW5lLl9iYXRjaGVzID0ge307CgovKiogQSBjb3VudCBvZiB0aGUgbnVtYmVyIG9mIG91dHN0YW5kaW5nIGJhdGNoZXMuIFNob3VsZCBiZSA9PSB0byBfYmF0Y2hlcy5sZW5ndGggdW5sZXNzIHByb3RvdHlwZSBoYXMgbWVzc2VkIHRoaW5ncyB1cCAqLwpkd3IuZW5naW5lLl9iYXRjaGVzTGVuZ3RoID0gMDsKCi8qKiBJbiBvcmRlcmVkIG1vZGUsIHRoZSBhcnJheSBvZiBiYXRjaGVzIHdhaXRpbmcgdG8gYmUgc2VudCAqLwpkd3IuZW5naW5lLl9iYXRjaFF1ZXVlID0gW107CgovKiogV2hhdCBpcyB0aGUgZGVmYXVsdCBycGMgdHlwZSAqLwpkd3IuZW5naW5lLl9ycGNUeXBlID0gZHdyLmVuZ2luZS5YTUxIdHRwUmVxdWVzdDsKCi8qKiBXaGF0IGlzIHRoZSBkZWZhdWx0IHJlbW90aW5nIG1ldGhvZCAoaWUgR0VUIG9yIFBPU1QpICovCmR3ci5lbmdpbmUuX2h0dHBNZXRob2QgPSAiUE9TVCI7CgovKiogRG8gd2UgYXR0ZW1wdCB0byBlbnN1cmUgdGhhdCBjYWxscyBoYXBwZW4gaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBzZW50PyAqLwpkd3IuZW5naW5lLl9vcmRlcmVkID0gZmFsc2U7CgovKiogRG8gd2UgbWFrZSB0aGUgY2FsbHMgYXN5bmM/ICovCmR3ci5lbmdpbmUuX2FzeW5jID0gdHJ1ZTsKCi8qKiBUaGUgY3VycmVudCBiYXRjaCAoaWYgd2UgYXJlIGluIGJhdGNoIG1vZGUpICovCmR3ci5lbmdpbmUuX2JhdGNoID0gbnVsbDsKCi8qKiBUaGUgZ2xvYmFsIHRpbWVvdXQgKi8KZHdyLmVuZ2luZS5fdGltZW91dCA9IDA7CgovKiogQWN0aXZlWCBvYmplY3RzIHRvIHVzZSB3aGVuIHdlIHdhbnQgdG8gY29udmVydCBhbiB4bWwgc3RyaW5nIGludG8gYSBET00gb2JqZWN0LiAqLwpkd3IuZW5naW5lLl9ET01Eb2N1bWVudCA9IFsiTXN4bWwyLkRPTURvY3VtZW50LjYuMCIsICJNc3htbDIuRE9NRG9jdW1lbnQuNS4wIiwgIk1zeG1sMi5ET01Eb2N1bWVudC40LjAiLCAiTXN4bWwyLkRPTURvY3VtZW50LjMuMCIsICJNU1hNTDIuRE9NRG9jdW1lbnQiLCAiTVNYTUwuRE9NRG9jdW1lbnQiLCAiTWljcm9zb2Z0LlhNTERPTSJdOwoKLyoqIFRoZSBBY3RpdmVYIG9iamVjdHMgdG8gdXNlIHdoZW4gd2Ugd2FudCB0byBkbyBhbiBYTUxIdHRwUmVxdWVzdCBjYWxsLiAqLwpkd3IuZW5naW5lLl9YTUxIVFRQID0gWyJNc3htbDIuWE1MSFRUUC42LjAiLCAiTXN4bWwyLlhNTEhUVFAuNS4wIiwgIk1zeG1sMi5YTUxIVFRQLjQuMCIsICJNU1hNTDIuWE1MSFRUUC4zLjAiLCAiTVNYTUwyLlhNTEhUVFAiLCAiTWljcm9zb2Z0LlhNTEhUVFAiXTsKCi8qKiBBcmUgd2UgZG9pbmcgY29tZXQgb3IgcG9sbGluZz8gKi8KZHdyLmVuZ2luZS5fYWN0aXZlUmV2ZXJzZUFqYXggPSBmYWxzZTsKCi8qKiBUaGUgaWZyYW1lIHRoYXQgd2UgYXJlIHVzaW5nIHRvIHBvbGwgKi8KZHdyLmVuZ2luZS5fb3V0c3RhbmRpbmdJRnJhbWVzID0gW107CgovKiogVGhlIHhociBvYmplY3QgdGhhdCB3ZSBhcmUgdXNpbmcgdG8gcG9sbCAqLwpkd3IuZW5naW5lLl9wb2xsUmVxID0gbnVsbDsKCi8qKiBIb3cgbWFueSBtaWxsaXNlY29uZHMgYmV0d2VlbiBpbnRlcm5hbCBjb21ldCBwb2xscyAqLwpkd3IuZW5naW5lLl9wb2xsQ29tZXRJbnRlcnZhbCA9IDIwMDsKCi8qKiBIb3cgbWFueSB0aW1lcyBoYXZlIHdlIHJlLXRyaWVkIHRvIHBvbGw/ICovCmR3ci5lbmdpbmUuX3BvbGxSZXRyaWVzID0gMDsKZHdyLmVuZ2luZS5fbWF4UG9sbFJldHJpZXMgPSAwOwoKLyoqIERvIHdlIGRvIGEgZG9jdW1lbnQucmVsb2FkIGlmIHdlIGdldCBhIHRleHQvaHRtbCByZXBseT8gKi8KZHdyLmVuZ2luZS5fdGV4dEh0bWxIYW5kbGVyID0gbnVsbDsKCi8qKiBJZiB5b3Ugd2lzaCB0byBzZW5kIGN1c3RvbSBoZWFkZXJzIHdpdGggZXZlcnkgcmVxdWVzdCAqLwpkd3IuZW5naW5lLl9oZWFkZXJzID0gbnVsbDsKCi8qKiBJZiB5b3Ugd2lzaCB0byBzZW5kIGV4dHJhIGN1c3RvbSByZXF1ZXN0IHBhcmFtZXRlcnMgd2l0aCBlYWNoIHJlcXVlc3QgKi8KZHdyLmVuZ2luZS5fcGFyYW1ldGVycyA9IG51bGw7CgovKiogVW5kb2N1bWVudGVkIGludGVyY2VwdG9ycyAtIGRvIG5vdCB1c2UgKi8KZHdyLmVuZ2luZS5fcG9zdFNlcGVyYXRvciA9ICJcbiI7CmR3ci5lbmdpbmUuX2RlZmF1bHRJbnRlcmNlcHRvciA9IGZ1bmN0aW9uKGRhdGEpIHsgcmV0dXJuIGRhdGE7IH07CmR3ci5lbmdpbmUuX3VybFJld3JpdGVIYW5kbGVyID0gZHdyLmVuZ2luZS5fZGVmYXVsdEludGVyY2VwdG9yOwpkd3IuZW5naW5lLl9jb250ZW50UmV3cml0ZUhhbmRsZXIgPSBkd3IuZW5naW5lLl9kZWZhdWx0SW50ZXJjZXB0b3I7CmR3ci5lbmdpbmUuX3JlcGx5UmV3cml0ZUhhbmRsZXIgPSBkd3IuZW5naW5lLl9kZWZhdWx0SW50ZXJjZXB0b3I7CgovKiogQmF0Y2ggaWRzIGFsbG93IHVzIHRvIGtub3cgd2hpY2ggYmF0Y2ggdGhlIHNlcnZlciBpcyBhbnN3ZXJpbmcgKi8KZHdyLmVuZ2luZS5fbmV4dEJhdGNoSWQgPSAwOwoKLyoqIEEgbGlzdCBvZiB0aGUgcHJvcGVydGllcyB0aGF0IG5lZWQgbWVyZ2luZyBmcm9tIGNhbGxzIHRvIGEgYmF0Y2ggKi8KZHdyLmVuZ2luZS5fcHJvcG5hbWVzID0gWyAicnBjVHlwZSIsICJodHRwTWV0aG9kIiwgImFzeW5jIiwgInRpbWVvdXQiLCAiZXJyb3JIYW5kbGVyIiwgIndhcm5pbmdIYW5kbGVyIiwgInRleHRIdG1sSGFuZGxlciIgXTsKCi8qKiBEbyB3ZSBzdHJlYW0sIG9yIGNhbiBiZSBoYWNrZWQgdG8gZG8gc28/ICovCmR3ci5lbmdpbmUuX3BhcnRpYWxSZXNwb25zZU5vID0gMDsKZHdyLmVuZ2luZS5fcGFydGlhbFJlc3BvbnNlWWVzID0gMTsKZHdyLmVuZ2luZS5fcGFydGlhbFJlc3BvbnNlRmx1c2ggPSAyOwoKLyoqIElzIHRoaXMgcGFnZSBpbiB0aGUgcHJvY2VzcyBvZiB1bmxvYWRpbmc/ICovCmR3ci5lbmdpbmUuX3VubG9hZGluZyA9IGZhbHNlOwoKLyoqCiAqIEBwcml2YXRlIFNlbmQgYSByZXF1ZXN0LiBDYWxsZWQgYnkgdGhlIEphdmFzY3JpcHQgaW50ZXJmYWNlIHN0dWIKICogQHBhcmFtIHBhdGggcGFydCBvZiBVUkwgYWZ0ZXIgdGhlIGhvc3QgYW5kIGJlZm9yZSB0aGUgZXhlYyBiaXQgd2l0aG91dCBsZWFkaW5nIG9yIHRyYWlsaW5nIC9zCiAqIEBwYXJhbSBzY3JpcHROYW1lIFRoZSBjbGFzcyB0byBleGVjdXRlCiAqIEBwYXJhbSBtZXRob2ROYW1lIFRoZSBtZXRob2Qgb24gc2FpZCBjbGFzcyB0byBleGVjdXRlCiAqIEBwYXJhbSBmdW5jIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byB3aGljaCBhbnkgcmV0dXJuZWQgZGF0YSBzaG91bGQgYmUgcGFzc2VkCiAqICAgICAgIGlmIHRoaXMgaXMgbnVsbCwgYW55IHJldHVybmVkIGRhdGEgd2lsbCBiZSBpZ25vcmVkCiAqIEBwYXJhbSB2YXJhcmdfcGFyYW1zIFRoZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGFib3ZlIGNsYXNzCiAqLwpkd3IuZW5naW5lLl9leGVjdXRlID0gZnVuY3Rpb24ocGF0aCwgc2NyaXB0TmFtZSwgbWV0aG9kTmFtZSwgdmFyYXJnX3BhcmFtcykgewogIHZhciBzaW5nbGVTaG90ID0gZmFsc2U7CiAgaWYgKGR3ci5lbmdpbmUuX2JhdGNoID09IG51bGwpIHsKICAgIGR3ci5lbmdpbmUuYmVnaW5CYXRjaCgpOwogICAgc2luZ2xlU2hvdCA9IHRydWU7CiAgfQogIHZhciBiYXRjaCA9IGR3ci5lbmdpbmUuX2JhdGNoOwogIC8vIFRvIG1ha2UgdGhlbSBlYXN5IHRvIG1hbmlwdWxhdGUgd2UgY29weSB0aGUgYXJndW1lbnRzIGludG8gYW4gYXJncyBhcnJheQogIHZhciBhcmdzID0gW107CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMzsgaSsrKSB7CiAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAzXTsKICB9CiAgLy8gQWxsIHRoZSBwYXRocyBNVVNUIGJlIHRvIHRoZSBzYW1lIHNlcnZsZXQKICBpZiAoYmF0Y2gucGF0aCA9PSBudWxsKSB7CiAgICBiYXRjaC5wYXRoID0gcGF0aDsKICB9CiAgZWxzZSB7CiAgICBpZiAoYmF0Y2gucGF0aCAhPSBwYXRoKSB7CiAgICAgIGR3ci5lbmdpbmUuX2hhbmRsZUVycm9yKGJhdGNoLCB7IG5hbWU6ImR3ci5lbmdpbmUubXVsdGlwbGVTZXJ2bGV0cyIsIG1lc3NhZ2U6IkNhbid0IGJhdGNoIHJlcXVlc3RzIHRvIG11bHRpcGxlIERXUiBTZXJ2bGV0cy4iIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgfQogIC8vIEZyb20gdGhlIG90aGVyIHBhcmFtcywgd29yayBvdXQgd2hpY2ggaXMgdGhlIGZ1bmN0aW9uIChvciBvYmplY3Qgd2l0aAogIC8vIGNhbGwgbWV0YS1kYXRhKSBhbmQgd2hpY2ggaXMgdGhlIGNhbGwgcGFyYW1ldGVycwogIHZhciBjYWxsRGF0YTsKICB2YXIgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTsKICBpZiAodHlwZW9mIGxhc3RBcmcgPT0gImZ1bmN0aW9uIiB8fCBsYXN0QXJnID09IG51bGwpIGNhbGxEYXRhID0geyBjYWxsYmFjazphcmdzLnBvcCgpIH07CiAgZWxzZSBjYWxsRGF0YSA9IGFyZ3MucG9wKCk7CgogIC8vIE1lcmdlIGZyb20gdGhlIGNhbGxEYXRhIGludG8gdGhlIGJhdGNoCiAgZHdyLmVuZ2luZS5fbWVyZ2VCYXRjaChiYXRjaCwgY2FsbERhdGEpOwogIGJhdGNoLmhhbmRsZXJzW2JhdGNoLm1hcC5jYWxsQ291bnRdID0gewogICAgZXhjZXB0aW9uSGFuZGxlcjpjYWxsRGF0YS5leGNlcHRpb25IYW5kbGVyLAogICAgY2FsbGJhY2s6Y2FsbERhdGEuY2FsbGJhY2sKICB9OwoKICAvLyBDb3B5IHRvIHRoZSBtYXAgdGhlIHRoaW5ncyB0aGF0IG5lZWQgc2VyaWFsaXppbmcKICB2YXIgcHJlZml4ID0gImMiICsgYmF0Y2gubWFwLmNhbGxDb3VudCArICItIjsKICBiYXRjaC5tYXBbcHJlZml4ICsgInNjcmlwdE5hbWUiXSA9IHNjcmlwdE5hbWU7CiAgYmF0Y2gubWFwW3ByZWZpeCArICJtZXRob2ROYW1lIl0gPSBtZXRob2ROYW1lOwogIGJhdGNoLm1hcFtwcmVmaXggKyAiaWQiXSA9IGJhdGNoLm1hcC5jYWxsQ291bnQ7CiAgdmFyIHJlZmN0eCA9IFtdOwogIGZvciAoaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICBkd3IuZW5naW5lLl9zZXJpYWxpemVBbGwoYmF0Y2gsIHJlZmN0eCwgYXJnc1tpXSwgcHJlZml4ICsgInBhcmFtIiArIGkpOwogIH0KCiAgLy8gTm93IHdlIGhhdmUgZmluaXNoZWQgcmVtZW1iZXJpbmcgdGhlIGNhbGwsIHdlIGluY3IgdGhlIGNhbGwgY291bnQKICBiYXRjaC5tYXAuY2FsbENvdW50Kys7CiAgaWYgKHNpbmdsZVNob3QpIGR3ci5lbmdpbmUuZW5kQmF0Y2goKTsKfTsKCi8qKiBAcHJpdmF0ZSBQb2xsIHRoZSBzZXJ2ZXIgdG8gc2VlIGlmIHRoZXJlIGlzIGFueSBkYXRhIHdhaXRpbmcgKi8KZHdyLmVuZ2luZS5fcG9sbCA9IGZ1bmN0aW9uKCkgewogIGlmICghZHdyLmVuZ2luZS5fYWN0aXZlUmV2ZXJzZUFqYXgpIHJldHVybjsKCiAgdmFyIGJhdGNoID0gZHdyLmVuZ2luZS5fY3JlYXRlQmF0Y2goKTsKICBiYXRjaC5tYXAuaWQgPSAwOyAvLyBUT0RPOiBEbyB3ZSBuZWVkIHRoaXM/PwogIGJhdGNoLm1hcC5jYWxsQ291bnQgPSAxOwogIGJhdGNoLmlzUG9sbCA9IHRydWU7CiAgaWYgKGR3ci5lbmdpbmUuX3BvbGxXaXRoWGhyID09ICJ0cnVlIikgewogICAgYmF0Y2gucnBjVHlwZSA9IGR3ci5lbmdpbmUuWE1MSHR0cFJlcXVlc3Q7CiAgICBiYXRjaC5tYXAucGFydGlhbFJlc3BvbnNlID0gZHdyLmVuZ2luZS5fcGFydGlhbFJlc3BvbnNlTm87CiAgfQogIGVsc2UgewogICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiR2Vja28vIikgIT0gLTEpIHsKICAgICAgYmF0Y2gucnBjVHlwZSA9IGR3ci5lbmdpbmUuWE1MSHR0cFJlcXVlc3Q7CiAgICAgIGJhdGNoLm1hcC5wYXJ0aWFsUmVzcG9uc2UgPSBkd3IuZW5naW5lLl9wYXJ0aWFsUmVzcG9uc2VZZXM7CiAgICB9CiAgICBlbHNlIHsKICAgICAgYmF0Y2gucnBjVHlwZSA9IGR3ci5lbmdpbmUuWE1MSHR0cFJlcXVlc3Q7CiAgICAgIGJhdGNoLm1hcC5wYXJ0aWFsUmVzcG9uc2UgPSBkd3IuZW5naW5lLl9wYXJ0aWFsUmVzcG9uc2VObzsKICAgIH0KICB9CiAgYmF0Y2guaHR0cE1ldGhvZCA9ICJQT1NUIjsKICBiYXRjaC5hc3luYyA9IHRydWU7CiAgYmF0Y2gudGltZW91dCA9IDA7CiAgYmF0Y2gucGF0aCA9IGR3ci5lbmdpbmUuX2RlZmF1bHRQYXRoOwogIGJhdGNoLnByZUhvb2tzID0gW107CiAgYmF0Y2gucG9zdEhvb2tzID0gW107CiAgYmF0Y2guZXJyb3JIYW5kbGVyID0gZHdyLmVuZ2luZS5fcG9sbEVycm9ySGFuZGxlcjsKICBiYXRjaC53YXJuaW5nSGFuZGxlciA9IGR3ci5lbmdpbmUuX3BvbGxFcnJvckhhbmRsZXI7CiAgYmF0Y2guaGFuZGxlcnNbMF0gPSB7CiAgICBjYWxsYmFjazpmdW5jdGlvbihwYXVzZSkgewogICAgICBkd3IuZW5naW5lLl9wb2xsUmV0cmllcyA9IDA7CiAgICAgIHNldFRpbWVvdXQoZHdyLmVuZ2luZS5fcG9sbCwgcGF1c2UpOwogICAgfQogIH07CgogIC8vIFNlbmQgdGhlIGRhdGEKICBkd3IuZW5naW5lLl9zZW5kRGF0YShiYXRjaCk7CiAgaWYgKGJhdGNoLnJwY1R5cGUgPT0gZHdyLmVuZ2luZS5YTUxIdHRwUmVxdWVzdCAmJiBiYXRjaC5tYXAucGFydGlhbFJlc3BvbnNlID09IGR3ci5lbmdpbmUuX3BhcnRpYWxSZXNwb25zZVllcykgewogICAgZHdyLmVuZ2luZS5fY2hlY2tDb21ldFBvbGwoKTsKICB9Cn07CgovKiogVHJ5IHRvIHJlY292ZXIgZnJvbSBwb2xsaW5nIGVycm9ycyAqLwpkd3IuZW5naW5lLl9wb2xsRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24obXNnLCBleCkgewogIC8vIGlmIGFueXRoaW5nIGdvZXMgd3JvbmcgdGhlbiBqdXN0IHNpbGVudGx5IHRyeSBhZ2FpbiAodXAgdG8gM3gpIGFmdGVyIDEwcwogIGR3ci5lbmdpbmUuX3BvbGxSZXRyaWVzKys7CiAgZHdyLmVuZ2luZS5fZGVidWcoIlJldmVyc2UgQWpheCBwb2xsIGZhaWxlZCAocG9sbFJldHJpZXM9IiArIGR3ci5lbmdpbmUuX3BvbGxSZXRyaWVzICsgIik6ICIgKyBleC5uYW1lICsgIiA6ICIgKyBleC5tZXNzYWdlKTsKICBpZiAoZHdyLmVuZ2luZS5fcG9sbFJldHJpZXMgPCBkd3IuZW5naW5lLl9tYXhQb2xsUmV0cmllcykgewogICAgc2V0VGltZW91dChkd3IuZW5naW5lLl9wb2xsLCAxMDAwMCk7CiAgfQogIGVsc2UgewogICAgZHdyLmVuZ2luZS5fYWN0aXZlUmV2ZXJzZUFqYXggPSBmYWxzZTsKICAgIGR3ci5lbmdpbmUuX2RlYnVnKCJHaXZpbmcgdXAuIik7CiAgfQp9OwoKLyoqIEBwcml2YXRlIEdlbmVyYXRlIGEgbmV3IHN0YW5kYXJkIGJhdGNoICovCmR3ci5lbmdpbmUuX2NyZWF0ZUJhdGNoID0gZnVuY3Rpb24oKSB7CiAgdmFyIGJhdGNoID0gewogICAgbWFwOnsKICAgICAgY2FsbENvdW50OjAsCiAgICAgIHBhZ2U6d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCwKICAgICAgaHR0cFNlc3Npb25JZDpkd3IuZW5naW5lLl9nZXRKU2Vzc2lvbklkKCksCiAgICAgIHNjcmlwdFNlc3Npb25JZDpkd3IuZW5naW5lLl9nZXRTY3JpcHRTZXNzaW9uSWQoKQogICAgfSwKICAgIGNoYXJzUHJvY2Vzc2VkOjAsIHBhcmFtQ291bnQ6MCwKICAgIHBhcmFtZXRlcnM6e30sIGhlYWRlcnM6e30sCiAgICBpc1BvbGw6ZmFsc2UsIGhhbmRsZXJzOnt9LCBwcmVIb29rczpbXSwgcG9zdEhvb2tzOltdLAogICAgcnBjVHlwZTpkd3IuZW5naW5lLl9ycGNUeXBlLAogICAgaHR0cE1ldGhvZDpkd3IuZW5naW5lLl9odHRwTWV0aG9kLAogICAgYXN5bmM6ZHdyLmVuZ2luZS5fYXN5bmMsCiAgICB0aW1lb3V0OmR3ci5lbmdpbmUuX3RpbWVvdXQsCiAgICBlcnJvckhhbmRsZXI6ZHdyLmVuZ2luZS5fZXJyb3JIYW5kbGVyLAogICAgd2FybmluZ0hhbmRsZXI6ZHdyLmVuZ2luZS5fd2FybmluZ0hhbmRsZXIsCiAgICB0ZXh0SHRtbEhhbmRsZXI6ZHdyLmVuZ2luZS5fdGV4dEh0bWxIYW5kbGVyCiAgfTsKICBpZiAoZHdyLmVuZ2luZS5fcHJlSG9vaykgYmF0Y2gucHJlSG9va3MucHVzaChkd3IuZW5naW5lLl9wcmVIb29rKTsKICBpZiAoZHdyLmVuZ2luZS5fcG9zdEhvb2spIGJhdGNoLnBvc3RIb29rcy5wdXNoKGR3ci5lbmdpbmUuX3Bvc3RIb29rKTsKICB2YXIgcHJvcG5hbWUsIGRhdGE7CiAgaWYgKGR3ci5lbmdpbmUuX2hlYWRlcnMpIHsKICAgIGZvciAocHJvcG5hbWUgaW4gZHdyLmVuZ2luZS5faGVhZGVycykgewogICAgICBkYXRhID0gZHdyLmVuZ2luZS5faGVhZGVyc1twcm9wbmFtZV07CiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPSAiZnVuY3Rpb24iKSBiYXRjaC5oZWFkZXJzW3Byb3BuYW1lXSA9IGRhdGE7CiAgICB9CiAgfQogIGlmIChkd3IuZW5naW5lLl9wYXJhbWV0ZXJzKSB7CiAgICBmb3IgKHByb3BuYW1lIGluIGR3ci5lbmdpbmUuX3BhcmFtZXRlcnMpIHsKICAgICAgZGF0YSA9IGR3ci5lbmdpbmUuX3BhcmFtZXRlcnNbcHJvcG5hbWVdOwogICAgICBpZiAodHlwZW9mIGRhdGEgIT0gImZ1bmN0aW9uIikgYmF0Y2gucGFyYW1ldGVyc1twcm9wbmFtZV0gPSBkYXRhOwogICAgfQogIH0KICByZXR1cm4gYmF0Y2g7Cn07CgovKiogQHByaXZhdGUgVGFrZSBmdXJ0aGVyIG9wdGlvbnMgYW5kIG1lcmdlIHRoZW0gaW50byAqLwpkd3IuZW5naW5lLl9tZXJnZUJhdGNoID0gZnVuY3Rpb24oYmF0Y2gsIG92ZXJyaWRlcykgewogIHZhciBwcm9wbmFtZSwgZGF0YTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGR3ci5lbmdpbmUuX3Byb3BuYW1lcy5sZW5ndGg7IGkrKykgewogICAgcHJvcG5hbWUgPSBkd3IuZW5naW5lLl9wcm9wbmFtZXNbaV07CiAgICBpZiAob3ZlcnJpZGVzW3Byb3BuYW1lXSAhPSBudWxsKSBiYXRjaFtwcm9wbmFtZV0gPSBvdmVycmlkZXNbcHJvcG5hbWVdOwogIH0KICBpZiAob3ZlcnJpZGVzLnByZUhvb2sgIT0gbnVsbCkgYmF0Y2gucHJlSG9va3MudW5zaGlmdChvdmVycmlkZXMucHJlSG9vayk7CiAgaWYgKG92ZXJyaWRlcy5wb3N0SG9vayAhPSBudWxsKSBiYXRjaC5wb3N0SG9va3MucHVzaChvdmVycmlkZXMucG9zdEhvb2spOwogIGlmIChvdmVycmlkZXMuaGVhZGVycykgewogICAgZm9yIChwcm9wbmFtZSBpbiBvdmVycmlkZXMuaGVhZGVycykgewogICAgICBkYXRhID0gb3ZlcnJpZGVzLmhlYWRlcnNbcHJvcG5hbWVdOwogICAgICBpZiAodHlwZW9mIGRhdGEgIT0gImZ1bmN0aW9uIikgYmF0Y2guaGVhZGVyc1twcm9wbmFtZV0gPSBkYXRhOwogICAgfQogIH0KICBpZiAob3ZlcnJpZGVzLnBhcmFtZXRlcnMpIHsKICAgIGZvciAocHJvcG5hbWUgaW4gb3ZlcnJpZGVzLnBhcmFtZXRlcnMpIHsKICAgICAgZGF0YSA9IG92ZXJyaWRlcy5wYXJhbWV0ZXJzW3Byb3BuYW1lXTsKICAgICAgaWYgKHR5cGVvZiBkYXRhICE9ICJmdW5jdGlvbiIpIGJhdGNoLm1hcFsicC0iICsgcHJvcG5hbWVdID0gIiIgKyBkYXRhOwogICAgfQogIH0KfTsKCi8qKiBAcHJpdmF0ZSBXaGF0IGlzIG91ciBzZXNzaW9uIGlkPyAqLwpkd3IuZW5naW5lLl9nZXRKU2Vzc2lvbklkID0gIGZ1bmN0aW9uKCkgewogIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgY29va2llID0gY29va2llc1tpXTsKICAgIHdoaWxlIChjb29raWUuY2hhckF0KDApID09ICcgJykgY29va2llID0gY29va2llLnN1YnN0cmluZygxLCBjb29raWUubGVuZ3RoKTsKICAgIGlmIChjb29raWUuaW5kZXhPZihkd3IuZW5naW5lLl9zZXNzaW9uQ29va2llTmFtZSArICI9IikgPT0gMCkgewogICAgICByZXR1cm4gY29va2llLnN1YnN0cmluZyhkd3IuZW5naW5lLl9zZXNzaW9uQ29va2llTmFtZS5sZW5ndGggKyAxLCBjb29raWUubGVuZ3RoKTsKICAgIH0KICB9CiAgcmV0dXJuICIiOwp9OwoKLyoqIEBwcml2YXRlIENoZWNrIGZvciByZXZlcnNlIEFqYXggYWN0aXZpdHkgKi8KZHdyLmVuZ2luZS5fY2hlY2tDb21ldFBvbGwgPSBmdW5jdGlvbigpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IGR3ci5lbmdpbmUuX291dHN0YW5kaW5nSUZyYW1lcy5sZW5ndGg7IGkrKykgewogICAgdmFyIHRleHQgPSAiIjsKICAgIHZhciBpZnJhbWUgPSBkd3IuZW5naW5lLl9vdXRzdGFuZGluZ0lGcmFtZXNbaV07CiAgICB0cnkgewogICAgICB0ZXh0ID0gZHdyLmVuZ2luZS5fZ2V0VGV4dEZyb21Db21ldElGcmFtZShpZnJhbWUpOwogICAgfQogICAgY2F0Y2ggKGV4KSB7CiAgICAgIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcoaWZyYW1lLmJhdGNoLCBleCk7CiAgICB9CiAgICBpZiAodGV4dCAhPSAiIikgZHdyLmVuZ2luZS5fcHJvY2Vzc0NvbWV0UmVzcG9uc2UodGV4dCwgaWZyYW1lLmJhdGNoKTsKICB9CiAgaWYgKGR3ci5lbmdpbmUuX3BvbGxSZXEpIHsKICAgIHZhciByZXEgPSBkd3IuZW5naW5lLl9wb2xsUmVxOwogICAgdmFyIHRleHQgPSByZXEucmVzcG9uc2VUZXh0OwogICAgaWYgKHRleHQgIT0gbnVsbCkgZHdyLmVuZ2luZS5fcHJvY2Vzc0NvbWV0UmVzcG9uc2UodGV4dCwgcmVxLmJhdGNoKTsKICB9CgogIC8vIElmIHRoZSBwb2xsIHJlc291cmNlcyBhcmUgc3RpbGwgdGhlcmUsIGNvbWUgYmFjayBhZ2FpbgogIGlmIChkd3IuZW5naW5lLl9vdXRzdGFuZGluZ0lGcmFtZXMubGVuZ3RoID4gMCB8fCBkd3IuZW5naW5lLl9wb2xsUmVxKSB7CiAgICBzZXRUaW1lb3V0KGR3ci5lbmdpbmUuX2NoZWNrQ29tZXRQb2xsLCBkd3IuZW5naW5lLl9wb2xsQ29tZXRJbnRlcnZhbCk7CiAgfQp9OwoKLyoqIEBwcml2YXRlIEV4dHJhY3QgdGhlIHdob2xlIChleGVjdXRlZCBhbiBhbGwpIHRleHQgZnJvbSB0aGUgY3VycmVudCBpZnJhbWUgKi8KZHdyLmVuZ2luZS5fZ2V0VGV4dEZyb21Db21ldElGcmFtZSA9IGZ1bmN0aW9uKGZyYW1lRWxlKSB7CiAgdmFyIGJvZHkgPSBmcmFtZUVsZS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHk7CiAgaWYgKGJvZHkgPT0gbnVsbCkgcmV0dXJuICIiOwogIHZhciB0ZXh0ID0gYm9keS5pbm5lckhUTUw7CiAgLy8gV2UgbmVlZCB0byBwcmV2ZW50IElFIGZyb20gc3RyaXBwaW5nIGxpbmUgZmVlZHMKICBpZiAodGV4dC5pbmRleE9mKCI8UFJFPiIpID09IDAgfHwgdGV4dC5pbmRleE9mKCI8cHJlPiIpID09IDApIHsKICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZyg1LCB0ZXh0Lmxlbmd0aCAtIDcpOwogIH0KICByZXR1cm4gdGV4dDsKfTsKCi8qKiBAcHJpdmF0ZSBTb21lIG1vcmUgdGV4dCBtaWdodCBoYXZlIGNvbWUgaW4sIHRlc3QgYW5kIGV4ZWN1dGUgdGhlIG5ldyBzdHVmZiAqLwpkd3IuZW5naW5lLl9wcm9jZXNzQ29tZXRSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlLCBiYXRjaCkgewogIGlmIChiYXRjaC5jaGFyc1Byb2Nlc3NlZCA9PSByZXNwb25zZS5sZW5ndGgpIHJldHVybjsKICBpZiAocmVzcG9uc2UubGVuZ3RoID09IDApIHsKICAgIGJhdGNoLmNoYXJzUHJvY2Vzc2VkID0gMDsKICAgIHJldHVybjsKICB9CgogIHZhciBmaXJzdFN0YXJ0VGFnID0gcmVzcG9uc2UuaW5kZXhPZigiLy8jRFdSLVNUQVJUIyIsIGJhdGNoLmNoYXJzUHJvY2Vzc2VkKTsKICBpZiAoZmlyc3RTdGFydFRhZyA9PSAtMSkgewogICAgLy8gZHdyLmVuZ2luZS5fZGVidWcoIk5vIHN0YXJ0IHRhZyAoc2VhcmNoIGZyb20gIiArIGJhdGNoLmNoYXJzUHJvY2Vzc2VkICsgIikuIHNraXBwaW5nICciICsgcmVzcG9uc2Uuc3Vic3RyaW5nKGJhdGNoLmNoYXJzUHJvY2Vzc2VkKSArICInIik7CiAgICBiYXRjaC5jaGFyc1Byb2Nlc3NlZCA9IHJlc3BvbnNlLmxlbmd0aDsKICAgIHJldHVybjsKICB9CiAgLy8gaWYgKGZpcnN0U3RhcnRUYWcgPiAwKSB7CiAgLy8gICBkd3IuZW5naW5lLl9kZWJ1ZygiU3RhcnQgdGFnIG5vdCBhdCBzdGFydCAoc2VhcmNoIGZyb20gIiArIGJhdGNoLmNoYXJzUHJvY2Vzc2VkICsgIikuIHNraXBwaW5nICciICsgcmVzcG9uc2Uuc3Vic3RyaW5nKGJhdGNoLmNoYXJzUHJvY2Vzc2VkLCBmaXJzdFN0YXJ0VGFnKSArICInIik7CiAgLy8gfQoKICB2YXIgbGFzdEVuZFRhZyA9IHJlc3BvbnNlLmxhc3RJbmRleE9mKCIvLyNEV1ItRU5EIyIpOwogIGlmIChsYXN0RW5kVGFnID09IC0xKSB7CiAgICAvLyBkd3IuZW5naW5lLl9kZWJ1ZygiTm8gZW5kIHRhZy4gdW5jaGFuZ2VkIGNoYXJzUHJvY2Vzc2VkPSIgKyBiYXRjaC5jaGFyc1Byb2Nlc3NlZCk7CiAgICByZXR1cm47CiAgfQoKICAvLyBTa2lwIHRoZSBlbmQgdGFnIHRvbyBmb3IgbmV4dCB0aW1lLCByZW1lbWJlcmluZyBDUiBhbmQgTEYKICBpZiAocmVzcG9uc2UuY2hhckNvZGVBdChsYXN0RW5kVGFnICsgMTEpID09IDEzICYmIHJlc3BvbnNlLmNoYXJDb2RlQXQobGFzdEVuZFRhZyArIDEyKSA9PSAxMCkgewogICAgYmF0Y2guY2hhcnNQcm9jZXNzZWQgPSBsYXN0RW5kVGFnICsgMTM7CiAgfQogIGVsc2UgewogICAgYmF0Y2guY2hhcnNQcm9jZXNzZWQgPSBsYXN0RW5kVGFnICsgMTE7CiAgfQoKICB2YXIgZXhlYyA9IHJlc3BvbnNlLnN1YnN0cmluZyhmaXJzdFN0YXJ0VGFnICsgMTMsIGxhc3RFbmRUYWcpOwoKICBkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoID0gYmF0Y2g7CiAgZHdyLmVuZ2luZS5fZXZhbChleGVjKTsKICBkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoID0gbnVsbDsKfTsKCi8qKiBAcHJpdmF0ZSBBY3R1YWxseSBzZW5kIHRoZSBibG9jayBvZiBkYXRhIGluIHRoZSBiYXRjaCBvYmplY3QuICovCmR3ci5lbmdpbmUuX3NlbmREYXRhID0gZnVuY3Rpb24oYmF0Y2gpIHsKICBiYXRjaC5tYXAuYmF0Y2hJZCA9IGR3ci5lbmdpbmUuX25leHRCYXRjaElkOwogIGR3ci5lbmdpbmUuX25leHRCYXRjaElkKys7CiAgZHdyLmVuZ2luZS5fYmF0Y2hlc1tiYXRjaC5tYXAuYmF0Y2hJZF0gPSBiYXRjaDsKICBkd3IuZW5naW5lLl9iYXRjaGVzTGVuZ3RoKys7CiAgYmF0Y2guY29tcGxldGVkID0gZmFsc2U7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgYmF0Y2gucHJlSG9va3MubGVuZ3RoOyBpKyspIHsKICAgIGJhdGNoLnByZUhvb2tzW2ldKCk7CiAgfQogIGJhdGNoLnByZUhvb2tzID0gbnVsbDsKICAvLyBTZXQgYSB0aW1lb3V0CiAgaWYgKGJhdGNoLnRpbWVvdXQgJiYgYmF0Y2gudGltZW91dCAhPSAwKSB7CiAgICBiYXRjaC50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBkd3IuZW5naW5lLl9hYm9ydFJlcXVlc3QoYmF0Y2gpOyB9LCBiYXRjaC50aW1lb3V0KTsKICB9CiAgLy8gR2V0IHNldHVwIGZvciBYTUxIdHRwUmVxdWVzdCBpZiBwb3NzaWJsZQogIGlmIChiYXRjaC5ycGNUeXBlID09IGR3ci5lbmdpbmUuWE1MSHR0cFJlcXVlc3QpIHsKICAgIGlmICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QpIHsKICAgICAgYmF0Y2gucmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB9CiAgICAvLyBJRTUgZm9yIHRoZSBtYWMgY2xhaW1zIHRvIHN1cHBvcnQgd2luZG93LkFjdGl2ZVhPYmplY3QsIGJ1dCB0aHJvd3MgYW4gZXJyb3Igd2hlbiBpdCdzIHVzZWQKICAgIGVsc2UgaWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0ICYmICEobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNYWMiKSA+PSAwICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID49IDApKSB7CiAgICAgIGJhdGNoLnJlcSA9IGR3ci5lbmdpbmUuX25ld0FjdGl2ZVhPYmplY3QoZHdyLmVuZ2luZS5fWE1MSFRUUCk7CiAgICB9CiAgfQoKICB2YXIgcHJvcCwgcmVxdWVzdDsKICBpZiAoYmF0Y2gucmVxKSB7CiAgICAvLyBQcm9jZWVkIHVzaW5nIFhNTEh0dHBSZXF1ZXN0CiAgICBpZiAoYmF0Y2guYXN5bmMpIHsKICAgICAgYmF0Y2gucmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0eXBlb2YgZHdyICE9ICd1bmRlZmluZWQnKSBkd3IuZW5naW5lLl9zdGF0ZUNoYW5nZShiYXRjaCk7CiAgICAgIH07CiAgICB9CiAgICAvLyBJZiB3ZSdyZSBwb2xsaW5nLCByZWNvcmQgdGhpcyBmb3IgbW9uaXRvcmluZwogICAgaWYgKGJhdGNoLmlzUG9sbCkgewogICAgICBkd3IuZW5naW5lLl9wb2xsUmVxID0gYmF0Y2gucmVxOwogICAgICAvLyBJbiBJRSBYSFIgaXMgYW4gQWN0aXZlWCBjb250cm9sIHNvIHlvdSBjYW4ndCBhdWdtZW50IGl0IGxpa2UgdGhpcwogICAgICBpZiAoIShkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5vcGVyYSkpIGJhdGNoLnJlcS5iYXRjaCA9IGJhdGNoOwogICAgfQogICAgLy8gV29ya2Fyb3VuZCBmb3IgU2FmYXJpIDEueCBQT1NUIGJ1ZwogICAgdmFyIGluZGV4U2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkvIik7CiAgICBpZiAoaW5kZXhTYWZhcmkgPj0gMCkgewogICAgICB2YXIgdmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKGluZGV4U2FmYXJpICsgNyk7CiAgICAgIGlmIChwYXJzZUludCh2ZXJzaW9uLCAxMCkgPCA0MDApIHsKICAgICAgICBpZiAoZHdyLmVuZ2luZS5fYWxsb3dHZXRGb3JTYWZhcmlCdXRNYWtlRm9yZ2VyeUVhc2llciA9PSAidHJ1ZSIpIGJhdGNoLmh0dHBNZXRob2QgPSAiR0VUIjsKICAgICAgICBlbHNlIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcoYmF0Y2gsIHsgbmFtZToiZHdyLmVuZ2luZS5vbGRTYWZhcmkiLCBtZXNzYWdlOiJTYWZhcmkgR0VUIHN1cHBvcnQgZGlzYWJsZWQuIFNlZSBnZXRhaGVhZC5vcmcvZHdyL3NlcnZlci9zZXJ2bGV0IGFuZCBhbGxvd0dldEZvclNhZmFyaUJ1dE1ha2VGb3JnZXJ5RWFzaWVyLiIgfSk7CiAgICAgIH0KICAgIH0KICAgIGJhdGNoLm1vZGUgPSBiYXRjaC5pc1BvbGwgPyBkd3IuZW5naW5lLl9Nb2RlUGxhaW5Qb2xsIDogZHdyLmVuZ2luZS5fTW9kZVBsYWluQ2FsbDsKICAgIHJlcXVlc3QgPSBkd3IuZW5naW5lLl9jb25zdHJ1Y3RSZXF1ZXN0KGJhdGNoKTsKICAgIHRyeSB7CiAgICAgIGJhdGNoLnJlcS5vcGVuKGJhdGNoLmh0dHBNZXRob2QsIHJlcXVlc3QudXJsLCBiYXRjaC5hc3luYyk7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChwcm9wIGluIGJhdGNoLmhlYWRlcnMpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IGJhdGNoLmhlYWRlcnNbcHJvcF07CiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09ICJzdHJpbmciKSBiYXRjaC5yZXEuc2V0UmVxdWVzdEhlYWRlcihwcm9wLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICghYmF0Y2guaGVhZGVyc1siQ29udGVudC1UeXBlIl0pIGJhdGNoLnJlcS5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAidGV4dC9wbGFpbiIpOwogICAgICB9CiAgICAgIGNhdGNoIChleCkgewogICAgICAgIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcoYmF0Y2gsIGV4KTsKICAgICAgfQogICAgICBiYXRjaC5yZXEuc2VuZChyZXF1ZXN0LmJvZHkpOwogICAgICBpZiAoIWJhdGNoLmFzeW5jKSBkd3IuZW5naW5lLl9zdGF0ZUNoYW5nZShiYXRjaCk7CiAgICB9CiAgICBjYXRjaCAoZXgpIHsKICAgICAgZHdyLmVuZ2luZS5faGFuZGxlRXJyb3IoYmF0Y2gsIGV4KTsKICAgIH0KICB9CiAgZWxzZSBpZiAoYmF0Y2gucnBjVHlwZSAhPSBkd3IuZW5naW5lLlNjcmlwdFRhZykgewogICAgdmFyIGlkbmFtZSA9IGJhdGNoLmlzUG9sbCA/ICJkd3ItaWYtcG9sbC0iICsgYmF0Y2gubWFwLmJhdGNoSWQgOiAiZHdyLWlmLSIgKyBiYXRjaC5tYXAuYmF0Y2hJZDsKICAgIC8vIFJlbW92ZWQgaHRtbGZpbGUgaW1wbGVtZW50YXRpb24uIERvbid0IGV4cGVjdCBpdCB0byByZXR1cm4gYmVmb3JlIHYzCiAgICBiYXRjaC5kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIC8vIEFkZCB0aGUgZGl2IHRvIHRoZSBkb2N1bWVudCBmaXJzdCwgb3RoZXJ3aXNlIElFIDYgd2lsbCBpZ25vcmUgb25sb2FkIGhhbmRsZXIuCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhdGNoLmRpdik7CiAgICBiYXRjaC5kaXYuaW5uZXJIVE1MID0gIjxpZnJhbWUgc3JjPSdqYXZhc2NyaXB0OnZvaWQoMCknIGZyYW1lYm9yZGVyPScwJyBzdHlsZT0nd2lkdGg6MHB4O2hlaWdodDowcHg7Ym9yZGVyOjA7JyBpZD0nIiArIGlkbmFtZSArICInIG5hbWU9JyIgKyBpZG5hbWUgKyAiJyBvbmxvYWQ9J2R3ci5lbmdpbmUuX2lmcmFtZUxvYWRpbmdDb21wbGV0ZSAoIiArIGJhdGNoLm1hcC5iYXRjaElkICsgIik7Jz48L2lmcmFtZT4iOwogICAgYmF0Y2guZG9jdW1lbnQgPSBkb2N1bWVudDsKICAgIGJhdGNoLmlmcmFtZSA9IGJhdGNoLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkbmFtZSk7CiAgICBiYXRjaC5pZnJhbWUuYmF0Y2ggPSBiYXRjaDsKICAgIGJhdGNoLm1vZGUgPSBiYXRjaC5pc1BvbGwgPyBkd3IuZW5naW5lLl9Nb2RlSHRtbFBvbGwgOiBkd3IuZW5naW5lLl9Nb2RlSHRtbENhbGw7CiAgICBpZiAoYmF0Y2guaXNQb2xsKSBkd3IuZW5naW5lLl9vdXRzdGFuZGluZ0lGcmFtZXMucHVzaChiYXRjaC5pZnJhbWUpOwogICAgcmVxdWVzdCA9IGR3ci5lbmdpbmUuX2NvbnN0cnVjdFJlcXVlc3QoYmF0Y2gpOwogICAgaWYgKGJhdGNoLmh0dHBNZXRob2QgPT0gIkdFVCIpIHsKICAgICAgYmF0Y2guaWZyYW1lLnNldEF0dHJpYnV0ZSgic3JjIiwgcmVxdWVzdC51cmwpOwogICAgfQogICAgZWxzZSB7CiAgICAgIGJhdGNoLmZvcm0gPSBiYXRjaC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7CiAgICAgIGJhdGNoLmZvcm0uc2V0QXR0cmlidXRlKCJpZCIsICJkd3ItZm9ybSIpOwogICAgICBiYXRjaC5mb3JtLnNldEF0dHJpYnV0ZSgiYWN0aW9uIiwgcmVxdWVzdC51cmwpOwogICAgICBiYXRjaC5mb3JtLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZGlzcGxheTpub25lOyIpOwogICAgICBiYXRjaC5mb3JtLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgaWRuYW1lKTsKICAgICAgYmF0Y2guZm9ybS50YXJnZXQgPSBpZG5hbWU7CiAgICAgIGJhdGNoLmZvcm0uc2V0QXR0cmlidXRlKCJtZXRob2QiLCBiYXRjaC5odHRwTWV0aG9kKTsKICAgICAgZm9yIChwcm9wIGluIGJhdGNoLm1hcCkgewogICAgICAgIHZhciB2YWx1ZSA9IGJhdGNoLm1hcFtwcm9wXTsKICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHZhciBmb3JtSW5wdXQgPSBiYXRjaC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgZm9ybUlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJoaWRkZW4iKTsKICAgICAgICAgIGZvcm1JbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBwcm9wKTsKICAgICAgICAgIGZvcm1JbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgdmFsdWUpOwogICAgICAgICAgYmF0Y2guZm9ybS5hcHBlbmRDaGlsZChmb3JtSW5wdXQpOwogICAgICAgIH0KICAgICAgfQogICAgICBiYXRjaC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhdGNoLmZvcm0pOwogICAgICBiYXRjaC5mb3JtLnN1Ym1pdCgpOwogICAgfQogIH0KICBlbHNlIHsKICAgIGJhdGNoLmh0dHBNZXRob2QgPSAiR0VUIjsgLy8gVGhlcmUncyBubyBzdWNoIHRoaW5nIGFzIFNjcmlwdFRhZyB1c2luZyBQT1NUCiAgICBiYXRjaC5tb2RlID0gYmF0Y2guaXNQb2xsID8gZHdyLmVuZ2luZS5fTW9kZVBsYWluUG9sbCA6IGR3ci5lbmdpbmUuX01vZGVQbGFpbkNhbGw7CiAgICByZXF1ZXN0ID0gZHdyLmVuZ2luZS5fY29uc3RydWN0UmVxdWVzdChiYXRjaCk7CiAgICBiYXRjaC5zY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgIGJhdGNoLnNjcmlwdC5pZCA9ICJkd3Itc3QtIiArIGJhdGNoLm1hcFsiYzAtaWQiXTsKICAgIGJhdGNoLnNjcmlwdC5zcmMgPSByZXF1ZXN0LnVybDsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYmF0Y2guc2NyaXB0KTsKICB9Cn07Cgpkd3IuZW5naW5lLl9Nb2RlUGxhaW5DYWxsID0gIi9jYWxsL3BsYWluY2FsbC8iOwpkd3IuZW5naW5lLl9Nb2RlSHRtbENhbGwgPSAiL2NhbGwvaHRtbGNhbGwvIjsKZHdyLmVuZ2luZS5fTW9kZVBsYWluUG9sbCA9ICIvY2FsbC9wbGFpbnBvbGwvIjsKZHdyLmVuZ2luZS5fTW9kZUh0bWxQb2xsID0gIi9jYWxsL2h0bWxwb2xsLyI7CgovKiogQHByaXZhdGUgV29yayBvdXQgd2hhdCB0aGUgVVJMIHNob3VsZCBsb29rIGxpa2UgKi8KZHdyLmVuZ2luZS5fY29uc3RydWN0UmVxdWVzdCA9IGZ1bmN0aW9uKGJhdGNoKSB7CiAgLy8gQSBxdWljayBzdHJpbmcgdG8gaGVscCBwZW9wbGUgdGhhdCB1c2Ugd2ViIGxvZyBhbmFseXNlcnMKICB2YXIgcmVxdWVzdCA9IHsgdXJsOmJhdGNoLnBhdGggKyBiYXRjaC5tb2RlLCBib2R5Om51bGwgfTsKICBpZiAoYmF0Y2guaXNQb2xsID09IHRydWUpIHsKICAgIHJlcXVlc3QudXJsICs9ICJSZXZlcnNlQWpheC5kd3IiOwogIH0KICBlbHNlIGlmIChiYXRjaC5tYXAuY2FsbENvdW50ID09IDEpIHsKICAgIHJlcXVlc3QudXJsICs9IGJhdGNoLm1hcFsiYzAtc2NyaXB0TmFtZSJdICsgIi4iICsgYmF0Y2gubWFwWyJjMC1tZXRob2ROYW1lIl0gKyAiLmR3ciI7CiAgfQogIGVsc2UgewogICAgcmVxdWVzdC51cmwgKz0gIk11bHRpcGxlLiIgKyBiYXRjaC5tYXAuY2FsbENvdW50ICsgIi5kd3IiOwogIH0KICAvLyBQbGF5IG5pY2Ugd2l0aCB1cmwgcmUtd3JpdGluZwogIHZhciBzZXNzaW9uTWF0Y2ggPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9qc2Vzc2lvbmlkPShbXj9dKykvKTsKICBpZiAoc2Vzc2lvbk1hdGNoICE9IG51bGwpIHsKICAgIHJlcXVlc3QudXJsICs9ICI7anNlc3Npb25pZD0iICsgc2Vzc2lvbk1hdGNoWzFdOwogIH0KCiAgdmFyIHByb3A7CiAgaWYgKGJhdGNoLmh0dHBNZXRob2QgPT0gIkdFVCIpIHsKICAgIC8vIFNvbWUgYnJvd3NlcnMgKE9wZXJhL1NhZmFyaTIpIHNlZW0gdG8gZmFpbCB0byBjb252ZXJ0IHRoZSBjYWxsQ291bnQgdmFsdWUKICAgIC8vIHRvIGEgc3RyaW5nIGluIHRoZSBsb29wIGJlbG93IHNvIHdlIGRvIGl0IG1hbnVhbGx5IGhlcmUuCiAgICBiYXRjaC5tYXAuY2FsbENvdW50ID0gIiIgKyBiYXRjaC5tYXAuY2FsbENvdW50OwogICAgcmVxdWVzdC51cmwgKz0gIj8iOwogICAgZm9yIChwcm9wIGluIGJhdGNoLm1hcCkgewogICAgICBpZiAodHlwZW9mIGJhdGNoLm1hcFtwcm9wXSAhPSAiZnVuY3Rpb24iKSB7CiAgICAgICAgcmVxdWVzdC51cmwgKz0gZW5jb2RlVVJJQ29tcG9uZW50KHByb3ApICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhdGNoLm1hcFtwcm9wXSkgKyAiJiI7CiAgICAgIH0KICAgIH0KICAgIHJlcXVlc3QudXJsID0gcmVxdWVzdC51cmwuc3Vic3RyaW5nKDAsIHJlcXVlc3QudXJsLmxlbmd0aCAtIDEpOwogIH0KICBlbHNlIHsKICAgIC8vIFBFUkZPUk1BTkNFOiBmb3IgaWZyYW1lIG1vZGUgdGhpcyBpcyB0aHJvd24gYXdheS4KICAgIHJlcXVlc3QuYm9keSA9ICIiOwogICAgaWYgKGRvY3VtZW50LmFsbCAmJiAhd2luZG93Lm9wZXJhKSB7CiAgICAgIC8vIFVzZSBhcnJheSBqb2luaW5nIG9uIElFIChmYXN0ZXN0KQogICAgICB2YXIgYnVmID0gW107CiAgICAgIGZvciAocHJvcCBpbiBiYXRjaC5tYXApIHsKICAgICAgICBpZiAodHlwZW9mIGJhdGNoLm1hcFtwcm9wXSAhPSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBidWYucHVzaChwcm9wICsgIj0iICsgYmF0Y2gubWFwW3Byb3BdICsgZHdyLmVuZ2luZS5fcG9zdFNlcGVyYXRvcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJlcXVlc3QuYm9keSA9IGJ1Zi5qb2luKCIiKTsKICAgIH0KICAgIGVsc2UgewogICAgICAvLyBVc2Ugc3RyaW5nIGNvbmNhdCBvbiBvdGhlciBicm93c2VycyAoZmFzdGVzdCkKICAgICAgZm9yIChwcm9wIGluIGJhdGNoLm1hcCkgewogICAgICAgIGlmICh0eXBlb2YgYmF0Y2gubWFwW3Byb3BdICE9ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHJlcXVlc3QuYm9keSArPSBwcm9wICsgIj0iICsgYmF0Y2gubWFwW3Byb3BdICsgZHdyLmVuZ2luZS5fcG9zdFNlcGVyYXRvcjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJlcXVlc3QuYm9keSA9IGR3ci5lbmdpbmUuX2NvbnRlbnRSZXdyaXRlSGFuZGxlcihyZXF1ZXN0LmJvZHkpOwogIH0KICByZXF1ZXN0LnVybCA9IGR3ci5lbmdpbmUuX3VybFJld3JpdGVIYW5kbGVyKHJlcXVlc3QudXJsKTsKICByZXR1cm4gcmVxdWVzdDsKfTsKCi8qKiBAcHJpdmF0ZSBDYWxsZWQgYnkgWE1MSHR0cFJlcXVlc3QgdG8gaW5kaWNhdGUgdGhhdCBzb21ldGhpbmcgaGFzIGhhcHBlbmVkICovCmR3ci5lbmdpbmUuX3N0YXRlQ2hhbmdlID0gZnVuY3Rpb24oYmF0Y2gpIHsKICB2YXIgdG9FdmFsOwoKICBpZiAoYmF0Y2guY29tcGxldGVkKSB7CiAgICBkd3IuZW5naW5lLl9kZWJ1ZygiRXJyb3I6IF9zdGF0ZUNoYW5nZSgpIHdpdGggYmF0Y2guY29tcGxldGVkIik7CiAgICByZXR1cm47CiAgfQoKICB2YXIgcmVxID0gYmF0Y2gucmVxOwogIHRyeSB7CiAgICBpZiAocmVxLnJlYWR5U3RhdGUgIT0gNCkgcmV0dXJuOwogIH0KICBjYXRjaCAoZXgpIHsKICAgIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcoYmF0Y2gsIGV4KTsKICAgIC8vIEl0J3MgYnJva2VuIC0gY2xlYXIgdXAgYW5kIGZvcmdldCB0aGlzIGNhbGwKICAgIGR3ci5lbmdpbmUuX2NsZWFyVXAoYmF0Y2gpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGR3ci5lbmdpbmUuX3VubG9hZGluZykgewogICAgZHdyLmVuZ2luZS5fZGVidWcoIklnbm9yaW5nIHJlcGx5IGZyb20gc2VydmVyIGFzIHBhZ2UgaXMgdW5sb2FkaW5nLiIpOwogICAgcmV0dXJuOwogIH0KICAKICB0cnkgewogICAgdmFyIHJlcGx5ID0gcmVxLnJlc3BvbnNlVGV4dDsKICAgIHJlcGx5ID0gZHdyLmVuZ2luZS5fcmVwbHlSZXdyaXRlSGFuZGxlcihyZXBseSk7CiAgICB2YXIgc3RhdHVzID0gcmVxLnN0YXR1czsgLy8gY2F1c2VzIE1vemlsbGEgdG8gZXhjZXB0IG9uIHBhZ2UgbW92ZXMKCiAgICBpZiAocmVwbHkgPT0gbnVsbCB8fCByZXBseSA9PSAiIikgewogICAgICBkd3IuZW5naW5lLl9oYW5kbGVXYXJuaW5nKGJhdGNoLCB7IG5hbWU6ImR3ci5lbmdpbmUubWlzc2luZ0RhdGEiLCBtZXNzYWdlOiJObyBkYXRhIHJlY2VpdmVkIGZyb20gc2VydmVyIiB9KTsKICAgIH0KICAgIGVsc2UgaWYgKHN0YXR1cyAhPSAyMDApIHsKICAgICAgZHdyLmVuZ2luZS5faGFuZGxlRXJyb3IoYmF0Y2gsIHsgbmFtZToiZHdyLmVuZ2luZS5odHRwLiIgKyBzdGF0dXMsIG1lc3NhZ2U6cmVxLnN0YXR1c1RleHQgfSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgdmFyIGNvbnRlbnRUeXBlID0gcmVxLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTsKICAgICAgaWYgKCFjb250ZW50VHlwZS5tYXRjaCgvXnRleHRcL3BsYWluLykgJiYgIWNvbnRlbnRUeXBlLm1hdGNoKC9edGV4dFwvamF2YXNjcmlwdC8pKSB7CiAgICAgICAgaWYgKGNvbnRlbnRUeXBlLm1hdGNoKC9edGV4dFwvaHRtbC8pICYmIHR5cGVvZiBiYXRjaC50ZXh0SHRtbEhhbmRsZXIgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgYmF0Y2gudGV4dEh0bWxIYW5kbGVyKHsgc3RhdHVzOnN0YXR1cywgcmVzcG9uc2VUZXh0OnJlcGx5LCBjb250ZW50VHlwZTpjb250ZW50VHlwZSB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBkd3IuZW5naW5lLl9oYW5kbGVXYXJuaW5nKGJhdGNoLCB7IG5hbWU6ImR3ci5lbmdpbmUuaW52YWxpZE1pbWVUeXBlIiwgbWVzc2FnZToiSW52YWxpZCBjb250ZW50IHR5cGU6ICciICsgY29udGVudFR5cGUgKyAiJyIgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIC8vIENvbWV0IHJlcGxpZXMgbWlnaHQgaGF2ZSBhbHJlYWR5IHBhcnRpYWxseSBleGVjdXRlZAogICAgICAgIGlmIChiYXRjaC5pc1BvbGwgJiYgYmF0Y2gubWFwLnBhcnRpYWxSZXNwb25zZSA9PSBkd3IuZW5naW5lLl9wYXJ0aWFsUmVzcG9uc2VZZXMpIHsKICAgICAgICAgIGR3ci5lbmdpbmUuX3Byb2Nlc3NDb21ldFJlc3BvbnNlKHJlcGx5LCBiYXRjaCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgaWYgKHJlcGx5LnNlYXJjaCgiLy8jRFdSIikgPT0gLTEpIHsKICAgICAgICAgICAgZHdyLmVuZ2luZS5faGFuZGxlV2FybmluZyhiYXRjaCwgeyBuYW1lOiJkd3IuZW5naW5lLmludmFsaWRSZXBseSIsIG1lc3NhZ2U6IkludmFsaWQgcmVwbHkgZnJvbSBzZXJ2ZXIiIH0pOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRvRXZhbCA9IHJlcGx5OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBjYXRjaCAoZXgpIHsKICAgIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcoYmF0Y2gsIGV4KTsKICB9CgogIGR3ci5lbmdpbmUuX2NhbGxQb3N0SG9va3MoYmF0Y2gpOwoKICAvLyBPdXRzaWRlIG9mIHRoZSB0cnkvY2F0Y2ggc28gZXJyb3JzIHByb3BvZ2F0ZSBub3JtYWxseToKICBkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoID0gYmF0Y2g7CiAgaWYgKHRvRXZhbCAhPSBudWxsKSB0b0V2YWwgPSB0b0V2YWwucmVwbGFjZShkd3IuZW5naW5lLl9zY3JpcHRUYWdQcm90ZWN0aW9uLCAiIik7CiAgZHdyLmVuZ2luZS5fZXZhbCh0b0V2YWwpOwogIGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2ggPSBudWxsOwogIGR3ci5lbmdpbmUuX3ZhbGlkYXRlQmF0Y2goYmF0Y2gpOwogIGlmICghYmF0Y2guY29tcGxldGVkKSBkd3IuZW5naW5lLl9jbGVhclVwKGJhdGNoKTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBUaGlzIGZ1bmN0aW9uIGlzIGludm9rZWQgd2hlbiBhIGJhdGNoIHJlcGx5IGlzIHJlY2VpdmVkLgogKiBJdCBjaGVja3MgdGhhdCB0aGVyZSBpcyBhIHJlc3BvbnNlIGZvciBldmVyeSBjYWxsIGluIHRoZSBiYXRjaC4gT3RoZXJ3aXNlLAogKiBhbiBlcnJvciB3aWxsIGJlIHNpZ25hbGVkIChhIGNhbGwgd2l0aG91dCBhIHJlc3BvbnNlIGluZGljYXRlcyB0aGF0IHRoZSAKICogc2VydmVyIGZhaWxlZCB0byBzZW5kIGNvbXBsZXRlIGJhdGNoIHJlc3BvbnNlKS4gCiAqLwpkd3IuZW5naW5lLl92YWxpZGF0ZUJhdGNoID0gZnVuY3Rpb24oYmF0Y2gpIHsKICAvLyBJZiBzb21lIGNhbGwgbGVmdCB1bnJlcGxpZWQsIHJlcG9ydCBhbiBlcnJvci4KICBpZiAoIWJhdGNoLmNvbXBsZXRlZCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYXRjaC5tYXAuY2FsbENvdW50OyBpKyspIHsKICAgICAgaWYgKGJhdGNoLmhhbmRsZXJzW2ldICE9IG51bGwpIHsKICAgICAgICBkd3IuZW5naW5lLl9oYW5kbGVXYXJuaW5nKGJhdGNoLCB7IG5hbWU6ImR3ci5lbmdpbmUuaW5jb21wbGV0ZVJlcGx5IiwgbWVzc2FnZToiSW5jb21wbGV0ZSByZXBseSBmcm9tIHNlcnZlciIgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9Cn0KCi8qKiBAcHJpdmF0ZSBDYWxsZWQgZnJvbSBpZnJhbWUgb25sb2FkLCBjaGVjayBiYXRjaCB1c2luZyBiYXRjaC1pZCAqLwpkd3IuZW5naW5lLl9pZnJhbWVMb2FkaW5nQ29tcGxldGUgPSBmdW5jdGlvbihiYXRjaElkKSB7CiAgLy8gZHdyLmVuZ2luZS5fY2hlY2tDb21ldFBvbGwoKTsKICB2YXIgYmF0Y2ggPSBkd3IuZW5naW5lLl9iYXRjaGVzW2JhdGNoSWRdOwogIGlmIChiYXRjaCkgZHdyLmVuZ2luZS5fdmFsaWRhdGVCYXRjaChiYXRjaCk7Cn0KCi8qKiBAcHJpdmF0ZSBDYWxsZWQgYnkgdGhlIHNlcnZlcjogRXhlY3V0ZSBhIGNhbGxiYWNrICovCmR3ci5lbmdpbmUuX3JlbW90ZUhhbmRsZUNhbGxiYWNrID0gZnVuY3Rpb24oYmF0Y2hJZCwgY2FsbElkLCByZXBseSkgewogIHZhciBiYXRjaCA9IGR3ci5lbmdpbmUuX2JhdGNoZXNbYmF0Y2hJZF07CiAgaWYgKGJhdGNoID09IG51bGwpIHsKICAgIGR3ci5lbmdpbmUuX2RlYnVnKCJXYXJuaW5nOiBiYXRjaCA9PSBudWxsIGluIHJlbW90ZUhhbmRsZUNhbGxiYWNrIGZvciBiYXRjaElkPSIgKyBiYXRjaElkLCB0cnVlKTsKICAgIHJldHVybjsKICB9CiAgLy8gRXJyb3IgaGFuZGxlcnMgaW5zaWRlIGhlcmUgaW5kaWNhdGUgYW4gZXJyb3IgdGhhdCBpcyBub3RoaW5nIHRvIGRvCiAgLy8gd2l0aCBEV1Igc28gd2UgaGFuZGxlIHRoZW0gZGlmZmVyZW50bHkuCiAgdHJ5IHsKICAgIHZhciBoYW5kbGVycyA9IGJhdGNoLmhhbmRsZXJzW2NhbGxJZF07CiAgICBiYXRjaC5oYW5kbGVyc1tjYWxsSWRdID0gbnVsbDsKICAgIGlmICghaGFuZGxlcnMpIHsKICAgICAgZHdyLmVuZ2luZS5fZGVidWcoIldhcm5pbmc6IE1pc3NpbmcgaGFuZGxlcnMuIGNhbGxJZD0iICsgY2FsbElkLCB0cnVlKTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVycy5jYWxsYmFjayA9PSAiZnVuY3Rpb24iKSBoYW5kbGVycy5jYWxsYmFjayhyZXBseSk7CiAgfQogIGNhdGNoIChleCkgewogICAgZHdyLmVuZ2luZS5faGFuZGxlRXJyb3IoYmF0Y2gsIGV4KTsKICB9Cn07CgovKiogQHByaXZhdGUgQ2FsbGVkIGJ5IHRoZSBzZXJ2ZXI6IEhhbmRsZSBhbiBleGNlcHRpb24gZm9yIGEgY2FsbCAqLwpkd3IuZW5naW5lLl9yZW1vdGVIYW5kbGVFeGNlcHRpb24gPSBmdW5jdGlvbihiYXRjaElkLCBjYWxsSWQsIGV4KSB7CiAgdmFyIGJhdGNoID0gZHdyLmVuZ2luZS5fYmF0Y2hlc1tiYXRjaElkXTsKICBpZiAoYmF0Y2ggPT0gbnVsbCkgeyBkd3IuZW5naW5lLl9kZWJ1ZygiV2FybmluZzogbnVsbCBiYXRjaCBpbiByZW1vdGVIYW5kbGVFeGNlcHRpb24iLCB0cnVlKTsgcmV0dXJuOyB9CiAgdmFyIGhhbmRsZXJzID0gYmF0Y2guaGFuZGxlcnNbY2FsbElkXTsKICBiYXRjaC5oYW5kbGVyc1tjYWxsSWRdID0gbnVsbDsKICBpZiAoaGFuZGxlcnMgPT0gbnVsbCkgeyBkd3IuZW5naW5lLl9kZWJ1ZygiV2FybmluZzogbnVsbCBoYW5kbGVycyBpbiByZW1vdGVIYW5kbGVFeGNlcHRpb24iLCB0cnVlKTsgcmV0dXJuOyB9CiAgaWYgKGV4Lm1lc3NhZ2UgPT0gdW5kZWZpbmVkKSBleC5tZXNzYWdlID0gIiI7CiAgaWYgKHR5cGVvZiBoYW5kbGVycy5leGNlcHRpb25IYW5kbGVyID09ICJmdW5jdGlvbiIpIGhhbmRsZXJzLmV4Y2VwdGlvbkhhbmRsZXIoZXgubWVzc2FnZSwgZXgpOwogIGVsc2UgaWYgKHR5cGVvZiBiYXRjaC5lcnJvckhhbmRsZXIgPT0gImZ1bmN0aW9uIikgYmF0Y2guZXJyb3JIYW5kbGVyKGV4Lm1lc3NhZ2UsIGV4KTsKfTsKCi8qKiBAcHJpdmF0ZSBDYWxsZWQgYnkgdGhlIHNlcnZlcjogVGhlIHdob2xlIGJhdGNoIGlzIGJyb2tlbiAqLwpkd3IuZW5naW5lLl9yZW1vdGVIYW5kbGVCYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uKGV4LCBiYXRjaElkKSB7CiAgdmFyIHNlYXJjaEJhdGNoID0gKGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2ggPT0gbnVsbCAmJiBiYXRjaElkICE9IG51bGwpOwogIGlmIChzZWFyY2hCYXRjaCkgewogICAgZHdyLmVuZ2luZS5fcmVjZWl2ZWRCYXRjaCA9IGR3ci5lbmdpbmUuX2JhdGNoZXNbYmF0Y2hJZF07CiAgfQogIGlmIChleC5tZXNzYWdlID09IHVuZGVmaW5lZCkgZXgubWVzc2FnZSA9ICIiOwogIGR3ci5lbmdpbmUuX2hhbmRsZUVycm9yKGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2gsIGV4KTsKICBpZiAoc2VhcmNoQmF0Y2gpIHsKICAgIGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2ggPSBudWxsOwogICAgZHdyLmVuZ2luZS5fY2xlYXJVcChkd3IuZW5naW5lLl9iYXRjaGVzW2JhdGNoSWRdKTsKICB9Cn07CgovKiogQHByaXZhdGUgQ2FsbGVkIGJ5IHRoZSBzZXJ2ZXI6IFJldmVyc2UgYWpheCBzaG91bGQgbm90IGJlIHVzZWQgKi8KZHdyLmVuZ2luZS5fcmVtb3RlUG9sbENvbWV0RGlzYWJsZWQgPSBmdW5jdGlvbihleCwgYmF0Y2hJZCkgewogIGR3ci5lbmdpbmUuc2V0QWN0aXZlUmV2ZXJzZUFqYXgoZmFsc2UpOwogIHZhciBzZWFyY2hCYXRjaCA9IChkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoID09IG51bGwgJiYgYmF0Y2hJZCAhPSBudWxsKTsKICBpZiAoc2VhcmNoQmF0Y2gpIHsKICAgIGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2ggPSBkd3IuZW5naW5lLl9iYXRjaGVzW2JhdGNoSWRdOwogIH0KICBpZiAoZXgubWVzc2FnZSA9PSB1bmRlZmluZWQpIGV4Lm1lc3NhZ2UgPSAiIjsKICBkd3IuZW5naW5lLl9oYW5kbGVFcnJvcihkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoLCBleCk7CiAgaWYgKHNlYXJjaEJhdGNoKSB7CiAgICBkd3IuZW5naW5lLl9yZWNlaXZlZEJhdGNoID0gbnVsbDsKICAgIGR3ci5lbmdpbmUuX2NsZWFyVXAoZHdyLmVuZ2luZS5fYmF0Y2hlc1tiYXRjaElkXSk7CiAgfQp9OwoKLyoqIEBwcml2YXRlIENhbGxlZCBieSB0aGUgc2VydmVyOiBBbiBJRnJhbWUgcmVwbHkgaXMgYWJvdXQgdG8gc3RhcnQgKi8KZHdyLmVuZ2luZS5fcmVtb3RlQmVnaW5JRnJhbWVSZXNwb25zZSA9IGZ1bmN0aW9uKGlmcmFtZSwgYmF0Y2hJZCkgewogIGlmIChpZnJhbWUgIT0gbnVsbCkgZHdyLmVuZ2luZS5fcmVjZWl2ZWRCYXRjaCA9IGlmcmFtZS5iYXRjaDsKICBkd3IuZW5naW5lLl9jYWxsUG9zdEhvb2tzKGR3ci5lbmdpbmUuX3JlY2VpdmVkQmF0Y2gpOwp9OwoKLyoqIEBwcml2YXRlIENhbGxlZCBieSB0aGUgc2VydmVyOiBBbiBJRnJhbWUgcmVwbHkgaXMganVzdCBjb21wbGV0aW5nICovCmR3ci5lbmdpbmUuX3JlbW90ZUVuZElGcmFtZVJlc3BvbnNlID0gZnVuY3Rpb24oYmF0Y2hJZCkgewogIGR3ci5lbmdpbmUuX2NsZWFyVXAoZHdyLmVuZ2luZS5fcmVjZWl2ZWRCYXRjaCk7CiAgZHdyLmVuZ2luZS5fcmVjZWl2ZWRCYXRjaCA9IG51bGw7Cn07CgovKiogQHByaXZhdGUgVGhpcyBpcyBhIGhhY2sgdG8gbWFrZSB0aGUgY29udGV4dCBiZSB0aGlzIHdpbmRvdyAqLwpkd3IuZW5naW5lLl9ldmFsID0gZnVuY3Rpb24oc2NyaXB0KSB7CiAgaWYgKHNjcmlwdCA9PSBudWxsKSByZXR1cm4gbnVsbDsKICBpZiAoc2NyaXB0ID09ICIiKSB7IGR3ci5lbmdpbmUuX2RlYnVnKCJXYXJuaW5nOiBibGFuayBzY3JpcHQiLCB0cnVlKTsgcmV0dXJuIG51bGw7IH0KICAvLyBkd3IuZW5naW5lLl9kZWJ1ZygiRXhlYzogWyIgKyBzY3JpcHQgKyAiXSIsIHRydWUpOwogIHJldHVybiBldmFsKHNjcmlwdCk7Cn07CgovKiogQHByaXZhdGUgQ2FsbGVkIGFzIGEgcmVzdWx0IG9mIGEgcmVxdWVzdCB0aW1lb3V0ICovCmR3ci5lbmdpbmUuX2Fib3J0UmVxdWVzdCA9IGZ1bmN0aW9uKGJhdGNoKSB7CiAgaWYgKGJhdGNoICYmICFiYXRjaC5jb21wbGV0ZWQpIHsKICAgIGR3ci5lbmdpbmUuX2NsZWFyVXAoYmF0Y2gpOwogICAgaWYgKGJhdGNoLnJlcSkgYmF0Y2gucmVxLmFib3J0KCk7CiAgICBkd3IuZW5naW5lLl9oYW5kbGVFcnJvcihiYXRjaCwgeyBuYW1lOiJkd3IuZW5naW5lLnRpbWVvdXQiLCBtZXNzYWdlOiJUaW1lb3V0IiB9KTsKICB9Cn07CgovKiogQHByaXZhdGUgY2FsbCBhbGwgdGhlIHBvc3QgaG9va3MgZm9yIGEgYmF0Y2ggKi8KZHdyLmVuZ2luZS5fY2FsbFBvc3RIb29rcyA9IGZ1bmN0aW9uKGJhdGNoKSB7CiAgaWYgKGJhdGNoLnBvc3RIb29rcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYXRjaC5wb3N0SG9va3MubGVuZ3RoOyBpKyspIHsKICAgICAgYmF0Y2gucG9zdEhvb2tzW2ldKCk7CiAgICB9CiAgICBiYXRjaC5wb3N0SG9va3MgPSBudWxsOwogIH0KfTsKCi8qKiBAcHJpdmF0ZSBBIGNhbGwgaGFzIGZpbmlzaGVkIGJ5IHdoYXRldmVyIG1lYW5zIGFuZCB3ZSBuZWVkIHRvIHNodXQgaXQgYWxsIGRvd24uICovCmR3ci5lbmdpbmUuX2NsZWFyVXAgPSBmdW5jdGlvbihiYXRjaCkgewogIGlmICghYmF0Y2gpIHsgZHdyLmVuZ2luZS5fZGVidWcoIldhcm5pbmc6IG51bGwgYmF0Y2ggaW4gZHdyLmVuZ2luZS5fY2xlYXJVcCgpIiwgdHJ1ZSk7IHJldHVybjsgfQogIGlmIChiYXRjaC5jb21wbGV0ZWQpIHsgZHdyLmVuZ2luZS5fZGVidWcoIldhcm5pbmc6IERvdWJsZSBjb21wbGV0ZSIsIHRydWUpOyByZXR1cm47IH0KCiAgLy8gSUZyYW1lIHRpZHl1cAogIGlmIChiYXRjaC5kaXYpIGJhdGNoLmRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJhdGNoLmRpdik7CiAgaWYgKGJhdGNoLmlmcmFtZSkgewogICAgLy8gSWYgdGhpcyBpcyBhIHBvbGwgZnJhbWUgdGhlbiBzdG9wIGNvbWV0IHBvbGxpbmcKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZHdyLmVuZ2luZS5fb3V0c3RhbmRpbmdJRnJhbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChkd3IuZW5naW5lLl9vdXRzdGFuZGluZ0lGcmFtZXNbaV0gPT0gYmF0Y2guaWZyYW1lKSB7CiAgICAgICAgZHdyLmVuZ2luZS5fb3V0c3RhbmRpbmdJRnJhbWVzLnNwbGljZShpLCAxKTsKICAgICAgfQogICAgfQogICAgYmF0Y2guaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYmF0Y2guaWZyYW1lKTsKICB9CiAgaWYgKGJhdGNoLmZvcm0pIGJhdGNoLmZvcm0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiYXRjaC5mb3JtKTsKCiAgLy8gWEhSIHRpZHl1cDogYXZvaWQgSUUgaGFuZGxlcyBpbmNyZWFzZQogIGlmIChiYXRjaC5yZXEpIHsKICAgIC8vIElmIHRoaXMgaXMgYSBwb2xsIGZyYW1lIHRoZW4gc3RvcCBjb21ldCBwb2xsaW5nCiAgICBpZiAoYmF0Y2gucmVxID09IGR3ci5lbmdpbmUuX3BvbGxSZXEpIGR3ci5lbmdpbmUuX3BvbGxSZXEgPSBudWxsOwogICAgZGVsZXRlIGJhdGNoLnJlcTsKICB9CgogIC8vIFRpbWVvdXQgdGlkeXVwCiAgaWYgKGJhdGNoLnRpbWVvdXRJZCkgewogICAgY2xlYXJUaW1lb3V0KGJhdGNoLnRpbWVvdXRJZCk7CiAgICBkZWxldGUgYmF0Y2gudGltZW91dElkOwogIH0KCiAgaWYgKGJhdGNoLm1hcCAmJiAoYmF0Y2gubWFwLmJhdGNoSWQgfHwgYmF0Y2gubWFwLmJhdGNoSWQgPT0gMCkpIHsKICAgIGRlbGV0ZSBkd3IuZW5naW5lLl9iYXRjaGVzW2JhdGNoLm1hcC5iYXRjaElkXTsKICAgIGR3ci5lbmdpbmUuX2JhdGNoZXNMZW5ndGgtLTsKICB9CgogIGJhdGNoLmNvbXBsZXRlZCA9IHRydWU7CgogIC8vIElmIHRoZXJlIGlzIGFueXRoaW5nIG9uIHRoZSBxdWV1ZSB3YWl0aW5nIHRvIGdvIG91dCwgdGhlbiBzZW5kIGl0LgogIC8vIFdlIGRvbid0IG5lZWQgdG8gY2hlY2sgZm9yIG9yZGVyZWQgbW9kZSwgaGVyZSBiZWNhdXNlIHdoZW4gb3JkZXJlZCBtb2RlCiAgLy8gZ2V0cyB0dXJuZWQgb2ZmLCB3ZSBzdGlsbCBwcm9jZXNzICp3YWl0aW5nKiBiYXRjaGVzIGluIGFuIG9yZGVyZWQgd2F5LgogIGlmIChkd3IuZW5naW5lLl9iYXRjaFF1ZXVlLmxlbmd0aCAhPSAwKSB7CiAgICB2YXIgc2VuZGJhdGNoID0gZHdyLmVuZ2luZS5fYmF0Y2hRdWV1ZS5zaGlmdCgpOwogICAgZHdyLmVuZ2luZS5fc2VuZERhdGEoc2VuZGJhdGNoKTsKICB9Cn07CgovKiogQHByaXZhdGUgQWJvcnQgYW55IFhIUnMgaW4gcHJvZ3Jlc3MgYXQgcGFnZSB1bmxvYWQgKHNvbHZlcyB6b21iaWUgc29ja2V0IHByb2JsZW1zIGluIElFKS4gKi8KZHdyLmVuZ2luZS5fdW5sb2FkZXIgPSBmdW5jdGlvbigpIHsKICBkd3IuZW5naW5lLl91bmxvYWRpbmcgPSB0cnVlOwoKICAvLyBFbXB0eSBxdWV1ZSBvZiB3YWl0aW5nIG9yZGVyZWQgcmVxdWVzdHMKICBkd3IuZW5naW5lLl9iYXRjaFF1ZXVlLmxlbmd0aCA9IDA7CgogIC8vIEFib3J0IGFueSBvbmdvaW5nIFhIUnMgYW5kIGNsZWFyIHRoZWlyIGJhdGNoZXMKICBmb3IgKHZhciBiYXRjaElkIGluIGR3ci5lbmdpbmUuX2JhdGNoZXMpIHsKICAgIHZhciBiYXRjaCA9IGR3ci5lbmdpbmUuX2JhdGNoZXNbYmF0Y2hJZF07CiAgICAvLyBPbmx5IHByb2Nlc3Mgb2JqZWN0cyB0aGF0IGxvb2sgbGlrZSBiYXRjaGVzIChhdm9pZCBwcm90b3R5cGUgYWRkaXRpb25zISkKICAgIGlmIChiYXRjaCAmJiBiYXRjaC5tYXApIHsKICAgICAgaWYgKGJhdGNoLnJlcSkgewogICAgICAgIGJhdGNoLnJlcS5hYm9ydCgpOwogICAgICB9CiAgICAgIGR3ci5lbmdpbmUuX2NsZWFyVXAoYmF0Y2gpOwogICAgfQogIH0KfTsKLy8gTm93IHJlZ2lzdGVyIHRoZSB1bmxvYWQgaGFuZGxlcgppZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBkd3IuZW5naW5lLl91bmxvYWRlciwgZmFsc2UpOwplbHNlIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHdpbmRvdy5hdHRhY2hFdmVudCgnb251bmxvYWQnLCBkd3IuZW5naW5lLl91bmxvYWRlcik7CgovKiogQHByaXZhdGUgR2VuZXJpYyBlcnJvciBoYW5kbGluZyByb3V0aW5nIHRvIHNhdmUgaGF2aW5nIG51bGwgY2hlY2tzIGV2ZXJ5d2hlcmUgKi8KZHdyLmVuZ2luZS5faGFuZGxlRXJyb3IgPSBmdW5jdGlvbihiYXRjaCwgZXgpIHsKICBpZiAodHlwZW9mIGV4ID09ICJzdHJpbmciKSBleCA9IHsgbmFtZToidW5rbm93biIsIG1lc3NhZ2U6ZXggfTsKICBpZiAoZXgubWVzc2FnZSA9PSBudWxsKSBleC5tZXNzYWdlID0gIiI7CiAgaWYgKGV4Lm5hbWUgPT0gbnVsbCkgZXgubmFtZSA9ICJ1bmtub3duIjsKICBpZiAoYmF0Y2ggJiYgdHlwZW9mIGJhdGNoLmVycm9ySGFuZGxlciA9PSAiZnVuY3Rpb24iKSBiYXRjaC5lcnJvckhhbmRsZXIoZXgubWVzc2FnZSwgZXgpOwogIGVsc2UgaWYgKGR3ci5lbmdpbmUuX2Vycm9ySGFuZGxlcikgZHdyLmVuZ2luZS5fZXJyb3JIYW5kbGVyKGV4Lm1lc3NhZ2UsIGV4KTsKICBpZiAoYmF0Y2gpIGR3ci5lbmdpbmUuX2NsZWFyVXAoYmF0Y2gpOwp9OwoKLyoqIEBwcml2YXRlIEdlbmVyaWMgZXJyb3IgaGFuZGxpbmcgcm91dGluZyB0byBzYXZlIGhhdmluZyBudWxsIGNoZWNrcyBldmVyeXdoZXJlICovCmR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcgPSBmdW5jdGlvbihiYXRjaCwgZXgpIHsKICBpZiAodHlwZW9mIGV4ID09ICJzdHJpbmciKSBleCA9IHsgbmFtZToidW5rbm93biIsIG1lc3NhZ2U6ZXggfTsKICBpZiAoZXgubWVzc2FnZSA9PSBudWxsKSBleC5tZXNzYWdlID0gIiI7CiAgaWYgKGV4Lm5hbWUgPT0gbnVsbCkgZXgubmFtZSA9ICJ1bmtub3duIjsKICBpZiAoYmF0Y2ggJiYgdHlwZW9mIGJhdGNoLndhcm5pbmdIYW5kbGVyID09ICJmdW5jdGlvbiIpIGJhdGNoLndhcm5pbmdIYW5kbGVyKGV4Lm1lc3NhZ2UsIGV4KTsKICBlbHNlIGlmIChkd3IuZW5naW5lLl93YXJuaW5nSGFuZGxlcikgZHdyLmVuZ2luZS5fd2FybmluZ0hhbmRsZXIoZXgubWVzc2FnZSwgZXgpOwogIGlmIChiYXRjaCkgZHdyLmVuZ2luZS5fY2xlYXJVcChiYXRjaCk7Cn07CgovKioKICogQHByaXZhdGUgTWFyc2hhbGwgYSBkYXRhIGl0ZW0KICogQHBhcmFtIGJhdGNoIEEgbWFwIG9mIHZhcmlhYmxlcyB0byBob3cgdGhleSBoYXZlIGJlZW4gbWFyc2hhbGxlZAogKiBAcGFyYW0gcmVmZXJ0byBBbiBhcnJheSBvZiBhbHJlYWR5IG1hcnNoYWxsZWQgdmFyaWFibGVzIHRvIHByZXZlbnQgcmVjdXJyc2lvbgogKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBiZSBtYXJzaGFsbGVkCiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBkYXRhIGJlaW5nIG1hcnNoYWxsZWQKICovCmR3ci5lbmdpbmUuX3NlcmlhbGl6ZUFsbCA9IGZ1bmN0aW9uKGJhdGNoLCByZWZlcnRvLCBkYXRhLCBuYW1lKSB7CiAgaWYgKGRhdGEgPT0gbnVsbCkgewogICAgYmF0Y2gubWFwW25hbWVdID0gIm51bGw6bnVsbCI7CiAgICByZXR1cm47CiAgfQoKICBzd2l0Y2ggKHR5cGVvZiBkYXRhKSB7CiAgY2FzZSAiYm9vbGVhbiI6CiAgICBiYXRjaC5tYXBbbmFtZV0gPSAiYm9vbGVhbjoiICsgZGF0YTsKICAgIGJyZWFrOwogIGNhc2UgIm51bWJlciI6CiAgICBiYXRjaC5tYXBbbmFtZV0gPSAibnVtYmVyOiIgKyBkYXRhOwogICAgYnJlYWs7CiAgY2FzZSAic3RyaW5nIjoKICAgIGJhdGNoLm1hcFtuYW1lXSA9ICJzdHJpbmc6IiArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhKTsKICAgIGJyZWFrOwogIGNhc2UgIm9iamVjdCI6CiAgICB2YXIgb2Jqc3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpOwogICAgaWYgKG9ianN0ciA9PSAiW29iamVjdCBTdHJpbmddIikgYmF0Y2gubWFwW25hbWVdID0gIlN0cmluZzoiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpOwogICAgZWxzZSBpZiAob2Jqc3RyID09ICJbb2JqZWN0IEJvb2xlYW5dIikgYmF0Y2gubWFwW25hbWVdID0gIkJvb2xlYW46IiArIGRhdGE7CiAgICBlbHNlIGlmIChvYmpzdHIgPT0gIltvYmplY3QgTnVtYmVyXSIpIGJhdGNoLm1hcFtuYW1lXSA9ICJOdW1iZXI6IiArIGRhdGE7CiAgICBlbHNlIGlmIChvYmpzdHIgPT0gIltvYmplY3QgRGF0ZV0iKSBiYXRjaC5tYXBbbmFtZV0gPSAiRGF0ZToiICsgZGF0YS5nZXRUaW1lKCk7CiAgICBlbHNlIGlmIChvYmpzdHIgPT0gIltvYmplY3QgQXJyYXldIikgYmF0Y2gubWFwW25hbWVdID0gZHdyLmVuZ2luZS5fc2VyaWFsaXplQXJyYXkoYmF0Y2gsIHJlZmVydG8sIGRhdGEsIG5hbWUpOwogICAgZWxzZSBiYXRjaC5tYXBbbmFtZV0gPSBkd3IuZW5naW5lLl9zZXJpYWxpemVPYmplY3QoYmF0Y2gsIHJlZmVydG8sIGRhdGEsIG5hbWUpOwogICAgYnJlYWs7CiAgY2FzZSAiZnVuY3Rpb24iOgogICAgLy8gV2UganVzdCBpZ25vcmUgZnVuY3Rpb25zLgogICAgYnJlYWs7CiAgZGVmYXVsdDoKICAgIGR3ci5lbmdpbmUuX2hhbmRsZVdhcm5pbmcobnVsbCwgeyBuYW1lOiJkd3IuZW5naW5lLnVuZXhwZWN0ZWRUeXBlIiwgbWVzc2FnZToiVW5leHBlY3RlZCB0eXBlOiAiICsgdHlwZW9mIGRhdGEgKyAiLCBhdHRlbXB0aW5nIGRlZmF1bHQgY29udmVydGVyLiIgfSk7CiAgICBiYXRjaC5tYXBbbmFtZV0gPSAiZGVmYXVsdDoiICsgZGF0YTsKICAgIGJyZWFrOwogIH0KfTsKCi8qKiBAcHJpdmF0ZSBIYXZlIHdlIGFscmVhZHkgY29udmVydGVkIHRoaXMgb2JqZWN0PyAqLwpkd3IuZW5naW5lLl9sb29rdXAgPSBmdW5jdGlvbihyZWZlcnRvLCBkYXRhLCBuYW1lKSB7CiAgdmFyIGxvb2t1cDsKICAvLyBDYW4ndCB1c2UgYSBtYXA6IGdldGFoZWFkLm9yZy9hamF4L2phdmFzY3JpcHQtZ290Y2hhcwogIGZvciAodmFyIGkgPSAwOyBpIDwgcmVmZXJ0by5sZW5ndGg7IGkrKykgewogICAgaWYgKHJlZmVydG9baV0uZGF0YSA9PSBkYXRhKSB7CiAgICAgIGxvb2t1cCA9IHJlZmVydG9baV07CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZiAobG9va3VwKSByZXR1cm4gInJlZmVyZW5jZToiICsgbG9va3VwLm5hbWU7CiAgcmVmZXJ0by5wdXNoKHsgZGF0YTpkYXRhLCBuYW1lOm5hbWUgfSk7CiAgcmV0dXJuIG51bGw7Cn07CgovKiogQHByaXZhdGUgTWFyc2hhbGwgYW4gb2JqZWN0ICovCmR3ci5lbmdpbmUuX3NlcmlhbGl6ZU9iamVjdCA9IGZ1bmN0aW9uKGJhdGNoLCByZWZlcnRvLCBkYXRhLCBuYW1lKSB7CiAgdmFyIHJlZiA9IGR3ci5lbmdpbmUuX2xvb2t1cChyZWZlcnRvLCBkYXRhLCBuYW1lKTsKICBpZiAocmVmKSByZXR1cm4gcmVmOwoKICAvLyBUaGlzIGNoZWNrIGZvciBhbiBIVE1MIGlzIG5vdCBjb21wbGV0ZSwgYnV0IGlzIHRoZXJlIGEgYmV0dGVyIHdheT8KICAvLyBNYXliZSB3ZSBzaG91bGQgYWRkOiBkYXRhLmhhc0NoaWxkTm9kZXMgdHlwZW9mICJmdW5jdGlvbiIgPT0gdHJ1ZQogIGlmIChkYXRhLm5vZGVOYW1lICYmIGRhdGEubm9kZVR5cGUpIHsKICAgIHJldHVybiBkd3IuZW5naW5lLl9zZXJpYWxpemVYbWwoYmF0Y2gsIHJlZmVydG8sIGRhdGEsIG5hbWUpOwogIH0KCiAgLy8gdHJlYXQgb2JqZWN0cyBhcyBhbiBhc3NvY2lhdGl2ZSBhcnJheXMKICB2YXIgcmVwbHkgPSAiT2JqZWN0XyIgKyBkd3IuZW5naW5lLl9nZXRPYmplY3RDbGFzc05hbWUoZGF0YSkgKyAiOnsiOwogIHZhciBlbGVtZW50OwogIGZvciAoZWxlbWVudCBpbiBkYXRhKSB7CiAgICBpZiAodHlwZW9mIGRhdGFbZWxlbWVudF0gIT0gImZ1bmN0aW9uIikgewogICAgICBiYXRjaC5wYXJhbUNvdW50Kys7CiAgICAgIHZhciBjaGlsZE5hbWUgPSAiYyIgKyBkd3IuZW5naW5lLl9iYXRjaC5tYXAuY2FsbENvdW50ICsgIi1lIiArIGJhdGNoLnBhcmFtQ291bnQ7CiAgICAgIGR3ci5lbmdpbmUuX3NlcmlhbGl6ZUFsbChiYXRjaCwgcmVmZXJ0bywgZGF0YVtlbGVtZW50XSwgY2hpbGROYW1lKTsKCiAgICAgIHJlcGx5ICs9IGVuY29kZVVSSUNvbXBvbmVudChlbGVtZW50KSArICI6cmVmZXJlbmNlOiIgKyBjaGlsZE5hbWUgKyAiLCAiOwogICAgfQogIH0KCiAgaWYgKHJlcGx5LnN1YnN0cmluZyhyZXBseS5sZW5ndGggLSAyKSA9PSAiLCAiKSB7CiAgICByZXBseSA9IHJlcGx5LnN1YnN0cmluZygwLCByZXBseS5sZW5ndGggLSAyKTsKICB9CiAgcmVwbHkgKz0gIn0iOwoKICByZXR1cm4gcmVwbHk7Cn07CgovKiogQHByaXZhdGUgUmV0dXJucyB0aGUgY2xhc3NuYW1lIG9mIHN1cHBsaWVkIGFyZ3VtZW50IG9iaiAqLwpkd3IuZW5naW5lLl9lcnJvckNsYXNzZXMgPSB7ICJFcnJvciI6RXJyb3IsICJFdmFsRXJyb3IiOkV2YWxFcnJvciwgIlJhbmdlRXJyb3IiOlJhbmdlRXJyb3IsICJSZWZlcmVuY2VFcnJvciI6UmVmZXJlbmNlRXJyb3IsICJTeW50YXhFcnJvciI6U3ludGF4RXJyb3IsICJUeXBlRXJyb3IiOlR5cGVFcnJvciwgIlVSSUVycm9yIjpVUklFcnJvciB9Owpkd3IuZW5naW5lLl9nZXRPYmplY3RDbGFzc05hbWUgPSBmdW5jdGlvbihvYmopIHsKICAvLyBUcnkgdG8gZmluZCB0aGUgY2xhc3NuYW1lIGJ5IHN0cmluZ2lmeWluZyB0aGUgb2JqZWN0J3MgY29uc3RydWN0b3IKICAvLyBhbmQgZXh0cmFjdCA8Y2xhc3M+IGZyb20gImZ1bmN0aW9uIDxjbGFzcz4iLgogIGlmIChvYmogJiYgb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci50b1N0cmluZykKICB7CiAgICB2YXIgc3RyID0gb2JqLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCk7CiAgICB2YXIgcmVnZXhwbWF0Y2ggPSBzdHIubWF0Y2goL2Z1bmN0aW9uXHMrKFx3KykvKTsKICAgIGlmIChyZWdleHBtYXRjaCAmJiByZWdleHBtYXRjaC5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gcmVnZXhwbWF0Y2hbMV07CiAgICB9CiAgfQoKICAvLyBOb3cgbWFudWFsbHkgdGVzdCBhZ2FpbnN0IHRoZSBjb3JlIEVycm9yIGNsYXNzZXMsIGFzIHRoZXNlIGluIHNvbWUgCiAgLy8gYnJvd3NlcnMgc3VjY2Vzc2Z1bGx5IG1hdGNoIHRvIHRoZSB3cm9uZyBjbGFzcyBpbiB0aGUgCiAgLy8gT2JqZWN0LnRvU3RyaW5nKCkgdGVzdCB3ZSB3aWxsIGRvIGxhdGVyCiAgaWYgKG9iaiAmJiBvYmouY29uc3RydWN0b3IpIHsKICAgIGZvciAodmFyIGVycm9ybmFtZSBpbiBkd3IuZW5naW5lLl9lcnJvckNsYXNzZXMpIHsKICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PSBkd3IuZW5naW5lLl9lcnJvckNsYXNzZXNbZXJyb3JuYW1lXSkgcmV0dXJuIGVycm9ybmFtZTsKICAgIH0KICB9CgogIC8vIFRyeSB0byBmaW5kIHRoZSBjbGFzc25hbWUgYnkgY2FsbGluZyBPYmplY3QudG9TdHJpbmcoKSBvbiB0aGUgb2JqZWN0CiAgLy8gYW5kIGV4dHJhY3RpbmcgPGNsYXNzPiBmcm9tICJbb2JqZWN0IDxjbGFzcz5dIgogIGlmIChvYmopIHsKICAgIHZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsKICAgIHZhciByZWdleHBtYXRjaCA9IHN0ci5tYXRjaCgvXFtvYmplY3RccysoXHcrKS8pOwogICAgaWYgKHJlZ2V4cG1hdGNoICYmIHJlZ2V4cG1hdGNoLmxlbmd0aD09MikgewogICAgICByZXR1cm4gcmVnZXhwbWF0Y2hbMV07CiAgICB9CiAgfQoKICAvLyBTdXBwbGllZCBhcmd1bWVudCB3YXMgcHJvYmFibHkgbm90IGFuIG9iamVjdCwgYnV0IHdoYXQgaXMgYmV0dGVyPwogIHJldHVybiAiT2JqZWN0IjsKfTsKCi8qKiBAcHJpdmF0ZSBNYXJzaGFsbCBhbiBvYmplY3QgKi8KZHdyLmVuZ2luZS5fc2VyaWFsaXplWG1sID0gZnVuY3Rpb24oYmF0Y2gsIHJlZmVydG8sIGRhdGEsIG5hbWUpIHsKICB2YXIgcmVmID0gZHdyLmVuZ2luZS5fbG9va3VwKHJlZmVydG8sIGRhdGEsIG5hbWUpOwogIGlmIChyZWYpIHJldHVybiByZWY7CgogIHZhciBvdXRwdXQ7CiAgaWYgKHdpbmRvdy5YTUxTZXJpYWxpemVyKSBvdXRwdXQgPSBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKGRhdGEpOwogIGVsc2UgaWYgKGRhdGEudG9YbWwpIG91dHB1dCA9IGRhdGEudG9YbWw7CiAgZWxzZSBvdXRwdXQgPSBkYXRhLmlubmVySFRNTDsKCiAgcmV0dXJuICJYTUw6IiArIGVuY29kZVVSSUNvbXBvbmVudChvdXRwdXQpOwp9OwoKLyoqIEBwcml2YXRlIE1hcnNoYWxsIGFuIGFycmF5ICovCmR3ci5lbmdpbmUuX3NlcmlhbGl6ZUFycmF5ID0gZnVuY3Rpb24oYmF0Y2gsIHJlZmVydG8sIGRhdGEsIG5hbWUpIHsKICB2YXIgcmVmID0gZHdyLmVuZ2luZS5fbG9va3VwKHJlZmVydG8sIGRhdGEsIG5hbWUpOwogIGlmIChyZWYpIHJldHVybiByZWY7CgogIGlmIChkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5vcGVyYSkgewogICAgLy8gVXNlIGFycmF5IGpvaW5pbmcgb24gSUUgKGZhc3Rlc3QpCiAgICB2YXIgYnVmID0gWyJBcnJheTpbIl07CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGkgIT0gMCkgYnVmLnB1c2goIiwiKTsKICAgICAgYmF0Y2gucGFyYW1Db3VudCsrOwogICAgICB2YXIgY2hpbGROYW1lID0gImMiICsgZHdyLmVuZ2luZS5fYmF0Y2gubWFwLmNhbGxDb3VudCArICItZSIgKyBiYXRjaC5wYXJhbUNvdW50OwogICAgICBkd3IuZW5naW5lLl9zZXJpYWxpemVBbGwoYmF0Y2gsIHJlZmVydG8sIGRhdGFbaV0sIGNoaWxkTmFtZSk7CiAgICAgIGJ1Zi5wdXNoKCJyZWZlcmVuY2U6Iik7CiAgICAgIGJ1Zi5wdXNoKGNoaWxkTmFtZSk7CiAgICB9CiAgICBidWYucHVzaCgiXSIpOwogICAgcmVwbHkgPSBidWYuam9pbigiIik7CiAgfQogIGVsc2UgewogICAgLy8gVXNlIHN0cmluZyBjb25jYXQgb24gb3RoZXIgYnJvd3NlcnMgKGZhc3Rlc3QpCiAgICB2YXIgcmVwbHkgPSAiQXJyYXk6WyI7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGkgIT0gMCkgcmVwbHkgKz0gIiwiOwogICAgICBiYXRjaC5wYXJhbUNvdW50Kys7CiAgICAgIHZhciBjaGlsZE5hbWUgPSAiYyIgKyBkd3IuZW5naW5lLl9iYXRjaC5tYXAuY2FsbENvdW50ICsgIi1lIiArIGJhdGNoLnBhcmFtQ291bnQ7CiAgICAgIGR3ci5lbmdpbmUuX3NlcmlhbGl6ZUFsbChiYXRjaCwgcmVmZXJ0bywgZGF0YVtpXSwgY2hpbGROYW1lKTsKICAgICAgcmVwbHkgKz0gInJlZmVyZW5jZToiOwogICAgICByZXBseSArPSBjaGlsZE5hbWU7CiAgICB9CiAgICByZXBseSArPSAiXSI7CiAgfQoKICByZXR1cm4gcmVwbHk7Cn07CgovKiogQHByaXZhdGUgQ29udmVydCBhbiBYTUwgc3RyaW5nIGludG8gYSBET00gb2JqZWN0LiAqLwpkd3IuZW5naW5lLl91bnNlcmlhbGl6ZURvY3VtZW50ID0gZnVuY3Rpb24oeG1sKSB7CiAgdmFyIGRvbTsKICBpZiAod2luZG93LkRPTVBhcnNlcikgewogICAgdmFyIHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgIGRvbSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoeG1sLCAidGV4dC94bWwiKTsKICAgIGlmICghZG9tLmRvY3VtZW50RWxlbWVudCB8fCBkb20uZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUgPT0gInBhcnNlcmVycm9yIikgewogICAgICB2YXIgbWVzc2FnZSA9IGRvbS5kb2N1bWVudEVsZW1lbnQuZmlyc3RDaGlsZC5kYXRhOwogICAgICBtZXNzYWdlICs9ICJcbiIgKyBkb20uZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQubmV4dFNpYmxpbmcuZmlyc3RDaGlsZC5kYXRhOwogICAgICB0aHJvdyBtZXNzYWdlOwogICAgfQogICAgcmV0dXJuIGRvbTsKICB9CiAgZWxzZSBpZiAod2luZG93LkFjdGl2ZVhPYmplY3QpIHsKICAgIGRvbSA9IGR3ci5lbmdpbmUuX25ld0FjdGl2ZVhPYmplY3QoZHdyLmVuZ2luZS5fRE9NRG9jdW1lbnQpOwogICAgZG9tLmxvYWRYTUwoeG1sKTsgLy8gV2hhdCBoYXBwZW5zIG9uIHBhcnNlIGZhaWwgd2l0aCBJRT8KICAgIHJldHVybiBkb207CiAgfQogIGVsc2UgewogICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZGl2LmlubmVySFRNTCA9IHhtbDsKICAgIHJldHVybiBkaXY7CiAgfQp9OwoKLyoqIEBwYXJhbSBheGFycmF5IEFuIGFycmF5IG9mIHN0cmluZ3MgdG8gYXR0ZW1wdCB0byBjcmVhdGUgQWN0aXZlWCBvYmplY3RzIGZyb20gKi8KZHdyLmVuZ2luZS5fbmV3QWN0aXZlWE9iamVjdCA9IGZ1bmN0aW9uKGF4YXJyYXkpIHsKICB2YXIgcmV0dXJuVmFsdWU7ICAKICBmb3IgKHZhciBpID0gMDsgaSA8IGF4YXJyYXkubGVuZ3RoOyBpKyspIHsKICAgIHRyeSB7CiAgICAgIHJldHVyblZhbHVlID0gbmV3IEFjdGl2ZVhPYmplY3QoYXhhcnJheVtpXSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2F0Y2ggKGV4KSB7IC8qIGlnbm9yZSAqLyB9CiAgfQogIHJldHVybiByZXR1cm5WYWx1ZTsKfTsKCi8qKiBAcHJpdmF0ZSBVc2VkIGludGVybmFsbHkgd2hlbiBzb21lIG1lc3NhZ2UgbmVlZHMgdG8gZ2V0IHRvIHRoZSBwcm9ncmFtbWVyICovCmR3ci5lbmdpbmUuX2RlYnVnID0gZnVuY3Rpb24obWVzc2FnZSwgc3RhY2t0cmFjZSkgewogIHZhciB3cml0dGVuID0gZmFsc2U7CiAgdHJ5IHsKICAgIGlmICh3aW5kb3cuY29uc29sZSkgewogICAgICBpZiAoc3RhY2t0cmFjZSAmJiB3aW5kb3cuY29uc29sZS50cmFjZSkgd2luZG93LmNvbnNvbGUudHJhY2UoKTsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKG1lc3NhZ2UpOwogICAgICB3cml0dGVuID0gdHJ1ZTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5vcGVyYSAmJiB3aW5kb3cub3BlcmEucG9zdEVycm9yKSB7CiAgICAgIHdpbmRvdy5vcGVyYS5wb3N0RXJyb3IobWVzc2FnZSk7CiAgICAgIHdyaXR0ZW4gPSB0cnVlOwogICAgfQogIH0KICBjYXRjaCAoZXgpIHsgLyogaWdub3JlICovIH0KCiAgaWYgKCF3cml0dGVuKSB7CiAgICB2YXIgZGVidWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZHdyLWRlYnVnIik7CiAgICBpZiAoZGVidWcpIHsKICAgICAgdmFyIGNvbnRlbnRzID0gbWVzc2FnZSArICI8YnIvPiIgKyBkZWJ1Zy5pbm5lckhUTUw7CiAgICAgIGlmIChjb250ZW50cy5sZW5ndGggPiAyMDQ4KSBjb250ZW50cyA9IGNvbnRlbnRzLnN1YnN0cmluZygwLCAyMDQ4KTsKICAgICAgZGVidWcuaW5uZXJIVE1MID0gY29udGVudHM7CiAgICB9CiAgfQp9OwoNCg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="28" hostname="omniconv" path="/omni/dwr/util.js" url="http://omniconv/omni/dwr/util.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8634" connectionId="2016" origin="HTML" ordinal="16" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2242" sendTime="4" waitTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9vbW5pL2R3ci91dGlsLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>dGV4dC9odG1s</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="WWW-Authenticate" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TmVnb3RpYXRl</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="WWW-Authenticate" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TlRMTQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTI5Mw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgNDAxIFVuYXV0aG9yaXplZA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWwNClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNCldXVy1BdXRoZW50aWNhdGU6IE5lZ290aWF0ZQ0KV1dXLUF1dGhlbnRpY2F0ZTogTlRMTQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDEyOTMNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGQiPg0KPGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPg0KPGhlYWQ+DQo8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1pc28tODg1OS0xIi8+DQo8dGl0bGU+NDAxIC0gVW5hdXRob3JpemVkOiBBY2Nlc3MgaXMgZGVuaWVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWxzLjwvdGl0bGU+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KPCEtLQ0KYm9keXttYXJnaW46MDtmb250LXNpemU6LjdlbTtmb250LWZhbWlseTpWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO2JhY2tncm91bmQ6I0VFRUVFRTt9DQpmaWVsZHNldHtwYWRkaW5nOjAgMTVweCAxMHB4IDE1cHg7fSANCmgxe2ZvbnQtc2l6ZToyLjRlbTttYXJnaW46MDtjb2xvcjojRkZGO30NCmgye2ZvbnQtc2l6ZToxLjdlbTttYXJnaW46MDtjb2xvcjojQ0MwMDAwO30gDQpoM3tmb250LXNpemU6MS4yZW07bWFyZ2luOjEwcHggMCAwIDA7Y29sb3I6IzAwMDAwMDt9IA0KI2hlYWRlcnt3aWR0aDo5NiU7bWFyZ2luOjAgMCAwIDA7cGFkZGluZzo2cHggMiUgNnB4IDIlO2ZvbnQtZmFtaWx5OiJ0cmVidWNoZXQgTVMiLCBWZXJkYW5hLCBzYW5zLXNlcmlmO2NvbG9yOiNGRkY7DQpiYWNrZ3JvdW5kLWNvbG9yOiM1NTU1NTU7fQ0KI2NvbnRlbnR7bWFyZ2luOjAgMCAwIDIlO3Bvc2l0aW9uOnJlbGF0aXZlO30NCi5jb250ZW50LWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNGRkY7d2lkdGg6OTYlO21hcmdpbi10b3A6OHB4O3BhZGRpbmc6MTBweDtwb3NpdGlvbjpyZWxhdGl2ZTt9DQotLT4NCjwvc3R5bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCjxkaXYgaWQ9ImhlYWRlciI+PGgxPlNlcnZlciBFcnJvcjwvaDE+PC9kaXY+DQo8ZGl2IGlkPSJjb250ZW50Ij4NCiA8ZGl2IGNsYXNzPSJjb250ZW50LWNvbnRhaW5lciI+PGZpZWxkc2V0Pg0KICA8aDI+NDAxIC0gVW5hdXRob3JpemVkOiBBY2Nlc3MgaXMgZGVuaWVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWxzLjwvaDI+DQogIDxoMz5Zb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IHRoaXMgZGlyZWN0b3J5IG9yIHBhZ2UgdXNpbmcgdGhlIGNyZWRlbnRpYWxzIHRoYXQgeW91IHN1cHBsaWVkLjwvaDM+DQogPC9maWVsZHNldD48L2Rpdj4NCjwvZGl2Pg0KPC9ib2R5Pg0KPC9odG1sPg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
          <HTTPTask id="34" hostname="omniconv" path="/omni/dwr/util.js" url="http://omniconv/omni/dwr/util.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8634" connectionId="2016" origin="Authentication" startDateTime="2018-08-14T12:26:56.702-07:00" startTime="2242" endTime="2264" sendTime="20" waitTime="0">
            <HTTPRequest method="GET">
              <HTTPHeaders>
                <HTTPHeaderEntity name="Referer" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="User-Agent" index="1">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Accept-Encoding" index="2">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Accept-Language" index="3">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>ZW4tVVM=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Accept" index="4">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>Ki8q</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Connection" index="5">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Host" index="6">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>b21uaWNvbnY=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Authorization" index="7">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>TlRMTSBUbFJNVFZOVFVBQUJBQUFBQjdJSW9nc0FDd0F2QUFBQUR3QVBBQ0FBQUFCRVQwTXhXbFJWVFRFeE5qZzNPREZFVDBNeExsZEJMa3hEVEE9PQ==</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Cookie" index="8">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPAllHeaders>
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>R0VUIC9vbW5pL2R3ci91dGlsLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkF1dGhvcml6YXRpb246IE5UTE0gVGxSTVRWTlRVQUFCQUFBQUI3SUlvZ3NBQ3dBdkFBQUFEd0FQQUNBQUFBQkVUME14V2xSVlRURXhOamczT0RGRVQwTXhMbGRCTGt4RFRBPT0NCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPAllHeaders>
                <HTTPCookies>
                  <HTTPHeaderEntity name="JSESSIONID" index="0">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                </HTTPCookies>
              </HTTPHeaders>
            </HTTPRequest>
            <HTTPResponse>
              <HTTPHeaders>
                <HTTPHeaderEntity name="Content-Type" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PXVzLWFzY2lp</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Server" index="1">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>TWljcm9zb2Z0LUhUVFBBUEkvMi4w</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="WWW-Authenticate" index="2">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>TlRMTSBUbFJNVFZOVFVBQUNBQUFBQ0FBSUFEZ0FBQUFGZ29taWgwWGQrdU9FN2FvQUFBQUFBQUFBQUpZQWxnQkFBQUFBQmdHeEhRQUFBQTlFQUU4QVF3QXhBQUlBQ0FCRUFFOEFRd0F4QUFFQUdBQkVBRThBUXdBeEFGY0FRZ0JVQUZVQVRRQXhBRGNBTVFBRUFCWUFSQUJQQUVNQU1RQXVBSGNBWVFBdUFHd0FZd0JzQUFNQU1BQkVBRThBUXdBeEFGY0FRZ0JVQUZVQVRRQXhBRGNBTVFBdUFFUUFUd0JEQURFQUxnQjNBR0VBTGdCc0FHTUFiQUFGQUF3QWR3QmhBQzRBYkFCakFHd0FCd0FJQUFEQ2hjTUVOTlFCQUFBQUFBPT0=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Date" index="3">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPHeaderEntity name="Content-Length" index="4">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MzQx</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
                <HTTPAllHeaders>
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>SFRUUC8xLjEgNDAxIFVuYXV0aG9yaXplZA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9dXMtYXNjaWkNClNlcnZlcjogTWljcm9zb2Z0LUhUVFBBUEkvMi4wDQpXV1ctQXV0aGVudGljYXRlOiBOVExNIFRsUk1UVk5UVUFBQ0FBQUFDQUFJQURnQUFBQUZnb21paDBYZCt1T0U3YW9BQUFBQUFBQUFBSllBbGdCQUFBQUFCZ0d4SFFBQUFBOUVBRThBUXdBeEFBSUFDQUJFQUU4QVF3QXhBQUVBR0FCRUFFOEFRd0F4QUZjQVFnQlVBRlVBVFFBeEFEY0FNUUFFQUJZQVJBQlBBRU1BTVFBdUFIY0FZUUF1QUd3QVl3QnNBQU1BTUFCRUFFOEFRd0F4QUZjQVFnQlVBRlVBVFFBeEFEY0FNUUF1QUVRQVR3QkRBREVBTGdCM0FHRUFMZ0JzQUdNQWJBQUZBQXdBZHdCaEFDNEFiQUJqQUd3QUJ3QUlBQURDaGNNRU5OUUJBQUFBQUE9PQ0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAzNDENCg0K</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPAllHeaders>
              </HTTPHeaders>
              <HTTPBody>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEvL0VOIiJodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNC9zdHJpY3QuZHRkIj4NCjxIVE1MPjxIRUFEPjxUSVRMRT5Ob3QgQXV0aG9yaXplZDwvVElUTEU+DQo8TUVUQSBIVFRQLUVRVUlWPSJDb250ZW50LVR5cGUiIENvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11cy1hc2NpaSI+PC9IRUFEPg0KPEJPRFk+PGgyPk5vdCBBdXRob3JpemVkPC9oMj4NCjxocj48cD5IVFRQIEVycm9yIDQwMS4gVGhlIHJlcXVlc3RlZCByZXNvdXJjZSByZXF1aXJlcyB1c2VyIGF1dGhlbnRpY2F0aW9uLjwvcD4NCjwvQk9EWT48L0hUTUw+DQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPBody>
            </HTTPResponse>
            <HTTPTask id="35" hostname="omniconv" path="/omni/dwr/util.js" url="http://omniconv/omni/dwr/util.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8634" connectionId="2016" origin="Authentication" startDateTime="2018-08-14T12:26:56.724-07:00" startTime="2264" endTime="2285" sendTime="19" waitTime="0" receiveTime="0">
              <HTTPRequest method="GET">
                <HTTPHeaders>
                  <HTTPHeaderEntity name="Referer" index="0">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="User-Agent" index="1">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Accept-Encoding" index="2">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Accept-Language" index="3">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>ZW4tVVM=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Accept" index="4">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>Ki8q</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Connection" index="5">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Host" index="6">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>b21uaWNvbnY=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Authorization" index="7">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>TlRMTSBUbFJNVFZOVFVBQURBQUFBR0FBWUFKd0FBQUFZQUJnQXRBQUFBQllBRmdCQUFBQUFLQUFvQUZZQUFBQWVBQjRBZmdBQUFBQUFBQURNQUFBQUJZS0lva1FBVHdCREFERUFMZ0JYQUVFQUxnQk1BRU1BVEFCekFIWUFZd0IzQUdFQWRRQjBBR1VBY3dCMEFIVUFjd0JsQUhJQU1BQXhBR1FBYndCakFERUFSQUJQQUVNQU1RQmFBRlFBVlFCTkFERUFNUUEyQURnQU53QTRBREVBd1h5TUJrZG9pQklBQUFBQUFBQUFBQUFBQUFBQUFBQUFqYTRYOEpwc0g2QkZmK2tqVldPN09reUtKWTVEVzVRUA==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Cookie" index="8">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPAllHeaders>
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>R0VUIC9vbW5pL2R3ci91dGlsLmpzIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkF1dGhvcml6YXRpb246IE5UTE0gVGxSTVRWTlRVQUFEQUFBQUdBQVlBSndBQUFBWUFCZ0F0QUFBQUJZQUZnQkFBQUFBS0FBb0FGWUFBQUFlQUI0QWZnQUFBQUFBQUFETUFBQUFCWUtJb2tRQVR3QkRBREVBTGdCWEFFRUFMZ0JNQUVNQVRBQnpBSFlBWXdCM0FHRUFkUUIwQUdVQWN3QjBBSFVBY3dCbEFISUFNQUF4QUdRQWJ3QmpBREVBUkFCUEFFTUFNUUJhQUZRQVZRQk5BREVBTVFBMkFEZ0FOd0E0QURFQXdYeU1Ca2RvaUJJQUFBQUFBQUFBQUFBQUFBQUFBQUFBamE0WDhKcHNINkJGZitralZXTzdPa3lLSlk1RFc1UVANCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPAllHeaders>
                  <HTTPCookies>
                    <HTTPHeaderEntity name="JSESSIONID" index="0">
                      <HTTPDataSet>
                        <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                          <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                        </HTTPData>
                      </HTTPDataSet>
                      <IsExternalData>false</IsExternalData>
                    </HTTPHeaderEntity>
                  </HTTPCookies>
                </HTTPHeaders>
              </HTTPRequest>
              <HTTPResponse>
                <HTTPHeaders>
                  <HTTPHeaderEntity name="Content-Type" index="0">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>dGV4dC9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Content-Encoding" index="1">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>Z3ppcA==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Content-Language" index="2">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>ZW4tVVM=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Last-Modified" index="3">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>TW9uLCAxMyBBdWcgMjAxOCAxNjoxMzo0NSBHTVQ=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="ETag" index="4">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>IjE1MzQxNzY4MjUwMDAi</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Vary" index="5">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Server" index="6">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Server" index="7">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>V2ViU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlci83LjA=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Persistent-Auth" index="8">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>dHJ1ZQ==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="X-Powered-By" index="9">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>QVNQLk5FVA==</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Date" index="10">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPHeaderEntity name="Connection" index="11">
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>Y2xvc2U=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPHeaderEntity>
                  <HTTPAllHeaders>
                    <HTTPDataSet>
                      <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                        <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MYW5ndWFnZTogZW4tVVMNCkxhc3QtTW9kaWZpZWQ6IE1vbiwgMTMgQXVnIDIwMTggMTY6MTM6NDUgR01UDQpFVGFnOiAiMTUzNDE3NjgyNTAwMCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KU2VydmVyOiBXZWJTcGhlcmUgQXBwbGljYXRpb24gU2VydmVyLzcuMA0KUGVyc2lzdGVudC1BdXRoOiB0cnVlDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb25uZWN0aW9uOiBjbG9zZQ0KDQo=</ActualData>
                      </HTTPData>
                    </HTTPDataSet>
                    <IsExternalData>false</IsExternalData>
                  </HTTPAllHeaders>
                </HTTPHeaders>
                <HTTPBody>
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>LyoKICogQ29weXJpZ2h0IDIwMDUgSm9lIFdhbGtlcgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8qKgogKiBEZWNsYXJlIGFuIG9iamVjdCB0byB3aGljaCB3ZSBjYW4gYWRkIHJlYWwgZnVuY3Rpb25zLgogKi8KaWYgKGR3ciA9PSBudWxsKSB2YXIgZHdyID0ge307CmlmIChkd3IudXRpbCA9PSBudWxsKSBkd3IudXRpbCA9IHt9OwppZiAoRFdSVXRpbCA9PSBudWxsKSB2YXIgRFdSVXRpbCA9IGR3ci51dGlsOwoKLyoqIEBwcml2YXRlIFRoZSBmbGFnIHdlIHVzZSB0byBkZWNpZGUgaWYgd2Ugc2hvdWxkIGVzY2FwZSBodG1sICovCmR3ci51dGlsLl9lc2NhcGVIdG1sID0gdHJ1ZTsKCi8qKgogKiBTZXQgdGhlIGdsb2JhbCBlc2NhcGVIdG1sIGZsYWcKICovCmR3ci51dGlsLnNldEVzY2FwZUh0bWwgPSBmdW5jdGlvbihlc2NhcGVIdG1sKSB7CiAgZHdyLnV0aWwuX2VzY2FwZUh0bWwgPSBlc2NhcGVIdG1sOwp9OwoKLyoqIEBwcml2YXRlIFdvcmsgb3V0IGZyb20gYW4gb3B0aW9ucyBsaXN0IGFuZCBnbG9iYWwgc2V0dGluZ3MgaWYgd2Ugc2hvdWxkIGJlIGVzY2NhcGluZyAqLwpkd3IudXRpbC5fc2hvdWxkRXNjYXBlSHRtbCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmVzY2FwZUh0bWwgIT0gbnVsbCkgewogICAgcmV0dXJuIG9wdGlvbnMuZXNjYXBlSHRtbDsKICB9CiAgcmV0dXJuIGR3ci51dGlsLl9lc2NhcGVIdG1sOwp9OwoKLyoqCiAqIFJldHVybiBhIHN0cmluZyB3aXRoICYsIDwgYW5kID4gcmVwbGFjZWQgd2l0aCB0aGVpciBlbnRpdGllcwogKiBAc2VlIFRPRE8KICovCmR3ci51dGlsLmVzY2FwZUh0bWwgPSBmdW5jdGlvbihvcmlnaW5hbCkgewogIHJldHVybiBvcmlnaW5hbC5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7Cn07CgovKioKICogUmVwbGFjZSBjb21tb24gWE1MIGVudGl0aWVzIHdpdGggY2hhcmFjdGVycyAoc2VlIGR3ci51dGlsLmVzY2FwZUh0bWwoKSkKICogQHNlZSBUT0RPCiAqLwpkd3IudXRpbC51bmVzY2FwZUh0bWwgPSBmdW5jdGlvbihvcmlnaW5hbCkgewogIHJldHVybiBvcmlnaW5hbC5yZXBsYWNlKC8mYW1wOy9nLCcmJykucmVwbGFjZSgvJmx0Oy9nLCc8JykucmVwbGFjZSgvJmd0Oy9nLCc+Jyk7Cn07CgovKioKICogUmVwbGFjZSBjaGFyYWN0ZXJzIGRhbmdlcm91cyBmb3IgWFNTIHJlYXNvbnMgd2l0aCB2aXN1YWxseSBzaW1pbGFyIGNoYXJhY3RlcnMKICogQHNlZSBUT0RPCiAqLwpkd3IudXRpbC5yZXBsYWNlWG1sQ2hhcmFjdGVycyA9IGZ1bmN0aW9uKG9yaWdpbmFsKSB7CiAgb3JpZ2luYWwgPSBvcmlnaW5hbC5yZXBsYWNlKCImIiwgIisiKTsKICBvcmlnaW5hbCA9IG9yaWdpbmFsLnJlcGxhY2UoIjwiLCAiXHUyMDM5Iik7CiAgb3JpZ2luYWwgPSBvcmlnaW5hbC5yZXBsYWNlKCI+IiwgIlx1MjAzQSIpOwogIG9yaWdpbmFsID0gb3JpZ2luYWwucmVwbGFjZSgiXCciLCAiXHUyMDE4Iik7CiAgb3JpZ2luYWwgPSBvcmlnaW5hbC5yZXBsYWNlKCJcIiIsICJcdTIwMUMiKTsKICByZXR1cm4gb3JpZ2luYWw7Cn07CgovKioKICogUmV0dXJuIHRydWUgaWZmIHRoZSBpbnB1dCBzdHJpbmcgY29udGFpbnMgYW55IFhTUyBkYW5nZXJvdXMgY2hhcmFjdGVycwogKiBAc2VlIFRPRE8KICovCmR3ci51dGlsLmNvbnRhaW5zWHNzUmlza3lDaGFyYWN0ZXJzID0gZnVuY3Rpb24ob3JpZ2luYWwpIHsKICByZXR1cm4gKG9yaWdpbmFsLmluZGV4T2YoJyYnKSAhPSAtMQogICAgfHwgb3JpZ2luYWwuaW5kZXhPZignPCcpICE9IC0xCiAgICB8fCBvcmlnaW5hbC5pbmRleE9mKCc+JykgIT0gLTEKICAgIHx8IG9yaWdpbmFsLmluZGV4T2YoJ1wnJykgIT0gLTEKICAgIHx8IG9yaWdpbmFsLmluZGV4T2YoJ1wiJykgIT0gLTEpOwp9OwoKLyoqCiAqIEVuYWJsZXMgeW91IHRvIHJlYWN0IHRvIHJldHVybiBiZWluZyBwcmVzc2VkIGluIGFuIGlucHV0CiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsL3NlbGVjdHJhbmdlCiAqLwpkd3IudXRpbC5vblJldHVybiA9IGZ1bmN0aW9uKGV2ZW50LCBhY3Rpb24pIHsKICBpZiAoIWV2ZW50KSBldmVudCA9IHdpbmRvdy5ldmVudDsKICBpZiAoZXZlbnQgJiYgZXZlbnQua2V5Q29kZSAmJiBldmVudC5rZXlDb2RlID09IDEzKSBhY3Rpb24oKTsKfTsKCi8qKgogKiBTZWxlY3QgYSBzcGVjaWZpYyByYW5nZSBpbiBhIHRleHQgYm94LiBVc2VmdWwgZm9yICdnb29nbGUgc3VnZ2VzdCcgdHlwZSBmdW5jdGlvbnMuCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsL3NlbGVjdHJhbmdlCiAqLwpkd3IudXRpbC5zZWxlY3RSYW5nZSA9IGZ1bmN0aW9uKGVsZSwgc3RhcnQsIGVuZCkgewogIGVsZSA9IGR3ci51dGlsLl9nZXRFbGVtZW50QnlJZChlbGUsICJzZWxlY3RSYW5nZSgpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgaWYgKGVsZS5zZXRTZWxlY3Rpb25SYW5nZSkgewogICAgZWxlLnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBlbmQpOwogIH0KICBlbHNlIGlmIChlbGUuY3JlYXRlVGV4dFJhbmdlKSB7CiAgICB2YXIgcmFuZ2UgPSBlbGUuY3JlYXRlVGV4dFJhbmdlKCk7CiAgICByYW5nZS5tb3ZlU3RhcnQoImNoYXJhY3RlciIsIHN0YXJ0KTsKICAgIHJhbmdlLm1vdmVFbmQoImNoYXJhY3RlciIsIGVuZCAtIGVsZS52YWx1ZS5sZW5ndGgpOwogICAgcmFuZ2Uuc2VsZWN0KCk7CiAgfQogIGVsZS5mb2N1cygpOwp9OwoKLyoqCiAqIEZpbmQgdGhlIGVsZW1lbnQgaW4gdGhlIGN1cnJlbnQgSFRNTCBkb2N1bWVudCB3aXRoIHRoZSBnaXZlbiBpZCBvciBpZHMKICogQHNlZSBodHRwOi8vZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL3V0aWwvJAogKi8KaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKSB7CiAgZHdyLnV0aWwuYnlJZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsZW1lbnRzID0gbmV3IEFycmF5KCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZWxlbWVudCA9IGFyZ3VtZW50c1tpXTsKICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09ICdzdHJpbmcnKSB7CiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpOwogICAgICB9CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgfQogICAgICBlbGVtZW50cy5wdXNoKGVsZW1lbnQpOwogICAgfQogICAgcmV0dXJuIGVsZW1lbnRzOwogIH07Cn0KZWxzZSBpZiAoZG9jdW1lbnQuYWxsKSB7CiAgZHdyLnV0aWwuYnlJZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsZW1lbnRzID0gbmV3IEFycmF5KCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZWxlbWVudCA9IGFyZ3VtZW50c1tpXTsKICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09ICdzdHJpbmcnKSB7CiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmFsbFtlbGVtZW50XTsKICAgICAgfQogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICAgIH0KICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50czsKICB9Owp9CgovKioKICogQWxpYXMgJCB0byBkd3IudXRpbC5ieUlkCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsLyQKICovCmlmICh3aW5kb3dbJyQnXSA9PSBudWxsKSB7CiAgd2luZG93WyckJ10gPSBkd3IudXRpbC5ieUlkOwp9CgovKioKICogVGhpcyBmdW5jdGlvbiBwcmV0dHktcHJpbnRzIHNpbXBsZSBkYXRhIG9yIHdob2xlIG9iamVjdCBncmFwaHMsIGYgZXggYXMgYW4gYWlkIGluIGRlYnVnZ2luZy4KICogQHNlZSBodHRwOi8vZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL3V0aWwvdG9kZXNjcmlwdGl2ZXN0cmluZwogKi8KZHdyLnV0aWwudG9EZXNjcmlwdGl2ZVN0cmluZyA9IGZ1bmN0aW9uKGRhdGEsIHNob3dMZXZlbHMsIG9wdGlvbnMpIHsKICBpZiAoc2hvd0xldmVscyA9PT0gdW5kZWZpbmVkKSBzaG93TGV2ZWxzID0gMTsKICB2YXIgb3B0ID0ge307CiAgaWYgKGR3ci51dGlsLl9pc09iamVjdChvcHRpb25zKSkgb3B0ID0gb3B0aW9uczsKICB2YXIgZGVmYXVsdG9wdGlvbnMgPSB7CiAgICBlc2NhcGVIdG1sOmZhbHNlLAogICAgYmFzZUluZGVudDogIiIsCiAgICBjaGlsZEluZGVudDogIlx1MDBBMFx1MDBBMCIsCiAgICBsaW5lVGVybWluYXRvcjogIlxuIiwKICAgIG9uZUxpbmVNYXhJdGVtczogNSwKICAgIHNob3J0U3RyaW5nTWF4TGVuZ3RoOiAxMywKICAgIHByb3BlcnR5TmFtZU1heExlbmd0aDogMzAgCiAgfTsKICBmb3IgKHZhciBwIGluIGRlZmF1bHRvcHRpb25zKSB7CiAgICBpZiAoIShwIGluIG9wdCkpIHsKICAgICAgb3B0W3BdID0gZGVmYXVsdG9wdGlvbnNbcF07CiAgICB9CiAgfQoKICB2YXIgc2tpcERvbVByb3BlcnRpZXMgPSB7CiAgICBkb2N1bWVudDp0cnVlLCBvd25lckRvY3VtZW50OnRydWUsCiAgICBhbGw6dHJ1ZSwKICAgIHBhcmVudEVsZW1lbnQ6dHJ1ZSwgcGFyZW50Tm9kZTp0cnVlLCBvZmZzZXRQYXJlbnQ6dHJ1ZSwKICAgIGNoaWxkcmVuOnRydWUsIGZpcnN0Q2hpbGQ6dHJ1ZSwgbGFzdENoaWxkOnRydWUsCiAgICBwcmV2aW91c1NpYmxpbmc6dHJ1ZSwgbmV4dFNpYmxpbmc6dHJ1ZSwKICAgIGlubmVySFRNTDp0cnVlLCBvdXRlckhUTUw6dHJ1ZSwKICAgIGlubmVyVGV4dDp0cnVlLCBvdXRlclRleHQ6dHJ1ZSwgdGV4dENvbnRlbnQ6dHJ1ZSwKICAgIGF0dHJpYnV0ZXM6dHJ1ZSwKICAgIHN0eWxlOnRydWUsIGN1cnJlbnRTdHlsZTp0cnVlLCBydW50aW1lU3R5bGU6dHJ1ZSwKICAgIHBhcmVudFRleHRFZGl0OnRydWUKICB9OwogIAogIGZ1bmN0aW9uIHJlY3Vyc2l2ZShkYXRhLCBzaG93TGV2ZWxzLCBpbmRlbnREZXB0aCwgb3B0aW9ucykgewogICAgdmFyIHJlcGx5ID0gIiI7CiAgICB0cnkgewogICAgICAvLyBzdHJpbmcKICAgICAgaWYgKHR5cGVvZiBkYXRhID09ICJzdHJpbmciKSB7CiAgICAgICAgdmFyIHN0ciA9IGRhdGE7CiAgICAgICAgaWYgKHNob3dMZXZlbHMgPT0gMCAmJiBzdHIubGVuZ3RoID4gb3B0aW9ucy5zaG9ydFN0cmluZ01heExlbmd0aCkKICAgICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgb3B0aW9ucy5zaG9ydFN0cmluZ01heExlbmd0aC0zKSArICIuLi4iOwogICAgICAgIGlmIChvcHRpb25zLmVzY2FwZUh0bWwpIHsKICAgICAgICAgIC8vIERvIHRoZSBlc2NhcGUgc2VwYXJhdGVseSBmb3IgZXZlcnkgbGluZSBhcyBlc2NhcGVIdG1sKCkgb24gc29tZSAKICAgICAgICAgIC8vIGJyb3dzZXJzIChJRSkgd2lsbCBzdHJpcCBsaW5lIGJyZWFrcyBhbmQgd2Ugd2FudCB0byBwcmVzZXJ2ZSB0aGVtCiAgICAgICAgICB2YXIgbGluZXMgPSBzdHIuc3BsaXQoIlxuIik7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSBsaW5lc1tpXSA9IGR3ci51dGlsLmVzY2FwZUh0bWwobGluZXNbaV0pOwogICAgICAgICAgc3RyID0gbGluZXMuam9pbigiXG4iKTsKICAgICAgICB9CiAgICAgICAgaWYgKHNob3dMZXZlbHMgPT0gMCkgeyAvLyBTaG9ydCBmb3JtYXQKICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cbnxccnxcdC9nLCBmdW5jdGlvbihjaCkgewogICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgICAgY2FzZSAiXG4iOiByZXR1cm4gIlxcbiI7CiAgICAgICAgICAgICAgY2FzZSAiXHIiOiByZXR1cm4gIiI7CiAgICAgICAgICAgICAgY2FzZSAiXHQiOiByZXR1cm4gIlxcdCI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gTG9uZyBmb3JtYXQKICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cbnxccnxcdC9nLCBmdW5jdGlvbihjaCkgewogICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgICAgY2FzZSAiXG4iOiByZXR1cm4gb3B0aW9ucy5saW5lVGVybWluYXRvciArIGluZGVudChpbmRlbnREZXB0aCsxLCBvcHRpb25zKTsKICAgICAgICAgICAgICBjYXNlICJcciI6IHJldHVybiAiIjsKICAgICAgICAgICAgICBjYXNlICJcdCI6IHJldHVybiAiXFx0IjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJlcGx5ID0gJyInICsgc3RyICsgJyInOwogICAgICB9CiAgICAgIAogICAgICAvLyBmdW5jdGlvbgogICAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgcmVwbHkgPSAiZnVuY3Rpb24iOwogICAgICB9CiAgICAKICAgICAgLy8gQXJyYXkKICAgICAgZWxzZSBpZiAoZHdyLnV0aWwuX2lzQXJyYXkoZGF0YSkpIHsKICAgICAgICBpZiAoc2hvd0xldmVscyA9PSAwKSB7IC8vIFNob3J0IGZvcm1hdCAoZG9uJ3Qgc2hvdyBpdGVtcykKICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApCiAgICAgICAgICAgIHJlcGx5ID0gIlsuLi5dIjsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcmVwbHkgPSAiW10iOwogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gTG9uZyBmb3JtYXQgKHNob3cgaXRlbXMpCiAgICAgICAgICB2YXIgc3RyYXJyID0gW107CiAgICAgICAgICBzdHJhcnIucHVzaCgiWyIpOwogICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoISAoaSBpbiBkYXRhKSkgY29udGludWU7CiAgICAgICAgICAgIHZhciBpdGVtdmFsdWUgPSBkYXRhW2ldOwogICAgICAgICAgICBpZiAoY291bnQgPiAwKSBzdHJhcnIucHVzaCgiLCAiKTsKICAgICAgICAgICAgaWYgKHNob3dMZXZlbHMgPT0gMSkgeyAvLyBPbmUtbGluZSBmb3JtYXQKICAgICAgICAgICAgICBpZiAoY291bnQgPT0gb3B0aW9ucy5vbmVMaW5lTWF4SXRlbXMpIHsKICAgICAgICAgICAgICAgIHN0cmFyci5wdXNoKCIuLi4iKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgLy8gTXVsdGktbGluZSBmb3JtYXQKICAgICAgICAgICAgICBzdHJhcnIucHVzaChvcHRpb25zLmxpbmVUZXJtaW5hdG9yICsgaW5kZW50KGluZGVudERlcHRoKzEsIG9wdGlvbnMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaSAhPSBjb3VudCkgewogICAgICAgICAgICAgIHN0cmFyci5wdXNoKGkpOwogICAgICAgICAgICAgIHN0cmFyci5wdXNoKCI6Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RyYXJyLnB1c2gocmVjdXJzaXZlKGl0ZW12YWx1ZSwgc2hvd0xldmVscy0xLCBpbmRlbnREZXB0aCsxLCBvcHRpb25zKSk7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2hvd0xldmVscyA+IDEpIHN0cmFyci5wdXNoKG9wdGlvbnMubGluZVRlcm1pbmF0b3IgKyBpbmRlbnQoaW5kZW50RGVwdGgsIG9wdGlvbnMpKTsKICAgICAgICAgIHN0cmFyci5wdXNoKCJdIik7CiAgICAgICAgICByZXBseSA9IHN0cmFyci5qb2luKCIiKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgCiAgICAgIC8vIE9iamVjdHMgZXhjZXB0IERhdGUKICAgICAgZWxzZSBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGEpICYmICFkd3IudXRpbC5faXNEYXRlKGRhdGEpKSB7CiAgICAgICAgaWYgKHNob3dMZXZlbHMgPT0gMCkgeyAvLyBTaG9ydCBmb3JtYXQgKGRvbid0IHNob3cgcHJvcGVydGllcykKICAgICAgICAgIHJlcGx5ID0gZHdyLnV0aWwuX2RldGFpbGVkVHlwZU9mKGRhdGEpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gTG9uZyBmb3JtYXQgKHNob3cgcHJvcGVydGllcykKICAgICAgICAgIHZhciBzdHJhcnIgPSBbXTsKICAgICAgICAgIGlmIChkd3IudXRpbC5fZGV0YWlsZWRUeXBlT2YoZGF0YSkgIT0gIk9iamVjdCIpIHsKICAgICAgICAgICAgc3RyYXJyLnB1c2goZHdyLnV0aWwuX2RldGFpbGVkVHlwZU9mKGRhdGEpKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhLnZhbHVlT2YoKSAhPSAib2JqZWN0IikgewogICAgICAgICAgICAgIHN0cmFyci5wdXNoKCI6Iik7CiAgICAgICAgICAgICAgc3RyYXJyLnB1c2gocmVjdXJzaXZlKGRhdGEudmFsdWVPZigpLCAxLCBpbmRlbnREZXB0aCwgb3B0aW9ucykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cmFyci5wdXNoKCIgIik7CiAgICAgICAgICB9CiAgICAgICAgICBzdHJhcnIucHVzaCgieyIpOwogICAgICAgICAgdmFyIGlzRG9tT2JqZWN0ID0gZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQoZGF0YSk7IAogICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gZGF0YSkgewogICAgICAgICAgICB2YXIgcHJvcHZhbHVlID0gZGF0YVtwcm9wXTsKICAgICAgICAgICAgaWYgKGlzRG9tT2JqZWN0KSB7CiAgICAgICAgICAgICAgaWYgKCFwcm9wdmFsdWUpIGNvbnRpbnVlOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcHZhbHVlID09ICJmdW5jdGlvbiIpIGNvbnRpbnVlOwogICAgICAgICAgICAgIGlmIChza2lwRG9tUHJvcGVydGllc1twcm9wXSkgY29udGludWU7CiAgICAgICAgICAgICAgaWYgKHByb3AudG9VcHBlckNhc2UoKSA9PSBwcm9wKSBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY291bnQgPiAwKSBzdHJhcnIucHVzaCgiLCAiKTsKICAgICAgICAgICAgaWYgKHNob3dMZXZlbHMgPT0gMSkgeyAvLyBPbmUtbGluZSBmb3JtYXQKICAgICAgICAgICAgICBpZiAoY291bnQgPT0gb3B0aW9ucy5vbmVMaW5lTWF4SXRlbXMpIHsKICAgICAgICAgICAgICAgIHN0cmFyci5wdXNoKCIuLi4iKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgLy8gTXVsdGktbGluZSBmb3JtYXQKICAgICAgICAgICAgICBzdHJhcnIucHVzaChvcHRpb25zLmxpbmVUZXJtaW5hdG9yICsgaW5kZW50KGluZGVudERlcHRoKzEsIG9wdGlvbnMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHJhcnIucHVzaChwcm9wLmxlbmd0aCA+IG9wdGlvbnMucHJvcGVydHlOYW1lTWF4TGVuZ3RoID8gcHJvcC5zdWJzdHJpbmcoMCwgb3B0aW9ucy5wcm9wZXJ0eU5hbWVNYXhMZW5ndGgtMykgKyAiLi4uIiA6IHByb3ApOwogICAgICAgICAgICBzdHJhcnIucHVzaCgiOiIpOwogICAgICAgICAgICBzdHJhcnIucHVzaChyZWN1cnNpdmUocHJvcHZhbHVlLCBzaG93TGV2ZWxzLTEsIGluZGVudERlcHRoKzEsIG9wdGlvbnMpKTsKICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzaG93TGV2ZWxzID4gMSAmJiBjb3VudCA+IDApIHN0cmFyci5wdXNoKG9wdGlvbnMubGluZVRlcm1pbmF0b3IgKyBpbmRlbnQoaW5kZW50RGVwdGgsIG9wdGlvbnMpKTsKICAgICAgICAgIHN0cmFyci5wdXNoKCJ9Iik7CiAgICAgICAgICByZXBseSA9IHN0cmFyci5qb2luKCIiKTsKICAgICAgICB9CiAgICAgIH0KICAKICAgICAgLy8gdW5kZWZpbmVkLCBudWxsLCBudW1iZXIsIGJvb2xlYW4sIERhdGUKICAgICAgZWxzZSB7CiAgICAgICAgcmVwbHkgPSAiIiArIGRhdGE7CiAgICAgIH0KICAKICAgICAgcmV0dXJuIHJlcGx5OwogICAgfQogICAgY2F0Y2goZXJyKSB7CiAgICAgIHJldHVybiAoZXJyLm1lc3NhZ2UgPyBlcnIubWVzc2FnZSA6ICIiK2Vycik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbmRlbnQoY291bnQsIG9wdGlvbnMpIHsKICAgIHZhciBzdHJhcnIgPSBbXTsKICAgIHN0cmFyci5wdXNoKG9wdGlvbnMuYmFzZUluZGVudCk7CiAgICBmb3IgKHZhciBpPTA7IGk8Y291bnQ7IGkrKykgewogICAgICBzdHJhcnIucHVzaChvcHRpb25zLmNoaWxkSW5kZW50KTsKICAgIH0KICAgIHJldHVybiBzdHJhcnIuam9pbigiIik7CiAgfTsKICAKICByZXR1cm4gcmVjdXJzaXZlKGRhdGEsIHNob3dMZXZlbHMsIDAsIG9wdCk7Cn07CgovKioKICogU2V0dXAgYSBHTWFpbCBzdHlsZSBsb2FkaW5nIG1lc3NhZ2UuCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsL3VzZWxvYWRpbmdtZXNzYWdlCiAqLwpkd3IudXRpbC51c2VMb2FkaW5nTWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICB2YXIgbG9hZGluZ01lc3NhZ2U7CiAgaWYgKG1lc3NhZ2UpIGxvYWRpbmdNZXNzYWdlID0gbWVzc2FnZTsKICBlbHNlIGxvYWRpbmdNZXNzYWdlID0gIkxvYWRpbmciOwogIGR3ci5lbmdpbmUuc2V0UHJlSG9vayhmdW5jdGlvbigpIHsKICAgIHZhciBkaXNhYmxlZFpvbmUgPSBkd3IudXRpbC5ieUlkKCdkaXNhYmxlZFpvbmUnKTsKICAgIGlmICghZGlzYWJsZWRab25lKSB7CiAgICAgIGRpc2FibGVkWm9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkaXNhYmxlZFpvbmUuc2V0QXR0cmlidXRlKCdpZCcsICdkaXNhYmxlZFpvbmUnKTsKICAgICAgZGlzYWJsZWRab25lLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgZGlzYWJsZWRab25lLnN0eWxlLnpJbmRleCA9ICIxMDAwIjsKICAgICAgZGlzYWJsZWRab25lLnN0eWxlLmxlZnQgPSAiMHB4IjsKICAgICAgZGlzYWJsZWRab25lLnN0eWxlLnRvcCA9ICIwcHgiOwogICAgICBkaXNhYmxlZFpvbmUuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgIGRpc2FibGVkWm9uZS5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlzYWJsZWRab25lKTsKICAgICAgdmFyIG1lc3NhZ2Vab25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIG1lc3NhZ2Vab25lLnNldEF0dHJpYnV0ZSgnaWQnLCAnbWVzc2FnZVpvbmUnKTsKICAgICAgbWVzc2FnZVpvbmUuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICBtZXNzYWdlWm9uZS5zdHlsZS50b3AgPSAiMHB4IjsKICAgICAgbWVzc2FnZVpvbmUuc3R5bGUucmlnaHQgPSAiMHB4IjsKICAgICAgbWVzc2FnZVpvbmUuc3R5bGUuYmFja2dyb3VuZCA9ICJyZWQiOwogICAgICBtZXNzYWdlWm9uZS5zdHlsZS5jb2xvciA9ICJ3aGl0ZSI7CiAgICAgIG1lc3NhZ2Vab25lLnN0eWxlLmZvbnRGYW1pbHkgPSAiQXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWYiOwogICAgICBtZXNzYWdlWm9uZS5zdHlsZS5wYWRkaW5nID0gIjRweCI7CiAgICAgIGRpc2FibGVkWm9uZS5hcHBlbmRDaGlsZChtZXNzYWdlWm9uZSk7CiAgICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobG9hZGluZ01lc3NhZ2UpOwogICAgICBtZXNzYWdlWm9uZS5hcHBlbmRDaGlsZCh0ZXh0KTsKICAgICAgZHdyLnV0aWwuX2Rpc2FibGVkWm9uZVVzZUNvdW50ID0gMTsKICAgIH0KICAgIGVsc2UgewogICAgICBkd3IudXRpbC5ieUlkKCdtZXNzYWdlWm9uZScpLmlubmVySFRNTCA9IGxvYWRpbmdNZXNzYWdlOwogICAgICBkaXNhYmxlZFpvbmUuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsKICAgICAgZHdyLnV0aWwuX2Rpc2FibGVkWm9uZVVzZUNvdW50Kys7CiAgICB9CiAgfSk7CiAgZHdyLmVuZ2luZS5zZXRQb3N0SG9vayhmdW5jdGlvbigpIHsKICAgIGR3ci51dGlsLl9kaXNhYmxlZFpvbmVVc2VDb3VudC0tOwogICAgaWYgKGR3ci51dGlsLl9kaXNhYmxlZFpvbmVVc2VDb3VudCA9PSAwKSB7CiAgICAgIGR3ci51dGlsLmJ5SWQoJ2Rpc2FibGVkWm9uZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgIH0KICB9KTsKfTsKCi8qKgogKiBTZXQgYSBnbG9iYWwgaGlnaGxpZ2h0IGhhbmRsZXIKICovCmR3ci51dGlsLnNldEhpZ2hsaWdodEhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7CiAgZHdyLnV0aWwuX2hpZ2hsaWdodEhhbmRsZXIgPSBoYW5kbGVyOwp9OwoKLyoqCiAqIEFuIGV4YW1wbGUgaGlnaGxpZ2h0IGhhbmRsZXIKICovCmR3ci51dGlsLnllbGxvd0ZhZGVIaWdobGlnaHRIYW5kbGVyID0gZnVuY3Rpb24oZWxlKSB7CiAgZHdyLnV0aWwuX3llbGxvd0ZhZGVQcm9jZXNzKGVsZSwgMCk7Cn07CmR3ci51dGlsLl95ZWxsb3dGYWRlU3RlcHMgPSBbICJkMCIsICJiMCIsICJhMCIsICI5MCIsICI5OCIsICJhMCIsICJhOCIsICJiMCIsICJiOCIsICJjMCIsICJjOCIsICJkMCIsICJkOCIsICJlMCIsICJlOCIsICJmMCIsICJmOCIgXTsKZHdyLnV0aWwuX3llbGxvd0ZhZGVQcm9jZXNzID0gZnVuY3Rpb24oZWxlLCBjb2xvckluZGV4KSB7CiAgZWxlID0gZHdyLnV0aWwuYnlJZChlbGUpOwogIGlmIChjb2xvckluZGV4IDwgZHdyLnV0aWwuX3llbGxvd0ZhZGVTdGVwcy5sZW5ndGgpIHsKICAgIGVsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI2ZmZmYiICsgZHdyLnV0aWwuX3llbGxvd0ZhZGVTdGVwc1tjb2xvckluZGV4XTsKICAgIHNldFRpbWVvdXQoImR3ci51dGlsLl95ZWxsb3dGYWRlUHJvY2VzcygnIiArIGVsZS5pZCArICInLCIgKyAoY29sb3JJbmRleCArIDEpICsgIikiLCAyMDApOwogIH0KICBlbHNlIHsKICAgIGVsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAidHJhbnNwYXJlbnQiOwogIH0KfTsKCi8qKgogKiBBbiBleGFtcGxlIGhpZ2hsaWdodCBoYW5kbGVyCiAqLwpkd3IudXRpbC5ib3JkZXJGYWRlSGlnaGxpZ2h0SGFuZGxlciA9IGZ1bmN0aW9uKGVsZSkgewogIGVsZS5zdHlsZS5ib3JkZXJXaWR0aCA9ICIycHgiOwogIGVsZS5zdHlsZS5ib3JkZXJTdHlsZSA9ICJzb2xpZCI7CiAgZHdyLnV0aWwuX2JvcmRlckZhZGVQcm9jZXNzKGVsZSwgMCk7Cn07CmR3ci51dGlsLl9ib3JkZXJGYWRlU3RlcHMgPSBbICJkMCIsICJiMCIsICJhMCIsICI5MCIsICI5OCIsICJhMCIsICJhOCIsICJiMCIsICJiOCIsICJjMCIsICJjOCIsICJkMCIsICJkOCIsICJlMCIsICJlOCIsICJmMCIsICJmOCIgXTsKZHdyLnV0aWwuX2JvcmRlckZhZGVQcm9jZXNzID0gZnVuY3Rpb24oZWxlLCBjb2xvckluZGV4KSB7CiAgZWxlID0gZHdyLnV0aWwuYnlJZChlbGUpOwogIGlmIChjb2xvckluZGV4IDwgZHdyLnV0aWwuX2JvcmRlckZhZGVTdGVwcy5sZW5ndGgpIHsKICAgIGVsZS5zdHlsZS5ib3JkZXJDb2xvciA9ICIjZmYiICsgZHdyLnV0aWwuX2JvcmRlckZhZGVTdGVwc1tjb2xvckluZGV4XSArIGR3ci51dGlsLl9ib3JkZXJGYWRlU3RlcHNbY29sb3JJbmRleF07CiAgICBzZXRUaW1lb3V0KCJkd3IudXRpbC5fYm9yZGVyRmFkZVByb2Nlc3MoJyIgKyBlbGUuaWQgKyAiJywiICsgKGNvbG9ySW5kZXggKyAxKSArICIpIiwgMjAwKTsKICB9CiAgZWxzZSB7CiAgICBlbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gInRyYW5zcGFyZW50IjsKICB9Cn07CgovKioKICogQSBmb2N1cyBoaWdobGlnaHQgaGFuZGxlcgogKi8KZHdyLnV0aWwuZm9jdXNIaWdobGlnaHRIYW5kbGVyID0gZnVuY3Rpb24oZWxlKSB7CiAgdHJ5IHsKICAgIGVsZS5mb2N1cygpOwogIH0KICBjYXRjaCAoZXgpIHsgLyogaWdub3JlICovIH0KfTsKCi8qKiBAcHJpdmF0ZSB0aGUgY3VycmVudCBnbG9iYWwgaGlnaGxpZ2h0IHN0eWxlICovCmR3ci51dGlsLl9oaWdobGlnaHRIYW5kbGVyID0gbnVsbDsKCi8qKgogKiBIaWdobGlnaHQgdGhhdCBhbiBlbGVtZW50IGhhcyBjaGFuZ2VkCiAqLwpkd3IudXRpbC5oaWdobGlnaHQgPSBmdW5jdGlvbihlbGUsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhpZ2hsaWdodEhhbmRsZXIpIHsKICAgIG9wdGlvbnMuaGlnaGxpZ2h0SGFuZGxlcihkd3IudXRpbC5ieUlkKGVsZSkpOwogIH0KICBlbHNlIGlmIChkd3IudXRpbC5faGlnaGxpZ2h0SGFuZGxlciAhPSBudWxsKSB7CiAgICBkd3IudXRpbC5faGlnaGxpZ2h0SGFuZGxlcihkd3IudXRpbC5ieUlkKGVsZSkpOwogIH0KfTsKCi8qKgogKiBTZXQgdGhlIHZhbHVlIGFuIEhUTUwgZWxlbWVudCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLgogKiBAc2VlIGh0dHA6Ly9nZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvdXRpbC9zZXR2YWx1ZQogKi8KZHdyLnV0aWwuc2V0VmFsdWUgPSBmdW5jdGlvbihlbGUsIHZhbCwgb3B0aW9ucykgewogIGlmICh2YWwgPT0gbnVsbCkgdmFsID0gIiI7CiAgaWYgKG9wdGlvbnMgPT0gbnVsbCkgb3B0aW9ucyA9IHt9OwoKICB2YXIgb3JpZyA9IGVsZTsKICBpZiAodHlwZW9mIGVsZSA9PSAic3RyaW5nIikgewogICAgZWxlID0gZHdyLnV0aWwuYnlJZChlbGUpOwogICAgLy8gV2UgY2FuIHdvcmsgd2l0aCBuYW1lcyBhbmQgbmVlZCB0byBzb21ldGltZXMgZm9yIHJhZGlvIGJ1dHRvbnMsIGFuZCBJRSBoYXMKICAgIC8vIGFuIGFubm95aW5nIGJ1ZyB3aGVyZSBnZXRFbGVtZW50QnlJZCgpIHJldHVybnMgYW4gZWxlbWVudCBiYXNlZCBvbiBuYW1lIGlmCiAgICAvLyBpdCBkb2Vzbid0IGZpbmQgaXQgYnkgaWQuIEhlcmUgd2UgZG9uJ3Qgd2FudCB0byBkbyB0aGF0LCBzbzoKICAgIGlmIChlbGUgJiYgZWxlLmlkICE9IG9yaWcpIGVsZSA9IG51bGw7CiAgfQogIHZhciBub2RlcyA9IG51bGw7CiAgaWYgKGVsZSA9PSBudWxsKSB7CiAgICAvLyBOb3cgaXQgaXMgdGltZSB0byBsb29rIGJ5IG5hbWUKICAgIG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUob3JpZyk7CiAgICBpZiAobm9kZXMubGVuZ3RoID49IDEpIGVsZSA9IG5vZGVzLml0ZW0oMCk7CiAgfQoKICBpZiAoZWxlID09IG51bGwpIHsKICAgIGR3ci51dGlsLl9kZWJ1Zygic2V0VmFsdWUoKSBjYW4ndCBmaW5kIGFuIGVsZW1lbnQgd2l0aCBpZC9uYW1lOiAiICsgb3JpZyArICIuIik7CiAgICByZXR1cm47CiAgfQoKICAvLyBBbGwgcGF0aHMgbm93IGxlYWQgdG8gc29tZSB1cGRhdGUgc28gd2UgaGlnaGxpZ2h0IGEgY2hhbmdlCiAgZHdyLnV0aWwuaGlnaGxpZ2h0KGVsZSwgb3B0aW9ucyk7CgogIGlmIChkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsICJzZWxlY3QiKSkgewogICAgaWYgKGVsZS50eXBlID09ICJzZWxlY3QtbXVsdGlwbGUiICYmIGR3ci51dGlsLl9pc0FycmF5KHZhbCkpIGR3ci51dGlsLl9zZWxlY3RMaXN0SXRlbXMoZWxlLCB2YWwpOwogICAgZWxzZSBkd3IudXRpbC5fc2VsZWN0TGlzdEl0ZW0oZWxlLCB2YWwpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGVsZSwgImlucHV0IikpIHsKICAgIGlmIChlbGUudHlwZSA9PSAicmFkaW8iIHx8IGVsZS50eXBlID09ICJjaGVja2JveCIpIHsKICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5vZGUgPSBub2Rlcy5pdGVtKGkpOwogICAgICAgICAgaWYgKG5vZGUudHlwZSAhPSBlbGUudHlwZSkgY29udGludWU7CiAgICAgICAgICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkodmFsKSkgewogICAgICAgICAgICBub2RlLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWwubGVuZ3RoOyBqKyspCiAgICAgICAgICAgICAgaWYgKHZhbFtqXSA9PSBub2RlLnZhbHVlKSBub2RlLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG5vZGUuY2hlY2tlZCA9IChub2RlLnZhbHVlID09IHZhbCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGVsZS5jaGVja2VkID0gKHZhbCA9PSB0cnVlKTsKICAgICAgfQogICAgfQogICAgZWxzZSBlbGUudmFsdWUgPSB2YWw7CgogICAgcmV0dXJuOwogIH0KCiAgaWYgKGR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGVsZSwgInRleHRhcmVhIikpIHsKICAgIGVsZS52YWx1ZSA9IHZhbDsKICAgIHJldHVybjsKICB9CgogIC8vIElmIHRoZSB2YWx1ZSB0byBiZSBzZXQgaXMgYSBET00gb2JqZWN0IHRoZW4gd2UgdHJ5IGltcG9ydGluZyB0aGUgbm9kZQogIC8vIHJhdGhlciB0aGFuIHNlcmlhbGl6aW5nIGl0IG91dAogIGlmICh2YWwubm9kZVR5cGUpIHsKICAgIGlmICh2YWwubm9kZVR5cGUgPT0gOSAvKk5vZGUuRE9DVU1FTlRfTk9ERSovKSB2YWwgPSB2YWwuZG9jdW1lbnRFbGVtZW50OwogICAgdmFsID0gZHdyLnV0aWwuX2ltcG9ydE5vZGUoZWxlLm93bmVyRG9jdW1lbnQsIHZhbCwgdHJ1ZSk7CiAgICBlbGUuYXBwZW5kQ2hpbGQodmFsKTsKICAgIHJldHVybjsKICB9CgogIC8vIEZhbGwgYmFjayB0byBpbm5lckhUTUwgYW5kIGZyaWVuZHMKICBpZiAoZHdyLnV0aWwuX3Nob3VsZEVzY2FwZUh0bWwob3B0aW9ucykpIHsKICAgIGlmICgidGV4dENvbnRlbnQiIGluIGVsZSkgZWxlLnRleHRDb250ZW50ID0gdmFsLnRvU3RyaW5nKCk7CiAgICBlbHNlIGlmICgiaW5uZXJUZXh0IiBpbiBlbGUpIGVsZS5pbm5lclRleHQgPSB2YWwudG9TdHJpbmcoKTsKICAgIGVsc2UgZWxlLmlubmVySFRNTCA9IGR3ci51dGlsLmVzY2FwZUh0bWwodmFsLnRvU3RyaW5nKCkpOwogIH0KICBlbHNlIHsKICAgIGVsZS5pbm5lckhUTUwgPSB2YWw7CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlIEZpbmQgbXVsdGlwbGUgaXRlbXMgaW4gYSBzZWxlY3QgbGlzdCBhbmQgc2VsZWN0IHRoZW0uIFVzZWQgYnkgc2V0VmFsdWUoKQogKiBAcGFyYW0gZWxlIFRoZSBzZWxlY3QgbGlzdCBpdGVtCiAqIEBwYXJhbSB2YWwgVGhlIGFycmF5IG9mIHZhbHVlcyB0byBzZWxlY3QKICovCmR3ci51dGlsLl9zZWxlY3RMaXN0SXRlbXMgPSBmdW5jdGlvbihlbGUsIHZhbCkgewogIC8vIFdlIGRlYWwgd2l0aCBzZWxlY3QgbGlzdCBlbGVtZW50cyBieSBzZWxlY3RpbmcgdGhlIG1hdGNoaW5nIG9wdGlvbgogIC8vIEJlZ2luIGJ5IHNlYXJjaGluZyB0aHJvdWdoIHRoZSB2YWx1ZXMKICB2YXIgZm91bmQgID0gZmFsc2U7CiAgdmFyIGk7CiAgdmFyIGo7CiAgZm9yIChpID0gMDsgaSA8IGVsZS5vcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICBlbGUub3B0aW9uc1tpXS5zZWxlY3RlZCA9IGZhbHNlOwogICAgZm9yIChqID0gMDsgaiA8IHZhbC5sZW5ndGg7IGorKykgewogICAgICBpZiAoZWxlLm9wdGlvbnNbaV0udmFsdWUgPT0gdmFsW2pdKSB7CiAgICAgICAgZWxlLm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQogIC8vIElmIHRoYXQgZmFpbHMgdGhlbiB0cnkgc2VhcmNoaW5nIHRocm91Z2ggdGhlIHZpc2libGUgdGV4dAogIGlmIChmb3VuZCkgcmV0dXJuOwoKICBmb3IgKGkgPSAwOyBpIDwgZWxlLm9wdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgIGZvciAoaiA9IDA7IGogPCB2YWwubGVuZ3RoOyBqKyspIHsKICAgICAgaWYgKGVsZS5vcHRpb25zW2ldLnRleHQgPT0gdmFsW2pdKSB7CiAgICAgICAgZWxlLm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlIEZpbmQgYW4gaXRlbSBpbiBhIHNlbGVjdCBsaXN0IGFuZCBzZWxlY3QgaXQuIFVzZWQgYnkgc2V0VmFsdWUoKQogKiBAcGFyYW0gZWxlIFRoZSBzZWxlY3QgbGlzdCBpdGVtCiAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIHNlbGVjdAogKi8KZHdyLnV0aWwuX3NlbGVjdExpc3RJdGVtID0gZnVuY3Rpb24oZWxlLCB2YWwpIHsKICAvLyBXZSBkZWFsIHdpdGggc2VsZWN0IGxpc3QgZWxlbWVudHMgYnkgc2VsZWN0aW5nIHRoZSBtYXRjaGluZyBvcHRpb24KICAvLyBCZWdpbiBieSBzZWFyY2hpbmcgdGhyb3VnaCB0aGUgdmFsdWVzCiAgdmFyIGZvdW5kID0gZmFsc2U7CiAgdmFyIGk7CiAgZm9yIChpID0gMDsgaSA8IGVsZS5vcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoZWxlLm9wdGlvbnNbaV0udmFsdWUgPT0gdmFsKSB7CiAgICAgIGVsZS5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgZm91bmQgPSB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICAgIGVsZS5vcHRpb25zW2ldLnNlbGVjdGVkID0gZmFsc2U7CiAgICB9CiAgfQoKICAvLyBJZiB0aGF0IGZhaWxzIHRoZW4gdHJ5IHNlYXJjaGluZyB0aHJvdWdoIHRoZSB2aXNpYmxlIHRleHQKICBpZiAoZm91bmQpIHJldHVybjsKCiAgZm9yIChpID0gMDsgaSA8IGVsZS5vcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICBlbGUub3B0aW9uc1tpXS5zZWxlY3RlZCA9IChlbGUub3B0aW9uc1tpXS50ZXh0ID09IHZhbCk7CiAgfQp9OwoKLyoqCiAqIFJlYWQgdGhlIGN1cnJlbnQgdmFsdWUgZm9yIGEgZ2l2ZW4gSFRNTCBlbGVtZW50LgogKiBAc2VlIGh0dHA6Ly9nZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvdXRpbC9nZXR2YWx1ZQogKi8KZHdyLnV0aWwuZ2V0VmFsdWUgPSBmdW5jdGlvbihlbGUsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucyA9PSBudWxsKSBvcHRpb25zID0ge307CiAgdmFyIG9yaWcgPSBlbGU7CiAgaWYgKHR5cGVvZiBlbGUgPT0gInN0cmluZyIpIHsKICAgIGVsZSA9IGR3ci51dGlsLmJ5SWQoZWxlKTsKICAgIC8vIFdlIGNhbiB3b3JrIHdpdGggbmFtZXMgYW5kIG5lZWQgdG8gc29tZXRpbWVzIGZvciByYWRpbyBidXR0b25zLCBhbmQgSUUgaGFzCiAgICAvLyBhbiBhbm5veWluZyBidWcgd2hlcmUgZ2V0RWxlbWVudEJ5SWQoKSByZXR1cm5zIGFuIGVsZW1lbnQgYmFzZWQgb24gbmFtZSBpZgogICAgLy8gaXQgZG9lc24ndCBmaW5kIGl0IGJ5IGlkLiBIZXJlIHdlIGRvbid0IHdhbnQgdG8gZG8gdGhhdCwgc286CiAgICBpZiAoZWxlICYmIGVsZS5pZCAhPSBvcmlnKSBlbGUgPSBudWxsOwogIH0KICB2YXIgbm9kZXMgPSBudWxsOwogIGlmIChlbGUgPT0gbnVsbCkgewogICAgLy8gTm93IGl0IGlzIHRpbWUgdG8gbG9vayBieSBuYW1lCiAgICBub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKG9yaWcpOwogICAgaWYgKG5vZGVzLmxlbmd0aCA+PSAxKSBlbGUgPSBub2Rlcy5pdGVtKDApOwogIH0KICBpZiAoZWxlID09IG51bGwpIHsKICAgIGR3ci51dGlsLl9kZWJ1ZygiZ2V0VmFsdWUoKSBjYW4ndCBmaW5kIGFuIGVsZW1lbnQgd2l0aCBpZC9uYW1lOiAiICsgb3JpZyArICIuIik7CiAgICByZXR1cm4gIiI7CiAgfQoKICBpZiAoZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQoZWxlLCAic2VsZWN0IikpIHsKICAgIC8vIFVzaW5nICJ0eXBlIiBwcm9wZXJ0eSBpbnN0ZWFkIG9mICJtdWx0aXBsZSIgYXMgInR5cGUiIGlzIGFuIG9mZmljaWFsIAogICAgLy8gY2xpZW50LXNpZGUgcHJvcGVydHkgc2luY2UgSlMgMS4xCiAgICBpZiAoZWxlLnR5cGUgPT0gInNlbGVjdC1tdWx0aXBsZSIpIHsKICAgICAgdmFyIHJlcGx5ID0gbmV3IEFycmF5KCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlLm9wdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGVsZS5vcHRpb25zW2ldOwogICAgICAgIGlmIChpdGVtLnNlbGVjdGVkKSB7CiAgICAgICAgICB2YXIgdmFsdWVBdHRyID0gaXRlbS5nZXRBdHRyaWJ1dGVOb2RlKCJ2YWx1ZSIpOwogICAgICAgICAgaWYgKHZhbHVlQXR0ciAmJiB2YWx1ZUF0dHIuc3BlY2lmaWVkKSB7CiAgICAgICAgICAgIHJlcGx5LnB1c2goaXRlbS52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmVwbHkucHVzaChpdGVtLnRleHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVwbHk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgdmFyIHNlbCA9IGVsZS5zZWxlY3RlZEluZGV4OwogICAgICBpZiAoc2VsICE9IC0xKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBlbGUub3B0aW9uc1tzZWxdOwogICAgICAgIHZhciB2YWx1ZUF0dHIgPSBpdGVtLmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIik7CiAgICAgICAgaWYgKHZhbHVlQXR0ciAmJiB2YWx1ZUF0dHIuc3BlY2lmaWVkKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGl0ZW0udGV4dDsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0KICB9CgogIGlmIChkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsICJpbnB1dCIpKSB7CiAgICBpZiAoZWxlLnR5cGUgPT0gInJhZGlvIikgewogICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID49IDEpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzLml0ZW0oaSk7CiAgICAgICAgICBpZiAobm9kZS50eXBlID09IGVsZS50eXBlKSB7CiAgICAgICAgICAgIGlmIChub2RlLmNoZWNrZWQpIHJldHVybiBub2RlLnZhbHVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZWxlLmNoZWNrZWQ7CiAgICB9CiAgICBpZiAoZWxlLnR5cGUgPT0gImNoZWNrYm94IikgewogICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID49IDEpIHsKICAgICAgICB2YXIgcmVwbHkgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzLml0ZW0oaSk7CiAgICAgICAgICBpZiAobm9kZS50eXBlID09IGVsZS50eXBlKSB7CiAgICAgICAgICAgIGlmIChub2RlLmNoZWNrZWQpIHJlcGx5LnB1c2gobm9kZS52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXBseTsKICAgICAgfQogICAgICByZXR1cm4gZWxlLmNoZWNrZWQ7CiAgICB9CiAgICByZXR1cm4gZWxlLnZhbHVlOwogIH0KCiAgaWYgKGR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGVsZSwgInRleHRhcmVhIikpIHsKICAgIHJldHVybiBlbGUudmFsdWU7CiAgfQoKICBpZiAoZHdyLnV0aWwuX3Nob3VsZEVzY2FwZUh0bWwob3B0aW9ucykpIHsKICAgIGlmIChlbGUudGV4dENvbnRlbnQpIHJldHVybiBlbGUudGV4dENvbnRlbnQ7CiAgICBlbHNlIGlmIChlbGUuaW5uZXJUZXh0KSByZXR1cm4gZWxlLmlubmVyVGV4dDsKICB9CiAgcmV0dXJuIGVsZS5pbm5lckhUTUw7Cn07CgovKioKICogZ2V0VGV4dCgpIGlzIGxpa2UgZ2V0VmFsdWUoKSBleGNlcHQgdGhhdCBpdCByZWFkcyB0aGUgdGV4dCAoYW5kIG5vdCB0aGUgdmFsdWUpIGZyb20gc2VsZWN0IGVsZW1lbnRzCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsL2dldHRleHQKICovCmR3ci51dGlsLmdldFRleHQgPSBmdW5jdGlvbihlbGUpIHsKICBlbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQoZWxlLCAiZ2V0VGV4dCgpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm4gbnVsbDsKICBpZiAoIWR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGVsZSwgInNlbGVjdCIpKSB7CiAgICBkd3IudXRpbC5fZGVidWcoImdldFRleHQoKSBjYW4gb25seSBiZSB1c2VkIHdpdGggc2VsZWN0IGVsZW1lbnRzLiBBdHRlbXB0IHRvIHVzZTogIiArIGR3ci51dGlsLl9kZXRhaWxlZFR5cGVPZihlbGUpICsgIiBmcm9tICBpZDogIiArIG9yaWcgKyAiLiIpOwogICAgcmV0dXJuICIiOwogIH0KCiAgLy8gVGhpcyBpcyBhIGJpdCBvZiBhIHNjYW0gYmVjYXVzZSBpdCBhc3N1bWVzIHNpbmdsZSBzZWxlY3QKICAvLyBidXQgSSdtIG5vdCBzdXJlIGhvdyB3ZSBzaG91bGQgdHJlYXQgbXVsdGktc2VsZWN0LgogIHZhciBzZWwgPSBlbGUuc2VsZWN0ZWRJbmRleDsKICBpZiAoc2VsICE9IC0xKSB7CiAgICByZXR1cm4gZWxlLm9wdGlvbnNbc2VsXS50ZXh0OwogIH0KICBlbHNlIHsKICAgIHJldHVybiAiIjsKICB9Cn07CgovKioKICogR2l2ZW4gYSBtYXAsIG9yIGEgcmVjdXJzaXZlIHN0cnVjdHVyZSBjb25zaXN0aW5nIG9mIGFycmF5cyBhbmQgbWFwcywgY2FsbCAKICogc2V0VmFsdWUoKSBmb3IgYWxsIGxlYWYgZW50cmllcyBhbmQgdXNlIGludGVybWVkaWF0ZSBsZXZlbHMgdG8gZm9ybSBuZXN0ZWQKICogZWxlbWVudCBpZHMuCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci91dGlsL3NldHZhbHVlcwogKi8KZHdyLnV0aWwuc2V0VmFsdWVzID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykgewogIHZhciBwcmVmaXggPSAiIjsKICB2YXIgZGVwdGggPSAxMDA7CiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcmVmaXgpIHByZWZpeCA9IG9wdGlvbnMucHJlZml4OwogIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaWRQcmVmaXgpIHByZWZpeCA9IG9wdGlvbnMuaWRQcmVmaXg7CiAgaWYgKG9wdGlvbnMgJiYgImRlcHRoIiBpbiBvcHRpb25zKSBkZXB0aCA9IG9wdGlvbnMuZGVwdGg7CiAgZHdyLnV0aWwuX3NldFZhbHVlc1JlY3Vyc2l2ZShkYXRhLCBwcmVmaXgsIGRlcHRoLCBvcHRpb25zKTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBSZWN1cnNpdmUgaGVscGVyIGZvciBzZXRWYWx1ZXMoKQogKi8KZHdyLnV0aWwuX3NldFZhbHVlc1JlY3Vyc2l2ZSA9IGZ1bmN0aW9uKGRhdGEsIGlkcGF0aCwgZGVwdGgsIG9wdGlvbnMpIHsKICBpZiAoZGVwdGggPT0gMCkgcmV0dXJuOwogIC8vIEFycmF5IGNvbnRhaW5pbmcgb2JqZWN0cyAtPiBhZGQgIltuXSIgdG8gcHJlZml4IGFuZCBtYWtlIHJlY3Vyc2l2ZSBjYWxsCiAgLy8gZm9yIGVhY2ggaXRlbSBvYmplY3QKICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkoZGF0YSkgJiYgZGF0YS5sZW5ndGggPiAwICYmIGR3ci51dGlsLl9pc09iamVjdChkYXRhWzBdKSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgIGR3ci51dGlsLl9zZXRWYWx1ZXNSZWN1cnNpdmUoZGF0YVtpXSwgaWRwYXRoKyJbIitpKyJdIiwgZGVwdGgtMSwgb3B0aW9ucyk7CiAgICB9CiAgfQogIC8vIE9iamVjdCAobm90IGFycmF5KSAtPiBoYW5kbGUgbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzCiAgZWxzZSBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGEpICYmICFkd3IudXRpbC5faXNBcnJheShkYXRhKSkgewogICAgZm9yICh2YXIgcHJvcCBpbiBkYXRhKSB7CiAgICAgIHZhciBzdWJpZHBhdGggPSBpZHBhdGggPyBpZHBhdGgrIi4iK3Byb3AgOiBwcm9wOwogICAgICAvLyBPYmplY3QgKG5vdCBhcnJheSksIG9yIGFycmF5IGNvbnRhaW5pbmcgb2JqZWN0cyAtPiBjYWxsIG91cnNlbHZlcyByZWN1cnNpdmVseQogICAgICBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGFbcHJvcF0pICYmICFkd3IudXRpbC5faXNBcnJheShkYXRhW3Byb3BdKSAmJiAhZHdyLnV0aWwuX2lzRGF0ZShkYXRhW3Byb3BdKSAKICAgICAgICAgIHx8IGR3ci51dGlsLl9pc0FycmF5KGRhdGFbcHJvcF0pICYmIGRhdGFbcHJvcF0ubGVuZ3RoID4gMCAmJiBkd3IudXRpbC5faXNPYmplY3QoZGF0YVtwcm9wXVswXSkpIHsKICAgICAgICBkd3IudXRpbC5fc2V0VmFsdWVzUmVjdXJzaXZlKGRhdGFbcHJvcF0sIHN1YmlkcGF0aCwgZGVwdGgtMSwgb3B0aW9ucyk7CiAgICAgIH0KICAgICAgLy8gRnVuY3Rpb25zIC0+IHNraXAKICAgICAgZWxzZSBpZiAodHlwZW9mIGRhdGFbcHJvcF0gPT0gImZ1bmN0aW9uIikgewogICAgICAgIC8vIE5PUAogICAgICB9CiAgICAgIC8vIE9ubHkgc2ltcGxlIHZhbHVlcyBsZWZ0IChvciBhcnJheSBvZiBzaW1wbGUgdmFsdWVzLCBvciBlbXB0eSBhcnJheSkKICAgICAgLy8gLT4gY2FsbCBzZXRWYWx1ZSgpCiAgICAgIGVsc2UgewogICAgICAgIC8vIEFyZSB0aGVyZSBhbnkgZWxlbWVudHMgd2l0aCB0aGF0IGlkIG9yIG5hbWUKICAgICAgICBpZiAoZHdyLnV0aWwuYnlJZChzdWJpZHBhdGgpICE9IG51bGwgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoc3ViaWRwYXRoKS5sZW5ndGggPj0gMSkgewogICAgICAgICAgZHdyLnV0aWwuc2V0VmFsdWUoc3ViaWRwYXRoLCBkYXRhW3Byb3BdLCBvcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07CgovKioKICogR2l2ZW4gYSBtYXAsIG9yIGEgcmVjdXJzaXZlIHN0cnVjdHVyZSBjb25zaXN0aW5nIG9mIGFycmF5cyBhbmQgbWFwcywgY2FsbCAKICogZ2V0VmFsdWUoKSBmb3IgYWxsIGxlYWYgZW50cmllcyBhbmQgdXNlIGludGVybWVkaWF0ZSBsZXZlbHMgdG8gZm9ybSBuZXN0ZWQKICogZWxlbWVudCBpZHMuCiAqIEdpdmVuIGEgc3RyaW5nIG9yIGVsZW1lbnQgdGhhdCByZWZlcnMgdG8gYSBmb3JtLCBjcmVhdGUgYW4gb2JqZWN0IGZyb20gdGhlIAogKiBlbGVtZW50cyBvZiB0aGUgZm9ybS4KICogQHNlZSBodHRwOi8vZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL3V0aWwvZ2V0dmFsdWVzCiAqLwpkd3IudXRpbC5nZXRWYWx1ZXMgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09ICJzdHJpbmciIHx8IGR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGRhdGEpKSB7CiAgICByZXR1cm4gZHdyLnV0aWwuZ2V0Rm9ybVZhbHVlcyhkYXRhKTsKICB9CiAgZWxzZSB7CiAgICB2YXIgcHJlZml4ID0gIiI7CiAgICB2YXIgZGVwdGggPSAxMDA7CiAgICBpZiAob3B0aW9ucyAhPSBudWxsICYmIG9wdGlvbnMucHJlZml4KSBwcmVmaXggPSBvcHRpb25zLnByZWZpeDsKICAgIGlmIChvcHRpb25zICE9IG51bGwgJiYgb3B0aW9ucy5pZFByZWZpeCkgcHJlZml4ID0gb3B0aW9ucy5pZFByZWZpeDsKICAgIGlmIChvcHRpb25zICE9IG51bGwgJiYgImRlcHRoIiBpbiBvcHRpb25zKSBkZXB0aCA9IG9wdGlvbnMuZGVwdGg7CiAgICBkd3IudXRpbC5fZ2V0VmFsdWVzUmVjdXJzaXZlKGRhdGEsIHByZWZpeCwgZGVwdGgsIG9wdGlvbnMpOwogICAgcmV0dXJuIGRhdGE7CiAgfQp9OwoKLyoqCiAqIEdpdmVuIGEgc3RyaW5nIG9yIGVsZW1lbnQgdGhhdCByZWZlcnMgdG8gYSBmb3JtLCBjcmVhdGUgYW4gb2JqZWN0IGZyb20gdGhlIAogKiBlbGVtZW50cyBvZiB0aGUgZm9ybS4KICogQHNlZSBodHRwOi8vZ2V0YWhlYWQub3JnL2R3ci9icm93c2VyL3V0aWwvZ2V0dmFsdWVzCiAqLwpkd3IudXRpbC5nZXRGb3JtVmFsdWVzID0gZnVuY3Rpb24oZWxlT3JOYW1lT3JJZCkgewogIHZhciBlbGUgPSBudWxsOwogIGlmICh0eXBlb2YgZWxlT3JOYW1lT3JJZCA9PSAic3RyaW5nIikgewogICAgZWxlID0gZG9jdW1lbnQuZm9ybXNbZWxlT3JOYW1lT3JJZF07CiAgICBpZiAoZWxlID09IG51bGwpIGVsZSA9IGR3ci51dGlsLmJ5SWQoZWxlT3JOYW1lT3JJZCk7CiAgfQogIGVsc2UgaWYgKGR3ci51dGlsLl9pc0hUTUxFbGVtZW50KGVsZU9yTmFtZU9ySWQpKSB7CiAgICBlbGUgPSBlbGVPck5hbWVPcklkOwogIH0KICBpZiAoZWxlICE9IG51bGwpIHsKICAgIGlmIChlbGUuZWxlbWVudHMgPT0gbnVsbCkgewogICAgICBhbGVydCgiZ2V0Rm9ybVZhbHVlcygpIHJlcXVpcmVzIGFuIG9iamVjdCBvciByZWZlcmVuY2UgdG8gYSBmb3JtIGVsZW1lbnQuIik7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIHJlcGx5ID0ge307CiAgICB2YXIgbmFtZTsKICAgIHZhciB2YWx1ZTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChlbGVbaV0udHlwZSBpbiB7YnV0dG9uOjAsc3VibWl0OjAscmVzZXQ6MCxpbWFnZTowLGZpbGU6MH0pIGNvbnRpbnVlOwogICAgICBpZiAoZWxlW2ldLm5hbWUpIHsKICAgICAgICBuYW1lID0gZWxlW2ldLm5hbWU7CiAgICAgICAgdmFsdWUgPSBkd3IudXRpbC5nZXRWYWx1ZShuYW1lKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBpZiAoZWxlW2ldLmlkKSBuYW1lID0gZWxlW2ldLmlkOwogICAgICAgIGVsc2UgbmFtZSA9ICJlbGVtZW50IiArIGk7CiAgICAgICAgdmFsdWUgPSBkd3IudXRpbC5nZXRWYWx1ZShlbGVbaV0pOwogICAgICB9CiAgICAgIHJlcGx5W25hbWVdID0gdmFsdWU7CiAgICB9CiAgICByZXR1cm4gcmVwbHk7CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlIFJlY3Vyc2l2ZSBoZWxwZXIgZm9yIGdldFZhbHVlcygpLgogKi8KZHdyLnV0aWwuX2dldFZhbHVlc1JlY3Vyc2l2ZSA9IGZ1bmN0aW9uKGRhdGEsIGlkcGF0aCwgZGVwdGgsIG9wdGlvbnMpIHsKICBpZiAoZGVwdGggPT0gMCkgcmV0dXJuOwogIC8vIEFycmF5IGNvbnRhaW5pbmcgb2JqZWN0cyAtPiBhZGQgIltuXSIgdG8gaWRwYXRoIGFuZCBtYWtlIHJlY3Vyc2l2ZSBjYWxsCiAgLy8gZm9yIGVhY2ggaXRlbSBvYmplY3QKICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkoZGF0YSkgJiYgZGF0YS5sZW5ndGggPiAwICYmIGR3ci51dGlsLl9pc09iamVjdChkYXRhWzBdKSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgIGR3ci51dGlsLl9nZXRWYWx1ZXNSZWN1cnNpdmUoZGF0YVtpXSwgaWRwYXRoKyJbIitpKyJdIiwgZGVwdGgtMSwgb3B0aW9ucyk7CiAgICB9CiAgfQogIC8vIE9iamVjdCAobm90IGFycmF5KSAtPiBoYW5kbGUgbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzCiAgZWxzZSBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGEpICYmICFkd3IudXRpbC5faXNBcnJheShkYXRhKSkgewogICAgZm9yICh2YXIgcHJvcCBpbiBkYXRhKSB7CiAgICAgIHZhciBzdWJpZHBhdGggPSBpZHBhdGggPyBpZHBhdGgrIi4iK3Byb3AgOiBwcm9wOwogICAgICAvLyBPYmplY3QsIG9yIGFycmF5IGNvbnRhaW5pbmcgb2JqZWN0cyAtPiBjYWxsIG91cnNlbHZlcyByZWN1cnNpdmVseQogICAgICBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGFbcHJvcF0pICYmICFkd3IudXRpbC5faXNBcnJheShkYXRhW3Byb3BdKQogICAgICAgICAgfHwgZHdyLnV0aWwuX2lzQXJyYXkoZGF0YVtwcm9wXSkgJiYgZGF0YVtwcm9wXS5sZW5ndGggPiAwICYmIGR3ci51dGlsLl9pc09iamVjdChkYXRhW3Byb3BdWzBdKSkgewogICAgICAgIGR3ci51dGlsLl9nZXRWYWx1ZXNSZWN1cnNpdmUoZGF0YVtwcm9wXSwgc3ViaWRwYXRoLCBkZXB0aC0xLCBvcHRpb25zKTsKICAgICAgfQogICAgICAvLyBGdW5jdGlvbnMgLT4gc2tpcAogICAgICBlbHNlIGlmICh0eXBlb2YgZGF0YVtwcm9wXSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgLy8gTk9QCiAgICAgIH0KICAgICAgLy8gT25seSBzaW1wbGUgdmFsdWVzIGxlZnQgKG9yIGFycmF5IG9mIHNpbXBsZSB2YWx1ZXMsIG9yIGVtcHR5IGFycmF5KQogICAgICAvLyAtPiBjYWxsIGdldFZhbHVlKCkKICAgICAgZWxzZSB7CiAgICAgICAgLy8gQXJlIHRoZXJlIGFueSBlbGVtZW50cyB3aXRoIHRoYXQgaWQgb3IgbmFtZQogICAgICAgIGlmIChkd3IudXRpbC5ieUlkKHN1YmlkcGF0aCkgIT0gbnVsbCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShzdWJpZHBhdGgpLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICBkYXRhW3Byb3BdID0gZHdyLnV0aWwuZ2V0VmFsdWUoc3ViaWRwYXRoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07CgovKioKICogQWRkIG9wdGlvbnMgdG8gYSBsaXN0IGZyb20gYW4gYXJyYXkgb3IgbWFwLgogKiBAc2VlIGh0dHA6Ly9nZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvbGlzdHMKICovCmR3ci51dGlsLmFkZE9wdGlvbnMgPSBmdW5jdGlvbihlbGUsIGRhdGEvKiwgb3B0aW9ucyovKSB7CiAgZWxlID0gZHdyLnV0aWwuX2dldEVsZW1lbnRCeUlkKGVsZSwgImFkZE9wdGlvbnMoKSIpOwogIGlmIChlbGUgPT0gbnVsbCkgcmV0dXJuOwogIHZhciB1c2VPcHRpb25zID0gZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQoZWxlLCAic2VsZWN0Iik7CiAgdmFyIHVzZUxpID0gZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQoZWxlLCBbInVsIiwgIm9sIl0pOwogIGlmICghdXNlT3B0aW9ucyAmJiAhdXNlTGkpIHsKICAgIGR3ci51dGlsLl9kZWJ1ZygiYWRkT3B0aW9ucygpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBzZWxlY3QvdWwvb2wgZWxlbWVudHMuIEF0dGVtcHQgdG8gdXNlOiAiICsgZHdyLnV0aWwuX2RldGFpbGVkVHlwZU9mKGVsZSkpOwogICAgcmV0dXJuOwogIH0KICBpZiAoZGF0YSA9PSBudWxsKSByZXR1cm47CiAgCiAgdmFyIGFyZ2NvdW50ID0gYXJndW1lbnRzLmxlbmd0aDsKICB2YXIgb3B0aW9ucyA9IHt9OwogIHZhciBsYXN0YXJnID0gYXJndW1lbnRzW2FyZ2NvdW50IC0gMV07IAogIGlmIChhcmdjb3VudCA+IDIgJiYgZHdyLnV0aWwuX2lzT2JqZWN0KGxhc3RhcmcpKSB7CiAgICBvcHRpb25zID0gbGFzdGFyZzsKICAgIGFyZ2NvdW50LS07CiAgfQogIHZhciBhcmczID0gbnVsbDsgaWYgKGFyZ2NvdW50ID49IDMpIGFyZzMgPSBhcmd1bWVudHNbMl07CiAgdmFyIGFyZzQgPSBudWxsOyBpZiAoYXJnY291bnQgPj0gNCkgYXJnNCA9IGFyZ3VtZW50c1szXTsKICBpZiAoIW9wdGlvbnMub3B0aW9uQ3JlYXRvciAmJiB1c2VPcHRpb25zKSBvcHRpb25zLm9wdGlvbkNyZWF0b3IgPSBkd3IudXRpbC5fZGVmYXVsdE9wdGlvbkNyZWF0b3I7CiAgaWYgKCFvcHRpb25zLm9wdGlvbkNyZWF0b3IgJiYgdXNlTGkpIG9wdGlvbnMub3B0aW9uQ3JlYXRvciA9IGR3ci51dGlsLl9kZWZhdWx0TGlzdEl0ZW1DcmVhdG9yOwogIG9wdGlvbnMuZG9jdW1lbnQgPSBlbGUub3duZXJEb2N1bWVudDsKCiAgdmFyIHRleHQsIHZhbHVlLCBsaTsKICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkoZGF0YSkpIHsKICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgZGF0YSB0aGF0IHdlIGRvIGhhdmUKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICBvcHRpb25zLmRhdGEgPSBkYXRhW2ldOwogICAgICBvcHRpb25zLnRleHQgPSBudWxsOwogICAgICBvcHRpb25zLnZhbHVlID0gbnVsbDsKICAgICAgaWYgKHVzZU9wdGlvbnMpIHsKICAgICAgICBpZiAoYXJnMyAhPSBudWxsKSB7CiAgICAgICAgICBpZiAoYXJnNCAhPSBudWxsKSB7CiAgICAgICAgICAgIG9wdGlvbnMudGV4dCA9IGR3ci51dGlsLl9nZXRWYWx1ZUZyb20oZGF0YVtpXSwgYXJnNCk7CiAgICAgICAgICAgIG9wdGlvbnMudmFsdWUgPSBkd3IudXRpbC5fZ2V0VmFsdWVGcm9tKGRhdGFbaV0sIGFyZzMpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBvcHRpb25zLnRleHQgPSBvcHRpb25zLnZhbHVlID0gZHdyLnV0aWwuX2dldFZhbHVlRnJvbShkYXRhW2ldLCBhcmczKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBvcHRpb25zLnRleHQgPSBvcHRpb25zLnZhbHVlID0gZHdyLnV0aWwuX2dldFZhbHVlRnJvbShkYXRhW2ldKTsKCiAgICAgICAgaWYgKG9wdGlvbnMudGV4dCAhPSBudWxsIHx8IG9wdGlvbnMudmFsdWUpIHsKICAgICAgICAgIHZhciBvcHQgPSBvcHRpb25zLm9wdGlvbkNyZWF0b3Iob3B0aW9ucyk7CiAgICAgICAgICBvcHQudGV4dCA9IG9wdGlvbnMudGV4dDsKICAgICAgICAgIG9wdC52YWx1ZSA9IG9wdGlvbnMudmFsdWU7CiAgICAgICAgICBlbGUub3B0aW9uc1tlbGUub3B0aW9ucy5sZW5ndGhdID0gb3B0OwogICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBvcHRpb25zLnZhbHVlID0gZHdyLnV0aWwuX2dldFZhbHVlRnJvbShkYXRhW2ldLCBhcmczKTsKICAgICAgICBpZiAob3B0aW9ucy52YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgICBsaSA9IG9wdGlvbnMub3B0aW9uQ3JlYXRvcihvcHRpb25zKTsKICAgICAgICAgIGlmIChkd3IudXRpbC5fc2hvdWxkRXNjYXBlSHRtbChvcHRpb25zKSkgewogICAgICAgICAgICBvcHRpb25zLnZhbHVlID0gZHdyLnV0aWwuZXNjYXBlSHRtbChvcHRpb25zLnZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGxpLmlubmVySFRNTCA9IG9wdGlvbnMudmFsdWU7CiAgICAgICAgICBlbGUuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBlbHNlIGlmIChhcmc0ICE9IG51bGwpIHsKICAgIGlmICghdXNlT3B0aW9ucykgewogICAgICBhbGVydCgiZHdyLnV0aWwuYWRkT3B0aW9ucyBjYW4gb25seSBjcmVhdGUgc2VsZWN0IGxpc3RzIGZyb20gb2JqZWN0cy4iKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIgcHJvcCBpbiBkYXRhKSB7CiAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGFbcHJvcF07CiAgICAgIG9wdGlvbnMudmFsdWUgPSBkd3IudXRpbC5fZ2V0VmFsdWVGcm9tKGRhdGFbcHJvcF0sIGFyZzMpOwogICAgICBvcHRpb25zLnRleHQgPSBkd3IudXRpbC5fZ2V0VmFsdWVGcm9tKGRhdGFbcHJvcF0sIGFyZzQpOwoKICAgICAgaWYgKG9wdGlvbnMudGV4dCAhPSBudWxsIHx8IG9wdGlvbnMudmFsdWUpIHsKICAgICAgICB2YXIgb3B0ID0gb3B0aW9ucy5vcHRpb25DcmVhdG9yKG9wdGlvbnMpOwogICAgICAgIG9wdC50ZXh0ID0gb3B0aW9ucy50ZXh0OwogICAgICAgIG9wdC52YWx1ZSA9IG9wdGlvbnMudmFsdWU7CiAgICAgICAgZWxlLm9wdGlvbnNbZWxlLm9wdGlvbnMubGVuZ3RoXSA9IG9wdDsKICAgICAgfQogICAgfQogIH0KICBlbHNlIHsKICAgIGlmICghdXNlT3B0aW9ucykgewogICAgICBkd3IudXRpbC5fZGVidWcoImR3ci51dGlsLmFkZE9wdGlvbnMgY2FuIG9ubHkgY3JlYXRlIHNlbGVjdCBsaXN0cyBmcm9tIG9iamVjdHMuIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAodmFyIHByb3AgaW4gZGF0YSkgewogICAgICBpZiAodHlwZW9mIGRhdGFbcHJvcF0gPT0gImZ1bmN0aW9uIikgY29udGludWU7CiAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGFbcHJvcF07CiAgICAgIGlmICghYXJnMykgewogICAgICAgIG9wdGlvbnMudmFsdWUgPSBwcm9wOwogICAgICAgIG9wdGlvbnMudGV4dCA9IGRhdGFbcHJvcF07CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgb3B0aW9ucy52YWx1ZSA9IGRhdGFbcHJvcF07CiAgICAgICAgb3B0aW9ucy50ZXh0ID0gcHJvcDsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy50ZXh0ICE9IG51bGwgfHwgb3B0aW9ucy52YWx1ZSkgewogICAgICAgIHZhciBvcHQgPSBvcHRpb25zLm9wdGlvbkNyZWF0b3Iob3B0aW9ucyk7CiAgICAgICAgb3B0LnRleHQgPSBvcHRpb25zLnRleHQ7CiAgICAgICAgb3B0LnZhbHVlID0gb3B0aW9ucy52YWx1ZTsKICAgICAgICBlbGUub3B0aW9uc1tlbGUub3B0aW9ucy5sZW5ndGhdID0gb3B0OwogICAgICB9CiAgICB9CiAgfQoKICAvLyBBbGwgZXJyb3Igcm91dGVzIHRocm91Z2ggdGhpcyBmdW5jdGlvbiByZXN1bHQgaW4gYSByZXR1cm4sIHNvIGhpZ2hsaWdodCBub3cKICBkd3IudXRpbC5oaWdobGlnaHQoZWxlLCBvcHRpb25zKTsgCn07CgovKioKICogQHByaXZhdGUgR2V0IHRoZSBkYXRhIGZyb20gYW4gYXJyYXkgZnVuY3Rpb24gZm9yIGR3ci51dGlsLmFkZE9wdGlvbnMKICovCmR3ci51dGlsLl9nZXRWYWx1ZUZyb20gPSBmdW5jdGlvbihkYXRhLCBtZXRob2QpIHsKICBpZiAobWV0aG9kID09IG51bGwpIHJldHVybiBkYXRhOwogIGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG1ldGhvZChkYXRhKTsKICBlbHNlIHJldHVybiBkYXRhW21ldGhvZF07Cn07CgovKioKICogQHByaXZhdGUgRGVmYXVsdCBvcHRpb24gY3JlYXRpb24gZnVuY3Rpb24KICovCmR3ci51dGlsLl9kZWZhdWx0T3B0aW9uQ3JlYXRvciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICByZXR1cm4gb3B0aW9ucy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBEZWZhdWx0IGxpc3QgaXRlbSBjcmVhdGlvbiBmdW5jdGlvbgogKi8KZHdyLnV0aWwuX2RlZmF1bHRMaXN0SXRlbUNyZWF0b3IgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG9wdGlvbnMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKfTsKCi8qKgogKiBSZW1vdmUgYWxsIHRoZSBvcHRpb25zIGZyb20gYSBzZWxlY3QgbGlzdCAoc3BlY2lmaWVkIGJ5IGlkKQogKiBAc2VlIGh0dHA6Ly9nZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvbGlzdHMKICovCmR3ci51dGlsLnJlbW92ZUFsbE9wdGlvbnMgPSBmdW5jdGlvbihlbGUpIHsKICBlbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQoZWxlLCAicmVtb3ZlQWxsT3B0aW9ucygpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgdmFyIHVzZU9wdGlvbnMgPSBkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsICJzZWxlY3QiKTsKICB2YXIgdXNlTGkgPSBkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsIFsidWwiLCAib2wiXSk7CiAgaWYgKCF1c2VPcHRpb25zICYmICF1c2VMaSkgewogICAgZHdyLnV0aWwuX2RlYnVnKCJyZW1vdmVBbGxPcHRpb25zKCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHNlbGVjdCwgb2wgYW5kIHVsIGVsZW1lbnRzLiBBdHRlbXB0IHRvIHVzZTogIiArIGR3ci51dGlsLl9kZXRhaWxlZFR5cGVPZihlbGUpKTsKICAgIHJldHVybjsKICB9CiAgaWYgKHVzZU9wdGlvbnMpIHsKICAgIGVsZS5vcHRpb25zLmxlbmd0aCA9IDA7CiAgfQogIGVsc2UgewogICAgd2hpbGUgKGVsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgZWxlLnJlbW92ZUNoaWxkKGVsZS5maXJzdENoaWxkKTsKICAgIH0KICB9Cn07CgovKioKICogQ3JlYXRlIHJvd3MgaW5zaWRlIGEgdGhlIHRhYmxlLCB0Ym9keSwgdGhlYWQgb3IgdGZvb3QgZWxlbWVudCAoZ2l2ZW4gYnkgaWQpLgogKiBAc2VlIGh0dHA6Ly9nZXRhaGVhZC5vcmcvZHdyL2Jyb3dzZXIvdGFibGVzCiAqLwpkd3IudXRpbC5hZGRSb3dzID0gZnVuY3Rpb24oZWxlLCBkYXRhLCBjZWxsRnVuY3MsIG9wdGlvbnMpIHsKICBlbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQoZWxlLCAiYWRkUm93cygpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgaWYgKCFkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsIFsidGFibGUiLCAidGJvZHkiLCAidGhlYWQiLCAidGZvb3QiXSkpIHsKICAgIGR3ci51dGlsLl9kZWJ1ZygiYWRkUm93cygpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB0YWJsZSwgdGJvZHksIHRoZWFkIGFuZCB0Zm9vdCBlbGVtZW50cy4gQXR0ZW1wdCB0byB1c2U6ICIgKyBkd3IudXRpbC5fZGV0YWlsZWRUeXBlT2YoZWxlKSk7CiAgICByZXR1cm47CiAgfQogIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9OwogIGlmICghb3B0aW9ucy5yb3dDcmVhdG9yKSBvcHRpb25zLnJvd0NyZWF0b3IgPSBkd3IudXRpbC5fZGVmYXVsdFJvd0NyZWF0b3I7CiAgaWYgKCFvcHRpb25zLmNlbGxDcmVhdG9yKSBvcHRpb25zLmNlbGxDcmVhdG9yID0gZHdyLnV0aWwuX2RlZmF1bHRDZWxsQ3JlYXRvcjsKICBvcHRpb25zLmRvY3VtZW50ID0gZWxlLm93bmVyRG9jdW1lbnQ7CiAgdmFyIHRyLCByb3dOdW07CiAgaWYgKGR3ci51dGlsLl9pc0FycmF5KGRhdGEpKSB7CiAgICBmb3IgKHJvd051bSA9IDA7IHJvd051bSA8IGRhdGEubGVuZ3RoOyByb3dOdW0rKykgewogICAgICBvcHRpb25zLnJvd0RhdGEgPSBkYXRhW3Jvd051bV07CiAgICAgIG9wdGlvbnMucm93SW5kZXggPSByb3dOdW07CiAgICAgIG9wdGlvbnMucm93TnVtID0gcm93TnVtOwogICAgICBvcHRpb25zLmRhdGEgPSBudWxsOwogICAgICBvcHRpb25zLmNlbGxOdW0gPSAtMTsKICAgICAgdHIgPSBkd3IudXRpbC5fYWRkUm93SW5uZXIoY2VsbEZ1bmNzLCBvcHRpb25zKTsKICAgICAgaWYgKHRyICE9IG51bGwpIGVsZS5hcHBlbmRDaGlsZCh0cik7CiAgICB9CiAgfQogIGVsc2UgaWYgKHR5cGVvZiBkYXRhID09ICJvYmplY3QiKSB7CiAgICByb3dOdW0gPSAwOwogICAgZm9yICh2YXIgcm93SW5kZXggaW4gZGF0YSkgewogICAgICBvcHRpb25zLnJvd0RhdGEgPSBkYXRhW3Jvd0luZGV4XTsKICAgICAgb3B0aW9ucy5yb3dJbmRleCA9IHJvd0luZGV4OwogICAgICBvcHRpb25zLnJvd051bSA9IHJvd051bTsKICAgICAgb3B0aW9ucy5kYXRhID0gbnVsbDsKICAgICAgb3B0aW9ucy5jZWxsTnVtID0gLTE7CiAgICAgIHRyID0gZHdyLnV0aWwuX2FkZFJvd0lubmVyKGNlbGxGdW5jcywgb3B0aW9ucyk7CiAgICAgIGlmICh0ciAhPSBudWxsKSBlbGUuYXBwZW5kQ2hpbGQodHIpOwogICAgICByb3dOdW0rKzsKICAgIH0KICB9CgogIGR3ci51dGlsLmhpZ2hsaWdodChlbGUsIG9wdGlvbnMpOwp9OwoKLyoqCiAqIEBwcml2YXRlIEludGVybmFsIGZ1bmN0aW9uIHRvIGRyYXcgYSBzaW5nbGUgcm93IG9mIGEgdGFibGUuCiAqLwpkd3IudXRpbC5fYWRkUm93SW5uZXIgPSBmdW5jdGlvbihjZWxsRnVuY3MsIG9wdGlvbnMpIHsKICB2YXIgdHIgPSBvcHRpb25zLnJvd0NyZWF0b3Iob3B0aW9ucyk7CiAgaWYgKHRyID09IG51bGwpIHJldHVybiBudWxsOwogIGZvciAodmFyIGNlbGxOdW0gPSAwOyBjZWxsTnVtIDwgY2VsbEZ1bmNzLmxlbmd0aDsgY2VsbE51bSsrKSB7CiAgICB2YXIgZnVuYyA9IGNlbGxGdW5jc1tjZWxsTnVtXTsKICAgIGlmICh0eXBlb2YgZnVuYyA9PSAnZnVuY3Rpb24nKSBvcHRpb25zLmRhdGEgPSBmdW5jKG9wdGlvbnMucm93RGF0YSwgb3B0aW9ucyk7CiAgICBlbHNlIG9wdGlvbnMuZGF0YSA9IGZ1bmMgfHwgIiI7CiAgICBvcHRpb25zLmNlbGxOdW0gPSBjZWxsTnVtOwogICAgdmFyIHRkID0gb3B0aW9ucy5jZWxsQ3JlYXRvcihvcHRpb25zKTsKICAgIGlmICh0ZCAhPSBudWxsKSB7CiAgICAgIGlmIChvcHRpb25zLmRhdGEgIT0gbnVsbCkgewogICAgICAgIGlmIChkd3IudXRpbC5faXNIVE1MRWxlbWVudChvcHRpb25zLmRhdGEpKSB0ZC5hcHBlbmRDaGlsZChvcHRpb25zLmRhdGEpOwogICAgICAgIGVsc2UgewogICAgICAgICAgaWYgKGR3ci51dGlsLl9zaG91bGRFc2NhcGVIdG1sKG9wdGlvbnMpICYmIHR5cGVvZihvcHRpb25zLmRhdGEpID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IGR3ci51dGlsLmVzY2FwZUh0bWwob3B0aW9ucy5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBvcHRpb25zLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTsKICAgIH0KICB9CiAgcmV0dXJuIHRyOwp9OwoKLyoqCiAqIEBwcml2YXRlIERlZmF1bHQgcm93IGNyZWF0aW9uIGZ1bmN0aW9uCiAqLwpkd3IudXRpbC5fZGVmYXVsdFJvd0NyZWF0b3IgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG9wdGlvbnMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBEZWZhdWx0IGNlbGwgY3JlYXRpb24gZnVuY3Rpb24KICovCmR3ci51dGlsLl9kZWZhdWx0Q2VsbENyZWF0b3IgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG9wdGlvbnMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKfTsKCi8qKgogKiBSZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIGdpdmVuIG5vZGUuCiAqIEBzZWUgaHR0cDovL2dldGFoZWFkLm9yZy9kd3IvYnJvd3Nlci90YWJsZXMKICovCmR3ci51dGlsLnJlbW92ZUFsbFJvd3MgPSBmdW5jdGlvbihlbGUsIG9wdGlvbnMpIHsKICBlbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQoZWxlLCAicmVtb3ZlQWxsUm93cygpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307CiAgaWYgKCFvcHRpb25zLmZpbHRlcikgb3B0aW9ucy5maWx0ZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07CiAgaWYgKCFkd3IudXRpbC5faXNIVE1MRWxlbWVudChlbGUsIFsidGFibGUiLCAidGJvZHkiLCAidGhlYWQiLCAidGZvb3QiXSkpIHsKICAgIGR3ci51dGlsLl9kZWJ1ZygicmVtb3ZlQWxsUm93cygpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB0YWJsZSwgdGJvZHksIHRoZWFkIGFuZCB0Zm9vdCBlbGVtZW50cy4gQXR0ZW1wdCB0byB1c2U6ICIgKyBkd3IudXRpbC5fZGV0YWlsZWRUeXBlT2YoZWxlKSk7CiAgICByZXR1cm47CiAgfQogIHZhciBjaGlsZCA9IGVsZS5maXJzdENoaWxkOwogIHZhciBuZXh0OwogIHdoaWxlIChjaGlsZCAhPSBudWxsKSB7CiAgICBuZXh0ID0gY2hpbGQubmV4dFNpYmxpbmc7CiAgICBpZiAob3B0aW9ucy5maWx0ZXIoY2hpbGQpKSB7CiAgICAgIGVsZS5yZW1vdmVDaGlsZChjaGlsZCk7CiAgICB9CiAgICBjaGlsZCA9IG5leHQ7CiAgfQp9OwoKLyoqCiAqIGR3ci51dGlsLmJ5SWQoZWxlKS5jbGFzc05hbWUgPSAiWCIsIHRoYXQgd2UgY2FuIGNhbGwgZnJvbSBKYXZhIGVhc2lseS4KICovCmR3ci51dGlsLnNldENsYXNzTmFtZSA9IGZ1bmN0aW9uKGVsZSwgY2xhc3NOYW1lKSB7CiAgZWxlID0gZHdyLnV0aWwuX2dldEVsZW1lbnRCeUlkKGVsZSwgInNldENsYXNzTmFtZSgpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgZWxlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKfTsKCi8qKgogKiBkd3IudXRpbC5ieUlkKGVsZSkuY2xhc3NOYW1lICs9ICJYIiwgdGhhdCB3ZSBjYW4gY2FsbCBmcm9tIEphdmEgZWFzaWx5LgogKi8KZHdyLnV0aWwuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24oZWxlLCBjbGFzc05hbWUpIHsKICBlbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQoZWxlLCAiYWRkQ2xhc3NOYW1lKCkiKTsKICBpZiAoZWxlID09IG51bGwpIHJldHVybjsKICBlbGUuY2xhc3NOYW1lICs9ICIgIiArIGNsYXNzTmFtZTsKfTsKCi8qKgogKiBkd3IudXRpbC5ieUlkKGVsZSkuY2xhc3NOYW1lIC09ICJYIiwgdGhhdCB3ZSBjYW4gY2FsbCBmcm9tIEphdmEgZWFzaWx5CiAqIEZyb20gY29kZSBvcmlnaW5hbGx5IGJ5IEdhdmluIEtpc3RuZXIKICovCmR3ci51dGlsLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uKGVsZSwgY2xhc3NOYW1lKSB7CiAgZWxlID0gZHdyLnV0aWwuX2dldEVsZW1lbnRCeUlkKGVsZSwgInJlbW92ZUNsYXNzTmFtZSgpIik7CiAgaWYgKGVsZSA9PSBudWxsKSByZXR1cm47CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgiKF58XFxzKSIgKyBjbGFzc05hbWUgKyAiKFxcc3wkKSIsICdnJyk7CiAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShyZWdleCwgJycpOwp9OwoKLyoqCiAqIGR3ci51dGlsLmJ5SWQoZWxlKS5jbGFzc05hbWUgfD0gIlgiLCB0aGF0IHdlIGNhbiBjYWxsIGZyb20gSmF2YSBlYXNpbHkuCiAqLwpkd3IudXRpbC50b2dnbGVDbGFzc05hbWUgPSBmdW5jdGlvbihlbGUsIGNsYXNzTmFtZSkgewogIGVsZSA9IGR3ci51dGlsLl9nZXRFbGVtZW50QnlJZChlbGUsICJ0b2dnbGVDbGFzc05hbWUoKSIpOwogIGlmIChlbGUgPT0gbnVsbCkgcmV0dXJuOwogIHZhciByZWdleCA9IG5ldyBSZWdFeHAoIihefFxccykiICsgY2xhc3NOYW1lICsgIihcXHN8JCkiKTsKICBpZiAocmVnZXgudGVzdChlbGUuY2xhc3NOYW1lKSkgewogICAgZWxlLmNsYXNzTmFtZSA9IGVsZS5jbGFzc05hbWUucmVwbGFjZShyZWdleCwgJycpOwogIH0KICBlbHNlIHsKICAgIGVsZS5jbGFzc05hbWUgKz0gIiAiICsgY2xhc3NOYW1lOwogIH0KfTsKCi8qKgogKiBDbG9uZSBhIG5vZGUgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBkb2N1bWVudCBqdXN0IGFib3ZlIHRoZSAndGVtcGxhdGUnIG5vZGUKICogQHNlZSBodHRwOi8vZ2V0YWhlYWQub3JnL2R3ci8/Pz8KICovCmR3ci51dGlsLmNsb25lTm9kZSA9IGZ1bmN0aW9uKGVsZSwgb3B0aW9ucykgewogIGVsZSA9IGR3ci51dGlsLl9nZXRFbGVtZW50QnlJZChlbGUsICJjbG9uZU5vZGUoKSIpOwogIGlmIChlbGUgPT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgaWYgKG9wdGlvbnMgPT0gbnVsbCkgb3B0aW9ucyA9IHt9OwogIHZhciBjbG9uZSA9IGVsZS5jbG9uZU5vZGUodHJ1ZSk7CiAgaWYgKG9wdGlvbnMuaWRQcmVmaXggfHwgb3B0aW9ucy5pZFN1ZmZpeCkgewogICAgZHdyLnV0aWwuX3VwZGF0ZUlkcyhjbG9uZSwgb3B0aW9ucyk7CiAgfQogIGVsc2UgewogICAgZHdyLnV0aWwuX3JlbW92ZUlkcyhjbG9uZSk7CiAgfQogIGVsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZSwgZWxlKTsKICByZXR1cm4gY2xvbmU7Cn07CgovKioKICogQHByaXZhdGUgVXBkYXRlIGFsbCBvZiB0aGUgaWRzIGluIGFuIGVsZW1lbnQgdHJlZQogKi8KZHdyLnV0aWwuX3VwZGF0ZUlkcyA9IGZ1bmN0aW9uKGVsZSwgb3B0aW9ucykgewogIGlmIChvcHRpb25zID09IG51bGwpIG9wdGlvbnMgPSB7fTsKICBpZiAoZWxlLmlkKSB7CiAgICBlbGUuc2V0QXR0cmlidXRlKCJpZCIsIChvcHRpb25zLmlkUHJlZml4IHx8ICIiKSArIGVsZS5pZCArIChvcHRpb25zLmlkU3VmZml4IHx8ICIiKSk7CiAgfQogIHZhciBjaGlsZHJlbiA9IGVsZS5jaGlsZE5vZGVzOwogIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuLml0ZW0oaSk7CiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMSAvKk5vZGUuRUxFTUVOVF9OT0RFKi8pIHsKICAgICAgZHdyLnV0aWwuX3VwZGF0ZUlkcyhjaGlsZCwgb3B0aW9ucyk7CiAgICB9CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlIFJlbW92ZSBhbGwgdGhlIElkcyBmcm9tIGFuIGVsZW1lbnQKICovCmR3ci51dGlsLl9yZW1vdmVJZHMgPSBmdW5jdGlvbihlbGUpIHsKICBpZiAoZWxlLmlkKSBlbGUucmVtb3ZlQXR0cmlidXRlKCJpZCIpOwogIHZhciBjaGlsZHJlbiA9IGVsZS5jaGlsZE5vZGVzOwogIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuLml0ZW0oaSk7CiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMSAvKk5vZGUuRUxFTUVOVF9OT0RFKi8pIHsKICAgICAgZHdyLnV0aWwuX3JlbW92ZUlkcyhjaGlsZCk7CiAgICB9CiAgfQp9OwoKLyoqCiAqIENsb25lIGEgdGVtcGxhdGUgbm9kZSBhbmQgaXRzIGVtYmVkZGVkIHRlbXBsYXRlIGNoaWxkIG5vZGVzIGFjY29yZGluZyB0bwogKiBjYXJkaW5hbGl0aWVzIChvZiBhcnJheXMpIGluIHN1cHBsaWVkIGRhdGEuICAKICovCmR3ci51dGlsLmNsb25lTm9kZUZvclZhbHVlcyA9IGZ1bmN0aW9uKHRlbXBsYXRlRWxlLCBkYXRhLCBvcHRpb25zKSB7CiAgdGVtcGxhdGVFbGUgPSBkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVFbGUsICJjbG9uZU5vZGVGb3JWYWx1ZXMoKSIpOwogIGlmICh0ZW1wbGF0ZUVsZSA9PSBudWxsKSByZXR1cm4gbnVsbDsKICBpZiAob3B0aW9ucyA9PSBudWxsKSBvcHRpb25zID0ge307CiAgdmFyIGlkcGF0aDsKICBpZiAob3B0aW9ucy5pZFByZWZpeCAhPSBudWxsKQogICAgaWRwYXRoID0gb3B0aW9ucy5pZFByZWZpeDsKICBlbHNlCiAgICBpZHBhdGggPSB0ZW1wbGF0ZUVsZS5pZCB8fCAiIjsgCiAgcmV0dXJuIGR3ci51dGlsLl9jbG9uZU5vZGVGb3JWYWx1ZXNSZWN1cnNpdmUodGVtcGxhdGVFbGUsIGRhdGEsIGlkcGF0aCwgb3B0aW9ucyk7Cn07CgovKioKICogQHByaXZhdGUgUmVjdXJzaXZlIGhlbHBlciBmb3IgY2xvbmVOb2RlRm9yVmFsdWVzKCkuIAogKi8KZHdyLnV0aWwuX2Nsb25lTm9kZUZvclZhbHVlc1JlY3Vyc2l2ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlRWxlLCBkYXRhLCBpZHBhdGgsIG9wdGlvbnMpIHsKICAvLyBJbmNvbWluZyBhcnJheSAtPiBtYWtlIGFuIGlkIGZvciBlYWNoIGl0ZW0gYW5kIGNhbGwgY2xvbmUgb2YgdGhlIHRlbXBsYXRlIAogIC8vIGZvciBlYWNoIG9mIHRoZW0KICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkoZGF0YSkpIHsKICAgIHZhciBjbG9uZXMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICB2YXIgaXRlbSA9IGRhdGFbaV07CiAgICAgIHZhciBjbG9uZSA9IGR3ci51dGlsLl9jbG9uZU5vZGVGb3JWYWx1ZXNSZWN1cnNpdmUodGVtcGxhdGVFbGUsIGl0ZW0sIGlkcGF0aCArICJbIiArIGkgKyAiXSIsIG9wdGlvbnMpOwogICAgICBjbG9uZXMucHVzaChjbG9uZSk7CiAgICB9CiAgICByZXR1cm4gY2xvbmVzOwogIH0KICBlbHNlCiAgLy8gSW5jb21pbmcgb2JqZWN0IChub3QgYXJyYXkpIC0+IGNsb25lIHRoZSB0ZW1wbGF0ZSwgYWRkIGlkIHByZWZpeGVzLCBhZGQgCiAgLy8gY2xvbmUgdG8gRE9NLCBhbmQgdGhlbiByZWN1cnNlIGludG8gYW55IGFycmF5IHByb3BlcnRpZXMgaWYgdGhleSBjb250YWluIAogIC8vIG9iamVjdHMgYW5kIHRoZXJlIGlzIGEgc3VpdGFibGUgdGVtcGxhdGUKICBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KGRhdGEpICYmICFkd3IudXRpbC5faXNBcnJheShkYXRhKSkgewogICAgdmFyIGNsb25lID0gdGVtcGxhdGVFbGUuY2xvbmVOb2RlKHRydWUpOwogICAgaWYgKG9wdGlvbnMudXBkYXRlQ2xvbmVTdHlsZSAmJiBjbG9uZS5zdHlsZSkgewogICAgICBmb3IgKHZhciBwcm9wbmFtZSBpbiBvcHRpb25zLnVwZGF0ZUNsb25lU3R5bGUpIHsKICAgICAgICBjbG9uZS5zdHlsZVtwcm9wbmFtZV0gPSBvcHRpb25zLnVwZGF0ZUNsb25lU3R5bGVbcHJvcG5hbWVdOwogICAgICB9CiAgICB9CiAgICBkd3IudXRpbC5fcmVwbGFjZUlkcyhjbG9uZSwgdGVtcGxhdGVFbGUuaWQsIGlkcGF0aCk7CiAgICB0ZW1wbGF0ZUVsZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZSwgdGVtcGxhdGVFbGUpOwogICAgZHdyLnV0aWwuX2Nsb25lU3ViQXJyYXlzKGRhdGEsIGlkcGF0aCwgb3B0aW9ucyk7CiAgICByZXR1cm4gY2xvbmU7CiAgfQoKICAvLyBJdCBpcyBhbiBlcnJvciB0byBlbmQgdXAgaGVyZSBzbyB3ZSByZXR1cm4gbm90aGluZwogIHJldHVybiBudWxsOwp9OwoKLyoqCiAqIEBwcml2YXRlIFN1YnN0aXR1dGUgYSBsZWFkaW5nIGlkcGF0aCBmcmFnbWVudCB3aXRoIGFub3RoZXIgaWRwYXRoIGZvciBhbGwgCiAqIGVsZW1lbnQgaWRzIHRyZWUsIGFuZCByZW1vdmUgaWRzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIGlkcGF0aC4gCiAqLwpkd3IudXRpbC5fcmVwbGFjZUlkcyA9IGZ1bmN0aW9uKGVsZSwgb2xkaWRwYXRoLCBuZXdpZHBhdGgpIHsKICBpZiAoZWxlLmlkKSB7CiAgICB2YXIgbmV3SWQgPSBudWxsOwogICAgaWYgKGVsZS5pZCA9PSBvbGRpZHBhdGgpIHsKICAgICAgbmV3SWQgPSBuZXdpZHBhdGg7CiAgICB9CiAgICBlbHNlIGlmIChlbGUuaWQubGVuZ3RoID4gb2xkaWRwYXRoLmxlbmd0aCkgewogICAgICBpZiAoZWxlLmlkLnN1YnN0cigwLCBvbGRpZHBhdGgubGVuZ3RoKSA9PSBvbGRpZHBhdGgpIHsKICAgICAgICB2YXIgdHJhaWxpbmdDaGFyID0gZWxlLmlkLmNoYXJBdChvbGRpZHBhdGgubGVuZ3RoKTsKICAgICAgICBpZiAodHJhaWxpbmdDaGFyID09ICIuIiB8fCB0cmFpbGluZ0NoYXIgPT0gIlsiKSB7CiAgICAgICAgICBuZXdJZCA9IG5ld2lkcGF0aCArIGVsZS5pZC5zdWJzdHIob2xkaWRwYXRoLmxlbmd0aCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAobmV3SWQpIHsKICAgICAgZWxlLnNldEF0dHJpYnV0ZSgiaWQiLCBuZXdJZCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTsKICAgIH0KICB9CiAgdmFyIGNoaWxkcmVuID0gZWxlLmNoaWxkTm9kZXM7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgdmFyIGNoaWxkID0gY2hpbGRyZW4uaXRlbShpKTsKICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAxIC8qTm9kZS5FTEVNRU5UX05PREUqLykgewogICAgICBkd3IudXRpbC5fcmVwbGFjZUlkcyhjaGlsZCwgb2xkaWRwYXRoLCBuZXdpZHBhdGgpOwogICAgfQogIH0KfTsKCi8qKgogKiBAcHJpdmF0ZSBGaW5kcyBhcnJheXMgaW4gc3VwcGxpZWQgZGF0YSBhbmQgdXNlcyBhbnkgY29ycmVzcG9uZGluZyB0ZW1wbGF0ZSAKICogbm9kZSB0byBtYWtlIGEgY2xvbmUgZm9yIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuIAogKi8KZHdyLnV0aWwuX2Nsb25lU3ViQXJyYXlzID0gZnVuY3Rpb24oZGF0YSwgaWRwYXRoLCBvcHRpb25zKSB7CiAgZm9yIChwcm9wIGluIGRhdGEpIHsKICAgIHZhciB2YWx1ZSA9IGRhdGFbcHJvcF07CiAgICAvLyBMb29rIGZvciBwb3RlbnRpYWwgcmVjdXJzaXZlIGNsb25pbmcgaW4gYWxsIGFycmF5IHByb3BlcnRpZXMKICAgIGlmIChkd3IudXRpbC5faXNBcnJheSh2YWx1ZSkpIHsKICAgICAgLy8gT25seSBhcnJheXMgd2l0aCBvYmplY3RzIGFyZSBpbnRlcmVzdGluZyBmb3IgY2xvbmluZwogICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCAmJiBkd3IudXRpbC5faXNPYmplY3QodmFsdWVbMF0pKSB7CiAgICAgICAgdmFyIHN1YlRlbXBsYXRlSWQgPSBpZHBhdGggKyAiLiIgKyBwcm9wOwogICAgICAgIHZhciBzdWJUZW1wbGF0ZUVsZSA9IGR3ci51dGlsLmJ5SWQoc3ViVGVtcGxhdGVJZCk7CiAgICAgICAgaWYgKHN1YlRlbXBsYXRlRWxlICE9IG51bGwpIHsKICAgICAgICAgIGR3ci51dGlsLl9jbG9uZU5vZGVGb3JWYWx1ZXNSZWN1cnNpdmUoc3ViVGVtcGxhdGVFbGUsIHZhbHVlLCBzdWJUZW1wbGF0ZUlkLCBvcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8vIENvbnRpbnVlIGxvb2tpbmcgZm9yIGFycmF5cyBpbiBvYmplY3QgcHJvcGVydGllcwogICAgZWxzZSBpZiAoZHdyLnV0aWwuX2lzT2JqZWN0KHZhbHVlKSkgewogICAgICBkd3IudXRpbC5fY2xvbmVTdWJBcnJheXModmFsdWUsIGlkcGF0aCArICIuIiArIHByb3AsIG9wdGlvbnMpOwogICAgfQogIH0KfTsKCi8qKgogKiBAcHJpdmF0ZSBIZWxwZXIgdG8gdHVybiBhIHN0cmluZyBpbnRvIGFuIGVsZW1lbnQgd2l0aCBhbiBlcnJvciBtZXNzYWdlCiAqLwpkd3IudXRpbC5fZ2V0RWxlbWVudEJ5SWQgPSBmdW5jdGlvbihlbGUsIHNvdXJjZSkgewogIHZhciBvcmlnID0gZWxlOwogIGVsZSA9IGR3ci51dGlsLmJ5SWQoZWxlKTsKICBpZiAoZWxlID09IG51bGwpIHsKICAgIGR3ci51dGlsLl9kZWJ1Zyhzb3VyY2UgKyAiIGNhbid0IGZpbmQgYW4gZWxlbWVudCB3aXRoIGlkOiAiICsgb3JpZyArICIuIik7CiAgfQogIHJldHVybiBlbGU7Cn07CgovKioKICogQHByaXZhdGUgSXMgdGhlIGdpdmVuIG5vZGUgYW4gSFRNTCBlbGVtZW50IChvcHRpb25hbGx5IG9mIGEgZ2l2ZW4gdHlwZSk/CiAqIEBwYXJhbSBlbGUgVGhlIGVsZW1lbnQgdG8gdGVzdAogKiBAcGFyYW0gbm9kZU5hbWUgZWcgImlucHV0IiwgInRleHRhcmVhIiAtIGNoZWNrIGZvciBub2RlIG5hbWUgKG9wdGlvbmFsKQogKiAgICAgICAgIGlmIG5vZGVOYW1lIGlzIGFuIGFycmF5IHRoZW4gY2hlY2sgYWxsIGZvciBhIG1hdGNoLgogKi8KZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQgPSBmdW5jdGlvbihlbGUsIG5vZGVOYW1lKSB7CiAgaWYgKGVsZSA9PSBudWxsIHx8IHR5cGVvZiBlbGUgIT0gIm9iamVjdCIgfHwgZWxlLm5vZGVOYW1lID09IG51bGwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKG5vZGVOYW1lICE9IG51bGwpIHsKICAgIHZhciB0ZXN0ID0gZWxlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAodHlwZW9mIG5vZGVOYW1lID09ICJzdHJpbmciKSB7CiAgICAgIHJldHVybiB0ZXN0ID09IG5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICB9CiAgICBpZiAoZHdyLnV0aWwuX2lzQXJyYXkobm9kZU5hbWUpKSB7CiAgICAgIHZhciBtYXRjaCA9IGZhbHNlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVOYW1lLmxlbmd0aCAmJiAhbWF0Y2g7IGkrKykgewogICAgICAgIGlmICh0ZXN0ID09IG5vZGVOYW1lW2ldLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgIG1hdGNoID0gIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIGR3ci51dGlsLl9kZWJ1ZygiZHdyLnV0aWwuX2lzSFRNTEVsZW1lbnQgd2FzIHBhc3NlZCB0ZXN0IG5vZGUgbmFtZSB0aGF0IGlzIG5laXRoZXIgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyIpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBMaWtlIHR5cGVPZiBleGNlcHQgdGhhdCBtb3JlIGluZm9ybWF0aW9uIGZvciBhbiBvYmplY3QgaXMgcmV0dXJuZWQgb3RoZXIgdGhhbiAib2JqZWN0IgogKi8KZHdyLnV0aWwuX2RldGFpbGVkVHlwZU9mID0gZnVuY3Rpb24oeCkgewogIHZhciByZXBseSA9IHR5cGVvZiB4OwogIGlmIChyZXBseSA9PSAib2JqZWN0IikgewogICAgcmVwbHkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHgpOyAvLyBSZXR1cm5zICJbb2JqZWN0IGNsYXNzXSIKICAgIHJlcGx5ID0gcmVwbHkuc3Vic3RyaW5nKDgsIHJlcGx5Lmxlbmd0aC0xKTsgIC8vIEp1c3QgZ2V0IHRoZSBjbGFzcyBiaXQKICB9CiAgcmV0dXJuIHJlcGx5Owp9OwoKLyoqCiAqIEBwcml2YXRlIE9iamVjdCBkZXRlY3Rvci4gRXhjbHVkaW5nIG51bGwgZnJvbSBvYmplY3RzLgogKi8KZHdyLnV0aWwuX2lzT2JqZWN0ID0gZnVuY3Rpb24oZGF0YSkgewogIHJldHVybiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PSAib2JqZWN0Iik7Cn07CgovKioKICogQHByaXZhdGUgQXJyYXkgZGV0ZWN0b3IuIE5vdGU6IGluc3RhbmNlb2YgZG9lc24ndCB3b3JrIHdpdGggbXVsdGlwbGUgZnJhbWVzLgogKi8KZHdyLnV0aWwuX2lzQXJyYXkgPSBmdW5jdGlvbihkYXRhKSB7CiAgcmV0dXJuIChkYXRhICYmIGRhdGEuam9pbik7Cn07CgovKioKICogQHByaXZhdGUgRGF0ZSBkZXRlY3Rvci4gTm90ZTogaW5zdGFuY2VvZiBkb2Vzbid0IHdvcmsgd2l0aCBtdWx0aXBsZSBmcmFtZXMuCiAqLwpkd3IudXRpbC5faXNEYXRlID0gZnVuY3Rpb24oZGF0YSkgewogIHJldHVybiAoZGF0YSAmJiBkYXRhLnRvVVRDU3RyaW5nKSA/IHRydWUgOiBmYWxzZTsKfTsKCi8qKgogKiBAcHJpdmF0ZSBVc2VkIGJ5IHNldFZhbHVlLiBHZXRzIGFyb3VuZCB0aGUgbWlzc2luZyBmdW5jdGlvbmFsbGl0eSBpbiBJRS4KICovCmR3ci51dGlsLl9pbXBvcnROb2RlID0gZnVuY3Rpb24oZG9jLCBpbXBvcnRlZE5vZGUsIGRlZXApIHsKICB2YXIgbmV3Tm9kZTsKCiAgaWYgKGltcG9ydGVkTm9kZS5ub2RlVHlwZSA9PSAxIC8qTm9kZS5FTEVNRU5UX05PREUqLykgewogICAgbmV3Tm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KGltcG9ydGVkTm9kZS5ub2RlTmFtZSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbXBvcnRlZE5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgYXR0ciA9IGltcG9ydGVkTm9kZS5hdHRyaWJ1dGVzW2ldOwogICAgICBpZiAoYXR0ci5ub2RlVmFsdWUgIT0gbnVsbCAmJiBhdHRyLm5vZGVWYWx1ZSAhPSAnJykgewogICAgICAgIG5ld05vZGUuc2V0QXR0cmlidXRlKGF0dHIubmFtZSwgYXR0ci5ub2RlVmFsdWUpOwogICAgICB9CiAgICB9CgogICAgaWYgKGltcG9ydGVkTm9kZS5zdHlsZSAhPSBudWxsKSB7CiAgICAgIG5ld05vZGUuc3R5bGUuY3NzVGV4dCA9IGltcG9ydGVkTm9kZS5zdHlsZS5jc3NUZXh0OwogICAgfQogIH0KICBlbHNlIGlmIChpbXBvcnRlZE5vZGUubm9kZVR5cGUgPT0gMyAvKk5vZGUuVEVYVF9OT0RFKi8pIHsKICAgIG5ld05vZGUgPSBkb2MuY3JlYXRlVGV4dE5vZGUoaW1wb3J0ZWROb2RlLm5vZGVWYWx1ZSk7CiAgfQoKICBpZiAoZGVlcCAmJiBpbXBvcnRlZE5vZGUuaGFzQ2hpbGROb2RlcygpKSB7CiAgICBmb3IgKGkgPSAwOyBpIDwgaW1wb3J0ZWROb2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgbmV3Tm9kZS5hcHBlbmRDaGlsZChkd3IudXRpbC5faW1wb3J0Tm9kZShkb2MsIGltcG9ydGVkTm9kZS5jaGlsZE5vZGVzW2ldLCB0cnVlKSk7CiAgICB9CiAgfQoKICByZXR1cm4gbmV3Tm9kZTsKfTsKCi8qKiBAcHJpdmF0ZSBVc2VkIGludGVybmFsbHkgd2hlbiBzb21lIG1lc3NhZ2UgbmVlZHMgdG8gZ2V0IHRvIHRoZSBwcm9ncmFtbWVyICovCmR3ci51dGlsLl9kZWJ1ZyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIHN0YWNrdHJhY2UpIHsKICB2YXIgd3JpdHRlbiA9IGZhbHNlOwogIHRyeSB7CiAgICBpZiAod2luZG93LmNvbnNvbGUpIHsKICAgICAgaWYgKHN0YWNrdHJhY2UgJiYgd2luZG93LmNvbnNvbGUudHJhY2UpIHdpbmRvdy5jb25zb2xlLnRyYWNlKCk7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhtZXNzYWdlKTsKICAgICAgd3JpdHRlbiA9IHRydWU7CiAgICB9CiAgICBlbHNlIGlmICh3aW5kb3cub3BlcmEgJiYgd2luZG93Lm9wZXJhLnBvc3RFcnJvcikgewogICAgICB3aW5kb3cub3BlcmEucG9zdEVycm9yKG1lc3NhZ2UpOwogICAgICB3cml0dGVuID0gdHJ1ZTsKICAgIH0KICB9CiAgY2F0Y2ggKGV4KSB7IC8qIGlnbm9yZSAqLyB9CgogIGlmICghd3JpdHRlbikgewogICAgdmFyIGRlYnVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImR3ci1kZWJ1ZyIpOwogICAgaWYgKGRlYnVnKSB7CiAgICAgIHZhciBjb250ZW50cyA9IG1lc3NhZ2UgKyAiPGJyLz4iICsgZGVidWcuaW5uZXJIVE1MOwogICAgICBpZiAoY29udGVudHMubGVuZ3RoID4gMjA0OCkgY29udGVudHMgPSBjb250ZW50cy5zdWJzdHJpbmcoMCwgMjA0OCk7CiAgICAgIGRlYnVnLmlubmVySFRNTCA9IGNvbnRlbnRzOwogICAgfQogIH0KfTsKDQo=</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPBody>
              </HTTPResponse>
            </HTTPTask>
          </HTTPTask>
        </HTTPTask>
        <HTTPTask id="29" hostname="omniconv" path="/OMNIStatic/scripts/common-session-storage.js" url="http://omniconv/OMNIStatic/scripts/common-session-storage.js" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="17" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2156" endTime="2262" sendTime="20" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL3NjcmlwdHMvY29tbW9uLXNlc3Npb24tc3RvcmFnZS5qcyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQpDb29raWU6IEpTRVNTSU9OSUQ9MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0xDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Encoding" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VGh1LCAyNiBKdWwgMjAxOCAxNTozNTozMiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjA3YWQ3NDlmNjI0ZDQxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Vary" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="8">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="9">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MzEyMw==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KTGFzdC1Nb2RpZmllZDogVGh1LCAyNiBKdWwgMjAxOCAxNTozNTozMiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDdhZDc0OWY2MjRkNDE6MCINClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzcuNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUdWUsIDE0IEF1ZyAyMDE4IDE5OjI2OjU2IEdNVA0KQ29udGVudC1MZW5ndGg6IDMxMjMNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>DQovL2dlbmVyYXRlIGFuIHVuaXF1ZSBpZCBmb3IgZWFjaCB0YWIgb3IgbmV3IHdpbmRvdw0KZnVuY3Rpb24gZ2VuZXJhdGVHdWlkKCkgew0KICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpOw0KfQ0KDQovL2NoZWNrIGlmIG5vbiBvZiBzZXNzaW9uYnJvd3NlcmlkIGV4aXN0aW5nIHRoZW4gY3JlYXRlIG5ldyBzZXNzZWlvbmJyb3dzZXJpZC4NCmlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uQnJvd3NlcklkIikgPT0gbnVsbCApDQp7DQoJdmFyIHN0clVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnRvTG93ZXJDYXNlKCk7DQoJc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic2Vzc2lvbkJyb3dzZXJJZCIsIGdlbmVyYXRlR3VpZCgpKTsNCgkvL2NyZWF0ZSBuZXcgc2Vzc2lvblN0b3JhZ2Ugc28gd2UgY2FuIHVzZSBsYXRlciBvbiBnbG9iYWwtc2VsZWN0ZWQtZG9jIHRvIHNldCBkb2Mtbm8gZmllbGQgdG8gZW1wdHkNCgkvL2l0IG9ubHkgaGFwcGVucyB3aGVuIHVzZXIgc2VsZWN0IEZpbGUtPk5ldyBXaW5kb3cgd2l0aGluIGN1cnJlbnQgT01OTiBTY3JlZW4uDQoJc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiaXNOZXdCcm93c2VyIiwgIlkiKTsNCgkvL2NoZWNrIGlmIGNvcHkgYW5kIHBhc3RlIGxpbmsgb3IgYm9vayBtYXJrIG9yIG5ldyB3aW5kb3cgdGhlbiByZWRpcmVjdCB0byAvb21uaS9pbmRleC5qc3AJDQoJaWYgKHN0clVybC5pbmRleE9mKCJvbW5pL2luZGV4LmpzcCIpID09IC0xIA0KCQkJJiYgc3RyVXJsLmluZGV4T2YoIm9tbmkvc3ByaW5nYm9hcmQuanNwIikgPT0gLTEgDQoJCQkmJiBzdHJVcmwuaW5kZXhPZigib21uaS9sb2dpbi5qc3AiKSA9PSAtMQ0KCQkJJiYgc3RyVXJsLmluZGV4T2YoIm9tbmkvZGJzY2hlbWF0YWJsZS5qc3AiKSA9PSAtMQ0KCQkJJiYgc3RyVXJsLmluZGV4T2YoIm9tbmkvbWJzL21haW5saW5lc2NhbiIpID09IC0xKQ0KDQoJew0KCQkNCgkJCXdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9vbW5pL3NwcmluZ2JvYXJkLmpzcCI7DQoJfQ0KfQ0KDQovLyBBZGQgc2Vzc2lvbkJyb3dzZXJJZCBhcyBhIGN1c3RvbSByZXF1ZXN0IGhlYWRlciB0byBhbGwgYWpheCByZXF1ZXN0cy4gDQokLmFqYXhTZXR1cCh7DQoJYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKSB7DQoJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uQnJvd3NlcklkJywgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbkJyb3dzZXJJZCcpKTsNCgl9DQp9KTsNCg0KDQoNCi8vY3JlYXRlIG9uYmVmb3JldW5sb2FkIGV2ZW50IHRvIHNlbmQgc2Vzc2lvbkJyb3dzZXJJZCB0byBzZXJ2ZXIgdXNpbmcgSnF1ZXJ5L0FqYXggdG8gc2VydmxldA0KaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7DQoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIHByb2Nlc3NBamF4U2VydmxldCwgZmFsc2UpOw0KCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdFNlc3Npb24sIGZhbHNlKTsNCn0NCmVsc2UgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkgew0KCXdpbmRvdy5hdHRhY2hFdmVudCgib24iICsgImJlZm9yZXVubG9hZCIsIHByb2Nlc3NBamF4U2VydmxldCk7DQoJd2luZG93LmF0dGFjaEV2ZW50KCJvbiIgKyAibG9hZCIsIGluaXRTZXNzaW9uKTsNCn0gDQplbHNlIHsNCgl3aW5kb3dbIm9uIiArICJiZWZvcmV1bmxvYWQiXSA9IHByb2Nlc3NBamF4U2VydmxldDsNCgl3aW5kb3dbIm9uIiArICJsb2FkIl0gPSBpbml0U2Vzc2lvbjsNCn0NCg0KaWYgKHR5cGVvZiBkd3IgIT0gJ3VuZGVmaW5lZCcpDQp7DQoJZHdyLmVuZ2luZS5zZXRQcmVIb29rKHByb2Nlc3NBamF4U2VydmxldCkgOw0KfQ0KDQpmdW5jdGlvbiBwcm9jZXNzQWpheFNlcnZsZXQoKQ0Kew0KCQ0KCXZhciBicm93c2VySWQgPSAiIjsNCglpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbkJyb3dzZXJJZCIpICE9IG51bGwpDQoJew0KCQlicm93c2VySWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uQnJvd3NlcklkIik7CQkJDQoJfQ0KDQoJdmFyIGlucHV0ZGF0YSAgPSB7IHNlc3Npb25Ccm93c2VySWQgOiBicm93c2VySWQgICB9OyANCg0KCSQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgew0KCQkgJC5hamF4U2V0dXAgKHsNCgkJICAgICAgICBhc3luYzogZmFsc2UgLA0KCQkgICAgICAgIC8vIERpc2FibGUgY2FjaGluZyBvZiBBSkFYIHJlc3BvbnNlcyANCgkJICAgICAgICBjYWNoZTogZmFsc2UNCgkJICAgIH0pOw0KDQoJCSAkLmFqYXgoeyAgDQoJCQkgICAgdHlwZTogJ1BPU1QnLCAgDQoJCQkgICAgdXJsOicvb21uaS9IdHRwUmVxdWVzdEFqYXhTZXJ2bGV0JywgDQoJCQkgICAgZGF0YTogaW5wdXRkYXRhLAkJICAgDQoJCQkgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KXsgIA0KDQoJCQkgICAgfSAgICAgICAgICAgICAgICANCgkJCSAgfSk7ICANCgl9KTsgDQp9DQoNCg0KLyogc2VjdGlvbiBmb3Igc2Vzc2lvbiB0aW1lIG91dCAqLw0KLy9Ib3cgZnJlcXVlbnRseSB0byBjaGVjayBmb3Igc2Vzc2lvbiBleHBpcmF0aW9uIGluIG1pbGxpc2Vjb25kcw0KdmFyIHNlc3NfcG9sbEludGVydmFsID0gNjAwMDA7DQovL0hvdyBtYW55IG1pbnV0ZXMgdGhlIHNlc3Npb24gaXMgdmFsaWQgZm9yDQp2YXIgc2Vzc19leHBpcmF0aW9uTWludXRlcyA9IDEyMDsNCi8vSG93IG1hbnkgbWludXRlcyBiZWZvcmUgdGhlIHdhcm5pbmcgcHJvbXB0DQp2YXIgc2Vzc193YXJuaW5nTWludXRlcyA9IDExMDsNCiANCnZhciBzZXNzX2ludGVydmFsSUQ7DQp2YXIgc2Vzc19sYXN0QWN0aXZpdHk7DQoNCkRhdGUucHJvdG90eXBlLmdldE1vbnRoTmFtZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIG1vbnRoTmFtZXMgPSBbICJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsIA0KICAgICAgICAgICAgICAgICAgICAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiIF07DQogICAgICByZXR1cm4gbW9udGhOYW1lc1t0aGlzLmdldE1vbnRoKCldOw0KIH0NCg0KRGF0ZS5wcm90b3R5cGUuZ2V0RGF5TmFtZSA9IGZ1bmN0aW9uKCkgew0KCXZhciBkID0gWydTdW4nLCdNb24nLCdUdWUnLCdXZWQnLCdUaHUnLCdGcmknLCdTYXQnXTsNCglyZXR1cm4gZFt0aGlzLmdldERheSgpXTsNCn0NCiANCmZ1bmN0aW9uIGZvcm1hdFRpbWVPdXREYXRlKG5vdykNCnsNCgl2YXIgaG91ciA9IG5vdy5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBub3cuZ2V0SG91cnMoKSA6IG5vdy5nZXRIb3VycygpOw0KCXZhciBtaW4gPSBub3cuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBub3cuZ2V0TWludXRlcygpIDogbm93LmdldE1pbnV0ZXMoKTsNCgl2YXIgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpOw0KCXZhciBtb250aE5hbWUgPSBub3cuZ2V0TW9udGhOYW1lKCk7DQoJdmFyIGRheU5hbWUgPSBub3cuZ2V0RGF5TmFtZSgpOw0KCXJldHVybiBob3VyICsgIjoiICsgbWluICsgIiBvbiAiICsgZGF5TmFtZSArICIsICIgKyBub3cuZ2V0RGF0ZSgpICsgIi0iICsgbW9udGhOYW1lICsgIi0iICsgeWVhcjsNCn0NCg0KDQpmdW5jdGlvbiBpbml0U2Vzc2lvbigpIHsNCiAgICBzZXNzX2xhc3RBY3Rpdml0eSA9IG5ldyBEYXRlKCk7CQkJDQogICAgc2Vzc1NldEludGVydmFsKCk7DQogICAgJChkb2N1bWVudCkuYmluZCgna2V5cHJlc3Muc2Vzc2lvbicsIGZ1bmN0aW9uIChlZCwgZSkgew0KICAgICAgICBzZXNzS2V5UHJlc3NlZChlZCwgZSk7DQogICAgfSk7DQp9DQpmdW5jdGlvbiBzZXNzU2V0SW50ZXJ2YWwoKSB7DQogICAgc2Vzc19pbnRlcnZhbElEID0gc2V0SW50ZXJ2YWwoJ3Nlc3NJbnRlcnZhbCgpJywgc2Vzc19wb2xsSW50ZXJ2YWwpOw0KfQ0KZnVuY3Rpb24gc2Vzc0NsZWFySW50ZXJ2YWwoKSB7DQogICAgY2xlYXJJbnRlcnZhbChzZXNzX2ludGVydmFsSUQpOw0KDQp9DQpmdW5jdGlvbiBzZXNzS2V5UHJlc3NlZChlZCwgZSkgew0KICAgIHNlc3NfbGFzdEFjdGl2aXR5ID0gbmV3IERhdGUoKTsNCn0NCg0KZnVuY3Rpb24gc2Vzc0ludGVydmFsKCkgew0KCXZhciB3aW5XaWR0aCA9IDQwMDsNCgl2YXIgd2luSGVpZ2h0ID0gMjAwOw0KICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOw0KCXZhciByZXR1cm5WYWwgPSAiIjsNCiAgICAvL2dldCBtaWxsaXNlY29uZHMgb2YgZGlmZmVybmVjZXMNCiAgICB2YXIgZGlmZiA9IG5vdyAtIHNlc3NfbGFzdEFjdGl2aXR5Ow0KICAgIC8vZ2V0IG1pbnV0ZXMgYmV0d2VlbiBkaWZmZXJlbmNlcw0KICAgIHZhciBkaWZmTWlucyA9IChkaWZmIC8gMTAwMCAvIDYwKTsNCiAgICB2YXIgdXJsID0gIi9PTU5JU3RhdGljL2RpYWxvZ3Mvc2Vzc2lvblRpbWVvdXREaWFsb2cuaHRtbCI7DQogICANCiAgICB2YXIgd2FybmluZ0ZsYWcgPSB0cnVlOw0KICAgIGlmIChkaWZmTWlucyA+PSBzZXNzX3dhcm5pbmdNaW51dGVzICAmJiBkaWZmTWlucyA8IHNlc3NfZXhwaXJhdGlvbk1pbnV0ZXMpIHsNCiAgICAgICAgLy93YXJuIGJlZm9yZSBleHBpcmluZw0KICAgICAgICAvL3N0b3AgdGhlIHRpbWVyDQogICAgICAgIC8vc2Vzc0NsZWFySW50ZXJ2YWwoKTsNCiAgICAgICAgLy9wcm9tcHQgZm9yIGF0dGVudGlvbg0KICAgIAl3YXJuaW5nRmxhZyA9IGZhbHNlOw0KCQl2YXIgcGFyYW1ldGVycyA9IG5ldyBBcnJheSgpOwkNCgkJdmFyIG5vd0Zvcm1hdCA9ICBmb3JtYXRUaW1lT3V0RGF0ZShub3cpIDsNCgkJcGFyYW1ldGVyc1swXSA9ICJXYXJuaW5nIjsNCgkJcGFyYW1ldGVyc1sxXSA9ICJJdCBpcyAnIiArIG5vd0Zvcm1hdCArICAiJyAiOw0KCQlwYXJhbWV0ZXJzWzJdID0gIklmIHlvdSBhcmUgc3RpbGwgdXNpbmcgdGhlIE9NTkkgQXBwbGljYXRpb24sIFxucGxlYXNlIGNsaWNrIE9LIHdpdGggaW4gdGhlIG5leHQgMTAgbWludXRlcyB0byBcbmNvbnRpbnVlLiAgT3RoZXJ3aXNlLCB5b3VyIHNlc3Npb24gd2lsbCBleHBpcmUgYW5kIFxuYWxsIHVuc2F2ZWQgZG9jdW1lbnRhdGlvbiB3aWxsIGJlIGxvc3QuIjsNCgkJcGFyYW1ldGVyc1szXSA9ICJZb3VyIFNlc3Npb24gaGFzIGV4cGlyZWQgZHVlIHRvIDIgaG91cnMgXG5vZiBpbmFjdGl2aXR5LiAgQ2xpY2sgT0sgYW5kIG5hdmlnYXRlIHRvIHRoZSBcbidpRE9DJyBob21lIHBhZ2UgdG8gYWNjZXNzIE9NTkkuIjsNCgkJcmV0dXJuVmFsID0gd2luZG93LnNob3dNb2RhbERpYWxvZyh1cmwscGFyYW1ldGVycywiZGlhbG9nV2lkdGg6IiArIHdpbldpZHRoICsgIiBweDtkaWFsb2dIZWlnaHQ6IiArIHdpbkhlaWdodCArICJweDtjZW50ZXI6MTtoZWxwOjA7c3RhdHVzOjAiKTsNCgkJd2FybmluZ0ZsYWcgPSB0cnVlOw0KCQlpZiAodHlwZW9mIHJldHVyblZhbCA9PSAndW5kZWZpbmVkJykgew0KCQkJIHJldHVybiBmYWxzZTsNCgkJfSBlbHNlIGlmIChyZXR1cm5WYWwgIT0gbnVsbCAmJiByZXR1cm5WYWwgPT0gJ09LJykgew0KDQogICAgICAgICAgICBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgZGlmZiA9IG5vdyAtIHNlc3NfbGFzdEFjdGl2aXR5Ow0KICAgICAgICAgICAgZGlmZk1pbnMgPSAoZGlmZiAvIDEwMDAgLyA2MCk7DQogICAgICAgICAgICBpZiAoZGlmZk1pbnMgPCBzZXNzX2V4cGlyYXRpb25NaW51dGVzKSB7DQogICAgICAgICAgLy8gICAgICBzZXNzTG9nT3V0KCk7DQogICAgICAgICAgLy8gIH0NCiAgICAgICAgICAvLyAgZWxzZSB7DQogICAgICAgICAgICAgICAgaW5pdFNlc3Npb24oKTsNCiAgICAgICAgICAgICAgICBzZXNzU2V0SW50ZXJ2YWwoKTsNCiAgICAgICAgICAgICAgICBzZXNzX2xhc3RBY3Rpdml0eSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCgkJDQogICAgICAgIA0KICAgIH0NCgkvL2V4cGlyZWQNCglpZiAod2FybmluZ0ZsYWcgJiYgZGlmZk1pbnMgPj0gc2Vzc19leHBpcmF0aW9uTWludXRlcykgew0KCQlzZXNzQ2xlYXJJbnRlcnZhbCgpOw0KCQl2YXIgcGFyYW1ldGVycyA9IG5ldyBBcnJheSgpOwkNCgkJdmFyIG5vd0Zvcm1hdCA9ICBmb3JtYXRUaW1lT3V0RGF0ZShub3cpIDsNCgkJcGFyYW1ldGVyc1swXSA9ICJFeHBpcmVkIjsNCgkJcGFyYW1ldGVyc1sxXSA9ICJJdCBpcyAnIiArIG5vd0Zvcm1hdCArICAiJyAiOw0KCQlwYXJhbWV0ZXJzWzJdID0gIklmIHlvdSBhcmUgc3RpbGwgdXNpbmcgdGhlIE9NTkkgQXBwbGljYXRpb24sIFxucGxlYXNlIGNsaWNrIE9LIHdpdGggaW4gdGhlIG5leHQgMTAgbWludXRlcyB0byBcbmNvbnRpbnVlLiAgT3RoZXJ3aXNlLCB5b3VyIHNlc3Npb24gd2lsbCBleHBpcmUgYW5kIFxuYWxsIHVuc2F2ZWQgZG9jdW1lbnRhdGlvbiB3aWxsIGJlIGxvc3QuIjsNCgkJcGFyYW1ldGVyc1szXSA9ICJZb3VyIFNlc3Npb24gaGFzIGV4cGlyZWQgZHVlIHRvIDIgaG91cnMgXG5vZiBpbmFjdGl2aXR5LiAgQ2xpY2sgT0sgYW5kIG5hdmlnYXRlIHRvIHRoZSBcbidpRE9DJyBob21lIHBhZ2UgdG8gYWNjZXNzIE9NTkkuIjsNCgkJcmV0dXJuVmFsID0gd2luZG93LnNob3dNb2RhbERpYWxvZyh1cmwscGFyYW1ldGVycywiZGlhbG9nV2lkdGg6IiArIHdpbldpZHRoICsgIiBweDtkaWFsb2dIZWlnaHQ6IiArIHdpbkhlaWdodCArICJweDtjZW50ZXI6MTtoZWxwOjA7c3RhdHVzOjAiKTsNCg0KCX0NCn0NCiAgICANCg0KICAgIC8qIGVuZCBzZWN0aW9uIGZvciBzZXNzaW9uIHRpbWUgb3V0ICovDQogICAgDQovL2RlZmVjdCAyNjI1MCBHbG9iYWwgLSByb2xsYmFjayBjaGFuZ2VzIG1hZGUgZm9yIENRIDI1ODkxDQovL1dpdGggalF1ZXJ5IHRvIGRpc2FibGUgZ2xvYmFsIHJpZ2h0IGNsaWNrIHBlciBkZWZlY3QgMjU4OTENCi8vJChkb2N1bWVudCkub24oew0KIC8vICAgImNvbnRleHRtZW51IjogZnVuY3Rpb24oZSkgew0KICAgICAgIC8vIGFsZXJ0KCJjdHggbWVudSBidXR0b246IiwgZS53aGljaCk7IA0KDQogICAgICAgIC8vIFN0b3AgdGhlIGNvbnRleHQgbWVudQ0KLy8gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCi8vCX0NCi8vY29tbWVudCBvdXQgZm9yIGRlZmVjdCBPTU5JMDAwMjYwNDYNCi8vLA0KLy8JIm1vdXNlZG93biI6IGZ1bmN0aW9uKGUpIHsgDQoJICAgIC8vY29uc29sZS5sb2coIm5vcm1hbCBtb3VzZSBkb3duOiIsIGUud2hpY2gpOyANCgkJLy8gZS5tZXRhS2V5ID0gZmFsc2U7DQoJDQogLy8JCWlmICggZS5jdHJsS2V5ICYmIGUud2hpY2ggPT0gMSkNCi8vCQl7DQovLwkJCWFsZXJ0KCJDVFJMICsgQ2xpY2sgaXMgZGlzYWJsZS4iKTsNCi8vCQkJZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KCQkNCi8vCQl9DQovLwkJaWYgKCBlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0xKQ0KLy8JCXsNCi8vCQkJYWxlcnQoIlNISUZUICsgQ2xpY2sgaXMgZGlzYWJsZS4iKTsNCi8vCQkJZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KCQkNCi8vCQl9DQovLwkJaWYgKGUud2hpY2ggPT0yKQ0KLy8JCXsNCi8vCQkJYWxlcnQoIk1pZGRsZSBDbGljayBpcyBkaXNhYmxlLiIpOw0KLy8JCQllLnJldHVyblZhbHVlID0gZmFsc2U7DQoNCi8vCQl9DQoNCi8vCQkJCWlmKGUuc2hpZnRLZXkpIHsgDQoNCi8vCX0NCgkvLywNCgkvLyJtb3VzZXVwIjogZnVuY3Rpb24oZSkgeyANCgkgLy8gICBjb25zb2xlLmxvZygibm9ybWFsIG1vdXNlIHVwOiIsIGUud2hpY2gpOyANCgkvL30NCg0KDQovL30pOw0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="30" hostname="omniconv" path="/OMNIStatic/images/logo-doc.gif" url="http://omniconv/OMNIStatic/images/logo-doc.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8637" connectionId="2060" origin="HTML" ordinal="18" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2157" endTime="2265" sendTime="1" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9sb2dvLWRvYy5naWYgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aW1hZ2UvZ2lm</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MTAwNA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMDA0DQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0lGODlhoQAmALMAAP////T08efn39razs3NvMDAq7OzmaamiJubeouLZX5+U3FxQmtrOmZmMwAAAAAAACH5BAUUAAAALAAAAAChACYAAAT/EMhJq7046827/2AojmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGo/IkGAiCEycGejztUzyFtAGQ1I4aBRVQMC7MYQ5hoaCgQCYLYOC9YUgAAiILSBhbzKhYGFOS2eEAAtyYlKKFQ0TDAOIEgJVCG2Tcyp4AHV1AAwEDAYKXqQJCgAKC2mUqA0JB46HBwoNAmycCQltBgwHqxSkVbcIAQsHCAupYASkqJknxgCOAwnTk7TTfakDbmauEsyXjmABegwBBl4CzxN4uGCKBI4GBp8DAgmJ0CW2ytMDFJg7kC1AHmvx6rG7lkpAPQnkWoVzaG+huwn64i1AUICevQb1/97wK6GAVDgFIQEUQGXtELslCsE1DAhAQESGHmu20xaumcQAORksGbBoZAhWElgZ26WMwIJjDb0tlBXvVwJHB9A5XWDnocVJCxo08JKVHSlqDQgYK2m0CIFEetrKRVFywZm5ePPq3TvCId9Jpw7UU4Dgrl6nDYoagGUAQTwZYlMglRDWzgoELTXZ5TBAFgWgmQEM6NbCaRWCkm1RiMzkwl3Dk0BaqBKgKOwwtS4EOJO7Qm/dsBdJubs7nOfZRTExuTuZsmrBaXbX6ijWyUqxdmLFUqfGQMCxYhVQtwcAemJ2IMU6MgeSdLjCC1ANYADSMsR/FggLiO9GTck0JaGCR/9nliXDQALseQegBL8IkIdO6bG2wGihNZeKLR1BZE0a9qRhDWlq1NSAXfjI1p8c9NUWYobTbNiAHLUs8VtSsnTUzYwi7jRBGlw00I1YA9gBpFo+XnjIJfb8FqJN3QDlRRow2mLAP2dYGNaF9TTAi2rTPEPAgjaRFyaNMsoSYi1ZbgmTajj2NiaOQOEXjCxjhgjRM2kg0As6Jho3QYiTAaoaK/OoYV9/Z2hpJAWBevFKlyKKaSJSvZ15HKKYtkmnbDh+cqmfkUJ6J43u2UQGqJAGigpSSL2T2I5cpvIPh4xy6YipQKEyZqiZmrlqn5hSeml0or3aqU1y0uhEZ07YKaqZTTtVN4GSur4IkRys2mLfq87peUAC5DkX35pgnCpWGmldtdk0Y6FXmFgH2KRaWOOiZ81V1sSCBQXjSlLoqU+sQQAl3h0ChiSxpFUedhIgoIV4d4Qnh75jMJzHAJhBeO8rCnUBQnE0DlxBchXAhgHIGvgxsskYUHIGyh28NhzJNXEA8wgW/qXzBVeFu/PPQAct9NBEF200XhEAADs=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="31" hostname="omniconv" path="/OMNIStatic/images/logo-omni.gif" url="http://omniconv/OMNIStatic/images/logo-omni.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="19" startDateTime="2018-08-14T12:26:56.616-07:00" startTime="2157" endTime="2266" sendTime="3" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9sb2dvLW9tbmkuZ2lmIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCkNvb2tpZTogSlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTENCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aW1hZ2UvZ2lm</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MjM1Ng==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAyMzU2DQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0lGODlhPAEoAPcAAAAAAGZmM3x8UIqKY5aWc6Ghgqurj7W1nb6+qcfHtdDQwNjYy+Dg1ujo4PDw6/f39QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAA8ASgAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKnUq1qtWrWLNq3cq1q9evYMOKHUu2rNmzGBk4SMiAwcC2Fxug7engQUcHalPK7biAgIEDBwYcKJiAQAIBhg0jnuhggIABEw8ImLyX4GQBg50SmFyA4ObHa0k+2Jw54efHChYSQFBAQGWSDQIY4CjZrcAHAyALjL3gnwLevl9HfFxRQIDOBBEECJAaqgHjCAgqQH4SM0MDAQQwJKA7OsoDwi1i//c+UEEAAgIZBLCt3rbF3BWfaycoPyn1ggyUC3DPoDTC+xlZt5B6uikEn0kNkMeRA5MdZFwC/7SX3noYHRgZAQFAKNACCzR4FAPzGdSWcgX2pxCIHQl4YgAFJmQhSQX4t9EBLB6EoWEDsIijjrsVYEABayVgAAEMcDfbQIX9ZWEDPgL5j5AFKEAAegUdkECNAg3m4ZMD/CjXAoExUAABBezV15jN/dMAmQmMadd0MWZZQAF9DZAaAlOm+YABQ/YG5gBikvmlcVOK6FYBx6VX2p59/tPhedzl1mZuBiSQm1ysxfnPAwcQMN0AEGJm6QBUiojlAXNKOYB3nxkm0HQ/rv/FqacFgIoqndzdmadADoxZgHeIIpZAp+TB6uQ/t6qqYEE5tjgQjZBJGCGFvu2H7HwYRscglc+5tQCWClgrmUDZFhnas/9MFlp0Hqo32HNZykbufIuZ1xuDqQnAmgMG6FboA5NBSOKhAqzFIITf9kbjkZsJ5BhCcP2TY3Qm/nOwowH09jDGmXk4QG9zClSrXd8OwGi67y5LEIG3Tdabed5ZaKldh/nJIqMACyAwiwSvtdkDAA/m7oYBZDbzkwL0lvPLAajsMJZV1iittJMBhh2E4zoMWWxHpqtb1Qdcfe25Vf6D3WzebWkbjW6p19u1u004WNbwxUYAYJuttXG6yEn/SBpgAnTmdpbz7Y0fe5O1ldnfknW292JrFvxPZ5Kduxjflh2wQNcHsaz1QAIe+K2GEtN73+N9U+hAaMQNLZB1ow+0sYUqRu2syIlOTaF6BrTVll1ZSwwZjW8LP23vvgMfokGDMahdx8urmWPb1AZvMXaDHaY3ejQm4LtttGcm4WPfyyUt3dG/5d6VH3cMqO9y7Q3vAeol0ECoy29cuwDdrlhg+J/7R96eRaHaAXBa7vkHiaZVGusMMF5uOaBBnOegjCFwQtQDENw+xzbZRStRVUofugR4nLdtSTJh21315qOAAUSpaCLz0QDk0j2DHHB86Ttf4UQYoQQiSjCvS9/e/2KjAHb5KIgE0Z9/AueYBOIHagc8kGPO1UEDFkhAElrTx1oHw9cNZooEjOAVZUSQK8noSkfSnW22pKYNGu9bXSNOupZHQx4iSyDsA918zIgsFa5NO9tioG+I5J5v3ccuN6QQGNNzwQ0ajiALcGKOMrPICJXOMjM0m4AaBrqvLfGLkjtIyTwIOkp2x4LzWosVS4nB0tmFiw0cjHKKN0AJHkRsuwkckjKER172ETkISE1rQjM7AdgFRPOhETCFGUobgs475mGOAqWJIbVcSUPPcQDX+ngAByDgMrokoXcMoMr5MAg55kEYi9ayuSf5MpuTMyYjbcOngjAoMyVj52xac/9Ms+kGRKE5p0C+6RaB8kqXIALULbNjlzm2DDlbOhCIIGRQJFosnOn0GsYgw6DZKMCgEtWZRQGmwYLUqVMEKJ6q7LTS5ljqMdEJDKmYlBvk1MovjqHSS1eFrNwQgGyy+6kCs5Sb3AymNb3bTGFyowCZ/rRxCnhOpQLXKRAGBjEgq6kWBaMqTzlqM10aJFOdqs2aFqRWLixIEQfSl8ccqQFmVRN57tMrMhFALg6IVPP02kKjnrWotNKqXtFKnU6hyWJ6FZlgjdpVBbTwbodBz3MKsFQgIsuuzSHsVsk4F4fhJYCdDa1XiHRQp4n2tFbh05DShNrWuva1sI2tbGdL29oR2va2uM2tbnfL29769rcVCQgAOw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="32" hostname="omniconv" path="/OMNIStatic/images/buttons/button-minus.gif" url="http://omniconv/OMNIStatic/images/buttons/button-minus.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8637" connectionId="2060" origin="HTML" ordinal="20" startDateTime="2018-08-14T12:26:56.617-07:00" startTime="2157" endTime="2267" sendTime="2" waitTime="0" receiveTime="0">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9idXR0b25zL2J1dHRvbi1taW51cy5naWYgSFRUUC8xLjENClJlZmVyZXI6IGh0dHA6Ly9vbW5pY29udi9vbW5pL2luZGV4LmpzcA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBvbW5pY29udg0KQ29va2llOiBKU0VTU0lPTklEPTAwMDBXbVhScTR3cW5KdE9BUl9MSDJYc2F1eDotMQ0KDQo=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aW1hZ2UvZ2lm</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>MjY2</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAyNjYNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0lGODlhEQASAMQAADc3HMXFlJycdXt7XF1dL7S0h9TUqKSke7y8jZmZZsfHpa2te8zMmdbWrI2NasDAmNXVsra2ic7OpZaWcb6+k4SEY6CgeNvbtsPDntHRq66ug////wAAAAAAAAAAAAAAACH5BAUUABsALAAAAAARABIAAAWH4EaMZGmKmKJg2OO+DxVFI2RnuKTvjDxel4ZhuOMhCqOGUMJoOpsUjSbZYD6fiMNhNDRcsVru8NsMRCwWsQHAbrPNaLXbDU8TumRGXWz97u8GfVcBBQICIzplAYuMCBoTEyNQCEcFlgVSAg4OIwGOBxaGkJAOFQOcBBSYoQKjo6WRIiazJBshADs=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
        <HTTPTask id="33" hostname="omniconv" path="/OMNIStatic/images/buttons/button-plus.gif" url="http://omniconv/OMNIStatic/images/buttons/button-plus.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="HTML" ordinal="21" startDateTime="2018-08-14T12:26:56.617-07:00" startTime="2157" endTime="2268" sendTime="0" waitTime="0" receiveTime="1">
          <HTTPRequest method="GET">
            <HTTPHeaders>
              <HTTPHeaderEntity name="Referer" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="User-Agent" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Encoding" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Language" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>ZW4tVVM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ki8q</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Connection" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Host" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>b21uaWNvbnY=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Cookie" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SlNFU1NJT05JRD0wMDAwV21YUnE0d3FuSnRPQVJfTEgyWHNhdXg6LTE=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9idXR0b25zL2J1dHRvbi1wbHVzLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQpDb29raWU6IEpTRVNTSU9OSUQ9MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0xDQoNCg==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
              <HTTPCookies>
                <HTTPHeaderEntity name="JSESSIONID" index="0">
                  <HTTPDataSet>
                    <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                      <ActualData>MDAwMFdtWFJxNHdxbkp0T0FSX0xIMlhzYXV4Oi0x</ActualData>
                    </HTTPData>
                  </HTTPDataSet>
                  <IsExternalData>false</IsExternalData>
                </HTTPHeaderEntity>
              </HTTPCookies>
            </HTTPHeaders>
          </HTTPRequest>
          <HTTPResponse>
            <HTTPHeaders>
              <HTTPHeaderEntity name="Content-Type" index="0">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>aW1hZ2UvZ2lm</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Last-Modified" index="1">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Accept-Ranges" index="2">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Ynl0ZXM=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="ETag" index="3">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Server" index="4">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="X-Powered-By" index="5">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>QVNQLk5FVA==</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Date" index="6">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPHeaderEntity name="Content-Length" index="7">
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>Mjc0</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPHeaderEntity>
              <HTTPAllHeaders>
                <HTTPDataSet>
                  <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                    <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAyNzQNCg0K</ActualData>
                  </HTTPData>
                </HTTPDataSet>
                <IsExternalData>false</IsExternalData>
              </HTTPAllHeaders>
            </HTTPHeaders>
            <HTTPBody>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0lGODlhEQASAMQAADc3HL6+k42Nal1dL6mpf9TUqHt7XMzMmZycdbS0h6Ske8XFlM7OpdbWrLa2iZmZZtXVsry8jcfHpZaWccHBmYSEY6CgeNvbtsPDntHRq66ug////wAAAAAAAAAAAAAAACH5BAUUABsALAAAAAARABIAAAWP4DaMZGmKmCRhGOW+VOA4I2RnOKPvhzxel0ZhuONFEqOGcAcAHJ49DSHZYECb0ENEoRgNC1cn1MH1DsPQhcNiMTffcMC6PRjG43Mz+Il9qtlmVnxiB390RGh+CQgIIzppTQuSERoTEyNPARFHCZ0JUggCAiMLlAoWjJaWAhUGowMBCQSoCKqqrJciJrskGyEAOw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPBody>
          </HTTPResponse>
        </HTTPTask>
      </HTTPTask>
    </HTTPTask>
  </HTTPTask>
  <HTTPTask id="3" hostname="omniconv" path="/OMNIStatic/images/menu-top/bubble-bg-2-line.gif" url="http://omniconv/OMNIStatic/images/menu-top/bubble-bg-2-line.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="ExtraRes" ordinal="1" startDateTime="2018-08-14T12:26:56.343-07:00" startTime="1884" endTime="1901" sendTime="1" waitTime="0" receiveTime="18">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctMi1saW5lLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTM2OA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMzY4DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlh3ABaAOYAAPr69fT06fDw7efn3uTk2t/f193dvNvbt9fXz9jYutbWrdXVttTUqM/Prc/PpszMzMzMmcbGt8XFlMPDrMLCvsTEmb29tL+/lLu7m7y8jbi4tbi4orW1q7a2lLa2ibKynbOzhq+vrK6upLCwlK6ug62tj6urmqqqf6amnqSkjKWlfKOjlKCgeJycipmZmZubdJSUh5WVcZGRjpGRf46OhY6OdIyMbYeHc4WFgoKCY4CAeHt7Znl5cXZ2c2dnXGZmZmBgU1tbWldXVE5OTP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUUAEQALAAAAADcAFoAAAf/gESCg4SDCDgBhYqLjI2Oj5CRkpOUlZaXmJQPLS0liZmgoaKjpKWmliYjCjAEp66vsLGyowIwEAo0Fa2zvL2+v6UILQwMGCm7wMnKy8xEHCXEDi0HzdXW16QAMBXEDCkdyNji4+SKBTAMDuoVx+Xu79jPxBDqLQvw+PnALdwM9A4jRoTTR7DgKAIw1Dn4J82AwYcQMVlIMQ/CvxQXPkXcyJFRiwsV/2EoMbCjyYgDaCi0yJCGw5MwI24Y5o8lPW/gYuos2KJDOpv/KrQoubNoMwEaXChVuhKoAwVLo0qdSrWq1atYs2rdyrWr169VUQwIhTRCggMHFChIt9ApA7Vw/+PKnUu3rt27ePPq3cu3r9+/ch18kFEAFIcIBtLCVQfUojrAkCNLnky5st9u0VrgyFQgRIIEcH82tqnAAebTqFOrXs26tevXsGPLnk0bs0LGGXpYkMhBMePRo28LH068uPHjyJMrX868ufPnt4FK8KCDBiYUE9S2Bc69u/fv4MOLH0++vPnzozOAqMEDk4sGa7ejn0+/vv37+M1LyEAixg/3a9WU34AEFmjggY2pp8IL/13iQoAIRijhhBR6pyCDAIZU4YYcdnjfhQ1a8qCGHpZo4oncgZihgCi26GKJKjoI4Ys01jhhjCLOaOOOPOKHYyUjstjjkESO9yMlQRap5P+SFoKwYIhA6sjklFMeOUmSVGa5pJWSYKnllz1yGYmXYJZJo5iQkGnmmiei+YiabMbJoZuOwCnnnRLS2YidePZZoJ6M8OnnoB86iaGMJBKqqH2ALiLoopCS16gij0Zq6XeTFlLppZymZyiUSMbX6ajhZUrIiPKRqmqCn2IiQ1OrxmqTgv65CqussvLHgg2gTrLCBqniOqoExHpwAgs79CqJCCtAQCyxF2Qg7bTUVmvttdhmq+223Hbr7bfghivutx6QwEIMPuiAyQM0XOBuBh6AQMK89NZr77345qvvvvz26++/AAcs8MD/nnBsDDkIIUImOMwQr8EsRCzxxBRXbPG1xRhnrPHGHHfs8ccgh+zxCy8gDEQQoCDQww0kx+DyyzDHLPPMNNds880456zzzjz37DPPNtiQAxBDUBDKAzr8oLTSQTTt9NNQRy311FRXbfXVWGet9dZcd731D0YbJfbYZJdt9tlop6322my37fbbcMct99x012333XjnrffefPft99+ABy744IQXbvjhiCeu+OKMN+7445BHLvnklFdu+eWYZ6755px37vnnoIcu+uikl455IAA7</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="4" hostname="omniconv" path="/OMNIStatic/images/menu-top/bubble-bg-3-line.gif" url="http://omniconv/OMNIStatic/images/menu-top/bubble-bg-3-line.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="ExtraRes" ordinal="2" startDateTime="2018-08-14T12:26:56.343-07:00" startTime="1884" endTime="1920" sendTime="21" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctMy1saW5lLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTQxMg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxNDEyDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlh3ABaAOYAAPr69fT06fDw7efn3uTk2t/f193dvNvbt9fXz9jYutbWrdXVttTUqM/Prc/PpszMzMzMmcbGt8XFlMPDrMLCvsTEmb29tL+/lLu7m7y8jbi4tbi4orW1q7a2lLa2ibKynbOzhq+vrK6upLCwlK6ug62tj6urmqqqf6amnqSkjKWlfKOjlKCgeJycipmZmZubdJSUh5WVcZGRjpGRf46OhY6OdIyMbYeHc4WFgoKCY4CAeHt7Znl5cXZ2c2dnXGZmZmBgU1tbWldXVE5OTP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUUAEQALAAAAADcAFoAAAf/gESCg4SDCDgBhYqLjI2Oj5CRkpOUlZaXmJQPLS0liZmgoaKjpKWmliYjCjAEp66vsLGyowIwEAo0Fa2zvL2+v6UILQwMGCm7wMnKy8xEHCXEDi0HzdXW16QAMBXEDCkdyNji4+SKBTAMDuoVx+Xu79jPxBDqLQvw+PnALdwM9A4jRoTTR7DgKAIw1Dn4J82AwYcQMVlIMQ/CvxQXPkXcyJFRiwsV/2EoMbCjyYgDaCi0yJCGw5MwI24Y5o8lPW/gYuos2KJDOpv/KrQoubNoMwEaXChVuhKoAwVLo0qdSrWq1atYs2rdyrWr169VUQwIhTRCggMHFChIt9ApA7Vw/+PKnUu3rt27ePPq3cu3r9+/ch18kFEAFIcIBtLCVQfUojrAkCNLnky5st9u0VrgyFQgRIIEcH82tqnAAebTqFOrXs26tevXsGPLnk0bs0LGGXpYkMhBMePRo28LH068uPHjyJMrX868ufPnt4FK8KCDBiYUE9S2Bc69u/fv4MOLH0++vPnzozOAqMEDk4sGa7ejn0+/vv37+M1LyEAixg/3aomW34AEFmjggdJ5cMIL/13iwlo1ISjhhBRWyN0FCjIIYEgWdujhh/ddAIIKGjoIIYgopqgieOqR2KAlD3K44ow0gthiiTCeWOOOPFJ444uVxBhhj0QWed+PGw5p5P+STI6HpIkyNinllI09mWOUVGYppZVB6qjll1uOiGOXWIJp5o5cUiLkmWwSmeYka7YpJ41vShLnnHiiWGckd+bpp4V7QtLnn4QiGOgjgxaq6ICHOpLoopDW12gjj0ZqqXmTMlLppZyGl+kim3YqKnefKhLqqKjaVGohp6aa6qqEtOrqqLAOIuusndYqyK24XqorEbz2GumvwQq7KLFeGjsrsmUqm6uYQKqZrLOoMqsktaJai62rzMq37bMubujtt75Ci4kMTZELrn/npquurySwYEO0k6ywwbjvFirBvgqysAO9koiwAgT77ntBBggnrPDCDDfs8MMQRyzxxBRXbPHhxRhX7EG8MfigAyYP0HDByBl4AAIJKKes8sost+zyyzDHLPPMNNds880403zCCSzEkIMQImSCwwwm78zC0UgnrfTSTDft9NNQRy311FRXbfXVVL/wgs9ABAEKAj3coHUMZJdt9tlop6322my37fbbcMct99x0y22DDTkAMQQFoTygww+AAx7E4IQXbvjhiCeu+OKMN+7445BHLvnkkf/At1GYZ6755px37vnnoIcu+uikl2766ainrvrqrLfu+uuwxy777LTXbvvtuOeu++689+7778AHL/zwxBdv/PHIwxMIADs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="5" hostname="omniconv" path="/OMNIStatic/images/menu-top/bubble-bg-1-line.gif" url="http://omniconv/OMNIStatic/images/menu-top/bubble-bg-1-line.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8634" connectionId="2016" origin="ExtraRes" ordinal="3" startDateTime="2018-08-14T12:26:56.343-07:00" startTime="1884" endTime="1926" sendTime="26" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctMS1saW5lLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTMwMQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMzAxDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlh3ABaAOYAAPr69fT06fDw7efn3uTk2t/f193dvNvbt9fXz9jYutbWrdXVttTUqM/Prc/PpszMzMzMmcbGt8XFlMPDrMLCvsTEmb29tL+/lLu7m7y8jbi4tbi4orW1q7a2lLa2ibKynbOzhq+vrK6upLCwlK6ug62tj6urmqqqf6amnqSkjKWlfKOjlKCgeJycipmZmZubdJSUh5WVcZGRjpGRf46OhY6OdIyMbYeHc4WFgoKCY4CAeHt7Znl5cXZ2c2dnXGZmZmBgU1tbWldXVE5OTP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUUAEQALAAAAADcAFoAAAf/gESCg4SDCDgBhYqLjI2Oj5CRkpOUlZaXmJQPLS0liZmgoaKjpKWmliYjCjAEp66vsLGyowIwEAo0Fa2zvL2+v6UILQwMGCm7wMnKy8xEHCXEDi0HzdXW16QAMBXEDCkdyNji4+SKBTAMDuoVx+Xu79jPxBDqLQvw+PnALdwM9A4jRoTTR7DgKAIw1Dn4J82AwYcQMVlIMQ/CvxQXPkXcyJFRiwsV/2EoMbCjyYgDaCi0yJCGw5MwI24Y5o8lPW/gYuos2KJDOpv/KrQoubNoMwEaXChVuhKoAwVLo0qdSrWq1atYs2rdyrWr169VUQwIhTRCggMHFChIt9ApA7Vw/+PKnUu3rt27ePPq3cu3r9+/ch18kFEAFIcIBtLCVQfUojrAkCNLnky5st9u0VrgyFQgRIIEcH82tqnAAebTqFOrXs26tevXsGPLnk0bs0LGGXpYkMhBMePRo28LH068uPHjyJMrX868ufPnt4FK8KCDBiYUE9S2Bc69u/fv4MOLH0++vPnzozOAqMEDk4sGa7ejn0+/vv37+M1LyEAixg/3aomW34AEFmjggdJ5cMIL/13iwlo1ISjhhBRWyN0FCjIIYEgWdujhh/ddAIIKGjoIIYgopqgieOqR2KAlD3K44ow0gthiiTCeWOOOPFJ444uVxBhhj0QWed+PGw5p5P+STI6HpIkyNinllI09maOAVGaZpZVBxqfll1RySYkMTYFpppEt+ocJmb+d6SaP/LFgA5CUrLCBfG/miaIEfCrIwg50TiLCChDwyecFGSSq6KKMNuroo5BGKumklFZq6aWYZmqpBySwEIMPOmDyAA0XlJqBByCQoOqqrLbq6quwxirrrLTWauutuOaqq60nnOBpDkKIkAkOM6DaKwvIJqvsssw26+yz0EYr7bTUVmvttdhW+8ILMeQARBCgINDDDdvGYO656Kar7rrstuvuu/DGK++89NZrL7022ODtEBSE8oAOPwQccBAEF2zwwQgnrPDCDDfs8MMQRyzxxBRL/ENyv0ZlrPHGHHfs8ccghyzyyCSXbPLJKKes8sost+zyyzDHLPPMNNds880456zzzjz37PPPQAct9NBEF2300UgnrfTSTDft9NNQRy311FRXbfXVWGet9dZcd+3112CHLfbYZJdt9tlop6322my37fbbEQUCADs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="6" hostname="omniconv" path="/OMNIStatic/images/menu-top/bubble-bg-5-line.gif" url="http://omniconv/OMNIStatic/images/menu-top/bubble-bg-5-line.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8635" connectionId="1180" origin="ExtraRes" ordinal="4" startDateTime="2018-08-14T12:26:56.343-07:00" startTime="1884" endTime="1927" sendTime="28" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9idWJibGUtYmctNS1saW5lLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTQ1Ng==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxNDU2DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlh3ABaAOYAAPr69fT06fDw7efn3uTk2t/f193dvNvbt9fXz9jYutbWrdXVttTUqM/Prc/PpszMzMzMmcbGt8XFlMPDrMLCvsTEmb29tL+/lLu7m7y8jbi4tbi4orW1q7a2lLa2ibKynbOzhq+vrK6upLCwlK6ug62tj6urmqqqf6amnqSkjKWlfKOjlKCgeJycipmZmZubdJSUh5WVcZGRjpGRf46OhY6OdIyMbYeHc4WFgoKCY4CAeHt7Znl5cXZ2c2dnXGZmZmBgU1tbWldXVE5OTP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAUUAEQALAAAAADcAFoAAAf/gESCg4SDCDgBhYqLjI2Oj5CRkpOUlZaXmJQPLS0liZmgoaKjpKWmliYjCjAEp66vsLGyowIwEAo0Fa2zvL2+v6UILQwMGCm7wMnKy8xEHCXEDi0HzdXW16QAMBXEDCkdyNji4+SKBTAMDuoVx+Xu79jPxBDqLQvw+PnALdwM9A4jRoTTR7DgKAIw1Dn4J82AwYcQMVlIMQ/CvxQXPkXcyJFRiwsV/2EoMbCjyYgDaCi0yJCGw5MwI24Y5o8lPW/gYuos2KJDOpv/KrQoubNoMwEaXChVuhKoAwVLo0qdSrWq1atYs2rdyrWr169VUQwIhTRCggMHFChIt9ApA7Vw/+PKnUu3rt27ePPq3cu3r9+/ch18kFEAFIcIBtLCVQfUojrAkCNLnky5st9u0VrgyFQgRIIEcH82tqnAAebTqFOrXs26tevXsGPLnk0bs0LGGXpYkMhBMePRo28LH068uPHjyJMrX868ufPnt4FK8KCDBiYUE9S2Bc69u/fv4MOLH0++vPnzozOAqMEDk4sGa7ejn0+/vv37+M1LyEAixg/3aomW34AEFmjggdJ5cMIL/13iwlo1ISjhhBRWyN0FCjIIYEgWdujhh/ddAIIKGjoIIYgopqgieOqR2KAlD3K44ow0gthiiTCeWOOOPFJ444uVxBhhj0QWed+PGw5p5P+STI6HpIkyNinllI09mWOUVGYppZVB6qjll1uOiGOXWIJp5o5cUiLkmWwSmeYka7YpJ41vShLnnHiiWGckd+bpp4V7QtLnn4QiGOgjgxaq6ICHOpLoopDW12gjj0ZqqXmTMlLppZyGl+kim3YqKnefKhLqqKjaVGohp6aa6qqEtOrqqLAOIuusndYqyK24XqorEbz2GumvwQq7KLFeGjsrsmUqm6uYQKqZrLOoMqsktaJai62r2m5bLbRJevuti+GKmy24UF5rLqTdrusruleq626h7c7LLrxkymuvn/XuSy++0jbr75z9DswvwHBOa3CeBS9MMMJ2KuywnA1PzGb/xRabiXHGX27McZYefzxlyCI3SXLJS56McpEqr9wjs/K5DDLEfMYnM5i/ytDUzTOr4B8mOv/GM5X8sWBDtJOssEHMQxspwdMKsrAD0pKIsAIETz99QQZcd+3112CHLfbYZJdt9tlop6322myn7QEJLMTggw6YPEDDBXhn4AEIJPTt99+ABy744IQXbvjhiCeu+OKMN574CSfEnYMQImSCwwx7Q87C5px37vnnoIcu+uikl2766ainrvrqqL/wQgw5ABEEKAj0cIPrMeSu++689+7778AHL/zwxBdv/PHIJ3+8DTbEPgQFoTygww/UUx/E9dhnr/323Hfv/ffghy/+Dfjkl2/++eX/AH0mgQAAOw==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="7" hostname="omniconv" path="/OMNIStatic/images/menu-top/css-bg-on.jpg" url="http://omniconv/OMNIStatic/images/menu-top/css-bg-on.jpg" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8636" connectionId="2052" origin="ExtraRes" ordinal="5" startDateTime="2018-08-14T12:26:56.344-07:00" startTime="1884" endTime="1928" sendTime="28" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9jc3MtYmctb24uanBnIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvanBlZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTAyNw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2pwZWcNCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMTYgSmFuIDIwMTggMTQ6NTg6MTAgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjAyZDliNmNkYThlZDMxOjAiDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTAyNw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL/2wBDAQEBAQEBAQICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL/wAARCAATAJYDAREAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAkF/8QAKBAAAAMJAAEEAwEAAAAAAAAAAAYHAQIDBAUYV5fUEQkTFDcId7Yi/8QAGgEBAAIDAQAAAAAAAAAAAAAAAAQFAQcIA//EADERAAECAwcCAwcFAAAAAAAAAAABAwIEEwUWUlSRlNIGEQcSITM2QXJ0s8EjMUJRYf/aAAwDAQACEQMRAD8Aujb2geD0g1qTOIcj3ht/PTm5e5l5Saww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6ILe0DwekGtSZxBeG389Obl7mKTWGHRBb2geD0g1qTOILw2/npzcvcxSaww6Ia9CRxJCrWJAxFRMCAVDFSY/wAqjmIrFChFww0adYxrrk/Rq/RJeBNykdzz/iPLxYUaG1vlx91vho9Wep+omXYYknprvCqRJ5n3Y4fRe/rBGqwRJ/cMXeGJPRUVDCstL/FCpKOflCX6jSG0VXzHQCsYqVBc9g2VyeppdL5wk3WshOzD0xMNgyspV3PLPlyDvtwppnmfpbjIHzafR+gOk+r5PqSU9ezcy2n6zXwX4VGu6r3bVf3TuqtxL5YlVFhjjqnWImov8J/DmIugAAAAAAAAAAAAAAAAAAAAAAAAAAAAnF6n30GUf2/QP4yvjZfhX7wvfRufflyHO+yT5vwpR0a0JgAAAAAAAAAAAAAAAAAAAAAAAAAAAATi9T76DKP7foH8ZXxsvwr94Xvo3Pvy5DnfZJ834U//2Q==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="8" hostname="omniconv" path="/OMNIStatic/images/menu-top/logged-in-bg.jpg" url="http://omniconv/OMNIStatic/images/menu-top/logged-in-bg.jpg" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="ExtraRes" ordinal="6" startDateTime="2018-08-14T12:26:56.344-07:00" startTime="1884" endTime="1922" sendTime="1" waitTime="0" receiveTime="2">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9sb2dnZWQtaW4tYmcuanBnIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvanBlZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjQzMQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2pwZWcNCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMTYgSmFuIDIwMTggMTQ6NTg6MTAgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjAyZDliNmNkYThlZDMxOjAiDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMjQzMQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAYAY4DAREAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAcECv/EAC0QAAADCQEAAgEDBAMAAAAAAAAHCAMEFxhWWJOX0tYBAgYFEiEREzhBKDFI/8QAGwEBAAICAwAAAAAAAAAAAAAAAAQGAgMFBwj/xAAzEQABAgILAAACCQUAAAAAAAAAAQIEkQMFEhQVUlNVlNHTEUEGEyMxMjNRYbEhIkNxcv/aAAwDAQACEQMRAD8A6MB4vLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABXkqFj+EP6X03P73+gOTd6fSEJ57eWv3ZM/n7NW7yXn462bNPt8/s/r8/P3aff7fb5/n/v5HdtaxFNiVYNR6ojY2LRPh+iU7/wBficaz8Lf+U/gvcJS/pxwwsuBCvNPqOmvZkISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewISl/TjhhZcBeqfUdNewbPzD8Plx/u/q36Sy/44/wAtHxzZ/H+OP+/s8O/1+P8Azj/tqy+P8cf5+/0+Jcf3fVON8+kX0d+vtx8Az7f+r4mGYn5/zdTULU/z/Oko0/P/ABN+3+KU8ajpPh/a77vkv6fsv7fx/r7ptNulO5tPe6C49IKVhVZ7dH8OI8zfbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbNBNulO5tPe6C49IGFVnt0fw4jzFtuZs0E26U7m097oLj0gYVWe3R/DiPMW25mzQTbpTubT3uguPSBhVZ7dH8OI8xbbmbND//2Q==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="9" hostname="omniconv" path="/OMNIStatic/images/menu-top/css-bg-off.jpg" url="http://omniconv/OMNIStatic/images/menu-top/css-bg-off.jpg" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8633" connectionId="2040" origin="ExtraRes" ordinal="7" startDateTime="2018-08-14T12:26:56.344-07:00" startTime="1884" endTime="1925" sendTime="3" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LXRvcC9jc3MtYmctb2ZmLmpwZyBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNwDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NDsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUw0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG9tbmljb252DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvanBlZw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI1Mg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2pwZWcNCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMTYgSmFuIDIwMTggMTQ6NTg6MTAgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjAyZDliNmNkYThlZDMxOjAiDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvNy41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFR1ZSwgMTQgQXVnIDIwMTggMTk6MjY6NTYgR01UDQpDb250ZW50LUxlbmd0aDogMTI1Mg0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL/2wBDAQEBAQEBAQICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL/wAARCAATAJYDAREAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAcJAgUK/8QALRAAAAMFCQABAwUAAAAAAAAAAAQGAgMFBwgBFxhWWJKX0tUJEhMhFjh4gbf/xAAbAQEAAgIDAAAAAAAAAAAAAAAAAwQBBwIFBv/EADIRAAECAgoAAwYHAAAAAAAAAAABAwIFEhQVUVJUkZOx0hEhQQQGIjEygSM1QnJzsrP/2gAMAwEAAhEDEQA/AOs3CTSpplp84Ylx5o0racyzD+652L1CG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NBhJpU0y0+cMS480LTmWYf3XOwoQ3JoMJNKmmWnzhiXHmhacyzD+652FCG5NDJilCmQs2wZhMgJQJqKl2mX8MUaOl8mEWrYBEHTX3CcbSyxSZYnFITEijyxl+RicNOFIgRMu3ZomZcGHTt6zygm00gjRU9oe8UXx83Iok8r0VVRUvRUVF9TCwQ3ITQmqjIRKwv+lqml8lklYUZsYSE8FnE06hkZM2HsW/SxDFJEDFpKEwhalWPzEIU6sKQ9Ql2HijSZZwVdqFMorZklnTU2Z9IXoU+OD0/fB4/OBbvnAvkv6YoqscFBTcjUZdAAAAAAAAAAAAAAAAAAAAAAAAAAAACnb5t/2qS/8A5BpX/OFWPVe6H5lH/BF/o2Qv/T9ya7zF3mQ9tLdBWqzGHkmF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gXmLvMh7aW6BVmMPIF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gXmLvMh7aW6BVmMPIF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gXmLvMh7aW6BVmMPIF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gXmLvMh7aW6BVmMPIF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gXmLvMh7aW6BVmMPIF5i7zIe2lugVZjDyBeYu8yHtpboFWYw8gri+T9XqRQSCSJSMxYyfLOpwQAy7dPrHVjLL9lFqB0y8s+2zZ+fpbas/sd77vNNt+2xeCeH4UX94CF/6fuf/2Q==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="10" hostname="omniconv" path="/OMNIStatic/images/menu-left/img-noarrow.gif" url="http://omniconv/OMNIStatic/images/menu-left/img-noarrow.gif" ip="10.37.149.132" port="80" client_ip="10.39.45.89" client_port="8632" connectionId="2036" origin="ExtraRes" ordinal="8" startDateTime="2018-08-14T12:26:56.344-07:00" startTime="1884" endTime="1926" sendTime="2" waitTime="0" receiveTime="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL29tbmljb252L29tbmkvaW5kZXguanNw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQ7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tv</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>b21uaWNvbnY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9PTU5JU3RhdGljL2ltYWdlcy9tZW51LWxlZnQvaW1nLW5vYXJyb3cuZ2lmIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vb21uaWNvbnYvb21uaS9pbmRleC5qc3ANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0OyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogb21uaWNvbnYNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvZ2lm</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAyZDliNmNkYThlZDMxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NTg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBKYW4gMjAxOCAxNDo1ODoxMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDJkOWI2Y2RhOGVkMzE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVHVlLCAxNCBBdWcgMjAxOCAxOToyNjo1NiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiA1OA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>R0lGODlhBABkAIAAAP///////yH5BAEHAAEALAAAAAAEAGQAAAIRhI+py+0Po5y02ouz3rz7rxUAOw==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>